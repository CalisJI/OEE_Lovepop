(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8446],{61576:(j,I,e)=>{"use strict";e.d(I,{n:()=>i});var t=e(27702),n=e(44910);function i(s){const{children:r,instanceSettings:m}=s,d=(0,t.useMemo)(()=>({instanceSettings:m,meta:m.meta}),[m]);return t.createElement(n._.Provider,{value:d},r)}},44910:(j,I,e)=>{"use strict";e.d(I,{_:()=>n});var t=e(27702);const n=(0,t.createContext)(void 0)},90665:(j,I,e)=>{"use strict";e.d(I,{b:()=>i});var t=e(27702),n=e(44910);function i(s){const{children:r,...m}=s;return t.createElement(n._.Provider,{value:m},r)}},58971:(j,I,e)=>{"use strict";e.d(I,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},93752:(j,I,e)=>{"use strict";e.d(I,{g:()=>i});var t=e(27702),n=e(44910);function i(){const s=(0,t.useContext)(n._);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},46580:(j,I,e)=>{"use strict";e.d(I,{P:()=>s,i:()=>i});var t=e(29241),n=e(32053);class i{constructor(d,o){return this.fields=[],this.length=0,s(d,o)}}function s(m,d){const o={fields:[],length:m.length};if(!m?.length)return o;if(d){for(const a of d)o.fields.push(r(a,m.map(g=>g[a])));return o}const l=m.find(a=>a!=null);return l!=null&&(typeof l=="object"?o.fields=Object.keys(l).map(a=>r(a,m.map(g=>g[a]))):o.fields.push(r(t.M5,m))),o}function r(m,d){const o={name:m,config:{},values:d,type:t.fS.other};return o.type=(0,n.fu)(o)??t.fS.other,o}},52141:(j,I,e)=>{"use strict";e.d(I,{a:()=>i});var t=e(64282),n=e(72164);class i extends n.v{constructor(r){super(void 0,m=>new t.d({...r,buffer:m}))}}},66784:(j,I,e)=>{"use strict";e.d(I,{Ib:()=>r,Jy:()=>s,Y:()=>o,vP:()=>d});var t=e(29241),n=e(32053);const i={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function s(l,a){for(const g in l){const c=i[g];for(const h of l[g])h<a.length&&(a[h]=c)}}function r(l,a){for(let g=0;g<a.length;g++)a[g]=l[a[g]]}function m(l,a){for(const g of a)if(g!=null)return(0,n._m)(l,g);return t.fS.other}function d(l){const{schema:a,data:g}=l;if(!a||!a.fields)throw new Error("JSON needs a fields definition");const c=g?g.values.reduce((f,b)=>Math.max(f,b.length),0):0,h=a.fields.map((f,b)=>{let v=g?g.values[b]:[],y=v.length,E=f.type;y!==c&&(v.length=c,v.fill(void 0,y));let C=g?.entities?.[b];C&&s(C,v);let u=g?.enums?.[b];u&&(r(u,v),E=t.fS.string);const D=g?.nanos?.[b],P={...f,type:E??m(f.name,v),config:f.config??{},values:v,entities:C??{}};return D!=null&&(P.nanos=D),P});return{...a,fields:h,length:c}}function o(l){const a={values:[]},g=[];let c=!1;const h={refId:l.refId,meta:l.meta,name:l.name,fields:l.fields.map(f=>{const{values:b,nanos:v,state:y,display:E,...C}=f;return delete C.entities,a.values.push(b),v!=null?(g.push(v),c=!0):g.push(null),C})};return c&&(a.nanos=g),{schema:h,data:a}}},27938:(j,I,e)=>{"use strict";e.d(I,{U:()=>n});var t=e(36829);class n extends t.G{constructor(s){super(),this.data=s,this.index=0;const r={},m={};for(let d=0;d<s.fields.length;d++){const o=s.fields[d];if(!o.name)continue;m[o.name]=o;const l=()=>o.values.get(this.index);r.hasOwnProperty(o.name)||Object.defineProperty(r,o.name,{enumerable:!0,get:l}),r.hasOwnProperty(d.toString())||Object.defineProperty(r,d,{enumerable:!1,get:l})}this.obj=r,this.fields=m}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const r=this.dataFrame.fields[s];if(!(!r||!r.display))return r.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,r)=>({...this.get(r)}))}}},31832:(j,I,e)=>{"use strict";e.d(I,{N:()=>i});var t=e(29241),n=e(32053);class i{constructor(r){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=r.fields.map((m,d)=>({...m,index:d}));for(let m=0;m<r.fields.length;m++){const d=r.fields[m];if(d.type===t.fS.other){const o=(0,n.fu)(d);o&&(d.type=o)}this.fieldByType[d.type]||(this.fieldByType[d.type]=[]),this.fieldByType[d.type].push({...d,index:m}),this.fieldByName[d.name]?console.warn("Duplicate field names in DataFrame: ",d.name):this.fieldByName[d.name]={...d,index:m}}}getFields(r){if(!r)return[...this.fields];const m=this.fieldByType[r];return m?[...m]:[]}hasFieldOfType(r){const m=this.fieldByType[r];return m&&m.length>0}getFirstFieldOfType(r,m=!1){return this.fieldByType[r].find(l=>m||!l.config.custom?.hidden)}hasFieldNamed(r){return!!this.fieldByName[r]}hasFieldWithNameAndType(r,m){return!!this.fieldByName[r]&&this.fieldByType[m].filter(d=>d.name===r).length>0}getFieldByName(r){return this.fieldByName[r]}getFieldsByLabel(r,m){return Object.values(this.fieldByName).filter(d=>d.labels&&d.labels[r]===m)}}},72164:(j,I,e)=>{"use strict";e.d(I,{Y:()=>m,v:()=>d});var t=e(89949),n=e(29241),i=e(32053);function s(o,l){return l.type||(l.name==="time"||l.name==="Time"?l.type=n.fS.time:l.type=(0,i.LI)(o)),l.type===n.fS.number?a=>parseFloat(a):l.type===n.fS.boolean?a=>!(a[0]==="F"||a[0]==="f"||a[0]==="0"):a=>a}var r=e(36829);const m=void 0;class d extends r.G{constructor(l,a){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=a||(g=>g??[]),l){const{name:g,refId:c,meta:h,fields:f}=l;if(g&&(this.name=g),c&&(this.refId=c),h&&(this.meta=h),f)for(const b of f)this.addField(b)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(l,a){return this.addField({name:a||"",type:(0,i.LI)(l)})}addField(l,a){let g;l.values&&(g=l.values);let c=l.type;!c&&(l.name==="time"||l.name==="Time")?c=n.fS.time:(!c&&g&&g.length&&(c=(0,i.LI)(g[0])),c||(c=n.fS.other));let h=l.name;h||(h=`Field ${this.fields.length+1}`);const f={...l,name:h,type:c,config:l.config||{},values:this.creator(g)};if(c===n.fS.other&&(c=(0,i.fu)(f),c&&(f.type=c)),this.fields.push(f),this.first=this.fields[0].values,a)for(;f.values.length<a;)f.values.push(m);else this.validate();return f}validate(){const l=this.fields.reduce((a,g)=>Math.max(a,g.values.length),0);for(const a of this.fields)for(;a.values.length!==l;)a.values.push(m)}setParser(l,a){return this.parsers||(this.parsers=new Map),this.parsers.set(l,a),a}parseValue(l,a){let g=this.parsers?.get(l);return g||(g=this.setParser(l,s(a,l))),g(a)}appendRow(l){for(let a=this.fields.length;a<l.length;a++)this.addField({name:`Field ${a+1}`,type:(0,i.LI)(l[a])});if(this.length<1)for(let a=0;a<this.fields.length;a++){const g=this.fields[a];(!g.type||g.type===n.fS.other)&&(g.type=(0,i.LI)(l[a]))}for(let a=0;a<this.fields.length;a++){const g=this.fields[a];let c=l[a];g.type!==n.fS.string&&(0,t.isString)(c)&&(c=this.parseValue(g,c)),g.values.push(c)}}push(...l){for(const a of l)this.add(a);return this.length}reverse(){for(const l of this.fields)l.values.reverse();return this}add(l){const a=l;for(const g of this.fields){let c=a[g.name];g.type!==n.fS.string&&(0,t.isString)(c)&&(c=this.parseValue(g,c)),c===void 0&&(c=m),g.values.push(c)}}set(l,a){if(l>this.length)throw new Error("Unable to set value beyond current length");const g=a||{};for(const c of this.fields)c.values[l]=g[c.name]}get(l){const a={};for(const g of this.fields)a[g.name]=g.values[l];return a}toJSON(){return(0,i.og)(this)}}},47838:(j,I,e)=>{"use strict";e.d(I,{Av:()=>g,Ko:()=>f,MB:()=>v,T0:()=>d,_A:()=>c});var t=e(29241),n=e(14951),i=e(48962),s=e(76772),r=e(32053),m=e(66784),d=(D=>(D.Append="append",D.Replace="replace",D))(d||{});const o="__name__";var l=(D=>(D[D.wide=0]="wide",D[D.labels=1]="labels",D))(l||{});const a=class{constructor(D){this.options=D,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(P,S,x)=>{const M=S?Object.assign({},{...this.options,...S}):this.options,R=(0,r.Aw)(this,P),O=C(R.fields.map(U=>U.values),typeof x?.maxLength=="number"?Math.min(x.maxLength,M.maxLength):M.maxLength,this.timeFieldIndex,M.maxDelta);R.fields=R.fields.map(U=>({...U,values:U.values.slice(O)}));const T=R.fields[0]?.values?.length??0;return{...R,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:T,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:M}},this.initFromSerialized=P=>{this.name=P.name,this.refId=P.refId,this.meta=P.meta,this.length=P.length,this.labels=P.labels,this.schemaFields=P.schemaFields,this.timeFieldIndex=P.timeFieldIndex,this.pushMode=P.pushMode,this.packetInfo.length=P.packetInfo.length,this.packetInfo.number=P.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=P.fields.map(S=>({...S,type:S.type??t.fS.other,config:S.config??{},values:S.values??[]})),E(this.fields.map(S=>S.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:P,maxDelta:S})=>{const x=P&&this.options.maxLength<P,M=S&&this.options.maxDelta<S,R=S&&this.options.maxDelta===1/0;return!!(x||M||R)},this.resize=({maxLength:P,maxDelta:S})=>{S&&(this.options.maxDelta===1/0?this.options.maxDelta=S:this.options.maxDelta=Math.max(S,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,P??0)},this.pushNewValues=P=>{if(!P?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=P[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?y(this.fields.map(x=>x.values),P,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(P.forEach((x,M)=>{this.fields[M]&&(this.fields[M].values=x)}),E(this.fields.map(x=>x.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const S=this.fields?.[0]?.values.length;S!==void 0&&(this.length=S)},this.resetStateCalculations=()=>{this.fields.forEach(P=>{P.state={...P.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=P=>this.fields.map((S,x)=>P(S)?x:void 0).filter(S=>S!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(P=>{const S=P.values;return S.slice(Math.max(S.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action==="replace"}push(D){const{schema:P,data:S}=D;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,P){this.pushMode=0,this.timeFieldIndex=P.fields.findIndex(O=>O.type===t.fS.time);const x=P.fields[0];this.timeFieldIndex===1&&x.type===t.fS.string&&(x.name==="labels"||x.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const M=this.pushMode===1?P.fields.slice(1):P.fields;this.refId=P.refId,P.meta&&(this.meta={...P.meta});const{displayNameFormat:R}=this.options;if(u(this.schemaFields,M)){const O=M.length;this.fields.forEach((T,U)=>{const L=M[U%O];T.config=L.config??{},T.labels=L.labels}),R&&this.fields.forEach(T=>{const U={[o]:T.name,...T.labels};T.config.displayNameFromDS=(0,s.W)(R,U)})}else{this.packetInfo.schemaChanged=!0;const O=this.pushMode===0;this.fields=M.map(T=>{const U=T.config??{};if(R){const L={[o]:T.name,...T.labels};U.displayNameFromDS=(0,s.W)(R,L)}return{config:U,name:T.name,labels:T.labels,type:T.type??t.fS.other,values:O?this.fields.find(L=>L.name===T.name&&T.type===L.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=M}if(S&&S.values.length&&S.values[0].length){let{values:x,entities:M}=S;if(M&&M.forEach((O,T)=>{O&&(0,m.Jy)(O,x[T])}),this.pushMode===1){const O=h(x);for(const L of O.keys())this.labels.has(L)||(this.packetInfo.schemaChanged=!0,this.addLabel(L));let T=Array(this.schemaFields.length).fill([]),U=[];this.labels.forEach(L=>{U.push(O.get(L)??T)}),x=(0,i.v_)(U)}if(x.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${x.length} (labels=${this.pushMode===1})`);this.fields=x.map((O,T)=>{let U=`Field ${T}`,L=(0,r.LI)(O[0]);return T===0&&L===t.fS.number&&O[0]>1600016688632&&(L=t.fS.time,U="Time"),{name:U,type:L,config:{},values:[]}})}let R=x;this.packetInfo.length=x[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",R=this.fields.map(O=>O.values),y(R,x,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),R.forEach((O,T)=>{const U=this.fields[T],{state:L}=U;U.values=O,L&&(L.calcs=void 0)}),this.length=R[0].length}return{...this.packetInfo}}addLabel(D){const{displayNameFormat:P}=this.options,S=this.labels.size,x=b(D);if(S===0)this.fields.forEach((M,R)=>{if(R>0&&(M.labels=x,P)){const O={[o]:M.name,...x};M.config.displayNameFromDS=(0,s.W)(P,O)}});else for(let M=1;M<this.schemaFields.length;M++){let R=this.schemaFields[M];const O=R.config??{};if(P){const T={[o]:R.name,...x};O.displayNameFromDS=(0,s.W)(P,T)}this.fields.push({...R,config:O,labels:x,values:Array(this.length).fill(void 0)})}this.labels.add(D)}};let g=a;g.deserialize=D=>{const P=new a(D.options);return P.initFromSerialized(D),P},g.empty=D=>new a(c(D)),g.fromDataFrameJSON=(D,P)=>{const S=new a(c(P));return S.push(D),S};function c(D){return{maxLength:D?.maxLength??1e3,maxDelta:D?.maxDelta??1/0,action:D?.action??"append",displayNameFormat:D?.displayNameFormat}}function h(D){let P=new Set(D[0]),S=new Map;P.forEach(x=>{let M=Array(D.length-1).fill(null).map(()=>[]);S.set(x,M)});for(let x=0;x<D[0].length;x++){let M=S.get(D[0][x]);for(let R=1;R<D.length;R++)M[R-1].push(D[R][x])}return S}function f(D,P,S,x){let M;S=S||0,x=x||P.length-1;let R=x<=2147483647;for(;x-S>1;)M=R?S+x>>1:Math.floor((S+x)/2),P[M]<D?S=M:x=M;return D-P[S]<=P[x]-D?S:x}function b(D){if(!D.length)return{};if(D.charAt(0)==="{")return(0,n.J8)(D);const P={};return D.split(",").forEach(S=>{const[x,M]=S.trim().split("=");P[x]=M}),P}function v(D){const P=D.packetInfo;return P?.action?P:void 0}function y(D,P,S=1/0,x=0,M=1/0){for(let R=0;R<D.length;R++)for(let O=0;O<P[R].length;O++)D[R].push(P[R][O]);return E(D,S,x,M)}function E(D,P=1/0,S=0,x=1/0){const M=C(D,P,S,x);if(M)for(let R=0;R<D.length;R++)D[R].splice(0,M);return M}function C(D,P=1/0,S=0,x=1/0){if(!D[0]?.length)return 0;const M=D[0].length;let R=0;if(M>P&&(R=M-P),x!==1/0&&S>=0){const O=D[S],T=O[R],U=O[M-1];U-T>x&&(R=f(U-x,O,R))}return R}function u(D,P){if(D?.length!==P.length)return!1;for(let S=0;S<D.length;S++){const x=D[S],M=P[S];if(x.name!==M.name||x.type!==M.type)return!1}return!0}},45641:(j,I,e)=>{"use strict";e.d(I,{$q:()=>i,GV:()=>n,YP:()=>m,jC:()=>s,q2:()=>t,r7:()=>r});const t=(d,o)=>({name:d,columns:o}),n=d=>d.columns,i=(d,o)=>d.columns[o],s=(d,o,l)=>d.columns[o].values[l],r=(d,o,l)=>d.columns.map(a=>a.values[l]),m=(d,o)=>d[o]},64987:(j,I,e)=>{"use strict";e.d(I,{Ch:()=>i,Vv:()=>m,nl:()=>s});var t=e(89949),n=e.n(t);function i(d,o,l){if(d===o)return!0;if(d?.fields?.length!==o?.fields?.length||d.name!==o.name)return!1;for(let a=0;a<d.fields.length;a++){const g=d.fields[a],c=o.fields[a];if(g.type!==c.type||g.name!==c.name)return!1;if(l)continue;if(g.labels&&c.labels&&!m(g.labels,c.labels))return!1;const h=g.config,f=c.config;let b=Object.keys(h),v=Object.keys(f);if(b.length!==v.length)return!1;for(const y of b){if(!(y in f))return!1;if(y!=="interval"&&!(0,t.isEqual)(h[y],f[y]))return!1}}return!0}function s(d,o,l){if(d===o)return!0;if(d?.length!==o?.length)return!1;for(let a=0;a<d.length;a++)if(!l(d[a],o[a]))return!1;return!0}const r=(d,o)=>d===o;function m(d,o,l=r){if(d===o)return!0;const a=Object.keys(d),g=Object.keys(o);if(a.length!==g.length)return!1;for(let c of a)if(!l(d[c],o[c]))return!1;return!0}},88570:(j,I,e)=>{"use strict";e.d(I,{$q:()=>m.$q,Av:()=>g.Av,Aw:()=>r.Aw,Ch:()=>l.Ch,DP:()=>r.DP,F9:()=>r.F9,GV:()=>m.GV,Ib:()=>o.Ib,Ji:()=>r.Ji,Jy:()=>o.Jy,LI:()=>r.LI,N:()=>n.N,Pc:()=>d.P,SX:()=>r.SX,T0:()=>g.T0,US:()=>t.U,Vv:()=>l.Vv,Y:()=>o.Y,Y6:()=>r.Y6,YP:()=>m.YP,Yi:()=>s.Y,Zr:()=>r.Zr,_m:()=>r._m,a2:()=>i.a,aK:()=>r.aK,aY:()=>r.aY,at:()=>r.at,fh:()=>r.fh,fu:()=>r.fu,g0:()=>r.g0,iB:()=>d.i,jC:()=>m.jC,m$:()=>a.m$,nl:()=>l.nl,og:()=>r.og,pP:()=>a.pP,q2:()=>m.q2,r7:()=>m.r7,sV:()=>r.sV,vA:()=>s.v,vP:()=>o.vP,xI:()=>a.xI,zR:()=>r.zR});var t=e(27938),n=e(31832),i=e(52141),s=e(72164),r=e(32053),m=e(45641),d=e(46580),o=e(66784),l=e(64987),a=e(59425),g=e(47838)},32053:(j,I,e)=>{"use strict";e.d(I,{Aw:()=>T,DP:()=>v,F9:()=>V,Ji:()=>u,LI:()=>y,SX:()=>C,Y6:()=>M,Zr:()=>S,_m:()=>b,aK:()=>x,aY:()=>D,at:()=>K,fh:()=>R,fu:()=>E,g0:()=>P,og:()=>O,sV:()=>U,zR:()=>w});var t=e(89949),n=e.n(t),i=e(99633),s=e(72927),r=e(75578),m=e(29241),d=e(53933),o=e(46580),l=e(66784);function a(B){const W=B.columns.map(_=>{const{text:k,type:A,...z}=_;return{name:k?.length?k:_,config:z||{},values:[],type:A&&Object.values(m.fS).includes(A)?A:m.fS.other}});if(!(0,t.isArray)(B.rows))throw new Error(`Expected table rows to be array, got ${typeof B.rows}.`);for(const _ of B.rows)for(let k=0;k<W.length;k++)W[k].values.push(_[k]);for(const _ of W)if(_.type===m.fS.other){const k=E(_);k&&(_.type=k)}return{fields:W,refId:B.refId,meta:B.meta,name:B.name,length:B.rows.length}}function g(B){const W=[],_=[],k=B.datapoints||B.points;for(const z of k)_.push(z[0]),W.push(z[1]);const A=[{name:m.Ls,type:m.fS.time,config:{},values:W},{name:m.M5,type:m.fS.number,config:{unit:B.unit},values:_,labels:B.tags}];return B.title&&(A[1].config.displayNameFromDS=B.title),{name:B.target||B.name,refId:B.refId,meta:B.meta,fields:A,length:_.length}}function c(B){const W=[],_=[];for(let k=0;k<B.data.length;k++){const A=B.data[k];W.push(A[1]),_.push(A[0])}return{name:B.label,fields:[{name:B.label||m.M5,type:m.fS.number,config:{},values:W},{name:m.Ls,type:m.fS.time,config:{unit:"dateTimeAsIso"},values:_}],length:W.length}}function h(B){const W=[{name:B.target,type:m.fS.other,labels:B.tags,config:{unit:B.unit,filterable:B.filterable},values:[]}];for(const _ of B.datapoints)W[0].values.push(_);return{name:B.target,refId:B.target,meta:{json:!0},fields:W,length:B.datapoints.length}}const f=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function b(B,W){return B&&(B=B.toLowerCase(),B==="date"||B==="time")?m.fS.time:y(W)}function v(B){return B instanceof Date||(0,i.v9)(B)?m.fS.time:(0,t.isNumber)(B)?m.fS.number:(0,t.isString)(B)?m.fS.string:(0,t.isBoolean)(B)?m.fS.boolean:m.fS.other}function y(B){return B instanceof Date||(0,i.v9)(B)?m.fS.time:(0,t.isNumber)(B)?m.fS.number:(0,t.isString)(B)?f.test(B)?m.fS.number:B==="true"||B==="TRUE"||B==="True"||B==="false"||B==="FALSE"||B==="False"?m.fS.boolean:m.fS.string:(0,t.isBoolean)(B)?m.fS.boolean:m.fS.other}function E(B){if(B.name){const W=B.name.toLowerCase();if(W==="date"||W==="time")return m.fS.time}for(let W=0;W<B.values.length;W++){const _=B.values[W];if(_!=null)return y(_)}}const C=(B,W=!1)=>{for(const _ of B.fields)if(!_.type||_.type===m.fS.other||W)return{...B,fields:B.fields.map(k=>k.type&&k.type!==m.fS.other&&!W?k:{...k,type:E(k)||m.fS.other})};return B},u=B=>!!(B&&B.hasOwnProperty("columns")),D=B=>!!(B&&B.hasOwnProperty("fields"));function P(B){if("fields"in B)return"length"in B&&B.fields[0]?.values?.get?B:K(B);if(B.hasOwnProperty("type")&&B.type==="docs")return h(B);if(B.hasOwnProperty("datapoints")||B.hasOwnProperty("points"))return g(B);if(B.hasOwnProperty("data"))return B.hasOwnProperty("schema")?(0,l.vP)(B):c(B);if(B.hasOwnProperty("columns"))return a(B);if(Array.isArray(B))return(0,o.P)(B);throw console.warn("Can not convert",B),new Error("Unsupported data format")}const S=B=>{const{fields:W}=B,_=B.length,k=[];if(W.length===2){const{timeField:A,timeIndex:z}=U(B);if(A){const Q=W[z===0?1:0],X=W[z];for(let te=0;te<_;te++)k.push([Q.values[te],X.values[te]]);return{alias:B.name,target:(0,r.CZ)(Q,B),datapoints:k,unit:W[0].config?W[0].config.unit:void 0,refId:B.refId,meta:B.meta}}}for(let A=0;A<_;A++){const z=[];for(let H=0;H<W.length;H++)z.push(W[H].values[A]);k.push(z)}return B.meta&&B.meta.json?{alias:W[0].name||B.name,target:W[0].name||B.name,datapoints:W[0].values,filterable:W[0].config?W[0].config.filterable:void 0,type:"docs"}:{columns:W.map(A=>{const{name:z,config:H}=A;if(H){const{...Q}=H;return Q.text=z,Q}return{text:z}}),type:"table",refId:B.refId,meta:B.meta,rows:k}};function x(B,W,_=!1){const k=B.fields[W];if(!k)return B;const A=[];for(let H=0;H<B.length;H++)A.push(H);const z=(0,s.Mo)(k,_);return A.sort(z),{...B,fields:B.fields.map(H=>{const Q={...H,values:H.values.map((te,oe)=>H.values[A[oe]])},{nanos:X}=H;return X!==void 0&&(Q.nanos=X.map((te,oe)=>X[A[oe]])),Q})}}function M(B){return{...B,fields:B.fields.map(W=>{const _=[...W.values];_.reverse();const k={...W,values:_},{nanos:A}=W;if(A!==void 0){const z=[...A];z.reverse(),k.nanos=z}return k})}}function R(B,W){const _=[];for(const k of B.fields)_.push(k.values[W]);return _}function O(B){return T(B)}function T(B,W){return{fields:(W?B.fields.filter(W):B.fields).map(A=>{let z=A.values;return{name:A.name,type:A.type,config:A.config,values:z,labels:A.labels}}),refId:B.refId,meta:B.meta,name:B.name}}const U=B=>{for(let W=0;W<B.fields.length;W++)if(B.fields[W].type===m.fS.time)return{timeField:B.fields[W],timeIndex:W};return{}};function L(B){const W=C(P(B));if(W.fields&&W.fields.length)for(const _ of W.fields)_.state=null;return W}function V(B){return!B||!(0,t.isArray)(B)?[]:B.map(W=>L(W))}function w(B,W){const{series:_,annotations:k}=B;if(B.state===d.Gu.Loading&&_.length===0)return W||(W=B),{...W,state:d.Gu.Loading,request:B.request};const A=performance.now(),z=_.map(X=>L(X)),H=V(k),Q=performance.now();return{...B,series:z,annotations:H,timings:{dataProcessingTime:Q-A}}}function K(B){let W=0;const _=B.fields.map((k,A)=>{const{state:z,...H}=k;return H.name||(H.name=`Field ${A+1}`),H.config||(H.config={}),H.values?H.values.length>W&&(W=H.values.length):H.values=new Array(W),H.type||(H.type=E(H)??m.fS.other),H});return{...B,fields:_,length:W}}},59425:(j,I,e)=>{"use strict";e.d(I,{m$:()=>r,pP:()=>i,xI:()=>s});var t=e(29241),n=e(32053);function i(m){return m.fields.length>2?!1:!!m.fields.find(d=>d.type===t.fS.time)}function s(m){return!m.find(d=>!i(d))}function r(m){for(let d=0;d<m.length;d++){const o=(0,n.sV)(m[d]);if(o.timeField!==void 0&&o.timeIndex!==void 0)return!0}return!1}},31317:(j,I,e)=>{"use strict";e.d(I,{K:()=>i,Z:()=>s});var t=e(8508);let n=()=>t.Ys;const i=r=>{n=r??n},s=r=>r?.timeZone??n()??t.Ys},1726:(j,I,e)=>{"use strict";e.r(I),e.d(I,{isMathString:()=>r,isValid:()=>d,parse:()=>m,parseDateMath:()=>o,roundToFiscal:()=>l});var t=e(89949),n=e.n(t),i=e(99633);const s=["y","M","w","d","h","m","s","Q"];function r(a){return a?!!(typeof a=="string"&&(a.substring(0,3)==="now"||a.includes("||"))):!1}function m(a,g,c,h){if(a){if(typeof a!="string")return(0,i.v9)(a)?a:(0,t.isDate)(a)?(0,i.CQ)(a):void 0;{let f,b="",v,y;return a.substring(0,3)==="now"?(f=(0,i.GY)(c),b=a.substring(3)):(v=a.indexOf("||"),v===-1?(y=a,b=""):(y=a.substring(0,v),b=a.substring(v+2)),f=(0,i.CQ)(y,i.VJ)),b.length?o(b,f,g,h):f}}}function d(a){const g=m(a);return g&&(0,i.v9)(g)?g.isValid():!1}function o(a,g,c,h=0){const f=a.replace(/\s/g,""),b=g;let v=0;const y=f.length;for(;v<y;){const E=f.charAt(v++);let C,u,D,P=!1;if(E==="/")C=0;else if(E==="+")C=1;else if(E==="-")C=2;else return;if(isNaN(parseInt(f.charAt(v),10)))u=1;else if(f.length===2)u=parseInt(f.charAt(v),10);else{const S=v;for(;!isNaN(parseInt(f.charAt(v),10));)if(v++,v>10)return;u=parseInt(f.substring(S,v),10)}if(C===0&&u!==1)return;if(D=f.charAt(v++),D==="f"&&(D=f.charAt(v++),P=!0),(0,t.includes)(s,D))C===0?P?l(h,b,D,c):c?b.endOf(D):b.startOf(D):C===1?b.add(u,D):C===2&&b.subtract(u,D);else return}return b}function l(a,g,c,h){switch(c){case"y":return h?l(a,g,c,!1).add(11,"M").endOf("M"):g.subtract((g.month()-a+12)%12,"M").startOf("M"),g;case"Q":return h?l(a,g,c,!1).add(2,"M").endOf("M"):g.subtract((g.month()-a+12)%3,"M").startOf("M"),g;default:return}}},32082:(j,I,e)=>{"use strict";e.d(I,{IA:()=>g,Ks:()=>d,RA:()=>m,iX:()=>o,jO:()=>a,qb:()=>l,vT:()=>r});var t=e(25430),n=e(71213),i=e(72124);const s={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function r(c,h=!0){if((0,t.Z)(c.start,c.end))return"";const f=(0,i.Z)(c);return Object.entries(f).reduce((b,[v,y])=>y&&y!==0&&!(v==="seconds"&&!h&&b)?b+`${b!==""?" ":""}${y}${s[v][0]}`:b,"")}function m(c){return c.split(" ").reduce((h,f)=>{const b=f.match(/(\d+)(.+)/),v=b?.[1],y=b?.[2];if(!(v&&y))return h;const E=Object.entries(s).find(([u,D])=>D?.includes(b[2])),C=parseInt(v,10);return E?{...h,[E[0]]:C}:h},{})}function d(c,h){return(0,n.Z)(c,h)}function o(c){const h=new Date;return d(h,c).getTime()-h.getTime()}function l(c){return!isNaN(Date.parse(c))}function a(c){for(const h of c.trim().split(" ")){const f=h.match(/(\d+)(.+)/);if(f===null||f.length!==3||!Object.entries(s).find(([v,y])=>y?.includes(f[2]))?.[0])return!1}return!0}function g(c){const h=["h","m","s","ms","us","\xB5s","ns"];for(const f of c.trim().split(" ")){const b=f.match(/([0-9]*[.]?[0-9]+)(.+)/);if(b===null||b.length!==3||!h.includes(b[2]))return!1}return!0}},65347:(j,I,e)=>{"use strict";e.d(I,{Ji:()=>s,U6:()=>r,zf:()=>i});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class i{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(o){this.fullDate=o.fullDate,this.interval=o.interval,o.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(o){return`time:${o?this.fullDateMS:this.fullDate}`}}function s(d,o,l){if(m())return l??t;!o&&navigator&&(o=[...navigator.languages]);const a=new Intl.DateTimeFormat(o||void 0,d),g=a.formatToParts(new Date),h={year:"YYYY",month:"MM",day:"DD",hour:a.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return g.map(f=>h[f.type]||f.value).join("")}const r=new i,m=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},60956:(j,I,e)=>{"use strict";e.d(I,{E8:()=>d,Fm:()=>o,Hk:()=>l,dq:()=>r,lf:()=>m});var t=e(24588),n=e.n(t),i=e(31317),s=e(65347);const r=(c,h)=>g(c,(0,i.Z)(h)).format(a(h)),m=(c,h)=>g(c,(0,i.Z)(h)).format(),d=(c,h)=>g(c,(0,i.Z)(h)).fromNow(),o=(c,h)=>g(c,(0,i.Z)(h)).format(`${s.U6.fullDate} z`),l=(c,h)=>g(c,(0,i.Z)(h)).format("z"),a=c=>c?.defaultWithMS?c?.format??s.U6.fullDateMS:c?.format??s.U6.fullDate,g=(c,h)=>{const f=c,b=n().tz.zone(h);if(b&&b.name)return n().utc(f).tz(b.name);switch(h){case"utc":return n().utc(f);default:return n().utc(f).local()}}},51573:(j,I,e)=>{"use strict";e.d(I,{$8:()=>s.$8,CQ:()=>i.CQ,C_:()=>i.C_,D2:()=>i.D2,E8:()=>m.E8,Fm:()=>m.Fm,GY:()=>i.GY,Hk:()=>m.Hk,IA:()=>o.IA,J:()=>d.J,Ji:()=>r.Ji,K7:()=>l.K,Kd:()=>i.Kd,Ks:()=>o.Ks,Ls:()=>i.Ls,Pr:()=>s.Pr,RA:()=>o.RA,RQ:()=>s.RQ,Rn:()=>t,U6:()=>r.U6,VJ:()=>i.VJ,Vs:()=>s.Vs,ZV:()=>s.ZV,Ze:()=>l.Z,cT:()=>n,dq:()=>m.dq,iX:()=>o.iX,i_:()=>i.i_,ig:()=>i.ig,jN:()=>i.jN,jO:()=>o.jO,k4:()=>i.k4,lf:()=>m.lf,np:()=>i.Ks,qb:()=>o.qb,v9:()=>i.v9,vT:()=>o.vT,zf:()=>r.zf,zh:()=>i.zh});var t=e(1726),n=e(76305),i=e(99633),s=e(80369),r=e(65347),m=e(60956),d=e(58018),o=e(32082),l=e(31317)},99633:(j,I,e)=>{"use strict";e.d(I,{CQ:()=>g,C_:()=>c,D2:()=>d,GY:()=>h,Kd:()=>r,Ks:()=>a,Ls:()=>v,VJ:()=>i,i_:()=>s,ig:()=>f,jN:()=>b,k4:()=>m,v9:()=>o,zh:()=>l});var t=e(79913),n=e.n(t);const i=n().ISO_8601,s=y=>{n().locale(y)},r=()=>n().locale(),m=()=>n().localeData(),d=y=>y===null||typeof y=="string"||typeof y=="number"||y instanceof Date||Array.isArray(y)&&y.every(E=>typeof E=="string"||typeof E=="number")||o(y),o=y=>n().isMoment(y),l=(y,E)=>n().utc(y,E),a=(y,E)=>n().duration(y,E),g=(y,E)=>n()(y,E),c=y=>g(y),h=(y,E,C)=>y==="utc"?l(E,C):g(E,C),f=y=>n().weekdays().findIndex(E=>E.toLowerCase()===y.toLowerCase()),b=y=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(E=>E.toLowerCase()===y.toLowerCase()),v=y=>{const E="-weekStart",C=r().replace(E,""),u=y?b(y):-1;u!==-1?n().locale(C+E,{parentLocale:C,week:{dow:u}}):s(C)}},58018:(j,I,e)=>{"use strict";e.d(I,{J:()=>l});var t=e(89949),n=e.n(t),i=e(24588),s=e.n(i),r=e(31317),m=e(1726),d=e(65347),o=e(99633);const l=(c,h)=>(0,o.v9)(c)?c:typeof c=="string"?a(c,h):g(c,h),a=(c,h)=>{if(c.indexOf("now")!==-1)return(0,m.isValid)(c)&&(0,m.parse)(c,h?.roundUp,h?.timeZone,h?.fiscalYearStartMonth)||s()();const f=(0,r.Z)(h),b=s().tz.zone(f),v=h?.format??d.U6.fullDate;if(b&&b.name)return s().tz(c,v,b.name);switch((0,t.lowerCase)(f)){case"utc":return s().utc(c,v);default:return s()(c,v)}},g=(c,h)=>{const f=c,b=(0,r.Z)(h),v=s().tz.zone(b);if(v&&v.name)return s().tz(f,v.name);switch((0,t.lowerCase)(b)){case"utc":return s().utc(f);default:return s()(f)}}},76305:(j,I,e)=>{"use strict";e.r(I),e.d(I,{calculateInterval:()=>D,convertRawToRange:()=>b,describeInterval:()=>x,describeTextRange:()=>g,describeTimeRange:()=>c,describeTimeRangeAbbreviation:()=>f,intervalToMs:()=>R,intervalToSeconds:()=>M,isFiscal:()=>y,isRelativeTimeRange:()=>E,isValidTimeSpan:()=>h,msRangeToTimeString:()=>u,relativeToTimeRange:()=>U,roundInterval:()=>O,secondsToHms:()=>C,timeRangeToRelative:()=>T});var t=e(89949),n=e.n(t),i=e(1726),s=e(60956),r=e(99633),m=e(58018);const d={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},o=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],l=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],a={};(0,t.each)(o,L=>{a[L.from+" to "+L.to]=L}),(0,t.each)(l,L=>{a[L.from+" to "+L.to]=L});function g(L){const V=L.indexOf("+")!==0;L.indexOf("now")===-1&&(L=(V?"now-":"now")+L);let w=a[L+" to now"];if(w)return w;V?w={from:L,to:"now"}:w={from:"now",to:L};const K=/^now([-+])(\d+)(\w)/.exec(L);if(K){const B=K[3],W=parseInt(K[2],10),_=d[B];_&&(w.display=V?"Last ":"Next ",w.display+=W+" "+_.display,w.section=_.section,W>1&&(w.display+="s"))}else w.display=w.from+" to "+w.to,w.invalid=!0;return w}function c(L,V){const w=a[L.from.toString()+" to "+L.to.toString()];if(w)return w.display;const K={timeZone:V};if((0,r.v9)(L.from)&&(0,r.v9)(L.to))return(0,s.dq)(L.from,K)+" to "+(0,s.dq)(L.to,K);if((0,r.v9)(L.from)){const B=i.parse(L.to,!0,"utc");return B?(0,s.dq)(L.from,K)+" to "+(0,s.E8)(B,K):""}if((0,r.v9)(L.to)){const B=i.parse(L.from,!1,"utc");return B?(0,s.E8)(B,K)+" to "+(0,s.dq)(L.to,K):""}return L.to.toString()==="now"?g(L.from).display:L.from.toString()+" to "+L.to.toString()}const h=L=>L.indexOf("$")===0||L.indexOf("+$")===0?!0:g(L).invalid!==!0,f=(L,V)=>{if((0,r.v9)(L.from))return(0,s.Hk)(L.from,{timeZone:V});const w=i.parse(L.from,!0);return w?(0,s.Hk)(w,{timeZone:V}):""},b=(L,V,w,K)=>{const B=(0,m.J)(L.from,{roundUp:!1,timeZone:V,fiscalYearStartMonth:w,format:K}),W=(0,m.J)(L.to,{roundUp:!0,timeZone:V,fiscalYearStartMonth:w,format:K});return i.isMathString(L.from)||i.isMathString(L.to)?{from:B,to:W,raw:L}:{from:B,to:W,raw:{from:B,to:W}}};function v(L){return typeof L=="string"?L.indexOf("now")>=0:!1}function y(L){return typeof L.raw.from=="string"&&L.raw.from.indexOf("f")>0?!0:typeof L.raw.to=="string"&&L.raw.to.indexOf("f")>0}function E(L){return v(L.from)||v(L.to)}function C(L){const V=Math.floor(L/31536e3);if(V)return V+"y";const w=Math.floor(L%31536e3/86400);if(w)return w+"d";const K=Math.floor(L%31536e3%86400/3600);if(K)return K+"h";const B=Math.floor(L%31536e3%86400%3600/60);if(B)return B+"m";const W=Math.floor(L%31536e3%86400%3600%60);if(W)return W+"s";const _=Math.floor(L*1e3);return _?_+"ms":"less than a millisecond"}function u(L){const V=Number((L/1e3).toFixed()),w=Math.floor(V/60/60),K=Math.floor(V/60)-w*60,B=Number((V%60).toFixed());let W=w?w+"h":"",_=K?K+"min":"",k=B?B+"sec":"";return W&&_?W=W+" ":W=W,(_||W)&&k?_=_+" ":_=_,W+_+k||"less than 1sec"}function D(L,V,w){let K=1;w&&(K=R(w));let B=O((L.to.valueOf()-L.from.valueOf())/V);return K>B&&(B=K),{intervalMs:B,interval:C(B/1e3)}}const P=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,S={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function x(L){if(Number(L))return{sec:S.s,type:"s",count:parseInt(L,10)};const V=L.match(P);if(!V||!(0,t.has)(S,V[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(S).join(", ")}"`);return{sec:S[V[2]],type:V[2],count:parseInt(V[1],10)}}function M(L){const V=x(L);return V.sec*V.count}function R(L){const V=x(L);return V.sec*1e3*V.count}function O(L){switch(!0){case L<10:return 1;case L<15:return 10;case L<35:return 20;case L<75:return 50;case L<150:return 100;case L<350:return 200;case L<750:return 500;case L<1500:return 1e3;case L<3500:return 2e3;case L<7500:return 5e3;case L<12500:return 1e4;case L<17500:return 15e3;case L<25e3:return 2e4;case L<45e3:return 3e4;case L<9e4:return 6e4;case L<21e4:return 12e4;case L<45e4:return 3e5;case L<75e4:return 6e5;case L<105e4:return 9e5;case L<15e5:return 12e5;case L<27e5:return 18e5;case L<54e5:return 36e5;case L<9e6:return 72e5;case L<162e5:return 108e5;case L<324e5:return 216e5;case L<864e5:return 432e5;case L<6048e5:return 864e5;case L<18144e5:return 6048e5;case L<36288e5:return 2592e6;default:return 31536e6}}function T(L,V=(0,r.CQ)()){const w=V.unix()-L.from.unix(),K=V.unix()-L.to.unix();return{from:w,to:K}}function U(L,V=(0,r.CQ)()){const w=(0,r.CQ)(V).subtract(L.from,"s"),K=L.to===0?(0,r.CQ)(V):(0,r.CQ)(V).subtract(L.to,"s");return{from:w,to:K,raw:{from:w,to:K}}}},80369:(j,I,e)=>{"use strict";e.d(I,{$8:()=>a,Pr:()=>o,RQ:()=>m,Vs:()=>d,ZV:()=>l});var t=e(89949),n=e.n(t),i=e(24588),s=e.n(i),r=e(31317),m=(v=>(v.default="",v.localBrowserTime="browser",v.utc="utc",v))(m||{});const d=v=>{switch((0,r.Z)({timeZone:v})){case"browser":return"Local browser time";case"utc":return"UTC";default:return v}},o=(v,y)=>{const E=g(v,y);return E||h(v,y)},l=(0,t.memoize)((v=!1)=>{const y=[];return v===!0?y.push("","browser","utc"):v&&y.push(...v),s().tz.names().reduce((E,C)=>{const u=b[C];return!Array.isArray(u)||u.length===0||E.push(C),E},y)}),a=(0,t.memoize)((v=!1)=>{const E=l(v).reduce((C,u)=>{const D=u.indexOf("/");if(D===-1){const S="";return C[S]=C[S]??[],C[S].push(u),C}const P=u.slice(0,D);return C[P]=C[P]??[],C[P].push(u),C},{});return Object.keys(E).map(C=>({name:C,zones:E[C]}))}),g=(v,y)=>{switch(v){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:v,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const E=(0,r.Z)(),u=(E==="browser"||E==="utc"?g(E,y):h(E,y))??{};return{countries:b[E]??[],abbreviation:"",offsetInMins:0,...u,ianaName:u.ianaName,name:"Default",zone:v}}case"browser":{const E=s().tz.guess(!0),C=h(E,y)??{};return{countries:b[E]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...C,name:"Browser Time",ianaName:C.ianaName,zone:v}}default:return}},c=v=>/^(\+|\-).+/.test(v)?"":v,h=(v,y)=>{const E=s().tz.zone(v);if(E)return{name:v,ianaName:E.name,zone:v,countries:b[v]??[],abbreviation:c(E.abbr(y)),offsetInMins:E.utcOffset(y)}},f={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},b=(()=>s().tz.countries().reduce((v,y)=>s().tz.zonesForCountry(y).reduce((C,u)=>{C[u]||(C[u]=[]);const D=f[y];return D&&C[u].push({code:y,name:D}),C},v),{}))()},62435:(j,I,e)=>{"use strict";e.d(I,{F:()=>s});var t=e(52751),n=e(48592),i=e(56361);class s{constructor(){this.subscribers=new Map,this.emitter=new t.Z}publish(d){this.emitter.emit(d.type,d)}subscribe(d,o){return this.getStream(d).subscribe({next:o})}getStream(d){return new n.y(o=>{const l=a=>{o.next(a)};return this.emitter.on(d.type,l),this.subscribers.set(l,o),()=>{this.emitter.off(d.type,l),this.subscribers.delete(l)}})}newScopedBus(d,o){return new r([d],this,o)}emit(d,o){typeof d=="string"?this.emitter.emit(d,{type:d,payload:o}):this.emitter.emit(d.name,{type:d.name,payload:o})}on(d,o,l){if(o.wrapper=a=>{o(a.payload)},typeof d=="string"?this.emitter.on(d,o.wrapper):this.emitter.on(d.name,o.wrapper),l){const a=l.$on("$destroy",()=>{this.off(d,o),a()})}}off(d,o){if(typeof d=="string"){this.emitter.off(d,o.wrapper);return}this.emitter.off(d.name,o.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[d,o]of this.subscribers)o.complete(),this.subscribers.delete(d)}}class r{constructor(d,o,l){this.path=d,this.eventBus=o,this.filter=a=>this.filterConfig.onlyLocal?a.origin===this:!0,this.filterConfig=l??{onlyLocal:!1}}publish(d){d.origin||(d.origin=this),this.eventBus.publish(d)}getStream(d){return this.eventBus.getStream(d).pipe((0,i.h)(this.filter))}subscribe(d,o){return this.getStream(d).subscribe({next:o})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(d,o){return new r([...this.path,d],this,o)}}},84714:(j,I,e)=>{"use strict";e.d(I,{Ix:()=>d,Pl:()=>m,es:()=>n,n1:()=>r,v9:()=>s,xH:()=>i});var t=e(96509);class n extends t.R{}n.type="data-hover";class i extends t.m{}i.type="data-hover-clear";class s extends t.R{}s.type="data-select";class r extends t.R{}r.type="annotation-event";class m extends t.R{}m.type="dashboard-loaded";class d extends t.m{}d.type="datasource-updated-successfully"},74817:(j,I,e)=>{"use strict";e.d(I,{X:()=>n});const t=new Set;function n(i){if(t.has(i))throw new Error(`There is already an event defined with type '${i}'`);return t.add(i),{name:i}}},56461:(j,I,e)=>{"use strict";e.d(I,{Fb:()=>i.F,Ix:()=>s.Ix,Pl:()=>s.Pl,R_:()=>n.R,Xw:()=>t.X,es:()=>s.es,mA:()=>n.m,n1:()=>s.n1,v9:()=>s.v9,xH:()=>s.xH});var t=e(74817),n=e(96509),i=e(62435),s=e(84714)},96509:(j,I,e)=>{"use strict";e.d(I,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(s){super(),this.payload=s}}},35925:(j,I,e)=>{"use strict";e.d(I,{Z:()=>n});var t=e(25359);class n extends t.B{}},61965:(j,I,e)=>{"use strict";e.d(I,{U:()=>c,g:()=>f});var t=e(89949),n=e.n(t),i=e(32053),s=e(58018),r=e(99633),m=e(29241),d=e(17373),o=e(6850),l=e(21609),a=e(11024);const g={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function c(v){if(!v||(0,t.isEmpty)(v)||!v.field)return h;const y=v.field,E=y.config??{},{palette:C}=v.theme.visualization;let u=E.unit,D=u&&(g[u]||u.startsWith("time:")),P=!1;if(y.type===m.fS.time&&!D){if(u="dateTimeAsSystem",D=!0,y.values&&y.values.length>1){let L=y.values[0],V=y.values[y.values.length-1];typeof L=="string"?(L=(0,s.J)(L).unix(),V=(0,s.J)(V).unix()):(L/=1e3,V/=1e3),P=Math.abs(V-L)<60}}else y.type===m.fS.boolean?(0,l.br)(u)||(u="bool"):!u&&y.type===m.fS.string&&(u="string");const S=u?.startsWith("currency"),x=(0,l.br)(u),M=y.type===m.fS.number,O=!D&&!S&&!x&&!(u==="locale")&&M&&E.decimals==null,T=(0,l.Cf)(u||"none"),U=(0,a.NI)(y,v.theme);return(L,V)=>{const{mappings:w}=E,K=u==="string";D&&typeof L=="string"&&(L=(0,r.zh)(L).valueOf());let B=K?NaN:(0,d.I)(L),W,_,k,A,z,H;if(w&&w.length>0){const X=(0,o.vh)(w,L);X&&(X.text!=null&&(W=X.text),X.color!=null&&(A=v.theme.visualization.getColorByName(X.color)),X.icon!=null&&(z=X.icon))}else if(y.type===m.fS.enum){if(L==null)return{text:"",numeric:NaN};const X=+L;if(E&&E.type&&E.type.enum){const{text:te,color:oe}=E.type.enum;if(W=te?te[X]:`${L}`,A=oe?oe[X]:void 0,A==null){const Z=C[X%C.length];A=v.theme.visualization.getColorByName(Z)}}}if(!Number.isNaN(B)){if(W==null&&!(0,t.isBoolean)(L)){let X;O&&V!=null?(X=T(B,V,null,v.timeZone,P),X.text=+X.text+""):X=T(B,E.decimals,null,v.timeZone,P),W=X.text,k=X.suffix,_=X.prefix}if(A==null){const X=U(B);A=X.color,H=X.percent}}if(W==null&&(0,t.isArray)(L)&&(W=(0,t.join)(L,", ")),W==null&&(W=(0,t.toString)(L),W||(E.noValue?W=E.noValue:W="")),!A){const X=U(-1/0);A=X.color,H=X.percent}const Q={text:W,numeric:B,prefix:_,suffix:k,color:A};return z!=null&&(Q.icon=z),H!=null&&(Q.percent=H),Q}}function h(v){return{text:(0,t.toString)(v),numeric:(0,d.I)(v)}}function f(){return v=>({text:(0,i.DP)(v)==="other"?`${JSON.stringify(v,b())}`:`${v}`,numeric:null})}const b=()=>{const v=new WeakSet;return(y,E)=>{if(typeof E=="object"&&E!==null){if(v.has(E))return;v.add(E)}return E}}},58192:(j,I,e)=>{"use strict";e.d(I,{QY:()=>f,WO:()=>g,YO:()=>b,fD:()=>h});var t=e(7975),n=e(57097),i=e.n(n),s=e(71685),r=e(96750),m=e(66656),d=e(93666),o=e(25359),l=e(11024),a=e(77104);const g=new o.B(()=>[{id:d.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:v},{id:d.S.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:y},{id:d.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(E,C)=>(u,D,P)=>{const S=P??a.yM;return C.visualization.getColorByName(S.color)}},new c({id:d.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:E=>E.visualization.palette}),new c({id:d.S.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:E=>E.visualization.palette.filter(C=>r.getContrastRatio(E.visualization.getColorByName(C),E.colors.background.primary)>=E.colors.contrastThreshold)}),new c({id:d.S.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:E=>["green","yellow","red"]}),new c({id:d.S.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:E=>["red","yellow","green"]}),new c({id:d.S.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:E=>["dark-blue","super-light-yellow","dark-red"]}),new c({id:d.S.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:E=>["super-light-yellow","dark-red"]}),new c({id:d.S.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:E=>["blue","purple"]}),new c({id:d.S.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:E=>["super-light-yellow","dark-blue"]}),new c({id:d.S.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:E=>["panel-bg","dark-blue"]}),new c({id:d.S.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:E=>["panel-bg","dark-red"]}),new c({id:d.S.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:E=>["panel-bg","dark-green"]}),new c({id:d.S.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:E=>["panel-bg","dark-purple"]})]);class c{constructor(C){this.id=C.id,this.name=C.name,this.description=C.description,this.getNamedColors=C.getColors,this.isContinuous=C.isContinuous,this.isByValue=C.isByValue,this.useSeriesName=C.useSeriesName}getColors(C){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===C?this.colorCache:(this.colorCache=this.getNamedColors(C).map(C.visualization.getColorByName),this.colorCacheTheme=C,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(C,u){const D=this.getColors(u);return this.isByValue?this.isContinuous?(P,S,x)=>this.getInterpolator()(S):(P,S,x)=>D[S*(D.length-1)]:this.useSeriesName?(P,S,x)=>D[Math.abs(i()(C.name))%D.length]:(P,S,x)=>{const M=C.state?.seriesIndex??0;return D[M%D.length]}}}function h(E){return g.get(E.config.color?.mode??d.S.Thresholds)}function f(E){return g.get(E??d.S.Thresholds)}function b(E,C){const u=h(E);if(!u.isByValue)return{color:u.getCalculator(E,C)(0,0),threshold:a.yM,percent:1};const D=(0,l.NI)(E,C),P=E.config.color?.seriesBy??"last",x=(0,m.Kx)({field:E,reducers:[P]})[P]??0;return D(x)}function v(E,C){return()=>C.visualization.getColorByName(E.config.color?.fixedColor??d.R)}function y(E,C){return()=>{const u=C.visualization.getColorByName(E.config.color?.fixedColor??d.R),D=[u],P=6,S=10,x=35,M=35;for(let O=1;O<P;O++)D.push((0,s.Z)(u).spin(O/P*S).brighten(O/P*x).toHexString()),D.push((0,s.Z)(u).spin(-(O/P)*S).darken(O/P*M).toHexString());const R=E.state?.seriesIndex??0;return D[R%D.length]}}},91466:(j,I,e)=>{"use strict";e.d(I,{E1:()=>h,HU:()=>g,cB:()=>v,dE:()=>b,gG:()=>D,nG:()=>y,n_:()=>c,pZ:()=>f,r5:()=>M,sg:()=>P});var t=e(89949),n=e.n(t),i=e(27938),s=e(32053),r=e(76178),m=e(66656),d=e(19221),o=e(29241),l=e(61965),a=e(75578);const g="__series.name",c="__field.displayName",h="__field.labels",f="__calc",b="__cell_",v=25,y=O=>{const{replaceVariables:T,reduceOptions:U,timeZone:L,theme:V}=O,w=U.calcs.length?U.calcs:[m.gz.last],K=[],B=(0,r.sq)(U.fields?{id:d.mi.byRegexp,options:U.fields}:{id:d.mi.numeric}),W=O.data??[],_=U.limit?U.limit:v;let k=!1;for(let A=0;A<W.length&&!k;A++){const z=W[A],{timeField:H}=(0,s.sV)(z),Q=new i.U(z);for(let X=0;X<z.fields.length&&!k;X++){const te=z.fields[X],oe=te.getLinks;if(!B(te,z,W))continue;let Z=te.config;te.state?.range&&(Z={...Z,...te.state?.range});let le=te.config.displayName??"";const ce=te.display??(0,l.U)({field:te,theme:O.theme,timeZone:L});if(U.values)for(let q=0;q<te.values.length;q++){te.state=C(te,K.length);const ne=R(te,q),pe=ce(te.values[q]),re=E(z,te,q,T,ne),ie=u(re,O.fieldConfig,V);if(K.push({name:"",field:Z,display:{...pe,title:re,color:ie??pe.color},view:Q,colIndex:X,rowIndex:q,getLinks:oe?()=>oe({valueRowIndex:q}):()=>[],hasLinks:D(te)}),K.length>=_){k=!0;break}}else{const q=(0,m.Kx)({field:te,reducers:w});for(const ne of w){const pe=te.state?.scopedVars??{};pe[f]={value:ne,text:ne};const re=ce(q[ne]);le!==""?re.title=T(le,pe):re.title=(0,a.CZ)(te,z,W);let ie;O.sparkline&&(ie={y:z.fields[X],x:H},ne===m.gz.last?ie.highlightIndex=ie.y.values.length-1:ne===m.gz.first&&(ie.highlightIndex=0)),K.push({name:ne,field:Z,display:re,sparkline:ie,view:Q,colIndex:X,getLinks:oe?()=>oe({calculatedValue:re}):()=>[],hasLinks:D(te)})}}}}return K.length===0&&K.push(S(O)),K};function E(O,T,U,L,V){const w=T.config.displayName;if(w)return w.indexOf(b)?L(M(w),V):L(w,V);let K=[],B=0;for(const W of O.fields)if(W!==T)if(W.type===o.fS.string){const _=W.values[U]??"",k=W.display?W.display(_).text:_;k.length>0&&K.push(k)}else W.type===o.fS.number&&B++;return(B||K.length===0)&&K.push((0,a.CZ)(T,O)),K.join(" ")}function C(O,T){return{...O.state,seriesIndex:T}}function u(O,T,U){for(const L of T.overrides)if(L.matcher.id==="byName"&&L.matcher.options===O){for(const V of L.properties)if(V.id==="color"&&V.value)return U.visualization.getColorByName(V.value.fixedColor)}return null}function D(O){return O.config?.links?.length?O.config.links.length>0:!1}function P(O){let T="",U="",L="",V="";for(let w=0;w<O.length;w++){const K=O[w].display;K.text&&K.text.length>U.length&&(U=K.text),K.title&&K.title.length>T.length&&(T=K.title),K.prefix&&K.prefix.length>L.length&&(L=K.prefix),K.suffix&&K.suffix.length>V.length&&(V=K.suffix)}return{text:U,title:T,suffix:V,prefix:L}}function S(O){const T="No data",{fieldConfig:U,timeZone:L}=O,{defaults:V}=U,K=(0,l.U)({field:{type:o.fS.other,config:V},theme:O.theme,timeZone:L})(null),B=x(K,T);return{name:T,field:{...V,max:V.max??0,min:V.min??0},display:{text:B,numeric:0,color:K.color},hasLinks:!1}}function x(O,T){return!O||(0,t.isEmpty)(O.text)?T:O.text}function M(O){return O.replace(/\${__cell_(\d+)}|\[\[__cell_(\d+)\]\]|\$__cell_(\d+)/g,(T,U,L,V)=>`\${__data.fields[${U??L??V}]}`)}function R(O,T){return O.state?.scopedVars?.__dataContext?{...O.state?.scopedVars,__dataContext:{value:{...O.state?.scopedVars?.__dataContext.value,rowIndex:T}}}:O.state?.scopedVars}},21708:(j,I,e)=>{"use strict";e.d(I,{Cc:()=>R,Of:()=>M,SM:()=>E,Xu:()=>y,gb:()=>S,oB:()=>x});var t=e(89949),n=e.n(t),i=e(27702),s=e(35719),r=e(64167),m=e(32053),d=e(64987),o=e(96750),l=e(66656),a=e(76178),g=e(29241),c=e(93666),h=e(94469),f=e(3569),b=e(61965),v=e(41199);function y(T){let U=null,L=null;const V=[l.gz.min,l.gz.max];for(const w of T)for(const K of w.fields)if(K.type===g.fS.number){const B=(0,l.Kx)({field:K,reducers:V}),W=B[l.gz.min],_=B[l.gz.max];(U===null||W<U)&&(U=W),(L===null||_>L)&&(L=_)}return{min:U,max:L,delta:(L??0)-(U??0)}}function E(T){if(!T.data)return[];const U=T.fieldConfig;if(!U)return T.data;const L=T.fieldConfigRegistry??v.N;let V=0,w;const K=[];if(U.overrides)for(const B of U.overrides){const W=a.Ls.get(B.matcher.id);W&&K.push({match:W.get(B.matcher.options),properties:B.properties})}return T.data.map((B,W)=>{const _={...B};_.fields=_.fields.map(k=>({...k,config:(0,t.cloneDeep)(k.config),state:{...k.state}}));for(const k of _.fields){const A=k.config;k.state.scopedVars={__dataContext:{value:{data:T.data,frame:_,frameIndex:W,field:k}}};const z={field:k,data:T.data,dataFrameIndex:W,replaceVariables:T.replaceVariables,fieldConfigRegistry:L};D(A,U.defaults,z);for(const X of K)if(X.match(k,_,T.data))for(const te of X.properties)u(A,te,z);let H=k.type;if(!H||H===g.fS.other){const X=(0,m.fu)(k);X&&(H=X)}let Q;if(k.type===g.fS.number){!w&&(!(0,t.isNumber)(A.min)||!(0,t.isNumber)(A.max))&&(w=y(T.data));const X=A.min??w.min,te=A.max??w.max;Q={min:X,max:te,delta:te-X}}k.state.seriesIndex=V,k.state.range=Q,k.type=H,k.type!==g.fS.time&&V++,k.display=(0,b.U)({field:k,theme:T.theme,timeZone:T.timeZone}),k.config.unit!=="dateTimeFromNow"&&(k.display=C(k.display,2500)),k.getLinks=x(_,k,k.state.scopedVars,z.replaceVariables,T.timeZone)}return _})}function C(T,U=2500){const L=new Map;for(let V=-1;V<=15;V++)L.set(V,new Map);return(V,w)=>{let K=L.get(w??-1),B=K.get(V);return B||(K.size===U&&K.clear(),B=T(V,w),B.color&&(B.color=(0,o.asHexString)(B.color)),K.set(V,B)),B}}function u(T,U,L){const w=L.fieldConfigRegistry.getIfExists(U.id);if(!w)return;const K=w.process(U.value,L,w.settings);K==null?w.isCustom&&T.custom?(0,t.unset)(T.custom,w.path):(0,t.unset)(T,w.path):w.isCustom?(T.custom||(T.custom={}),(0,t.set)(T.custom,w.path,K)):(0,t.set)(T,w.path,K)}function D(T,U,L){T.links&&U.links&&(T.links=[...T.links,...U.links]);for(const V of L.fieldConfigRegistry.list())V.isCustom&&!T.custom&&(T.custom={}),P(V.isCustom?T.custom:T,V.isCustom?U.custom:U,V,L);S(T)}function P(T,U,L,V){const w=(0,t.get)(T,L.path);if(w==null){const K=V.fieldConfigRegistry.getIfExists(L.id);if(!K)return;if(K&&K.shouldApply(V.field)){const B=K.process((0,t.get)(U,K.path),V,K.settings);B!=null&&(0,t.set)(T,K.path,B)}}}function S(T){const{thresholds:U}=T;if(T.color?T.color.mode||delete T.color:U&&(T.color={mode:c.S.Thresholds}),T.hasOwnProperty("min")&&T.hasOwnProperty("max")&&T.min>T.max){const L=T.max;T.max=T.min,T.min=L}}const x=(T,U,L,V,w)=>K=>!U.config.links||U.config.links.length===0?[]:U.config.links.map(B=>{const W=O(T,U,L),_={...L,__dataContext:W},k=(H,Q,X)=>V(H,{..._,...Q},X);if(K.valueRowIndex!==void 0&&!isNaN(K.valueRowIndex)?W.value.rowIndex=K.valueRowIndex:W.value.calculatedValue=K.calculatedValue,B.onClick)return{href:B.url,title:V(B.title||"",_),target:B.targetBlank?"_blank":void 0,onClick:(H,Q)=>{B.onClick({origin:Q??U,e:H,replaceVariables:k})},origin:U};if(B.internal)return(0,f._)({link:B,internalLink:B.internal,scopedVars:_,field:U,range:B.internal.range??{},replaceVariables:V});let A=B.onBuildUrl?B.onBuildUrl({origin:U,replaceVariables:k}):B.url;return A&&(A=h.u.assureBaseUrl(A.replace(/\n/g,"")),A=V(A,_,r.b8.UriEncode),A=h.u.processUrl(A)),{href:A,title:V(B.title||"",_),target:B.targetBlank?"_blank":void 0,origin:U}});function M(T){if(!T||T.length===0)return[];const U=[...T],L=(0,b.g)();for(let V=0;V<U.length;V++){const w={...U[V]},K=[...w.fields];for(let B=0;B<K.length;B++)K[B]={...K[B],display:L};U[V]={...w,fields:K}}return U}function R(T,U,L,V,w,K){const B=T?.fieldConfigRegistry,W=(0,i.useRef)(0),_=(0,s.Z)(L?.series);return(0,i.useMemo)(()=>{if(!B||!U||!L)return;const k=L?.series;return L.structureRev==null&&k&&_&&!(0,d.nl)(k,_,d.Ch)&&W.current++,{structureRev:W.current,...L,series:E({data:k,fieldConfig:U,fieldConfigRegistry:B,replaceVariables:K,theme:w,timeZone:V})}},[B,U,L,_,V,w,K])}function O(T,U,L){return L?.__dataContext?{value:{...L.__dataContext.value}}:{value:{frame:T,field:U,data:[T]}}}},75578:(j,I,e)=>{"use strict";e.d(I,{$w:()=>m,CZ:()=>r,UY:()=>s,nf:()=>i});var t=e(29241),n=e(14951);function i(l,a){if(l.name)return l.name;const g=[];for(const c of l.fields)if(c.type!==t.fS.time){if(g.length>1)break;g.push(r(c,l))}return g.length===1?g[0]:a===void 0?l.fields.filter(c=>c.type!==t.fS.time).map(c=>r(c,l)).join(", "):l.refId?`Series (${l.refId})`:`Series (${a})`}function s(l){l.forEach(a=>{a.fields.forEach(g=>{r(g,a,l)})})}function r(l,a,g){const c=l.state?.displayName,h=!!(g&&g.length>1);if(c&&h===l.state?.multipleFrames)return c;const f=m(l,a,g);return l.state=l.state||{},l.state.displayName=f,l.state.multipleFrames=h,f}function m(l,a,g){const c=l.config?.displayName&&l.config?.displayName.length;let h=c?l.config.displayName:l.name;if(c)return h;if(a&&l.config?.displayNameFromDS)return l.config.displayNameFromDS;if(l.type===t.fS.time&&!l.labels)return h??t.Ls;let f=[],b=!1;if(g&&g.length>1){for(let E=1;E<g.length;E++)if(g[E].name!==g[E-1].name){b=!0;break}}let v=!1,y=!1;if(b&&a?.name&&(f.push(a.name),v=!0),l.name&&l.name!==t.M5&&f.push(l.name),l.labels&&a){let E=o(g??[a]);if(E)l.labels[E]&&(f.push(l.labels[E]),y=!0);else{let C=(0,n.aA)(l.labels);C&&(f.push(C),y=!0)}}return a&&!v&&!y&&l.name===t.M5&&a.name&&a.name.length>0&&(f.push(a.name),v=!0),f.length?h=f.join(" "):l.name?h=l.name:h=t.M5,h===l.name&&(h=d(l,a)),h}function d(l,a){let g=0,c=!1;if(a)for(let h=0;h<a.fields.length;h++){const f=a.fields[h];if(l===f){if(c=!0,g>0){g++;break}}else if(l.name===f.name&&(g++,c))break}return g?`${l.name} ${g}`:l.name}function o(l){let a=null;for(let g=0;g<l.length;g++){const c=l[g];for(const h of c.fields)if(h.labels){for(const f in h.labels)if(a===null)a=f;else if(f!==a)return null}}return a}},70732:(j,I,e)=>{"use strict";e.d(I,{z:()=>r});var t=e(89949),n=e.n(t),i=e(21609),s=e(61965);function r(m){return new Proxy({},{get:(d,o)=>{let l=m.frame.fields.find(h=>o===h.name);if(!l){const h=(0,t.toNumber)(o);l=m.frame.fields[h]}if(l||(l=m.frame.fields.find(h=>o===h.config.displayName)),l||(l=m.frame.fields.find(h=>h.labels?o===h.labels.name:!1)),!l)return;const a=l.display??(0,s.U)(),g=l.values[m.rowIndex],c=a(g);return c.toString=()=>(0,i.zc)(c),c}})}},33094:(j,I,e)=>{"use strict";e.d(I,{AE:()=>s.AE,CZ:()=>a.CZ,Cc:()=>o.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>i.N,NI:()=>g.NI,NN:()=>s.NN,Of:()=>o.Of,Oh:()=>s.Oh,QY:()=>r.QY,SM:()=>o.SM,SO:()=>i.S,UY:()=>a.UY,U_:()=>n.U,VB:()=>s.VB,W0:()=>s.W0,W4:()=>s.W4,WO:()=>r.WO,YO:()=>r.YO,ZD:()=>m.Z,ZN:()=>s.ZN,bP:()=>d.bP,cB:()=>t.cB,dE:()=>t.dE,dz:()=>g.dz,fD:()=>r.fD,gE:()=>n.g,gG:()=>t.gG,gb:()=>o.gb,kG:()=>s.kG,m1:()=>d.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>a.nf,op:()=>s.op,pZ:()=>t.pZ,r5:()=>t.r5,sg:()=>t.sg,uj:()=>s.uj,xD:()=>g.xD,zv:()=>l.z});var t=e(91466),n=e(61965),i=e(41199),s=e(27001),r=e(58192),m=e(35925),d=e(77104),o=e(21708),l=e(70732),a=e(75578),g=e(11024)},27001:(j,I,e)=>{"use strict";e.d(I,{AE:()=>m,NN:()=>s,Oh:()=>n,VB:()=>l,W0:()=>i,W4:()=>a,ZN:()=>o,kG:()=>t,op:()=>d,uj:()=>r});const t=(g,c,h)=>g,n=(g,c,h)=>{if(g!=null)return parseFloat(g)},i=(g,c,h)=>(delete c.field?.state?.displayName,d(g,c,h)),s=(g,c,h)=>g,r=(g,c,h)=>g,m=(g,c,h)=>g,d=(g,c,h)=>g==null?g:h&&h.expandTemplateVars&&c.replaceVariables?c.replaceVariables(g,c.field.state.scopedVars):`${g}`,o=(g,c,h)=>g,l=(g,c,h)=>g,a=(g,c,h)=>g},11024:(j,I,e)=>{"use strict";e.d(I,{NI:()=>d,dz:()=>l,xD:()=>a});var t=e(89949),n=e.n(t),i=e(66656),s=e(29241),r=e(58192),m=e(77104);function d(g,c){if(g.type===s.fS.boolean)return o(g,c);const f=(0,r.fD)(g).getCalculator(g,c),b=g.state?.range??l(g);return v=>{let y=0;v!==-1/0&&(y=(v-b.min)/b.delta,Number.isNaN(y)&&(y=0));const E=(0,m.pD)(g,v,y);return{percent:y,threshold:E,color:f(v,y,E)}}}function o(g,c){const h={color:c.visualization.getColorByName("green"),percent:1,threshold:void 0},f={color:c.visualization.getColorByName("red"),percent:0,threshold:void 0},b=(0,r.fD)(g);if(b.isContinuous&&b.getColors){const v=b.getColors(c);h.color=v[v.length-1],f.color=v[0]}return v=>v?h:f}function l(g){if(g.type!==s.fS.number)return{min:0,max:100,delta:100};let c=g.config.min,h=g.config.max;if(!(0,t.isNumber)(c)||!(0,t.isNumber)(h))if(g.values&&g.values.length){const f=(0,i.Kx)({field:g,reducers:[i.gz.min,i.gz.max]});(0,t.isNumber)(c)||(c=f[i.gz.min]),(0,t.isNumber)(h)||(h=f[i.gz.max])}else c=0,h=100;return{min:c,max:h,delta:h-c}}function a(g,c){const{config:h}=g;let{min:f,max:b}=h;return(0,t.isNumber)(f)&&(0,t.isNumber)(b)?h:c||!g.state?.range?{...h,...l(g)}:{...h,...g.state.range}}},41199:(j,I,e)=>{"use strict";e.d(I,{N:()=>i,S:()=>s});var t=e(25359),n=e(35925);const i=new n.Z,s=new t.B},77104:(j,I,e)=>{"use strict";e.d(I,{bP:()=>m,m1:()=>s,pD:()=>r,yM:()=>i});var t=e(93666),n=e(5168);const i={value:0,color:t.R};function s(d,o){if(!o||o.length===0)return i;let l=o[0];for(const a of o)if(d>=a.value)l=a;else break;return l}function r(d,o,l){const{thresholds:a}=d.config;return a?.mode===n.H.Percentage?s(l*100,a?.steps):s(o,a?.steps)}function m(d){return d.sort((o,l)=>o.value-l.value)}},18752:(j,I,e)=>{"use strict";e.d(I,{q:()=>t.q1});var t=e(64167)},13597:(j,I,e)=>{"use strict";e.r(I),e.d(I,{AnnotationChangeEvent:()=>g.n1,AppendedVectors:()=>s.l$,ArrayDataFrame:()=>r.iB,ArrayVector:()=>s.Gt,AsNumberVector:()=>s.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>s.rM,BusEventBase:()=>g.mA,BusEventWithPayload:()=>g.R_,ByNamesMatcherMode:()=>m.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>r.a2,CircularVector:()=>s.dV,ConstantVector:()=>s.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>a.cB,DashboardLoadedEvent:()=>g.Pl,DataFrameView:()=>r.US,DataHoverClearEvent:()=>g.xH,DataHoverEvent:()=>g.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>g.v9,DataSourcePluginContextProvider:()=>u.n,DataSourceUpdatedSuccessfully:()=>g.Ix,DataTransformerID:()=>m.Wk,DocsId:()=>t.xV,EventBusSrv:()=>g.Fb,FieldCache:()=>r.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>a.ZD,FieldMatcherID:()=>m.mi,FormattedVector:()=>s.$Y,FrameGeometrySourceMode:()=>f.q,FrameMatcherID:()=>m.E4,ISO_8601:()=>d.VJ,IndexVector:()=>s.rm,InternalTimeZones:()=>d.RQ,LayoutModes:()=>b.l,LegacyMappingType:()=>t.HU,MISSING_VALUE:()=>r.Yi,MatcherID:()=>m.Ff,MutableDataFrame:()=>r.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>v.c,PluginContextProvider:()=>C.b,ReducerID:()=>m.gz,Registry:()=>t.Bz,SortedVector:()=>s.oH,StreamingDataFrame:()=>r.Av,StreamingFrameAction:()=>r.T0,SystemDateFormatsState:()=>d.zf,TransformerCategory:()=>m.wf,VAR_CALC:()=>a.pZ,VAR_CELL_PREFIX:()=>a.dE,VAR_FIELD_LABELS:()=>a.E1,VAR_FIELD_NAME:()=>a.n_,VAR_SERIES_NAME:()=>a.HU,ValueMatcherID:()=>m.mE,addDurationToDate:()=>d.Ks,anySeriesWithTimeField:()=>r.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>a.SM,applyRawFieldOverrides:()=>a.Of,arrayToDataFrame:()=>r.Pc,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>a.W4,booleanValueFormatter:()=>l.IR,buildHistogram:()=>m.gY,cacheFieldDisplayNames:()=>a.UY,classicColors:()=>t.ZC,colorManipulator:()=>c.r8,compareArrayValues:()=>r.nl,compareDataFrameStructures:()=>r.Ch,containsSearchFilter:()=>t.bf,convertOldAngularValueMappings:()=>t.Jb,createDataFrame:()=>r.at,createDimension:()=>r.q2,createFieldConfigRegistry:()=>E.j,createTheme:()=>c.jG,dataFrameFromJSON:()=>r.vP,dataFrameToJSON:()=>r.Y,dataLinksOverrideProcessor:()=>a.NN,dateMath:()=>d.Rn,dateTime:()=>d.CQ,dateTimeAsMoment:()=>d.C_,dateTimeForTimeZone:()=>d.GY,dateTimeFormat:()=>d.dq,dateTimeFormatISO:()=>d.lf,dateTimeFormatTimeAgo:()=>d.E8,dateTimeFormatWithAbbrevation:()=>d.Fm,dateTimeParse:()=>d.J,decodeFieldValueEntities:()=>r.Jy,decodeFieldValueEnums:()=>r.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>a.W0,doStandardCalcs:()=>m.uP,durationToMilliseconds:()=>d.iX,ensureTimeField:()=>m.J_,escapeRegex:()=>o.yI,escapeStringForRegex:()=>o.GE,eventFactory:()=>g.Xw,fieldColorModeRegistry:()=>a.WO,fieldMatchers:()=>m.Ls,fieldReducers:()=>m.TB,filterFieldConfigOverrides:()=>y.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>o.Xt,findMatchesInText:()=>o.lu,findUniqueLabels:()=>t.IU,fixCellTemplateExpressions:()=>a.r5,formatLabels:()=>t.aA,formattedValueToString:()=>l.zc,frameMatchers:()=>m.Ac,getActiveThreshold:()=>a.m1,getAllValuesFromDimension:()=>r.r7,getBuiltInThemes:()=>c.d5,getColumnFromDimension:()=>r.$q,getColumnsFromDimension:()=>r.GV,getDataFrameRow:()=>r.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>r.YP,getDisplayProcessor:()=>a.U_,getDisplayValueAlignmentFactors:()=>a.sg,getFieldColorMode:()=>a.QY,getFieldColorModeForField:()=>a.fD,getFieldConfigWithMinMax:()=>a.xD,getFieldDisplayName:()=>a.CZ,getFieldDisplayValues:()=>a.nG,getFieldDisplayValuesProxy:()=>a.zv,getFieldMatcher:()=>m.sq,getFieldSeriesColor:()=>a.YO,getFieldTypeFromValue:()=>r.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>a.nf,getFrameMatchers:()=>m.b9,getHistogramFields:()=>m.qr,getLinksSupplier:()=>S.oB,getLocale:()=>d.Kd,getLocaleData:()=>d.k4,getMinMaxAndDelta:()=>a.dz,getPanelOptionsWithDefaults:()=>y.d4,getProcessedDataFrames:()=>r.F9,getRawDisplayProcessor:()=>a.gE,getScaleCalculator:()=>a.NI,getSearchFilterScopedVar:()=>t._6,getSeriesTimeStep:()=>t.e4,getThemeById:()=>c.jY,getTimeField:()=>r.sV,getTimeZone:()=>d.Ze,getTimeZoneGroups:()=>d.$8,getTimeZoneInfo:()=>d.Pr,getTimeZones:()=>d.ZV,getValueFormat:()=>l.Cf,getValueFormats:()=>l.QW,getValueFormatterIndex:()=>l.Td,getValueFromDimension:()=>r.jC,getValueMatcher:()=>m.IG,getWeekdayIndex:()=>d.ig,getWeekdayIndexByEnglishName:()=>d.jN,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>r.fu,guessFieldTypeFromNameAndValue:()=>r._m,guessFieldTypeFromValue:()=>r.LI,guessFieldTypes:()=>r.SX,hasLinks:()=>a.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>m.Zi,histogramFieldInfo:()=>m.py,histogramFieldsToFrame:()=>m.zM,histogramFrameBucketMaxFieldName:()=>m.cO,histogramFrameBucketMinFieldName:()=>m.wL,histogramTransformer:()=>m.Op,identityOverrideProcessor:()=>a.kG,incrRound:()=>m.Jz,incrRoundDn:()=>m.mB,incrRoundUp:()=>m.UO,intervalToAbbreviatedDurationString:()=>d.vT,isBooleanUnit:()=>l.br,isCustomFieldProp:()=>y.Lc,isDataFrame:()=>r.aY,isDataSourcePluginContext:()=>P.v,isDataSourceRef:()=>t.cv,isDateTime:()=>d.v9,isDateTimeInput:()=>d.D2,isEmptyObject:()=>t.Qr,isHistogramFrameBucketMaxFieldName:()=>m.kl,isHistogramFrameBucketMinFieldName:()=>m.Ok,isLikelyAscendingVector:()=>m.lP,isStandardFieldProp:()=>y._k,isTableData:()=>r.Ji,isTimeSeriesFrame:()=>r.pP,isTimeSeriesFrames:()=>r.xI,isValidDate:()=>d.qb,isValidDuration:()=>d.jO,isValidGoDuration:()=>d.IA,localTimeFormat:()=>d.Ji,locale:()=>l.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>h.F,numberOverrideProcessor:()=>a.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>m.JP,parseDuration:()=>d.RA,parseFlags:()=>o.TL,parseLabels:()=>t.J8,preProcessPanelData:()=>r.zR,rangeUtil:()=>d.cT,readCSV:()=>t.uP,reduceField:()=>m.Kx,renderLegendFormat:()=>t.Wn,renderMarkdown:()=>o.ap,renderTextPanelMarkdown:()=>o.xH,restoreCustomOverrideRules:()=>y.__,reverseDataFrame:()=>r.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>l.Qj,selectOverrideProcessor:()=>a.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>d.i_,setTimeZoneResolver:()=>d.K7,setWeekStart:()=>d.Ls,shallowCompare:()=>r.Vv,simpleCountUnit:()=>l.SR,sortDataFrame:()=>r.aK,sortThresholds:()=>a.bP,standardEditorsRegistry:()=>a.SO,standardFieldConfigEditorRegistry:()=>a.N6,standardTransformers:()=>m.YR,standardTransformersRegistry:()=>m.Ze,stringFormater:()=>l.vb,stringOverrideProcessor:()=>a.op,stringStartsAsRegEx:()=>o.oH,stringToJsRegex:()=>o.jO,stringToMs:()=>o.e0,systemDateFormats:()=>d.U6,textUtil:()=>o.QX,thresholdsOverrideProcessor:()=>a.ZN,timeZoneAbbrevation:()=>d.Hk,timeZoneFormatUserFriendly:()=>d.Vs,toCSV:()=>t.MJ,toDataFrame:()=>r.g0,toDataFrameDTO:()=>r.og,toDuration:()=>d.np,toFilteredDataFrameDTO:()=>r.Aw,toFixed:()=>l.FH,toFixedScaled:()=>l.bn,toFixedUnit:()=>l.q2,toFloatOrUndefined:()=>o.dz,toIntegerOrUndefined:()=>o.By,toLegacyResponseData:()=>r.Zr,toNumberString:()=>o.PF,toOption:()=>t.Er,toPascalCase:()=>o.Mh,toUtc:()=>d.zh,transformDataFrame:()=>m.Hz,unEscapeStringFromRegex:()=>o.x6,unitOverrideProcessor:()=>a.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>a.Cc,usePluginContext:()=>D.g,validateFieldConfig:()=>a.gb,valueMappingsOverrideProcessor:()=>a.uj,valueMatchers:()=>m.U8,vectorator:()=>s.sD,withLoadingIndicator:()=>t.xc});var t=e(18029),n=e(312),i={};for(const x in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","anyToNumber","arrayUtils","binaryOperators","classicColors","containsSearchFilter","convertOldAngularValueMappings","deprecationWarning","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getSearchFilterScopedVar","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","isEmptyObject","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","renderLegendFormat","roundDecimals","serializeStateToUrlParam","toCSV","toOption","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(x)<0&&(i[x]=()=>n[x]);e.d(I,i);var s=e(91382),r=e(88570),m=e(80254),d=e(51573),o=e(48154),l=e(3877),a=e(33094),g=e(56461),c=e(47043),h=e(37934),f=e(18752),b=e(47435),v=e(97585),y=e(83335),E=e(26946),C=e(90665),u=e(61576),D=e(93752),P=e(58971),S=e(21708)},37934:(j,I,e)=>{"use strict";e.d(I,{F:()=>t.F});var t=e(60519)},60519:(j,I,e)=>{"use strict";e.d(I,{F:()=>n});var t=e(25359);const n=new t.B},97585:(j,I,e)=>{"use strict";e.d(I,{c:()=>o});var t=e(89949),n=e.n(t),i=e(35925),s=e(9232),r=e(58939),m=e(2471),d=e(26946);class o extends s.Sg{constructor(a){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new i.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=a}get defaults(){let a=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const g=new m.rt;this.optionsSupplier(g,{data:[]});for(const c of g.getItems())c.defaultValue!=null&&(0,t.set)(a,c.path,c.defaultValue)}return a}get fieldConfigDefaults(){const a=this._fieldConfigDefaults.defaults;a.custom={};for(const g of this.fieldConfigRegistry.list())g.defaultValue!==void 0&&(0,t.set)(a,g.id,g.defaultValue);return{defaults:{...a},overrides:this._fieldConfigDefaults.overrides}}setDefaults(a){return(0,r.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=a,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(a){return(0,r.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=a,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(a){return this.onPanelMigration=a,this}setPanelChangeHandler(a){return this.onPanelTypeChanged=a,this}setPanelOptions(a){return this.optionsSupplier=a,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(a){return this.dataSupport={...this.dataSupport,...a},this}useFieldConfig(a={}){return this._initConfigRegistry=()=>(0,d.j)(a,this.meta.name),this}setSuggestionsSupplier(a){return this.suggestionsSupplier=a,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(a){return this.meta.id===a}}},83335:(j,I,e)=>{"use strict";e.d(I,{Lc:()=>f,__:()=>h,_k:()=>b,aS:()=>l,d4:()=>d});var t=e(89949),n=e.n(t),i=e(58192),s=e(93666),r=e(25587),m=e(5168);function d({plugin:v,currentOptions:y,currentFieldConfig:E,isAfterPluginChange:C}){const u=(0,t.mergeWith)({},v.defaults,y||{},(S,x)=>{if((0,t.isArray)(x))return x}),D=o(E,v),P=g(v,D,C);return{options:u,fieldConfig:P}}function o(v,y){const E=y.fieldConfigDefaults,C={defaults:(0,t.mergeWith)({},E.defaults,v?v.defaults:{},(u,D)=>{if((0,t.isArray)(D))return D}),overrides:v?.overrides??[]};a(C.defaults,"",y.fieldConfigRegistry),C.defaults.thresholds&&c(C.defaults.thresholds),C.overrides=l(C.overrides,u=>y.fieldConfigRegistry.getIfExists(u.id)!==void 0);for(const u of C.overrides)for(const D of u.properties)D.id==="thresholds"&&c(D.value);return C}function l(v,y){return v.map(E=>{const C=E.properties.filter(y);return{...E,properties:C}}).filter(E=>E.properties.length>0)}function a(v,y,E){let C=!1;for(const u of Object.keys(v)){const D=v[u],P=`${y}${u}`,S=!!E.getIfExists(P);if(S){C=!0;continue}(0,t.isArray)(D)||!(0,t.isObject)(D)?S||(0,t.unset)(v,u):a(D,`${P}.`,E)||(0,t.unset)(v,u)}return C}function g(v,y,E){if(!E)return y;const C=v.fieldConfigRegistry.getIfExists(r.qb.Color);if(C&&C.settings){const u=C.settings,D=i.WO.getIfExists(y.defaults.color?.mode);if(!u.byValueSupport&&(!D||D.isByValue))return y.defaults.color={mode:s.S.PaletteClassic},y;if(u.byValueSupport&&u.preferThresholdsMode&&D?.id!==s.S.Fixed&&(!D||!D.isByValue))return y.defaults.color={mode:s.S.Thresholds},y;if(u.bySeriesSupport&&D?.isByValue)return y.defaults.color={mode:s.S.PaletteClassic},y}return y}function c(v){v.mode||(v.mode=m.H.Absolute),v.steps?v.steps.length&&(v.steps[0].value=-1/0):v.steps=[]}function h(v,y){const E={defaults:{...v.defaults,custom:y.defaults.custom},overrides:[...v.overrides]};for(const C of y.overrides)for(const u of C.properties)if(f(u)){const D=E.overrides.find(P=>(0,t.isEqual)(P.matcher,C.matcher));D?D!==C&&D.properties.push(u):E.overrides.push(C)}return E}function f(v){return v.id.startsWith("custom.")}function b(v){return!f(v)}},26946:(j,I,e)=>{"use strict";e.d(I,{j:()=>s});var t=e(35925),n=e(41199),i=e(2471);function s(m={},d){const o=new t.Z,l=n.N.list(),a={};if(m.useCustomConfig){const g=new i.vo;m.useCustomConfig(g);for(const c of g.getRegistry().list())if(c.isCustom=!0,c.id="custom."+c.id,r(c,l)){const h=a[c.category[0]]??[];h.push(c),a[c.category[0]]=h}else o.register(c)}for(let g of l)if(!(m.disableStandardOptions&&m.disableStandardOptions.indexOf(g.id)>-1)){if(m.standardOptions){const c=m.standardOptions[g.id]?.hideFromDefaults,h=m.standardOptions[g.id]?.defaultValue,f=m.standardOptions[g.id]?.settings;c&&(g={...g,hideFromDefaults:c}),h&&(g={...g,defaultValue:h}),f&&(g={...g,settings:g.settings?{...g.settings,...f}:f})}if(o.register(g),g.category&&a[g.category[0]])for(let c of a[g.category[0]])o.register(c)}for(const g of o.list())if(g.path.indexOf("[")>0)throw new Error(`[${d}] Field config paths do not support arrays: ${g.id}`);return o}function r(m,d){return!!d.find(o=>m.category&&o.category&&m.category[0]===o.category[0])}},48154:(j,I,e)=>{"use strict";e.d(I,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>r,TL:()=>i.TL,Xt:()=>i.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>i.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(95676),n=e(18112),i=e(61329),s=e(42690);const r={escapeHtml:s.Xv,hasAnsiCodes:s.oT,sanitize:s.Nw,sanitizeTextPanelContent:s.he,sanitizeUrl:s.Nm,sanitizeSVGContent:s.Is,sanitizeTrustedTypes:s.cd,sanitizeTrustedTypesRSS:s.pQ}},18112:(j,I,e)=>{"use strict";e.d(I,{a:()=>m,x:()=>d});var t=e(18353),n=e(53938),i=e(42690);let s=!1;const r={headerIds:!1,pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function m(o,l){s||(t.TU.use((0,n.d)()),t.TU.setOptions({...r}),s=!0);let a;l?.breaks&&(a={...r,breaks:!0});const g=(0,t.TU)(o||"",a);return l?.noSanitize?g:(0,i.he)(g)}function d(o,l){s||(t.TU.use((0,n.d)()),t.TU.setOptions({...r}),s=!0);const a=(0,t.TU)(o||"");return l?.noSanitize?a:(0,i.he)(a)}},42690:(j,I,e)=>{"use strict";e.d(I,{Is:()=>c,Nm:()=>h,Nw:()=>o,Xv:()=>b,cd:()=>a,he:()=>g,oT:()=>f,pQ:()=>l});var t=e(54852),n=e(17032),i=e.n(n),s=e(3182),r=e.n(s);const m=Object.keys(s.whiteList).reduce((v,y)=>(v[y]=s.whiteList[y]?.concat(["class","style"]),v),{}),d=new s.FilterXSS({whiteList:m,css:{whiteList:{...s.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function o(v){try{return i().sanitize(v,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input"]})}catch{return console.error("String could not be sanitized",v),b(v)}}function l(v){return i().sanitize(v,{RETURN_TRUSTED_TYPE:!0,ADD_ATTR:["xmlns:atom","version","property","content"],ADD_TAGS:["rss","meta","channel","title","link","description","atom:link","item","pubDate","guid"],PARSER_MEDIA_TYPE:"application/xhtml+xml"})}function a(v){return i().sanitize(v,{RETURN_TRUSTED_TYPE:!0})}function g(v){try{return d.process(v)}catch{return console.error("String could not be sanitized",v),"Text string could not be sanitized"}}function c(v){return i().sanitize(v,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function h(v){return(0,t.N)(v)}function f(v){return/\u001b\[\d{1,2}m/.test(v)}function b(v){return String(v).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},95676:(j,I,e)=>{"use strict";e.d(I,{By:()=>h,GE:()=>d,Mh:()=>b,PF:()=>c,dz:()=>f,e0:()=>g,jO:()=>a,oH:()=>l,x6:()=>o,yI:()=>v});var t=e(89949),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",r=new RegExp(s,"g"),m=new RegExp("(\\\\)"+s,"g");function d(y){return y&&y.replace(r,"\\$1")}function o(y){return y&&y.replace(m,"$2")}function l(y){return y?y[0]==="/":!1}function a(y){if(!l(y))return new RegExp(`^${y}$`);const E=y.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!E)throw new Error(`'${y}' is not a valid regular expression.`);return new RegExp(E[1],E[2])}function g(y){if(!y)return 0;const E=parseInt(y,10),C=y.slice(String(E).length),u=1e3,D=u*60,P=D*60,S=P*24;switch(C){case"s":return E*u;case"m":return E*D;case"h":return E*P;case"d":return E*S;default:if(!C)return isNaN(E)?0:E;throw new Error("Not supported unit: "+C)}}function c(y){return y!=null&&Number.isFinite(y)?y.toString():""}function h(y){if(!y)return;const E=parseInt(y,10);return isNaN(E)?void 0:E}function f(y){if(!y)return;const E=parseFloat(y);return isNaN(E)?void 0:E}function b(y){const E=(0,t.camelCase)(y);return E.charAt(0).toUpperCase()+E.substring(1)}function v(y){return y.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},61329:(j,I,e)=>{"use strict";e.d(I,{TL:()=>m,Xt:()=>t,lu:()=>i});function t({searchWords:d,textToHighlight:o}){const l=[];for(const a of d)l.push(...i(o,a));return l}const n=d=>d.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function i(d,o){if(!d||!o)return[];const l=[],{cleaned:a,flags:g}=m(n(o));let c;try{c=new RegExp(`(?:${a})`,g)}catch{return l}return d.replace(c,(h,...f)=>{if(h){const b=f[f.length-2];l.push({text:h,start:b,length:h.length,end:b+h.length})}return""}),l}const s="-",r=/\(\?([ims-]+)\)/g;function m(d){const o=new Set(["g"]);return{cleaned:d.replace(r,(a,g)=>{const c=g.startsWith(s);for(let h=0;h<g.length;++h){const f=g.charAt(h);c||g.charAt(h-1)===s?o.delete(f):f!==s&&o.add(f)}return""}),flags:Array.from(o).join("")}}},96750:(j,I,e)=>{"use strict";e.r(I),e.d(I,{alpha:()=>f,asHexString:()=>m,asRgbString:()=>d,darken:()=>b,decomposeColor:()=>l,emphasize:()=>h,getContrastRatio:()=>g,getLuminance:()=>c,hexToRgb:()=>i,hslToRgb:()=>o,lighten:()=>v,recomposeColor:()=>a,rgbToHex:()=>r});var t=e(71685);function n(y,E=0,C=1){return Math.min(Math.max(E,y),C)}function i(y){y=y.slice(1);const E=new RegExp(`.{1,${y.length>=6?2:1}}`,"g");let C=y.match(E);return C&&C[0].length===1&&(C=C.map(u=>u+u)),C?`rgb${C.length===4?"a":""}(${C.map((u,D)=>D<3?parseInt(u,16):Math.round(parseInt(u,16)/255*1e3)/1e3).join(", ")})`:""}function s(y){const E=y.toString(16);return E.length===1?`0${E}`:E}function r(y){if(y.indexOf("#")===0)return y;const{values:E}=l(y);return`#${E.map(C=>s(C)).join("")}`}function m(y){if(y[0]==="#")return y;const E=(0,t.Z)(y);return E.getAlpha()===1?E.toHexString():E.toHex8String()}function d(y){return y.startsWith("rgb")?y:(0,t.Z)(y).toRgbString()}function o(y){const E=l(y),{values:C}=E,u=C[0],D=C[1]/100,P=C[2]/100,S=D*Math.min(P,1-P),x=(O,T=(O+u/30)%12)=>P-S*Math.max(Math.min(T-3,9-T,1),-1);let M="rgb";const R=[Math.round(x(0)*255),Math.round(x(8)*255),Math.round(x(4)*255)];return E.type==="hsla"&&(M+="a",R.push(C[3])),a({type:M,values:R})}function l(y){if(typeof y!="string")return y;if(y.charAt(0)==="#")return l(i(y));const E=y.indexOf("("),C=y.substring(0,E);if(["rgb","rgba","hsl","hsla","color"].indexOf(C)===-1)throw new Error(`Unsupported '${y}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let u=y.substring(E+1,y.length-1),D;if(C==="color"){if(u=u.split(" "),D=u.shift(),u.length===4&&u[3].charAt(0)==="/"&&(u[3]=u[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(D)===-1)throw new Error(`Unsupported ${D} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else u=u.split(",");return u=u.map(P=>parseFloat(P)),{type:C,values:u,colorSpace:D}}function a(y){const{type:E,colorSpace:C}=y;let u=y.values;return E.indexOf("rgb")!==-1?u=u.map((D,P)=>P<3?parseInt(D,10):D):E.indexOf("hsl")!==-1&&(u[1]=`${u[1]}%`,u[2]=`${u[2]}%`),E.indexOf("color")!==-1?u=`${C} ${u.join(" ")}`:u=`${u.join(", ")}`,`${E}(${u})`}function g(y,E,C){const u=c(y),D=c(E,C);return(Math.max(u,D)+.05)/(Math.min(u,D)+.05)}function c(y,E){const C=l(y);let u=C.type==="hsl"?l(o(y)).values:C.values;if(E&&C.type==="rgba"){const P=l(E),S=u[3];u[0]=u[0]*S+P.values[0]*(1-S),u[1]=u[1]*S+P.values[1]*(1-S),u[2]=u[2]*S+P.values[2]*(1-S)}const D=u.map(P=>(C.type!=="color"&&(P/=255),P<=.03928?P/12.92:((P+.055)/1.055)**2.4));return Number((.2126*D[0]+.7152*D[1]+.0722*D[2]).toFixed(3))}function h(y,E=.15){return c(y)>.5?b(y,E):v(y,E)}function f(y,E){if(y==="")return"#000000";if(E=n(E),y[0]==="#"){if(y.length===9)y=y.substring(0,7);else if(y.length<=5){let u="#";for(let D=1;D<4;D++)u+=y[D]+y[D];y=u}return y+Math.round(E*255).toString(16).padStart(2,"0")}else{if(y[3]==="(")return y.replace(")",`, ${E})`);if(y[4]==="(")return y.substring(0,y.lastIndexOf(","))+`, ${E})`}const C=l(y);return C.type==="color"?C.values[3]=`/${E}`:C.values[3]=E,a(C)}function b(y,E){const C=l(y);if(E=n(E),C.type.indexOf("hsl")!==-1)C.values[2]*=1-E;else if(C.type.indexOf("rgb")!==-1||C.type.indexOf("color")!==-1)for(let u=0;u<3;u+=1)C.values[u]*=1-E;return a(C)}function v(y,E){const C=l(y);if(E=n(E),C.type.indexOf("hsl")!==-1)C.values[2]+=(100-C.values[2])*E;else if(C.type.indexOf("rgb")!==-1)for(let u=0;u<3;u+=1)C.values[u]+=(255-C.values[u])*E;else if(C.type.indexOf("color")!==-1)for(let u=0;u<3;u+=1)C.values[u]+=(1-C.values[u])*E;return a(C)}},45540:(j,I,e)=>{"use strict";e.d(I,{j:()=>w});function t(){const B=["xs","sm","md","lg","xl","xxl"],W="px",_={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function k(z){return`@media (min-width:${typeof z=="number"?z:_[z]}${W})`}function A(z){return`@media (max-width:${(typeof z=="number"?z:_[z])-5/100}${W})`}return{values:_,up:k,down:A,keys:B,unit:W}}var n=e(89949),i=e(96750);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#FF9900",orangeDarkText:"#fbad37",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FF9900",orangeLightText:"#B5510D"};class r{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.12)`,medium:`rgba(${this.whiteBase}, 0.20)`,strong:`rgba(${this.whiteBase}, 0.30)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.10)`,shade:`rgba(${this.whiteBase}, 0.14)`,transparent:`rgba(${this.whiteBase}, 0.08)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:`rgba(${this.whiteBase}, 0.08)`},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,selectedBorder:s.orangeDarkMain,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class m{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.08)`,shade:`rgba(${this.blackBase}, 0.15)`,transparent:`rgba(${this.blackBase}, 0.08)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.weak},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,selectedBorder:s.orangeLightMain,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function d(K){const B=new r,W=new m,_=(K.mode??"dark")==="dark"?B:W,{primary:k=_.primary,secondary:A=_.secondary,info:z=_.info,warning:H=_.warning,success:Q=_.success,error:X=_.error,tonalOffset:te=_.tonalOffset,hoverFactor:oe=_.hoverFactor,contrastThreshold:Z=_.contrastThreshold,...le}=K;function ce(ne,pe=Z){return(0,i.getContrastRatio)(B.text.maxContrast,ne,_.background.primary)>=pe?B.text.maxContrast:W.text.maxContrast}const q=({color:ne,name:pe})=>{if(ne={...ne,name:pe},!ne.main)throw new Error(`Missing main color for ${pe}`);return ne.text||(ne.text=ne.main),ne.border||(ne.border=ne.text),ne.shade||(ne.shade=_.mode==="light"?(0,i.darken)(ne.main,te):(0,i.lighten)(ne.main,te)),ne.transparent||(ne.transparent=(0,i.alpha)(ne.main,.15)),ne.contrastText||(ne.contrastText=ce(ne.main)),ne};return(0,n.merge)({..._,primary:q({color:k,name:"primary"}),secondary:q({color:A,name:"secondary"}),info:q({color:z,name:"info"}),error:q({color:X,name:"error"}),success:q({color:Q,name:"success"}),warning:q({color:H,name:"warning"}),getContrastText:ce,emphasize:(ne,pe)=>(0,i.emphasize)(ne,pe??oe)},le)}function o(K,B){const W={padding:1,headerHeight:4,background:K.background.primary,borderColor:K.border.weak,boxShadow:"none"},_={borderColor:K.border.medium,borderHover:K.border.strong,text:K.text.primary,background:K.mode==="dark"?K.background.canvas:K.background.primary};return{height:{sm:3,md:4,lg:6},input:_,panel:W,dropdown:{background:_.background},tooltip:{background:K.background.secondary,text:K.text.primary},dashboard:{background:K.background.canvas,padding:1},overlay:{background:K.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:K.warning.contrastText,background:K.warning.main},horizontalDrawer:{defaultHeight:400},table:{rowHoverBackground:K.emphasize(K.background.primary,.03)}}}function l(K){return K.mode==="dark"?{z1:"0px 1px 2px rgba(1, 4, 9, 0.75)",z2:"0px 4px 8px rgba(1, 4, 9, 0.75)",z3:"0px 8px 24px rgb(1, 4, 9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function a(K){const B=K.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:k=>`${(k??1)*B}px`}}function g(K={}){const{gridSize:B=8}=K,W=k=>typeof k=="string"?k:k*B,_=(...k)=>(k.length===0&&(k[0]=1),k.map(A=>{const z=W(A);return typeof z=="number"?`${z}px`:z}).join(" "));return _.gridSize=B,_}const c={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},h={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function f(K=["all"],B={}){const{duration:W=h.standard,easing:_=c.easeInOut,delay:k=0}=B;return(Array.isArray(K)?K:[K]).map(A=>`${A} ${typeof W=="string"?W:v(W)} ${_} ${typeof k=="string"?k:v(k)}`).join(",")}function b(K){if(!K)return 0;const B=K/36;return Math.round((4+15*B**.25+B/5)*10)}function v(K){return`${Math.round(K)}ms`}function y(){return{create:f,duration:h,easing:c,getAutoHeightDuration:b}}const E='"Inter", "Helvetica", "Arial", sans-serif',C="'Roboto Mono', monospace";function u(K,B={}){const{fontFamily:W=E,fontFamilyMonospace:_=C,fontSize:k=14,fontWeightLight:A=300,fontWeightRegular:z=400,fontWeightMedium:H=500,fontWeightBold:Q=500,htmlFontSize:X=14}=B,te=k/14,oe=q=>`${q/X*te}rem`,Z=(q,ne,pe,re,ie)=>{if(pe%2!==0||ne%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:W,fontWeight:q,fontSize:oe(ne),lineHeight:pe/ne,...W===E?{letterSpacing:`${D(re/ne)}em`}:{},...ie}},le={h1:Z(z,28,32,-.25),h2:Z(z,24,28,0),h3:Z(z,22,24,0),h4:Z(z,18,22,.25),h5:Z(z,16,22,0),h6:Z(H,14,22,.15),body:Z(z,k,22,.15),bodySmall:Z(z,12,18,.15)};return{htmlFontSize:X,pxToRem:oe,fontFamily:W,fontFamilyMonospace:_,fontSize:k,fontWeightLight:A,fontWeightRegular:z,fontWeightMedium:H,fontWeightBold:Q,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...le}}function D(K){return Math.round(K*1e5)/1e5}var P=e(40125);function S(K){const B={name:"Grafana Default",typography:{fontFamily:{sansSerif:K.typography.fontFamily,monospace:K.typography.fontFamilyMonospace},size:{base:`${K.typography.fontSize}px`,xs:K.typography.size.xs,sm:K.typography.size.sm,md:K.typography.size.md,lg:K.typography.size.lg},heading:{h1:K.typography.h1.fontSize,h2:K.typography.h2.fontSize,h3:K.typography.h3.fontSize,h4:K.typography.h4.fontSize,h5:K.typography.h5.fontSize,h6:K.typography.h6.fontSize},weight:{light:K.typography.fontWeightLight,regular:K.typography.fontWeightRegular,semibold:K.typography.fontWeightMedium,bold:K.typography.fontWeightBold},lineHeight:{xs:K.typography.bodySmall.lineHeight,sm:K.typography.bodySmall.lineHeight,md:K.typography.body.lineHeight,lg:K.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${K.breakpoints.values.xs}px`,sm:`${K.breakpoints.values.sm}px`,md:`${K.breakpoints.values.md}px`,lg:`${K.breakpoints.values.lg}px`,xl:`${K.breakpoints.values.xl}px`,xxl:`${K.breakpoints.values.xxl}px`},spacing:{base:K.spacing.gridSize,insetSquishMd:K.spacing(.5,1),d:K.spacing(2),xxs:K.spacing(.25),xs:K.spacing(.5),sm:K.spacing(1),md:K.spacing(2),lg:K.spacing(3),xl:K.spacing(4),gutter:K.spacing(4),formSpacingBase:K.spacing.gridSize,formMargin:`${K.spacing.gridSize*4}px`,formFieldsetMargin:`${K.spacing.gridSize*2}px`,formInputHeight:K.spacing.gridSize*4,formButtonHeight:K.spacing.gridSize*4,formInputPaddingHorizontal:`${K.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${K.spacing.gridSize/2}px`,formInputMargin:`${K.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${K.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:K.shape.borderRadius(1),md:K.shape.borderRadius(2),lg:K.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:K.spacing.gridSize*K.components.height.sm,md:K.spacing.gridSize*K.components.height.md,lg:K.spacing.gridSize*K.components.height.lg},panelPadding:K.components.panel.padding*K.spacing.gridSize,panelHeaderHeight:K.spacing.gridSize*K.components.panel.headerHeight,zIndex:K.zIndex},W={...x,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},_={bg1:K.colors.background.primary,bg2:K.colors.background.secondary,bg3:K.colors.action.hover,dashboardBg:K.colors.background.canvas,bgBlue1:K.colors.primary.main,bgBlue2:K.colors.primary.shade},k={border1:K.colors.border.weak,border2:K.colors.border.medium,border3:K.colors.border.strong},A={textStrong:K.colors.text.maxContrast,textHeading:K.colors.text.primary,text:K.colors.text.primary,textSemiWeak:K.colors.text.secondary,textWeak:K.colors.text.secondary,textFaint:K.colors.text.disabled,textBlue:K.colors.primary.text},z={formLabel:K.colors.text.primary,formDescription:K.colors.text.secondary,formInputBg:K.components.input.background,formInputBgDisabled:K.colors.action.disabledBackground,formInputBorder:K.components.input.borderColor,formInputBorderHover:K.components.input.borderHover,formInputBorderActive:K.colors.primary.border,formInputBorderInvalid:K.colors.error.border,formInputPlaceholderText:K.colors.text.disabled,formInputText:K.components.input.text,formInputDisabledText:K.colors.action.disabledText,formFocusOutline:K.colors.primary.main,formValidationMessageText:K.colors.error.contrastText,formValidationMessageBg:K.colors.error.main};return{...B,type:K.colors.mode==="dark"?P.Q.Dark:P.Q.Light,isDark:K.isDark,isLight:K.isLight,name:K.name,palette:{...W,brandPrimary:W.orange,brandSuccess:K.colors.success.main,brandWarning:K.colors.warning.main,brandDanger:K.colors.error.main,queryRed:K.colors.error.text,queryGreen:K.colors.success.text,queryPurple:"#fe85fc",queryOrange:W.orange,online:K.colors.success.main,warn:K.colors.success.main,critical:K.colors.success.main},colors:{..._,...k,...z,...A,bodyBg:K.colors.background.canvas,panelBg:K.components.panel.background,panelBorder:K.components.panel.borderColor,pageHeaderBg:K.colors.background.canvas,pageHeaderBorder:K.colors.background.canvas,dropdownBg:z.formInputBg,dropdownShadow:W.black,dropdownOptionHoverBg:_.bg2,link:K.colors.text.primary,linkDisabled:K.colors.text.disabled,linkHover:K.colors.text.maxContrast,linkExternal:K.colors.text.link},shadows:{listItem:"none"},visualization:K.visualization}}const x={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var M=e(93666);function R(K){const B=K.mode==="light"?T():O(),W={};for(const A of B)for(const z of A.shades)if(W[z.name]=z.color,z.aliases)for(const H of z.aliases)W[H]=z.color;W.transparent="rgba(0,0,0,0)",W["panel-bg"]=K.background.primary,W.text=K.text.primary;const _=A=>{if(!A)return M.R;const z=W[A];if(z)return z;if(A[0]==="#"||A.indexOf("rgb")>-1)return A;const H=L[A.toLowerCase()];return H?(W[A]=H,H):A},k=U();return{hues:B,palette:k,getColorByName:_}}function O(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function T(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function U(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const L={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},V={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function w(K={}){const{colors:B={},spacing:W={},shape:_={},typography:k={}}=K,A=d(B),z=t(),H=g(W),Q=a(_),X=u(A,k),te=l(A),oe=y(),Z=o(A,te),le=R(A),ce={name:A.mode==="dark"?"Dark":"Light",isDark:A.mode==="dark",isLight:A.mode==="light",colors:A,breakpoints:z,spacing:H,shape:Q,components:Z,typography:X,shadows:te,transitions:oe,visualization:le,zIndex:{...V},flags:{}};return{...ce,v1:S(ce)}}},47043:(j,I,e)=>{"use strict";e.d(I,{d5:()=>n.d,jG:()=>t.j,jY:()=>n.j,r8:()=>i});var t=e(45540),n=e(11391),i=e(96750)},11391:(j,I,e)=>{"use strict";e.d(I,{d:()=>s,j:()=>i});var t=e(25359),n=e(45540);function i(l){return(r.getIfExists(l)??r.get("dark")).build()}function s(l){return r.list().filter(a=>l?!0:!a.isExtra)}const r=new t.B(()=>[{id:"system",name:"System preference",build:m},{id:"dark",name:"Dark",build:()=>(0,n.j)({colors:{mode:"dark"}})},{id:"light",name:"Light",build:()=>(0,n.j)({colors:{mode:"light"}})},{id:"blue-night",name:"Blue night",build:o,isExtra:!0},{id:"midnight",name:"Midnight",build:d,isExtra:!0}]);function m(){const a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return i(a)}function d(){const l="204, 204, 220";return(0,n.j)({name:"Midnight",colors:{mode:"dark",background:{canvas:"#000000",primary:"#000000",secondary:"#181818"},border:{weak:`rgba(${l}, 0.17)`,medium:`rgba(${l}, 0.25)`,strong:`rgba(${l}, 0.35)`}}})}function o(){return(0,n.j)({name:"Blue night",colors:{mode:"dark",background:{canvas:"#15161d",primary:"#15161d",secondary:"#1d1f2e"},border:{weak:"#2e304f",medium:"#2e304f",strong:"#2e304f"}}})}},66656:(j,I,e)=>{"use strict";e.d(I,{Kx:()=>d,TB:()=>o,gz:()=>m,uP:()=>l});var t=e(89949),n=e.n(t),i=e(53933),s=e(29241),r=e(25359),m=(y=>(y.sum="sum",y.max="max",y.min="min",y.logmin="logmin",y.mean="mean",y.variance="variance",y.stdDev="stdDev",y.last="last",y.first="first",y.count="count",y.range="range",y.diff="diff",y.diffperc="diffperc",y.delta="delta",y.step="step",y.firstNotNull="firstNotNull",y.lastNotNull="lastNotNull",y.changeCount="changeCount",y.distinctCount="distinctCount",y.allIsZero="allIsZero",y.allIsNull="allIsNull",y.allValues="allValues",y.uniqueValues="uniqueValues",y))(m||{});function d(y){const{field:E,reducers:C}=y;if(!E||!C||C.length<1)return{};if(E.state?.calcs){const R=[];for(const O of C)E.state.calcs.hasOwnProperty(O)||R.push(O);if(R.length<1)return{...E.state.calcs}}E.state||(E.state={});const u=o.list(C);if(E.values.length<1){const R={...E.state.calcs};for(const O of u)R[O.id]=O.emptyInputResult!==null?O.emptyInputResult:null;return E.state.calcs=R}const{nullValueMode:P}=E.config,S=P===i.Gl.Ignore,x=P===i.Gl.AsZero;if(u.length===1&&u[0].reduce){const R=u[0].reduce(E,S,x);return E.state.calcs={...E.state.calcs,...R},R}let M=l(E,S,x);for(const R of u)!M.hasOwnProperty(R.id)&&R.reduce&&(M={...M,...R.reduce(E,S,x)});return E.state.calcs={...E.state.calcs,...M},M}const o=new r.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:h},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:c},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:g},{id:"first",name:"First",description:"First Value",standard:!0,reduce:a},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:f},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:f},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:b},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:v},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:y=>({allValues:y.values})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:y=>({uniqueValues:[...new Set(y.values)]})}]);function l(y,E,C){const u={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},D=y.values;u.count=E?D.length:D.filter(S=>S!=null).length;const P=y.type===s.fS.number||s.fS.time;for(let S=0;S<D.length;S++){let x=D[S];if(S===0&&(u.first=x),u.last=x,x===null){if(E)continue;C&&(x=0)}if(x!=null){const M=u.firstNotNull===null;if(M&&(u.firstNotNull=x),P){if(u.sum+=x,u.allIsNull=!1,u.nonNullCount++,!M){const R=x-u.lastNotNull;u.step>R&&(u.step=R),u.lastNotNull>x?(u.previousDeltaUp=!1,S===D.length-1&&(u.delta+=x)):(u.previousDeltaUp?u.delta+=R:u.delta+=x,u.previousDeltaUp=!0)}x>u.max&&(u.max=x),x<u.min&&(u.min=x),x<u.logmin&&x>0&&(u.logmin=x)}x!==0&&(u.allIsZero=!1),u.lastNotNull=x}}return u.max===-Number.MAX_VALUE&&(u.max=null),u.min===Number.MAX_VALUE&&(u.min=null),u.step===Number.MAX_VALUE&&(u.step=null),u.nonNullCount>0&&(u.mean=u.sum/u.nonNullCount),u.allIsNull&&(u.allIsZero=!1),u.max!==null&&u.min!==null&&(u.range=u.max-u.min),(0,t.isNumber)(u.firstNotNull)&&(0,t.isNumber)(u.lastNotNull)&&(u.diff=u.lastNotNull-u.firstNotNull),(0,t.isNumber)(u.firstNotNull)&&(0,t.isNumber)(u.diff)&&(u.diffperc=u.diff/u.firstNotNull),u}function a(y,E,C){return{first:y.values[0]}}function g(y,E,C){const u=y.values;for(let D=0;D<u.length;D++){const P=u[D];if(P!=null&&P!==void 0)return{firstNotNull:P}}return{firstNotNull:null}}function c(y,E,C){const u=y.values;return{last:u[u.length-1]}}function h(y,E,C){const u=y.values;let D=u.length-1;for(;D>=0;){const P=u[D--];if(P!=null&&P!==void 0)return{lastNotNull:P}}return{lastNotNull:null}}function f(y,E,C){if(!(y.type===s.fS.number||y.type===s.fS.time))return{variance:0,stdDev:0};let u=0,D=0,P=0;const S=y.values;for(let x=0;x<S.length;x++){const M=S[x];if(M!=null){P++;let R=D;D+=(M-R)/P,u+=(M-R)*(M-D)}}if(P>0){const x=u/P;return{variance:x,stdDev:Math.sqrt(x)}}return{variance:0,stdDev:0}}function b(y,E,C){const u=y.values;let D=0,P=!0,S=null;for(let x=0;x<u.length;x++){let M=u[x];if(M===null){if(E)continue;C&&(M=0)}!P&&S!==M&&D++,P=!1,S=M}return{changeCount:D}}function v(y,E,C){const u=y.values,D=new Set;for(let P=0;P<u.length;P++){let S=u[P];if(S===null){if(E)continue;C&&(S=0)}D.add(S)}return{distinctCount:D.size}}},80254:(j,I,e)=>{"use strict";e.d(I,{Ac:()=>i.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>m.H,IG:()=>i.IG,JP:()=>l._9,J_:()=>g.J_,Jz:()=>a.Jz,Kx:()=>r.Kx,Ls:()=>i.Ls,Ok:()=>a.Ok,Op:()=>a.Op,TB:()=>r.TB,U8:()=>i.U8,UO:()=>a.UO,Wk:()=>n.W,YR:()=>s.Y,Ys:()=>o.Ys,Ze:()=>d.Z,Zi:()=>a.Zi,b9:()=>i.b9,cO:()=>a.cO,gY:()=>a.gY,gz:()=>r.gz,kl:()=>a.kl,lP:()=>l.lP,mB:()=>a.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>a.py,qr:()=>a.qr,sq:()=>i.sq,uP:()=>r.uP,wL:()=>a.wL,wf:()=>d.w,zM:()=>a.zM});var t=e(19221),n=e(14544),i=e(76178),s=e(44885),r=e(66656),m=e(83667),d=e(52273),o=e(1141),l=e(48962),a=e(35596),g=e(95381)},76178:(j,I,e)=>{"use strict";e.d(I,{Ac:()=>f,IG:()=>E,Ls:()=>h,U8:()=>b,b9:()=>y,sq:()=>v});var t=e(25359),n=e(7303),i=e(84297),s=e(1141),r=e(69759),m=e(53557),d=e(46079),o=e(18257),l=e(16909),a=e(38975),g=e(25922),c=e(64397);const h=new t.B(()=>[...(0,r.Ty)(),...(0,n.N)(),...(0,s.Lk)(),...(0,d.z)(),i.b]),f=new t.B(()=>[...(0,r.fX)(),...(0,s.cC)(),...(0,m.n)()]),b=new t.B(()=>[...(0,l.a)(),...(0,a.H)(),...(0,o.T)(),...(0,g.G)(),...(0,c.G)()]);function v(C){const u=h.get(C.id);if(!u)throw new Error("Unknown field matcher: "+C.id);return u.get(C.options)}function y(C){const u=f.get(C.id);if(!u)throw new Error("Unknown frame matcher: "+C.id);return u.get(C.options)}function E(C){const u=b.get(C.id);if(!u)throw new Error("Unknown value matcher: "+C.id);return u.get(C.options)}},1141:(j,I,e)=>{"use strict";e.d(I,{Lk:()=>f,Ys:()=>r,cC:()=>b});var t=e(75578),n=e(95676),i=e(29241),s=e(19221),r=(v=>(v.exclude="exclude",v.include="include",v))(r||{});const m={id:s.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:v=>{const E=o(new Set([v]));return(C,u,D)=>v===C.name||v===(0,t.CZ)(C,u,D)||!!(E&&E(C,u,D))},getOptionsDisplayText:v=>`Field name: ${v}`},d={id:s.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:v=>{const{names:y,mode:E="include"}=v,C=new Set(y??[]),u=o(C),D=(P,S,x)=>C.has(P.name)||C.has((0,t.CZ)(P,S,x))||!!(u&&u(P,S,x));return E==="exclude"?(P,S,x)=>!D(P,S,x):D},getOptionsDisplayText:v=>{const{names:y,mode:E}=v,C=(y??[]).join(", ");return E==="exclude"?`All except: ${C}`:`All of: ${C}`}};function o(v){let y;return window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(v.has(i.M5)?y=(C,u)=>!!C.labels&&C.labels?.__name__===C.name:(v.has("Time")||v.has("time"))&&(y=(C,u)=>u.meta?.typeVersion==null&&C.type===i.fS.time)),y}const l={id:s.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:v=>{const y=c(v);return(E,C,u)=>{const D=(0,t.CZ)(E,C,u);return!!y&&y.test(D)}},getOptionsDisplayText:v=>`Field name by pattern: ${v}`},a={id:s.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:v=>(y,E,C)=>E.refId===v,getOptionsDisplayText:v=>`Math all fields returned by query with reference ID: ${v}`},g={id:s.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:v=>{const y=l.get(v?.pattern||""),E=d.get({mode:"include",names:v?.names??[]});return(C,u,D)=>E(C,u,D)||y(C,u,D)},getOptionsDisplayText:v=>{const y=v?.pattern??"",E=v?.names?.join(",")??"";return`Field name by pattern: ${y} or names: ${E}`}},c=v=>{if(v)try{return(0,n.jO)(v)}catch(y){console.error(y);return}},h={id:s.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:v=>{const y=(0,n.jO)(v);return E=>y.test(E.name||"")},getOptionsDisplayText:v=>`Frame name: ${v}`};function f(){return[m,l,d,g,a]}function b(){return[h]}},69759:(j,I,e)=>{"use strict";e.d(I,{Qw:()=>h,Ty:()=>C,fX:()=>u,m3:()=>a});var t=e(29241),n=e(76178),i=e(19221);const s={id:i.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const P=D.map(S=>(0,n.sq)(S));return(S,x,M)=>{for(const R of P)if(R(S,x,M))return!0;return!1}},getOptionsDisplayText:D=>{let P="";for(const S of D){P.length>0&&(P+=" OR ");const x=n.Ls.get(S.id);P+=x.getOptionsDisplayText?x.getOptionsDisplayText(S):x.name}return P}},r={id:i.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const P=D.map(S=>(0,n.b9)(S));return S=>{for(const x of P)if(x(S))return!0;return!1}},getOptionsDisplayText:D=>{let P="";for(const S of D){P.length>0&&(P+=" OR ");const x=n.Ac.get(S.id);P+=x.getOptionsDisplayText?x.getOptionsDisplayText(S):x.name}return P}},m={id:i.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const P=D.map(S=>(0,n.sq)(S));return(S,x,M)=>{for(const R of P)if(!R(S,x,M))return!1;return!0}},getOptionsDisplayText:D=>{let P="";for(const S of D){P.length>0&&(P+=" AND ");const x=n.Ls.get(S.id);P+=x.getOptionsDisplayText?x.getOptionsDisplayText(S):x.name}return P}},d={id:i.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const P=D.map(S=>(0,n.b9)(S));return S=>{for(const x of P)if(!x(S))return!1;return!0}},getOptionsDisplayText:D=>{let P="";for(const S of D){P.length>0&&(P+=" AND ");const x=n.Ac.get(S.id);P+=x.getOptionsDisplayText?x.getOptionsDisplayText(S):x.name}return P}},o={id:i.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:D=>{const P=(0,n.sq)(D);return(S,x,M)=>!P(S,x,M)},getOptionsDisplayText:D=>{const P=n.Ls.get(D.id);return"NOT "+(P.getOptionsDisplayText?P.getOptionsDisplayText(D.options):P.name)}},l={id:i.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:D=>{const P=(0,n.b9)(D);return S=>!P(S)},getOptionsDisplayText:D=>{const P=n.Ac.get(D.id);return"NOT "+(P.getOptionsDisplayText?P.getOptionsDisplayText(D.options):P.name)}},a=D=>!0,g=D=>!0,c=D=>!1,h=D=>D.type!==t.fS.time,f=D=>!1,b={id:i.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:D=>a,getOptionsDisplayText:D=>"Always"},v={id:i.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:D=>g,getOptionsDisplayText:D=>"Always"},y={id:i.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:D=>c,getOptionsDisplayText:D=>"Never"},E={id:i.Ff.neverMatch,name:"No Frames",description:"Never Match",get:D=>f,getOptionsDisplayText:D=>"Never"};function C(){return[s,m,o,b,y]}function u(){return[r,d,l,v,E]}},52273:(j,I,e)=>{"use strict";e.d(I,{Z:()=>i,w:()=>n});var t=e(25359),n=(s=>(s.Combine="combine",s.CalculateNewFields="calculateNewFields",s.CreateNewVisualization="createNewVisualization",s.Filter="filter",s.PerformSpatialOperations="performSpatialOperations",s.Reformat="reformat",s.ReorderAndRename="reorderAndRename",s))(n||{});const i=new t.B},83667:(j,I,e)=>{"use strict";e.d(I,{H:()=>l});var t=e(45383),n=e(22479),i=e(39343),s=e(76178),r=e(52273);const m=(g,c)=>h=>{const f=r.Z.get(g.id);if(!f)return h;const v={...f.transformation.defaultOptions??{},...g.options},y=g.filter?.options?(0,s.b9)(g.filter):void 0;return h.pipe((0,n.z)(E=>(0,t.of)(d(E,y)).pipe(f.transformation.operator(v,c),o(E,f,y))))};function d(g,c){return c?g.filter(h=>c(h)):g}const o=(g,c,h)=>f=>f.pipe((0,i.U)(b=>{if(b===g)return b;for(const v of b)v.meta||(v.meta={}),v.meta.transformations?v.meta.transformations=[...v.meta.transformations,c.id]:v.meta.transformations=[c.id];if(h){let v=0;const y=g.filter((E,C)=>{const u=!h(E);return u&&!v&&(v=C),u});y.length&&b.splice(v,0,...y)}return b}));function l(g,c,h){const f=(0,t.of)(c);if(!g.length)return f;const b=[],v=h??{interpolate:y=>y};for(let y=0;y<g.length;y++){const E=g[y];if(a(E))b.push(E(v));else{if(E.disabled)continue;b.push(m(E,v))}}return f.pipe.apply(f,b)}function a(g){return typeof g=="function"}},44885:(j,I,e)=>{"use strict";e.d(I,{Y:()=>we});var t=e(18441),n=e(2791),i=e(95381),s=e(64454),r=e(82039),m=e(95312),d=e(19221),o=e(14544);const l={id:o.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(_e,Je)=>Ue=>{const $e={};return _e.include&&($e.include={id:d.E4.byRefId,options:_e.include}),_e.exclude&&($e.exclude={id:d.E4.byRefId,options:_e.exclude}),Ue.pipe(r.u.operator($e,Je))}};var a=e(20371),g=e(24588),c=e.n(g),h=e(39343),f=e(31317),b=e(80369),v=e(29241);const y={id:o.W.formatTime,name:"Format Time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},operator:_e=>Je=>Je.pipe((0,h.U)(Ue=>{const $e=E(_e.timeField,_e.outputFormat,_e.useTimezone);return!Array.isArray(Ue)||Ue.length===0?Ue:Ue.map(Qe=>({...Qe,fields:$e(Qe.fields)}))}))},E=(_e,Je,Ue)=>$e=>{const Qe=(0,f.Z)();return $e.map(tt=>{if(tt.name===_e){const lt=tt.values.map(Me=>{const De=c()(Me);if(Ue){const We=(0,b.Pr)(Qe,Me),qe=We!==void 0?We.ianaName:"UTC";return De.tz(qe).format(Je)}else return De.format(Je)});return{...tt,type:v.fS.string,values:lt}}return tt})};var C=e(11770),u=e(75578),D=e(49721),P=e(76178);const S="Time",x="Time",M="Value",R=D.U.Empty,O=window?.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,T={id:o.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:S,rowField:x,valueField:M},operator:_e=>Je=>Je.pipe((0,h.U)(Ue=>{const $e=_e.columnField||S,Qe=_e.rowField||x,tt=_e.valueField||M,lt=_e.emptyValue||R;if(Ue.length!==1)return Ue;const Me=Ue[0],De=L(Me,$e),We=L(Me,Qe),qe=L(Me,tt),st=`${Qe}\\${$e}`;if(!De||!We||!qe)return Ue;const dt=U(De.values),Tt=U(We.values),Nt={};for(let yt=0;yt<qe.values.length;yt++){const ft=De.values[yt],ct=We.values[yt],ge=qe.values[yt];Nt[ft]||(Nt[ft]={}),Nt[ft][ct]=ge}const Bt=[{name:st,values:Tt,type:v.fS.string,config:{}}];for(const yt of dt){let ft=[];for(const ct of Tt){const ge=Nt[yt][ct]??V(lt);ft.push(ge)}O&&typeof yt=="number"&&(qe.config={...qe.config,displayNameFromDS:void 0}),Bt.push({name:yt.toString(),values:ft,config:qe.config,type:qe.type})}return[{fields:Bt,length:Tt.length}]}))};function U(_e){const Je=new Set;for(let Ue=0;Ue<_e.length;Ue++)Je.add(_e[Ue]);return Array.from(Je)}function L(_e,Je){for(let Ue=0;Ue<_e.fields.length;Ue++){const $e=_e.fields[Ue];let Qe;if(O?Qe=P.Ls.get(d.mi.byName).get(Je)($e,_e,[_e]):Qe=Je===(0,u.CZ)($e),Qe)return $e}return null}function V(_e){switch(_e){case D.U.False:return!1;case D.U.True:return!0;case D.U.Null:return null;case D.U.Empty:default:return""}}var w=e(35596),K=e(69811),B=e(23830);const W=10,_={id:o.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:W},operator:_e=>Je=>Je.pipe((0,h.U)(Ue=>{const $e=_e.limitField||W;return Ue.map(Qe=>Qe.length>$e?{...Qe,fields:Qe.fields.map(tt=>({...tt,values:tt.values.slice(0,$e)})),length:$e}:Qe)}))};var k=e(99581),A=e(31323),z=e(6788);const H={id:o.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:_e=>Je=>Je.pipe((0,h.U)(Ue=>{const $e=Q(_e.renameByName);return!Array.isArray(Ue)||Ue.length===0?Ue:Ue.map(Qe=>({...Qe,fields:$e(Qe)}))}))},Q=_e=>Je=>!_e||Object.keys(_e).length===0?Je.fields:Je.fields.map(Ue=>{const $e=(0,u.CZ)(Ue,Je),Qe=_e[$e];return typeof Qe!="string"||Qe.length===0?Ue:{...Ue,config:{...Ue.config,displayName:Qe},state:{...Ue.state,displayName:Qe}}}),X={id:o.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(_e,Je)=>Ue=>Ue.pipe(m.w.operator({exclude:{names:te(_e.excludeByName)}},Je),z.t.operator(_e,Je),H.operator(_e,Je))},te=_e=>_e?Object.keys(_e).filter(Je=>_e[Je]):[];var oe=e(85722),Z=e(95676);const le={id:o.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:_e=>Je=>Je.pipe((0,h.U)(Ue=>!Array.isArray(Ue)||Ue.length===0?Ue:Ue.map(ce(_e))))},ce=_e=>Je=>{const Ue=(0,Z.jO)(_e.regex),$e=Je.fields.map(Qe=>{const tt=(0,u.CZ)(Qe,Je);if(!Ue.test(tt))return Qe;const lt=tt.replace(Ue,_e.renamePattern);return{...Qe,config:{...Qe.config,displayName:lt},state:{...Qe.state,displayName:lt}}});return{...Je,fields:$e}};var q=e(89949),ne=e(72164),pe=e(32053),re=e(59425);const ie={id:o.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:_e=>Je=>Je.pipe((0,h.U)(Ue=>{if(!Array.isArray(Ue)||Ue.length<=1||(Ue=Ue.filter(Me=>Me.length>0),!(0,re.xI)(Ue)))return Ue;const $e={},Qe=new Set,tt=new ne.v,lt={name:v.rN,values:[],config:{},type:v.fS.string};for(let Me=0;Me<Ue.length;Me++){const De=Ue[Me];for(let We=0;We<De.fields.length;We++){const qe=De.fields[We];if(qe.type===v.fS.time){$e[Me]=We,Qe.has(v.Ls)||(tt.addField(Se(qe,v.Ls)),tt.addField(lt),Qe.add(v.Ls));continue}Qe.has(v.M5)||(tt.addField(Se(qe,v.M5)),Qe.add(v.M5))}}for(let Me=0;Me<Ue.length;Me++){const De=Ue[Me];for(let We=0;We<De.length;We++){const qe=$e[Me],st=qe===0?1:0;tt.add({[v.Ls]:De.fields[qe].values[We],[v.rN]:(0,u.nf)(De),[v.M5]:De.fields[st].values[We]})}}return[(0,pe.aK)(tt,0,!0)]}))},Se=(_e,Je)=>({...(0,q.omit)(_e,["values","state","labels","config","name"]),name:Je,values:[],config:{...(0,q.omit)(_e.config,["displayName","displayNameFromDS"])}}),ye={id:o.W.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:_e=>Je=>Je.pipe((0,h.U)(Ue=>!Array.isArray(Ue)||Ue.length===0||!_e?.sort?.length?Ue:Ce(Ue,_e.sort)))};function Ce(_e,Je){return _e.map(Ue=>{const $e=de(Ue,Je);return $e.length&&$e[0].index!=null?(0,pe.aK)(Ue,$e[0].index,$e[0].desc):Ue})}function de(_e,Je){return Je.map(Ue=>Ue.index!=null?Ue:{...Ue,index:_e.fields.findIndex($e=>Ue.field===(0,u.CZ)($e,_e))})}const we={noopTransformer:A.d,filterFieldsTransformer:r.P,filterFieldsByNameTransformer:m.w,filterFramesTransformer:r.u,filterFramesByRefIdTransformer:l,filterByValueTransformer:a.JA,formatTimeTransformer:y,orderFieldsTransformer:z.t,organizeFieldsTransformer:X,reduceTransformer:oe.mf,concatenateTransformer:n.aE,calculateFieldTransformer:t.U,joinByFieldTransformer:K.M,seriesToColumnsTransformer:K.M,seriesToRowsTransformer:ie,renameFieldsTransformer:H,labelsToFieldsTransformer:B.r,ensureColumnsTransformer:s.W,groupByTransformer:C.i,sortByTransformer:ye,mergeTransformer:k.R,renameByRegexTransformer:le,histogramTransformer:w.Op,convertFieldTypeTransformer:i.mg,groupingToMatrixTransformer:T,limitTransformer:_}},18441:(j,I,e)=>{"use strict";e.d(I,{U:()=>E,h:()=>P,ie:()=>b});var t=e(89949),n=e.n(t),i=e(39343),s=e(32053),r=e(75578),m=e(29241),d=e(53933),o=e(32338),l=e(66656),a=e(76178),g=e(19221),c=e(64454),h=e(14544),f=e(31323),b=(S=>(S.ReduceRow="reduceRow",S.BinaryOperation="binary",S.Index="index",S))(b||{});const v={reducer:l.gz.sum},y={left:"",operator:o.L.Add,right:""},E={id:h.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:l.gz.sum}},operator:(S,x)=>M=>{const R=S&&S.timeSeries!==!1?c.W.operator(null,x):f.d.operator({},x);return S.alias!=null&&(S.alias=x.interpolate(S.alias)),M.pipe(R,(0,i.U)(O=>{const T=S.mode??"reduceRow";let U;if(T==="reduceRow")U=C((0,t.defaults)(S.reduce,v),O);else if(T==="binary"){const L={...S.binary,left:x.interpolate(S.binary?.left),right:x.interpolate(S.binary?.right)};U=D((0,t.defaults)(L,y),O)}else if(T==="index")return O.map(L=>{const V={name:S.alias??"Row",type:m.fS.number,values:[...Array(L.length).keys()],config:{}};return{...L,fields:S.replaceFields?[V]:[...L.fields,V]}});return U?O.map(L=>{const V=U(L);if(!V)return L;const w={name:P(S),type:m.fS.number,config:{},values:V};let K=[];if(S.replaceFields){const{timeField:B}=(0,s.sV)(L);B&&S.timeSeries!==!1?K=[B,w]:K=[w]}else K=[...L.fields,w];return{...L,fields:K}}):O}))}};function C(S,x){let M=(0,a.sq)({id:g.mi.numeric});S.include&&S.include.length&&(M=(0,a.sq)({id:g.mi.byNames,options:{names:S.include}}));const R=l.TB.get(S.reducer);if(!R)throw new Error(`Unknown reducer: ${S.reducer}`);const O=R.reduce??l.uP,T=S.nullValueMode===d.Gl.Ignore,U=S.nullValueMode===d.Gl.AsZero;return L=>{const V=[];for(const W of L.fields)M(W,L,x)&&V.push(W.values);const w=V.length,K={name:"temp",values:new Array(w),type:m.fS.number,config:{}},B=[];for(let W=0;W<L.length;W++){for(let _=0;_<w;_++)K.values[_]=V[_][W];B.push(O(K,T,U)[S.reducer])}return B}}function u(S,x,M){if(!x)return;for(const O of S.fields)if(x===(0,r.CZ)(O,S,M))return O.type===m.fS.boolean?O.values.map(T=>T?1:0):O.values;const R=parseFloat(x);if(!isNaN(R))return new Array(S.length).fill(R)}function D(S,x){const M=o.n.getIfExists(S.operator);return R=>{const O=u(R,S.left,x),T=u(R,S.right,x);if(!O||!T||!M)return;const U=new Array(O.length);for(let L=0;L<U.length;L++)U[L]=M.operation(O[L],T[L]);return U}}function P(S){if(S.alias?.length)return S.alias;switch(S.mode){case"binary":{const{binary:x}=S;return`${x?.left??""} ${x?.operator??""} ${x?.right??""}`}case"reduceRow":{const x=l.TB.getIfExists(S.reduce?.reducer);if(x)return x.name}break;case"index":return"Row"}return"math"}},2791:(j,I,e)=>{"use strict";e.d(I,{HO:()=>s,aE:()=>r});var t=e(39343),n=e(29241),i=e(14544),s=(d=>(d.Drop="drop",d.FieldName="field",d.Label="label",d))(s||{});const r={id:i.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:d=>o=>o.pipe((0,t.U)(l=>!Array.isArray(l)||l.length<2?l:[m(l,d)]))};function m(d,o){let l=!0,a=d[0].length;const g=o.frameNameLabel??"frame";let c=[];for(const h of d){a!==h.length&&(l=!1,a=Math.max(a,h.length));for(const f of h.fields){const b={...f};b.state=void 0,h.name&&(o.frameNameMode==="drop"||(o.frameNameMode==="label"?(b.labels={...f.labels},b.labels[g]=h.name):!b.name||b.name===n.M5?b.name=h.name:b.name=`${h.name} \xB7 ${f.name}`)),c.push(b)}}return l||(c=c.map(h=>{if(h.values.length===a)return h;const f=h.values;return f.length=a,{...h,values:f}})),{fields:c,length:a}}},95381:(j,I,e)=>{"use strict";e.d(I,{J_:()=>v,mg:()=>d,p8:()=>l});var t=e(39343),n=e(58018),i=e(29241),s=e(76178),r=e(19221),m=e(14544);const d={id:m.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(E,C)=>u=>u.pipe((0,t.U)(D=>d.transformer(E,C)(D))),transformer:E=>C=>!Array.isArray(C)||C.length===0?C:o(E,C)??[]};function o(E,C){if(!E.conversions.length)return C;const u=C.map(D=>({...D}));for(const D of E.conversions){if(!D.targetField)continue;const P=s.Ls.get(r.mi.byName).get(D.targetField);for(const S of u)S.fields=S.fields.map(x=>P(x,S,u)?l(x,D):x)}return u}function l(E,C){switch(C.destinationType){case i.fS.time:return v(E,C.dateFormat);case i.fS.number:return c(E);case i.fS.string:return f(E,C.dateFormat);case i.fS.boolean:return h(E);case i.fS.enum:return y(E,C.enumConfig);case i.fS.other:return b(E);default:return E}}const a=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function g(E,C){let u=C?{format:C}:void 0;const D=E.values.slice();let P=D.find(x=>x!=null),S=typeof P=="string"&&a.test(P);for(let x=0;x<D.length;x++)if(D[x]){let M=S?Date.parse(D[x]):(0,n.J)(D[x],u).valueOf();D[x]=Number.isFinite(M)?M:null}else D[x]=null;return{...E,type:i.fS.time,values:D}}function c(E){const C=E.values.slice(),u=C.some(D=>typeof D=="string");for(let D=0;D<C.length;D++){let P=C[D];u&&P!=null&&typeof P=="string"&&(P=P.replace(/,/g,""));const S=+P;C[D]=Number.isFinite(S)?S:null}return{...E,type:i.fS.number,values:C}}function h(E){const C=E.values.slice();for(let u=0;u<C.length;u++)C[u]=!!C[u];return{...E,type:i.fS.boolean,values:C}}function f(E,C){let u=E.values;switch(E.type){case i.fS.time:u=u.map(D=>(0,n.J)(D).format(C));break;case i.fS.other:u=u.map(D=>JSON.stringify(D));break;default:u=u.map(D=>`${D}`)}return{...E,type:i.fS.string,values:u}}function b(E){const C=E.values.slice();for(let u=0;u<C.length;u++)try{C[u]=JSON.parse(C[u])}catch{C[u]=null}return{...E,type:i.fS.other,values:C}}function v(E,C){const u=typeof E.values[0]=="number";return E.type===i.fS.time&&u?E:u?{...E,type:i.fS.time}:g(E,C)}function y(E,C){const u={...C},D=E.values.slice(),P=new Map;if(u.text)for(let S=0;S<u.text.length;S++)P.set(u.text[S],S);else u.text=[];for(let S=0;S<D.length;S++){const x=D[S];P.has(x)||(u.text[P.size]=x,P.set(x,P.size)),D[S]=P.get(x)}return{...E,config:{...E.config,type:{enum:u}},type:i.fS.enum,values:D}}},64454:(j,I,e)=>{"use strict";e.d(I,{W:()=>r});var t=e(39343),n=e(32053),i=e(14544),s=e(69811);const r={id:i.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(d,o)=>l=>l.pipe((0,t.U)(a=>r.transformer(d,o)(a))),transformer:(d,o)=>l=>{const a=m(l);return l.length>1&&a?s.M.transformer({byField:a},o)(l):l}};function m(d){let o;for(const l of d){const{timeField:a}=(0,n.sV)(l);if(!a)return;if(!o)o=a.name;else if(o!==a.name)return}return o}},82039:(j,I,e)=>{"use strict";e.d(I,{P:()=>r,u:()=>m});var t=e(39343),n=e(76178),i=e(14544),s=e(31323);const r={id:i.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(d,o)=>l=>!d.include&&!d.exclude?l.pipe(s.d.operator({},o)):(typeof d.include?.options=="string"?d.include.options=o.interpolate(d.include?.options):typeof d.include?.options?.pattern=="string"&&(d.include.options.pattern=o.interpolate(d.include?.options.pattern)),typeof d.exclude?.options=="string"?d.exclude.options=o.interpolate(d.exclude?.options):typeof d.exclude?.options?.pattern=="string"&&(d.exclude.options.pattern=o.interpolate(d.exclude?.options.pattern)),l.pipe((0,t.U)(a=>{const g=d.include?(0,n.sq)(d.include):null,c=d.exclude?(0,n.sq)(d.exclude):null,h=[];for(const f of a){const b=[];for(let y=0;y<f.fields.length;y++){const E=f.fields[y];if(c){if(c(E,f,a))continue;g||b.push(E)}g&&g(E,f,a)&&b.push(E)}if(!b.length)continue;const v={...f,fields:b};h.push(v)}return h})))},m={id:i.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(d,o)=>l=>!d.include&&!d.exclude?l.pipe(s.d.operator({},o)):l.pipe((0,t.U)(a=>{const g=d.include?(0,n.b9)(d.include):null,c=d.exclude?(0,n.b9)(d.exclude):null,h=[];for(const f of a){if(c){if(c(f))continue;g||h.push(f)}g&&g(f)&&h.push(f)}return h}))}},95312:(j,I,e)=>{"use strict";e.d(I,{f:()=>r,w:()=>s});var t=e(19221),n=e(82039),i=e(14544);const s={id:i.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(m,d)=>o=>o.pipe(n.P.operator({include:r(m.include),exclude:r(m.exclude)},d))},r=m=>{if(!m)return;const{names:d,pattern:o}=m;if(!((!Array.isArray(d)||d.length===0)&&!o))return o?!Array.isArray(d)||d.length===0?{id:t.mi.byRegexp,options:o}:{id:t.mi.byRegexpOrNames,options:m}:{id:t.mi.byNames,options:{names:d}}}},20371:(j,I,e)=>{"use strict";e.d(I,{ER:()=>d,JA:()=>o,PQ:()=>m});var t=e(39343),n=e(75578),i=e(76178),s=e(14544),r=e(31323),m=(g=>(g.exclude="exclude",g.include="include",g))(m||{}),d=(g=>(g.all="all",g.any="any",g))(d||{});const o={id:s.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(g,c)=>h=>{const f=g.filters,b=g.match==="all",v=g.type==="include";return!Array.isArray(f)||f.length===0?h.pipe(r.d.operator({},c)):h.pipe((0,t.U)(y=>{if(!Array.isArray(y)||y.length===0)return y;const E=new Set;for(const D of y){const P=a(D,y),S=l(f,P);for(let x=0;x<D.length;x++){if(E.has(x))continue;let M=!0;for(const R of S){const O=R(x,D,y);if(!b&&O){M=!0;break}if(b&&!O){M=!1;break}M=O}M&&E.add(x)}}const C=[],u=v?E.size:y[0].length-E.size;for(const D of y){const P=[];for(const S of D.fields){const x=[];for(let M=0;M<D.length;M++){if(v&&E.has(M)){x.push(S.values[M]);continue}if(!v&&!E.has(M)){x.push(S.values[M]);continue}}P.push({...S,values:x,state:{}})}C.push({...D,fields:P,length:u})}return C}))}},l=(g,c)=>{const h=()=>!1;return g.map(f=>{const b=c[f.fieldName]??-1;if(b<0)return console.warn(`[FilterByValue] Could not find index for field name: ${f.fieldName}`),h;const v=(0,i.IG)(f.config);return(y,E,C)=>v(y,E.fields[b],E,C)})},a=(g,c)=>g.fields.reduce((h,f,b)=>{const v=(0,n.CZ)(f,g,c);return h[v]=b,h},{})},11770:(j,I,e)=>{"use strict";e.d(I,{i:()=>o,x:()=>d});var t=e(39343),n=e(32053),i=e(75578),s=e(29241),r=e(66656),m=e(14544),d=(c=>(c.aggregate="aggregate",c.groupBy="groupby",c))(d||{});const o={id:m.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},operator:c=>h=>h.pipe((0,t.U)(f=>{if(!Object.keys(c.fields).find(y=>c.fields[y].operation==="groupby"))return f;const v=[];for(const y of f){const E=[];for(const D of y.fields)l(D,c)&&E.push(D);if(E.length===0)continue;const C=new Map;for(let D=0;D<y.length;D++){const P=String(E.map(x=>x.values[D])),S=C.get(P)??{};C.has(P)||C.set(P,S);for(let x of y.fields){const M=(0,i.CZ)(x);S[M]||(S[M]={name:M,type:x.type,config:{...x.config},values:[]}),S[M].values.push(x.values[D])}}const u=[];for(const D of E){const P=[],S=(0,i.CZ)(D);C.forEach(x=>{P.push(x[S].values[0])}),u.push({name:D.name,type:D.type,config:{...D.config},values:P})}for(const D of y.fields){if(!a(D,c))continue;const P=(0,i.CZ)(D),S=c.fields[P].aggregations,x={};C.forEach(M=>{const R=M[P],O=(0,r.Kx)({field:R,reducers:S});for(const T of S)Array.isArray(x[T])||(x[T]=[]),x[T].push(O[T])});for(const M of S){const R={name:`${P} (${M})`,values:x[M],type:s.fS.other,config:{}};R.type=g(M,D,R),u.push(R)}}v.push({fields:u,length:C.size})}return v}))},l=(c,h)=>{const f=(0,i.CZ)(c);return h?.fields[f]?.operation==="groupby"},a=(c,h)=>{const f=(0,i.CZ)(c);return h?.fields[f]?.operation==="aggregate"&&Array.isArray(h?.fields[f].aggregations)&&h?.fields[f].aggregations.length>0},g=(c,h,f)=>{switch(c){case r.gz.allIsNull:return s.fS.boolean;case r.gz.last:case r.gz.lastNotNull:case r.gz.first:case r.gz.firstNotNull:return h.type;default:return(0,n.fu)(f)??s.fS.string}}},35596:(j,I,e)=>{"use strict";e.d(I,{Jz:()=>D,Ok:()=>b,Op:()=>h,UO:()=>P,Zi:()=>l,cO:()=>v,gY:()=>u,kl:()=>y,mB:()=>S,py:()=>c,qr:()=>E,wL:()=>f,zM:()=>M});var t=e(39343),n=e(61965),i=e(45540),s=e(43987),r=e(29241),m=e(27107),d=e(14544),o=e(48962);const l=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],a=[null],g=(R,O)=>R-O,c={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},h={id:d.W.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(R,O)=>T=>T.pipe((0,t.U)(U=>h.transformer(R,O)(U))),transformer:R=>O=>{if(!Array.isArray(O)||O.length===0)return O;const T=u(O,R);return T==null?[]:[M(T)]}},f="xMin";function b(R){return R===f||R==="BucketMin"}const v="xMax";function y(R){return R===v||R==="BucketMax"}function E(R){let O,T;const U=[];for(const L of R.fields)b(L.name)?O=L:y(L.name)?T=L:L.type===r.fS.number&&U.push(L);if(!T&&O&&O.values.length>1){let L=O.values,V=(0,m.O)(L[1]-L[0],6);T={...O,name:v,values:L.map(w=>w+V)}}if(!O&&T&&T?.values.length>1){let L=T.values,V=(0,m.O)(L[1]-L[0],6);O={...T,name:f,values:L.map(w=>w-V)}}if(O&&T&&U.length)return{xMin:O,xMax:T,counts:U}}const C=20;function u(R,O){let T=O?.bucketSize,U=O?.bucketOffset??0;if(!T||T<0){let A=[];for(const oe of R)for(const Z of oe.fields)Z.type===r.fS.number&&(A=A.concat(Z.values));A=A.filter(oe=>oe!=null),A.sort((oe,Z)=>oe-Z);let z=1/0;if(A.length===1)z=1;else for(let oe=1;oe<A.length;oe++){let Z=A[oe]-A[oe-1];Z!==0&&(z=Math.min(z,Z))}let H=A[0];const te=(A[A.length-1]-H)/C;for(let oe=0;oe<l.length;oe++){let Z=l[oe];if(te<Z&&Z>=z){T=Z;break}}}const L=A=>S(A-U,T)+U;let V=((""+T).match(/\.\d+$/)??["."])[0].length-1,w=[],K=[],B;for(const A of R)for(const z of A.fields)if(z.type===r.fS.number){let H=x(z.values,L,a,g);w.push(H),K.push({...z,config:{...z.config,unit:z.config.unit==="short"?"short":void 0}}),!B&&z.config.unit&&(B=z.config)}if(!K.length)return null;let W=(0,o.v_)(w);for(let A=1;A<W.length;A++){let z=W[A];for(let H=0;H<z.length;H++)z[H]==null&&(z[H]=0)}const _={name:f,values:W[0],type:r.fS.number,state:void 0,config:V===0?B??{}:{...B,decimals:V}},k={..._,name:v,values:W[0].map(A=>A+T)};if(O?.combine){const A=new Array(W[0].length).fill(0);for(let z=1;z<W.length;z++)for(let H=0;H<A.length;H++)A[H]+=W[z][H];K=[{...K[0],name:"count",values:A,type:r.fS.number,state:void 0}]}else K.forEach((A,z)=>{A.values=W[z+1]});return{xMin:_,xMax:k,counts:K}}function D(R,O){return Math.round(R/O)*O}function P(R,O){return Math.ceil(R/O)*O}function S(R,O){return Math.floor(R/O)*O}function x(R,O,T,U){let L=new Map;for(let B=0;B<R.length;B++){let W=R[B];W!=null&&(W=O(W));let _=L.get(W);_?_.count++:L.set(W,{value:W,count:1})}T&&T.forEach(B=>L.delete(B));let V=[...L.values()];U&&V.sort((B,W)=>U(B.value,W.value));let w=Array(V.length),K=Array(V.length);for(let B=0;B<V.length;B++)w[B]=V[B].value,K[B]=V[B].count;return[w,K]}function M(R,O){if(!R.xMin.display){const T=(0,n.U)({field:R.xMin,theme:O??(0,i.j)()});R.xMin.display=T,R.xMax.display=T}return R.counts[0].display=(0,n.U)({field:R.counts[0],theme:O??(0,i.j)()}),{length:R.xMin.values.length,meta:{type:s.P.Histogram},fields:[R.xMin,R.xMax,...R.counts]}}},69811:(j,I,e)=>{"use strict";e.d(I,{M:()=>d,c:()=>m});var t=e(39343),n=e(76178),i=e(19221),s=e(14544),r=e(48962),m=(o=>(o.outer="outer",o.inner="inner",o.outerTabular="outerTabular",o))(m||{});const d={id:s.W.joinByField,aliasIds:[s.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(o,l)=>a=>a.pipe((0,t.U)(g=>d.transformer(o,l)(g))),transformer:o=>{let l;return a=>{if(a.length>1){o.byField&&!l&&(l=n.Ls.get(i.mi.byName).get(o.byField));const g=(0,r._9)({frames:a,joinBy:l,mode:o.mode});if(g)return[g]}return a}}}},48962:(j,I,e)=>{"use strict";e.d(I,{Y3:()=>l,_9:()=>a,lP:()=>y,v_:()=>v});var t=e(12008),n=e(32053),i=e(29241),s=e(76178),r=e(19221),m=e(69811);function d(E){const{timeField:C}=(0,n.sV)(E[0]);if(C)return s.Ls.get(r.mi.firstTimeField).get({});let u=[];for(const D of E[0].fields)D.type===i.fS.number&&u.push(D.name);for(let D=1;D<E.length;D++){const P=[];for(const S of E[0].fields)S.type===i.fS.number&&P.push(S.name);u=u.filter(S=>!P.includes(S))}return s.Ls.get(r.mi.byName).get(u[0])}function o(E){return E.joinBy??d(E.frames)}function l(E,C){if(C>=0){let u=E.fields[C];u.type!==i.fS.string&&!y(u.values)&&(E=(0,n.aK)(E,C))}return E}function a(E){if(!E.frames?.length)return;if(E.frames.length===1){let R=E.frames[0],O=R;const T=o(E);let U=O.fields.findIndex(L=>T(L,O,E.frames));if(E.keepOriginIndices&&(O={...R,fields:R.fields.map((L,V)=>{const w={...L},K={frameIndex:0,fieldIndex:V};return w.state?w.state.origin=K:w.state={origin:K},w})},U>0)){const L=O.fields[U],V=O.fields.filter((w,K)=>K!==U);V.unshift(L),O.fields=V,U=0}if(U>=0&&(O=l(O,U)),E.keep){let L=O.fields.filter((V,w)=>w===U||E.keep(V,O,E.frames));R!==O?O.fields=L:O={...R,fields:L}}return O}const C=[],u=[],D=[],P=[];let S=1;const x=o(E);for(let R=0;R<E.frames.length;R++){const O=E.frames[R];if(!O||!O.fields?.length)continue;const T=[c];let U,L=[],V=[];for(let K=0;K<O.fields.length;K++){const B=O.fields[K];if(B.state=B.state||{},!U&&x(B,O,E.frames))U=B;else{if(E.keep&&!E.keep(B,O,E.frames))continue;let W=B.config.custom?.spanNulls;T.push(W===!0?c:W===-1?h:f);let _=B.labels??{},k=B.name;O.name&&(B.name===i.M5?k=O.name:_={..._,name:O.name}),L.push({...B,name:k,labels:_})}E.keepOriginIndices&&(B.state.origin={frameIndex:R,fieldIndex:K})}if(!U)continue;D.length===0&&D.push(U),C.push(T);const w=[U.values];for(const K of L)w.push(K.values),D.push(K),delete K.state?.displayName,V.push(S),S++;P.push(V),u.push(w)}let M=[];return E.mode===m.c.outerTabular?M=g(u,P,D.length,C):M=v(u,C,E.mode),{length:M[0].length,fields:D.map((R,O)=>({...R,values:M[O]}))}}function g(E,C,u,D){let P={};for(let x=0;x<E.length;x++){let M=E[x],R=M[0];for(let O=0;O<E.length;O++){if(O===x)continue;let T=E[O],U=T[0];for(let L=0;L<R.length;L++){const V=R[L],w=u-1;let K=[V].concat(new Array(w)),B=0;for(let W=1;W<M.length;W++){const _=C[x][B];K[_]=M[W][L],B++}for(let W=0;W<U.length;W++)if(R[L]===U[W]){let _=0;for(let k=1;k<T.length;k++){const A=C[O][_];K[A]=T[k][W],_++}break}P[JSON.stringify(K)]=K}}}let S=[];for(let x=0;x<u;x++)S.push(new Array(0));for(let x in P){const M=P[x];for(let R=0;R<M.length;R++)S[R].push(M[R])}return S}const c=0,h=1,f=2;function b(E,C,u){for(let D=0,P,S=-1;D<C.length;D++){let x=C[D];if(x>S){for(P=x-1;P>=0&&E[P]==null;)E[P--]=null;for(P=x+1;P<u&&E[P]==null;)E[S=P++]=null}}}function v(E,C,u=m.c.outer){let D;if(u===m.c.inner)D=new Set((0,t.Z)(E.map(M=>M[0])));else{D=new Set;for(let M=0;M<E.length;M++){let O=E[M][0],T=O.length;for(let U=0;U<T;U++)D.add(O[U])}}let P=[Array.from(D).sort((M,R)=>M-R)],S=P[0].length,x=new Map;for(let M=0;M<S;M++)x.set(P[0][M],M);for(let M=0;M<E.length;M++){let R=E[M],O=R[0];for(let T=1;T<R.length;T++){let U=R[T],L=Array(S).fill(void 0),V=C?C[M][T]:h,w=[];for(let K=0;K<U.length;K++){let B=U[K],W=x.get(O[K]);B===null?V!==c&&(L[W]=B,V===f&&w.push(W)):L[W]=B}b(L,w,S),P.push(L)}}return P}function y(E,C=50){const u=E.length;if(u<=1)return!0;let D=0,P=u-1;for(;D<=P&&E[D]==null;)D++;for(;P>=D&&E[P]==null;)P--;if(P<=D)return!0;const S=Math.max(1,Math.floor((P-D+1)/C));for(let x=E[D],M=D+S;M<=P;M+=S){const R=E[M];if(R!=null){if(R<=x)return!1;x=R}}return!0}},23830:(j,I,e)=>{"use strict";e.d(I,{k:()=>r,r:()=>m});var t=e(39343),n=e(75578),i=e(29241),s=e(14544),r=(o=>(o.Columns="columns",o.Rows="rows",o))(r||{});const m={id:s.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(o,l)=>a=>a.pipe((0,t.U)(g=>m.transformer(o,l)(g))),transformer:o=>l=>{if(o.mode==="rows")return d(l,o.keepLabels);const a=[],g=o.keepLabels?.length?new Set(o.keepLabels):void 0;for(const c of l){const h=[],f={};for(const b of c.fields){if(!b.labels){h.push(b);continue}const v={...b,config:{...b.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};h.push(v);for(const y of Object.keys(b.labels)){if(g&&!g.has(y))continue;if(o.valueLabel===y){v.name=b.labels[y];continue}(f[y]??(f[y]=new Set)).add(b.labels[y])}}for(const b in f)for(const v of f[b]){const y=new Array(c.length).fill(v);h.push({name:b,type:i.fS.string,values:y,config:{}})}a.push({...c,fields:h,length:c.length})}return a}};function d(o,l){const a=[];for(const g of o)for(const c of g.fields)if(c.labels){const h=[],f=[];if(l)for(const b of l)h.push(b),f.push(c.labels[b]);else for(const[b,v]of Object.entries(c.labels))h.push(b),f.push(v);f.length&&a.push({...g,name:(0,n.CZ)(c,g,o),fields:[{name:"label",type:i.fS.string,config:{},values:h},{name:"value",type:i.fS.string,config:{},values:f}],length:f.length})}return a}},99581:(j,I,e)=>{"use strict";e.d(I,{R:()=>m});var t=e(89949),n=e.n(t),i=e(39343),s=e(72164),r=e(14544);const m={id:r.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:h=>f=>f.pipe((0,i.U)(b=>{if(!Array.isArray(b)||b.length<=1)return b;const v=b.filter(M=>M.fields.length>0);if(v.length===0)return[b[0]];const y=new Set,E={},C=[],u=new s.v;for(let M=0;M<v.length;M++){const R=v[M];for(let O=0;O<R.fields.length;O++){const T=R.fields[O];y.has(T.name)||(u.addField(d(T)),y.add(T.name)),E[T.name]=E[T.name]||{},E[T.name][M]=O,v.length-1===M&&g(E,T,v)&&C.push(T.name)}}if(C.length===0)return b;const D={},P=[],S=o(v,E,C),x=l(v,y,E);for(let M=0;M<v.length;M++){const R=v[M];for(let O=0;O<R.length;O++){const T=S(M,O),U=x(M,O);if(!Array.isArray(D[T])){D[T]=[U],P.push(c(T,D));continue}let L=!1;D[T]=D[T].map(V=>a(V,U)?(L=!0,{...V,...U}):V),L||(D[T].push(U),P.push(c(T,D)))}}for(const M of P){const R=D[M.key][M.index];R&&u.add(R)}return[u]}))},d=h=>({...(0,t.omit)(h,["values","state","labels","config"]),values:[],config:{...(0,t.omit)(h.config,"displayName")}}),o=(h,f,b)=>{const v=b.reduce((y,E)=>Object.keys(f[E]).reduce((C,u)=>(C[u]=C[u]||[],C[u].push(f[E][u]),C),y),{});return(y,E)=>v[y].reduce((C,u)=>C+h[y].fields[u].values[E],"")},l=(h,f,b)=>(v,y)=>{const E={},C=Array.from(f);for(const u of C){const D=b[u];if(!D)continue;const P=D[v];if(typeof P!="number")continue;const S=h[v];if(!S||!S.fields)continue;const x=S.fields[P];!x||!x.values||(E[u]=x.values[y])}return E},a=(h,f)=>{let b=!0;for(const v in f)if(!(typeof h[v]>"u")&&h[v]!==null&&h[v]!==f[v]){b=!1;break}return b},g=(h,f,b)=>Object.keys(h[f.name]).length===b.length,c=(h,f)=>({key:h,index:f[h].length-1})},31323:(j,I,e)=>{"use strict";e.d(I,{d:()=>n});var t=e(14544);const n={id:t.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:i=>s=>s,transformer:i=>s=>s}},6788:(j,I,e)=>{"use strict";e.d(I,{$:()=>d,t:()=>m});var t=e(89949),n=e.n(t),i=e(39343),s=e(75578),r=e(14544);const m={id:r.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:a=>g=>g.pipe((0,i.U)(c=>{const h=o(a.indexByName);return!Array.isArray(c)||c.length===0?c:c.map(f=>({...f,fields:h(f.fields,c,f)}))}))},d=a=>(g,c)=>l(g,a)-l(c,a),o=a=>(g,c,h)=>{if(!Array.isArray(g)||g.length===0||!a||Object.keys(a).length===0)return g;const f=d(a);return(0,t.clone)(g).sort((b,v)=>f((0,s.CZ)(b,h,c),(0,s.CZ)(v,h,c)))},l=(a,g)=>Number.isInteger(g[a])?g[a]:Number.MAX_SAFE_INTEGER},85722:(j,I,e)=>{"use strict";e.d(I,{AL:()=>l,mf:()=>a});var t=e(39343),n=e(32053),i=e(75578),s=e(29241),r=e(66656),m=e(76178),d=e(69759),o=e(14544),l=(b=>(b.SeriesToRows="seriesToRows",b.ReduceFields="reduceFields",b))(l||{});const a={id:o.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[r.gz.max]},operator:b=>v=>v.pipe((0,t.U)(y=>{if(!b?.reducers?.length)return y;const E=b.fields?(0,m.sq)(b.fields):b.includeTimeField&&b.mode==="reduceFields"?d.m3:d.Qw;if(b.mode==="reduceFields")return f(y,E,b.reducers);const C=g(y,E,b.reducers,b.labelsToFields);return C?[C]:[]}))};function g(b,v,y,E){const C=r.TB.list(y),u=C.map(S=>S.id),D=[],P=E?c(b):[];for(const S of b){const x=S.fields.filter(L=>v(L,S,b)),M=x.length,R=[],O=new Array(M);R.push({name:"Field",type:s.fS.string,values:O,config:{}});const T={};if(E)for(const L of P)T[L]=new Array(M),R.push({name:L,type:s.fS.string,values:T[L],config:{}});const U={};for(const L of C)U[L.id]=new Array(M),R.push({name:L.name,type:s.fS.other,values:U[L.id],config:{}});for(let L=0;L<x.length;L++){const V=x[L],w=(0,r.Kx)({field:V,reducers:u});if(E){if(O[L]=V.name,V.labels)for(const K of Object.keys(V.labels))T[K][L]=V.labels[K]}else O[L]=(0,i.CZ)(V,S,b);for(const K of C){const B=w[K.id];U[K.id][L]=B}}for(const L of R)if(L.type===s.fS.other){const V=(0,n.fu)(L);V&&(L.type=V)}D.push({...S,fields:R,length:M})}return h(D)}function c(b){const v=new Set;for(const y of b)for(const E of y.fields)if(E.labels)for(const C of Object.keys(E.labels))v.add(C);return[...v]}function h(b){if(!b?.length)return;const v=b[0];for(let y=1;y<b.length;y++){const E=b[y];for(let C=0;C<v.fields.length;C++){const u=v.fields[C];for(let D=0;D<E.fields.length;D++){const P=E.fields[D],S=C===0&&D===0,x=u.type===P.type&&u.name===P.name;if(S||x){const M=u.values,R=P.values;u.values=M.concat(R)}}}}return v.name=void 0,v.length=v.fields[0].values.length,v}function f(b,v,y){const C=r.TB.list(y).map(D=>D.id),u=[];for(const D of b){const P=[];for(const S of D.fields)if(v(S,D,b)){const x=(0,r.Kx)({field:S,reducers:C});for(const M of C){const R=x[M],O={...S,values:[R]};O.state=void 0,C.length>1&&(O.labels||(O.labels={}),O.labels.reducer=r.TB.get(M).name),P.push(O)}}P.length&&u.push({...D,fields:P,length:1})}return u}},61045:()=>{},66770:()=>{},41999:(j,I,e)=>{"use strict";e.d(I,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},22001:(j,I,e)=>{"use strict";e.d(I,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},62247:(j,I,e)=>{"use strict";e.d(I,{CQ:()=>r,k8:()=>s,zj:()=>i});var t=e(9232),n=e(15766),i=(m=>(m.CloudAlerting="cloud-alerting",m.UnifiedAlerting="unified-alerting",m.Dashboard="dashboard",m.Explore="explore",m.Correlations="correlations",m.Unknown="unknown",m.PanelEditor="panel-editor",m.PanelViewer="panel-viewer",m))(i||{});class s extends t.Sg{constructor(){super(...arguments),this._extensionConfigs=[]}init(d){}setRootPage(d){return this.root=d,this}setComponentsFromLegacyExports(d){if(d.ConfigCtrl&&(this.angularConfigCtrl=d.ConfigCtrl),this.meta&&this.meta.includes){for(const o of this.meta.includes)if(o.type===t.$_.page&&o.component&&!d[o.component]){console.warn("App Page uses unknown component: ",o.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(d){return this._extensionConfigs.push({...d,type:n.D.link}),this}configureExtensionComponent(d){return this._extensionConfigs.push({...d,type:n.D.component}),this}}var r=(m=>(m.alpha="alpha",m.beta="beta",m))(r||{})},47494:(j,I,e)=>{"use strict";e.d(I,{e:()=>t});var t=(n=>(n.OpenSource="Open Source",n.Pro="Pro",n.Enterprise="Enterprise",n))(t||{})},34239:(j,I,e)=>{"use strict";e.d(I,{Hx:()=>t,Z3:()=>n,bm:()=>i});const t=0,n=100,i="SAML"},79248:(j,I,e)=>{"use strict";e.d(I,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},53933:(j,I,e)=>{"use strict";e.d(I,{Gl:()=>i,Gu:()=>t,dC:()=>n,fQ:()=>s});var t=(r=>(r.NotStarted="NotStarted",r.Loading="Loading",r.Streaming="Streaming",r.Done="Done",r.Error="Error",r))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var i=(r=>(r.Null="null",r.Ignore="connected",r.AsZero="null as zero",r))(i||{});const s=r=>!!r},29241:(j,I,e)=>{"use strict";e.d(I,{Ls:()=>i,M5:()=>n,fS:()=>t,rN:()=>s});var t=(r=>(r.time="time",r.number="number",r.string="string",r.boolean="boolean",r.trace="trace",r.geo="geo",r.enum="enum",r.other="other",r.frame="frame",r))(t||{});const n="Value",i="Time",s="Metric"},43987:(j,I,e)=>{"use strict";e.d(I,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.NumericWide="numeric-wide",n.NumericMulti="numeric-multi",n.NumericLong="numeric-long",n.LogLines="log-lines",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},24094:(j,I,e)=>{"use strict";e.d(I,{L8:()=>i,n1:()=>t,o3:()=>s,sN:()=>n});var t=(r=>(r.Datasource="Datasource",r.Correlations="Correlations",r))(t||{}),n=(r=>(r.Regex="regex",r.Logfmt="logfmt",r))(n||{}),i=(r=>(r.Series="series",r.Field="field",r.Fields="fields",r.Value="value",r.BuiltIn="built-in",r.Template="template",r))(i||{}),s=(r=>(r.Values="values",r))(s||{})},68246:(j,I,e)=>{"use strict";e.d(I,{MF:()=>s,Ru:()=>r,eA:()=>m,hf:()=>i,iL:()=>d});var t=e(29403),n=e(9232);class i extends n.Sg{constructor(l){super(),this.DataSourceClass=l,this.components={}}setConfigEditor(l){return this.components.ConfigEditor=l,this}setConfigCtrl(l){return this.angularConfigCtrl=l,this}setQueryCtrl(l){return this.components.QueryCtrl=l,this}setAnnotationQueryCtrl(l){return this.components.AnnotationsQueryCtrl=l,this}setQueryEditor(l){return this.components.QueryEditor=l,this}setExploreQueryField(l){return this.components.ExploreQueryField=l,this}setExploreMetricsQueryField(l){return this.components.ExploreMetricsQueryField=l,this}setExploreLogsQueryField(l){return this.components.ExploreLogsQueryField=l,this}setQueryEditorHelp(l){return this.components.QueryEditorHelp=l,this}setExploreStartPage(l){return this.setQueryEditorHelp(l)}setVariableQueryEditor(l){return this.components.VariableQueryEditor=l,this}setMetadataInspector(l){return this.components.MetadataInspector=l,this}setComponentsFromLegacyExports(l){this.angularConfigCtrl=l.ConfigCtrl,this.components.QueryCtrl=l.QueryCtrl,this.components.AnnotationsQueryCtrl=l.AnnotationsQueryCtrl,this.components.ExploreQueryField=l.ExploreQueryField,this.components.QueryEditor=l.QueryEditor,this.components.QueryEditorHelp=l.QueryEditorHelp,this.components.VariableQueryEditor=l.VariableQueryEditor}}class s{constructor(l){this.name=l.name,this.id=l.id,this.type=l.type,this.meta=l.meta,this.cachingConfig=l.cachingConfig,this.uid=l.uid}getRef(){return{type:this.type,uid:this.uid}}}var r=(o=>(o.Logs="Logs",o.Metrics="Metrics",o.Tracing="Tracing",o))(r||{}),m=(o=>(o.Cancelled="cancelled",o.Timeout="timeout",o.Unknown="unknown",o))(m||{});class d{}d=(0,t.s)(d),s=(0,t.s)(s)},913:()=>{},55411:()=>{},93666:(j,I,e)=>{"use strict";e.d(I,{R:()=>n,S:()=>t});var t=(i=>(i.Thresholds="thresholds",i.PaletteClassic="palette-classic",i.PaletteClassicByName="palette-classic-by-name",i.PaletteSaturated="palette-saturated",i.ContinuousGrYlRd="continuous-GrYlRd",i.ContinuousRdYlGr="continuous-RdYlGr",i.ContinuousBlYlRd="continuous-BlYlRd",i.ContinuousYlRd="continuous-YlRd",i.ContinuousBlPu="continuous-BlPu",i.ContinuousYlBl="continuous-YlBl",i.ContinuousBlues="continuous-blues",i.ContinuousReds="continuous-reds",i.ContinuousGreens="continuous-greens",i.ContinuousPurples="continuous-purples",i.Fixed="fixed",i.Shades="shades",i))(t||{});const n="#808080"},25587:(j,I,e)=>{"use strict";e.d(I,{Y4:()=>t,qb:()=>i,v3:()=>n});function t(s){return r=>r.__systemRef===s}const n=s=>typeof s?.__systemRef=="string";var i=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s.Filterable="filterable",s))(i||{})},26936:()=>{},97495:()=>{},67228:()=>{},8553:(j,I,e)=>{"use strict";e.d(I,{Mo:()=>n,_S:()=>t,iJ:()=>i});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,"align-left":!0,"align-right":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,"expand-arrows":!0,at:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,"file-landscape-alt":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,"gf-pin":!0,grafana:!0,"graph-bar":!0,"grafana-ml":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,"map-marker-plus":!0,"map-marker-minus":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,stopwatch:!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function i(s){if(n(s))return s}},312:(j,I,e)=>{"use strict";e.r(I),e.d(I,{AbstractLabelOperator:()=>d.K2,AlertState:()=>Z.Z,AnnotationEventFieldSource:()=>o.L,AppEvents:()=>z.SI,AppPlugin:()=>M.k8,CoreApp:()=>M.zj,CustomVariableSupport:()=>Q.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>m.m,DataFrameType:()=>s.P,DataLinkConfigOrigin:()=>r.n1,DataQueryErrorType:()=>R.eA,DataSourceApi:()=>R.MF,DataSourcePlugin:()=>R.hf,DataSourceVariableSupport:()=>Q.gv,DataTopic:()=>d.w5,DefaultTimeZone:()=>h.Ys,ExploreMode:()=>R.Ru,FALLBACK_COLOR:()=>L.R,FeatureState:()=>M.CQ,FieldColorModeId:()=>L.S,FieldConfigProperty:()=>S.qb,FieldType:()=>i.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>T.Sg,GrafanaThemeType:()=>V.Q,LanguageProvider:()=>R.iL,LegacyGraphHoverClearEvent:()=>z.oi,LegacyGraphHoverEvent:()=>z.IA,LiveChannelConnectionState:()=>H.yS,LiveChannelEventType:()=>H.FU,LiveChannelScope:()=>H.z,LiveChannelType:()=>H.SK,LoadingState:()=>n.Gu,LogLevel:()=>l.in,LogRowContextQueryDirection:()=>l.M4,LogsDedupDescription:()=>l.Uv,LogsDedupStrategy:()=>l.Y4,LogsMetaKind:()=>l.Ku,LogsSortOrder:()=>l.UV,LogsVolumeType:()=>l.o8,MappingType:()=>b.H,NullValueMode:()=>n.Gl,OrgRole:()=>w.B,PageLayoutType:()=>a.Q,PanelEvents:()=>z.Kh,PluginErrorCode:()=>T.w2,PluginExtensionPoints:()=>ie.y,PluginExtensionTypes:()=>ie.D,PluginIncludeType:()=>T.$_,PluginSignatureStatus:()=>T.Xy,PluginSignatureType:()=>T._Z,PluginState:()=>T.BV,PluginType:()=>T.zV,SpecialValue:()=>P.U,SpecialValueMatch:()=>b.e,StandardVariableSupport:()=>Q.v6,SupplementaryQueryType:()=>l.v8,SupportedTransformationType:()=>r.sN,TIME_FORMAT:()=>h.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>i.rN,TIME_SERIES_TIME_FIELD_NAME:()=>i.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>i.M5,ThresholdsMode:()=>f.H,VariableHide:()=>U.bU,VariableOrigin:()=>r.L8,VariableRefresh:()=>U.Bd,VariableSort:()=>U.$U,VariableSuggestionsScope:()=>r.o3,VariableSupportBase:()=>Q.Tq,VariableSupportType:()=>Q.j2,VisualizationSuggestionScore:()=>O._,VisualizationSuggestionsBuilder:()=>O.mi,VisualizationSuggestionsListAppender:()=>O.sf,VizOrientation:()=>O.wm,availableIconsIndex:()=>re._S,getDefaultRelativeTimeRange:()=>h.Rr,getDefaultTimeRange:()=>h.JK,hasLogsContextSupport:()=>l.Q4,hasLogsContextUiSupport:()=>l.xW,hasQueryExportSupport:()=>d.p,hasQueryImportSupport:()=>d.CZ,hasSupplementaryQuerySupport:()=>l.mN,hasToggleableQueryFiltersSupport:()=>l.Vw,isIconName:()=>re.Mo,isLiveChannelJoinEvent:()=>H.mx,isLiveChannelLeaveEvent:()=>H.gH,isLiveChannelMessageEvent:()=>H.RL,isLiveChannelStatusEvent:()=>H.se,isSystemOverride:()=>S.v3,isSystemOverrideWithRef:()=>S.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>oe.x,isValidLiveChannelAddress:()=>H.nU,makeArrayIndexableVector:()=>x.U,parseLiveChannelAddress:()=>H.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>re.iJ,toLiveChannelId:()=>H.Aj});var t=e(34239),n=e(53933),i=e(29241),s=e(43987),r=e(24094),m=e(79248),d=e(69376),o=e(22001),l=e(51451),a=e(38192),g=e(66018),c=e.n(g),pe={};for(const Se in g)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType"].indexOf(Se)<0&&(pe[Se]=()=>g[Se]);e.d(I,pe);var h=e(8508),f=e(5168),b=e(51046),v=e(913),y=e.n(v),pe={};for(const Se in v)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(Se)<0&&(pe[Se]=()=>v[Se]);e.d(I,pe);var E=e(67228),C=e.n(E),pe={};for(const Se in E)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(Se)<0&&(pe[Se]=()=>E[Se]);e.d(I,pe);var u=e(61045),D=e.n(u),pe={};for(const Se in u)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(Se)<0&&(pe[Se]=()=>u[Se]);e.d(I,pe);var P=e(49721),S=e(25587),x=e(79866),M=e(62247),R=e(68246),O=e(90482),T=e(9232),U=e(82986),L=e(93666),V=e(40125),w=e(50686),K=e(26936),B=e.n(K),pe={};for(const Se in K)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(Se)<0&&(pe[Se]=()=>K[Se]);e.d(I,pe);var W=e(97262),_=e.n(W),pe={};for(const Se in W)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(Se)<0&&(pe[Se]=()=>W[Se]);e.d(I,pe);var k=e(55411),A=e.n(k),pe={};for(const Se in k)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(Se)<0&&(pe[Se]=()=>k[Se]);e.d(I,pe);var z=e(3935),H=e(81087),Q=e(79726),X=e(97495),te=e.n(X),pe={};for(const Se in X)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(Se)<0&&(pe[Se]=()=>X[Se]);e.d(I,pe);var oe=e(81538),Z=e(41999),le=e(93684),ce=e.n(le),pe={};for(const Se in le)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(Se)<0&&(pe[Se]=()=>le[Se]);e.d(I,pe);var q=e(66770),ne=e.n(q),pe={};for(const Se in q)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogRowContextQueryDirection","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasToggleableQueryFiltersSupport","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","makeArrayIndexableVector","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(Se)<0&&(pe[Se]=()=>q[Se]);e.d(I,pe);var re=e(8553),ie=e(15766)},47435:(j,I,e)=>{"use strict";e.d(I,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},3935:(j,I,e)=>{"use strict";e.d(I,{IA:()=>r,Kh:()=>s,SI:()=>i,oi:()=>m});var t=e(74817),n=e(96509);const i={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},s={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class r extends n.R{}r.type="graph-hover";class m extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}m.type="graph-hover-clear"},81087:(j,I,e)=>{"use strict";e.d(I,{Aj:()=>g,FU:()=>s,H7:()=>l,RL:()=>o,SK:()=>n,gH:()=>d,mx:()=>m,nU:()=>a,se:()=>r,yS:()=>i,z:()=>t});var t=(c=>(c.DataSource="ds",c.Plugin="plugin",c.Grafana="grafana",c.Stream="stream",c))(t||{}),n=(c=>(c.DataStream="stream",c.DataFrame="frame",c.JSON="json",c))(n||{}),i=(c=>(c.Pending="pending",c.Connected="connected",c.Connecting="connecting",c.Disconnected="disconnected",c.Shutdown="shutdown",c.Invalid="invalid",c))(i||{}),s=(c=>(c.Status="status",c.Join="join",c.Leave="leave",c.Message="message",c))(s||{});function r(c){return c.type==="status"}function m(c){return c.type==="join"}function d(c){return c.type==="leave"}function o(c){return c.type==="message"}function l(c){if(c?.length){let h=c.trim().split("/");if(h.length>=3)return{scope:h[0],namespace:h[1],path:h.slice(2).join("/")}}}function a(c){return!!(c?.path&&c.namespace&&c.scope)}function g(c){if(!c.scope)return"";let h=c.scope;return!c.namespace||(h+="/"+c.namespace,!c.path)?h:h+"/"+c.path}},51451:(j,I,e)=>{"use strict";e.d(I,{Ku:()=>i,M4:()=>r,Q4:()=>m,UV:()=>t.UV,Uv:()=>s,Vw:()=>g,Y4:()=>t.Y4,in:()=>n,mN:()=>l,o8:()=>o,v8:()=>d,xW:()=>a});var t=e(64167),n=(c=>(c.emerg="critical",c.fatal="critical",c.alert="critical",c.crit="critical",c.critical="critical",c.warn="warning",c.warning="warning",c.err="error",c.eror="error",c.error="error",c.info="info",c.information="info",c.informational="info",c.notice="info",c.dbug="debug",c.debug="debug",c.trace="trace",c.unknown="unknown",c))(n||{}),i=(c=>(c[c.Number=0]="Number",c[c.String=1]="String",c[c.LabelsMap=2]="LabelsMap",c[c.Error=3]="Error",c))(i||{}),s=(c=>(c.none="No de-duplication",c.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",c.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",c.signature="De-duplication of successive lines that have identical punctuation and whitespace.",c))(s||{}),r=(c=>(c.Backward="BACKWARD",c.Forward="FORWARD",c))(r||{});const m=c=>{if(!c)return!1;const h=c;return h.getLogRowContext!==void 0&&h.showContextToggle!==void 0};var d=(c=>(c.LogsVolume="LogsVolume",c.LogsSample="LogsSample",c))(d||{}),o=(c=>(c.FullRange="FullRange",c.Limited="Limited",c))(o||{});const l=(c,h)=>{if(!c)return!1;const f=c;return f.getDataProvider!==void 0&&f.getSupplementaryQuery!==void 0&&f.getSupportedSupplementaryQueryTypes().includes(h)},a=c=>c?c.getLogRowContextUi!==void 0:!1,g=c=>c!==null&&typeof c=="object"&&"toggleQueryFilter"in c&&"queryHasFilter"in c},38192:(j,I,e)=>{"use strict";e.d(I,{Q:()=>t});var t=(n=>(n[n.Standard=0]="Standard",n[n.Canvas=1]="Canvas",n[n.Custom=2]="Custom",n))(t||{})},50686:(j,I,e)=>{"use strict";e.d(I,{B:()=>t});var t=(n=>(n.None="None",n.Viewer="Viewer",n.Editor="Editor",n.Admin="Admin",n))(t||{})},90482:(j,I,e)=>{"use strict";e.d(I,{_:()=>r,mi:()=>m,sf:()=>d,wm:()=>s});var t=e(89949),n=e.n(t),i=e(29241),s=(o=>(o.Auto="auto",o.Vertical="vertical",o.Horizontal="horizontal",o))(s||{}),r=(o=>(o[o.Best=100]="Best",o[o.Good=70]="Good",o[o.OK=50]="OK",o))(r||{});class m{constructor(l,a){this.list=[],this.data=l,this.panel=a,this.dataSummary=this.computeDataSummary()}getListAppender(l){return new d(this.list,l)}computeDataSummary(){const l=this.data?.series||[];let a=0,g=0,c=0,h=0,f=0,b=0,v;for(const y of l){h+=y.length,y.meta?.preferredVisualisationType&&(v=y.meta.preferredVisualisationType);for(const E of y.fields)switch(b++,E.type){case i.fS.number:a+=1;break;case i.fS.time:g+=1;break;case i.fS.string:c+=1;break}y.length>f&&(f=y.length)}return{numberFieldCount:a,timeFieldCount:g,stringFieldCount:c,rowCountTotal:h,rowCountMax:f,fieldCount:b,preferredVisualisationType:v,frameCount:l.length,hasData:h>0,hasTimeField:g>0,hasNumberField:a>0,hasStringField:c>0}}getList(){return this.list}}class d{constructor(l,a){this.list=l,this.defaults=a}append(l){this.list.push((0,t.defaultsDeep)(l,this.defaults))}}},9232:(j,I,e)=>{"use strict";e.d(I,{$_:()=>m,BV:()=>t,Sg:()=>d,Xy:()=>i,_Z:()=>s,w2:()=>r,zV:()=>n});var t=(o=>(o.alpha="alpha",o.beta="beta",o.stable="stable",o.deprecated="deprecated",o))(t||{}),n=(o=>(o.panel="panel",o.datasource="datasource",o.app="app",o.renderer="renderer",o.secretsmanager="secretsmanager",o))(n||{}),i=(o=>(o.internal="internal",o.valid="valid",o.invalid="invalid",o.modified="modified",o.missing="missing",o))(i||{}),s=(o=>(o.grafana="grafana",o.commercial="commercial",o.community="community",o.private="private",o.core="core",o))(s||{}),r=(o=>(o.missingSignature="signatureMissing",o.invalidSignature="signatureInvalid",o.modifiedSignature="signatureModified",o))(r||{}),m=(o=>(o.dashboard="dashboard",o.page="page",o.panel="panel",o.datasource="datasource",o))(m||{});class d{addConfigPage(l){return this.configPages||(this.configPages=[]),this.configPages.push(l),this}setChannelSupport(l){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},15766:(j,I,e)=>{"use strict";e.d(I,{D:()=>t,y:()=>n});var t=(i=>(i.link="link",i.component="component",i))(t||{}),n=(i=>(i.DashboardPanelMenu="grafana/dashboard/panel/menu",i.DataSourceConfig="grafana/datasources/config",i.ExploreToolbarAction="grafana/explore/toolbar/action",i))(n||{})},81538:(j,I,e)=>{"use strict";e.d(I,{x:()=>n});var t=e(9232);function n(i){return i&&i!==t.Xy.valid&&i!==t.Xy.internal}},69376:(j,I,e)=>{"use strict";e.d(I,{CZ:()=>i,K2:()=>n,p:()=>s,w5:()=>t});var t=(r=>(r.Annotations="annotations",r))(t||{}),n=(r=>(r.Equal="Equal",r.NotEqual="NotEqual",r.EqualRegEx="EqualRegEx",r.NotEqualRegEx="NotEqualRegEx",r))(n||{});const i=r=>r.importFromAbstractQueries!==void 0,s=r=>r.exportToAbstractQueries!==void 0},66018:()=>{},93684:()=>{},82986:(j,I,e)=>{"use strict";e.d(I,{$U:()=>n,Bd:()=>t,bU:()=>i});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s))(n||{}),i=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(i||{})},40125:(j,I,e)=>{"use strict";e.d(I,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},5168:(j,I,e)=>{"use strict";e.d(I,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},8508:(j,I,e)=>{"use strict";e.d(I,{JK:()=>r,Rr:()=>m,T_:()=>s,Ys:()=>i});var t=e(64167),n=e(99633);const i=t.iT,s="YYYY-MM-DD HH:mm:ss";function r(){const d=(0,n.CQ)();return{from:(0,n.CQ)(d).subtract(6,"hour"),to:d,raw:{from:"now-6h",to:"now"}}}function m(){return{from:600,to:0}}},97262:()=>{},49721:(j,I,e)=>{"use strict";e.d(I,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},51046:(j,I,e)=>{"use strict";e.d(I,{H:()=>t,e:()=>n});var t=(i=>(i.ValueToText="value",i.RangeToText="range",i.RegexToText="regex",i.SpecialValue="special",i))(t||{}),n=(i=>(i.True="true",i.False="false",i.Null="null",i.NaN="nan",i.NullAndNaN="null+nan",i.Empty="empty",i))(n||{})},79726:(j,I,e)=>{"use strict";e.d(I,{Mg:()=>s,Tq:()=>n,gv:()=>r,j2:()=>t,v6:()=>i});var t=(m=>(m.Legacy="legacy",m.Standard="standard",m.Custom="custom",m.Datasource="datasource",m))(t||{});class n{}class i extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class r extends n{getType(){return"datasource"}}},79866:(j,I,e)=>{"use strict";e.d(I,{U:()=>t}),Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(n){return this[n]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(n,i){this[n]=i},writable:!0,enumerable:!1,configurable:!0},add:{value:function(n){this.push(n)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}});function t(n){return new Proxy(n,{get(i,s,r){if(typeof s!="symbol"){const m=+s;if(String(m)===s)return i.get(m)}return Reflect.get(i,s,r)},set(i,s,r,m){if(typeof s!="symbol"){const d=+s;if(String(d)===s)return i.set(d,r),!0}return Reflect.set(i,s,r,m)}})}},2471:(j,I,e)=>{"use strict";e.d(I,{vo:()=>r,rt:()=>o,j:()=>d});var t=e(41199),n=e(27001),i=e(25359);class s{constructor(){this.properties=[]}addCustomEditor(a){return this.properties.push(a),this}getRegistry(){return new i.B(()=>this.properties)}getItems(){return this.properties}}class r extends s{addNumberInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addSliderInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addTextInput(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:a.shouldApply??(()=>!0),settings:a.settings||{}})}addSelect(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{options:[]}})}addRadio(a){return this.addCustomEditor({...a,id:a.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{options:[]}})}addBooleanSwitch(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addColorPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addUnitPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addFieldNamePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}addGenericEditor(a,g){return this.addCustomEditor({...a,id:a.path,editor:g,override:g,process:n.kG,shouldApply:a.shouldApply?a.shouldApply:()=>!0,settings:a.settings||{}})}}class m{constructor(a){this.cfg=a,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=g=>{const c=this.cfg.values;return c?c(g):{getValue:h=>g.getValue(`${this.path}.${h}`),onChange:(h,f)=>g.onChange(`${this.path}.${h}`,f)}},this.path=a.path,this.category=a.category,this.defaultValue=a.defaultValue}}function d(l){return l.id==="nested-panel-options"}class o extends s{addNestedOptions(a){const g=new m(a);return this.addCustomEditor(g)}addNumberInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("number").editor})}addSliderInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("slider").editor})}addTextInput(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("text").editor})}addStringArray(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("strings").editor})}addSelect(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("select").editor})}addMultiSelect(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("multi-select").editor})}addRadio(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("radio").editor})}addBooleanSwitch(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("boolean").editor})}addColorPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("color").editor,settings:a.settings||{}})}addTimeZonePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("timezone").editor,settings:a.settings||{}})}addUnitPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("unit").editor})}addFieldNamePicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("field-name").editor})}addDashboardPicker(a){return this.addCustomEditor({...a,id:a.path,editor:t.S.get("dashboard-uid").editor})}}},17373:(j,I,e)=>{"use strict";e.d(I,{I:()=>i});var t=e(89949),n=e.n(t);function i(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},99025:(j,I,e)=>{"use strict";e.r(I),e.d(I,{moveItemImmutably:()=>n,sortValues:()=>r});var t=e(64167);function n(m,d,o){const l=[...m];return Array.prototype.splice.call(l,o,0,Array.prototype.splice.call(l,d,1)[0]),l}const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(m,d)=>m-d;function r(m){return(d,o)=>{if(d===o)return 0;if(o==null||typeof o=="string"&&o.trim()==="")return-1;if(d==null||typeof d=="string"&&d?.trim()==="")return 1;let l=i.compare;return typeof d=="number"&&typeof o=="number"&&(l=s),m===t.As.Descending?l(o,d):l(d,o)}}},32338:(j,I,e)=>{"use strict";e.d(I,{L:()=>n,n:()=>i});var t=e(25359),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const i=new t.B(()=>[{id:"+",name:"Add",operation:(s,r)=>s+r},{id:"-",name:"Subtract",operation:(s,r)=>s-r},{id:"*",name:"Multiply",operation:(s,r)=>s*r},{id:"/",name:"Divide",operation:(s,r)=>s/r}])},92827:(j,I,e)=>{"use strict";e.d(I,{MJ:()=>E,QM:()=>h,uP:()=>g,x5:()=>a});var t=e(89949),n=e.n(t),i=e(64802),s=e.n(i),r=e(72164),m=e(32053),d=e(75578),o=e(29241),l=e(21609),a=(C=>(C[C.full=0]="full",C[C.name=1]="name",C[C.none=2]="none",C))(a||{});function g(C,u){return new h(u).readCSV(C)}var c=(C=>(C[C.Starting=0]="Starting",C[C.InHeader=1]="InHeader",C[C.ReadingRows=2]="ReadingRows",C))(c||{});class h{constructor(u){this.chunk=(D,P)=>{for(let S=0;S<D.data.length;S++){const x=D.data[S];if(x.length<1)continue;const M=x[0];if(M){if(M.startsWith("#")){const R=M.indexOf("#",2);if(R>0){const O=M.slice(1,R),T=O==="name";if(T||{unit:"#"}.hasOwnProperty(O)){this.state===2&&(this.current=new r.v({fields:[]}),this.data.push(this.current));const L=M.slice(R+1);if(T){this.current.addFieldFor(void 0,L);for(let V=1;V<x.length;V++)this.current.addFieldFor(void 0,x[V])}else{const{fields:V}=this.current;for(let w=0;w<V.length;w++){V[w].config||(V[w].config={});const K=V[w].config;K[O]=w===0?L:x[w]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,m.LI)(M)===o.fS.string){for(const O of x)this.current.addFieldFor(void 0,O);this.state=1;continue}this.state=1}}if(this.state,this.state=2,x.length>this.current.fields.length){const{fields:R}=this.current;for(let O=R.length;O<x.length;O++)this.current.addFieldFor(x[O]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(x),this.callback&&this.callback.onRow(x)}},u||(u={}),this.config=u.config||{},this.callback=u.callback,this.current=new r.v({fields:[]}),this.state=0,this.data=[]}readCSV(u){this.current=new r.v({fields:[]}),this.data=[this.current];const D={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(u,D),this.data}}function f(C,u){if(C==null)return"";const D=C.toString();return D.includes('"')?u.quoteChar+D.replace(/"/gi,'""')+u.quoteChar:D.includes(`
`)||u.delimiter&&D.includes(u.delimiter)?u.quoteChar+D+u.quoteChar:D}function b(C,u){return C.display?D=>{const P=C.display(D);return f((0,l.zc)(P),u)}:D=>f(D,u)}function v(C,u,D){const P=C==="name",S=C==="type";for(const x of u){const M=x.config;if(P||S||M&&M.hasOwnProperty(C)){let R="#"+C+"#";for(let O=0;O<u.length;O++){O>0&&(R=R+D.delimiter);let T=u[O].name;S?T=u[O].type:P||(T=u[O].config[C]),T&&(R=R+f(T,D))}return R+D.newline}}return""}function y(){const C=["x","y"];return C.toLocaleString?C.toLocaleString().charAt(1):","}function E(C,u){if(!C)return"";u=(0,t.defaults)(u,{delimiter:y(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let D=u.useExcelHeader?`sep=${u.delimiter}${u.newline}`:"";for(let P=0;P<C.length;P++){const S=C[P],{fields:x}=S;if(x.length===0)continue;if(u.headerStyle===0)D=D+v("name",x,u)+v("type",x,u)+v("unit",x,u)+v("dateFormat",x,u);else if(u.headerStyle===1){for(let R=0;R<x.length;R++)R>0&&(D+=u.delimiter),D+=`"${(0,d.CZ)(x[R],S).replace(/"/g,'""')}"`;D+=u.newline}const M=x[0].values.length;if(M>0){const R=x.map(O=>b(O,u));for(let O=0;O<M;O++){for(let T=0;T<x.length;T++){T>0&&(D=D+u.delimiter);const U=x[T].values[O];U!==null&&(D=D+R[T](U))}O!==M-1&&(D=D+u.newline)}}P!==C.length-1&&(D=D+u.newline)}return D}},3569:(j,I,e)=>{"use strict";e.d(I,{W:()=>i,_:()=>s});var t=e(94469),n=e(78968);const i={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(o){const{onClickFn:l,replaceVariables:a,link:g,scopedVars:c,range:h,field:f,internalLink:b}=o,v=m(g.internal?.query,c,a),y=m(g.internal?.panelsState,c,a),E=g.title?g.title:b.datasourceName;return{title:a(E,c),href:r(b.datasourceUid,v,h,y),onClick:l?()=>{l({datasourceUid:b.datasourceUid,queries:[v],panelsState:y,range:h})}:void 0,target:g?.targetBlank?"_blank":"_self",origin:f}}function r(o,l,a,g){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:a.raw,datasource:o,queries:[l],panelsState:g}))}`)}function m(o,l,a){if(!o)return o;if(typeof o=="string")return a(o,l);const g=JSON.parse(JSON.stringify(o));return d(g,l,a)}function d(o,l,a){for(const g of Object.keys(o))typeof o[g]=="string"?o[g]=a(o[g],l):typeof o[g]=="object"&&o[g]!==null&&(o[g]=d(o[g],l,a));return o}},17312:(j,I,e)=>{"use strict";e.d(I,{BT:()=>r,HD:()=>c,Mf:()=>v,TX:()=>g,_R:()=>d,cv:()=>s,fd:()=>h,fi:()=>o,hz:()=>a,iU:()=>i,nx:()=>l,tp:()=>f,uw:()=>b,z_:()=>m});var t=e(89949),n=e.n(t);function i(y){return{uid:y.uid,type:y.type}}function s(y){return typeof y=="object"&&typeof y?.uid=="string"}function r(y){if(s(y))return y.uid;if((0,t.isString)(y))return y}const m=(y,E)=>C=>{h(y,E,C.currentTarget.value)},d=(y,E)=>C=>{f(y,E,C.currentTarget.value)},o=(y,E)=>C=>{b(y,E,C.currentTarget.value)},l=(y,E)=>C=>{f(y,E,C.value)},a=(y,E)=>C=>{f(y,E,C.currentTarget.checked)},g=(y,E)=>C=>{b(y,E,C.value)},c=(y,E)=>C=>{v(y,E)};function h(y,E,C){const u=y.options;y.onOptionsChange({...u,[E]:C})}const f=(y,E,C)=>{const u=y.options;y.onOptionsChange({...u,jsonData:{...u.jsonData,[E]:C}})},b=(y,E,C)=>{const u=y.options;y.onOptionsChange({...u,secureJsonData:{...u.secureJsonData?u.secureJsonData:{},[E]:C}})},v=(y,E)=>{const C=y.options;y.onOptionsChange({...C,secureJsonData:{...C.secureJsonData?C.secureJsonData:{},[E]:""},secureJsonFields:{...C.secureJsonFields,[E]:!1}})}},58939:(j,I,e)=>{"use strict";e.d(I,{d:()=>n});const t={},n=(i,s,r)=>{let m=`[Deprecation warning] ${i}: ${s} is deprecated`;r&&(m+=`. Use ${r} instead`);const d=Date.now(),o=t[m];(!o||d-o>1e4)&&(console.warn(m),t[m]=d)}},63699:(j,I,e)=>{"use strict";e.d(I,{x:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},56715:(j,I,e)=>{"use strict";e.d(I,{H:()=>i,k:()=>n});var t=e(53933);function n({xField:s,yField:r,nullValueMode:m}){const d=s.values,o=r.values,l=d.length;if(o.length!==l)throw new Error("Unexpected field length");const a=m===t.Gl.Ignore,g=m===t.Gl.AsZero,c=[];for(let h=0;h<l;h++){const f=d[h];let b=o[h];if(b===null){if(a)continue;g&&(b=0)}f!==null&&c.push([f,b])}return c}function i(s,r){if(!r.from||!r.to||!s||s.length===0)return[];const m=r.from.valueOf(),d=r.to.valueOf(),o=s[0][1];return[[m,o],[d,o]]}},18029:(j,I,e)=>{"use strict";e.d(I,{LH:()=>g.L,x5:()=>r.x5,QM:()=>r.QM,WC:()=>E.W,xV:()=>C.x,vo:()=>f.vo,HU:()=>S.HU,zG:()=>c.z,rt:()=>f.rt,Bz:()=>n.B,IX:()=>D.I,sq:()=>t,nk:()=>g.n,ZC:()=>l,bf:()=>x.b,Jb:()=>S.Jb,d9:()=>s.d,FT:()=>m.FT,IU:()=>m.IU,aA:()=>m.aA,iU:()=>i.iU,BT:()=>i.BT,k8:()=>b.k,HE:()=>b.H,_6:()=>x._,e4:()=>a.e,dP:()=>d.d,fp:()=>a.f,cv:()=>i.cv,Qr:()=>o.Q,uT:()=>v.u,s2:()=>u.s,_N:()=>E._,VS:()=>m.VS,Hh:()=>o.H,_R:()=>i._R,hz:()=>i.hz,nx:()=>i.nx,z_:()=>i.z_,HD:()=>i.HD,fi:()=>i.fi,TX:()=>i.TX,J8:()=>m.J8,uP:()=>r.uP,Wn:()=>M.W,O9:()=>d.O,S:()=>y.S,MJ:()=>r.MJ,Er:()=>h.E,tp:()=>i.tp,fd:()=>i.fd,Mf:()=>i.Mf,uw:()=>i.uw,Cj:()=>y.Cj,xc:()=>P.x});var t=e(99025),n=e(25359),i=e(17312),s=e(58939),r=e(92827),m=e(14951),d=e(27107),o=e(59421);const l=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];var a=e(93998),g=e(32338),c=e(12503),h=e(81078),f=e(2471),b=e(56715),v=e(94469),y=e(78968),E=e(3569),C=e(63699),u=e(29403),D=e(17373),P=e(35412),S=e(6850),x=e(83505),M=e(76772)},14951:(j,I,e)=>{"use strict";e.d(I,{FT:()=>i,IU:()=>s,J8:()=>n,VS:()=>r,aA:()=>m});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(d){const o={};return d.replace(t,(l,a,g,c)=>(o[a]=c,"")),o}function i(d){return d.reduce((o,l)=>{if(!l)throw new Error("Need parsed labels to find common labels.");return Object.keys(l).forEach(a=>{(o[a]===void 0||o[a]!==l[a])&&delete o[a]}),Object.keys(o).forEach(a=>{l[a]===void 0&&delete o[a]}),o},{...d[0]})}function s(d,o){const l={...d};return Object.keys(o).forEach(a=>{delete l[a]}),l}function r(d,o){if(!d)return!0;for(const[l,a]of Object.entries(d))if(!o||o[l]!==a)return!1;return!0}function m(d,o="",l){if(!d||Object.keys(d).length===0)return o;const g=Object.keys(d).sort().map(c=>`${c}="${d[c]}"`).join(", ");return l?g:["{",g,"}"].join("")}},94469:(j,I,e)=>{"use strict";e.d(I,{u:()=>g});var t=e(48154),n=e(78968);let i={appSubUrl:""},s,r;const m=c=>{try{return new URL(c)}catch{return}},d=c=>{const h=m(c);if(h&&h.origin!==window.location.origin)return c;const f=i.appSubUrl??"",b=f.endsWith("/")?1:0,v=c.startsWith("http");let y=f;return(!c.startsWith("/")||v)&&(y=`${window.location.origin}${f}`),c.length>0&&c.indexOf(y)===0?c.slice(y.length-b):c},o=c=>c.startsWith("/")?`${i.appSubUrl}${d(c)}`:c,g={initialize:c=>{i=c.config,s=c.getTimeRangeForUrl,r=c.getVariablesUrlParams},stripBaseFromUrl:d,assureBaseUrl:o,updateSearchParams:(c,h)=>{const f=new URLSearchParams(h);try{const b=new URL(c);return f.forEach((v,y)=>b.searchParams.set(y,v)),b.href}catch{const b=new URLSearchParams(c);return f.forEach((v,y)=>{b.set(y,v)}),"?"+b.toString()}},getTimeRangeUrlParams:()=>s?n.Cj.toUrlParams(s()):null,getVariablesUrlParams:c=>{if(!r)return null;const h=r(c);return n.Cj.toUrlParams(h)},getUrlForPartial:(c,h)=>{const f=n.Cj.parseKeyValue(c.search.startsWith("?")?c.search.substring(1):c.search);for(const b of Object.keys(h))h[b]===null||h[b]===void 0?delete f[b]:f[b]=h[b];return o(n.Cj.renderUrl(c.pathname,f))},processUrl:c=>i.disableSanitizeHtml?c:t.QX.sanitizeUrl(c)}},29403:(j,I,e)=>{"use strict";e.d(I,{s:()=>t});function t(n){return new Proxy(n,{apply(i,s,r){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(i,r,s.constructor)}})}},12503:(j,I,e)=>{"use strict";e.d(I,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.arc="arc__",n.icon="icon",n.color="color",n.source="source",n.target="target",n.detail="detail__",n))(t||{})},27107:(j,I,e)=>{"use strict";e.d(I,{O:()=>t,d:()=>n});function t(i,s=0){if(Number.isInteger(i))return i;let r=10**s,m=i*r*(1+Number.EPSILON);return Math.round(m)/r}function n(i){return((""+i).split(".")[1]||"").length}},59421:(j,I,e)=>{"use strict";e.d(I,{H:()=>t,Q:()=>n});const t=i=>Object.keys(i).reduce((s,r)=>(i[r]!==void 0&&(s[r]=i[r]),s),{}),n=i=>typeof i=="object"&&i!==null&&Object.keys(i).length===0},81078:(j,I,e)=>{"use strict";e.d(I,{E:()=>t});const t=n=>({label:n,value:n})},93998:(j,I,e)=>{"use strict";e.d(I,{e:()=>t,f:()=>n});const t=i=>{let s,r,m=Number.MAX_VALUE;for(let d=0;d<i.values.length;d++){const o=i.values[d];if(s!==void 0){const l=o-s;r===void 0&&(m=l),l<m&&(m=l)}s=o}return m},n=i=>{for(let s=0;s<i.values.length;s++){const r=i.values[s];if(r!=null){const m=r.toString();if(m.length===13&&m%1e3!==0)return!0}}return!1}},78968:(j,I,e)=>{"use strict";e.d(I,{Cj:()=>o,S:()=>l});/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function t(a,g){return g&&Object.keys(g).length>0&&(a+="?"+i(g)),a}function n(a,g){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,g?"%20":"+").replace(/[!'()*]/g,function(c){return"%"+c.charCodeAt(0).toString(16).toUpperCase()})}function i(a){const g=[],c=/\[\]$/,h=v=>Object.prototype.toString.call(v)==="[object Array]",f=(v,y)=>{if(y=typeof y=="function"?y():y===null||y===void 0?"":y,typeof y!="boolean")g[g.length]=n(v,!0)+"="+n(y,!0);else{const E=y?"":"="+n("false",!0);g[g.length]=n(v,!0)+E}},b=(v,y)=>{let E,C,u;if(v)if(h(y))for(E=0,C=y.length;E<C;E++)c.test(v)?f(v,y[E]):b(v,y[E]);else if(y&&String(y)==="[object Object]")for(u in y)b(v+"["+u+"]",y[u]);else f(v,y);else if(h(y))for(E=0,C=y.length;E<C;E++)f(y[E].name,y[E].value);else for(u in y)b(u,y[u]);return g};return b("",a).join("&")}function s(a,g){if(g!=null&&g!==""){const c=a.indexOf("?");c!==-1?a.length-c>1&&(a+="&"):a+="?",a+=g}return a}function r(){const g=window.location.search.substring(1).split("&"),c={};for(const h of g){const f=h.split("=");if(f.length>1){const b=decodeURIComponent(f[0]),v=decodeURIComponent(f[1]);b in c?c[b]=[...c[b],v]:c[b]=[v]}else if(f.length===1){const b=decodeURIComponent(f[0]);c[b]=!0}}return c}function m(a){const g={},c=(a||"").split("&");for(let h of c){let f,b,v;if(h&&(b=h=h.replace(/\+/g,"%20"),f=h.indexOf("="),f!==-1&&(b=h.substring(0,f),v=h.substring(f+1)),b=d(b),b!==void 0)){v=v!==void 0?d(v):!0;let y;typeof v=="string"&&v!==""?y=v==="true"||v==="false"?v==="true":v:y=v,g.hasOwnProperty(b)?Array.isArray(g[b])?g[b].push(v):g[b]=[g[b],isNaN(y)?v:y]:g[b]=isNaN(y)?v:y}}return g}function d(a){try{return decodeURIComponent(a)}catch{return}}const o={renderUrl:t,toUrlParams:i,appendQueryToUrl:s,getUrlSearchParams:r,parseKeyValue:m};function l(a,g){return g!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(a)}},6850:(j,I,e)=>{"use strict";e.d(I,{HU:()=>m,Jb:()=>d,vh:()=>s});var t=e(77104),n=e(95676),i=e(51046);function s(l,a){for(const g of l)switch(g.type){case i.H.ValueToText:if(a==null)continue;const c=g.options[a];if(c)return c;break;case i.H.RangeToText:if(a==null)continue;const h=parseFloat(a);if(isNaN(h)||!isNaN(g.options.from)&&h<g.options.from||!isNaN(g.options.to)&&h>g.options.to)continue;return g.options.result;case i.H.RegexToText:if(a==null||typeof a!="string")continue;const v=(0,n.jO)(g.options.pattern);if(a.match(v)){const y={...g.options.result};return y.text!=null&&(y.text=a.replace(v,g.options.result.text||"")),y}case i.H.SpecialValue:switch(g.options.match){case i.e.Null:{if(a==null)return g.options.result;break}case i.e.NaN:{if(isNaN(a))return g.options.result;break}case i.e.NullAndNaN:{if(isNaN(a)||a==null)return g.options.result;break}case i.e.True:{if(a===!0||a==="true")return g.options.result;break}case i.e.False:{if(a===!1||a==="false")return g.options.result;break}case i.e.Empty:{if(a==="")return g.options.result;break}}}return null}function r(l){return(typeof l=="number"||typeof l=="string"&&l.trim()!=="")&&!isNaN(l)}var m=(l=>(l[l.ValueToText=1]="ValueToText",l[l.RangeToText=2]="RangeToText",l))(m||{});function d(l,a){const g=[];let c=l.mappingType;if(l.mappingType||(l.valueMaps&&l.valueMaps.length?c=1:l.rangeMaps&&l.rangeMaps.length&&(c=2)),c===1)for(let h=0;h<l.valueMaps.length;h++){const f=l.valueMaps[h];g.push(o({...f,id:h,type:i.H.ValueToText},l.fieldConfig?.defaults?.thresholds||a))}else if(c===2)for(let h=0;h<l.rangeMaps.length;h++){const f=l.rangeMaps[h];g.push(o({...f,id:h,type:i.H.RangeToText},l.fieldConfig?.defaults?.thresholds||a))}return g}function o(l,a){const g={type:i.H.ValueToText,options:{}},c=[];let h;const f=parseFloat(l.text);if(a&&!isNaN(f)){const b=(0,t.m1)(f,a.steps);b&&b.color&&(h=b.color)}switch(l.type){case 1:case i.H.ValueToText:l.value!=null&&(l.value==="null"?c.push({type:i.H.SpecialValue,options:{match:i.e.Null,result:{text:l.text,color:h}}}):g.options[String(l.value)]={text:l.text,color:h});break;case 2:case i.H.RangeToText:l.from==="null"||l.to==="null"?c.push({type:i.H.SpecialValue,options:{match:i.e.Null,result:{text:l.text,color:h}}}):c.push({type:i.H.RangeToText,options:{from:+l.from,to:+l.to,result:{text:l.text,color:h}}});break}return Object.keys(g.options).length>0&&c.unshift(g),c[0]}},83505:(j,I,e)=>{"use strict";e.d(I,{_:()=>i,b:()=>n});const t="__searchFilter",n=s=>s&&typeof s=="string"?s.indexOf(t)!==-1:!1,i=s=>{const{query:r,wildcardChar:m}=s;if(!n(r))return{};let{options:d}=s;return d=d||{searchFilter:""},{__searchFilter:{value:d.searchFilter?`${d.searchFilter}${m}`:`${m}`,text:""}}}},35412:(j,I,e)=>{"use strict";e.d(I,{x:()=>r});var t=e(6857),n=e(80852),i=e(58885),s=e(24321);function r({whileLoading:m,source:d}){return(0,t.T)((0,n.H)(200).pipe((0,i.h)(m),(0,s.R)(d)),d)}},3877:(j,I,e)=>{"use strict";e.d(I,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(21609)},51455:(j,I,e)=>{"use strict";e.d(I,{Aq:()=>n,Yh:()=>d,dT:()=>r,i7:()=>o});var t=e(21609);function n(l,a){const g=["","K","M","B","T"],c=(0,t.Qj)(1e3,g);return(h,f,b)=>{if(h==null)return{text:""};const v=h<0;v&&(h=Math.abs(h));const y=c(h,f,b);return a?y.suffix=y.suffix!==void 0?`${y.suffix}${l}`:void 0:y.prefix=l,v&&(y.prefix=`-${y.prefix?.length?y.prefix:""}`),y}}const i=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=i.indexOf("");function r(l){const a=i.findIndex(g=>g.normalize("NFKD")===l.normalize("NFKD"));return a<0?0:a-s}const m=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function d(l,a=0){const g=m.map(c=>" "+c+l);return(0,t.Qj)(1024,g,a)}function o(l,a=0){const g=i.map(c=>" "+c+l);return(0,t.Qj)(1e3,g,s+a)}},21609:(j,I,e)=>{"use strict";e.d(I,{IR:()=>pe,zc:()=>Q,Cf:()=>we,QW:()=>Je,Td:()=>_e,br:()=>ne,SP:()=>Se,Qj:()=>ie,SR:()=>ye,vb:()=>Ce,FH:()=>Z,bn:()=>ce,q2:()=>q});var t=e(89949);function n(Ue,$e){return Ue===null?{text:""}:{text:Z(Ue,$e),suffix:"%"}}function i(Ue,$e){return Ue===null?{text:""}:{text:Z(100*Ue,$e),suffix:"%"}}function s(Ue,$e){if(Ue==null)return{text:""};const Qe=r(Ue,$e);return Qe.text.substring(0,1)==="-"?Qe.text="-0x"+Qe.text.substring(1):Qe.text="0x"+Qe.text,Qe}function r(Ue,$e){return Ue==null?{text:""}:{text:parseFloat(Z(Ue,$e)).toString(16).toUpperCase()}}function m(Ue,$e){return Ue==null?{text:""}:{text:Ue.toExponential($e??void 0)}}var d=e(60956),o=e(65347),l=e(99633),a=(Ue=>(Ue.Year="year",Ue.Month="month",Ue.Week="week",Ue.Day="day",Ue.Hour="hour",Ue.Minute="minute",Ue.Second="second",Ue.Millisecond="millisecond",Ue))(a||{});const g=["year","month","week","day","hour","minute","second","millisecond"],c={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function h(Ue,$e){return Ue===null?{text:""}:Math.abs(Ue)<1e3?{text:Z(Ue,$e),suffix:" ns"}:Math.abs(Ue)<1e6?ce(Ue/1e3,$e," \xB5s"):Math.abs(Ue)<1e9?ce(Ue/1e6,$e," ms"):Math.abs(Ue)<6e10?ce(Ue/1e9,$e," s"):Math.abs(Ue)<36e11?ce(Ue/6e10,$e," min"):Math.abs(Ue)<864e11?ce(Ue/36e11,$e," hour"):ce(Ue/864e11,$e," day")}function f(Ue,$e){return Ue===null?{text:""}:Math.abs(Ue)<1e3?{text:Z(Ue,$e),suffix:" \xB5s"}:Math.abs(Ue)<1e6?ce(Ue/1e3,$e," ms"):ce(Ue/1e6,$e," s")}function b(Ue,$e,Qe){return Ue===null?{text:""}:Math.abs(Ue)<1e3?{text:Z(Ue,$e),suffix:" ms"}:Math.abs(Ue)<6e4?ce(Ue/1e3,$e," s"):Math.abs(Ue)<36e5?ce(Ue/6e4,$e," min"):Math.abs(Ue)<864e5?ce(Ue/36e5,$e," hour"):Math.abs(Ue)<31536e6?ce(Ue/864e5,$e," day"):ce(Ue/31536e6,$e," year")}function v(Ue,$e){if(Ue!=null&&$e!==null&&$e!==void 0)return Ue-$e}function y(Ue,$e){return Ue===null?{text:""}:Ue===0?{text:"0",suffix:" s"}:Math.abs(Ue)<1e-6?ce(Ue*1e9,$e," ns"):Math.abs(Ue)<.001?ce(Ue*1e6,$e," \xB5s"):Math.abs(Ue)<1?ce(Ue*1e3,$e," ms"):Math.abs(Ue)<60?{text:Z(Ue,$e),suffix:" s"}:Math.abs(Ue)<3600?ce(Ue/60,$e," min"):Math.abs(Ue)<86400?ce(Ue/3600,$e," hour"):Math.abs(Ue)<604800?ce(Ue/86400,$e," day"):Math.abs(Ue)<31536e3?ce(Ue/604800,$e," week"):ce(Ue/31556900,$e," year")}function E(Ue,$e){return Ue===null?{text:""}:Math.abs(Ue)<60?{text:Z(Ue,$e),suffix:" min"}:Math.abs(Ue)<1440?ce(Ue/60,$e," hour"):Math.abs(Ue)<10080?ce(Ue/1440,$e," day"):Math.abs(Ue)<604800?ce(Ue/10080,$e," week"):ce(Ue/525948,$e," year")}function C(Ue,$e){return Ue===null?{text:""}:Math.abs(Ue)<24?{text:Z(Ue,$e),suffix:" hour"}:Math.abs(Ue)<168?ce(Ue/24,$e," day"):Math.abs(Ue)<8760?ce(Ue/168,$e," week"):ce(Ue/8760,$e," year")}function u(Ue,$e){return Ue===null?{text:""}:Math.abs(Ue)<7?{text:Z(Ue,$e),suffix:" day"}:Math.abs(Ue)<365?ce(Ue/7,$e," week"):ce(Ue/365,$e," year")}function D(Ue,$e,Qe){if(Ue===null)return{text:""};if(Ue===0)return{text:"0",suffix:" "+Qe+"s"};if(Ue<0){const De=D(-Ue,$e,Qe);return De.suffix||(De.suffix=""),De.suffix+=" ago",De}Ue*=c[Qe]*1e3;const tt=[];let lt=!1,Me=0;$e!=null&&(Me=$e);for(let De=0;De<g.length&&Me>=0;De++){const We=c[g[De]]*1e3,qe=Ue/We;if(qe>=1||lt){lt=!0;const st=Math.floor(qe),dt=g[De]+(st!==1?"s":"");tt.push(st+" "+dt),Ue=Ue%We,Me--}}return{text:tt.join(", ")}}function P(Ue,$e){if(Ue===null)return{text:""};if(Ue<1e3)return{text:(0,l.zh)(Ue).format("SSS\\m\\s")};if(Ue<6e4){let Me="ss\\s:SSS\\m\\s";return $e===0&&(Me="ss\\s"),{text:(0,l.zh)(Ue).format(Me)}}if(Ue<36e5){let Me="mm\\m:ss\\s:SSS\\m\\s";return $e===0?Me="mm\\m":$e===1&&(Me="mm\\m:ss\\s"),{text:(0,l.zh)(Ue).format(Me)}}let Qe="mm\\m:ss\\s:SSS\\m\\s";const tt=`${("0"+Math.floor((0,l.Ks)(Ue,"milliseconds").asHours())).slice(-2)}h`;return $e===0?Qe="":$e===1?Qe="mm\\m":$e===2&&(Qe="mm\\m:ss\\s"),{text:Qe?`${tt}:${(0,l.zh)(Ue).format(Qe)}`:tt}}function S(Ue,$e){return D(Ue,$e,"millisecond")}function x(Ue,$e){return D(Ue,$e,"second")}function M(Ue){if(Ue<0){const Me=M(-Ue);return Me.suffix||(Me.suffix=""),Me.suffix+=" ago",Me}const $e=[],Qe=Math.floor(Ue/3600),tt=Math.floor(Ue%3600/60),lt=Math.floor(Ue%3600%60);return Qe>9?$e.push(""+Qe):$e.push("0"+Qe),tt>9?$e.push(""+tt):$e.push("0"+tt),lt>9?$e.push(""+lt):$e.push("0"+lt),{text:$e.join(":")}}function R(Ue){if(Ue<0){const lt=R(-Ue);return lt.suffix||(lt.suffix=""),lt.suffix+=" ago",lt}let $e="";const Qe=Math.floor(Ue/(24*3600));Qe>0&&($e=Qe+" d ");const tt=M(Ue-Qe*24*3600);return{text:$e+tt.text}}function O(Ue,$e){return y(Ue/100,$e)}function T(Ue,$e){return P(Ue,$e)}function U(Ue,$e){return P(Ue*1e3,$e)}function L(Ue,$e){return(Qe,tt,lt,Me)=>$e&&(0,l.CQ)().isSame(Qe,"day")?{text:(0,d.dq)(Qe,{format:$e,timeZone:Me})}:{text:(0,d.dq)(Qe,{format:Ue,timeZone:Me})}}const V=L("YYYY-MM-DD HH:mm:ss"),w=L("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),K=L("MM/DD/YYYY h:mm:ss a"),B=L("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function W(){return L((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function _(){return L((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,o.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function k(Ue,$e,Qe,tt,lt){return{text:(0,d.dq)(Ue,{format:lt?o.U6.fullDateMS:o.U6.fullDate,timeZone:tt})}}function A(Ue,$e,Qe,tt){return{text:(0,d.E8)(Ue,{timeZone:tt})}}var z=e(51455);const H=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:q("")},{name:"String",id:"string",fn:Ce},{name:"short",id:"short",fn:ie(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:i},{name:"Humidity (%H)",id:"humidity",fn:q("%H")},{name:"Decibel",id:"dB",fn:q("dB")},{name:"Candela (cd)",id:"candela",fn:(0,z.i7)("cd")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:r},{name:"Scientific notation",id:"sci",fn:m},{name:"Locale format",id:"locale",fn:Se},{name:"Pixels",id:"pixel",fn:q("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:q("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:q("f/sec\xB2")},{name:"G unit",id:"accG",fn:q("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:q("\xB0")},{name:"Radians",id:"radian",fn:q("rad")},{name:"Gradian",id:"grad",fn:q("grad")},{name:"Arc Minutes",id:"arcmin",fn:q("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:q("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:q("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:q("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:q("mi\xB2")},{name:"Acres (ac)",id:"acres",fn:q("ac")},{name:"Hectares (ha)",id:"hectares",fn:q("ha")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,z.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,z.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,z.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,z.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,z.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,z.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,z.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,z.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:q("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:q("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:q("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:q("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:q("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:q("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:q("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:q("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:q("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:q("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:q("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:q("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,z.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,z.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,z.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,z.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,z.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,z.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,z.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,z.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,z.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,z.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,z.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,z.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,z.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,z.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,z.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,z.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,z.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,z.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,z.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,z.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,z.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,z.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,z.Aq)("\u0111",!0)},{name:"Turkish Lira (\u20BA)",id:"currencyTRY",fn:(0,z.Aq)("\u20BA",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,z.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,z.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,z.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,z.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,z.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,z.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,z.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,z.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,z.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,z.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,z.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,z.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,z.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,z.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,z.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,z.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,z.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,z.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,z.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,z.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,z.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,z.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,z.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,z.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,z.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,z.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,z.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,z.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,z.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,z.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,z.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,z.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,z.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,z.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,z.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,z.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,z.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,z.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,z.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:V},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:w},{name:"Datetime US",id:"dateTimeAsUS",fn:K},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:B},{name:"Datetime local",id:"dateTimeAsLocal",fn:W()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:_()},{name:"Datetime default",id:"dateTimeAsSystem",fn:k},{name:"From Now",id:"dateTimeFromNow",fn:A}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,z.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,z.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,z.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,z.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,z.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:q("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,z.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,z.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,z.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,z.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,z.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,z.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,z.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,z.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,z.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,z.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,z.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,z.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,z.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,z.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,z.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,z.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,z.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,z.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,z.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,z.i7)("dBm")},{name:"Milliohm (m\u03A9)",id:"mohm",fn:(0,z.i7)("\u03A9",-1)},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,z.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,z.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,z.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,z.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,z.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,z.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,z.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,z.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,z.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,z.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,z.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,z.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:q("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:q("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:q("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:q("cfm")},{name:"Litre/hour",id:"litreh",fn:q("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:q("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:q("mL/min")},{name:"Lux (lx)",id:"lux",fn:q("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,z.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,z.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,z.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,z.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,z.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,z.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,z.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,z.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,z.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,z.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,z.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,z.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,z.i7)("g")},{name:"pound (lb)",id:"masslb",fn:q("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,z.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:q("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,z.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:q("in")},{name:"feet (ft)",id:"lengthft",fn:q("ft")},{name:"meter (m)",id:"lengthm",fn:(0,z.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,z.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:q("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,z.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,z.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,z.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,z.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:q("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:q("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:q('"Hg')},{name:"PSI",id:"pressurepsi",fn:ie(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,z.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,z.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,z.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,z.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,z.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,z.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,z.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,z.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,z.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,z.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,z.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,z.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,z.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:q("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,z.i7)("Hz")},{name:"Kilohertz (kHz)",id:"rotkhz",fn:(0,z.i7)("kHz",1)},{name:"Megahertz (MHz)",id:"rotmhz",fn:(0,z.i7)("MHz",2)},{name:"Gigahertz (GHz)",id:"rotghz",fn:(0,z.i7)("GHz",3)},{name:"Radians per second (rad/s)",id:"rotrads",fn:q("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:q("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:q("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:q("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:q("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,z.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:h},{name:"microseconds (\xB5s)",id:"\xB5s",fn:f},{name:"milliseconds (ms)",id:"ms",fn:b},{name:"seconds (s)",id:"s",fn:y},{name:"minutes (m)",id:"m",fn:E},{name:"hours (h)",id:"h",fn:C},{name:"days (d)",id:"d",fn:u},{name:"duration (ms)",id:"dtdurationms",fn:S},{name:"duration (s)",id:"dtdurations",fn:x},{name:"duration (hh:mm:ss)",id:"dthms",fn:M},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:R},{name:"Timeticks (s/100)",id:"timeticks",fn:O},{name:"clock (ms)",id:"clockms",fn:T},{name:"clock (s)",id:"clocks",fn:U}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:ye("c/s")},{name:"ops/sec (ops)",id:"ops",fn:ye("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:ye("req/s")},{name:"reads/sec (rps)",id:"rps",fn:ye("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:ye("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:ye("io/s")},{name:"events/sec (eps)",id:"eps",fn:ye("evt/s")},{name:"messages/sec (mps)",id:"mps",fn:ye("msg/s")},{name:"records/sec (rps)",id:"recps",fn:ye("rec/s")},{name:"rows/sec (rps)",id:"rowsps",fn:ye("rows/s")},{name:"counts/min (cpm)",id:"cpm",fn:ye("c/m")},{name:"ops/min (opm)",id:"opm",fn:ye("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:ye("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:ye("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:ye("wr/m")},{name:"events/min (epm)",id:"epm",fn:ye("evts/m")},{name:"messages/min (mpm)",id:"mpm",fn:ye("msgs/m")},{name:"records/min (rpm)",id:"recpm",fn:ye("rec/m")},{name:"rows/min (rpm)",id:"rowspm",fn:ye("rows/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:q("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:q("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:q("mph")},{name:"knot (kn)",id:"velocityknot",fn:q("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,z.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,z.i7)("L")},{name:"cubic meter",id:"m3",fn:q("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:q("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:q("dm\xB3")},{name:"gallons",id:"gallons",fn:q("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:pe("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:pe("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:pe("On","Off")}]}];function Q(Ue){return`${Ue.prefix??""}${Ue.text}${Ue.suffix??""}`}let X=[];const te={};let oe=!1;function Z(Ue,$e){if(Ue===null)return"";if(Ue===Number.NEGATIVE_INFINITY||Ue===Number.POSITIVE_INFINITY)return Ue.toLocaleString();if($e==null&&($e=le(Ue)),Ue===0)return Ue.toFixed($e);const Qe=$e?Math.pow(10,Math.max(0,$e)):1,tt=String(Math.round(Ue*Qe)/Qe);if(tt.indexOf("e")!==-1||Ue===0)return tt;const lt=tt.indexOf("."),Me=lt===-1?0:tt.length-lt-1;return Me<$e?(Me?tt:tt+".")+String(Qe).slice(1,$e-Me+1):tt}function le(Ue){const $e=Math.abs(Ue);let tt=-Math.floor(Math.log($e)/Math.LN10)+1;const lt=Math.pow(10,-tt);return $e/lt>2.25&&++tt,Ue%1===0&&(tt=0),Math.max(0,tt)}function ce(Ue,$e,Qe){return{text:Z(Ue,$e),suffix:Qe}}function q(Ue,$e){return(Qe,tt)=>{if(Qe===null)return{text:""};const lt=Z(Qe,tt);return Ue?$e?{text:lt,prefix:Ue}:{text:lt,suffix:" "+Ue}:{text:lt}}}function ne(Ue){return Ue&&Ue.startsWith("bool")}function pe(Ue,$e){return Qe=>({text:Qe?Ue:$e})}const re=(Ue,$e)=>Math.log10($e)/Math.log10(Ue);function ie(Ue,$e,Qe=0){return(tt,lt)=>{if(tt==null)return{text:""};if(tt===Number.NEGATIVE_INFINITY||tt===Number.POSITIVE_INFINITY||isNaN(tt))return{text:tt.toLocaleString()};const Me=tt===0?0:Math.floor(re(Ue,Math.abs(tt))),De=$e[(0,t.clamp)(Qe+Me,0,$e.length-1)];return{text:Z(tt/Ue**(0,t.clamp)(Me,-Qe,$e.length-Qe-1),lt),suffix:De}}}function Se(Ue,$e){return Ue==null?{text:""}:{text:Ue.toLocaleString(void 0,{maximumFractionDigits:$e??void 0})}}function ye(Ue){const Qe=ie(1e3,["","K","M","B","T"]);return(tt,lt,Me)=>{if(tt===null)return{text:""};const De=Qe(tt,lt,Me);return De.suffix+=" "+Ue,De}}function Ce(Ue){return{text:`${Ue}`}}function de(){X=H();for(const Ue of X)for(const $e of Ue.formats)te[$e.id]=$e.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(Ue=>{const $e=te[Ue.to];$e&&(te[Ue.from]=$e)}),oe=!0}function we(Ue){if(!Ue)return q("");oe||de();const $e=te[Ue];if(!$e&&Ue){let Qe=Ue.indexOf(":");if(Qe>0){const tt=Ue.substring(0,Qe),lt=Ue.substring(Qe+1);if(tt==="prefix")return q(lt,!0);if(tt==="suffix")return q(lt,!1);if(tt==="time")return L(lt);if(tt==="si"){const Me=(0,z.dT)(lt.charAt(0)),De=Me===0?lt:lt.substring(1);return(0,z.i7)(De,Me)}if(tt==="count")return ye(lt);if(tt==="currency")return(0,z.Aq)(lt);if(tt==="bool"){if(Qe=lt.indexOf("/"),Qe>=0){const Me=lt.substring(0,Qe),De=lt.substring(Qe+1);return pe(Me,De)}return pe(lt,"-")}}return q(Ue)}return $e}function _e(){return oe||de(),te}function Je(){return oe||de(),X.map(Ue=>({text:Ue.name,submenu:Ue.formats.map($e=>({text:$e.name,value:$e.id}))}))}},21066:(j,I,e)=>{"use strict";e.d(I,{G:()=>t});class t extends Array{get buffer(){return this}set buffer(i){this.length=0;const s=i?.length;if(s){let r=65e3,m=Math.ceil(s/r);for(let d=0;d<m;d++)this.push.apply(this,i.slice(d*r,(d+1)*r))}}constructor(i){super(),this.buffer=i??[]}toJSON(){return[...this]}}},64282:(j,I,e)=>{"use strict";e.d(I,{d:()=>i});var t=e(79866),n=e(36829);class i extends n.G{constructor(r){return super(),this.buffer=r.buffer||[],this.capacity=this.buffer.length,this.tail=r.append!=="head",this.index=0,this.add=this.getAddFunction(),r.capacity&&this.setCapacity(r.capacity),(0,t.U)(this)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?r=>{this.buffer.push(r),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:r=>{this.buffer.unshift(r),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?r=>{this.buffer[this.index]=r,this.index=(this.index+1)%this.buffer.length}:r=>{let m=this.index-1;m<0&&(m=this.buffer.length-1),this.buffer[m]=r,this.index=m}}setCapacity(r){if(this.capacity===r)return;const m=this.toArray();if(r>this.length)this.buffer=m;else if(r<this.capacity){const d=this.length-r;this.tail?this.buffer=m.slice(d,m.length):this.buffer=m.slice(0,m.length-d)}this.capacity=r,this.index=0,this.add=this.getAddFunction()}setAppendMode(r){const m=r!=="head";m!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=m,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(r){return this.buffer[(r+this.index)%this.buffer.length]}set(r,m){this.buffer[(r+this.index)%this.buffer.length]=m}get length(){return this.buffer.length}}},36829:(j,I,e)=>{"use strict";e.d(I,{G:()=>n,s:()=>s});var t=e(58704);class n{*iterator(){for(let m=0;m<this.length;m++)yield this.get(m)}set(m,d){throw"unsupported operation"}add(m){throw"unsupported operation"}push(...m){for(const d of m)this.add(d);return this.length}[Symbol.iterator](){return this.iterator()}forEach(m){return s(this).forEach(m)}map(m){return s(this).map(m)}filter(m){return s(this).filter(m)}at(m){return this.get(m)}toArray(){return(0,t.n)(this)}join(m){return this.toArray().join(m)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...m){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(m){throw new Error("Method not implemented.")}splice(m,d,...o){throw new Error("Method not implemented.")}unshift(...m){throw new Error("Method not implemented.")}fill(m,d,o){throw new Error("Method not implemented.")}copyWithin(m,d,o){throw new Error("Method not implemented.")}[Symbol.unscopables](){throw new Error("Method not implemented.")}slice(m,d){return this.toArray().slice(m,d)}indexOf(m,d){return this.toArray().indexOf(m,d)}lastIndexOf(m,d){return this.toArray().lastIndexOf(m,d)}every(m,d){return this.toArray().every(m,d)}some(m,d){return this.toArray().some(m,d)}reduce(m,d){throw new Error("Method not implemented.")}reduceRight(m,d){throw new Error("Method not implemented.")}find(m,d){return this.toArray().find(m,d)}findIndex(m,d){return this.toArray().findIndex(m,d)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(m,d){return this.toArray().includes(m,d)}flatMap(m,d){return this.toArray().flatMap(m,d)}flat(m){throw new Error("Method not implemented.")}}const i=[];function s(r){return{*[Symbol.iterator](){for(let m=0;m<r.length;m++)yield r.get(m)},forEach(m){for(let d=0;d<r.length;d++)m(r.get(d),d,i)},map(m){const d=[];for(let o=0;o<r.length;o++)d.push(m(r.get(o),o,i));return d},filter(m){const d=[];let o=0;for(const l of this)m(l,o++,i)&&d.push(l);return d}}}},93882:(j,I,e)=>{"use strict";e.d(I,{o:()=>s});var t=e(79866),n=e(36829),i=e(58704);class s extends n.G{constructor(m,d){return super(),this.source=m,this.order=d,(0,t.U)(this)}get length(){return this.source.length}get(m){return this.source.get(this.order[m])}toArray(){return(0,i.n)(this)}toJSON(){return(0,i.n)(this)}getOrderArray(){return this.order}}},91382:(j,I,e)=>{"use strict";e.d(I,{l$:()=>s,Gt:()=>r.G,sq:()=>f,rM:()=>o,dV:()=>m.d,uI:()=>d,$Y:()=>g,rm:()=>h,oH:()=>l.o,sD:()=>n.s});var t=e(79866),n=e(36829),i=e(58704);class s extends n.G{constructor(v=0){return super(),this.length=0,this.source=[],this.length=v,(0,t.U)(this)}setLength(v){if(v>this.length)this.length=v;else if(v<this.length){const y=[];for(const E of this.source)if(y.push(E),E.end>v){E.end=v;break}this.source=y,this.length=v}}append(v){const y={start:this.length,end:this.length+v.length,values:v};return this.length=y.end,this.source.push(y),y}get(v){for(let y=0;y<this.source.length;y++){const E=this.source[y];if(v>=E.start&&v<E.end)return E.values[v-E.start]}}toArray(){return(0,i.n)(this)}toJSON(){return(0,i.n)(this)}}var r=e(21066),m=e(64282);class d extends Array{constructor(v,y){return super(),new Array(y).fill(v)}}class o extends Array{constructor(v,y,E){super();const C=new Array(v.length);for(let u=0;u<C.length;u++)C[u]=E(v[u],y[u]);return C}}var l=e(93882),a=e(21609);class g extends Array{constructor(v,y){return super(),v.map(E=>(0,a.zc)(y(E)))}}var c=e(29241);class h extends Array{constructor(v){super();const y=new Array(v);for(let E=0;E<v;E++)y[E]=E;return y}static newField(v){return{name:"",values:new h(v),type:c.fS.number,config:{min:0,max:v-1}}}}class f extends Array{constructor(v){return super(),v.map(y=>+y)}}},58704:(j,I,e)=>{"use strict";e.d(I,{n:()=>t});function t(n){const i=Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.get(s);return i}},9175:(j,I,e)=>{"use strict";e.d(I,{Si:()=>n,ct:()=>t,fV:()=>i,mR:()=>s});var t=(r=>(r.DashboardView="dashboard-view",r.DataRequest="data-request",r))(t||{});const n=r=>!!r.payload.page,i=r=>!!r.payload.interactionName,s=r=>!!r.payload.experimentId},86312:(j,I,e)=>{"use strict";e.d(I,{SZ:()=>d,ff:()=>m,r_:()=>s,sm:()=>r});var t=e(34667),n=e(26129),i=e(77948);const s=o=>{(0,i.RP)().addEvent({type:i.ee.MetaAnalytics,payload:o})},r=()=>{const o=n.E1.getLocation(),l=`${t.config.appSubUrl??""}${o.pathname}${o.search}${o.hash}`;(0,i.RP)().addEvent({type:i.ee.Pageview,payload:{page:l}})},m=(o,l)=>{(0,i.RP)().addEvent({type:i.ee.Interaction,payload:{interactionName:o,properties:l}})},d=(o,l,a)=>{(0,i.RP)().addEvent({type:i.ee.ExperimentView,payload:{experimentId:o,experimentGroup:l,experimentVariant:a}})}},94372:(j,I,e)=>{"use strict";e.d(I,{q:()=>a});var t=e(27702),n=e(17312),i=e(81538),s=e(74639),r=e(28580),m=e(64022),d=e(97918),o=e(10864),l=e(42751);class a extends t.PureComponent{constructor(c){super(c),this.dataSourceSrv=(0,o.F)(),this.state={},this.onChange=(h,f)=>{if(f.action==="clear"&&this.props.onClear){this.props.onClear();return}const b=this.dataSourceSrv.getInstanceSettings(h.value);b&&(this.props.onChange(b),this.setState({error:void 0}))}}componentDidMount(){const{current:c}=this.props;this.dataSourceSrv.getInstanceSettings(c)||this.setState({error:"Could not find data source "+c})}getCurrentValue(){const{current:c,hideTextValue:h,noDefault:f}=this.props;if(!c&&f)return;const b=this.dataSourceSrv.getInstanceSettings(c);if(b)return{label:b.name.slice(0,37),value:b.uid,imgUrl:b.meta.info.logos.small,hideText:h,meta:b.meta};const v=(0,n.BT)(c);return v===l.hr.uid||v===l.hr.name?{label:v,value:v,hideText:h}:{label:(v??"no name")+" - not found",value:v??void 0,imgUrl:"",hideText:h}}getDataSourceOptions(){const{alerting:c,tracing:h,metrics:f,mixed:b,dashboard:v,variables:y,annotations:E,pluginId:C,type:u,filter:D,logs:P}=this.props;return this.dataSourceSrv.getList({alerting:c,tracing:h,metrics:f,logs:P,dashboard:v,mixed:b,variables:y,annotations:E,pluginId:C,filter:D,type:u}).map(x=>({value:x.name,label:`${x.name}${x.isDefault?" (default)":""}`,imgUrl:x.meta.info.logos.small,meta:x.meta}))}render(){const{autoFocus:c,onBlur:h,onClear:f,openMenuOnFocus:b,placeholder:v,width:y,inputId:E,disabled:C=!1,isLoading:u=!1}=this.props,{error:D}=this.state,P=this.getDataSourceOptions(),S=this.getCurrentValue(),x=typeof f=="function";return t.createElement("div",{"aria-label":"Data source picker select container","data-testid":s.wl.components.DataSourcePicker.container},t.createElement(r.Ph,{isLoading:u,disabled:C,"aria-label":"Select a data source","data-testid":s.wl.components.DataSourcePicker.inputV2,inputId:E||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:x,backspaceRemovesValue:!1,onChange:this.onChange,options:P,autoFocus:c,onBlur:h,width:y,openMenuOnFocus:b,maxMenuHeight:500,placeholder:v,noOptionsMessage:"No datasources found",value:S??null,invalid:!!D||!!this.props.invalid,getOptionLabel:M=>M.meta&&(0,i.x)(M.meta.signature)&&M!==S?t.createElement(m.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,M.label)," ",t.createElement(d.o,{status:M.meta.signature})):M.label||""}))}}a.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},72566:(j,I,e)=>{"use strict";e.d(I,{$:()=>i,Z:()=>n});var t=e(27702);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function i(s){n=s}},22323:(j,I,e)=>{"use strict";e.d(I,{$:()=>n,L:()=>i});var t=e(27702);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function i(s){n=s}},1695:(j,I,e)=>{"use strict";e.d(I,{T:()=>n,t:()=>i});var t=e(27702);let n=({children:s})=>t.createElement("div",null,s);function i(s){n=s}},34667:(j,I,e)=>{"use strict";e.d(I,{O:()=>r,config:()=>a});var t=e(89949),n=e.n(t),i=e(65347),s=e(11391);class r{constructor(c){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.newsFeedEnabled=!0,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.secureSocksDSProxyEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.trustedTypesDefaultPolicyEnabled=!1,this.cspReportOnlyEnabled=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.dashboardPreviews={systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1},this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1,userIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:"",alertStateHistoryBackend:void 0,alertStateHistoryPrimary:void 0},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.disableFrontendSandboxForPlugins=[],this.bootData=c.bootData,this.isPublicDashboardView=c.bootData.settings.isPublicDashboardView;const h={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,h,c),this.buildInfo=c.buildInfo||h.buildInfo,this.dateFormats&&i.U6.update(this.dateFormats),this.buildInfo.env==="development"&&d(this),m(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,s.j)(this.bootData.user.theme),this.bootData.user.lightTheme=this.theme2.isLight,this.theme=this.theme2.v1}}function m(g){const c=g.featureToggles,h="grafana.featureToggles",f=window.localStorage.getItem(h);if(f){const b=f.split(",");for(const v of b){const[y,E]=v.split("="),C=E==="true"||E==="1";c[y]=C,console.log(`Setting feature toggle ${y} = ${C} via localstorage`)}}}function d(g){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((h,f)=>{if(f.startsWith("__feature.")){const b=g.featureToggles,v=f.substring(10),y=h==="true"||h==="";y!==b[f]&&(b[v]=y,console.log(`Setting feature toggle ${v} = ${y} via url`))}})}const o=window.grafanaBootData||{settings:{},user:{},navTree:[]},l=o.settings;l.bootData=o;const a=new r(l)},80549:(j,I,e)=>{"use strict";e.r(I),e.d(I,{CopyPanelEvent:()=>a.EK,DataSourcePicker:()=>R.q,DataSourceWithBackend:()=>C.CK,EchoEventType:()=>r.ee,FakeEchoSrv:()=>r.rX,GrafanaBootConfig:()=>h.O,HealthCheckError:()=>C.ZA,HealthStatus:()=>C.QO,HistoryWrapper:()=>l._i,MetaAnalyticsEventName:()=>f.ct,PanelDataErrorView:()=>P.Z,PanelRenderer:()=>D.$,PluginPage:()=>M.T,RefreshEvent:()=>a.U5,StreamingFrameAction:()=>o.T0,SystemJS:()=>b.i3,ThemeChangedEvent:()=>a.hD,TimeRangeUpdatedEvent:()=>a.md,config:()=>h.config,createDataSourcePluginEventProperties:()=>T,createPluginEventProperties:()=>O,createQueryRunner:()=>x.AQ,featureEnabled:()=>y.v,frameToMetricFindValue:()=>u.S9,getAngularLoader:()=>n.w,getAppEvents:()=>a.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>i.F,getEchoSrv:()=>r.RP,getGrafanaLiveSrv:()=>o.gj,getLegacyAngularInjector:()=>d.V,getLocationSrv:()=>s.w,getPluginComponentExtensions:()=>g.QK,getPluginExtensions:()=>g.I4,getPluginImportUtils:()=>b.bP,getPluginLinkExtensions:()=>g.dj,getRunRequest:()=>x.Pl,getTemplateSrv:()=>m.J,isExperimentViewEvent:()=>f.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>f.fV,isPageviewEvent:()=>f.Si,isPluginExtensionComponent:()=>c.M,isPluginExtensionLink:()=>c.c,loadPluginCss:()=>b.iS,locationSearchToObject:()=>l.Ox,locationService:()=>l.E1,logDebug:()=>E.o7,logError:()=>E.H,logInfo:()=>E.PN,logWarning:()=>E.KE,navigationLogger:()=>l.GQ,registerEchoBackend:()=>r.e6,reportExperimentView:()=>v.SZ,reportInteraction:()=>v.ff,reportMetaAnalytics:()=>v.r_,reportPageview:()=>v.sm,setAngularLoader:()=>n.W,setAppEvents:()=>a.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>i.w,setEchoSrv:()=>r.tz,setGrafanaLiveSrv:()=>o.cA,setLegacyAngularInjector:()=>d.t,setLocationService:()=>l.ZG,setLocationSrv:()=>s.x,setPluginExtensionGetter:()=>g.oI,setPluginImportUtils:()=>b.Qf,setQueryRunnerFactory:()=>x.pD,setRunRequest:()=>x.Iw,setTemplateSrv:()=>m.l,toDataQueryError:()=>S.P,toDataQueryResponse:()=>u.z1,usePluginInteractionReporter:()=>K});var t=e(73289),n=e(9772),i=e(10864),s=e(27380),r=e(77948),m=e(39317),d=e(32416),o=e(43685),l=e(26129),a=e(32713),g=e(82123),c=e(62724),h=e(34667),f=e(9175),b=e(97073),v=e(86312),y=e(80978),E=e(91106),C=e(42751),u=e(35306),D=e(22323),P=e(72566),S=e(40545),x=e(89633),M=e(1695),R=e(94372);function O(W){return{grafana_version:h.config.buildInfo.version,plugin_type:String(W.type),plugin_version:W.info.version,plugin_id:W.id,plugin_name:W.name}}function T(W){return{...O(W.meta),datasource_uid:W.uid}}var U=e(27702),L=e(93752),V=e(58971);const w="grafana_plugin_";function K(){const W=(0,L.g)();return(0,U.useMemo)(()=>{const _=(0,V.v)(W)?T(W.instanceSettings):O(W.meta);return(k,A)=>{if(!B(k))throw new Error(`Interactions reported in plugins should start with: "${w}".`);return(0,v.ff)(k,{...A,..._})}},[W])}function B(W){return W.startsWith(w)&&W.length>w.length}},9772:(j,I,e)=>{"use strict";e.d(I,{W:()=>n,w:()=>i});let t;function n(s){t=s}function i(){return t}},77948:(j,I,e)=>{"use strict";e.d(I,{RP:()=>s,e6:()=>r,ee:()=>t,rX:()=>m,tz:()=>i});var t=(d=>(d.Performance="performance",d.MetaAnalytics="meta-analytics",d.Pageview="pageview",d.Interaction="interaction",d.ExperimentView="experimentview",d.GrafanaJavascriptAgent="grafana-javascript-agent",d))(t||{});let n;function i(d){if(n instanceof m)for(const o of n.buffer)d.addEvent(o.event,o.meta);n=d}function s(){return n||(n=new m),n}const r=d=>{s().addBackend(d)};class m{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(o){}addEvent(o,l){this.buffer.push({event:o,meta:l})}}},26129:(j,I,e)=>{"use strict";e.d(I,{E1:()=>l,GQ:()=>c,Ox:()=>o,ZG:()=>a,_i:()=>d});var t=e(10075),n=e(78968),i=e(58939),s=e(12343),r=e(46414),m=e(34667);class d{constructor(f){this.history=f||t.lX({basename:m.config.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(f,b){const v=this.history.location,y=this.getSearchObject();for(const C of Object.keys(f))f[C]===null||f[C]===void 0?delete y[C]:y[C]=f[C];const E=n.Cj.renderUrl(v.pathname,y);b?this.history.replace(E,this.history.location.state):this.history.push(E,this.history.location.state)}push(f){this.history.push(f)}replace(f){this.history.replace(f)}reload(){const f=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:f?f+1:1}})}getLocation(){return this.history.location}getSearchObject(){return o(this.history.location.search)}update(f){if((0,i.d)("LocationSrv","update","partial, push or replace"),f.partial&&f.query)this.partial(f.query,f.partial);else{const b={pathname:f.path};f.query&&(b.search=n.Cj.toUrlParams(f.query)),f.replace?this.replace(b):this.push(b)}}}function o(h){let f=typeof h=="number"?String(h):h;return f.length>0?f.startsWith("?")?n.Cj.parseKeyValue(f.substring(1)):n.Cj.parseKeyValue(f):{}}let l=new d;const a=h=>{throw new Error("locationService can be only overriden in test environment")},g=(0,s.h)("Router"),c=g.logger;(0,r.x)("location",l,g)},27380:(j,I,e)=>{"use strict";e.d(I,{w:()=>i,x:()=>n});let t;function n(s){t=s}function i(){return t}},89633:(j,I,e)=>{"use strict";e.d(I,{AQ:()=>i,Iw:()=>r,Pl:()=>m,pD:()=>n});let t;const n=d=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=d},i=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function r(d){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=d}function m(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},32713:(j,I,e)=>{"use strict";e.d(I,{EK:()=>r,N$:()=>o,U5:()=>n,Xw:()=>d,hD:()=>i,md:()=>s});var t=e(96509);class n extends t.m{}n.type="refresh";class i extends t.R{}i.type="theme-changed";class s extends t.R{}s.type="time-range-updated";class r extends t.R{}r.type="copy-panel";let m;function d(l){m=l}function o(){return m}},73289:(j,I,e)=>{"use strict";e.d(I,{i:()=>s,jW:()=>i,kW:()=>t});function t(r){return typeof r=="object"&&r!==null&&"status"in r&&"data"in r}let n;const i=r=>{n=r},s=()=>n},10864:(j,I,e)=>{"use strict";e.d(I,{F:()=>i,w:()=>n});let t;function n(s){t=s}function i(){return t}},32416:(j,I,e)=>{"use strict";e.d(I,{V:()=>i,t:()=>n});let t;const n=s=>{t=s},i=()=>t},43685:(j,I,e)=>{"use strict";e.d(I,{T0:()=>t.T0,cA:()=>i,gj:()=>s});var t=e(47838);let n;const i=r=>{n=r},s=()=>n},82123:(j,I,e)=>{"use strict";e.d(I,{I4:()=>r,QK:()=>d,dj:()=>m,oI:()=>i});var t=e(62724);let n;function i(o){if(n)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");n=o}function s(){if(!n)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return n}const r=o=>s()(o),m=o=>{const{extensions:l}=r(o);return{extensions:l.filter(t.c)}},d=o=>{const{extensions:l}=r(o);return{extensions:l.filter(t.M)}}},62724:(j,I,e)=>{"use strict";e.d(I,{M:()=>i,c:()=>n});var t=e(15766);function n(s){return s?s.type===t.D.link&&("path"in s||"onClick"in s):!1}function i(s){return s?s.type===t.D.component&&"component"in s:!1}},39317:(j,I,e)=>{"use strict";e.d(I,{J:()=>i,l:()=>n});let t;const n=s=>{t=s},i=()=>t},42751:(j,I,e)=>{"use strict";e.d(I,{B9:()=>S,CK:()=>P,PI:()=>x,Pr:()=>E,QO:()=>u,ZA:()=>C,hr:()=>y});var t=e(45383),n=e(78209),i=e(6857),s=e(90996),r=e(56469),m=e(68246),d=e(17312),o=e(81087),l=e(66784),a=e(29403),g=e(34667),c=e(10864),h=e(43685),f=e(73289),b=e(47838),v=e(35306);const y=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function E(M){if(!M)return!1;const R=typeof M=="string"?M:M.type;return R===y.type||R===y.name||R==="-100"}class C extends Error{constructor(R,O){super(R),this.details=O,this.name="HealthCheckError"}}var u=(M=>(M.Unknown="UNKNOWN",M.OK="OK",M.Error="ERROR",M))(u||{}),D=(M=>(M.PluginID="X-Plugin-Id",M.DatasourceUID="X-Datasource-Uid",M.DashboardUID="X-Dashboard-Uid",M.PanelID="X-Panel-Id",M.QueryGroupID="X-Query-Group-Id",M.FromExpression="X-Grafana-From-Expr",M))(D||{});class P extends m.MF{constructor(R){super(R),this.streamOptionsProvider=x}query(R){const{intervalMs:O,maxDataPoints:T,queryCachingTTL:U,range:L,requestId:V,hideFromInspector:w=!1}=R;let K=R.targets;this.filterQuery&&(K=K.filter(Q=>this.filterQuery(Q)));let B=!1;const W=new Set,_=new Set,k=K.map(Q=>{let X=this.getRef(),te=this.id,oe=!0;if(E(Q.datasource))return B=!0,{...Q,datasource:y};if(Q.datasource){const Z=(0,c.F)().getInstanceSettings(Q.datasource,R.scopedVars);if(!Z)throw new Error(`Unknown Datasource: ${JSON.stringify(Q.datasource)}`);const le=Z.rawRef??(0,d.iU)(Z),ce=Z.id;(le.uid!==X.uid||te!==ce)&&(X=le,te=ce,oe=!1)}return X.type?.length&&W.add(X.type),X.uid?.length&&_.add(X.uid),{...oe?this.applyTemplateVariables(Q,R.scopedVars):Q,datasource:X,datasourceId:te,intervalMs:O,maxDataPoints:T,queryCachingTTL:U}});if(!k.length)return(0,t.of)({data:[]});const A={queries:k};if(L&&(A.from=L.from.valueOf().toString(),A.to=L.to.valueOf().toString()),g.config.featureToggles.queryOverLive)return(0,h.gj)().getQueryData({request:R,body:A});const z={};z["X-Plugin-Id"]=Array.from(W).join(", "),z["X-Datasource-Uid"]=Array.from(_).join(", ");let H="/api/ds/query?ds_type="+this.type;return B&&(z["X-Grafana-From-Expr"]="true",H+="&expression=true"),V&&(H+=`&requestId=${V}`),R.dashboardUID&&(z["X-Dashboard-Uid"]=R.dashboardUID),R.panelId&&(z["X-Panel-Id"]=`${R.panelId}`),R.queryGroupId&&(z["X-Query-Group-Id"]=`${R.queryGroupId}`),(0,f.i)().fetch({url:H,method:"POST",data:A,requestId:V,hideFromInspector:w,headers:z}).pipe((0,s.w)(Q=>{const X=(0,v.z1)(Q,k);return X.data?.length&&X.data.find(te=>te.meta?.channel)?S(X,R,this.streamOptionsProvider):(0,t.of)(X)}),(0,r.K)(Q=>(0,t.of)((0,v.z1)(Q))))}getRequestHeaders(){const R={};return R["X-Plugin-Id"]=this.type,R["X-Datasource-Uid"]=this.uid,R}interpolateVariablesInQueries(R,O){return R.map(T=>this.applyTemplateVariables(T,O))}applyTemplateVariables(R,O){return R}async getResource(R,O,T){const U=this.getRequestHeaders();return(await(0,n.n)((0,f.i)().fetch({...T,method:"GET",headers:T?.headers?{...T.headers,...U}:U,params:O??T?.params,url:`/api/datasources/uid/${this.uid}/resources/${R}`}))).data}async postResource(R,O,T){const U=this.getRequestHeaders();return(await(0,n.n)((0,f.i)().fetch({...T,method:"POST",headers:T?.headers?{...T.headers,...U}:U,data:O??{...O},url:`/api/datasources/uid/${this.uid}/resources/${R}`}))).data}async callHealthCheck(){return(0,n.n)((0,f.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(R=>R.data).catch(R=>R.data)}async testDatasource(){return this.callHealthCheck().then(R=>R.status==="OK"?{status:"success",message:R.message}:Promise.reject({status:"error",message:R.message,error:new C(R.message,R.details)}))}}function S(M,R,O){const T=(0,h.gj)();if(!T)return(0,t.of)(M);const U=[],L=[];for(const V of M.data){const w=(0,o.H7)(V.meta?.channel);if(w){const K=V;L.push(T.getDataStream({addr:w,buffer:O(R,K),frame:(0,l.Y)(V)}))}else U.push(V)}return U.length&&L.push((0,t.of)({...M,data:U})),L.length===1?L[0]:(0,i.T)(...L)}const x=(M,R)=>{const O={maxLength:M.maxDataPoints??500,action:b.T0.Append};return M.rangeRaw?.to==="now"&&(O.maxDelta=M.range.to.valueOf()-M.range.from.valueOf()),O};P=(0,a.s)(P)},80978:(j,I,e)=>{"use strict";e.d(I,{v:()=>n});var t=e(34667);const n=i=>{const{enabledFeatures:s}=t.config.licenseInfo;return s&&s[i]}},91106:(j,I,e)=>{"use strict";e.d(I,{H:()=>d,KE:()=>r,PN:()=>s,o7:()=>m});var t=e(75308),n=e(91712),i=e(34667);function s(o,l){i.config.grafanaJavascriptAgent.enabled&&t.s.api.pushLog([o],{level:n.in.INFO,context:l})}function r(o,l){i.config.grafanaJavascriptAgent.enabled&&t.s.api.pushLog([o],{level:n.in.WARN,context:l})}function m(o,l){i.config.grafanaJavascriptAgent.enabled&&t.s.api.pushLog([o],{level:n.in.DEBUG,context:l})}function d(o,l){i.config.grafanaJavascriptAgent.enabled&&t.s.api.pushError(o)}},97073:(j,I,e)=>{"use strict";e.d(I,{Qf:()=>d,bP:()=>o,i3:()=>s,iS:()=>r});var t=e(34105),n=e.n(t),i=e(34667);const s=n();function r(l){const a=i.config.bootData.user.lightTheme?l.light:l.dark;return s.import(`${a}!css`)}let m;function d(l){if(m)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");m=l}function o(){if(!m)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return m}},35306:(j,I,e)=>{"use strict";e.d(I,{S9:()=>g,z1:()=>d});var t=e(53933),n=e(66784),i=e(32053),s=e(29241),r=e(40545);const m={severity:"info",text:"Cached response"};function d(c,h){const f={data:[],state:t.Gu.Done},b="traceId"in c?c.traceId:void 0;if(b!=null&&(f.traceIds=[b]),c.data?.results){const v=c.data.results,y=h?.length?h.map(u=>u.refId):Object.keys(v),E=o(c),C=[];for(const u of y){const D=v[u];D&&(D.refId=u,C.push(D))}for(const u of C){if(u.error){const D={refId:u.refId,message:u.error,status:u.status};b!=null&&(D.traceId=b),f.error||(f.error={...D}),f.errors?f.errors.push({...D}):f.errors=[{...D}],f.state=t.Gu.Error}if(u.frames?.length){for(let D of u.frames){E&&(D=l(D));const P=(0,n.vP)(D);P.refId||(P.refId=u.refId),f.data.push(P)}continue}if(u.series?.length)for(const D of u.series)D.refId||(D.refId=u.refId),f.data.push((0,i.g0)(D));if(u.tables?.length)for(const D of u.tables)D.refId||(D.refId=u.refId),f.data.push((0,i.g0)(D))}}return c.status&&c.status!==200&&(f.state!==t.Gu.Error&&(f.state=t.Gu.Error),f.error||(f.error=(0,r.P)(c))),f}function o(c){const h=c?.headers;return!h||!h.get?!1:h.get("X-Cache")==="HIT"}function l(c){return{...c,schema:{...c.schema,fields:[...c.schema?.fields??[]],meta:{...c.schema?.meta,notices:[...c.schema?.meta?.notices??[],m],isCachedResponse:!0}}}}function a(c){const h=d(c);if(h.error?.data?.message)return{status:"error",message:h.error.data.message,details:h.error?.data?.error?{message:h.error.data.error}:void 0};if(h.error?.refId&&h.error?.message)return{status:"error",message:h.error.message};throw c}function g(c){if(!c||!c.length)return[];const h=[];let f=c.fields.find(b=>b.type===s.fS.string);if(f||(f=c.fields.find(b=>b.type!==s.fS.time)),f)for(let b=0;b<f.values.length;b++)h.push({text:""+f.values[b]});return h}},63439:(j,I,e)=>{"use strict";e.d(I,{b:()=>o});var t=e(42844),n=e(27702),i=e(71685),s=e(74639),r=e(66310),m=e(66670),d=e(73453);const o=n.forwardRef(({title:g,onRemove:c,children:h,buttonContent:f,elevated:b,bottomSpacing:v,topSpacing:y,className:E,severity:C="error",...u},D)=>{const P=(0,r.l4)(),x=a(P,C,!!g,b,v,y),M={error:"alert",warning:"alert",info:"status",success:"status"},R=u.role||M[C],O=u["aria-label"]||g;return n.createElement("div",{ref:D,className:(0,t.cx)(x.alert,E),"data-testid":s.wl.components.Alert.alertV2(C),role:R,"aria-label":O,...u},n.createElement("div",{className:x.icon},n.createElement(d.J,{size:"xl",name:l(C)})),n.createElement("div",{className:x.body},n.createElement("div",{className:x.title},g),h&&n.createElement("div",{className:x.content},h)),c&&!f&&n.createElement("div",{className:x.close},n.createElement(m.zx,{"aria-label":"Close alert",icon:"times",onClick:c,type:"button",fill:"text",variant:"secondary"})),c&&f&&n.createElement("div",{className:x.buttonWrapper},n.createElement(m.zx,{"aria-label":"Close alert",variant:"secondary",onClick:c,type:"button"},f)))});o.displayName="Alert";const l=g=>{switch(g){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},a=(g,c,h,f,b,v)=>{const y=g.colors[c],E=g.shape.borderRadius(),C=(0,i.Z)(y.border).setAlpha(.2).toString();return{alert:(0,t.css)({label:"alert",flexGrow:1,position:"relative",borderRadius:E,display:"flex",flexDirection:"row",alignItems:"stretch",background:y.transparent,boxShadow:f?g.shadows.z3:"none",padding:g.spacing(1,2),border:`1px solid ${C}`,marginBottom:g.spacing(b??2),marginTop:g.spacing(v??0),"&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:g.colors.background.primary,zIndex:-1}}),icon:(0,t.css)({padding:g.spacing(1,2,0,0),color:y.text,display:"flex"}),title:(0,t.css)({fontWeight:g.typography.fontWeightMedium}),body:(0,t.css)({padding:g.spacing(1,0),flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",overflowWrap:"break-word",wordBreak:"break-word"}),content:(0,t.css)({paddingTop:h?g.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),buttonWrapper:(0,t.css)({marginLeft:g.spacing(1),display:"flex",alignItems:"center",alignSelf:"center"}),close:(0,t.css)({position:"relative",color:g.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},32170:(j,I,e)=>{"use strict";e.d(I,{h:()=>h});var t=e(42844),n=e(89949),i=e(27702),s=e(66310),r=e(22209),m=e(28676);const d=i.memo(()=>{const b=(0,s.wW)(o);return i.createElement("div",{className:b.ellipsis},i.createElement("span",{className:b.firstDot},"."),i.createElement("span",{className:b.secondDot},"."),i.createElement("span",{className:b.thirdDot},"."))});d.displayName="EllipsisAnimated";const o=()=>({ellipsis:(0,t.css)({display:"inline"}),firstDot:(0,t.css)({animation:`${l} 2s linear infinite`}),secondDot:(0,t.css)({animation:`${a} 2s linear infinite`}),thirdDot:(0,t.css)({animation:`${g} 2s linear infinite`})}),l=(0,t.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,a=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,g=(0,t.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,c=2*1e3;function h(b){const{invalid:v,loading:y,onFinishChange:E,saveErrorMessage:C="Error saving this value",error:u,children:D,disabled:P,...S}=b,[x,M]=i.useState({isLoading:!1,showSuccess:!1,showError:v}),R=(0,i.useRef)(null);i.useEffect(()=>{let V;if(x.showSuccess){const w=x.showError?0:c;V=setTimeout(()=>{M({...x,showSuccess:!1})},w)}return()=>{window.clearTimeout(V)}},[x]);const O=(0,i.useCallback)(V=>{v||(M({...x,isLoading:!0,showSuccess:!1}),E(V).then(()=>{M({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{M({...x,isLoading:!1,showError:!0})}))},[v,x,E]),T=(0,i.useMemo)(()=>(0,n.debounce)(O,600,{leading:!1}),[O]),U=v||x.showError||void 0,L=(0,s.wW)(f);return i.createElement(i.Fragment,null,i.createElement(r.g,{...S,loading:y||void 0,invalid:U,disabled:P,error:u||x.showError&&C,ref:R,className:L.widthFitContent},i.cloneElement(D(V=>{T(V)}))),x.isLoading&&i.createElement(m.K,{referenceElement:R.current,placement:"right",alternativePlacement:"bottom"},"Saving ",i.createElement(d,null)),x.showSuccess&&i.createElement(m.K,{suffixIcon:"check",referenceElement:R.current,placement:"right",alternativePlacement:"bottom"},"Saved!"))}h.displayName="AutoSaveField";const f=()=>({widthFitContent:(0,t.css)({width:"fit-content"})})},25357:(j,I,e)=>{"use strict";e.d(I,{C:()=>d});var t=e(42844),n=e(27702),i=e(71685),s=e(66310),r=e(73453),m=e(80011);const d=n.memo(({icon:l,color:a,text:g,tooltip:c,className:h,...f})=>{const b=(0,s.wW)((0,n.useCallback)(y=>o(y,a),[a])),v=n.createElement("div",{className:(0,t.cx)(b.wrapper,h),...f},l&&n.createElement(r.J,{name:l,size:"sm"}),g);return c?n.createElement(m.u,{content:c,placement:"auto"},v):v});d.displayName="Badge";const o=(l,a)=>{let g=l.visualization.getColorByName(a),c="",h="",f="";return l.isDark?(h=(0,i.Z)(g).setAlpha(.15).toString(),c=(0,i.Z)(g).darken(30).toString(),f=(0,i.Z)(g).lighten(15).toString()):(h=(0,i.Z)(g).setAlpha(.15).toString(),c=(0,i.Z)(g).lighten(20).toString(),f=(0,i.Z)(g).darken(20).toString()),{wrapper:(0,t.css)({display:"inline-flex",padding:"1px 4px",borderRadius:l.shape.radius.default,background:h,border:`1px solid ${c}`,color:f,fontWeight:l.typography.fontWeightRegular,gap:"2px",fontSize:l.typography.bodySmall.fontSize,lineHeight:l.typography.bodySmall.lineHeight,alignItems:"center"})}}},24919:(j,I,e)=>{"use strict";e.d(I,{xf:()=>D});var t=e(42844),n=e(27702),i=e(71685),s=e(34239),r=e(90482),m=e(5168),d=e(21609),o=e(93666),l=e(58192),a=e(74639),g=e(64167),c=e(11724),h=e(66670),f=e(70944);const b=18,v=50,y=150,E=1.5,C=1,u=10;class D extends n.PureComponent{render(){const{onClick:K,className:B,theme:W}=this.props,{title:_}=this.props.value,k=x(this.props);return K?n.createElement("button",{type:"button",style:k.wrapper,onClick:K,className:(0,t.cx)((0,h.gN)(W),B)},n.createElement("div",{style:k.title},_),this.renderBarAndValue()):n.createElement("div",{style:k.wrapper,className:B},_&&n.createElement("div",{style:k.title},_),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:K,showUnfilled:B,valueDisplayMode:W}=this.props,_=T(this.props);return n.createElement("div",{style:_.wrapper},W!==g.M8.Hidden&&n.createElement(f.W,{"data-testid":a.wl.components.Panels.Visualization.BarGauge.valueV2,value:K,style:_.value}),B&&n.createElement("div",{style:_.emptyBar}),n.createElement("div",{style:_.bar}))}renderRetroBars(){const{display:K,field:B,value:W,itemSpacing:_,alignmentFactors:k,orientation:A,lcdCellWidth:z,text:H,valueDisplayMode:Q,theme:X}=this.props,{valueHeight:te,valueWidth:oe,maxBarHeight:Z,maxBarWidth:le,wrapperWidth:ce,wrapperHeight:q}=M(this.props),ne=B.min??s.Hx,pe=B.max??s.Z3,re=P(A),ie=pe-ne,Se=re?Z:le,ye=_,Ce=Math.floor(Se/z),de=Math.floor((Se-ye*Ce)/Ce),we=L(this.props),Je=V(k||W,we,oe,te,A,H),Ue={width:`${ce}px`,height:`${q}px`,display:"flex"};re?(Ue.flexDirection="column-reverse",Ue.alignItems="center"):(Ue.flexDirection="row",Ue.alignItems="center",Je.justifyContent="flex-end");const $e=[];for(let Qe=0;Qe<Ce;Qe++){const tt=ne+ie/Ce*Qe,lt=R(tt,W,K),Me={borderRadius:X.shape.radius.default};lt.isLit?Me.backgroundImage=`radial-gradient(${lt.background} 10%, ${lt.backgroundShade})`:Me.backgroundColor=lt.background,re?(Me.height=`${de}px`,Me.width=`${le}px`,Me.marginTop=`${ye}px`):(Me.width=`${de}px`,Me.height=`${Z}px`,Me.marginRight=`${ye}px`),$e.push(n.createElement("div",{key:Qe.toString(),style:Me}))}return n.createElement("div",{style:Ue},$e,Q!==g.M8.Hidden&&n.createElement(f.W,{"data-testid":a.wl.components.Panels.Visualization.BarGauge.valueV2,value:W,style:Je}))}}D.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:g.QH.Gradient,orientation:r.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:m.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function P(w){return w===r.wm.Vertical}function S(w){const{height:K,width:B,alignmentFactors:W,orientation:_,text:k}=w,A=W?W.title:w.value.title;if(!A)return{fontSize:0,width:0,height:0,placement:"above"};if(P(_)){const oe=k?.titleSize??14;return{fontSize:oe,width:B,height:oe*E,placement:"below"}}if(K>40){if(k?.titleSize)return{fontSize:k?.titleSize,width:0,height:k.titleSize*E,placement:"above"};const Z=Math.max(Math.min(K*.45,v),17);return{fontSize:Z/E,width:0,height:Z,placement:"above"}}const Q=Math.max(K*.6,b)/E,X=(0,c.X1)(A,Q),te=Math.min(X.width+15,B*.4);return{fontSize:k?.titleSize??Q,height:0,width:te,placement:"left"}}function x(w){const K={display:"flex",overflow:"hidden",width:"100%"},B=S(w),W={fontSize:`${B.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return P(w.orientation)?(K.flexDirection="column-reverse",W.textAlign="center"):B.placement==="above"?K.flexDirection="column":(K.flexDirection="row",W.width=`${B.width}px`,W.textAlign="right",W.paddingRight="10px"),{wrapper:K,title:W}}function M(w){const{height:K,width:B,orientation:W,text:_,alignmentFactors:k,valueDisplayMode:A}=w,z=S(w),H=k??w.value,Q=(0,d.zc)(H);let X=0,te=0,oe=0,Z=0,le=0,ce=0;const q=_?.valueSize??Math.max(z.fontSize,12),pe=(0,c.X1)(Q,q).width+u*2;return P(W)?(_?.valueSize?oe=_.valueSize*C:oe=Math.min(Math.max(K*.1,b),v),Z=B,A===g.M8.Hidden&&(oe=0,Z=0),X=K-(z.height+oe),te=B,le=B,ce=K-z.height):(A===g.M8.Hidden?(oe=0,Z=0):(oe=K-z.height,Z=Math.max(Math.min(B*.2,y),pe)),X=K-z.height,te=B-Z-z.width,z.placement==="above"?(le=B,ce=K-z.height):(le=B-z.width,ce=K)),{valueWidth:Z,valueHeight:oe,maxBarWidth:te,maxBarHeight:X,wrapperHeight:ce,wrapperWidth:le}}function R(w,K,B){if(w===null)return{background:o.R,border:o.R};const W=B?B(w).color:null;return W?K===null||isNaN(K.numeric)||w!==null&&w>K.numeric?{background:(0,i.Z)(W).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,i.Z)(W).setAlpha(.95).toRgbString(),backgroundShade:(0,i.Z)(W).setAlpha(.55).toRgbString(),border:(0,i.Z)(W).setAlpha(.9).toRgbString(),isLit:!0}:{background:o.R,border:o.R}}function O(w,K,B){const W=Math.min((w-K)/(B-K),1);return isNaN(W)?0:W}function T(w){const{displayMode:K,field:B,value:W,alignmentFactors:_,orientation:k,theme:A,text:z}=w,{valueWidth:H,valueHeight:Q,maxBarHeight:X,maxBarWidth:te}=M(w),oe=B.min??s.Hx,Z=B.max??s.Z3,le=O(W.numeric,oe,Z),ce=L(w),q=W.color??o.R,pe=V(_||W,ce,H,Q,k,z),re=K==="basic",ie={display:"flex",flexGrow:1},Se={borderRadius:A.shape.radius.default,position:"relative",zIndex:1},ye={background:A.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:A.shape.radius.default,position:"relative"};if(P(k)){const Ce=Math.max(le*X,1);ie.flexDirection="column",ie.justifyContent="flex-end",Se.transition="height 1s",Se.height=`${Ce}px`,Se.width=`${te}px`,ye.bottom="-3px",ye.width=`${H}px`,re?(Se.background=`${(0,i.Z)(q).setAlpha(.35).toRgbString()}`,Se.borderTop=`2px solid ${q}`):Se.background=U(w,X)}else{const Ce=Math.max(le*te,1);ie.flexDirection="row-reverse",ie.justifyContent="flex-end",ie.alignItems="stretch",Se.transition="width 1s",Se.height=`${X}px`,Se.width=`${Ce}px`,ye.left="-3px",ye.height=`${Q}px`,re?(Se.background=`${(0,i.Z)(q).setAlpha(.35).toRgbString()}`,Se.borderRight=`2px solid ${q}`):Se.background=U(w,te)}return{wrapper:ie,bar:Se,value:pe,emptyBar:ye}}function U(w,K){const{field:B,value:W,orientation:_,theme:k}=w,A=P(_)?"0deg":"90deg",z=B.min,H=B.max;let Q="",X=0,te=(0,l.QY)(B.color?.mode);if(te.id===o.S.Thresholds){const oe=B.thresholds;for(let Z=0;Z<oe.steps.length;Z++){const le=oe.steps[Z],ce=w.theme.visualization.getColorByName(le.color),q=oe.mode===m.H.Percentage?le.value/100:O(le.value,z,H),ne=q*K,pe=Math.round(ne-(ne-X)/2),re=oe.mode===m.H.Percentage?z+(H-z)*q:le.value;if(Q==="")Q=`linear-gradient(${A}, ${ce}, ${ce}`;else{if(W.numeric<re)break;X=ne,Q+=` ${pe}px, ${ce}`}}return Q+")"}if(te.isContinuous&&te.getColors){const oe=te.getColors(k);for(let Z=0;Z<oe.length;Z++){const le=oe[Z];if(Q==="")Q=`linear-gradient(${A}, ${le} 0px`;else{const q=Z/(oe.length-1)*K;Q+=`, ${le} ${q}px`}}return Q+")"}return W.color??o.R}function L(w){if(w.valueDisplayMode==="text")return w.theme.colors.text.primary;const{value:K}=w;return K.color?K.color:o.R}function V(w,K,B,W,_,k){const A={color:K,height:`${W}px`,width:`${B}px`,display:"flex",alignItems:"center",lineHeight:C};let z=B;const H=(0,d.zc)(w);return P(_)?(A.fontSize=k?.valueSize??(0,c.MX)(H,z,W,C),A.justifyContent="center"):(A.fontSize=k?.valueSize??(0,c.MX)(H,z-u*2,W,C),A.justifyContent="flex-end",A.paddingLeft=`${u}px`,A.paddingRight=`${u}px`,z-=u),A}},50323:(j,I,e)=>{"use strict";e.d(I,{w6:()=>T,pc:()=>x,IG:()=>M,ap:()=>R,jG:()=>O});var t=e(42844),n=e(27702),i=e(66670),s=e(70944),r=e(71685),m=e(90482),d=e(29241),o=e(21609),l=e(64167),a=e(5354),g=e(11724),c=e(61398);const h=1.2,f=30,b=500;class v{constructor(L){this.props=L;const{width:V,height:w,value:K,text:B}=L;this.valueColor=K.color??"gray",this.panelPadding=w>100?12:8,this.textValues=S(L),this.justifyCenter=P(L.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=V-this.panelPadding*2,this.maxTextHeight=w-this.panelPadding*2,B&&(B.titleSize&&(this.titleFontSize=B.titleSize,this.titleToAlignTo=void 0),B.valueSize&&(this.valueFontSize=B.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const L={fontSize:`${this.titleFontSize}px`,lineHeight:h};return this.props.parentOrientation===m.wm.Horizontal&&this.justifyCenter&&(L.paddingRight="0.75ch"),(this.props.colorMode===x.Background||this.props.colorMode===x.BackgroundSolid)&&(L.color=(0,a.bM)(this.valueColor,this.props.theme.isDark)),L}getValueStyles(){const L={fontSize:this.valueFontSize,fontWeight:b,lineHeight:h,position:"relative",zIndex:1};switch(this.justifyCenter&&(L.textAlign="center"),this.props.colorMode){case x.Value:L.color=this.valueColor;break;case x.Background:case x.BackgroundSolid:L.color=(0,a.bM)(this.valueColor,this.props.theme.isDark);break;case x.None:L.color=this.props.theme.colors.text.primary;break}return L}getValueAndTitleContainerStyles(){const L={display:"flex"};return this.justifyCenter&&(L.alignItems="center",L.justifyContent="center",L.flexGrow=1),L}getPanelStyles(){const{width:L,height:V,theme:w,colorMode:K}=this.props,B={width:`${L}px`,height:`${V}px`,padding:`${this.panelPadding}px`,borderRadius:w.shape.borderRadius(),position:"relative",display:"flex"},W=w.isDark?1:-.7;switch(K){case x.Background:const _=(0,r.Z)(this.valueColor).darken(15*W).spin(8).toRgbString(),k=(0,r.Z)(this.valueColor).darken(5*W).spin(-8).toRgbString();B.background=`linear-gradient(120deg, ${_}, ${k})`;break;case x.BackgroundSolid:B.background=(0,r.Z)(this.valueColor).toString();break;case x.Value:B.background="transparent";break}return this.justifyCenter&&(B.alignItems="center",B.flexDirection="row"),B}renderChart(){const{sparkline:L,colorMode:V}=this.props;if(!L||L.y?.type!==d.fS.number)return null;let w,K;switch(V){case x.Background:case x.BackgroundSolid:w="rgba(255,255,255,0.4)",K=(0,r.Z)(this.valueColor).brighten(40).toRgbString();break;case x.None:case x.Value:default:K=this.valueColor,w=(0,r.Z)(this.valueColor).setAlpha(.2).toRgbString();break}const B={custom:{drawStyle:l.l8.Line,lineWidth:1,fillColor:w,lineColor:K}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(c.b,{height:this.chartHeight,width:this.chartWidth,sparkline:L,config:B,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class y extends v{constructor(L){super(L);const V=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,g.MX)(this.valueToAlignTo,this.maxTextWidth*V,this.maxTextHeight,h,void 0,b)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,g.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,h,f),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const L=super.getValueAndTitleContainerStyles();return L.flexDirection="row",L.alignItems="center",L.flexGrow=1,this.justifyCenter||(L.justifyContent="space-between"),L}renderChart(){return null}getPanelStyles(){const L=super.getPanelStyles();return L.alignItems="center",L}}class E extends v{constructor(L){super(L);const{width:V,height:w}=L,K=.5,B=.6,W=1-B,_=.4;this.chartWidth=V,this.chartHeight=w*K,this.titleToAlignTo?.length&&(this.titleFontSize=(0,g.MX)(this.titleToAlignTo,this.maxTextWidth*B,this.maxTextHeight*_,h,f)),this.valueToAlignTo.length&&(this.valueFontSize=(0,g.MX)(this.valueToAlignTo,this.maxTextWidth*W,this.maxTextHeight*K,h,void 0,b))}getValueAndTitleContainerStyles(){const L=super.getValueAndTitleContainerStyles();return L.flexDirection="row",L.flexGrow=1,this.justifyCenter||(L.justifyContent="space-between"),L}getPanelStyles(){const L=super.getPanelStyles();return L.flexDirection="row",L.justifyContent="space-between",L}}class C extends v{constructor(L){super(L);const{width:V,height:w}=L,K=.15,B=.25;let W=0;this.chartHeight=w*B,this.chartWidth=V,this.titleToAlignTo?.length&&(this.titleFontSize=(0,g.MX)(this.titleToAlignTo,this.maxTextWidth,w*K,h,f),W=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,g.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-W,h,void 0,b)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=w-this.titleFontSize*h-this.valueFontSize*h}getValueAndTitleContainerStyles(){const L=super.getValueAndTitleContainerStyles();return L.flexDirection="column",L.justifyContent="center",L}getPanelStyles(){const L=super.getPanelStyles();return L.flexDirection="column",L}}class u extends v{constructor(L){super(L);const{height:V}=L,w=.15;let K=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,g.MX)(this.titleToAlignTo,this.maxTextWidth,V*w,h,f),K=this.titleFontSize*h),this.valueToAlignTo.length&&(this.valueFontSize=(0,g.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-K,h,void 0,b)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const L=super.getValueAndTitleContainerStyles();return L.flexDirection="column",L.flexGrow=1,L}renderChart(){return null}getPanelStyles(){const L=super.getPanelStyles();return L.alignItems="center",L}}function D(U){const{width:L,height:V,sparkline:w}=U;return L/V>2.5?V>50&&w&&w.y.values.length>1?new E(U):new y(U):V>100&&w&&w.y.values.length>1?new C(U):new u(U)}function P(U,L){return U===R.Center?!0:(L??"").length===0}function S(U){const{value:L,alignmentFactors:V,count:w}=U;let{textMode:K}=U;const B=V?V.title:L.title,W=(0,o.zc)(V||L);switch(K===O.Auto&&(w??1)===1&&(K=O.Value),K){case O.Name:return{...L,title:void 0,prefix:void 0,suffix:void 0,text:L.title||"",titleToAlignTo:void 0,valueToAlignTo:B??"",tooltip:(0,o.zc)(L)};case O.Value:return{...L,title:void 0,titleToAlignTo:void 0,valueToAlignTo:W,tooltip:L.title};case O.None:return{numeric:L.numeric,color:L.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${L.title}
Value: ${(0,o.zc)(L)}`};case O.ValueAndName:default:return{...L,titleToAlignTo:B,valueToAlignTo:W}}}var x=(U=>(U.Background="background",U.BackgroundSolid="background_solid",U.None="none",U.Value="value",U))(x||{}),M=(U=>(U.None="none",U.Line="line",U.Area="area",U))(M||{}),R=(U=>(U.Auto="auto",U.Center="center",U))(R||{}),O=(U=>(U.Auto="auto",U.Value="value",U.ValueAndName="value_and_name",U.Name="name",U.None="none",U))(O||{});class T extends n.PureComponent{render(){const{onClick:L,className:V,hasLinks:w,theme:K}=this.props,B=D(this.props),W=B.getPanelStyles(),_=B.getValueAndTitleContainerStyles(),k=B.getValueStyles(),A=B.getTitleStyles(),z=B.textValues,H=w?void 0:z.tooltip;return L?n.createElement("button",{type:"button",className:(0,t.cx)((0,i.gN)(K),V),style:W,onClick:L,title:H},n.createElement("div",{style:_},z.title&&n.createElement("div",{style:A},z.title),n.createElement(s.W,{value:z,style:k})),B.renderChart()):n.createElement("div",{className:V,style:W,title:H},n.createElement("div",{style:_},z.title&&n.createElement("div",{style:A},z.title),n.createElement(s.W,{value:z,style:k})),B.renderChart())}}T.defaultProps={justifyMode:"auto"}},36162:(j,I,e)=>{"use strict";e.d(I,{_:()=>d});var t=e(42844),n=e(27702),i=e(3819),s=e.n(i),r=e(66310),m=e(77709);const d=(0,n.forwardRef)(({name:l,value:a,hidden:g,facets:c,onClick:h,className:f,loading:b,searchTerm:v,active:y,style:E,title:C,highlightParts:u,...D},P)=>{const S=(0,r.l4)(),x=o(S),M=v?[v]:[],R=(0,n.useCallback)(T=>{h&&!g&&h(l,a,T)},[h,l,g,a]);let O=a||l;return c&&(O=`${O} (${c})`),n.createElement("button",{key:O,ref:P,onClick:R,style:E,title:C||O,type:"button",role:"option","aria-selected":!!y,className:(0,t.cx)(x.base,y&&x.active,b&&x.loading,g&&x.hidden,f,h&&!g&&x.hover),...D},u!==void 0?n.createElement(m.H,{text:O,highlightClassName:x.matchHighLight,highlightParts:u}):n.createElement(s(),{textToHighlight:O,searchWords:M,autoEscape:!0,highlightClassName:x.matchHighLight}))});d.displayName="Label";const o=l=>({base:(0,t.css)({display:"inline-block",cursor:"pointer",fontSize:l.typography.size.sm,lineHeight:l.typography.bodySmall.lineHeight,backgroundColor:l.colors.background.secondary,color:l.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:l.spacing(.5),borderRadius:l.shape.borderRadius(),border:"none",marginRight:l.spacing(1),marginBottom:l.spacing(.5)}),loading:(0,t.css)({fontWeight:l.typography.fontWeightMedium,backgroundColor:l.colors.primary.shade,color:l.colors.text.primary,animation:"pulse 3s ease-out 0s infinite normal forwards","@keyframes pulse":{"0%":{color:l.colors.text.primary},"50%":{color:l.colors.text.secondary},"100%":{color:l.colors.text.disabled}}}),active:(0,t.css)({fontWeight:l.typography.fontWeightMedium,backgroundColor:l.colors.primary.main,color:l.colors.primary.contrastText}),matchHighLight:(0,t.css)({background:"inherit",color:l.components.textHighlight.text,backgroundColor:l.components.textHighlight.background}),hidden:(0,t.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,t.css)({["&:hover"]:{opacity:.85,cursor:"pointer"}})})},66670:(j,I,e)=>{"use strict";e.d(I,{Qj:()=>g,_7:()=>y,c9:()=>b,fW:()=>c,gN:()=>v,zx:()=>a});var t=e(42844),n=e(27702),i=e(66310),s=e(97289),r=e(26468),m=e(73453),d=e(80011);const o=null,l=null,a=n.forwardRef(({variant:E="primary",size:C="md",fill:u="solid",icon:D,fullWidth:P,children:S,className:x,type:M="button",tooltip:R,tooltipPlacement:O,...T},U)=>{const L=(0,i.l4)(),V=c({theme:L,size:C,variant:E,fill:u,fullWidth:P,iconOnly:!S}),w=n.createElement("button",{className:(0,t.cx)(V.button,x),type:M,...T,ref:R?void 0:U},D&&n.createElement(m.J,{name:D,size:C,className:V.icon}),S&&n.createElement("span",{className:V.content},S));return R?n.createElement(d.u,{ref:U,content:R,placement:O},w):w});a.displayName="Button";const g=n.forwardRef(({variant:E="primary",size:C="md",fill:u="solid",icon:D,fullWidth:P,children:S,className:x,onBlur:M,onFocus:R,disabled:O,tooltip:T,tooltipPlacement:U,...L},V)=>{const w=(0,i.l4)(),K=c({theme:w,fullWidth:P,size:C,variant:E,fill:u,iconOnly:!S}),B=(0,t.cx)(K.button,{[(0,t.css)(K.disabled,{pointerEvents:"none"})]:O},x),W=n.createElement("a",{className:B,...L,tabIndex:O?-1:0,ref:T?void 0:V},D&&n.createElement(m.J,{name:D,size:C,className:K.icon}),S&&n.createElement("span",{className:K.content},S));return T?n.createElement(d.u,{ref:V,content:T,placement:U},W):W});g.displayName="LinkButton";const c=E=>{const{theme:C,variant:u,fill:D="solid",size:P,iconOnly:S,fullWidth:x}=E,{height:M,padding:R,fontSize:O}=(0,r.iL)(P,C),T=b(C,u,D),U=f(C,u,D),L=(0,s.getFocusStyles)(C),V=C.spacing.gridSize*R-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:O,fontWeight:C.typography.fontWeightMedium,fontFamily:C.typography.fontFamily,padding:`0 ${V}px`,height:C.spacing(M),lineHeight:`${C.spacing.gridSize*M-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:C.shape.radius.default,"&:focus":L,"&:focus-visible":L,"&:focus:not(:focus-visible)":(0,s.getMouseFocusStyles)(C),...x&&{flexGrow:1,justifyContent:"center"},...T,":disabled":U,"&[disabled]":U}),disabled:(0,t.css)(U),img:(0,t.css)({width:"16px",height:"16px",margin:C.spacing(0,1,0,.5)}),icon:S?(0,t.css)({marginRight:C.spacing(-R/2),marginLeft:C.spacing(-R/2)}):(0,t.css)({marginRight:C.spacing(R/2)}),content:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",height:"100%"})}};function h(E,C,u){let D=C.border,P="transparent",S="transparent";return C.name==="secondary"&&(P=C.border,S=E.colors.emphasize(C.border,.25),D=E.colors.border.strong),u==="outline"?{background:"transparent",color:C.text,border:`1px solid ${D}`,transition:E.transitions.create(["background-color","border-color","color"],{duration:E.transitions.duration.short}),"&:hover":{background:C.transparent,borderColor:E.colors.emphasize(D,.25),color:C.text}}:u==="text"?{background:"transparent",color:C.text,border:"1px solid transparent",transition:E.transitions.create(["background-color","color"],{duration:E.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:C.transparent,textDecoration:"none"}}:{background:C.main,color:C.contrastText,border:`1px solid ${P}`,transition:E.transitions.create(["background-color","box-shadow","border-color","color"],{duration:E.transitions.duration.short}),"&:hover":{background:C.shade,color:C.contrastText,boxShadow:E.shadows.z1,borderColor:S}}}function f(E,C,u){const D={cursor:"not-allowed",boxShadow:"none",color:E.colors.text.disabled,transition:"none"};return u==="text"?{...D,background:"transparent",border:"1px solid transparent"}:u==="outline"?{...D,background:"transparent",border:`1px solid ${E.colors.border.weak}`}:{...D,background:E.colors.action.disabledBackground,border:"1px solid transparent"}}function b(E,C,u){switch(C){case"secondary":return h(E,E.colors.secondary,u);case"destructive":return h(E,E.colors.error,u);case"success":return h(E,E.colors.success,u);case"primary":default:return h(E,E.colors.primary,u)}}const v=E=>(0,t.css)({background:"transparent",color:E.colors.text.primary,border:"none",padding:0}),y=E=>(0,t.css)({background:"transparent",border:"none",padding:0,fontFamily:"inherit",color:"inherit",height:"100%","&:hover":{background:"transparent",color:"inherit"}})},77720:(j,I,e)=>{"use strict";e.d(I,{h:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=(0,n.forwardRef)(({className:m,children:d,...o},l)=>{const a=(0,i.wW)(r);return n.createElement("div",{ref:l,className:(0,t.cx)("button-group",a.wrapper,m),...o},d)});s.displayName="ButtonGroup";const r=m=>({wrapper:(0,t.css)({display:"flex","> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRightWidth:0}})})},77075:(j,I,e)=>{"use strict";e.d(I,{f:()=>s});var t=e(42844),n=e(27702),i=e(80402);const s=({className:m,children:d})=>{const o=r();return n.createElement("div",{className:(0,t.cx)(o,m)},d)},r=(0,i.B)(()=>(0,t.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}}))},58964:(j,I,e)=>{"use strict";e.d(I,{O:()=>a});var t=e(42844),n=e(63178),i=e(27702),s=e(80402),r=e(66310),m=e(66670),d=e(22839),o=e(73453);const l=(0,s.B)(g=>({popup:(0,t.css)({label:"popup",zIndex:g.zIndex.dropdown}),icons:{right:(0,t.css)({margin:"1px 0 0 4px"}),left:(0,t.css)({margin:"-1px 4px 0 0"})}})),a=g=>{const{onChange:c,className:h,loadData:f,icon:b,buttonProps:v,hideDownIcon:y,variant:E,disabled:C,...u}=g,D=(0,r.l4)(),P=l(D);let S=g.children;return y||(S=[g.children,i.createElement(o.J,{key:"down-icon",name:"angle-down",className:P.icons.right})]),i.createElement(n.Z,{onChange:(0,d.K)(c),loadData:(0,d.p)(f),dropdownClassName:P.popup,...u,expandIcon:null},i.createElement(m.zx,{icon:b,disabled:C,variant:E,...v??{}},S))};a.displayName="ButtonCascader"},60801:(j,I,e)=>{"use strict";e.d(I,{_:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({message:m,callToActionElement:d,footer:o,className:l})=>{const a=(0,i.wW)(r);return n.createElement("div",{className:(0,t.cx)([a.wrapper,l])},m&&n.createElement("div",{className:a.message},m),d,o&&n.createElement("div",{className:a.footer},o))},r=m=>({wrapper:(0,t.css)({label:"call-to-action-card",padding:m.spacing(3),background:m.colors.background.secondary,borderRadius:m.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1}),message:(0,t.css)({marginBottom:m.spacing(3),fontStyle:"italic"}),footer:(0,t.css)({marginTop:m.spacing(3)})})},50230:(j,I,e)=>{"use strict";e.d(I,{L:()=>P,Z:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(97289),r=e(90527);const m=n.createContext(null),d=({disabled:S,href:x,onClick:M,children:R,isSelected:O,className:T,...U})=>{const L=(0,n.useMemo)(()=>n.Children.toArray(R).some(W=>n.isValidElement(W)&&W.type.displayName===o.displayName),[R]),V=S||!M&&!x,w=M&&!S?M:void 0,K=(0,i.l4)(),B=(0,r.$)(K,S,V,O);return n.createElement(r._,{disableEvents:S,disableHover:V,isSelected:O,className:(0,t.cx)(B.container,T),...U},n.createElement(m.Provider,{value:{href:x,onClick:w,disabled:S,isSelected:O}},!L&&n.createElement(o,null),R))},o=({children:S,className:x,"aria-label":M})=>{const R=(0,n.useContext)(m),O=(0,i.wW)(l),{href:T,onClick:U,isSelected:L}=R??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(O.heading,x)},T?n.createElement("a",{href:T,className:O.linkHack,"aria-label":M,onClick:U},S):U?n.createElement("button",{onClick:U,className:O.linkHack,"aria-label":M,type:"button"},S):n.createElement(n.Fragment,null,S),L!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:L}))};o.displayName="Heading";const l=S=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:S.typography.size.md,letterSpacing:"inherit",lineHeight:S.typography.body.lineHeight,color:S.colors.text.primary,fontWeight:S.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:S.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(S),zIndex:1}}})}),a=({children:S,className:x})=>{const M=(0,i.wW)(g);return n.createElement("div",{className:(0,t.cx)(M.tagList,x)},S)};a.displayName="Tags";const g=S=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),c=({children:S,className:x})=>{const M=(0,i.wW)(h);return n.createElement("p",{className:(0,t.cx)(M.description,x)},S)};c.displayName="Description";const h=S=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:S.spacing(1,0,0),color:S.colors.text.secondary,lineHeight:S.typography.body.lineHeight})}),f=({children:S,align:x="start",className:M})=>{const R=(0,i.wW)(b);return n.createElement("div",{className:(0,t.cx)(R.media,M,(0,t.css)({alignSelf:x}))},S)};f.displayName="Figure";const b=S=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:S.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),v=(0,n.memo)(({children:S,className:x,separator:M="|"})=>{const R=(0,i.wW)(y);let O=S;const T=n.Children.toArray(S).filter(Boolean);return T.length?(O=T.map((U,L)=>n.createElement("div",{key:`element_${L}`,className:R.metadataItem},U)),T.length>1&&M&&(O=T.reduce((U,L,V)=>[U,n.createElement("span",{key:`separator_${V}`,className:R.separator},M),L])),n.createElement("div",{className:(0,t.cx)(R.metadata,x)},O)):null});v.displayName="Meta";const y=S=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:S.typography.size.sm,color:S.colors.text.secondary,margin:S.spacing(.5,0,0),lineHeight:S.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${S.spacing(1)}`})}),E=({children:S,disabled:x,variant:M,className:R})=>{const O=(0,i.wW)(C),U=(0,n.useContext)(m)?.disabled||x,L=M==="primary"?O.actions:O.secondaryActions;return n.createElement("div",{className:(0,t.cx)(L,R)},n.Children.map(S,V=>n.isValidElement(V)?(0,n.cloneElement)(V,{disabled:U,...V.props}):null))},C=S=>({actions:(0,t.css)({gridArea:"Actions",marginTop:S.spacing(2),"& > *":{marginRight:S.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:S.colors.text.secondary,marginTtop:S.spacing(2),"& > *":{marginRight:`${S.spacing(1)} !important`}})}),u=({children:S,disabled:x,className:M})=>n.createElement(E,{variant:"primary",disabled:x,className:M},S);u.displayName="Actions";const D=({children:S,disabled:x,className:M})=>n.createElement(E,{variant:"secondary",disabled:x,className:M},S);D.displayName="SecondaryActions";const P=S=>({inner:(0,t.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...l(S),...y(S),...h(S),...b(S),...C(S),...g(S)});d.Heading=o,d.Tags=a,d.Figure=f,d.Meta=v,d.Actions=u,d.SecondaryActions=D,d.Description=c},90527:(j,I,e)=>{"use strict";e.d(I,{$:()=>l,_:()=>o});var t=e(42844),n=e(27702),i=e(66310),s=e(80402),r=e(97289);const m=({children:a,href:g})=>{const{inner:c}=(0,i.wW)(d);return g?n.createElement("a",{className:c,href:g},a):n.createElement(n.Fragment,null,a)},d=a=>({inner:(0,t.css)({display:"flex",width:"100%",padding:a.spacing(2)})}),o=({children:a,disableEvents:g,disableHover:c,isSelected:h,className:f,href:b,...v})=>{const y=(0,i.l4)(),{oldContainer:E}=l(y,g,c,h);return n.createElement("div",{...v,className:(0,t.cx)(E,f)},n.createElement(m,{href:b},a))},l=(0,s.B)((a,g=!1,c=!1,h)=>{const f=h!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:a.spacing(2),background:a.colors.background.secondary,borderRadius:a.shape.borderRadius(),marginBottom:"8px",pointerEvents:g?"none":"auto",transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),...!c&&{"&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(a)},...f&&{cursor:"pointer"},...h&&{outline:`solid 2px ${a.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:a.colors.background.secondary,borderRadius:a.shape.borderRadius(),position:"relative",pointerEvents:g?"none":"auto",marginBottom:a.spacing(1),transition:a.transitions.create(["background-color","box-shadow","border-color","color"],{duration:a.transitions.duration.short}),...!c&&{"&:hover":{background:a.colors.emphasize(a.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":r.getFocusStyles(a)}})}})},97560:(j,I,e)=>{"use strict";e.d(I,{v:()=>g});var t=e(42844),n=e(82152),i=e(63178),s=e(27702),r=e(73453),m=e(1128),d=e(28580),o=e(22839);const l=(0,t.css)({"&:focus":{outline:"none"}}),a="/";class g extends s.PureComponent{constructor(h){super(h),this.flattenOptions=(y,E=[])=>{let C=[];for(const u of y){const D=[...E];D.push(u),u.items?C=[...C,...this.flattenOptions(u.items,D)]:C.push({singleLabel:D[D.length-1].label,label:D.map(P=>P.label).join(this.props.separator||` ${a} `),value:D.map(P=>P.value)})}return C},this.getSearchableOptions=(0,n.Z)(y=>this.flattenOptions(y)),this.onChange=(y,E)=>{const C=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?E.map(u=>u.label).join(this.props.separator||a):E[E.length-1].label;this.setState({rcValue:y,focusCascade:!0,activeLabel:C}),this.props.onSelect(E[E.length-1].value)},this.onSelect=y=>{const E=y.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||"",rcValue:E,isSearching:!1}),this.props.onSelect(E[E.length-1])},this.onCreateOption=y=>{this.setState({activeLabel:y,rcValue:[],isSearching:!1}),this.props.onSelect(y)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=y=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(y.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=y=>{y===""&&this.setState({isSearching:!1})};const f=this.getSearchableOptions(h.options),{rcValue:b,activeLabel:v}=this.setInitialValue(f,h.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:b,activeLabel:v}}setInitialValue(h,f){if(!f)return{rcValue:[],activeLabel:""};for(const b of h){const v=b.value||[];if(v.indexOf(f)===v.length-1)return{rcValue:v,activeLabel:this.props.displayAllSelectedLevels?b.label:b.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:f}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:h,formatCreateLabel:f,placeholder:b,width:v,changeOnSelect:y,options:E}=this.props,{focusCascade:C,isSearching:u,rcValue:D,activeLabel:P}=this.state,S=this.getSearchableOptions(E);return s.createElement("div",null,u?s.createElement(d.Ph,{allowCustomValue:h,placeholder:b,autoFocus:!C,onChange:this.onSelect,onBlur:this.onBlur,options:S,onCreateOption:this.onCreateOption,formatCreateLabel:f,width:v,onInputChange:this.onSelectInputChange}):s.createElement(i.Z,{onChange:(0,o.K)(this.onChange),options:E,changeOnSelect:y,value:D.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},s.createElement("div",{className:l},s.createElement(m.I,{autoFocus:this.props.autoFocus,width:v,placeholder:b,onBlur:this.onBlurCascade,value:P,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:C?s.createElement(r.J,{name:"angle-up"}):s.createElement(r.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}g.defaultProps={changeOnSelect:!0}},22839:(j,I,e)=>{"use strict";e.d(I,{K:()=>t,p:()=>n});const t=r=>(m,d)=>{r&&r(m.map(o=>String(o)),i(d))},n=r=>m=>{r&&r(i(m))},i=r=>r.map(s),s=r=>({value:r.value??"",label:r.label})},8430:(j,I,e)=>{"use strict";e.d(I,{L:()=>n});var t=e(27702);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const r=this.myRef.current;(!r||!r.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:void 0,useCapture:!1}},71585:(j,I,e)=>{"use strict";e.d(I,{m:()=>l});var t=e(42844),n=e(27702),i=e(70610),s=e(66310),r=e(66670),m=e(73453),d=e(28676);const o=2*1e3;function l({onClipboardCopy:c,onClipboardError:h,children:f,getText:b,icon:v,variant:y,...E}){const C=(0,s.wW)(g),[u,D]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let x;return u&&(x=setTimeout(()=>{D(!1)},o)),()=>{window.clearTimeout(x)}},[u]);const P=(0,n.useRef)(null),S=(0,n.useCallback)(async()=>{const x=b();try{await a(x,P),D(!0),c?.(x)}catch(M){h?.(x,M)}},[b,c,h]);return n.createElement(n.Fragment,null,u&&n.createElement(d.K,{placement:"top",referenceElement:P.current},n.createElement(i.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(r.zx,{onClick:S,icon:v,variant:u?"success":y,"aria-label":u?"Copied":void 0,...E,className:(0,t.cx)(C.button,u&&C.successButton,E.className),ref:P},f,u&&n.createElement("div",{className:C.successOverlay},n.createElement(m.J,{name:"check"}))))}const a=async(c,h)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(c);{const f=document.createElement("textarea");h.current?.appendChild(f),f.value=c,f.focus(),f.select(),document.execCommand("copy"),f.remove()}},g=c=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},62499:(j,I,e)=>{"use strict";e.d(I,{s:()=>l});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(62108),m=e(73453),d=e(66310),o=e(97289);const l=({label:g,isOpen:c,onToggle:h,className:f,contentClassName:b,children:v,labelId:y,loading:E=!1,headerDataTestId:C,contentDataTestId:u})=>{const[D,P]=(0,s.useState)(c),S=(0,d.wW)(a),x=O=>{O.target instanceof HTMLElement&&O.target.tagName==="A"||(O.preventDefault(),O.stopPropagation(),h?.(!D),P(!D))},{current:M}=(0,s.useRef)((0,n.uniqueId)()),R=y??`collapse-label-${M}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:x,className:(0,t.cx)(S.header,f)},s.createElement("button",{type:"button",id:`collapse-button-${M}`,className:S.button,onClick:x,"aria-expanded":D&&!E,"aria-controls":`collapse-content-${M}`,"aria-labelledby":R},E?s.createElement(r.$,{className:S.spinner}):s.createElement(m.J,{name:D?"angle-up":"angle-down",className:S.icon})),s.createElement("div",{className:S.label,id:`collapse-label-${M}`,"data-testid":C},g)),D&&s.createElement("div",{id:`collapse-content-${M}`,className:(0,t.cx)(S.content,b),"data-testid":u},v))},a=g=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:g.typography.size.lg,padding:`${g.spacing(.5)} 0`,"&:focus-within":(0,o.getFocusStyles)(g)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:g.colors.text.secondary}),content:(0,t.css)({padding:`${g.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:g.spacing(2)}),label:(0,t.css)({display:"flex"})})},41640:(j,I,e)=>{"use strict";e.d(I,{U:()=>o,y:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(66670),r=e(73453);const m=l=>({collapse:(0,t.css)({label:"collapse",marginBottom:l.spacing(1),backgroundColor:l.colors.background.primary,border:`1px solid ${l.colors.border.weak}`,position:"relative",borderRadius:l.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,t.css)({label:"collapse__body",padding:l.spacing(l.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,t.css)({label:"bodyContentWrapper",flex:1,overflow:"hidden"}),loader:(0,t.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:l.spacing(.5)}),loaderActive:(0,t.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100,left:"-25%",background:l.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,t.css)({label:"collapse__header",padding:l.spacing(1,2,1,2),display:"flex",transition:"all 0.1s linear"}),headerCollapsed:(0,t.css)({label:"collapse__header--collapsed",padding:l.spacing(1,2,1,2)}),headerLabel:(0,t.css)({label:"collapse__header-label",fontWeight:l.typography.fontWeightMedium,marginRight:l.spacing(1),fontSize:l.typography.size.md,display:"flex",flex:"0 0 100%"}),icon:(0,t.css)({label:"collapse__icon",margin:l.spacing(.25,1,0,-1)})}),d=({isOpen:l,onToggle:a,...g})=>{const[c,h]=(0,n.useState)(l);return n.createElement(o,{isOpen:c,collapsible:!0,...g,onToggle:()=>{h(!c),a&&a(!c)}})},o=({isOpen:l,label:a,loading:g,collapsible:c,onToggle:h,className:f,children:b})=>{const v=(0,i.wW)(s.gN),y=(0,i.wW)(m),E=()=>{h&&h(!l)},C=(0,t.cx)([y.collapse,f]),u=g?(0,t.cx)([y.loader,y.loaderActive]):(0,t.cx)([y.loader]),D=c?(0,t.cx)([y.header]):(0,t.cx)([y.headerCollapsed]);return n.createElement("div",{className:C},n.createElement("button",{type:"button",className:(0,t.cx)(v,D),onClick:E},c&&n.createElement(r.J,{className:y.icon,name:l?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([y.headerLabel])},a)),l&&n.createElement("div",{className:(0,t.cx)([y.collapseBody])},n.createElement("div",{className:u}),n.createElement("div",{className:y.bodyContentWrapper},b)))};o.displayName="Collapse"},36631:(j,I,e)=>{"use strict";e.d(I,{Z:()=>l});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(71685),m=e(66310),d=e(1128);const o=(0,s.forwardRef)(({color:c,onChange:h,isClearable:f=!1,onClick:b,onBlur:v,disabled:y,buttonAriaLabel:E,...C},u)=>{const[D,P]=(0,s.useState)(c),[S,x]=(0,s.useState)(c),M=(0,s.useMemo)(()=>(0,n.debounce)(h,100),[]);(0,s.useEffect)(()=>{const T=(0,r.Z)(c);T.isValid()&&c!==S&&(P(T.toString()),x(c))},[c,S]);const R=T=>{const{value:U}=T.currentTarget;if(P(U),U===""&&f){M(U);return}const L=(0,r.Z)(U);L.isValid()&&M(L.toString())},O=T=>{(0,r.Z)(D).isValid()||P(c),v?.(T)};return s.createElement(d.I,{...C,value:D,onChange:R,disabled:y,onClick:b,onBlur:O,addonBefore:s.createElement(a,{onClick:b,ariaLabel:E,disabled:y,color:c}),ref:u})});o.displayName="ColorInput";const l=o,a=({color:c,onClick:h,disabled:f,ariaLabel:b})=>{const v=(0,m.wW)(g);return s.createElement("button",{type:"button",onClick:h,"aria-label":b,disabled:f||!h,className:(0,t.cx)(v,(0,t.css)({backgroundColor:c}))})},g=c=>(0,t.css)({height:"100%",width:`${c.spacing.gridSize*4}px`,borderRadius:`${c.shape.borderRadius()} 0 0 ${c.shape.borderRadius()}`,border:`1px solid ${c.colors.border.medium}`})},56025:(j,I,e)=>{"use strict";e.d(I,{sp:()=>h,zH:()=>c});var t=e(42844),n=e(27702),i=e(66310),s=e(80402),r=e(54826),m=e(71235),d=e(75965),o=e(50361),l=e(79262),a=e(74011);const g=(b,v="ColorPicker")=>{var y;return y=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:E,children:C,onChange:u}=this.props,D=f(E),P=n.createElement(b,{...this.props,children:null,onChange:u});return n.createElement(d.D,{content:P,hideAfter:300},(S,x,M)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(m.J,{...M,referenceElement:this.pickerTriggerRef.current,wrapperClassName:D.colorPicker,onMouseLeave:x,onMouseEnter:S,onKeyDown:R=>(0,r.i)(R,x)}),C?C({ref:this.pickerTriggerRef,showColorPicker:S,hideColorPicker:x}):n.createElement(l.b,{ref:this.pickerTriggerRef,onClick:S,onMouseLeave:x,color:E.visualization.getColorByName(this.props.color||"#000000")})))}},y.displayName=v,y},c=(0,i.HE)(g(o.h,"ColorPicker")),h=(0,i.HE)(g(a.j,"SeriesColorPicker")),f=(0,s.B)(b=>({colorPicker:(0,t.css)({position:"absolute",zIndex:b.zIndex.tooltip,color:b.colors.text.primary,maxWidth:"400px",fontSize:b.typography.size.sm,padding:"15px !important",'& [data-placement^="top"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="bottom"]':{paddingLeft:"0 !important",paddingRight:"0 !important"},'& [data-placement^="left"]':{paddingTop:"0 !important"},'& [data-placement^="right"]':{paddingTop:"0 !important"}})}))},56887:(j,I,e)=>{"use strict";e.d(I,{T:()=>a});var t=e(42844),n=e(27702),i=e(27463),s=e(9393),r=e(96750),m=e(66310),d=e(8430),o=e(36631),l=e(85265);const a=(0,n.forwardRef)(({value:c="",onChange:h,returnColorAs:f="rgb",...b},v)=>{const[y,E]=(0,n.useState)(c),[C,u]=(0,n.useState)(!1),D=(0,m.l4)(),P=(0,m.wW)(g),S=(0,m.wW)(l.W);return(0,s.Z)(x=>{if(x===c)return;if(!x){h("");return}const M=D.visualization.getColorByName(x);h(f==="rgb"?r.asRgbString(M):r.asHexString(M))},500,[y]),n.createElement(d.L,{onClick:()=>u(!1)},n.createElement("div",{className:P.wrapper},C&&!b.disabled&&n.createElement(i.ef,{"data-testid":"color-popover",color:y,onChange:E,className:(0,t.cx)(S.root,P.picker)}),n.createElement(o.Z,{...b,theme:D,color:y,onChange:E,buttonAriaLabel:"Open color picker",onClick:()=>u(!0),onBlur:()=>u(!1),ref:v,isClearable:!0})))});a.displayName="ColorPickerInput";const g=c=>({wrapper:(0,t.css)({position:"relative"}),picker:(0,t.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,t.css)({position:"absolute"})})},50361:(j,I,e)=>{"use strict";e.d(I,{h:()=>y});var t=e(42844),n=e(91546),i=e(27702),s=e(96750),r=e(66310),m=e(80402),d=e(79262),o=e(89949);function l(C,u){const D=new Array(C.length);for(let P=0;P<C.length;P++){const S=C.length-1-P;D[P]=u(C[S],S,C)}return D}const g=({hue:C,selectedColor:u,onColorSelect:D,...P})=>{const S=(0,o.upperFirst)(C.name),x=(0,r.wW)(c);return i.createElement("div",{className:x.colorRow},i.createElement("div",{className:x.colorLabel},S),i.createElement("div",{...P,className:x.swatchRow},l(C.shades,M=>i.createElement(d.b,{key:M.name,"aria-label":M.name,variant:M.primary?d.$.Large:d.$.Small,isSelected:M.name===u,color:M.color,onClick:()=>D(M.name)}))))},c=C=>({colorRow:(0,t.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:C.spacing(2),padding:C.spacing(.5,0),"&:hover":{background:C.colors.background.secondary}}),colorLabel:(0,t.css)({paddingLeft:C.spacing(2),display:"flex",alignItems:"center"}),swatchRow:(0,t.css)({display:"flex",gap:C.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),h=({color:C,onChange:u})=>{const D=(0,r.l4)(),P=(0,r.wW)(f),S=[];for(const x of D.visualization.hues)S.push(i.createElement(g,{key:x.name,selectedColor:C,hue:x,onColorSelect:u}));return i.createElement(i.Fragment,null,i.createElement("div",{className:P.swatches},S),i.createElement("div",{className:P.extraColors},i.createElement(d.b,{isSelected:C==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>u("transparent")}),i.createElement(d.b,{isSelected:C==="text",color:D.colors.text.primary,label:"Text color",onClick:()=>u("text")})))},f=C=>({container:(0,t.css)({display:"flex",flexDirection:"column"}),extraColors:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:C.spacing(1),padding:C.spacing(1,0)}),swatches:(0,t.css)({display:"grid",flexGrow:1})});var b=e(85265);class v extends i.Component{constructor(u){super(u),this.getTabClassName=D=>{const{activePicker:P}=this.state;return`ColorPickerPopover__tab ${P===D&&"ColorPickerPopover__tab--active"}`},this.handleChange=D=>{const{onChange:P,enableNamedColors:S,theme:x}=this.props;if(S)return P(D);P(s.asHexString(x.visualization.getColorByName(D)))},this.onTabChange=D=>()=>this.setState({activePicker:D}),this.renderPicker=()=>{const{activePicker:D}=this.state,{color:P}=this.props;switch(D){case"spectrum":return i.createElement(b.Z,{color:P,onChange:this.handleChange});case"palette":return i.createElement(h,{color:P,onChange:this.handleChange});default:return this.renderCustomPicker(D)}},this.renderCustomPicker=D=>{const{customPickers:P,color:S,theme:x}=this.props;return P?i.createElement(P[D].tabComponent,{color:S,theme:x,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:D}=this.props;return D?i.createElement(i.Fragment,null,Object.keys(D).map(P=>i.createElement("button",{className:this.getTabClassName(P),onClick:this.onTabChange(P),key:P,type:"button"},D[P].name))):null},this.state={activePicker:"palette"}}render(){const{theme:u}=this.props,D=E(u);return i.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},i.createElement("div",{tabIndex:-1,className:D.colorPickerPopover},i.createElement("div",{className:D.colorPickerPopoverTabs},i.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette"),type:"button"},"Colors"),i.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum"),type:"button"},"Custom"),this.renderCustomPickerTabs()),i.createElement("div",{className:D.colorPickerPopoverContent},this.renderPicker())))}}const y=(0,r.HE)(v);y.displayName="ColorPickerPopover";const E=(0,m.B)(C=>({colorPickerPopover:(0,t.css)({borderRadius:C.shape.borderRadius(),boxShadow:C.shadows.z3,background:C.colors.background.primary,border:`1px solid ${C.colors.border.weak}`,".ColorPickerPopover__tab":{width:"50%",textAlign:"center",padding:C.spacing(1,0),background:C.colors.background.secondary,color:C.colors.text.secondary,fontSize:C.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}},".ColorPickerPopover__tab--active":{color:C.colors.text.primary,fontWeight:C.typography.fontWeightMedium,background:C.colors.background.primary}}),colorPickerPopoverContent:(0,t.css)({width:"246px",fontSize:C.typography.bodySmall.fontSize,minHeight:"184px",padding:C.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,t.css)({display:"flex",width:"100%",borderRadius:`${C.shape.borderRadius()} ${C.shape.borderRadius()} 0 0`})}))},79262:(j,I,e)=>{"use strict";e.d(I,{$:()=>d,b:()=>o});var t=e(42844),n=e(91546),i=e(27702),s=e(71685),r=e(74639),m=e(66310),d=(a=>(a.Small="small",a.Large="large",a))(d||{});const o=i.forwardRef(({color:a,label:g,variant:c="small",isSelected:h,"aria-label":f,...b},v)=>{const y=(0,m.l4)(),{isFocusVisible:E,focusProps:C}=(0,n.Fx)(),u=l(y,c,a,E,h),D=!!g,P=`${f||g} color`;return i.createElement("div",{ref:v,className:u.wrapper,"data-testid":r.wl.components.ColorSwatch.name,...b},D&&i.createElement("span",{className:u.label},g),i.createElement("button",{className:u.swatch,...C,"aria-label":P,type:"button"}))}),l=(a,g,c,h,f)=>{const b=(0,s.Z)(c),y=g==="small"?"16px":"32px";let E="none";return b.getAlpha()<.1&&(E=`2px solid ${a.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:a.spacing(1)}),swatch:(0,t.css)({width:y,height:y,background:`${c}`,border:E,borderRadius:a.shape.radius.circle,outlineOffset:"1px",outline:h?`2px solid  ${a.colors.primary.main}`:"none",boxShadow:f?`inset 0 0 0 2px ${c}, inset 0 0 0 4px ${a.colors.getContrastText(c)}`:"none",transition:a.transitions.create(["transform"],{duration:a.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};o.displayName="ColorSwatch"},74011:(j,I,e)=>{"use strict";e.d(I,{j:()=>m,q:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(17752),r=e(50361);const m=l=>{const a=(0,i.wW)(o),{yaxis:g,onToggleAxis:c,color:h,...f}=l,b=c?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.r,{key:"yaxisSwitch",label:"Use right y-axis",className:a.colorPickerAxisSwitch,labelClass:a.colorPickerAxisSwitchLabel,checked:g===2,onChange:()=>{c&&c()}})}}}:void 0;return n.createElement(r.h,{...f,color:h||"#000000",customPickers:b})},d=(0,i.HE)(m),o=()=>({colorPickerAxisSwitch:(0,t.css)({width:"100%"}),colorPickerAxisSwitchLabel:(0,t.css)({display:"flex",flexGrow:1})})},85265:(j,I,e)=>{"use strict";e.d(I,{W:()=>a,Z:()=>g});var t=e(42844),n=e(27702),i=e(27463),s=e(9393),r=e(71685),m=e(96750),d=e(66310),o=e(36631);const l=({color:c,onChange:h})=>{const[f,b]=(0,n.useState)(c);(0,s.Z)(C=>{h(m.asHexString(v.visualization.getColorByName(C)))},500,[f]);const v=(0,d.l4)(),y=(0,d.wW)(a),E=(0,n.useMemo)(()=>f.startsWith("rgba")?f:(0,r.Z)(v.visualization.getColorByName(c)).toRgbString(),[f,v,c]);return n.createElement("div",{className:y.wrapper},n.createElement(i.ef,{className:y.root,color:E,onChange:b}),n.createElement(o.Z,{theme:v,color:E,onChange:b,className:y.colorInput}))},a=c=>({wrapper:(0,t.css)({flexGrow:1}),root:(0,t.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${c.shape.borderRadius(1)} ${c.shape.borderRadius(1)} 0 0`},"&__alpha":{borderRadius:`0 0 ${c.shape.borderRadius(1)} ${c.shape.borderRadius(1)}`},"&__alpha, &__hue":{height:c.spacing(2),position:"relative"},"&__pointer":{height:c.spacing(2),width:c.spacing(2)}}}),colorInput:(0,t.css)({marginTop:c.spacing(2)})}),g=l},55205:(j,I,e)=>{"use strict";e.d(I,{p:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(80402),r=e(66670);class m extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=a=>{a&&a.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=a=>{a&&a.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=a=>{a&&a.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:a,className:g,size:c,disabled:h,confirmText:f,confirmVariant:b,children:v}=this.props,y=o(a),E=(0,t.cx)(g,this.state.showConfirm?y.buttonHide:y.buttonShow,h&&y.buttonDisabled),C=(0,t.cx)(y.confirmButton,this.state.showConfirm?y.confirmButtonShow:y.confirmButtonHide),u=h?()=>{}:this.onClickButton;return n.createElement("span",{className:y.buttonContainer},n.createElement("div",{className:(0,t.cx)(h&&y.disabled)},n.createElement("span",{className:E},typeof v=="string"?n.createElement(r.zx,{size:c,fill:"text",onClick:u,ref:this.mainButtonRef},v):n.cloneElement(v,{onClick:u,ref:this.mainButtonRef}))),n.createElement("span",{className:C},n.createElement(r.zx,{size:c,variant:b,onClick:this.onConfirm,ref:this.confirmButtonRef},f),n.createElement(r.zx,{size:c,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const d=(0,i.HE)(m),o=(0,s.B)(l=>({buttonContainer:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"flex-end"}),buttonDisabled:(0,t.css)({textDecoration:"none",color:l.colors.text.primary,opacity:.65,pointerEvents:"none"}),buttonShow:(0,t.css)({opacity:1,transition:"opacity 0.1s ease",zIndex:2}),buttonHide:(0,t.css)({opacity:0,transition:"opacity 0.1s ease, visibility 0 0.1s",visibility:"hidden",zIndex:0}),confirmButton:(0,t.css)({alignItems:"flex-start",background:l.colors.background.primary,display:"flex",position:"absolute",pointerEvents:"none"}),confirmButtonShow:(0,t.css)({zIndex:1,opacity:1,transition:"opacity 0.08s ease-out, transform 0.1s ease-out",transform:"translateX(0)",pointerEvents:"all"}),confirmButtonHide:(0,t.css)({opacity:0,visibility:"hidden",transition:"opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s",transform:"translateX(100px)"}),disabled:(0,t.css)({cursor:"not-allowed"})}));d.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},d.displayName="ConfirmButton"},15202:(j,I,e)=>{"use strict";e.d(I,{m:()=>s});var t=e(27702),n=e(66670),i=e(55205);const s=({size:r,disabled:m,onConfirm:d,"aria-label":o,closeOnConfirm:l})=>t.createElement(i.p,{confirmText:"Delete",confirmVariant:"destructive",size:r||"md",disabled:m,onConfirm:d,closeOnConfirm:l},t.createElement(n.zx,{"aria-label":o,variant:"destructive",icon:"times",size:r||"sm"}))},3613:(j,I,e)=>{"use strict";e.d(I,{s:()=>l});var t=e(42844),n=e(27702),i=e(74639),s=e(64022),r=e(1128),m=e(66310),d=e(66670),o=e(13741);const l=({isOpen:g,title:c,body:h,description:f,confirmText:b,confirmVariant:v="destructive",confirmationText:y,dismissText:E="Cancel",dismissVariant:C="secondary",alternativeText:u,modalClass:D,icon:P="exclamation-triangle",onConfirm:S,onDismiss:x,onAlternative:M,confirmButtonVariant:R="destructive"})=>{const[O,T]=(0,n.useState)(!!y),U=(0,m.wW)(a),L=(0,n.useRef)(null),V=K=>{T(y?.toLowerCase().localeCompare(K.currentTarget.value.toLowerCase())!==0)};(0,n.useEffect)(()=>{g&&L.current?.focus()},[g]),(0,n.useEffect)(()=>{g&&T(!!y)},[g,y]);const w=async()=>{T(!0);try{await S()}finally{T(!1)}};return n.createElement(o.u,{className:(0,t.cx)(U.modal,D),title:c,icon:P,isOpen:g,onDismiss:x},n.createElement("div",{className:U.modalText},h,f?n.createElement("div",{className:U.modalDescription},f):null,y?n.createElement("div",{className:U.modalConfirmationInput},n.createElement(s.Lh,null,n.createElement(r.I,{placeholder:`Type "${y}" to confirm`,onChange:V}))):null),n.createElement(o.u.ButtonRow,null,n.createElement(d.zx,{variant:C,onClick:x,fill:"outline"},E),n.createElement(d.zx,{variant:R,onClick:w,disabled:O,ref:L,"data-testid":i.wl.pages.ConfirmModal.delete},b),M?n.createElement(d.zx,{variant:"primary",onClick:M},u):null))},a=g=>({modal:(0,t.css)({width:"500px"}),modalText:(0,t.css)({fontSize:g.typography.h5.fontSize,color:g.colors.text.primary}),modalDescription:(0,t.css)({fontSize:g.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:g.spacing(1)})})},14986:(j,I,e)=>{"use strict";e.d(I,{x:()=>m});var t=e(27702),n=e(78089),i=e(74639),s=e(89746),r=e(52995);const m=t.memo(({x:d,y:o,onClose:l,focusOnOpen:a=!0,renderMenuItems:g,renderHeader:c})=>{const h=(0,t.useRef)(null),[f,b]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const u=h.current;if(u){const D=u.getBoundingClientRect(),P=5,S={right:window.innerWidth<d+D.width,bottom:window.innerHeight<o+D.height+P};b({position:"fixed",left:S.right?d-D.width-P:d-P,top:S.bottom?o-D.height-P:o+P})}},[d,o]),(0,n.Z)(h,()=>{l?.()});const v=c?.(),y=g?.(),E=u=>{a&&u(0)},C=u=>{u.key==="Escape"&&(u.preventDefault(),u.stopPropagation(),l?.())};return t.createElement(r.h_,null,t.createElement(s.v,{header:v,ref:h,style:f,ariaLabel:i.wl.components.Menu.MenuComponent("Context"),onOpen:E,onClick:l,onKeyDown:C},y))});m.displayName="ContextMenu"},78383:(j,I,e)=>{"use strict";e.d(I,{z:()=>i});var t=e(27702),n=e(14986);const i=({children:s,renderMenuItems:r,focusOnOpen:m=!0})=>{const[d,o]=(0,t.useState)(!1),[l,a]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:g=>{o(!0),a({x:g.pageX,y:g.pageY})}}),d&&t.createElement(n.x,{onClose:()=>o(!1),x:l.x,y:l.y,renderMenuItems:r,focusOnOpen:m}))}},29372:(j,I,e)=>{"use strict";e.d(I,{$:()=>a,Z:()=>g});var t=e(42844),n=e(27702),i=e(37381),s=e(66310),r=e(89898),m=e.n(r),d=e(73453);const o=({children:h})=>{const[f,b]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),E=(0,n.useRef)(null),C=(0,n.useRef)(null),u=(0,s.wW)(l);return(0,n.useEffect)(()=>{const D=new IntersectionObserver(P=>{P.forEach(S=>{S.target===E.current?b(!S.isIntersecting):S.target===C.current&&y(!S.isIntersecting)})});return[E,C].forEach(P=>{P.current&&D.observe(P.current)}),()=>D.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(u.scrollIndicator,u.scrollTopIndicator,{[u.scrollIndicatorVisible]:f})},n.createElement(d.J,{className:m()(u.scrollIcon,u.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:u.scrollContent},n.createElement("div",{ref:E}),h,n.createElement("div",{ref:C})),n.createElement("div",{className:(0,t.cx)(u.scrollIndicator,u.scrollBottomIndicator,{[u.scrollIndicatorVisible]:v})},n.createElement(d.J,{className:m()(u.scrollIcon,u.scrollBottomIcon),name:"angle-down"})))},l=h=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:h.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:h.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${h.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${h.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),a=({autoHide:h=!1,autoHideTimeout:f=200,setScrollTop:b,className:v,testId:y,autoHeightMin:E="0",autoHeightMax:C="100%",hideTracksWhenNotNeeded:u=!1,hideHorizontalTrack:D,hideVerticalTrack:P,scrollRefCallback:S,showScrollIndicators:x=!1,updateAfterMountMs:M,scrollTop:R,onScroll:O,children:T})=>{const U=(0,n.useRef)(null),L=(0,s.wW)(c);(0,n.useEffect)(()=>{U.current&&S&&S(U.current.view)},[U,S]),(0,n.useEffect)(()=>{U.current&&R!=null&&U.current.scrollTop(R)},[R]),(0,n.useEffect)(()=>{M&&setTimeout(()=>{const A=U.current;A?.update&&A.update()},M)},[M]);function V(A,z,H){return H.style&&z&&(H.style.display="none"),n.createElement("div",{...H,className:A})}const w=(0,n.useCallback)(A=>V("track-horizontal",D,A),[D]),K=(0,n.useCallback)(A=>V("track-vertical",P,A),[P]),B=(0,n.useCallback)(A=>n.createElement("div",{...A,className:"thumb-horizontal"}),[]),W=(0,n.useCallback)(A=>n.createElement("div",{...A,className:"thumb-vertical"}),[]),_=(0,n.useCallback)(A=>(A.style&&A.style.WebkitOverflowScrolling==="touch"&&(A.style.WebkitOverflowScrolling="auto"),n.createElement("div",{...A,className:"scrollbar-view"})),[]),k=(0,n.useCallback)(()=>{U.current&&b&&b(U.current.getValues())},[b]);return n.createElement(i.ZP,{"data-testid":y,ref:U,className:(0,t.cx)(L.customScrollbar,v,{[L.scrollbarWithScrollIndicators]:x}),onScrollStop:k,autoHeight:!0,autoHide:h,autoHideTimeout:f,hideTracksWhenNotNeeded:u,autoHeightMax:C,autoHeightMin:E,renderTrackHorizontal:w,renderTrackVertical:K,renderThumbHorizontal:B,renderThumbVertical:W,renderView:_,onScroll:O},x?n.createElement(o,null,T):T)},g=a,c=h=>({customScrollbar:(0,t.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:h.shape.borderRadius(2),width:`${h.spacing(1)} !important`,right:0,bottom:h.spacing(.25),top:h.spacing(.25)},".track-horizontal":{borderRadius:h.shape.borderRadius(2),height:`${h.spacing(1)} !important`,right:h.spacing(.25),bottom:h.spacing(.25),left:h.spacing(.25)},".thumb-vertical":{background:h.colors.action.focus,borderRadius:h.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:h.colors.action.focus,borderRadius:h.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,t.css)({".scrollbar-view":{position:"static !important"}})})},73e3:(j,I,e)=>{"use strict";e.d(I,{k:()=>i});var t=e(27702),n=e(66670);function i({link:s,buttonProps:r}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?m=>{!(m.ctrlKey||m.metaKey||m.shiftKey)&&s.onClick&&(m.preventDefault(),s.onClick(m))}:void 0},t.createElement(n.zx,{icon:"external-link-alt",variant:"primary",size:"sm",...r},s.title))}},22965:(j,I,e)=>{"use strict";e.d(I,{v:()=>T});var t=e(42844),n=e(6570),i=e.n(n),s=e(27702),r=e(7965),m=e(35719),d=e(10418),o=e(73817),l=e(24094),a=e(3569),g=e(80553),c=e(54916),h=e(66310),f=e(29372),b=e(1128),v=e(52995),y=e(89949),E=e(79812),C=e(59390);const u=L=>({list:(0,t.css)({borderBottom:`1px solid ${L.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,t.css)({background:L.colors.background.primary,width:"250px"}),item:(0,t.css)({background:"none",padding:"2px 8px",color:L.colors.text.primary,cursor:"pointer","&:hover":{background:L.colors.action.hover}}),label:(0,t.css)({color:L.colors.text.secondary}),activeItem:(0,t.css)({background:L.colors.background.secondary,"&:hover":{background:L.colors.background.secondary}}),itemValue:(0,t.css)({fontFamily:L.typography.fontFamilyMonospace,fontSize:L.typography.size.sm})}),D=({suggestions:L,...V})=>{const w=(0,s.useRef)(null);(0,E.Z)(w,()=>{V.onClose&&V.onClose()});const K=(0,s.useMemo)(()=>(0,y.groupBy)(L,W=>W.origin),[L]),B=(0,h.wW)(u);return s.createElement("div",{role:"menu",ref:w,className:B.wrapper},Object.keys(K).map((W,_)=>{const k=_===0?0:Object.keys(K).reduce((A,z,H)=>H>=_?A:A+K[z].length,0);return s.createElement(P,{...V,suggestions:K[W],label:`${(0,y.capitalize)(W)}`,activeIndex:V.activeIndex,activeIndexOffset:k,key:W})}))};D.displayName="DataLinkSuggestions";const P=s.memo(({activeIndex:L,activeIndexOffset:V,label:w,onClose:K,onSuggestionSelect:B,suggestions:W,activeRef:_})=>{const k=(0,h.wW)(u);return s.createElement(s.Fragment,null,s.createElement(C.a,{className:k.list,items:W,renderItem:(A,z)=>{const H=z+V===L;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(k.item,H&&k.activeItem),ref:H?_:void 0,onClick:()=>{B(A)},title:A.documentation},s.createElement("span",{className:k.itemValue},s.createElement("span",{className:k.label},w)," ",A.label))}}))});P.displayName="DataLinkSuggestionsList";class S{getBoundingClientRect(){const V=window.getSelection(),w=V&&V.anchorNode;return w&&w.parentElement?w.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const x=(L,V)=>L-V*Math.floor(L/V),M={builtInVariable:{pattern:/(\${\S+?})/}},R=[(0,c.Z)({onlyIn:L=>L.type==="code_block",getSyntax:()=>"links"},{...i().languages,links:M})],O=L=>({input:(0,b.H)({theme:L,invalid:!1}).input,editor:(0,t.css)({".token.builtInVariable":{color:L.colors.success.text},".token.variable":{color:L.colors.primary.text}}),suggestionsWrapper:(0,t.css)({boxShadow:L.shadows.z2}),wrapperOverrides:(0,t.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),T=(0,s.memo)(({value:L,onChange:V,suggestions:w,placeholder:K="http://your-grafana.com/d/000000010/annotations"})=>{const B=(0,s.useRef)(null),W=(0,h.wW)(O),[_,k]=(0,s.useState)(!1),[A,z]=(0,s.useState)(0),[H,Q]=(0,s.useState)((0,g.l1)(L)),X=(0,m.Z)(H),[te,oe]=(0,s.useState)(0),Z=(0,s.useRef)({showingSuggestions:_,suggestions:w,suggestionsIndex:A,linkUrl:H,onChange:V});Z.current={showingSuggestions:_,suggestions:w,suggestionsIndex:A,linkUrl:H,onChange:V};const le=(0,s.useRef)(null);(0,s.useEffect)(()=>{oe(U(le.current,A))},[A]);const ce=(0,s.useMemo)(()=>new S,[]),q=s.useCallback((ie,Se)=>{if(!Z.current.showingSuggestions)return ie.key==="="||ie.key==="$"||ie.keyCode===32&&ie.ctrlKey?k(!0):Se();switch(ie.key){case"Backspace":case"Escape":return k(!1),z(0);case"Enter":return ie.preventDefault(),pe(Z.current.suggestions[Z.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":ie.preventDefault();const ye=ie.key==="ArrowDown"?1:-1;return z(Ce=>x(Ce+ye,Z.current.suggestions.length));default:return Se()}},[]);(0,s.useEffect)(()=>{X&&X.selection.isFocused&&!H.selection.isFocused&&Z.current.onChange(d.Z.serialize(H))},[H,X]);const ne=s.useCallback(({value:ie})=>{Q(ie)},[]),pe=(ie,Se=B.current)=>{const Ce=re()==="$";ie.origin!==l.L8.Template||ie.value===a.W.includeVars?Se.insertText(`${Ce?"":"$"}{${ie.value}}`):Se.insertText(`${Ce?"":"$"}{${ie.value}:queryparam}`),Q(Se.value),k(!1),z(0),Z.current.onChange(d.Z.serialize(Se.value))},re=()=>{const ie=document.getElementById("data-link-input");let Se="",ye,Ce;return window.getSelection&&(ye=window.getSelection(),ye&&ye.rangeCount>0&&(Ce=ye.getRangeAt(0).cloneRange(),Ce.collapse(!0),Ce.setStart(ie,0),Se=Ce.toString().slice(-1))),Se};return s.createElement("div",{className:W.wrapperOverrides},s.createElement("div",{className:"slate-query-field__wrapper"},s.createElement("div",{id:"data-link-input",className:"slate-query-field"},_&&s.createElement(v.h_,null,s.createElement(r.r,{referenceElement:ce,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:ie,style:Se,placement:ye})=>s.createElement("div",{ref:ie,style:Se,"data-placement":ye,className:W.suggestionsWrapper},s.createElement(f.Z,{scrollTop:te,autoHeightMax:"300px",setScrollTop:({scrollTop:Ce})=>oe(Ce)},s.createElement(D,{activeRef:le,suggestions:Z.current.suggestions,onSuggestionSelect:pe,onClose:()=>k(!1),activeIndex:A}))))),s.createElement(o.ML,{schema:g.Yi,ref:B,placeholder:K,value:Z.current.linkUrl,onChange:ne,onKeyDown:(ie,Se,ye)=>q(ie,ye),plugins:R,className:(0,t.cx)(W.editor,W.input,(0,t.css)({padding:"3px 8px"}))}))))});T.displayName="DataLinkInput";function U(L,V){return(L?.clientHeight??0)*V}},50741:(j,I,e)=>{"use strict";e.d(I,{V:()=>o});var t=e(42844),n=e(27702),i=e(74639),s=e(97902),r=e(78383),m=e(66711),d=e(79655);const o=({children:l,links:a,style:g})=>{const c=[{items:(0,s.R)(a),label:"Data links"}],h=c[0].items.length,f=()=>c.map((v,y)=>n.createElement(m.k,{key:`${v.label}${y}`,label:v.label},(v.items||[]).map(E=>n.createElement(d.s,{key:E.label,url:E.url,label:E.label,target:E.target,icon:E.icon,active:E.active,onClick:E.onClick})))),b=(0,t.css)({cursor:"context-menu"});if(h>1)return n.createElement(r.z,{renderMenuItems:f},({openMenu:v})=>l({openMenu:v,targetClassName:b}));{const v=a()[0];return n.createElement("a",{href:v.href,onClick:v.onClick,target:v.target,title:v.title,style:{...g,overflow:"hidden",display:"flex"},"aria-label":i.wl.components.DataLinksContextMenu.singleLink},l({}))}}},36537:(j,I,e)=>{"use strict";e.d(I,{d:()=>u});var t=e(42844),n=e(89949),i=e(27702),s=e(66310),r=e(80402),m=e(66670),d=e(13741),o=e(97902),l=e(22209),a=e(1128),g=e(42074),c=e(22965);const h=P=>({listItem:(0,t.css)({marginBottom:P.spacing()}),infoText:(0,t.css)({paddingBottom:P.spacing(2),marginLeft:"66px",color:P.colors.text.secondary})}),f=i.memo(({index:P,value:S,onChange:x,suggestions:M,isLast:R})=>{const O=(0,s.wW)(h),T=(V,w)=>{x(P,{...S,url:V},w)},U=V=>{x(P,{...S,title:V.target.value})},L=()=>{x(P,{...S,targetBlank:!S.targetBlank})};return i.createElement("div",{className:O.listItem},i.createElement(l.g,{label:"Title"},i.createElement(a.I,{value:S.title,onChange:U,placeholder:"Show details"})),i.createElement(l.g,{label:"URL",invalid:(0,o.g)(S.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},i.createElement(c.v,{value:S.url,onChange:T,suggestions:M})),i.createElement(l.g,{label:"Open in new tab"},i.createElement(g.r,{value:S.targetBlank||!1,onChange:L})),R&&i.createElement("div",{className:O.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});f.displayName="DataLinkEditor";const b=({link:P,index:S,getSuggestions:x,onSave:M,onCancel:R})=>{const[O,T]=(0,i.useState)(P);return i.createElement(i.Fragment,null,i.createElement(f,{value:O,index:S,isLast:!1,suggestions:x(),onChange:(U,L)=>{T(L)}}),i.createElement(d.u.ButtonRow,null,i.createElement(m.zx,{variant:"secondary",onClick:()=>R(S),fill:"outline"},"Cancel"),i.createElement(m.zx,{onClick:()=>{M(S,O)}},"Save")))};var v=e(59904),y=e(67437);const E=({link:P,onEdit:S,onRemove:x})=>{const M=(0,s.l4)(),R=C(M),{title:O="",url:T=""}=P,U=O.trim()!=="",L=T.trim()!=="",V=(0,o.g)(T);return i.createElement("div",{className:R.wrapper},i.createElement("div",{className:R.titleWrapper},i.createElement("div",{className:(0,t.cx)(R.url,!L&&R.notConfigured,V&&R.errored)},U?O:"Data link title not provided"),i.createElement("div",{className:R.actionButtons},i.createElement(y.h,{name:"pen",onClick:S,tooltip:"Edit data link title"}),i.createElement(y.h,{name:"times",onClick:x,tooltip:"Remove data link title"}))),i.createElement("div",{className:(0,t.cx)(R.url,!L&&R.notConfigured,V&&R.errored),title:T},L?T:"Data link url not provided"),V&&i.createElement(v.S,null,"Explore data link may not work in the future. Please edit."))},C=(0,r.B)(P=>({wrapper:(0,t.css)({marginBottom:P.spacing(2),width:"100%","&:last-child":{marginBottom:0},display:"flex",flexDirection:"column"}),titleWrapper:(0,t.css)({label:"data-links-list-item-title",justifyContent:"space-between",display:"flex",width:"100%",alignItems:"center"}),actionButtons:(0,t.css)({marginLeft:P.spacing(1),display:"flex"}),errored:(0,t.css)({color:P.colors.error.text,fontStyle:"italic"}),notConfigured:(0,t.css)({fontStyle:"italic"}),title:(0,t.css)({color:P.colors.text.primary,fontSize:P.typography.size.sm,fontWeight:P.typography.fontWeightMedium}),url:(0,t.css)({color:P.colors.text.secondary,fontSize:P.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"})})),u=({links:P,onChange:S,getSuggestions:x,data:M})=>{const R=(0,s.l4)(),[O,T]=(0,i.useState)(null),[U,L]=(0,i.useState)(!1),V=D(R),w=P??[],K=O!==null,B=(A,z)=>{if(U)if(z.title.trim()===""&&z.url.trim()===""){L(!1),T(null);return}else T(null),L(!1);const H=(0,n.cloneDeep)(w);H[A]=z,S(H),T(null)},W=()=>{let A=(0,n.cloneDeep)(w);T(A.length),L(!0)},_=A=>{U&&L(!1),T(null)},k=A=>{const z=(0,n.cloneDeep)(w);z.splice(A,1),S(z)};return i.createElement(i.Fragment,null,w.length>0&&i.createElement("div",{className:V.wrapper},w.map((A,z)=>i.createElement(E,{key:`${A.title}/${z}`,index:z,link:A,onChange:B,onEdit:()=>T(z),onRemove:()=>k(z),data:M}))),K&&O!==null&&i.createElement(d.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{_(O)}},i.createElement(b,{index:O,link:U?{title:"",url:""}:w[O],data:M,onSave:B,onCancel:_,getSuggestions:x})),i.createElement(m.zx,{size:"sm",icon:"plus",onClick:W,variant:"secondary"},"Add link"))},D=(0,r.B)(P=>({wrapper:(0,t.css)({marginBottom:P.spacing(2)})}))},90282:(j,I,e)=>{"use strict";e.d(I,{Z:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(73453),r=e(73e3);function m({links:o}){const l=(0,i.wW)(d);if(o.length===1)return n.createElement(r.k,{link:o[0]});const a=o.filter(c=>c.target==="_blank"),g=o.filter(c=>c.target==="_self");return n.createElement(n.Fragment,null,g.map((c,h)=>n.createElement(r.k,{key:h,link:c})),n.createElement("div",{className:l.wrapper},n.createElement("p",{className:l.externalLinksHeading},"External links"),a.map((c,h)=>n.createElement("a",{key:h,href:c.href,target:c.target,className:l.externalLink},n.createElement(s.J,{name:"external-link-alt"}),c.title))))}const d=o=>({wrapper:(0,t.css)({flexBasis:"150px",width:"100px",marginTop:o.spacing(1)}),externalLinksHeading:(0,t.css)({color:o.colors.text.secondary,fontWeight:o.typography.fontWeightRegular,fontSize:o.typography.size.sm,margin:0}),externalLink:(0,t.css)({color:o.colors.text.link,fontWeight:o.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:o.spacing(1)}})})},80143:(j,I,e)=>{"use strict";e.d(I,{O:()=>s});var t=e(27702),n=e(42074),i=e(48024);function s({options:r,onOptionsChange:m}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(i._,{labelWidth:29,label:"Manage alert rules in Alerting UI",disabled:r.readOnly,tooltip:"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."},t.createElement(n.x,{value:r.jsonData.manageAlerts!==!1,onChange:d=>m({...r,jsonData:{...r.jsonData,manageAlerts:d.currentTarget.checked}})}))))))}},43516:(j,I,e)=>{"use strict";e.d(I,{W:()=>d});var t=e(27702),n=e(66670),i=e(48024),s=e(71107),r=e(1128),m=e(60105);const d=({hasCert:o,label:l,onChange:a,onClick:g,placeholder:c})=>t.createElement(s.Z,null,t.createElement(i._,{label:l,labelWidth:14,disabled:o},o?t.createElement(r.I,{type:"text",value:"configured",width:24}):t.createElement(m.K,{rows:7,onChange:a,placeholder:c,required:!0})),o&&t.createElement(n.zx,{variant:"secondary",onClick:g,style:{marginLeft:4}},"Reset"))},93741:(j,I,e)=>{"use strict";e.d(I,{H:()=>c});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(80402),m=e(66670),d=e(14496),o=e(73453),l=e(88885);const a=(0,r.B)(()=>({layout:(0,t.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})})),g=({header:f,onBlur:b,onChange:v,onRemove:y,onReset:E})=>{const C=a();return s.createElement("div",{className:C.layout},s.createElement(d.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:f.name||"",onChange:u=>v({...f,name:u.target.value}),onBlur:b}),s.createElement(l.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:f.configured,value:f.value,labelWidth:5,inputWidth:f.configured?11:12,placeholder:"Header Value",onReset:()=>E(f.id),onChange:u=>v({...f,value:u.target.value}),onBlur:b}),s.createElement(m.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:u=>y(f.id)},s.createElement(o.J,{name:"trash-alt"})))};g.displayName="CustomHeaderRow";class c extends s.PureComponent{constructor(b){super(b),this.state={headers:[]},this.updateSettings=()=>{const{headers:C}=this.state,u=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([P,S])=>!P.startsWith("httpHeaderName"))),D=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([P,S])=>!P.startsWith("httpHeaderValue")));for(const[P,S]of C.entries())u[`httpHeaderName${P+1}`]=S.name,S.configured||(D[`httpHeaderValue${P+1}`]=S.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:u,secureJsonData:D})},this.onHeaderAdd=()=>{this.setState(C=>({headers:[...C.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(C,u)=>{this.setState(({headers:D})=>({headers:D.map((P,S)=>C!==S?P:{...u})}))},this.onHeaderReset=C=>{this.setState(({headers:u})=>({headers:u.map((D,P)=>D.id!==C?D:{...D,value:"",configured:!1})}))},this.onHeaderRemove=C=>{this.setState(({headers:u})=>({headers:u.filter(D=>D.id!==C)}),this.updateSettings)};const{jsonData:v,secureJsonData:y,secureJsonFields:E}=this.props.dataSourceConfig;this.state={headers:Object.keys(v).sort().filter(C=>C.startsWith("httpHeaderName")).map((C,u)=>({id:(0,n.uniqueId)(),name:v[C],value:y!==void 0?y[C]:"",configured:E&&E[`httpHeaderValue${u+1}`]||!1}))}}render(){const{headers:b}=this.state,{dataSourceConfig:v}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,b.map((y,E)=>s.createElement(g,{key:y.id,header:y,onChange:C=>{this.onHeaderChange(E,C)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!v.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(m.zx,{variant:"secondary",icon:"plus",type:"button",onClick:y=>{this.onHeaderAdd()}},"Add header")))}}var h=null},49257:(j,I,e)=>{"use strict";e.d(I,{E:()=>x});var t=e(42844),n=e(27702),i=e(74639),s=e(66310),r=e(14496),m=e(60644),d=e(48024),o=e(83670),l=e(73453),a=e(28580),g=e(42074),c=e(72699),h=e(88885);const f=({dataSourceConfig:M,onChange:R})=>{const O=M.secureJsonData?M.secureJsonData.basicAuthPassword:"",T=()=>{R({...M,secureJsonData:{...M.secureJsonData,basicAuthPassword:""},secureJsonFields:{...M.secureJsonFields,basicAuthPassword:!1}})},U=L=>{R({...M,secureJsonData:{...M.secureJsonData,basicAuthPassword:L.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(d._,{disabled:M.readOnly},n.createElement(r.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:M.basicAuthUser,onChange:L=>R({...M,basicAuthUser:L.currentTarget.value})})),n.createElement(d._,{disabled:M.readOnly},n.createElement(h.c,{isConfigured:!!(M.secureJsonFields&&M.secureJsonFields.basicAuthPassword),value:O||"",inputWidth:18,labelWidth:10,onReset:T,onChange:U})))};var b=e(93741);const v=26,y=({dataSourceConfig:M,onChange:R,showForwardOAuthIdentityOption:O=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"TLS Client Auth",labelWidth:v,disabled:M.readOnly},n.createElement(g.x,{id:"http-settings-tls-client-auth",value:M.jsonData.tlsAuth||!1,onChange:T=>R({...M.jsonData,tlsAuth:T.currentTarget.checked})})),n.createElement(d._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:v,disabled:M.readOnly},n.createElement(g.x,{id:"http-settings-ca-cert",value:M.jsonData.tlsAuthWithCACert||!1,onChange:T=>R({...M.jsonData,tlsAuthWithCACert:T.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"Skip TLS Verify",labelWidth:v,disabled:M.readOnly},n.createElement(g.x,{id:"http-settings-skip-tls-verify",value:M.jsonData.tlsSkipVerify||!1,onChange:T=>R({...M.jsonData,tlsSkipVerify:T.currentTarget.checked})}))),O&&n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:v,disabled:M.readOnly},n.createElement(g.x,{id:"http-settings-forward-oauth",value:M.jsonData.oauthPassThru||!1,onChange:T=>R({...M.jsonData,oauthPassThru:T.currentTarget.checked})}))));var E=e(79510),C=e(86509);const u=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],D={label:"Server (default)",value:"proxy"},P=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),S=26,x=M=>{const{defaultUrl:R,dataSourceConfig:O,onChange:T,showAccessOptions:U,sigV4AuthToggleEnabled:L,showForwardOAuthIdentityOption:V,azureAuthSettings:w,renderSigV4Editor:K,secureSocksDSProxyEnabled:B,urlLabel:W,urlDocs:_}=M,[k,A]=(0,n.useState)(!1),[z,H]=(0,n.useState)(!1),Q=(0,s.l4)();let X;const te=(0,n.useCallback)(ne=>{const pe=w?.azureAuthSupported&&w.getAzureAuthEnabled(O)||!1;if(H(pe),pe){const re=O.jsonData.oauthPassThru!==void 0?O.jsonData.oauthPassThru:!1;ne={...ne,jsonData:{...O.jsonData,oauthPassThru:pe?!1:re}}}T({...O,...ne})},[w,O,T]);switch(O.access){case"direct":X=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",_);break;case"proxy":X=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",_);break;default:X=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",_)}const oe=n.createElement(a.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:u,value:u.filter(ne=>ne.value===O.access)[0]||D,onChange:ne=>te({access:ne.value}),disabled:O.readOnly}),Z=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(O.url),le=(0,t.css)({boxShadow:`inset 0 0px 5px ${Q.v1.palette.red}`}),ce=(0,t.cx)({["width-20"]:!0,[le]:!Z}),q=n.createElement(o.I,{className:ce,placeholder:R,value:O.url,"aria-label":i.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ne=>te({url:ne.currentTarget.value}),disabled:O.readOnly});return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(r.W,{interactive:!!_,label:W??"URL",labelWidth:13,tooltip:X,inputEl:q})),U&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(r.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:oe})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>A(ne=>!ne)},"Help\xA0",n.createElement(l.J,{name:k?"angle-down":"angle-right",style:{marginBottom:0}})))),k&&n.createElement(P,null)),O.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(m.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(c.B,{tags:O.jsonData.keepCookies,width:40,onChange:ne=>te({jsonData:{...O.jsonData,keepCookies:ne}}),disabled:O.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(r.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:O.jsonData.timeout,onChange:ne=>{te({jsonData:{...O.jsonData,timeout:parseInt(ne.currentTarget.value,10)}})},disabled:O.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"Basic auth",labelWidth:S,disabled:O.readOnly},n.createElement(g.x,{id:"http-settings-basic-auth",value:O.basicAuth,onChange:ne=>{te({basicAuth:ne.currentTarget.checked})}})),n.createElement(d._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:S,disabled:O.readOnly},n.createElement(g.x,{id:"http-settings-with-credentials",value:O.withCredentials,onChange:ne=>{te({withCredentials:ne.currentTarget.checked})}}))),w?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:S,disabled:O.readOnly},n.createElement(g.x,{id:"http-settings-azure-auth",value:z,onChange:ne=>{te(w.setAzureAuthEnabled(O,ne.currentTarget.checked))}}))),L&&n.createElement("div",{className:"gf-form-inline"},n.createElement(d._,{label:"SigV4 auth",labelWidth:S,disabled:O.readOnly},n.createElement(g.x,{id:"http-settings-sigv4-auth",value:O.jsonData.sigV4Auth||!1,onChange:ne=>{te({jsonData:{...O.jsonData,sigV4Auth:ne.currentTarget.checked}})}}))),O.access==="proxy"&&n.createElement(y,{dataSourceConfig:O,onChange:ne=>te({jsonData:ne}),showForwardOAuthIdentityOption:z?!1:V})),O.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(f,{...M}))),w?.azureAuthSupported&&z&&w.azureSettingsUI&&n.createElement(w.azureSettingsUI,{dataSourceConfig:O,onChange:T}),O.jsonData.sigV4Auth&&L&&K,(O.jsonData.tlsAuth||O.jsonData.tlsAuthWithCACert)&&n.createElement(C.s,{dataSourceConfig:O,onChange:T}),O.access==="proxy"&&n.createElement(b.H,{dataSourceConfig:O,onChange:T})),B&&n.createElement(E.i,{options:O,onOptionsChange:T}))}},79510:(j,I,e)=>{"use strict";e.d(I,{i:()=>s});var t=e(27702),n=e(42074),i=e(48024);function s({options:r,onOptionsChange:m}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(i._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:r.jsonData.enableSecureSocksProxy??!1,onChange:d=>m({...r,jsonData:{...r.jsonData,enableSecureSocksProxy:d.currentTarget.checked}})}))))))}},86509:(j,I,e)=>{"use strict";e.d(I,{s:()=>d});var t=e(42844),n=e(27702),i=e(14496),s=e(73453),r=e(80011),m=e(43516);const d=({dataSourceConfig:o,onChange:l})=>{const a=o.secureJsonFields&&o.secureJsonFields.tlsCACert,g=o.secureJsonFields&&o.secureJsonFields.tlsClientCert,c=o.secureJsonFields&&o.secureJsonFields.tlsClientKey,h=o.jsonData&&o.jsonData.serverName,f=y=>E=>{E.preventDefault();const C={...o.secureJsonFields};C[y]=!1,l({...o,secureJsonFields:C})},b=y=>E=>{const C={...o.secureJsonData};C[y]=E.currentTarget.value,l({...o,secureJsonData:C})},v=y=>{const E={...o.jsonData,serverName:y.currentTarget.value};l({...o,jsonData:E})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",(0,t.css)({alignItems:"baseline"}))},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(r.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement(s.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}}))),n.createElement("div",null,o.jsonData.tlsAuthWithCACert&&n.createElement(m.W,{hasCert:!!a,onChange:b("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:f("tlsCACert")}),o.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:h&&o.jsonData.serverName,onChange:v})),n.createElement(m.W,{hasCert:!!g,label:"Client Cert",onChange:b("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:f("tlsClientCert")}),n.createElement(m.W,{hasCert:!!c,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:b("tlsClientKey"),onClick:f("tlsClientKey")}))))}},76911:(j,I,e)=>{"use strict";e.d(I,{M:()=>o});var t=e(42844),n=e(27702),i=e(33900),s=e(66310),r=e(8430),m=e(73453),d=e(8655);const o=(0,n.memo)(g=>{const c=(0,s.wW)(a),{isOpen:h,onClose:f}=g;return h?n.createElement(r.L,{useCapture:!0,includeButtonPress:!1,onClick:f},n.createElement("div",{className:c.modal,"data-testid":"date-picker"},n.createElement(l,{...g}))):null});o.displayName="DatePicker";const l=(0,n.memo)(({value:g,minDate:c,maxDate:h,onChange:f})=>{const b=(0,s.wW)(d.mg);return n.createElement(i.ZP,{className:b.body,tileClassName:b.title,value:g||new Date,minDate:c,maxDate:h,nextLabel:n.createElement(m.J,{name:"angle-right"}),prevLabel:n.createElement(m.J,{name:"angle-left"}),onChange:v=>{v&&!Array.isArray(v)&&f(v)},locale:"en"})});l.displayName="Body";const a=g=>({modal:(0,t.css)({zIndex:g.zIndex.modal,position:"absolute",boxShadow:g.shadows.z3,backgroundColor:g.colors.background.primary,border:`1px solid ${g.colors.border.weak}`,borderRadius:"2px 0 0 2px","button:disabled":{color:g.colors.text.disabled}})})},37691:(j,I,e)=>{"use strict";e.d(I,{d:()=>o});var t=e(42844),n=e(27702),i=e(99633),s=e(66310),r=e(1128),m=e(76911);const d=a=>(0,i.CQ)(a).format("L"),o=({value:a,minDate:g,maxDate:c,onChange:h,closeOnSelect:f,placeholder:b="Date",...v})=>{const[y,E]=n.useState(!1),C=(0,s.wW)(l);return n.createElement("div",{className:C.container},n.createElement(r.I,{type:"text",autoComplete:"off",placeholder:b,value:a&&d(a),onClick:()=>E(!0),onChange:u=>{u.target.value===""&&h("")},className:C.input,...v}),n.createElement(m.M,{isOpen:y,value:a&&typeof a!="string"?a:(0,i.CQ)().toDate(),minDate:g,maxDate:c,onChange:u=>{h(u),f&&E(!1)},onClose:()=>E(!1)}))},l=()=>({container:(0,t.css)({position:"relative"}),input:(0,t.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}})})},48419:(j,I,e)=>{"use strict";e.d(I,{x:()=>P});var t=e(42844),n=e(45809),i=e(91546),s=e(6714),r=e(27702),m=e(33900),d=e(76566),o=e(24352),l=e(60956),a=e(99633),g=e(52995),c=e(66670),h=e(48024),f=e(1128),b=e(73453),v=e(64022),y=e(66310),E=e(32173),C=e(19820),u=e(8655),D=e(87192);const P=({date:R,maxDate:O,minDate:T,label:U,onChange:L,disabledHours:V,disabledMinutes:w,disabledSeconds:K,showSeconds:B=!0})=>{const[W,_]=(0,r.useState)(!1),k=(0,r.useRef)(null),{overlayProps:A,underlayProps:z}=(0,s.Ir)({onClose:()=>_(!1),isDismissable:!0,isOpen:W,shouldCloseOnInteractOutside:ie=>{const Se=document.getElementsByClassName(C.F)[0];return!(Se&&Se.contains(ie))}},k),{dialogProps:H}=(0,n.R)({},k),Q=(0,y.l4)(),{modalBackdrop:X}=(0,E.J)(Q),te=(0,o.Z)(`(min-width: ${Q.breakpoints.values.lg}px)`),oe=(0,y.wW)(M),[Z,le]=(0,r.useState)(),[ce,q]=(0,r.useState)(),ne=(0,d.D)(Z,ce,{placement:"bottom-start"}),pe=(0,r.useCallback)(ie=>{_(!1),L(ie)},[L]),re=(0,r.useCallback)(ie=>{ie.preventDefault(),_(!0)},[_]);return r.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},r.createElement(S,{date:R,onChange:L,isFullscreen:te,onOpen:re,label:U,ref:le,showSeconds:B}),W?te?r.createElement(g.h_,null,r.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:k,...A,...H},r.createElement(x,{date:R,onChange:pe,isFullscreen:!0,onClose:()=>_(!1),maxDate:O,minDate:T,ref:q,style:ne.styles.popper,showSeconds:B,disabledHours:V,disabledMinutes:w,disabledSeconds:K})))):r.createElement(g.h_,null,r.createElement("div",{className:X,...z}),r.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:k,...A,...H},r.createElement("div",{className:oe.modal},r.createElement(x,{date:R,maxDate:O,minDate:T,onChange:pe,isFullscreen:!1,onClose:()=>_(!1),showSeconds:B,disabledHours:V,disabledMinutes:w,disabledSeconds:K}))))):null)},S=r.forwardRef(({date:R,label:O,onChange:T,isFullscreen:U,onOpen:L,showSeconds:V=!0},w)=>{const K=V?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[B,W]=(0,r.useState)(()=>({value:R?(0,l.dq)(R):(0,l.dq)((0,a.CQ)()),invalid:!1}));(0,r.useEffect)(()=>{R&&W({invalid:!(0,D.J)((0,l.dq)(R,{format:K})),value:(0,a.v9)(R)?(0,l.dq)(R,{format:K}):R})},[R,K]);const _=(0,r.useCallback)(z=>{const H=!(0,D.J)(z.currentTarget.value);W({value:z.currentTarget.value,invalid:H})},[]),k=(0,r.useCallback)(()=>{(0,a.v9)(B.value)&&T((0,a.CQ)(B.value))},[B.value,T]),A=r.createElement(c.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:L});return r.createElement(h._,{label:O,invalid:!!(B.value&&B.invalid),className:(0,t.css)({marginBottom:0})},r.createElement(f.I,{onChange:_,addonAfter:A,value:B.value,onBlur:k,"data-testid":"date-time-input",placeholder:"Select date/time",ref:w}))});S.displayName="DateTimeInput";const x=r.forwardRef(({date:R,onClose:O,onChange:T,isFullscreen:U,maxDate:L,minDate:V,style:w,showSeconds:K=!0,disabledHours:B,disabledMinutes:W,disabledSeconds:_},k)=>{const A=(0,y.wW)(u.mg),z=(0,y.wW)(M),[H,Q]=(0,r.useState)(()=>R&&R.isValid()?R.toDate():new Date),X=(0,r.useCallback)(oe=>{oe&&!Array.isArray(oe)&&Q(Z=>(oe.setHours(Z.getHours()),oe.setMinutes(Z.getMinutes()),oe.setSeconds(Z.getSeconds()),oe))},[]),te=(0,r.useCallback)(oe=>{Q(oe.toDate())},[]);return r.createElement("div",{className:(0,t.cx)(z.container,{[z.fullScreen]:U}),style:w,ref:k},r.createElement(m.ZP,{next2Label:null,prev2Label:null,value:H,nextLabel:r.createElement(b.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:r.createElement(b.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:X,locale:"en",className:A.body,tileClassName:A.title,maxDate:L,minDate:V}),r.createElement("div",{className:z.time},r.createElement(C.y,{showSeconds:K,onChange:te,value:(0,a.CQ)(H),disabledHours:B,disabledMinutes:W,disabledSeconds:_})),r.createElement(v.Lh,null,r.createElement(c.zx,{type:"button",onClick:()=>T((0,a.CQ)(H))},"Apply"),r.createElement(c.zx,{variant:"secondary",type:"button",onClick:O},"Cancel")))});x.displayName="DateTimeCalendar";const M=R=>({container:(0,t.css)({padding:R.spacing(1),border:`1px ${R.colors.border.weak} solid`,borderRadius:R.shape.borderRadius(1),backgroundColor:R.colors.background.primary,zIndex:R.zIndex.modal}),fullScreen:(0,t.css)({position:"absolute"}),time:(0,t.css)({marginBottom:R.spacing(2)}),modal:(0,t.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:R.zIndex.modal,maxWidth:"280px"})})},2184:(j,I,e)=>{"use strict";e.d(I,{x:()=>u});var t=e(42844),n=e(45809),i=e(91546),s=e(6714),r=e(27702),m=e(76566),d=e(66310),o=e(70610),l=e(66670),a=e(29372),g=e(22209),c=e(73453),h=e(1128),f=e(80011),b=e(21494),v=e(36042),y=e(61899),E=e(97287);const C=y.r.filter(M=>(0,E.jD)(M.from));function u(M){const{timeRange:R,onChange:O}=M,[T,U]=(0,r.useState)(!1),L=(0,r.useCallback)(()=>U(!1),[]),V=(0,E.C_)(R),[w,K]=(0,r.useState)({value:V.from,validation:(0,E.x5)(V.from)}),[B,W]=(0,r.useState)({value:V.to,validation:(0,E.x5)(V.to)}),_=(0,r.useRef)(null),{overlayProps:k,underlayProps:A}=(0,s.Ir)({onClose:()=>U(!1),isDismissable:!0,isOpen:T},_),{dialogProps:z}=(0,n.R)({},_),[H,Q]=(0,r.useState)(null),[X,te]=(0,r.useState)(null),oe=(0,m.D)(H,X,{placement:"auto-start"}),Z=(0,d.wW)(S(w.validation.errorMessage,B.validation.errorMessage)),le=ne=>{const pe=(0,E.aw)(ne);pe&&(L(),K({...w,value:ne.from}),W({...B,value:ne.to}),O(pe))},ce=(0,r.useCallback)(ne=>{ne.stopPropagation(),ne.preventDefault(),U(!T)},[T]),q=ne=>{if(ne.preventDefault(),!B.validation.isValid||!w.validation.isValid)return;const pe=(0,E.aw)({from:w.value,to:B.value,display:""});pe&&(O(pe),U(!1))};return r.createElement("div",{className:Z.container,ref:Q},r.createElement("button",{className:Z.pickerInput,type:"button",onClick:ce},r.createElement("span",{className:Z.clockIcon},r.createElement(c.J,{name:"clock-nine"})),r.createElement("span",null,V.from," to ",V.to),r.createElement("span",{className:Z.caretIcon},r.createElement(c.J,{name:T?"angle-up":"angle-down",size:"lg"}))),T&&r.createElement("div",null,r.createElement("div",{role:"presentation",className:Z.backdrop,...A}),r.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("div",{ref:_,...k,...z},r.createElement("div",{className:Z.content,ref:te,style:oe.styles.popper,...oe.attributes},r.createElement("div",{className:Z.body},r.createElement(a.Z,{className:Z.leftSide,hideHorizontalTrack:!0},r.createElement(v.V,{title:(0,o.t)("time-picker.time-range.example-title","Example time ranges"),options:C,onChange:le,value:V})),r.createElement("div",{className:Z.rightSide},r.createElement("div",{className:Z.title},r.createElement(b.r,null,r.createElement(f.u,{content:r.createElement(D,null),placement:"bottom",theme:"info"},r.createElement("div",null,r.createElement(o.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",r.createElement(c.J,{name:"info-circle"})))))),r.createElement(g.g,{label:"From",invalid:!w.validation.isValid,error:w.validation.errorMessage},r.createElement(h.I,{onClick:ne=>ne.stopPropagation(),onBlur:()=>K({...w,validation:(0,E.x5)(w.value)}),onChange:ne=>K({...w,value:ne.currentTarget.value}),value:w.value})),r.createElement(g.g,{label:"To",invalid:!B.validation.isValid,error:B.validation.errorMessage},r.createElement(h.I,{onClick:ne=>ne.stopPropagation(),onBlur:()=>W({...B,validation:(0,E.x5)(B.value)}),onChange:ne=>W({...B,value:ne.currentTarget.value}),value:B.value})),r.createElement(l.zx,{"aria-label":"TimePicker submit button",onClick:q},"Apply time range"))))))))}const D=()=>{const M=(0,d.wW)(P);return r.createElement(r.Fragment,null,r.createElement("div",{className:M.supported},"Supported formats: ",r.createElement("code",{className:M.tooltip},"now-[digit]s/m/h/d/w")),r.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),r.createElement("code",{className:M.tooltip},"From: now-10m To: now"),r.createElement("div",{className:M.link},"For more information see"," ",r.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",r.createElement(c.J,{name:"external-link-alt"})),"."))},P=M=>({supported:(0,t.css)({marginBottom:M.spacing(1)}),tooltip:(0,t.css)({margin:0}),link:(0,t.css)({marginTop:M.spacing(1)})}),S=(M,R)=>O=>{const T=(0,h.H)({theme:O,invalid:!1}),L=250+x(O,M)+x(O,R);return{backdrop:(0,t.css)({position:"fixed",zIndex:O.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,t.css)({display:"flex",position:"relative"}),pickerInput:(0,t.cx)(T.input,T.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${O.spacing.gridSize*O.components.height.md-2}px`})),caretIcon:(0,t.cx)(T.suffix,(0,t.css)({position:"relative",marginLeft:O.spacing(.5)})),clockIcon:(0,t.cx)(T.prefix,(0,t.css)({position:"relative",marginRight:O.spacing(.5)})),content:(0,t.css)({background:O.colors.background.primary,boxShadow:O.shadows.z3,position:"absolute",zIndex:O.zIndex.modal,width:"500px",top:"100%",borderRadius:O.shape.radius.default,border:`1px solid ${O.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,t.css)({display:"flex",height:`${L}px`}),description:(0,t.css)({color:O.colors.text.secondary,fontSize:O.typography.size.sm}),leftSide:(0,t.css)({width:"50% !important",borderRight:`1px solid ${O.colors.border.medium}`}),rightSide:(0,t.css)({width:"50%",padding:O.spacing(1)}),title:(0,t.css)({marginBottom:O.spacing(1)})}};function x(M,R){return R?R.length>34?M.spacing.gridSize*6.5:M.spacing.gridSize*4:0}},97287:(j,I,e)=>{"use strict";e.d(I,{C_:()=>i,aw:()=>n,jD:()=>r,x5:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=l=>({from:m(l.from),to:m(l.to)}),i=l=>{const a=o(l.from),g=o(l.to);return{from:a,to:g,display:`${a} to ${g}`}},s=(l,a=Date.now())=>r(l)?m(l)>Math.ceil(a/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},r=l=>t.test(l),m=l=>{const a=t.exec(l);if(!a||a.length!==3)return 0;const[,g,c]=a,h=parseInt(g,10);return isNaN(h)?0:h*d[c]},d={w:604800,d:86400,h:3600,m:60,s:1},o=l=>l<=0?"now":l>=d.w&&l%d.w===0?`now-${l/d.w}w`:l>=d.d&&l%d.d===0?`now-${l/d.d}d`:l>=d.h&&l%d.h===0?`now-${l/d.h}h`:l>=d.m&&l%d.m===0?`now-${l/d.m}m`:`now-${l}s`},19820:(j,I,e)=>{"use strict";e.d(I,{F:()=>l,y:()=>a});var t=e(42844),n=e(76133),i=e(27702),s=e(99633),r=e(66310),m=e(73453),d=e(97289),o=e(26468);const l="time-of-day-picker-panel",a=({minuteStep:h=1,showHour:f=!0,showSeconds:b=!1,onChange:v,value:y,size:E="auto",disabled:C,disabledHours:u,disabledMinutes:D,disabledSeconds:P})=>{const S=(0,r.wW)(c);return i.createElement(n.Z,{className:(0,t.cx)((0,o.ht)()[E],S.input),popupClassName:(0,t.cx)(S.picker,l),defaultValue:(0,s.C_)(),onChange:x=>v((0,s.CQ)(x)),allowEmpty:!1,showSecond:b,value:(0,s.C_)(y),showHour:f,minuteStep:h,inputIcon:i.createElement(g,{wrapperStyle:S.caretWrapper}),disabled:C,disabledHours:u,disabledMinutes:D,disabledSeconds:P})},g=({wrapperStyle:h=""})=>i.createElement("div",{className:h},i.createElement(m.J,{name:"angle-down"})),c=h=>{const f=h.components.input.background,b=h.v1.palette.black,v=h.colors.background.secondary,y=h.shape.borderRadius(1),E=h.components.input.borderColor;return{caretWrapper:(0,t.css)({position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",display:"inline-block",textAlign:"right",color:h.colors.text.secondary}),picker:(0,t.css)({".rc-time-picker-panel-select":{fontSize:"14px",backgroundColor:f,borderColor:E,li:{outlineWidth:"2px","&.rc-time-picker-panel-select-option-selected":{backgroundColor:"inherit",border:`1px solid ${h.v1.palette.orange}`,borderRadius:y},"&:hover":{background:v},"&.rc-time-picker-panel-select-option-disabled":{color:h.colors.action.disabledText}}},".rc-time-picker-panel-inner":{boxShadow:`0px 4px 4px ${b}`,backgroundColor:f,borderColor:E,borderRadius:y,marginTop:"3px",".rc-time-picker-panel-input-wrap":{marginRight:"2px","&, .rc-time-picker-panel-input":{backgroundColor:f,paddingTop:"2px"}},".rc-time-picker-panel-combobox":{display:"flex"}}}),input:(0,t.css)({".rc-time-picker-input":{backgroundColor:f,borderRadius:y,borderColor:E,height:h.spacing(4),"&:focus":(0,d.getFocusStyles)(h),"&:disabled":{backgroundColor:h.colors.action.disabledBackground,color:h.colors.action.disabledText,border:`1px solid ${h.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}}})}}},95059:(j,I,e)=>{"use strict";e.d(I,{K:()=>v});var t=e(42844),n=e(27702),i=e(99633),s=e(8508),r=e(74639),m=e(80402),d=e(66310),o=e(8430),l=e(73453),a=e(1128),g=e(14749),c=e(49430),h=e(61899),f=e(87192);const b=()=>{},v=({value:E,onChange:C,onChangeTimeZone:u=b,clearable:D,hideTimeZone:P=!0,timeZone:S="browser",placeholder:x="Select time range",isReversed:M=!0,hideQuickRanges:R=!1,disabled:O=!1,showIcon:T=!1})=>{const[U,L]=(0,n.useState)(!1),V=(0,d.l4)(),w=y(V,O),K=k=>{k.stopPropagation(),k.preventDefault(),!O&&L(!U)},B=()=>{L(!1)},W=k=>{B(),C(k)},_=k=>{k.stopPropagation();const A=(0,i.CQ)(null),z=(0,i.CQ)(null);C({from:A,to:z,raw:{from:A,to:z}})};return n.createElement("div",{className:w.container},n.createElement("button",{type:"button",className:w.pickerInput,"aria-label":r.wl.components.TimePicker.openButton,onClick:K},T&&n.createElement(l.J,{name:"clock-nine",size:"sm",className:w.icon}),n.createElement(c.q,{value:E,timeZone:S,placeholder:x}),!O&&n.createElement("span",{className:w.caretIcon},(0,f.v)(E)&&D&&n.createElement(l.J,{className:w.clearIcon,name:"times",size:"lg",onClick:_}),n.createElement(l.J,{name:U?"angle-up":"angle-down",size:"lg"}))),U&&n.createElement(o.L,{includeButtonPress:!1,onClick:B},n.createElement(g.x,{timeZone:S,value:(0,f.v)(E)?E:(0,s.JK)(),onChange:W,quickOptions:h.r,onChangeTimeZone:u,className:w.content,hideTimeZone:P,isReversed:M,hideQuickRanges:R})))},y=(0,m.B)((E,C=!1)=>{const u=(0,a.H)({theme:E,invalid:!1});return{container:(0,t.css)({display:"flex",position:"relative"}),content:(0,t.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:E.zIndex.dropdown}),pickerInput:(0,t.cx)(u.input,C&&u.inputDisabled,u.wrapper,(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${E.spacing.gridSize*4-2}px`})),caretIcon:(0,t.cx)(u.suffix,(0,t.css)({position:"relative",top:"-1px",marginLeft:E.spacing(.5)})),clearIcon:(0,t.css)({marginRight:E.spacing(.5),"&:hover":{color:E.colors.text.maxContrast}}),placeholder:(0,t.css)({color:E.colors.text.disabled,opacity:1}),icon:(0,t.css)({marginRight:E.spacing(.5)})}})},37424:(j,I,e)=>{"use strict";e.d(I,{IF:()=>P,Xc:()=>u,sU:()=>S});var t=e(42844),n=e(45809),i=e(91546),s=e(6714),r=e(27702),m=e(99633),d=e(60956),o=e(80369),l=e(76305),a=e(1726),g=e(74639),c=e(66310),h=e(70610),f=e(77720),b=e(32173),v=e(30973),y=e(80011),E=e(14749),C=e(61899);function u(O){const[T,U]=(0,r.useState)(!1),{value:L,onMoveBackward:V,onMoveForward:w,onZoom:K,timeZone:B,fiscalYearStartMonth:W,timeSyncButton:_,isSynced:k,history:A,onChangeTimeZone:z,onChangeFiscalYearStartMonth:H,hideQuickRanges:Q,widthOverride:X,isOnCanvas:te}=O,oe=we=>{O.onChange(we),U(!1)},Z=we=>{we.stopPropagation(),we.preventDefault(),U(!T)},le=()=>{U(!1)},ce=(0,r.createRef)(),{overlayProps:q,underlayProps:ne}=(0,s.Ir)({onClose:le,isDismissable:!0,isOpen:T},ce),{dialogProps:pe}=(0,n.R)({},ce),re=(0,c.l4)(),ie=(0,c.wW)(M),{modalBackdrop:Se}=(0,b.J)(re),ye=(0,m.v9)(L.raw.from)||(0,m.v9)(L.raw.to),Ce=k?"active":te?"canvas":"default",de=x(L,B);return r.createElement(f.h,{className:ie.container},ye&&r.createElement(v.h,{"aria-label":(0,h.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:Ce,onClick:V,icon:"angle-left",narrow:!0}),r.createElement(y.u,{content:r.createElement(P,{timeRange:L,timeZone:B}),placement:"bottom",interactive:!0},r.createElement(v.h,{"data-testid":g.wl.components.TimePicker.openButton,"aria-label":(0,h.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:de}),"aria-controls":"TimePickerContent",onClick:Z,icon:"clock-nine",isOpen:T,variant:Ce},r.createElement(S,{...O}))),T&&r.createElement("div",null,r.createElement("div",{role:"presentation",className:(0,t.cx)(Se,ie.backdrop),...ne}),r.createElement(i.MT,{contain:!0,autoFocus:!0},r.createElement("section",{className:ie.content,ref:ce,...q,...pe},r.createElement(E.x,{timeZone:B,fiscalYearStartMonth:W,value:L,onChange:oe,quickOptions:C.r,history:A,showHistory:!0,widthOverride:X,onChangeTimeZone:z,onChangeFiscalYearStartMonth:H,hideQuickRanges:Q})))),_,ye&&r.createElement(v.h,{"aria-label":(0,h.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:w,icon:"angle-right",narrow:!0,variant:Ce}),r.createElement(y.u,{content:D,placement:"bottom"},r.createElement(v.h,{"aria-label":(0,h.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:K,icon:"search-minus",variant:Ce})))}u.displayName="TimeRangePicker";const D=()=>r.createElement(r.Fragment,null,r.createElement(h.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",r.createElement("br",null)," CTRL+Z")),P=({timeRange:O,timeZone:T})=>{const U=(0,c.wW)(R);return r.createElement(r.Fragment,null,(0,d.dq)(O.from,{timeZone:T}),r.createElement("div",{className:"text-center"},r.createElement(h.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,d.dq)(O.to,{timeZone:T}),r.createElement("div",{className:"text-center"},r.createElement("span",{className:U.utc},(0,o.Vs)(T))))},S=(0,r.memo)(({hideText:O,value:T,timeZone:U})=>{const L=(0,c.wW)(R);return O?null:r.createElement("span",{className:L.container},r.createElement("span",null,x(T,U)),r.createElement("span",{className:L.utc},l.describeTimeRangeAbbreviation(T,U)))});S.displayName="TimePickerButtonLabel";const x=(O,T)=>{const U={to:a.isMathString(O.raw.to)?O.raw.to:O.to,from:a.isMathString(O.raw.from)?O.raw.from:O.from};return l.describeTimeRange(U,T)},M=O=>({container:(0,t.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,t.css)({display:"none",[O.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:O.zIndex.dropdown,[O.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:O.zIndex.modal}})}),R=O=>({container:(0,t.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap"}),utc:(0,t.css)({color:O.v1.palette.orange,fontSize:O.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:O.typography.fontWeightMedium})})},8655:(j,I,e)=>{"use strict";e.d(I,{mg:()=>c,uT:()=>o});var t=e(42844),n=e(27702),i=e(33900),s=e(99633),r=e(58018),m=e(66310),d=e(73453);function o({onChange:h,from:f,to:b,timeZone:v}){const y=l(f,b),E=a(h,v),C=(0,m.wW)(c);return n.createElement(i.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:C.body,tileClassName:C.title,value:y,nextLabel:n.createElement(d.J,{name:"angle-right"}),prevLabel:n.createElement(d.J,{name:"angle-left"}),onChange:E,locale:"en"})}o.displayName="Body";function l(h,f,b=new Date){const v=h.toDate(),y=f.toDate(),E=(0,s.CQ)(v).isValid()?v:b,C=(0,s.CQ)(y).isValid()?y:b;return E>C?[C,E]:[E,C]}function a(h,f){return(0,n.useCallback)(b=>{if(!Array.isArray(b))return console.error("onCalendarChange: should be run in selectRange={true}");if(b[0]&&b[1]){const v=(0,r.J)(g(b[0]),{timeZone:f}),y=(0,r.J)(g(b[1]),{timeZone:f});h(v,y)}},[h,f])}function g(h){return[h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds()]}const c=h=>{const f=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,t.css)({color:h.colors.text.primary,backgroundColor:h.colors.background.primary,fontSize:h.typography.size.md,border:"1px solid transparent","&:hover":{position:"relative"},"&:disabled":{color:h.colors.action.disabledText}}),body:(0,t.css)({zIndex:h.zIndex.modal,backgroundColor:h.colors.background.primary,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:h.colors.text.primary,border:0,fontWeight:h.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:h.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},[`${f}, .react-calendar__tile--active, .react-calendar__tile--active:hover`]:{color:h.colors.primary.contrastText,fontWeight:h.typography.fontWeightMedium,background:h.colors.primary.main,boxShadow:"none",border:"0px"},".react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart":{padding:0,border:"0px",color:h.colors.primary.contrastText,fontWeight:h.typography.fontWeightMedium,background:h.colors.primary.main,abbr:{backgroundColor:h.colors.primary.main,borderRadius:"100px",display:"block",paddingTop:"2px",height:"26px"}},[`${f}, .react-calendar__tile--rangeStart`]:{borderTopLeftRadius:"20px",borderBottomLeftRadius:"20px"},[`${f}, .react-calendar__tile--rangeEnd`]:{borderTopRightRadius:"20px",borderBottomRightRadius:"20px"}})}}},14749:(j,I,e)=>{"use strict";e.d(I,{x:()=>Ce});var t=e(42844),n=e(27702),i=e(99633),s=e(76305),r=e(74639),m=e(33716),d=e(66310),o=e(80402),l=e(97289),a=e(70610),g=e(29372),c=e(73453),h=e(89949),f=e(80369),b=e(40705),v=e(22209),y=e(28580),E=e(66670),C=e(15672),u=e(11959),D=e(28981),P=e(45701),S=e(61899);const x=Me=>{const{timeZone:De,fiscalYearStartMonth:We,timestamp:qe=Date.now(),onChangeTimeZone:st,onChangeFiscalYearStartMonth:dt}=Me,[Tt,Nt]=(0,n.useState)(!1),[Bt,yt]=(0,n.useState)("tz"),ft=(0,n.useCallback)(Le=>{Le&&Le.stopPropagation(),Nt(!Tt)},[Tt,Nt]),ct=(0,d.l4)(),ge=M(ct);if(!(0,h.isString)(De))return null;const Be=(0,f.Pr)(De,qe);return Be?n.createElement("div",null,n.createElement("section",{"aria-label":(0,a.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:ge.container},n.createElement("div",{className:ge.timeZoneContainer},n.createElement("div",{className:ge.timeZone},n.createElement(P.d,{title:Be.name}),n.createElement("div",{className:ge.spacer}),n.createElement(u.K,{info:Be})),n.createElement(D.v,{timeZone:De,timestamp:qe})),n.createElement("div",{className:ge.spacer}),n.createElement(E.zx,{variant:"secondary",onClick:ft,size:"sm"},n.createElement(a.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),Tt?n.createElement("div",{className:ge.editContainer},n.createElement("div",null,n.createElement(b.S,{value:Bt,options:[{label:(0,a.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,a.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:yt})),Bt==="tz"?n.createElement("section",{"data-testid":r.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ge.timeZoneContainer,ge.timeSettingContainer)},n.createElement(C.O,{includeInternal:!0,onChange:Le=>{ft(),(0,h.isString)(Le)&&st(Le)},onBlur:ft,menuShouldPortal:!1})):n.createElement("section",{"aria-label":r.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(ge.timeZoneContainer,ge.timeSettingContainer)},n.createElement(v.g,{className:ge.fiscalYearField,label:(0,a.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(y.Ph,{value:We,menuShouldPortal:!1,options:S.E,onChange:Le=>{dt&&dt(Le.value??0)}})))):null):null},M=(0,o.B)(Me=>({container:(0,t.css)({borderTop:`1px solid ${Me.colors.border.weak}`,padding:"11px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,t.css)({borderTop:`1px solid ${Me.colors.border.weak}`,padding:"11px",justifyContent:"space-between",alignItems:"center"}),spacer:(0,t.css)({marginLeft:"7px"}),timeSettingContainer:(0,t.css)({paddingTop:Me.spacing(1)}),fiscalYearField:(0,t.css)({marginBottom:0}),timeZoneContainer:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})}));var R=e(21494),O=e(58018),T=e(60956),U=e(1726),L=e(80011),V=e(1128),w=e(45809),K=e(91546),B=e(6714),W=e(32173),_=e(8655);function k({onClose:Me,onApply:De}){const We=(0,d.wW)(A);return n.createElement("div",{className:We.container},n.createElement(E.zx,{className:We.apply,onClick:De},n.createElement(a.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(E.zx,{variant:"secondary",onClick:Me},n.createElement(a.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}k.displayName="Footer";const A=Me=>({container:(0,t.css)({backgroundColor:Me.colors.background.primary,display:"flex",justifyContent:"center",padding:"10px",alignItems:"stretch"}),apply:(0,t.css)({marginRight:"4px",width:"100%",justifyContent:"center"})});function z({onClose:Me}){const De=(0,d.wW)(H);return n.createElement("div",{className:De.container},n.createElement(R.r,null,n.createElement(a.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(E.zx,{"aria-label":r.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Me}))}z.displayName="Header";const H=Me=>({container:(0,t.css)({backgroundColor:Me.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"7px"})}),Q=(Me,De=!1)=>({container:(0,t.css)({top:0,position:"absolute",[`${De?"left":"right"}`]:"544px",boxShadow:Me.shadows.z3,backgroundColor:Me.colors.background.primary,zIndex:-1,border:`1px solid ${Me.colors.border.weak}`,borderRadius:"2px 0 0 2px","&:after":{display:"block",backgroundColor:Me.colors.background.primary,width:"19px",height:"100%",content:`${De?'""':'" "'}`,position:"absolute",top:0,right:"-19px",borderLeft:`1px solid ${Me.colors.border.weak}`}}),modal:(0,t.css)({boxShadow:Me.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:Me.zIndex.modal}),content:(0,t.css)({margin:"0 auto",width:"268px"})});function X(Me){const De=(0,d.l4)(),{modalBackdrop:We}=(0,W.J)(De),qe=Q(De,Me.isReversed),{isOpen:st,isFullscreen:dt,onClose:Tt}=Me,Nt=n.createRef(),{dialogProps:Bt}=(0,w.R)({"aria-label":r.wl.components.TimePicker.calendar.label},Nt),{overlayProps:yt}=(0,B.Ir)({isDismissable:!0,isOpen:st,onClose:Tt},Nt);return st?dt?n.createElement(K.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:qe.container,ref:Nt,...yt,...Bt},n.createElement(z,{...Me}),n.createElement(_.uT,{...Me}))):n.createElement(B.Xj,null,n.createElement("div",{className:We}),n.createElement(K.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:qe.modal,ref:Nt,...yt,...Bt},n.createElement("div",{className:qe.content,"aria-label":r.wl.components.TimePicker.calendar.label},n.createElement(z,{...Me}),n.createElement(_.uT,{...Me}),n.createElement(k,{...Me}))))):null}const te=(0,n.memo)(X);X.displayName="TimePickerCalendar";const oe={default:()=>(0,a.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,a.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},Z=Me=>{const{value:De,isFullscreen:We=!1,timeZone:qe,onApply:st,isReversed:dt,fiscalYearStartMonth:Tt}=Me,[Nt,Bt]=ce(De.raw.from,De.raw.to,qe),yt=(0,d.wW)(pe),[ft,ct]=(0,n.useState)(Nt),[ge,Be]=(0,n.useState)(Bt),[Le,he]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[Ne,fe]=ce(De.raw.from,De.raw.to,qe);ct(Ne),Be(fe)},[De.raw.from,De.raw.to,qe]);const He=(0,n.useCallback)(Ne=>{Ne.preventDefault(),he(!0)},[he]),Pe=(0,n.useCallback)(()=>{if(ge.invalid||ft.invalid)return;const Ne={from:ft.value,to:ge.value},fe=s.convertRawToRange(Ne,qe,Tt);st(fe)},[ft.invalid,ft.value,st,qe,ge.invalid,ge.value,Tt]),Ie=(0,n.useCallback)((Ne,fe)=>{const[ve,ze]=ce(Ne,fe,qe);ct(ve),Be(ze)},[qe]),Te=Ne=>{Ne.key==="Enter"&&Pe()},Re=s.convertRawToRange({from:"now/fy",to:"now/fy"},qe,Tt),ue=(0,a.t)("time-picker.range-content.fiscal-year","Fiscal year"),xe=n.createElement("div",{className:yt.tooltip},s.isFiscal(De)?n.createElement(L.u,{content:`${ue}: ${Re.from.format("MMM-DD")} - ${Re.to.format("MMM-DD")}`},n.createElement(c.J,{name:"info-circle"})):null),Ve=n.createElement(E.zx,{"aria-label":r.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:He});return n.createElement("div",null,n.createElement("div",{className:yt.fieldContainer},n.createElement(v.g,{label:(0,a.t)("time-picker.range-content.from-input","From"),invalid:ft.invalid,error:ft.errorMessage},n.createElement(V.I,{onClick:Ne=>Ne.stopPropagation(),onChange:Ne=>Ie(Ne.currentTarget.value,ge.value),addonAfter:Ve,onKeyDown:Te,"aria-label":r.wl.components.TimePicker.fromField,value:ft.value})),xe),n.createElement("div",{className:yt.fieldContainer},n.createElement(v.g,{label:(0,a.t)("time-picker.range-content.to-input","To"),invalid:ge.invalid,error:ge.errorMessage},n.createElement(V.I,{onClick:Ne=>Ne.stopPropagation(),onChange:Ne=>Ie(ft.value,Ne.currentTarget.value),addonAfter:Ve,onKeyDown:Te,"aria-label":r.wl.components.TimePicker.toField,value:ge.value})),xe),n.createElement(E.zx,{"data-testid":r.wl.components.TimePicker.applyTimeRange,type:"button",onClick:Pe},n.createElement(a.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(te,{isFullscreen:We,isOpen:Le,from:(0,O.J)(ft.value),to:(0,O.J)(ge.value),onApply:Pe,onClose:()=>he(!1),onChange:Ie,timeZone:qe,isReversed:dt}))};function le(Me,De,We){const qe={from:Me,to:De},st=s.convertRawToRange(qe,We);return!(st.from.isSame(st.to)||st.from.isBefore(st.to))}function ce(Me,De,We){const qe=q(Me,We),st=q(De,We),dt=!ne(qe,!1,We),Tt=!ne(st,!0,We),Nt=le(qe,st,We)&&!Tt;return[{value:qe,invalid:dt||Nt,errorMessage:Nt&&!dt?oe.range():oe.default()},{value:st,invalid:Tt,errorMessage:oe.default()}]}function q(Me,De){return(0,i.v9)(Me)?(0,T.dq)(Me,{timeZone:De}):Me}function ne(Me,De,We){return(0,i.v9)(Me)?Me.isValid():U.isMathString(Me)?U.isValid(Me):(0,O.J)(Me,{roundUp:De,timeZone:We}).isValid()}function pe(Me){return{fieldContainer:(0,t.css)({display:"flex"}),tooltip:(0,t.css)({paddingLeft:Me.spacing(1),paddingTop:Me.spacing(3)})}}var re=e(36042);const ie=(Me,De)=>s.convertRawToRange({from:Me.from,to:Me.to},De),Se=(Me,De)=>{const We=(0,T.dq)(Me.from,{timeZone:De}),qe=(0,T.dq)(Me.to,{timeZone:De});return{from:We,to:qe,display:`${We} to ${qe}`}},ye=Me=>{const{quickOptions:De=[],isReversed:We,isFullscreen:qe,hideQuickRanges:st,timeZone:dt,fiscalYearStartMonth:Tt,value:Nt,onChange:Bt,history:yt,showHistory:ft,className:ct,hideTimeZone:ge,onChangeTimeZone:Be,onChangeFiscalYearStartMonth:Le}=Me,he=!yt?.length,He=qe&&ft||!qe&&(ft&&!he||!st),Pe=(0,d.l4)(),Ie=$e(Pe,We,st,He,qe),Te=Je(yt,dt),Re=Ue(Nt.raw,De),[ue,xe]=(0,n.useState)(""),Ve=De.filter(fe=>fe.display.toLowerCase().includes(ue.toLowerCase())),Ne=fe=>Bt(ie(fe));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(Ie.container,ct)},n.createElement("div",{className:Ie.body},(!qe||!st)&&n.createElement("div",{className:Ie.rightSide},n.createElement("div",{className:Ie.timeRangeFilter},n.createElement(m.H,{width:0,autoFocus:!0,value:ue,onChange:xe,placeholder:(0,a.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(g.$,null,!qe&&n.createElement(de,{...Me,historyOptions:Te}),!st&&n.createElement(re.V,{options:Ve,onChange:Ne,value:Re}))),qe&&n.createElement("div",{className:Ie.leftSide},n.createElement(we,{...Me,historyOptions:Te}))),!ge&&qe&&n.createElement(x,{timeZone:dt,fiscalYearStartMonth:Tt,onChangeTimeZone:Be,onChangeFiscalYearStartMonth:Le}))},Ce=Me=>{const{widthOverride:De}=Me,We=(0,d.l4)(),qe=(De||window.innerWidth)>=We.breakpoints.values.lg;return n.createElement(ye,{...Me,isFullscreen:qe})},de=Me=>{const{value:De,hideQuickRanges:We,onChange:qe,timeZone:st,historyOptions:dt=[],showHistory:Tt}=Me,Nt=(0,d.l4)(),Bt=Qe(Nt),yt=(0,i.v9)(De.raw.from)||(0,i.v9)(De.raw.to),[ft,ct]=(0,n.useState)(!yt),ge=We?!1:ft,Be=Le=>qe(ie(Le,st));return n.createElement("fieldset",null,n.createElement("div",{className:Bt.header},n.createElement("button",{type:"button",className:Bt.expandButton,onClick:()=>{We||ct(!ge)},"data-testid":r.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!ge,"aria-controls":"expanded-timerange"},n.createElement(R.r,null,n.createElement(a.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!We&&n.createElement(c.J,{name:ge?"angle-down":"angle-up"}))),!ge&&n.createElement("div",{className:Bt.body,id:"expanded-timerange"},n.createElement("div",{className:Bt.form},n.createElement(Z,{value:De,onApply:qe,timeZone:st,isFullscreen:!1})),Tt&&n.createElement(re.V,{title:(0,a.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:dt,onChange:Be,placeholderEmpty:null})))},we=Me=>{const{onChange:De,value:We,timeZone:qe,fiscalYearStartMonth:st,isReversed:dt,historyOptions:Tt}=Me,Nt=(0,d.l4)(),Bt=tt(Nt,Me.hideQuickRanges),yt=ft=>De(ie(ft,qe));return n.createElement(n.Fragment,null,n.createElement("div",{className:Bt.container},n.createElement("div",{className:Bt.title,"data-testid":r.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(R.r,null,n.createElement(a.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(Z,{value:We,timeZone:qe,fiscalYearStartMonth:st,onApply:De,isFullscreen:!0,isReversed:dt})),Me.showHistory&&n.createElement("div",{className:Bt.recent},n.createElement(re.V,{title:(0,a.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Tt||[],onChange:yt,placeholderEmpty:n.createElement(_e,null)})))},_e=(0,n.memo)(()=>{const Me=(0,d.l4)(),De=lt(Me);return n.createElement("div",{className:De.container},n.createElement(a.c,{i18nKey:"time-picker.content.empty-recent-list"},n.createElement("div",null,n.createElement("span",null,"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.")),n.createElement("div",null,n.createElement("a",{className:De.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function Je(Me,De){return!Array.isArray(Me)||Me.length===0?[]:Me.map(We=>Se(We,De))}_e.displayName="EmptyRecentList";const Ue=(Me,De)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Me))return De.find(We=>We.from===Me.from&&We.to===Me.to)},[Me,De]),$e=(0,o.B)((Me,De,We,qe,st)=>({container:(0,t.css)({background:Me.colors.background.primary,boxShadow:Me.shadows.z3,width:`${st?"546px":"262px"}`,borderRadius:"2px",border:`1px solid ${Me.colors.border.weak}`,[`${De?"left":"right"}`]:0}),body:(0,t.css)({display:"flex",flexDirection:"row-reverse",height:`${qe?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,t.css)({display:"flex",flexDirection:"column",borderRight:`${De?"none":`1px solid ${Me.colors.border.weak}`}`,width:`${We?"100%":"60%"}`,overflow:"hidden",order:De?1:0}),rightSide:(0,t.css)({width:`${st?"40%":"100%"}; !important`,borderRight:De?`1px solid ${Me.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,t.css)({padding:Me.spacing(1)}),spacing:(0,t.css)({marginTop:"16px"})})),Qe=(0,o.B)(Me=>({header:(0,t.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${Me.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,t.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,l.getFocusStyles)(Me)}),body:(0,t.css)({borderBottom:`1px solid ${Me.colors.border.weak}`}),form:(0,t.css)({padding:"7px 9px 7px 9px"})})),tt=(0,o.B)((Me,De)=>({container:(0,t.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:De?"11px":"20%"}),title:(0,t.css)({marginBottom:"11px"}),recent:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:Me.spacing(1)})})),lt=(0,o.B)(Me=>({container:(0,t.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}}),link:(0,t.css)({color:Me.colors.text.link})}))},21494:(j,I,e)=>{"use strict";e.d(I,{r:()=>r});var t=e(42844),n=e(27702),i=e(66310);const s=m=>({text:(0,t.css)({fontSize:m.typography.size.md,fontWeight:m.typography.fontWeightMedium,color:m.colors.text.primary,margin:0,display:"flex"})}),r=(0,n.memo)(({children:m})=>{const d=(0,i.wW)(s);return n.createElement("h3",{className:d.text},m)});r.displayName="TimePickerTitle"},49430:(j,I,e)=>{"use strict";e.d(I,{q:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(37424),r=e(87192);const m=(0,n.memo)(function({hideText:l,value:a,timeZone:g="browser",placeholder:c="No time range selected",className:h}){const f=(0,i.wW)(d);return l?null:n.createElement("span",{className:h},(0,r.v)(a)?n.createElement(s.sU,{value:a,timeZone:g}):n.createElement("span",{className:f.placeholder},c))}),d=o=>({placeholder:(0,t.css)({color:o.colors.text.disabled,opacity:1})})},36042:(j,I,e)=>{"use strict";e.d(I,{V:()=>h});var t=e(42844),n=e(27702),i=e(80402),s=e(70610),r=e(21494),m=e(66117),d=e(66310),o=e(97289);const l=y=>({container:(0,t.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between"}),selected:(0,t.css)({background:y.colors.action.selected,fontWeight:y.typography.fontWeightMedium}),radio:(0,t.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,o.getFocusStyles)(y)}),label:(0,t.css)({cursor:"pointer",flex:1,padding:"7px 9px 7px 9px","&:hover":{background:y.colors.action.hover,cursor:"pointer"}})}),a=(0,n.memo)(({value:y,onSelect:E,selected:C=!1,name:u})=>{const D=(0,d.wW)(l),P=(0,m.Z)();return n.createElement("li",{className:(0,t.cx)(D.container,C&&D.selected)},n.createElement("input",{className:D.radio,checked:C,name:u,type:"checkbox",id:P,onChange:()=>E(y)}),n.createElement("label",{className:D.label,htmlFor:P},y.display))});a.displayName="TimeRangeOption";const g=(0,i.B)(()=>({title:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})})),c=(0,i.B)(()=>({grow:(0,t.css)({flexGrow:1,alignItems:"flex-start"})})),h=y=>{const E=g(),{title:C,options:u,placeholderEmpty:D}=y;return typeof D<"u"&&u.length<=0?n.createElement(n.Fragment,null,D):C?n.createElement("section",{"aria-label":C},n.createElement("fieldset",null,n.createElement("div",{className:E.title},n.createElement(r.r,null,C)),n.createElement(f,{...y}))):n.createElement(f,{...y})},f=({options:y,value:E,onChange:C,title:u})=>{const D=c();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},y.map((P,S)=>n.createElement(a,{key:b(P,S),value:P,selected:v(P,E),onSelect:C,name:u??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:D.grow}))};function b(y,E){return`${y.from}-${y.to}-${E}`}function v(y,E){return!E||!y?!1:E.from===y.from&&E.to===y.to}},15672:(j,I,e)=>{"use strict";e.d(I,{O:()=>C});var t=e(89949),n=e(27702),i=e(80369),s=e(70610),r=e(28580),m=e(42844),d=e(66310);const o=M=>{const{children:R,label:O}=M,T=(0,d.wW)(l);return O?n.createElement("div",null,n.createElement("div",{className:T.header},n.createElement("span",{className:T.label},O)),R):n.createElement("div",null,R)},l=M=>({header:(0,m.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${M.colors.border.weak}`,textTransform:"capitalize"}),label:(0,m.css)({fontSize:M.typography.size.sm,color:M.colors.text.secondary,fontWeight:M.typography.fontWeightMedium})});var a=e(28981),g=e(80402),c=e(73453),h=e(11959),f=e(45701);const b="tz-utc-offset",v=M=>{const{children:R,innerProps:O,innerRef:T,data:U,isSelected:L,isFocused:V}=M,w=(0,d.l4)(),K=E(w),B=Date.now(),W=(0,m.cx)(K.container,V&&K.containerFocused);if(!(0,t.isString)(U.value))return null;const _=(0,i.Pr)(U.value,B);return n.createElement("div",{className:W,...O,ref:T,"aria-label":"Select option"},n.createElement("div",{className:(0,m.cx)(K.leftColumn,K.row)},n.createElement("div",{className:(0,m.cx)(K.leftColumn,K.wideRow)},n.createElement(f.d,{title:R}),n.createElement("div",{className:K.spacer}),n.createElement(h.K,{info:_})),n.createElement("div",{className:K.rightColumn},n.createElement(a.v,{timeZone:_?.ianaName||U.value,timestamp:B,className:b}),L&&n.createElement("span",null,n.createElement(c.J,{name:"check"})))))},y=M=>{const{children:R,innerProps:O,innerRef:T,data:U,isSelected:L,isFocused:V}=M,w=(0,d.l4)(),K=E(w),B=Date.now(),W=(0,m.cx)(K.container,V&&K.containerFocused);if(!(0,t.isString)(U.value))return null;const _=(0,i.Pr)(U.value,B);return n.createElement("div",{className:W,...O,ref:T,"aria-label":"Select option"},n.createElement("div",{className:K.body},n.createElement("div",{className:K.row},n.createElement("div",{className:K.leftColumn},n.createElement(f.d,{title:R})),n.createElement("div",{className:K.rightColumn},L&&n.createElement("span",null,n.createElement(c.J,{name:"check"})))),n.createElement("div",{className:K.row},n.createElement("div",{className:K.leftColumn},n.createElement(h.K,{info:_})),n.createElement("div",{className:K.rightColumn},n.createElement(a.v,{timestamp:B,timeZone:_?.ianaName||U.value,className:b})))))},E=(0,g.B)(M=>({container:(0,m.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:M.colors.action.hover}}),containerFocused:(0,m.css)({background:M.colors.action.hover}),body:(0,m.css)({display:"flex",fontWeight:M.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,m.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,m.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,m.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,m.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,m.css)({marginLeft:"6px"})})),C=M=>{const{onChange:R,width:O,autoFocus:T=!1,onBlur:U,value:L,includeInternal:V=!1,disabled:w=!1,inputId:K,menuShouldPortal:B=!0,openMenuOnFocus:W=!0}=M,_=u(V),k=D(_,L),A=S(),z=O&&O<=45?y:v,H=(0,n.useCallback)(Q=>{if(!Q||!(0,t.isString)(Q.value))return R(L);R(Q.value)},[R,L]);return n.createElement(r.Ph,{inputId:K,value:k,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:T,menuShouldPortal:B,openMenuOnFocus:W,width:O,filterOption:A,options:_,onChange:H,onBlur:U,components:{Option:z,Group:o},disabled:w,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},u=M=>{const R=Date.now();return(0,i.$8)(M).map(T=>{const U=T.zones.reduce((L,V)=>{const w=(0,i.Pr)(V,R);return w&&L.push({label:w.name,value:w.zone,searchIndex:x(w,R)}),L},[]);return{label:T.name,options:U}})},D=(M,R)=>(0,n.useMemo)(()=>{if(R===void 0)return;const O=(0,t.toLower)(R);return M.find(U=>U.label?O.startsWith((0,t.toLower)(U.label)):P(O))?.options.find(U=>(0,t.isEmpty)(O)?U.value===i.RQ.default:(0,t.toLower)(U.value)===O)},[M,R]),P=M=>{switch(M){case i.RQ.default:case i.RQ.localBrowserTime:case i.RQ.utc:return!0;default:return!1}},S=()=>(0,n.useCallback)((M,R)=>!R||!M.data||!M.data.searchIndex?!0:M.data.searchIndex.indexOf((0,t.toLower)(R))>-1,[]),x=(M,R)=>{const O=[(0,t.toLower)(M.name),(0,t.toLower)(M.abbreviation),(0,t.toLower)((0,a.k)(R,M.zone))];for(const T of M.countries)O.push((0,t.toLower)(T.name)),O.push((0,t.toLower)(T.code));return O.join("|")}},11959:(j,I,e)=>{"use strict";e.d(I,{K:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({info:d})=>{const o=(0,i.wW)(m),l=r(d);return d?n.createElement("div",{className:o.description},l):null},r=d=>(0,n.useMemo)(()=>{const o=[];if(!d)return"";if(d.name==="Europe/Simferopol")return"Ukraine, EEST";if(d.countries.length>0){const l=d.countries[0];o.push(l.name)}return d.abbreviation&&o.push(d.abbreviation),o.join(", ")},[d]),m=d=>({description:(0,t.css)({fontWeight:"normal",fontSize:d.typography.size.sm,color:d.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},28981:(j,I,e)=>{"use strict";e.d(I,{k:()=>o,v:()=>d});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(60956),m=e(66310);const d=a=>{const{timestamp:g,timeZone:c,className:h}=a,f=(0,m.wW)(l);return(0,n.isString)(c)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(f.offset,h)},o(g,c))):null},o=(a,g)=>{const c=(0,r.dq)(a,{timeZone:g,format:"Z"});return c==="+00:00"?"UTC":`UTC${c}`},l=a=>{const g=(0,t.css)({fontWeight:"normal",fontSize:a.typography.size.sm,color:a.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,t.css)(g,{color:a.colors.text.primary,background:a.colors.background.secondary,padding:"2px 5px",borderRadius:"2px",marginLeft:"4px"})}}},45701:(j,I,e)=>{"use strict";e.d(I,{d:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({title:m})=>{const d=(0,i.wW)(r);return m?n.createElement("span",{className:d.title},m):null},r=m=>({title:(0,t.css)({fontWeight:m.typography.fontWeightRegular,textOverflow:"ellipsis"})})},63014:(j,I,e)=>{"use strict";e.d(I,{z:()=>r});var t=e(27702),n=e(74639),i=e(28580);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],r=m=>{const{onChange:d,width:o,autoFocus:l=!1,onBlur:a,value:g,disabled:c=!1,inputId:h}=m,f=(0,t.useCallback)(b=>{b.value!==void 0&&d(b.value)},[d]);return t.createElement(i.Ph,{inputId:h,value:s.find(b=>b.value===g)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:l,openMenuOnFocus:!0,width:o,options:s,onChange:f,onBlur:a,disabled:c})}},61899:(j,I,e)=>{"use strict";e.d(I,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},87192:(j,I,e)=>{"use strict";e.d(I,{J:()=>s,v:()=>r});var t=e(99633),n=e(1726),i=e(58018);function s(m,d,o){return(0,t.v9)(m)?m.isValid():n.isMathString(m)?n.isValid(m):(0,i.J)(m,{roundUp:d,timeZone:o}).isValid()}function r(m){return n.isValid(m.from)&&n.isValid(m.to)}},238:(j,I,e)=>{"use strict";e.d(I,{i:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({direction:m="horizontal"})=>{const d=(0,i.l4)(),o=r(d);return m==="vertical"?n.createElement("div",{className:o.verticalDivider}):n.createElement("hr",{className:o.horizontalDivider})};s.displayName="Divider";const r=m=>({horizontalDivider:(0,t.css)({borderTop:`1px solid ${m.colors.border.weak}`,margin:m.spacing(2,0),width:"100%"}),verticalDivider:(0,t.css)({borderRight:`1px solid ${m.colors.border.weak}`,margin:m.spacing(0,.5),height:"100%"})})},14574:(j,I,e)=>{"use strict";e.d(I,{d:()=>h});var t=e(42844),n=e(45809),i=e(91546),s=e(6714),r=e(63451),m=e(27702),d=e(78089),o=e(74639),l=e(66310),a=e(66670),g=e(29372),c=e(21323);function h({children:y,onClose:E,closeOnMaskClick:C=!0,scrollableContent:u=!1,title:D,subtitle:P,width:S,size:x="md",tabs:M}){const R=(0,l.wW)(v),O=m.useRef(null),{dialogProps:T,titleProps:U}=(0,n.R)({},O),{overlayProps:L}=(0,s.Ir)({isDismissable:!1,isOpen:!0,onClose:E},O);b(),(0,d.Z)(O,C?E:f);const V=(0,t.cx)(R.drawer,!S&&R.sizes[x]),w=m.createElement("div",{className:R.content},y);return m.createElement(r.Z,{open:!0,onClose:E,placement:"right",width:S??"",getContainer:".main-view",className:R.drawerContent,rootClassName:V,motion:{motionAppear:!0,motionName:R.drawerMotion},maskClassName:R.mask,maskClosable:C,maskMotion:{motionAppear:!0,motionName:R.maskMotion}},m.createElement(i.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},m.createElement("div",{"aria-label":typeof D=="string"?o.wl.components.Drawer.General.title(D):o.wl.components.Drawer.General.title("no title"),className:R.container,...L,...T,ref:O},typeof D=="string"&&m.createElement("div",{className:(0,t.cx)(R.header,!!M&&R.headerWithTabs)},m.createElement("div",{className:R.actions},m.createElement(a.zx,{icon:"times",variant:"secondary",fill:"text",onClick:E,"aria-label":o.wl.components.Drawer.General.close})),m.createElement("div",{className:R.titleWrapper},m.createElement(c.x,{element:"h3",...U},D),P&&m.createElement("div",{className:R.subtitle},P),M&&m.createElement("div",{className:R.tabsWrapper},M))),typeof D!="string"&&D,m.createElement("div",{className:R.contentScroll},u?m.createElement(g.$,{autoHeightMin:"100%"},w):w))))}function f(){}function b(){(0,m.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const v=y=>({container:(0,t.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0"}),drawer:(0,t.css)({".main-view &":{top:"81px"},".main-view--search-bar-hidden &":{top:"41px"},".rc-drawer-content-wrapper":{boxShadow:y.shadows.z3,[y.breakpoints.down("sm")]:{width:`calc(100% - ${y.spacing(2)}) !important`,minWidth:"0 !important"}}}),sizes:{sm:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-sm",width:"25vw",minWidth:y.spacing(48)}}),md:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-md",width:"50vw",minWidth:y.spacing(60)}}),lg:(0,t.css)({".rc-drawer-content-wrapper":{label:"drawer-lg",width:"75vw",minWidth:y.spacing(93),[y.breakpoints.down("md")]:{width:`calc(100% - ${y.spacing(2)}) !important`,minWidth:0}}})},drawerContent:(0,t.css)({backgroundColor:`${y.colors.background.primary} !important`,display:"flex",flexDirection:"column",overflow:"hidden",zIndex:y.zIndex.dropdown}),drawerMotion:(0,t.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${y.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,t.css)({backgroundColor:`${y.components.overlay.background} !important`,backdropFilter:"blur(1px)"}),maskMotion:(0,t.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:y.transitions.create("opacity")}}}),header:(0,t.css)({flexGrow:0,padding:y.spacing(3,2),borderBottom:`1px solid ${y.colors.border.weak}`}),headerWithTabs:(0,t.css)({borderBottom:"none"}),actions:(0,t.css)({position:"absolute",right:y.spacing(1),top:y.spacing(2)}),titleWrapper:(0,t.css)({overflowWrap:"break-word"}),subtitle:(0,t.css)({color:y.colors.text.secondary,paddingTop:y.spacing(1)}),content:(0,t.css)({padding:y.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({minHeight:0,flex:1}),tabsWrapper:(0,t.css)({paddingLeft:y.spacing(2),margin:y.spacing(2,-1,-3,-3)})})},70725:(j,I,e)=>{"use strict";e.d(I,{d:()=>f});var t=e(42844),n=e(13168),i=e(91546),s=e(5980),r=e(5927),m=e(27702),d=e(66310),o=e(77720),l=e(8430),a=e(89746),g=e(79655),c=e(30973);const h=v=>{const{className:y,options:E,value:C,onChange:u,narrow:D,variant:P,...S}=v,x=(0,d.wW)(b),M=(0,r.W)({}),R=m.useRef(null),{menuTriggerProps:O,menuProps:T}=(0,s.u4)({},M,R),{buttonProps:U}=(0,n.U)(O,R),L=V=>{u(V),M.close()};return m.createElement(o.h,{className:x.wrapper},m.createElement(c.h,{className:y,isOpen:M.isOpen,narrow:D,variant:P,ref:R,...U,...S},C?.label||(C?.value!=null?String(C?.value):null)),M.isOpen&&m.createElement("div",{className:x.menuWrapper},m.createElement(l.L,{onClick:M.close,parent:document,includeButtonPress:!1},m.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},m.createElement(a.v,{tabIndex:-1,onClose:M.close,...T,autoFocus:!!T.autoFocus},E.map(V=>m.createElement(g.s,{key:`${V.value}`,label:V.label??String(V.value),onClick:()=>L(V),active:V.value===C?.value,ariaChecked:V.value===C?.value,ariaLabel:V.ariaLabel||V.label,role:"menuitemradio"})))))))};h.displayName="ButtonSelect";const f=m.memo(h),b=v=>({wrapper:(0,t.css)({position:"relative",display:"inline-flex"}),menuWrapper:(0,t.css)({position:"absolute",zIndex:v.zIndex.dropdown,top:v.spacing(4),right:0})})},80434:(j,I,e)=>{"use strict";e.d(I,{L:()=>o});var t=e(42844),n=e(91546),i=e(27702),s=e(66609),r=e(42358),m=e(66258),d=e(52995);const o=i.memo(({children:a,overlay:g,placement:c,offset:h,onVisibleChange:f})=>{const[b,v]=(0,i.useState)(!1),y=(0,i.useRef)(null);(0,i.useEffect)(()=>{f?.(b)},[f,b]);const{getArrowProps:E,getTooltipProps:C,setTooltipRef:u,setTriggerRef:D,visible:P}=(0,s.O)({visible:b,placement:c,onVisibleChange:v,interactive:!0,delayHide:0,delayShow:0,offset:h??[0,8],trigger:["click"]}),S=150,x=l(S),M=()=>{v(!1)},R=O=>{(O.key==="Escape"||O.key==="Tab")&&v(!1)};return i.createElement(i.Fragment,null,i.cloneElement(a,{ref:D}),P&&i.createElement(d.h_,null,i.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},i.createElement("div",{ref:u,...C(),onClick:M,onKeyDown:R},i.createElement("div",{...E({className:"tooltip-arrow"})}),i.createElement(r.Z,{nodeRef:y,appear:!0,in:!0,timeout:{appear:S,exit:0,enter:0},classNames:x},i.createElement("div",{ref:y},m.renderOrCallToRender(g,{})))))))});o.displayName="Dropdown";const l=a=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${a}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${a}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},10701:(j,I,e)=>{"use strict";e.d(I,{K:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({children:m})=>{const d=(0,i.wW)(r);return n.createElement("div",{className:d.container},m)},r=m=>({container:(0,t.css)({borderLeft:`3px solid ${m.colors.info.main}`,backgroundColor:`${m.colors.background.secondary}`,padding:m.spacing(2),minWidth:"350px",borderRadius:m.shape.radius.default,marginBottom:m.spacing(4)})})},37647:(j,I,e)=>{"use strict";e.d(I,{Pf:()=>d,SV:()=>r,z4:()=>m});var t=e(27702),n=e(75308),i=e(63439),s=e(13431);class r extends t.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(l,a){n.s?.api?.pushError(l),this.setState({error:l,errorInfo:a}),this.props.onError&&this.props.onError(l)}componentDidUpdate(l){const{dependencies:a,onRecover:g}=this.props;if(this.state.error&&a&&l.dependencies){for(let c=0;c<a.length;c++)if(a[c]!==l.dependencies[c]){this.setState({error:null,errorInfo:null}),g&&g();break}}}render(){const{children:l}=this.props,{error:a,errorInfo:g}=this.state;return l({error:a,errorInfo:g})}}class m extends t.PureComponent{render(){const{title:l,children:a,style:g,dependencies:c}=this.props;return t.createElement(r,{dependencies:c},({error:h,errorInfo:f})=>f?g==="alertbox"?t.createElement(i.b,{title:l||""},t.createElement("details",{style:{whiteSpace:"pre-wrap"}},h&&h.toString(),t.createElement("br",null),f.componentStack)):t.createElement(s.X,{title:l||"",error:h,errorInfo:f}):a)}}m.defaultProps={title:"An unexpected error happened",style:"alertbox"};function d(o,l={}){const a=g=>t.createElement(m,{...l},t.createElement(o,{...g}));return a.displayName="WithErrorBoundary",a}},13431:(j,I,e)=>{"use strict";e.d(I,{X:()=>r});var t=e(42844),n=e(27702),i=e(80402);const s=(0,i.B)(()=>(0,t.css)({width:"500px",margin:"64px auto"})),r=({error:m,errorInfo:d,title:o})=>n.createElement("div",{className:s()},n.createElement("h2",null,o),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},m&&m.toString(),n.createElement("br",null),d&&d.componentStack));r.displayName="ErrorWithStack"},79399:(j,I,e)=>{"use strict";e.d(I,{A_:()=>b,Yo:()=>c});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(32335),m=e(42079),d=e(21609),o=e(66310),l=e(63439),a=e(73453),g=e(35845);function c({options:u,children:D,readAs:P,onLoad:S,fileListRenderer:x,onFileRemove:M}){const[R,O]=(0,s.useState)([]),[T,U]=(0,s.useState)([]),L=(0,d.Cf)("decbytes")(u?.maxSize?u?.maxSize:0),V=(0,s.useCallback)((te,oe)=>{O(Z=>Z.map(le=>(le.id===te.id&&oe(le),le)))},[]),w=(0,s.useCallback)((te,oe,Z)=>{let le=te.map(E);if(u?.multiple===!1?O(le):O(ce=>[...ce,...le]),H(oe),u?.onDrop)u.onDrop(te,oe,Z);else for(const ce of le){const q=new FileReader,ne=()=>{P?q[P](ce.file):q.readAsText(ce.file)};V(ce,pe=>{pe.abortUpload=()=>{q.abort()},pe.retryUpload=()=>{V(ce,re=>{re.error=null,re.progress=void 0}),ne()}}),q.onabort=()=>{V(ce,pe=>{pe.error=new DOMException("Aborted")})},q.onprogress=pe=>{V(ce,re=>{re.progress=pe.loaded})},q.onload=()=>{S?.(q.result)},q.onerror=()=>{V(ce,pe=>{pe.error=q.error})},ne()}},[S,u,P,V]),K=te=>{const oe=R.filter(Z=>te.id!==Z.id);O(oe),M?.(te)},{getRootProps:B,getInputProps:W,isDragActive:_}=(0,r.uI)({...u,useFsAccessApi:!1,onDrop:w,accept:f(u?.accept)}),k=(0,o.l4)(),A=C(k,_),z=R.map(te=>x?x(te,K):s.createElement(g.K,{key:te.id,file:te,removeFile:K})),H=te=>{let oe=[];te.map(Z=>{Z.errors.map(le=>{oe.findIndex(ce=>ce.code===le.code&&ce.message===le.message)===-1&&oe.push(le)})}),U(oe)},Q=te=>s.createElement("div",{className:A.errorAlert},s.createElement(l.b,{title:"Upload failed",severity:"error",onRemove:X},te.map(oe=>{switch(oe.code){case m.jK.FileTooLarge:return s.createElement("div",{key:oe.message+oe.code},"File is larger than ",(0,d.zc)(L));default:return s.createElement("div",{key:oe.message+oe.code},oe.message)}}))),X=()=>{U([])};return s.createElement("div",{className:A.container},s.createElement("div",{"data-testid":"dropzone",...B({className:A.dropzone})},s.createElement("input",{...W()}),D??s.createElement(b,{primaryText:v(R,u)})),T.length>0&&Q(T),s.createElement("small",{className:(0,t.cx)(A.small,A.acceptContainer)},u?.maxSize&&`Max file size: ${(0,d.zc)(L)}`,u?.maxSize&&u?.accept&&s.createElement("span",{className:A.acceptSeparator},"|"),u?.accept&&y(u.accept)),z)}function h(u){return["txt","json","csv","xls","yml"].some(D=>u.match(D))?"text/plain":"application/octet-stream"}function f(u){return(0,n.isString)(u)?{[h(u)]:[u]}:Array.isArray(u)?u.reduce((D,P)=>{const S=h(P);return D[S]=D[S]?[...D[S],P]:[P],D},{}):u}function b({primaryText:u="Drop file here or click to upload",secondaryText:D=""}){const P=(0,o.l4)(),S=C(P);return s.createElement("div",{className:(0,t.cx)(S.defaultDropZone),"data-testid":"file-drop-zone-default-children"},s.createElement(a.J,{className:(0,t.cx)(S.icon),name:"upload",size:"xl"}),s.createElement("h6",{className:(0,t.cx)(S.primaryText)},u),s.createElement("small",{className:S.small},D))}function v(u,D){return D?.multiple===void 0||D?.multiple?"Upload file":u.length?"Replace file":"Upload file"}function y(u){return(0,n.isString)(u)?`Accepted file type: ${u}`:Array.isArray(u)?`Accepted file types: ${u.join(", ")}`:`Accepted file types: ${Object.values(u).flat().join(", ")}`}function E(u){return{id:(0,n.uniqueId)("file"),file:u,error:null}}function C(u,D){return{container:(0,t.css)({display:"flex",flexDirection:"column",width:"100%",padding:u.spacing(2),borderRadius:"2px",border:`1px dashed ${u.colors.border.strong}`,backgroundColor:D?u.colors.background.secondary:u.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,t.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,t.css)({textAlign:"center"}),icon:(0,t.css)({marginBottom:u.spacing(1)}),primaryText:(0,t.css)({marginBottom:u.spacing(1)}),acceptContainer:(0,t.css)({textAlign:"center",margin:0}),acceptSeparator:(0,t.css)({margin:`0 ${u.spacing(1)}`}),small:(0,t.css)({color:u.colors.text.secondary}),errorAlert:(0,t.css)({paddingTop:"10px"})}}},35845:(j,I,e)=>{"use strict";e.d(I,{K:()=>a});var t=e(42844),n=e(27702),i=e(21609),s=e(66310),r=e(56160),m=e(66670),d=e(73453),o=e(67437);const l="Remove file";function a({file:c,removeFile:h}){const f=(0,s.wW)(g),{file:b,progress:v,error:y,abortUpload:E,retryUpload:C}=c,u=()=>y?n.createElement(n.Fragment,null,n.createElement("span",{className:f.error},y.message),C&&n.createElement(o.h,{name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:C}),h&&n.createElement(o.h,{className:C?f.marginLeft:"",name:"trash-alt",onClick:()=>h(c),tooltip:l})):v&&b.size>v?n.createElement(n.Fragment,null,n.createElement("progress",{className:f.progressBar,max:b.size,value:v}),n.createElement("span",{className:f.paddingLeft},Math.round(v/b.size*100),"%"),E&&n.createElement(m.zx,{variant:"secondary",type:"button",fill:"text",onClick:E},"Cancel upload")):h&&n.createElement(o.h,{name:"trash-alt",onClick:()=>h(c),tooltip:l,tooltipPlacement:"top"}),D=(0,i.Cf)("decbytes")(b.size);return n.createElement("div",{className:f.fileListContainer},n.createElement("span",{className:f.fileNameWrapper},n.createElement(d.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:f.padding},(0,r.O)(b.name)),n.createElement("span",null,(0,i.zc)(D))),n.createElement("div",{className:f.fileNameWrapper},u()))}function g(c){return{fileListContainer:(0,t.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:c.spacing(2),border:`1px dashed ${c.colors.border.medium}`,backgroundColor:`${c.colors.background.secondary}`,marginTop:c.spacing(1)}),fileNameWrapper:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,t.css)({padding:c.spacing(0,1)}),paddingLeft:(0,t.css)({paddingLeft:c.spacing(2)}),marginLeft:(0,t.css)({marginLeft:c.spacing(1)}),error:(0,t.css)({paddingRight:c.spacing(2),color:c.colors.error.text}),progressBar:(0,t.css)({borderRadius:c.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:c.colors.border.weak,borderRadius:c.shape.radius.default},"::-webkit-progress-value":{backgroundColor:c.colors.primary.main,borderRadius:c.shape.radius.default}})}}},63844:(j,I,e)=>{"use strict";e.d(I,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(79399),n=e(35845)},2576:(j,I,e)=>{"use strict";e.d(I,{p:()=>a});var t=e(42844),n=e(27702),i=e(66117),s=e(74639),r=e(66310),m=e(97289),d=e(56160),o=e(66670),l=e(73453);const a=({onFileUpload:c,className:h,children:f="Upload file",accept:b="*",size:v="md",showFileName:y})=>{const E=(0,r.wW)(g(v)),[C,u]=(0,n.useState)(""),D=(0,i.Z)(),P=(0,n.useCallback)(S=>{const x=S.currentTarget?.files?.[0];x&&u(x.name??""),c(S)},[c]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:D,className:E.fileUpload,onChange:P,multiple:!1,accept:b,"data-testid":s.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:D,className:(0,t.cx)(E.labelWrapper,h)},n.createElement(l.J,{name:"upload",className:E.icon}),f),y&&C&&n.createElement("span",{"aria-label":"File name",className:E.fileName,"data-testid":s.wl.components.FileUpload.fileNameSpan},(0,d.O)(C)))},g=c=>h=>{const f=(0,o.fW)({theme:h,variant:"primary",size:c,iconOnly:!1}),b=(0,m.getFocusStyles)(h);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":b,"&:focus-visible + label":b}),labelWrapper:f.button,icon:f.icon,fileName:(0,t.css)({marginLeft:h.spacing(.5)})}}},33716:(j,I,e)=>{"use strict";e.d(I,{H:()=>d});var t=e(27702),n=e(95676);function i(...o){const l=t.useRef(null);return t.useEffect(()=>{o.forEach(a=>{a&&(typeof a=="function"?a(l.current):a.current=l.current)})},[o]),l}var s=e(66670),r=e(73453),m=e(1128);const d=t.forwardRef(({value:o,width:l,onChange:a,escapeRegex:g=!0,...c},h)=>{const f=t.useRef(null),b=i(h,f),v=o!==""?t.createElement(s.zx,{icon:"times",fill:"text",size:"sm",onClick:y=>{f.current?.focus(),a(""),y.stopPropagation()}},"Clear"):null;return t.createElement(m.I,{prefix:t.createElement(r.J,{name:"search"}),suffix:v,width:l,type:"text",value:g?(0,n.x6)(o??""):o,onChange:y=>a(g?(0,n.GE)(y.currentTarget.value):y.currentTarget.value),...c,ref:b})});d.displayName="FilterInput"},81520:(j,I,e)=>{"use strict";e.d(I,{B:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(66670),r=e(73453);const m=({label:o,selected:l,onClick:a,icon:g="check"})=>{const c=(0,i.wW)(d),h=(0,i.wW)(s.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(h,c.wrapper,l&&c.selected),onClick:a},n.createElement("span",null,o),l&&n.createElement(r.J,{name:g,className:c.icon}))},d=o=>({wrapper:(0,t.css)({background:o.colors.background.secondary,borderRadius:o.shape.borderRadius(8),padding:o.spacing(0,2),fontSize:o.typography.bodySmall.fontSize,fontWeight:o.typography.fontWeightMedium,lineHeight:o.typography.bodySmall.lineHeight,color:o.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${o.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:o.colors.action.hover,color:o.colors.text.primary}}),selected:(0,t.css)({color:o.colors.text.primary,background:o.colors.action.selected,"&:hover":{background:o.colors.action.focus}}),icon:(0,t.css)({marginLeft:o.spacing(.5)})})},14496:(j,I,e)=>{"use strict";e.d(I,{W:()=>r});var t=e(42844),n=e(27702),i=e(60644);const s={labelWidth:6,inputWidth:12},r=({label:d,tooltip:o,labelWidth:l,inputWidth:a,inputEl:g,className:c,interactive:h,...f})=>{const b=m();return n.createElement("div",{className:(0,t.cx)(b.formField,c)},n.createElement(i.c,{width:l,tooltip:o,interactive:h},d),g||n.createElement("input",{type:"text",className:`gf-form-input ${a?`width-${a}`:""}`,...f,disabled:f.disabled}))};r.displayName="FormField",r.defaultProps=s;const m=()=>({formField:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},60644:(j,I,e)=>{"use strict";e.d(I,{c:()=>d});var t=e(89898),n=e.n(t),i=e(27702),s=e(73453),r=e(80011);const d=({children:o,isFocused:l,isInvalid:a,className:g,htmlFor:c,tooltip:h,width:f,interactive:b,...v})=>{const y=n()(g,`gf-form-label width-${f||"10"}`,{"gf-form-label--is-focused":l,"gf-form-label--is-invalid":a});return i.createElement("label",{className:y,...v,htmlFor:c},o,h&&i.createElement(r.u,{placement:"top",content:h,theme:"info",interactive:b},i.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},70944:(j,I,e)=>{"use strict";e.d(I,{W:()=>i});var t=e(27702);function n(s){return s<20?.9:s<26?.8:.6}const i=({value:s,className:r,style:m,...d})=>{const o=(s.prefix??"").length>0,l=(s.suffix??"").length>0;let a;if(m&&m.fontSize&&typeof m.fontSize=="number"){const g=m.fontSize,c=n(g);a={fontSize:g*c}}return t.createElement("div",{className:r,style:m,...d},t.createElement("div",null,o&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),l&&t.createElement("span",{style:a},s.suffix)))};i.displayName="FormattedDisplayValue"},83967:(j,I,e)=>{"use strict";e.d(I,{X:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(97289),r=e(79978);const m=n.forwardRef(({label:o,description:l,value:a,htmlValue:g,onChange:c,disabled:h,className:f,indeterminate:b,invalid:v,...y},E)=>{const C=(0,n.useCallback)(S=>{c&&c(S)},[c]),u=(0,i.l4)(),D=d(u,v),P=b?"mixed":void 0;return n.createElement("label",{className:(0,t.cx)(D.wrapper,f)},n.createElement("div",{className:D.checkboxWrapper},n.createElement("input",{type:"checkbox",className:(0,t.cx)(D.input,b&&D.inputIndeterminate),checked:a,disabled:h,onChange:C,value:g,"aria-checked":P,...y,ref:E}),n.createElement("span",{className:D.checkmark})),o&&n.createElement("span",{className:D.label},o),l&&n.createElement("span",{className:D.description},l))}),d=(o,l=!1)=>{const a=(0,r.F)(o),g=2,c=1,h=f=>l?o.colors.error.border:f;return{wrapper:(0,t.css)({display:"inline-grid",alignItems:"center",columnGap:o.spacing(c),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,t.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,s.getFocusStyles)(o),"&:focus:not(:focus-visible) + span":(0,s.getMouseFocusStyles)(o),"&:checked + span":{background:o.colors.primary.main,border:`1px solid ${h(o.colors.primary.main)}`,"&:hover":{background:o.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"4px",top:0,width:"6px",height:"12px",border:`solid ${o.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:o.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${h(o.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:o.colors.action.disabledBackground},"&:after":{borderColor:o.colors.action.disabledText}}}),inputIndeterminate:(0,t.css)({"&[aria-checked='mixed'] + span":{border:`1px solid ${h(o.colors.primary.main)}`,background:o.colors.primary.main,"&:hover":{background:o.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${o.colors.primary.contrastText}`,backgroundColor:o.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:o.colors.action.disabledBackground,border:`1px solid ${h(o.colors.error.transparent)}`,"&:after":{borderColor:o.colors.action.disabledText}}}),checkboxWrapper:(0,t.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,t.css)({position:"relative",zIndex:2,display:"inline-block",width:o.spacing(g),height:o.spacing(g),borderRadius:o.shape.borderRadius(),background:o.components.input.background,border:`1px solid ${h(o.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:h(o.components.input.borderHover)}}),label:(0,t.cx)(a.label,(0,t.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:o.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,t.cx)(a.description,(0,t.css)({gridColumnStart:2,gridRowStart:2,lineHeight:o.typography.bodySmall.lineHeight,marginTop:0}))}};m.displayName="Checkbox"},22209:(j,I,e)=>{"use strict";e.d(I,{g:()=>l});var t=e(42844),n=e(27702),i=e(80402),s=e(66310),r=e(66258),m=e(59904),d=e(79978);const o=(0,i.B)(g=>({field:(0,t.css)({display:"flex",flexDirection:"column",marginBottom:g.spacing(2)}),fieldHorizontal:(0,t.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,t.css)({marginTop:g.spacing(.5)}),fieldValidationWrapperHorizontal:(0,t.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,t.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})),l=n.forwardRef(({label:g,description:c,horizontal:h,invalid:f,loading:b,disabled:v,required:y,error:E,children:C,className:u,validationMessageHorizontalOverflow:D,htmlFor:P,...S},x)=>{const M=(0,s.l4)(),R=o(M),O=P??(0,r.getChildId)(C),T=typeof g=="string"?n.createElement(d._,{htmlFor:O,description:c},`${g}${y?" *":""}`):g,U=a({invalid:f,disabled:v,loading:b});return n.createElement("div",{className:(0,t.cx)(R.field,h&&R.fieldHorizontal,u),...S},T,n.createElement("div",null,n.createElement("div",{ref:x},n.cloneElement(C,U)),f&&E&&!h&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper,{[R.validationMessageHorizontalOverflow]:!!D})},n.createElement(m.S,null,E))),f&&E&&h&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper,R.fieldValidationWrapperHorizontal,{[R.validationMessageHorizontalOverflow]:!!D})},n.createElement(m.S,null,E)))});l.displayName="Field";function a(g){for(const c in g)g[c]===void 0&&delete g[c];return g}},56948:(j,I,e)=>{"use strict";e.d(I,{F:()=>n});var t=e(46089);const n=({name:i,control:s,children:r,...m})=>{const{fields:d,append:o,prepend:l,remove:a,swap:g,move:c,insert:h}=(0,t.Dq)({control:s,name:i,...m});return r({fields:d,append:o,prepend:l,remove:a,swap:g,move:c,insert:h})}},5229:(j,I,e)=>{"use strict";e.d(I,{C:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(80402),r=e(12375);const m=({label:o,children:l,className:a,...g})=>{const c=(0,i.l4)(),h=d(c);return n.createElement("fieldset",{className:(0,t.cx)(h.wrapper,a),...g},o&&n.createElement(r.D,null,o),l)},d=(0,s.B)(o=>({wrapper:(0,t.css)({marginBottom:o.spacing(4),"&:last-child":{marginBottom:0}})}))},59904:(j,I,e)=>{"use strict";e.d(I,{S:()=>d});var t=e(42844),n=e(27702),i=e(80402),s=e(66310),r=e(73453);const m=(0,i.B)(o=>{const l=`
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      padding: ${o.spacing(.5,1)};
      color: ${o.colors.error.contrastText};
      background: ${o.colors.error.main};
      border-radius: ${o.shape.borderRadius()};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${o.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,t.css)(l,{margin:o.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${o.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,t.css)(l,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,t.css)({marginRight:o.spacing()})}}),d=({children:o,horizontal:l,className:a})=>{const g=(0,s.l4)(),c=m(g),h=(0,t.cx)(l?c.horizontal:c.vertical,a);return n.createElement("div",{role:"alert",className:h},n.createElement(r.J,{className:c.fieldValidationMessageIcon,name:"exclamation-triangle"}),o)}},23839:(j,I,e)=>{"use strict";e.d(I,{l:()=>s});var t=e(42844),n=e(27702),i=e(46089);function s({defaultValues:r,onSubmit:m,validateOnMount:d=!1,validateFieldsOnMount:o,children:l,validateOn:a="onSubmit",maxWidth:g=600,...c}){const{handleSubmit:h,trigger:f,formState:b,...v}=(0,i.cI)({mode:a,defaultValues:r});return(0,n.useEffect)(()=>{d&&f(o)},[f,o,d]),n.createElement("form",{className:(0,t.css)({maxWidth:g!=="none"?g+"px":g,width:"100%"}),onSubmit:h(m),...c},l({errors:b.errors,formState:b,...v}))}},48024:(j,I,e)=>{"use strict";e.d(I,{_:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(66258),r=e(59904),m=e(53901);const d=({children:l,label:a,tooltip:g,labelWidth:c="auto",invalid:h,loading:f,disabled:b,required:v,className:y,htmlFor:E,grow:C,shrink:u,error:D,transparent:P,interactive:S,...x})=>{const M=(0,i.l4)(),R=o(M,C,u),O=E??(0,s.getChildId)(l),T=typeof a=="string"?n.createElement(m.W,{interactive:S,width:c,tooltip:g,htmlFor:O,transparent:P},`${a}${v?" *":""}`):a;return n.createElement("div",{className:(0,t.cx)(R.container,y),...x},T,n.createElement("div",{className:R.childContainer},n.cloneElement(l,{invalid:h,disabled:b,loading:f}),h&&D&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper)},n.createElement(r.S,null,D))))};d.displayName="InlineField";const o=(l,a,g)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${a?1:0} ${g?1:0} auto`,margin:`0 ${l.spacing(.5)} ${l.spacing(.5)} 0`}),childContainer:(0,t.css)({flex:`${a?1:0} ${g?1:0} auto`}),fieldValidationWrapper:(0,t.css)({marginTop:l.spacing(.5)})})},71107:(j,I,e)=>{"use strict";e.d(I,{Z:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({children:m,className:d,...o})=>{const l=(0,i.wW)(r);return n.createElement("div",{className:(0,t.cx)(l.container,d),...o},m)},r=m=>({container:(0,t.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:m.spacing(.5)})})},53901:(j,I,e)=>{"use strict";e.d(I,{W:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(73453),r=e(80011);const m=({children:o,className:l,tooltip:a,width:g,transparent:c,interactive:h,as:f="label",...b})=>{const v=(0,i.wW)((0,n.useCallback)(y=>d(y,c,g),[c,g]));return n.createElement(f,{className:(0,t.cx)(v.label,l),...b},o,a&&n.createElement(r.u,{interactive:h,placement:"top",content:a,theme:"info"},n.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",className:v.icon})))},d=(o,l=!1,a)=>({label:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:o.spacing(0,1),fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.size.sm,backgroundColor:l?"transparent":o.colors.background.secondary,height:o.spacing(o.components.height.md),lineHeight:o.spacing(o.components.height.md),marginRight:o.spacing(.5),borderRadius:o.shape.radius.default,border:"none",width:a?a!=="auto"?`${8*a}px`:a:"100%",color:o.colors.text.primary}),icon:(0,t.css)({color:o.colors.text.secondary,marginLeft:"10px",":hover":{color:o.colors.text.primary}})})},88413:(j,I,e)=>{"use strict";e.d(I,{m:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({children:m,className:d,grow:o,...l})=>{const a=(0,i.wW)(g=>r(g,o));return n.createElement("div",{className:(0,t.cx)(a.container,d),...l},m)};s.displayName="InlineSegmentGroup";const r=(m,d)=>({container:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${d?1:0} 0 auto`,marginBottom:m.spacing(.5)})})},79978:(j,I,e)=>{"use strict";e.d(I,{F:()=>m,_:()=>d});var t=e(42844),n=e(27702),i=e(80402),s=e(66310),r=e(73453);const m=(0,i.B)(o=>({label:(0,t.css)({label:"Label",fontSize:o.typography.size.sm,fontWeight:o.typography.fontWeightMedium,lineHeight:1.25,marginBottom:o.spacing(.5),color:o.colors.text.primary,maxWidth:"480px"}),labelContent:(0,t.css)({display:"flex",alignItems:"center"}),description:(0,t.css)({label:"Label-description",color:o.colors.text.secondary,fontSize:o.typography.size.sm,fontWeight:o.typography.fontWeightRegular,marginTop:o.spacing(.25),display:"block"}),categories:(0,t.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,t.css)({margin:o.spacing(0,.25)})})),d=({children:o,description:l,className:a,category:g,...c})=>{const h=(0,s.l4)(),f=m(h),b=g?.map((v,y)=>n.createElement("span",{className:f.categories,key:`${v}/${y}`},n.createElement("span",null,v),n.createElement(r.J,{name:"angle-right",className:f.chevron})));return n.createElement("div",{className:(0,t.cx)(f.label,a)},n.createElement("label",{...c},n.createElement("div",{className:f.labelContent},b,o),l&&n.createElement("span",{className:f.description},l)))}},83670:(j,I,e)=>{"use strict";e.d(I,{G:()=>r,I:()=>m});var t=e(89898),n=e.n(t),i=e(27702),s=e(61203),r=(d=>(d.Invalid="invalid",d.Valid="valid",d))(r||{});class m extends i.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=o=>l=>{const a=(0,s.Gu)(l.target.value,o);this.setState(g=>({...g,error:a?a[0]:null}))},this.populateEventPropsWithStatus=(o,l)=>{const a={...o};return l&&Object.keys(s.JU).forEach(g=>{((0,s.z3)(g,l)||o[g])&&(a[g]=async c=>{c.persist(),(0,s.z3)(g,l)&&await this.validatorAsync(l[g]).apply(this,[c]),o[g]&&o[g].apply(null,[c,this.status])})}),a}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:o,className:l,hideErrorMessage:a,inputRef:g,...c}=this.props,{error:h}=this.state,f=n()("gf-form-input",{invalid:this.isInvalid},l),b=this.populateEventPropsWithStatus(c,o);return i.createElement("div",{style:{flexGrow:1}},i.createElement("input",{...b,ref:g,className:f}),h&&!a&&i.createElement("span",null,h))}}m.defaultProps={className:""}},39520:(j,I,e)=>{"use strict";e.d(I,{B:()=>s,Z:()=>r});var t=e(27702),n=e(38581),i=e(73453);const s=m=>{const d=m.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...m},t.createElement(i.J,{name:d?"angle-up":"angle-down",style:{marginTop:"7px"}}))},r=s},33261:(j,I,e)=>{"use strict";e.d(I,{P:()=>i,Z:()=>s});var t=e(27702),n=e(38581);const i=r=>{const{children:m}=r;return t.createElement(n.c.NoOptionsMessage,{...r},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},m)))},s=i},49918:(j,I,e)=>{"use strict";e.d(I,{qb:()=>P,Ph:()=>D});var t=e(89898),n=e.n(t),i=e(27702),s=e(38581),r=e(98330),m=e(19590),d=e(2004),o=e(66310),l=e(29372),a=e(42197),g=e(91987),c=e(69213),h=e(80011),f=e(39520),b=e(33261),v=e(73453);const y=M=>{const{children:R,isSelected:O,data:T}=M;return i.createElement(s.c.Option,{...M},i.createElement("div",{className:"gf-form-select-box__desc-option"},T.imgUrl&&i.createElement("img",{className:"gf-form-select-box__desc-option__img",src:T.imgUrl,alt:""}),i.createElement("div",{className:"gf-form-select-box__desc-option__body"},i.createElement("div",null,R),T.description&&i.createElement("div",{className:"gf-form-select-box__desc-option__desc"},T.description)),O&&i.createElement(v.J,{name:"check","aria-hidden":"true"})))},E=null,C=M=>i.createElement(s.c.MenuList,{...M},i.createElement(l.$,{autoHide:!1,autoHeightMax:"inherit"},M.children)),u=class extends i.PureComponent{render(){const{defaultValue:M,getOptionLabel:R,getOptionValue:O,onChange:T,options:U,placeholder:L,width:V,value:w,className:K,isDisabled:B,isLoading:W,isSearchable:_,isClearable:k,backspaceRemovesValue:A,isMulti:z,autoFocus:H,openMenuOnFocus:Q,onBlur:X,maxMenuHeight:te,noOptionsMessage:oe,isOpen:Z,components:le,tooltipContent:ce,tabSelectsValue:q,onCloseMenu:ne,onOpenMenu:pe,allowCustomValue:re,formatCreateLabel:ie,"aria-label":Se}=this.props;let ye="";V&&(ye="width-"+V);let Ce=r.ZP;const de={};re&&(Ce=d.Z,de.formatCreateLabel=ie??(Je=>Je));const we=n()("gf-form-input","gf-form-input--form-dropdown",ye,K),_e={...u.defaultProps.components,...le};return i.createElement(S,{onCloseMenu:ne,onOpenMenu:pe,tooltipContent:ce,isOpen:Z},(Je,Ue)=>i.createElement(Ce,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:we,components:_e,defaultValue:M,value:w,getOptionLabel:R,getOptionValue:O,menuShouldScrollIntoView:!1,isSearchable:_,onChange:T,options:U,placeholder:L||"Choose",styles:(0,c.Z)(this.context),isDisabled:B,isLoading:W,isClearable:k,autoFocus:H,onBlur:X,openMenuOnFocus:Q,maxMenuHeight:te,noOptionsMessage:oe,isMulti:z,backspaceRemovesValue:A,menuIsOpen:Z,onMenuOpen:Je,onMenuClose:Ue,tabSelectsValue:q,"aria-label":Se,...de}))}};let D=u;D.contextType=o.Ni,D.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:y,SingleValue:g.P,IndicatorsContainer:f.Z,MenuList:C,Group:a.n}};class P extends i.PureComponent{render(){const{defaultValue:R,getOptionLabel:O,getOptionValue:T,onChange:U,placeholder:L,width:V,value:w,className:K,loadOptions:B,defaultOptions:W,isLoading:_,loadingMessage:k,noOptionsMessage:A,isDisabled:z,isSearchable:H,isClearable:Q,backspaceRemovesValue:X,autoFocus:te,onBlur:oe,openMenuOnFocus:Z,maxMenuHeight:le,isMulti:ce,tooltipContent:q,onCloseMenu:ne,onOpenMenu:pe,isOpen:re}=this.props;let ie="";V&&(ie="width-"+V);const Se=n()("gf-form-input","gf-form-input--form-dropdown",ie,K);return i.createElement(S,{onCloseMenu:ne,onOpenMenu:pe,tooltipContent:q,isOpen:re},(ye,Ce)=>i.createElement(m.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Se,components:{Option:y,SingleValue:g.P,IndicatorsContainer:f.Z,NoOptionsMessage:b.Z},defaultValue:R,value:w,getOptionLabel:O,getOptionValue:T,menuShouldScrollIntoView:!1,onChange:U,loadOptions:B,isLoading:_,defaultOptions:W,placeholder:L||"Choose",styles:(0,c.Z)(this.context),loadingMessage:k,noOptionsMessage:A,isDisabled:z,isSearchable:H,isClearable:Q,autoFocus:te,onBlur:oe,openMenuOnFocus:Z,maxMenuHeight:le,isMulti:ce,backspaceRemovesValue:X}))}}P.contextType=o.Ni,P.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class S extends i.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:R}=this.props;R&&R(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:R}=this.props;R&&R(),this.setState({isOpenInternal:!1})}}render(){const{children:R,isOpen:O,tooltipContent:T}=this.props,{isOpenInternal:U}=this.state;let L;return(U||O)&&(L=!1),T?i.createElement(h.u,{show:L,content:T,placement:"bottom"},i.createElement("div",null,R(this.onOpenMenu,this.onCloseMenu))):i.createElement("div",null,R(this.onOpenMenu,this.onCloseMenu))}}const x=null},17752:(j,I,e)=>{"use strict";e.d(I,{r:()=>m});var t=e(89949),n=e.n(t),i=e(27702),s=e(73453),r=e(80011);class m extends i.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=o=>{o.stopPropagation(),this.props.onChange(o)}}render(){const{labelClass:o="",switchClass:l="",label:a,checked:g,disabled:c,transparent:h,className:f,tooltip:b,tooltipPlacement:v}=this.props,y=this.state.id,E=`gf-form-label ${o} ${h?"gf-form-label--transparent":""} pointer`,C=`gf-form-switch ${l} ${h?"gf-form-switch--transparent":""}`;return i.createElement("div",{className:"gf-form-switch-container-react"},i.createElement("label",{htmlFor:y,className:`gf-form gf-form-switch-container ${f||""}`},a&&i.createElement("div",{className:E},a,b&&i.createElement(r.u,{placement:v||"auto",content:b,theme:"info"},i.createElement(s.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}}))),i.createElement("div",{className:C},i.createElement("input",{disabled:c,id:y,type:"checkbox",checked:g,onChange:this.internalOnChange}),i.createElement("span",{className:"gf-form-switch__slider"}))))}}},12375:(j,I,e)=>{"use strict";e.d(I,{D:()=>r});var t=e(42844),n=e(27702),i=e(66310);const s=m=>({legend:(0,t.css)({fontSize:m.typography.h3.fontSize,fontWeight:m.typography.fontWeightRegular,margin:m.spacing(0,0,2,0)})}),r=({children:m,className:d,...o})=>{const l=(0,i.wW)(s);return n.createElement("legend",{className:(0,t.cx)(l.legend,d),...o},m)}},40705:(j,I,e)=>{"use strict";e.d(I,{S:()=>c});var t=e(42844),n=e(89949),i=e(27702),s=e(8553),r=e(66310),m=e(73453),d=e(80402),o=e(97289),l=e(26468);const a=i.forwardRef(({children:f,active:b=!1,disabled:v=!1,size:y="md",onChange:E,onClick:C,id:u,name:D=void 0,description:P,fullWidth:S,"aria-label":x},M)=>{const R=(0,r.l4)(),O=g(R,y,S);return i.createElement(i.Fragment,null,i.createElement("input",{type:"radio",className:O.radio,onChange:E,onClick:C,disabled:v,id:u,checked:b,name:D,"aria-label":x||P,ref:M}),i.createElement("label",{className:O.radioLabel,htmlFor:u,title:P||x},f))});a.displayName="RadioButton";const g=(0,d.B)((f,b,v)=>{const{fontSize:y,height:E,padding:C}=(0,l.iL)(b,f),u=f.colors.text.secondary,D=f.colors.text.primary,P=E*f.spacing.gridSize-4-2;return{radio:(0,t.css)({position:"absolute",opacity:0,zIndex:-1e3,"&:checked + label":{color:f.colors.text.primary,fontWeight:f.typography.fontWeightMedium,background:f.colors.action.selected,zIndex:3},"&:focus + label, &:focus-visible + label":(0,o.getFocusStyles)(f),"&:focus:not(:focus-visible) + label":(0,o.getMouseFocusStyles)(f),"&:disabled + label":{color:f.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,t.css)({display:"inline-block",position:"relative",fontSize:y,height:`${P}px`,lineHeight:`${P}px`,color:u,padding:f.spacing(0,C),borderRadius:f.shape.borderRadius(),background:f.colors.background.primary,cursor:"pointer",zIndex:1,flex:v?"1 0 0":"none",textAlign:"center",userSelect:"none",whiteSpace:"nowrap","&:hover":{color:D}})}});function c({options:f,value:b,onChange:v,onClick:y,disabled:E,disabledOptions:C,size:u="md",id:D,className:P,fullWidth:S=!1,autoFocus:x=!1,invalid:M=!1}){const R=(0,i.useCallback)(w=>()=>{v&&v(w.value)},[v]),O=(0,i.useCallback)(w=>()=>{y&&y(w.value)},[y]),T=D??(0,n.uniqueId)("radiogroup-"),U=(0,i.useRef)(T),L=(0,r.wW)(h),V=(0,i.useRef)(null);return(0,i.useEffect)(()=>{x&&V.current&&V.current.focus()},[x]),i.createElement("div",{className:(0,t.cx)(L.radioGroup,S&&L.fullWidth,M&&L.invalid,P)},f.map((w,K)=>{const B=C&&w.value&&C.includes(w.value),W=w.icon?(0,s.iJ)(w.icon):void 0,_=!!(w.imgUrl||w.label||w.component);return i.createElement(a,{size:u,disabled:B||E,active:b===w.value,key:`o.label-${K}`,"aria-label":w.ariaLabel,onChange:R(w),onClick:O(w),id:`option-${w.value}-${T}`,name:U.current,description:w.description,fullWidth:S,ref:b===w.value?V:void 0},W&&i.createElement(m.J,{name:W,className:(0,t.cx)(_&&L.icon)}),w.imgUrl&&i.createElement("img",{src:w.imgUrl,alt:w.label,className:L.img}),w.label," ",w.component?i.createElement(w.component,null):null)}))}c.displayName="RadioButtonGroup";const h=f=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${f.components.input.borderColor}`,borderRadius:f.shape.borderRadius(),padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:(0,t.css)({marginRight:"6px"}),img:(0,t.css)({width:f.spacing(2),height:f.spacing(2),marginRight:f.spacing(1)}),invalid:(0,t.css)({border:`1px solid ${f.colors.error.border}`})})},20839:(j,I,e)=>{"use strict";e.d(I,{x:()=>d});var t=e(42844),n=e(89949),i=e(27702),s=e(66310);const r=({id:l,name:a,label:g,checked:c,disabled:h,description:f,onChange:b})=>{const v=(0,s.wW)(m);return i.createElement("label",{title:f,className:v.label},i.createElement("input",{id:l,name:a,type:"radio",checked:c,disabled:h,className:v.input,onChange:()=>b&&b(l)}),g)},m=l=>({input:(0,t.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:l.colors.background.canvas,width:`${l.spacing(2)} !important`,height:l.spacing(2),border:`1px solid ${l.colors.border.medium}`,borderRadius:l.shape.radius.circle,margin:"3px 0",":checked":{backgroundColor:l.v1.palette.white,border:`5px solid ${l.colors.primary.main}`},":disabled":{backgroundColor:`${l.colors.action.disabledBackground} !important`,borderColor:l.colors.border.weak},":disabled:checked":{border:`1px solid ${l.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:l.colors.text.disabled,borderRadius:l.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${l.colors.background.canvas}, 0 0 0 3px ${l.colors.primary.main}`}}),label:(0,t.css)({fontSize:l.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${l.spacing(2)} auto`,gap:l.spacing(1)})});function d({name:l,id:a,options:g,value:c,onChange:h,className:f,disabled:b,disabledOptions:v=[]}){const y=(0,s.wW)(o),E=a??(0,n.uniqueId)("radiogroup-list-");return i.createElement("div",{id:a,className:(0,t.cx)(y.container,f),role:"radiogroup"},g.map((C,u)=>{const D=`${E}-${u}`,P=c&&c===C.value,S=b||v.some(M=>M===C.value),x=()=>h&&C.value&&h(C.value);return i.createElement(r,{key:D,id:D,name:l,label:C.label,description:C.description,checked:P,disabled:S,onChange:x})}))}const o=l=>({container:(0,t.css)({display:"grid",gap:l.spacing(1)})})},26468:(j,I,e)=>{"use strict";e.d(I,{GL:()=>i,RK:()=>s,ht:()=>m,iL:()=>o,nf:()=>r});var t=e(42844),n=e(97289);const i=l=>(0,t.css)({"&:focus":(0,n.getFocusStyles)(l)}),s=(l,a=!1)=>{const g=a?l.colors.error.border:l.components.input.borderColor,c=a?l.colors.error.shade:l.components.input.borderHover,h=l.components.input.background,f=l.components.input.text,b=l.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(r(l),(0,t.css)({background:h,lineHeight:l.typography.body.lineHeight,fontSize:l.typography.size.md,color:f,border:`1px solid ${g}`,"&:-webkit-autofill, &:-webkit-autofill:hover":{boxShadow:`inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${h}!important`,WebkitTextFillColor:`${f} !important`,borderColor:b},"&:-webkit-autofill:focus":{boxShadow:`0 0 0 2px ${l.colors.background.primary}, 0 0 0px 4px ${l.colors.primary.main}, inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${h}!important`,WebkitTextFillColor:`${f} !important`},"&:hover":{borderColor:c},"&:focus":{outline:"none"},"&:disabled":{backgroundColor:l.colors.action.disabledBackground,color:l.colors.action.disabledText,border:`1px solid ${l.colors.action.disabledBackground}`,"&:hover":{borderColor:g}},"&::placeholder":{color:l.colors.text.disabled,opacity:1}}))},r=l=>(0,t.css)({padding:l.spacing(0,1,0,1)}),m=()=>({sm:(0,t.css)({width:d("sm")}),md:(0,t.css)({width:d("md")}),lg:(0,t.css)({width:d("lg")}),auto:(0,t.css)({width:d("auto")})}),d=l=>{switch(l){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function o(l,a){switch(l){case"sm":return{padding:1,fontSize:a.typography.size.sm,height:a.components.height.sm};case"lg":return{padding:3,fontSize:a.typography.size.lg,height:a.components.height.lg};case"md":default:return{padding:2,fontSize:a.typography.size.md,height:a.components.height.md}}}},59870:(j,I,e)=>{"use strict";e.d(I,{a:()=>f});var t=e(7610),n=e.n(t),i=e(27702),s=e(21609),r=e(34239),m=e(5168),d=e(11724),o=e(66670),l=e(93666),a=e(77104);const g={mode:m.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function c(b,v,y){const E=y!=null,C=Math.min(b*.15/1.5,20),u=C*1.5,D=E?v-u:v,P=Math.min(D,b);return{showLabel:E,gaugeHeight:P,titleFontSize:C}}function h(b,v,y,E){if(v.color?.mode!==l.S.Thresholds)return[{value:v.min??r.Hx,color:y.color??l.R}];const C=v.thresholds??g,u=C.mode===m.H.Percentage,D=C.steps;let P=v.min??r.Hx,S=v.max??r.Z3;u&&(P=0,S=100);const x=(0,a.m1)(P,D),M=(0,a.m1)(S,D),R=[{value:+P.toFixed(b),color:E.visualization.getColorByName(x.color)}];let O=!0;for(let T=0;T<D.length;T++){const U=D[T];if(O){x===U&&(O=!1);continue}const L=D[T-1];if(R.push({value:U.value,color:E.visualization.getColorByName(L.color)}),U===M)break}return R.push({value:+S.toFixed(b),color:E.visualization.getColorByName(M.color)}),R}class f extends i.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:v,value:y,height:E,onClick:C,text:u,theme:D}=this.props,P=c(v,E,y.title),S=i.createElement("div",{style:{height:`${P.gaugeHeight}px`,width:"100%"},ref:x=>this.canvasElement=x});return i.createElement(i.Fragment,null,C?i.createElement("button",{className:(0,o.gN)(D),type:"button",onClick:C},S):S,P.showLabel&&i.createElement("div",{style:{textAlign:"center",fontSize:u?.titleSize??P.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"}},y.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:v,showThresholdLabels:y,showThresholdMarkers:E,width:C,height:u,theme:D,value:P}=this.props,S=c(C,u,P.title),x=Math.min(C,S.gaugeHeight),M=D.colors.background.secondary,R=y?1.5:1,O=Math.min(x/5.5,40)/R,T=O/5,U=(0,s.zc)(P),V=Math.min(C,x*1.3)*.9-((O+(E?T:0)+(y?10:0))*2+10),w=this.props.text?.valueSize??(0,d.MX)(U,V,x,1,O*1.7),K=Math.max(w/2.5,12);let B=v.min??r.Hx,W=v.max??r.Z3,_=P.numeric;v.thresholds?.mode===m.H.Percentage&&(B=0,W=100,P.percent===void 0?_=(_-B)/(W-B)*100:_=P.percent*100);const k=v.decimals===void 0?2:v.decimals;E&&(B=+B.toFixed(k),W=+W.toFixed(k));const A={series:{gauges:{gauge:{min:B,max:W,neutralValue:v.custom?.neutral,background:{color:M},border:{color:null},shadow:{show:!1},width:O},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:h(k,v,P,D),label:{show:y,margin:T+1,font:{size:K}},show:E,width:T},value:{color:P.color,formatter:()=>U,font:{size:w,family:D.typography.fontFamily}},show:!0}}},z={data:[[0,_]],label:P.title};try{this.canvasElement&&n().plot(this.canvasElement,[z],A)}catch(H){console.error("Gauge rendering error",H,A,P)}}render(){return i.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}f.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:g}}},41115:(j,I,e)=>{"use strict";e.d(I,{k:()=>v});var t=e(7610),n=e.n(t),i=e(89949),s=e(27702),r=e(45641),m=e(64167),d=e(727),o=e(36149),l=e(73014),a=e(84143);const g=({dimensions:E,activeDimensions:C,pos:u,timeZone:D})=>{let P=null;if(C.xAxis===null)return null;C.yAxis&&(P=C.yAxis[0]);const S=C.xAxis[1]?(0,r.jC)(E.xAxis,C.xAxis[0],C.xAxis[1]):u.x,x=(0,a.wu)(E.yAxis.columns,E.xAxis.columns,S,D),M=x.time,R=x.results.map((O,T)=>({color:O.color,label:O.label,value:O.value,isActive:P===T}));return s.createElement(l.c,{series:R,timestamp:M})};g.displayName="MultiModeGraphTooltip";var c=e(21609),h=e(75578);const f=({dimensions:E,activeDimensions:C,timeZone:u})=>{if(C.yAxis===null||C.yAxis[1]===void 0||C.xAxis===null||C.xAxis[1]===void 0)return null;const D=(0,r.jC)(E.xAxis,C.xAxis[0],C.xAxis[1]),P=(0,r.$q)(E.xAxis,C.xAxis[0]),S=P.display?(0,c.zc)(P.display(D)):D,x=(0,r.$q)(E.yAxis,C.yAxis[0]),M=(0,r.jC)(E.yAxis,C.yAxis[0],C.yAxis[1]),R=x.display,O=R(M);return s.createElement(l.c,{series:[{color:O.color,label:(0,h.CZ)(x),value:(0,c.zc)(O)}],timestamp:S})};f.displayName="SingleModeGraphTooltip";const b=({mode:E=m.f3.Single,dimensions:C,activeDimensions:u,pos:D,timeZone:P})=>!u||!u.xAxis?null:E==="single"?s.createElement(f,{dimensions:C,activeDimensions:u,timeZone:P}):s.createElement(g,{dimensions:C,activeDimensions:u,pos:D,timeZone:P});b.displayName="GraphTooltip";class v extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.onPlotSelected=(C,u)=>{const{onHorizontalRegionSelected:D}=this.props;D&&D(u.xaxis.from,u.xaxis.to)},this.onPlotHover=(C,u,D)=>{this.setState({isTooltipVisible:!0,activeItem:D,pos:u})},this.onPlotClick=(C,u,D)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:D,contextPos:u})},this.renderTooltip=()=>{const{children:C,series:u,timeZone:D}=this.props,{pos:P,activeItem:S,isTooltipVisible:x}=this.state;let M;if(!x||!P||u.length===0||(s.Children.forEach(C,B=>{if(M)return;(B&&B.type&&(B.type.displayName||B.type.name))===d.I.displayName&&(M=B)}),!M))return null;const R=M.props,O=R.mode||"single";if(!S&&O==="single")return null;const T=R.tooltipComponent||b,U=S?S.series.seriesIndex:0,L=S?S.dataIndex:void 0,V={xAxis:[U,L],yAxis:S?[S.series.seriesIndex,S.dataIndex]:null},w={dimensions:{xAxis:(0,r.q2)("xAxis",u.map(B=>B.timeField)),yAxis:(0,r.q2)("yAxis",u.map(B=>B.valueField))},activeDimensions:V,pos:P,mode:R.mode||m.f3.Single,timeZone:D},K=s.createElement(T,{...w});return s.cloneElement(M,{content:K,position:{x:P.pageX,y:P.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:C}=this.props,{contextPos:u,contextItem:D,isContextVisible:P}=this.state;if(!P||!u||!D||C.length===0)return null;const S=D?D.series.seriesIndex:0,x=D?D.dataIndex:void 0,M={xAxis:[S,x],yAxis:D?[D.series.seriesIndex,D.dataIndex]:null},R={xAxis:(0,r.q2)("xAxis",C.map(L=>L.timeField)),yAxis:(0,r.q2)("yAxis",C.map(L=>L.valueField))},O=()=>this.setState({isContextVisible:!1}),T=()=>({datapoint:D.datapoint,dataIndex:D.dataIndex,series:D.series,seriesIndex:D.series.seriesIndex,pageX:u.pageX,pageY:u.pageY}),U={x:u.pageX,y:u.pageY,onClose:O,getContextMenuSource:T,timeZone:this.props.timeZone,dimensions:R,contextDimensions:M};return s.createElement(o.w,{...U})},this.getBarWidth=()=>{const{series:C}=this.props;return Math.min(...C.map(u=>u.timeStep))}}componentDidUpdate(C,u){C!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(C){return C.length===0?[{show:!0,min:-1,max:1}]:(0,i.uniqBy)(C.map(u=>{const D=u.yAxis?u.yAxis.index:1,P=u.yAxis&&u.yAxis.min&&!isNaN(u.yAxis.min)?u.yAxis.min:null,S=u.yAxis&&u.yAxis.tickDecimals&&!isNaN(u.yAxis.tickDecimals)?u.yAxis.tickDecimals:null;return{show:!0,index:D,position:D===1?"left":"right",min:P,tickDecimals:S}}),u=>u.index)}draw(){if(this.element===null)return;const{width:C,series:u,timeRange:D,showLines:P,showBars:S,showPoints:x,isStacked:M,lineWidth:R,timeZone:O,onHorizontalRegionSelected:T}=this.props;if(!C)return;const U=C/100,L=D.from.valueOf(),V=D.to.valueOf(),w=this.getYAxes(u),K={legend:{show:!1},series:{stack:M,lines:{show:P,lineWidth:R,zero:!1},points:{show:x,fill:1,fillColor:!1,radius:2},bars:{show:S,fill:1,barWidth:S?this.getBarWidth()/1.5:1,zero:!1,lineWidth:R},shadowSize:0},xaxis:{timezone:O,show:!0,mode:"time",min:L,max:V,label:"Datetime",ticks:U,timeformat:(0,a.mc)(U,L,V),tickFormatter:a.sV},yaxes:w,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:T?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,u.filter(B=>B.isVisible),K)}catch(B){throw console.error("Graph rendering error",B,K,u),new Error("Error rendering panel")}}render(){const{ariaLabel:C,height:u,width:D,series:P}=this.props,S=P.length===0,x=this.renderTooltip(),M=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":C},s.createElement("div",{className:"graph-panel__chart",ref:R=>this.element=R,style:{height:u,width:D},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),S&&s.createElement("div",{className:"datapoints-warning"},"No data"),x,M)}}v.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const y=null},36149:(j,I,e)=>{"use strict";e.d(I,{b:()=>h,w:()=>c});var t=e(42844),n=e(27702),i=e(45641),s=e(60956),r=e(66310),m=e(14986),d=e(70944),o=e(64022),l=e(66711),a=e(79655),g=e(31297);const c=({getContextMenuSource:b,timeZone:v,itemsGroup:y,dimensions:E,contextDimensions:C,...u})=>{const D=b(),P=y?y.map(M=>({...M,items:M.items?.filter(R=>R.label)})):[],S=()=>{if(!D)return null;let M;if(E?.yAxis&&C?.yAxis?.[1]){const O=(0,i.jC)(E.yAxis,C.yAxis[0],C.yAxis[1]),T=D.series.valueField.display;M=T(O)}const R=(0,s.dq)(D.datapoint[0],{defaultWithMS:D.series.hasMsResolution,timeZone:v});return n.createElement(h,{timestamp:R,seriesColor:D.series.color,displayName:D.series.alias||D.series.label,displayValue:M})},x=()=>P?.map((M,R)=>n.createElement(l.k,{key:`${M.label}${R}`,label:M.label},(M.items||[]).map(O=>n.createElement(a.s,{key:`${O.label}`,url:O.url,label:O.label,target:O.target,icon:O.icon,active:O.active,onClick:O.onClick}))));return n.createElement(m.x,{...u,renderMenuItems:x,renderHeader:S})},h=({timestamp:b,seriesColor:v,displayName:y,displayValue:E})=>{const C=(0,r.wW)(f);return n.createElement("div",{className:C.wrapper},n.createElement("strong",null,b),n.createElement(o.Lh,null,n.createElement("div",null,n.createElement(g.F,{color:v}),n.createElement("span",{className:C.displayName},y)),E&&n.createElement(d.W,{value:E})))};function f(b){return{wrapper:(0,t.css)({padding:b.spacing(.5,1),fontSize:b.typography.size.sm,zIndex:b.zIndex.tooltip}),displayName:(0,t.css)({whiteSpace:"nowrap",paddingLeft:b.spacing(.5)})}}},7241:(j,I,e)=>{"use strict";e.d(I,{U:()=>s});var t=e(89949),n=e.n(t),i=e(27702);class s extends i.Component{constructor(m){super(m),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:m.series}}componentDidUpdate(m){const{series:d}=this.props;(0,t.isEqual)(m.series,d)||this.setState({hiddenSeries:[],toggledSeries:d})}onSeriesToggle(m,d){const{series:o,onHiddenSeriesChanged:l}=this.props,{hiddenSeries:a}=this.state;if(d.ctrlKey||d.metaKey||d.shiftKey){const f=a.indexOf(m)>-1?a.filter(v=>v!==m):a.concat([m]),b=o.map(v=>({...v,isVisible:f.indexOf(v.label)===-1}));this.setState({hiddenSeries:f,toggledSeries:b},()=>l?l(f):void 0);return}const g=o.map(f=>f.label),c=a.length+1===g.length?[]:(0,t.difference)(g,[m]),h=o.map(f=>({...f,isVisible:c.indexOf(f.label)===-1}));this.setState({hiddenSeries:c,toggledSeries:h},()=>l?l(c):void 0)}render(){const{children:m}=this.props,{toggledSeries:d}=this.state;return m({onSeriesToggle:this.onSeriesToggle,toggledSeries:d})}}},21783:(j,I,e)=>{"use strict";e.d(I,{U:()=>l});var t=e(42844),n=e(27702),i=e(80402),s=e(29372),r=e(71982),m=e(41115);const d=(0,i.B)(({placement:a})=>({wrapper:(0,t.css)({display:"flex",flexDirection:a==="bottom"?"column":"row"}),graphContainer:(0,t.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,t.css)({padding:"10px 0",maxHeight:a==="bottom"?"35%":"none"})})),o=(a,g=!1,c=!1)=>{const h=a.reduce((b,v)=>b+(v[1]||0),0)===0,f=!a.reduce((b,v)=>b&&v[1]!==null,!0);return g&&f||c&&h},l=a=>{const{series:g,timeRange:c,width:h,height:f,showBars:b,showLines:v,showPoints:y,sortLegendBy:E,sortLegendDesc:C,legendDisplayMode:u,legendVisibility:D,placement:P,onSeriesToggle:S,onToggleSort:x,hideEmpty:M,hideZero:R,isStacked:O,lineWidth:T,onHorizontalRegionSelected:U,timeZone:L,children:V,ariaLabel:w}=a,{graphContainer:K,wrapper:B,legendContainer:W}=d(a),_=g.reduce((k,A)=>o(A.data,M,R)?k:k.concat([{label:A.label,color:A.color||"",disabled:!A.isVisible,yAxis:A.yAxis.index,getDisplayValues:()=>A.info||[]}]),[]);return n.createElement("div",{className:B,"aria-label":w},n.createElement("div",{className:K},n.createElement(m.k,{series:g,timeRange:c,timeZone:L,showLines:v,showPoints:y,showBars:b,width:h,height:f,isStacked:O,lineWidth:T,onHorizontalRegionSelected:U},V)),D&&n.createElement("div",{className:W},n.createElement(s.$,{hideHorizontalTrack:!0},n.createElement(r.l,{items:_,displayMode:u,placement:P,sortBy:E,sortDesc:C,onLabelClick:(k,A)=>{S&&S(k.label,A)},onToggleSort:x}))))}},84143:(j,I,e)=>{"use strict";e.d(I,{mc:()=>o,sV:()=>d,wu:()=>m});var t=e(21609),n=e(75578),i=e(60956),s=e(65347);const r=(l,a)=>{let g=0,c=l.values.length-1,h;for(;;){if(g>c)return Math.max(c,0);h=Math.floor((g+c)/2);const f=l.values[h];if(f===a)return h;f&&f<a?g=h+1:c=h-1}},m=(l,a,g,c)=>{let h,f,b,v,y;const E=[];let C,u;for(h=0;h<l.length;h++){f=l[h];const D=a[h];b=r(D,g),v=g-D.values[b],y=D.values[b],(C===void 0||v>=0&&(v<C||C<0)||v<0&&v>C)&&(C=v,u=D.display?(0,t.zc)(D.display(y)):y);const P=f.display(f.values[b]);E.push({value:(0,t.zc)(P),datapointIndex:b,seriesIndex:h,color:P.color,label:(0,n.CZ)(f),time:D.display?(0,t.zc)(D.display(y)):y})}return{results:E,time:u}},d=(l,a)=>(0,i.dq)(l,{format:a?.options?.timeformat,timeZone:a?.options?.timezone}),o=(l,a,g)=>{if(a&&g&&l){const c=g-a,h=c/l/1e3,f=86400010,b=31536e6;return h<=10?s.U6.interval.millisecond:h<=45?s.U6.interval.second:c<=f?s.U6.interval.minute:h<=8e4?s.U6.interval.hour:c<=b?s.U6.interval.day:h<=31536e3?s.U6.interval.month:s.U6.interval.year}return s.U6.interval.minute}},18869:(j,I,e)=>{"use strict";e.d(I,{d:()=>v,j:()=>f});var t=e(27702),n=e(19973),i=e(44727),s=e(76178),r=e(19221),m=e(29241),d=e(84714),o=e(3935),l=e(70823),a=e(34072),g=e(81144),c=e(48473),h=e(90537);const f="__fixed";function b(y,E,C=[]){for(const u of C)if(typeof u=="function"){if(!u(y,E))return!1}else if(E[u]!==y[u])return!1;return!0}class v extends t.Component{constructor(E){super(E),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let C=this.prepState(E);C.alignedData=C.config.prepData([C.alignedFrame]),this.state=C,this.plotInstance=t.createRef()}prepState(E,C=!0){let u=null;const{frames:D,fields:P,preparePlotFrame:S}=E,M=(S||h.Rn)(D,P||{x:s.Ls.get(r.mi.firstTimeField).get({}),y:s.Ls.get(r.mi.byTypes).get(new Set([m.fS.number,m.fS.enum]))},E.timeRange);if((0,c.Zp)("GraphNG",!1,"data aligned",M),M){let R=this.state?.config;C&&(R=E.prepConfig(M,this.props.frames,this.getTimeRange),(0,c.Zp)("GraphNG",!1,"config prepared",R)),u={alignedFrame:M,config:R},(0,c.Zp)("GraphNG",!1,"data prepared",u.alignedData)}return u}handleCursorUpdate(E){const C=E.payload?.point?.time,u=this.plotInstance.current;if(u&&C){const D=u.valToPos(C,"x");let P;if(D&&(P=(0,c.ah)(u,u.posToIdx(D))),!P||!D)return;u.setCursor({left:D,top:P})}}componentDidMount(){this.panelContext=this.context;const{eventBus:E}=this.panelContext;this.subscription.add(E.getStream(d.es).pipe((0,i.p)(50)).subscribe({next:C=>{E!==C.origin&&this.handleCursorUpdate(C)}})),this.subscription.add(E.getStream(o.IA).pipe((0,i.p)(50)).subscribe({next:C=>this.handleCursorUpdate(C)})),this.subscription.add(E.getStream(d.xH).pipe((0,i.p)(50)).subscribe({next:()=>{const C=this.plotInstance?.current;C&&C.setCursor({left:-10,top:-10})}}))}componentDidUpdate(E){const{frames:C,structureRev:u,timeZone:D,propsToDiff:P}=this.props,S=!b(E,this.props,P);if(C!==E.frames||S||D!==E.timeZone){let x=this.prepState(this.props,!1);x&&((this.state.config===void 0||D!==E.timeZone||u!==E.structureRev||!u||S)&&(x.config=this.props.prepConfig(x.alignedFrame,this.props.frames,this.getTimeRange),(0,c.Zp)("GraphNG",!1,"config recreated",x.config)),x.alignedData=x.config.prepData([x.alignedFrame]),this.setState(x))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:E,height:C,children:u,renderLegend:D}=this.props,{config:P,alignedFrame:S,alignedData:x}=this.state;return P?t.createElement(a.AY,{width:E,height:C,legend:D(P)},(M,R)=>t.createElement(g.N,{config:P,data:x,width:M,height:R,plotRef:O=>this.plotInstance.current=O},u?u(P,S):null)):null}}v.contextType=l.bb},62514:(j,I,e)=>{"use strict";e.d(I,{z:()=>i});var t=e(27702);const n=t.createContext({}),i=()=>{const{data:s,dimFields:r,mapSeriesIndexToDataFrameFieldIndex:m}=(0,t.useContext)(n),d=(0,t.useCallback)(()=>{const o=r.x;let l=null;for(let a=0;a<s.fields.length;a++)if(o(s.fields[a],s,[s])){l=s.fields[a];break}return l},[s,r]);return{dimFields:r,mapSeriesIndexToDataFrameFieldIndex:m,getXAxisField:d,alignedData:s}}},39596:(j,I,e)=>{"use strict";e.d(I,{w:()=>i});var t=e(90537);const n={threshold:(r,m,d)=>r+d,midpoint:(r,m,d)=>(r+m)/2,plusone:(r,m,d)=>r+1};function i(r){if(r.frame.length===0)return r.frame;let m=!0,{frame:d,refFieldName:o,refFieldPseudoMax:l,refFieldPseudoMin:a,insertMode:g}=r;g||(g=n.threshold);const c=(0,t.N$)(d,o);if(c==null)return d;c.state={...c.state,nullThresholdApplied:!0};const h=d.fields.map(b=>b.config.custom?.insertNulls||c.config.interval||null),f=new Set(h);if(f.delete(null),f.size===0)return d;if(f.size===1){const b=f.values().next().value;if(b<=0)return d;const v=c.values,y=d.fields.map(C=>C.values),E=s(v,y,b,a,l,g,m);return E===y?d:{...d,length:E[0].length,fields:d.fields.map((C,u)=>({...C,values:E[u]}))}}return d}function s(r,m,d,o=null,l=null,a,g){const c=r.length,h=[];if(o!=null&&o<r[0]){let y=Math.ceil((r[0]-o)/d),E=r[0]-y*d;for(;E<r[0];)h.push(a(E-d,E,d)),E+=d}h.push(r[0]);let f=r[0];for(let y=1;y<c;y++){const E=r[y];for(;E-f>d&&(h.push(a(f,E,d)),f+=d,!!g););h.push(E),f=E}if(l!=null&&l>f)for(;f+d<l;)h.push(a(f,l,d)),f+=d;const b=h.length;if(b===c)return m;const v=[];for(let y of m){let E;if(y!==r){E=Array(b);for(let C=0,u=0;C<b;C++)E[C]=r[u]===h[C]?y[u++]:null}else E=h;v.push(E)}return v}},26453:(j,I,e)=>{"use strict";e.d(I,{I:()=>t});function t(n){return{...n,fields:n.fields.map(i=>{const s=+i.config?.noValue;if(Number.isNaN(s))return i;{const r=i.values.slice();for(let m=0;m<r.length;m++)r[m]===null&&(r[m]=s);return{...i,values:r}}})}}},90537:(j,I,e)=>{"use strict";e.d(I,{z1:()=>g,N$:()=>o,Rn:()=>a});var t=e(29241),n=e(48962),i=e(64167),s=e(18869),r=e(39596);function m(h,f,b){let v,y;for(let E=0;E<f.length;E++)if(f[E]==null)y==null&&v!=null&&(y=E);else{if(y!=null){if(h[E]-v<b)for(;y<E;)f[y++]=void 0;y=null}v=h[E]}return f}function d(h){return h.type===t.fS.number&&h.config.custom?.drawStyle===i.l8.Bars&&!h.config.custom?.hideFrom?.viz}function o(h,f){return h.fields.find(b=>f!=null?b.name===f:b.type===t.fS.time)}function l(h,f){const b=o(h,f);let v=b?.values;for(let y=0;y<h.fields.length;y++){let E=h.fields[y];if(E===b||d(E))continue;let C=E.config.custom?.spanNulls;typeof C=="number"&&C!==-1&&(E.values=m(v,E.values,C))}return h}function a(h,f,b){let v;e:for(let u of h)for(let D of u.fields)if(f.x(D,u,h)){v=D;break e}h=h.map(u=>v?.state?.nullThresholdApplied?u:(0,r.w)({frame:u,refFieldName:v.name,refFieldPseudoMin:b?.from.valueOf(),refFieldPseudoMax:b?.to.valueOf()}));let y=0;h.forEach(u=>{u.fields.forEach(D=>{d(D)&&(D.config.custom={...D.config.custom,spanNulls:-1},y++)})});let E=1/0;y>1&&h.forEach(u=>{if(!u.fields.some(d))return;const D=v.values;for(let P=0;P<D.length;P++)P>0&&(E=Math.min(E,D[P]-D[P-1]))});let C=(0,n._9)({frames:h,joinBy:f.x,keep:f.y,keepOriginIndices:!0});return C?(C=l(C,v.name),E!==1/0&&(C.fields.forEach((u,D)=>{let P=u.values;if(D===0){let S=P[P.length-1];P.push(S+E,S+2*E)}else d(u)?P.push(null,null):P.push(void 0,void 0)}),C.length+=2),C):null}function g(h,f){const b="na",v=`${h.min!==void 0?h.min:b}-${h.max!==void 0?h.max:b}`,y=`${h.custom?.axisSoftMin!==void 0?h.custom.axisSoftMin:b}-${h.custom?.axisSoftMax!==void 0?h.custom.axisSoftMax:b}`,E=`${h.custom?.axisPlacement!==void 0?h.custom?.axisPlacement:i.LB.Auto}`,C=h.unit??s.j,u=h.custom?.scaleDistribution?c(h.custom.scaleDistribution):i.wf.Linear,D=h.custom?.axisLabel?h.custom.axisLabel:b;return`${C}/${v}/${y}/${E}/${u}/${D}/${f}`}function c(h){return h.type===i.wf.Log?`${h.type}${h.log}`:h.type}},73453:(j,I,e)=>{"use strict";e.d(I,{J:()=>dr});var t=e(42844),n=e(27702),i=e(98432),s=e(8553),r=e(66310),m=e(79161),d=e(94654),o=e(70726),l=e(30735),a=e(97048),g=e(43053),c=e(76059),h=e(41477),f=e(25173),b=e(89833),v=e(59658),y=e(85429),E=e(26925),C=e(22346),u=e(85334),D=e(10958),P=e(84060),S=e(92270),x=e(7803),M=e(26183),R=e(94526),O=e(49893),T=e(79691),U=e(35644),L=e(47255),V=e(76375),w=e(88921),K=e(59622),B=e(35988),W=e(63536),_=e(65976),k=e(69343),A=e(694),z=e(95e3),H=e(53505),Q=e(45299),X=e(65774),te=e(39239),oe=e(53516),Z=e(94149),le=e(62373),ce=e(42601),q=e(39295),ne=e(19570),pe=e(369),re=e(71942),ie=e(97623),Se=e(7955),ye=e(41429),Ce=e(88447),de=e(61501),we=e(85995),_e=e(48509),Je=e(43305),Ue=e(16584),$e=e(42644),Qe=e(79603),tt=e(65291),lt=e(45230),Me=e(7835),De=e(63050),We=e(62216),qe=e(49024),st=e(67226),dt=e(49162),Tt=e(88297),Nt=e(70973),Bt=e(26055),yt=e(56271),ft=e(5810),ct=e(3408),ge=e(67628),Be=e(50778),Le=e(7274),he=e(70471),He=e(75603),Pe=e(91196),Ie=e(48411),Te=e(16243),Re=e(78372),ue=e(8380),xe=e(48578),Ve=e(83143),Ne=e(18625),fe=e(91157),ve=e(24062),ze=e(35548),Oe=e(26407),Fe=e(23841),Ge=e(19827),nt=e(5386),Xe=e(60093),ut=e(69980),ht=e(50319),wt=e(67743),mn=e(27207),vn=e(7532),gn=e(6127),Sn=e(61449),Cn=e(79748),pn=e(80384),nn=e(51164),Ct=e(58929),bt=e(98723),Ut=e(90577),_t=e(52677),Gt=e(98851),jt=e(20323),sn=e(2533),St=e(51284),mt=e(63742),kt=e(35398),it=e(57710),pt=e(91290),It=e(27714),Qt=e(42148),rn=e(1316),un=e(39423),xn=e(31277),Kn=e(71580),_n=e(71171),Ma=e(98790),la=e(36746),aa=e(4403),ba=e(80579),ga=e(3802),Ca=e(22465),Ha=e(11774),ka=e(98361),ma=e(45453),At=e(99703),Rt=e(52370),Mt=e(34924),$t=e(40159),Pn=e(76419),tn=e(26216),Un=e(96864),$n=e(83507),kn=e(25119),Fn=e(95428),Da=e(37917),Ta=e(72461),ca=e(39228),Sa=e(59619),Yt=e(43743),Kt=e(24099),hn=e(55054),Mn=e(8),Hn=e(3265),Jn=e(13965),Qn=e(6666),va=e(97091),Ga=e(34604),La=e(75864),Ia=e(28122),Ka=e(48491),qa=e(97612),hs=e(32411),$s=e(36319),zs=e(96861),Ns=e(25169),Xs=e(34052),ys=e(88175),ua=e(36277),ja=e(62695),Pa=e(65023),Ya=e(51433),_s=e(46558);let Us=!1,ds="public/img/icons/";function cn(As,Qs){i.V[ds+Qs]={content:As,status:"loaded"}}function os(){Us=!0;const As=typeof window<"u"&&window.__grafana_public_path__;As&&(ds=As+"img/icons/"),cn(m,"unicons/at.svg"),cn(d,"unicons/adjust-circle.svg"),cn(o,"unicons/angle-double-down.svg"),cn(l,"unicons/angle-double-right.svg"),cn(a,"unicons/angle-down.svg"),cn(g,"unicons/angle-left.svg"),cn(c,"unicons/angle-right.svg"),cn(h,"unicons/angle-up.svg"),cn(f,"unicons/apps.svg"),cn(b,"unicons/arrow.svg"),cn(v,"unicons/arrow-down.svg"),cn(y,"unicons/arrow-from-right.svg"),cn(E,"unicons/arrow-left.svg"),cn(C,"unicons/arrow-random.svg"),cn(u,"unicons/arrow-right.svg"),cn(D,"unicons/arrow-to-right.svg"),cn(P,"unicons/arrow-up.svg"),cn(S,"unicons/arrows-h.svg"),cn(x,"unicons/backward.svg"),cn(M,"unicons/bars.svg"),cn(R,"unicons/bell.svg"),cn(O,"unicons/bell-slash.svg"),cn(T,"unicons/bolt.svg"),cn(U,"unicons/book.svg"),cn(L,"unicons/book-open.svg"),cn(V,"unicons/brackets-curly.svg"),cn(w,"unicons/bug.svg"),cn(K,"unicons/building.svg"),cn(B,"unicons/calculator-alt.svg"),cn(W,"unicons/calendar-alt.svg"),cn(_,"unicons/calendar-slash.svg"),cn(k,"unicons/camera.svg"),cn(A,"unicons/channel-add.svg"),cn(z,"unicons/chart-line.svg"),cn(H,"unicons/check.svg"),cn(Q,"unicons/check-circle.svg"),cn(X,"unicons/circle.svg"),cn(te,"unicons/clipboard-alt.svg"),cn(oe,"unicons/clock-nine.svg"),cn(Z,"unicons/cloud.svg"),cn(le,"unicons/cloud-download.svg"),cn(ce,"unicons/code-branch.svg"),cn(q,"unicons/cog.svg"),cn(ne,"unicons/columns.svg"),cn(pe,"unicons/comment-alt.svg"),cn(re,"unicons/comment-alt-share.svg"),cn(ie,"unicons/comments-alt.svg"),cn(Se,"unicons/compass.svg"),cn(ye,"unicons/copy.svg"),cn(Ce,"unicons/corner-down-right-alt.svg"),cn(de,"unicons/cube.svg"),cn(we,"unicons/dashboard.svg"),cn(_e,"unicons/database.svg"),cn(Je,"unicons/document-info.svg"),cn(Ue,"unicons/download-alt.svg"),cn($e,"unicons/draggabledots.svg"),cn(Qe,"unicons/edit.svg"),cn(tt,"unicons/ellipsis-v.svg"),cn(lt,"unicons/ellipsis-h.svg"),cn(Me,"unicons/envelope.svg"),cn(De,"unicons/exchange-alt.svg"),cn(We,"unicons/exclamation-circle.svg"),cn(qe,"unicons/exclamation-triangle.svg"),cn(st,"unicons/external-link-alt.svg"),cn(dt,"unicons/eye.svg"),cn(Tt,"unicons/eye-slash.svg"),cn(Nt,"unicons/file-alt.svg"),cn(Bt,"unicons/file-blank.svg"),cn(yt,"unicons/filter.svg"),cn(ft,"unicons/folder.svg"),cn(ct,"unicons/folder-open.svg"),cn(ge,"unicons/folder-plus.svg"),cn(Be,"unicons/folder-upload.svg"),cn(Le,"unicons/forward.svg"),cn(he,"unicons/graph-bar.svg"),cn(He,"unicons/history.svg"),cn(Pe,"unicons/home-alt.svg"),cn(Ie,"unicons/import.svg"),cn(Te,"unicons/info.svg"),cn(Re,"unicons/info-circle.svg"),cn(ue,"unicons/k6.svg"),cn(xe,"unicons/key-skeleton-alt.svg"),cn(Ve,"unicons/keyboard.svg"),cn(Ne,"unicons/link.svg"),cn(fe,"unicons/list-ul.svg"),cn(ve,"unicons/lock.svg"),cn(ze,"unicons/minus.svg"),cn(Oe,"unicons/minus-circle.svg"),cn(Fe,"unicons/mobile-android.svg"),cn(Ge,"unicons/monitor.svg"),cn(nt,"unicons/pause.svg"),cn(Xe,"unicons/pen.svg"),cn(ut,"unicons/play.svg"),cn(ht,"unicons/plug.svg"),cn(wt,"unicons/plus.svg"),cn(mn,"unicons/plus-circle.svg"),cn(vn,"unicons/power.svg"),cn(gn,"unicons/presentation-play.svg"),cn(Sn,"unicons/process.svg"),cn(Cn,"unicons/question-circle.svg"),cn(pn,"unicons/repeat.svg"),cn(nn,"unicons/rocket.svg"),cn(Ct,"unicons/rss.svg"),cn(bt,"unicons/save.svg"),cn(Ut,"unicons/search.svg"),cn(_t,"unicons/search-minus.svg"),cn(Gt,"unicons/search-plus.svg"),cn(jt,"unicons/share-alt.svg"),cn(sn,"unicons/shield.svg"),cn(St,"unicons/signal.svg"),cn(mt,"unicons/signin.svg"),cn(kt,"unicons/signout.svg"),cn(it,"unicons/sitemap.svg"),cn(pt,"unicons/slack.svg"),cn(It,"unicons/sliders-v-alt.svg"),cn(Qt,"unicons/sort-amount-down.svg"),cn(rn,"unicons/sort-amount-up.svg"),cn(un,"unicons/square-shape.svg"),cn(xn,"unicons/star.svg"),cn(Kn,"unicons/step-backward.svg"),cn(_n,"unicons/sync.svg"),cn(Ma,"unicons/stopwatch.svg"),cn(la,"unicons/table.svg"),cn(aa,"unicons/tag-alt.svg"),cn(ba,"unicons/times.svg"),cn(ga,"unicons/trash-alt.svg"),cn(Ca,"unicons/unlock.svg"),cn(Ha,"unicons/upload.svg"),cn(ka,"unicons/user.svg"),cn(ma,"unicons/users-alt.svg"),cn(At,"unicons/wrap-text.svg"),cn(Rt,"unicons/cloud-upload.svg"),cn(Mt,"unicons/credit-card.svg"),cn($t,"unicons/file-copy-alt.svg"),cn(Pn,"unicons/fire.svg"),cn(tn,"unicons/hourglass.svg"),cn(Un,"unicons/layer-group.svg"),cn($n,"unicons/layers-alt.svg"),cn(kn,"unicons/line-alt.svg"),cn(Fn,"unicons/list-ui-alt.svg"),cn(Da,"unicons/message.svg"),cn(Ta,"unicons/palette.svg"),cn(ca,"unicons/percentage.svg"),cn(Sa,"unicons/shield-exclamation.svg"),cn(Yt,"unicons/plus-square.svg"),cn(Kt,"unicons/x.svg"),cn(hn,"unicons/capture.svg"),cn(Mn,"custom/gf-grid.svg"),cn(Hn,"custom/gf-landscape.svg"),cn(Jn,"custom/gf-layout-simple.svg"),cn(Qn,"custom/gf-portrait.svg"),cn(va,"custom/gf-bar-alignment-after.svg"),cn(Ga,"custom/gf-bar-alignment-before.svg"),cn(La,"custom/gf-bar-alignment-center.svg"),cn(Ia,"custom/gf-interpolation-linear.svg"),cn(Ka,"custom/gf-interpolation-smooth.svg"),cn(qa,"custom/gf-interpolation-step-after.svg"),cn(hs,"custom/gf-interpolation-step-before.svg"),cn($s,"custom/gf-logs.svg"),cn(zs,"custom/gf-movepane-left.svg"),cn(Ns,"custom/gf-movepane-right.svg"),cn(Xs,"mono/favorite.svg"),cn(ys,"mono/grafana.svg"),cn(ua,"mono/heart.svg"),cn(ja,"mono/heart-break.svg"),cn(Pa,"mono/panel-add.svg"),cn(Ya,"mono/library-panel.svg"),cn(_s,"unicons/record-audio.svg")}var qs=e(94851);const Dr=As=>({container:(0,t.css)({label:"Icon",display:"inline-block",lineHeight:0}),icon:(0,t.css)({verticalAlign:"middle",display:"inline-block",fill:"currentColor"}),orange:(0,t.css)({fill:As.v1.palette.orange})}),dr=n.forwardRef(({size:As="md",type:Qs="default",name:Ls,className:ws,style:ps,title:Sr="",...Lt},Ot)=>{const on=(0,r.wW)(Dr);if(Ls?.startsWith("fa fa-"))return n.createElement("i",{className:Fr(Ls,ws),...Lt,style:ps});if(Us||os(),(0,s.Mo)(Ls)||console.warn("Icon component passed an invalid icon name",Ls),!Ls||Ls.includes(".."))return n.createElement("div",{ref:Ot},"invalid icon name");const Xt=(0,qs.B)(As),Dn=Xt,wn=Ls.startsWith("gf-bar-align")?16:Ls.startsWith("gf-interp")?30:Xt,Bn=(0,qs.y)(Ls,Qs),Gn=`${ds}${Bn}/${Ls}.svg`;return n.createElement("div",{className:on.container,...Lt,ref:Ot},n.createElement(i.Z,{src:Gn,width:wn,height:Dn,title:Sr,className:(0,t.cx)(on.icon,ws,Qs==="mono"?{[on.orange]:Ls==="favorite"}:""),style:ps}))});dr.displayName="Icon";function Fr(As,Qs){return(0,t.cx)(As,{"fa-spin":As==="fa fa-spinner"},Qs)}},94851:(j,I,e)=>{"use strict";e.d(I,{B:()=>i,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(s,r){return s?.startsWith("gf-")?"custom":t.includes(s)?"mono":r==="default"?"unicons":r==="solid"?"solid":"mono"}function i(s){switch(s){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},67437:(j,I,e)=>{"use strict";e.d(I,{h:()=>g});var t=e(42844),n=e(27702),i=e(58939),s=e(96750),r=e(66310),m=e(80402),d=e(97289),o=e(73453),l=e(94851),a=e(80011);const g=n.forwardRef((h,f)=>{const{size:b="md",variant:v="secondary"}=h,y=(0,r.l4)();let E;b==="xxl"||b==="xxxl"?((0,i.d)("IconButton",'size="xxl" and size="xxxl"','size="xl"'),E="xl"):E=b;const C=c(y,E,v);let u,D;if("tooltip"in h){const{tooltip:P}=h;u=typeof P=="string"?P:void 0}else if("ariaLabel"in h||"aria-label"in h){const{ariaLabel:P,["aria-label"]:S}=h;u=S||P,D=f}if("tooltip"in h){const{name:P,iconType:S,className:x,tooltip:M,tooltipPlacement:R,...O}=h;return n.createElement(a.u,{ref:f,content:M,placement:R},n.createElement("button",{...O,ref:D,"aria-label":u,className:(0,t.cx)(C.button,x),type:"button"},n.createElement(o.J,{name:P,size:E,className:C.icon,type:S})))}else{const{name:P,iconType:S,className:x,...M}=h;return n.createElement("button",{...M,ref:D,"aria-label":u,className:(0,t.cx)(C.button,x),type:"button"},n.createElement(o.J,{name:P,size:E,className:C.icon,type:S}))}});g.displayName="IconButton";const c=(0,m.B)((h,f,b)=>{const v=(0,l.B)(f)+h.spacing.gridSize;let y=h.colors.text.primary;return b==="primary"?y=h.colors.primary.text:b==="destructive"&&(y=h.colors.error.text),{button:(0,t.css)({zIndex:0,position:"relative",margin:h.spacing(0,.5,0,0),boxShadow:"none",border:"none",display:"inline-flex",background:"transparent",justifyContent:"center",alignItems:"center",padding:0,color:y,"&[disabled], &:disabled":{cursor:"not-allowed",color:h.colors.action.disabledText,opacity:.65},"&:before":{zIndex:-1,position:"absolute",opacity:0,width:`${v}px`,height:`${v}px`,borderRadius:h.shape.radius.default,content:'""',transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionProperty:"opacity"},"&:focus, &:focus-visible":(0,d.getFocusStyles)(h),"&:focus:not(:focus-visible)":(0,d.getMouseFocusStyles)(h),"&:hover":{"&:before":{backgroundColor:b==="secondary"?h.colors.action.hover:s.alpha(y,.12),opacity:1}}}),icon:(0,t.css)({verticalAlign:"baseline"})}})},96198:(j,I,e)=>{"use strict";e.d(I,{Z:()=>d,a:()=>l});var t=e(42844),n=e(27702),i=e(62247),s=e(66310),r=e(25357),m=e(86064);const d=n.memo(n.forwardRef(({title:g,featureState:c,...h},f)=>{const b=(0,s.wW)(o),v=c?n.createElement(n.Fragment,null,n.createElement("div",{className:b.badge},n.createElement(l,{featureState:c})),n.createElement("h3",null,g)):n.createElement("h3",null,g);return n.createElement(m.v,{branded:!0,title:v,urlTitle:"Read documentation",ref:f,...h})}));d.displayName="FeatureInfoBox";const o=g=>({badge:(0,t.css)({marginBottom:g.spacing(1)})}),l=({featureState:g,tooltip:c})=>{const h=a(g);return n.createElement(r.C,{text:h.text,color:h.color,icon:h.icon,tooltip:c})};function a(g){switch(g){case i.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},86064:(j,I,e)=>{"use strict";e.d(I,{v:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(80402),r=e(63439),m=e(73453);const d=n.memo(n.forwardRef(({title:l,className:a,children:g,branded:c,url:h,urlTitle:f,onDismiss:b,severity:v="info",...y},E)=>{const C=(0,i.wW)(o);return n.createElement(r.b,{severity:v,className:a,...y,ref:E,title:l},n.createElement("div",null,g),h&&n.createElement("a",{href:h,className:(0,t.cx)("external-link",C.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(m.J,{name:"book"})," ",f||"Read more"))}));d.displayName="InfoBox";const o=(0,s.B)(l=>({docsLink:(0,t.css)({display:"inline-block",marginTop:l.spacing(2)})}))},28676:(j,I,e)=>{"use strict";e.d(I,{K:()=>d});var t=e(42844),n=e(27702),i=e(76566),s=e(66310),r=e(73453),m=e(52995);function d({referenceElement:c,children:h,suffixIcon:f,placement:b,alternativePlacement:v}){const[y,E]=(0,n.useState)(null),[C,u]=(0,n.useState)(b),D=(0,i.D)(c,y,{placement:C}),P=(0,s.wW)(o),S=(0,s.wW)(g);return n.useEffect(()=>{v&&l(b,y,c)&&u(v)},[v,b,y,c]),n.createElement(m.h_,null,n.createElement("div",{style:{display:"inline-block",...D.styles.popper},...D.attributes.popper,ref:E,"aria-live":"polite"},n.createElement("span",{className:(0,t.cx)(P.root,S[C])},h&&n.createElement("span",null,h),f&&n.createElement(r.J,{name:f}))))}const o=c=>({root:(0,t.css)({...c.typography.bodySmall,willChange:"transform",background:c.components.tooltip.background,color:c.components.tooltip.text,padding:c.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:c.spacing(.5),alignItems:"center"})}),l=(c,h,f)=>{const b=h?.getBoundingClientRect(),v=f?.getBoundingClientRect();if(!b||!v)return!1;switch(c){case"right":return b.width+v.right>window.innerWidth;case"bottom":return b.height+v.bottom>window.innerHeight;case"left":return v.left-b.width<0;case"top":return v.top-b.height<0;default:return!1}},a=(c,h)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${c}, ${h})`},to:{opacity:1,transform:"translate(0, 0px)"}}),g=c=>{const f=a(0,c.spacing(1)),b=a(0,c.spacing(1*-1)),v=a(c.spacing(1),0),y=a(c.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:c.spacing(1),animation:`${f} ease-out 100ms`}),bottom:(0,t.css)({marginTop:c.spacing(1),animation:`${b} ease-out 100ms`}),left:(0,t.css)({marginRight:c.spacing(1),animation:`${v} ease-out 100ms`}),right:(0,t.css)({marginLeft:c.spacing(1),animation:`${y} ease-out 100ms`})}}},31465:(j,I,e)=>{"use strict";e.d(I,{H:()=>s});var t=e(27702),n=e(11724),i=e(1128);const s=t.forwardRef((m,d)=>{const{defaultValue:o="",minWidth:l=10,maxWidth:a,onCommitChange:g,onKeyDown:c,onBlur:h,...f}=m,[b,v]=t.useState(o),[y,E]=t.useState(l);return(0,t.useEffect)(()=>{E(r(b.toString(),l,a))},[b,a,l]),t.createElement(i.I,{...f,ref:d,value:b.toString(),onChange:C=>{v(C.currentTarget.value)},width:y,onBlur:C=>{h?h(C):g&&g(C)},onKeyDown:C=>{c?c(C):C.key==="Enter"&&g&&g(C)},"data-testid":"autosize-input"})});function r(m,d,o){if(!m)return d;const l=3,a=(0,n.X1)(m.toString(),14).width/8+l;return d&&a<d?d:o&&a>o?o:a}s.displayName="AutoSizeInput"},1128:(j,I,e)=>{"use strict";e.d(I,{H:()=>l,I:()=>o});var t=e(42844),n=e(27702),i=e(17236),s=e(66310),r=e(80402),m=e(26468),d=e(62108);const o=n.forwardRef((a,g)=>{const{className:c,addonAfter:h,addonBefore:f,prefix:b,suffix:v,invalid:y,loading:E,width:C=0,...u}=a,[D,P]=(0,i.Z)(),[S,x]=(0,i.Z)(),M=(0,s.l4)(),R=l({theme:M,invalid:!!y,width:C});return n.createElement("div",{className:(0,t.cx)(R.wrapper,c),"data-testid":"input-wrapper"},!!f&&n.createElement("div",{className:R.addon},f),n.createElement("div",{className:R.inputWrapper},b&&n.createElement("div",{className:R.prefix,ref:D},b),n.createElement("input",{ref:g,className:R.input,...u,style:{paddingLeft:b?P.width+12:void 0,paddingRight:v||E?x.width+12:void 0}}),(v||E)&&n.createElement("div",{className:R.suffix,ref:S},E&&n.createElement(d.$,{className:R.loadingIndicator,inline:!0}),v)),!!h&&n.createElement("div",{className:R.addon},h))});o.displayName="Input";const l=(0,r.B)(({theme:a,invalid:g=!1,width:c})=>{const h="28px",f=(0,t.css)({position:"absolute",top:0,zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,fontSize:a.typography.size.md,height:"100%",minWidth:h,color:a.colors.text.secondary});return{wrapper:(0,t.cx)((0,t.css)({label:"input-wrapper",display:"flex",width:c?a.spacing(c):"100%",height:a.spacing(a.components.height.md),borderRadius:a.shape.borderRadius(),"&:hover":{"> .prefix, .suffix, .input":{borderColor:g?a.colors.error.border:a.colors.primary.border},"input[type='number']":{appearance:"textfield"},"input[type='number']::-webkit-inner-spin-button, input[type='number']::-webkit-outer-spin-button":{WebkitAppearance:"inner-spin-button !important",opacity:1}}})),inputWrapper:(0,t.css)({label:"input-inputWrapper",position:"relative",flexGrow:1,zIndex:1,"&:not(:first-child):last-child":{"> input":{borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0}},"&:first-child:not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0}},"&:not(:first-child):not(:last-child)":{"> input":{borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},input:{"&:not(:first-child)":{paddingLeft:h},"&:not(:last-child)":{paddingRight:h},"&[readonly]":{cursor:"default"}}}),input:(0,t.cx)((0,m.GL)(a),(0,m.RK)(a,g),(0,t.css)({label:"input-input",position:"relative",zIndex:0,flexGrow:1,borderRadius:a.shape.borderRadius(),height:"100%",width:"100%"})),inputDisabled:(0,t.css)({backgroundColor:a.colors.action.disabledBackground,color:a.colors.action.disabledText,border:`1px solid ${a.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}),addon:(0,t.css)({label:"input-addon",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:0,flexShrink:0,position:"relative","&:first-child":{borderTopRightRadius:0,borderBottomRightRadius:0,"> :last-child":{borderTopRightRadius:0,borderBottomRightRadius:0}},"&:last-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0,"> :first-child":{borderTopLeftRadius:0,borderBottomLeftRadius:0}},"> *:focus":{zIndex:2}}),prefix:(0,t.cx)(f,(0,t.css)({label:"input-prefix",paddingLeft:a.spacing(1),paddingRight:a.spacing(.5),borderRight:"none",borderTopRightRadius:0,borderBottomRightRadius:0})),suffix:(0,t.cx)(f,(0,t.css)({label:"input-suffix",paddingLeft:a.spacing(1),paddingRight:a.spacing(1),marginBottom:"-2px",borderLeft:"none",borderTopLeftRadius:0,borderBottomLeftRadius:0,right:0})),loadingIndicator:(0,t.css)({"& + *":{marginLeft:a.spacing(.5)}})}})},16310:(j,I,e)=>{"use strict";e.d(I,{g:()=>n});var t=e(46089);const n=t.Qr},39695:(j,I,e)=>{"use strict";e.d(I,{e:()=>v});var t=e(42844),n=e(89949),i=e(27702),s=e(10350),r=e(53933),m=e(66310),d=e(73453),o=e(50852),l=e(80011),a=e(67437);const g=(0,t.css)({display:"flex",alignItems:"center",height:"100%"});function c({row:u,__rowID:D}){return i.createElement("div",{className:g},i.createElement(a.h,{tooltip:"toggle row expanded","aria-controls":D,name:u.isExpanded?"angle-down":"angle-right","aria-expanded":u.isExpanded,...u.getToggleRowExpandedProps()}))}const h="__expander";function f(u){return[{id:h,Cell:c,disableSortBy:!0,width:0},...u.map(D=>({id:D.id,accessor:D.id,Header:D.header||(()=>null),sortType:D.sortType||"alphanumeric",disableSortBy:!D.sortType,width:D.disableGrow?0:void 0,visible:D.visible,...D.cell&&{Cell:D.cell}}))]}const b=u=>{const D=u.colors.emphasize(u.colors.background.primary,.03);return{container:(0,t.css)({display:"flex",gap:u.spacing(2),flexDirection:"column",width:"100%"}),table:(0,t.css)({borderRadius:u.shape.borderRadius(),width:"100%",td:{padding:u.spacing(1)},"td, th":{minWidth:u.spacing(3)}}),disableGrow:(0,t.css)({width:0}),header:(0,t.css)({borderBottom:`1px solid ${u.colors.border.weak}`,"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:u.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:u.spacing(2.5),textAlign:"left",fontWeight:u.typography.fontWeightMedium}}),row:(0,t.css)({label:"row",borderBottom:`1px solid ${u.colors.border.weak}`,"&:hover":{backgroundColor:D},"&:last-child":{borderBottom:0}}),expandedRow:(0,t.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentRow:(0,t.css)({label:"expanded-row-content",td:{borderBottom:`1px solid ${u.colors.border.weak}`,position:"relative",padding:u.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:u.spacing(2),background:u.colors.border.medium}}}),sortableHeader:(0,t.css)({"&&":{padding:0}})}};function v({className:u,columns:D,data:P,getRowId:S,headerTooltips:x,pageSize:M=0,renderExpandedRow:R}){const O=(0,m.wW)(b),T=(0,i.useMemo)(()=>f(D),[D]),U=y(),L=(0,i.useCallback)(A=>`${U}-${A.id}`.replace(/\s/g,""),[U]),V=[s.useSortBy,s.useExpanded],w=M>0;w&&V.push(s.usePagination);const K=(0,s.useTable)({columns:T,data:P,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,getRowId:S,initialState:{hiddenColumns:[!R&&h,...T.filter(A=>!(!A.visible||A.visible(P))).map(A=>A.id).filter(r.fQ)].filter(r.fQ)}},...V),{getTableProps:B,getTableBodyProps:W,headerGroups:_,prepareRow:k}=K;return(0,i.useEffect)(()=>{w&&K.setPageSize(M)},[w,M,K.setPageSize,K]),i.createElement("div",{className:O.container},i.createElement("table",{...B(),className:(0,t.cx)(O.table,u)},i.createElement("thead",null,_.map(A=>{const{key:z,...H}=A.getHeaderGroupProps();return i.createElement("tr",{key:z,...H},A.headers.map(Q=>{const{key:X,...te}=Q.getHeaderProps(),oe=x?.[Q.id];return i.createElement("th",{key:X,className:(0,t.cx)(O.header,{[O.disableGrow]:Q.width===0,[O.sortableHeader]:Q.canSort}),...te,...Q.isSorted&&{"aria-sort":Q.isSortedDesc?"descending":"ascending"}},i.createElement(C,{column:Q,headerTooltip:oe}))}))})),i.createElement("tbody",{...W()},(w?K.page:K.rows).map(A=>{k(A);const{key:z,...H}=A.getRowProps(),Q=L(A),X=A.isExpanded;return i.createElement(i.Fragment,{key:z},i.createElement("tr",{...H,className:(0,t.cx)(O.row,X&&O.expandedRow)},A.cells.map(te=>{const{key:oe,...Z}=te.getCellProps();return i.createElement("td",{key:oe,...Z},te.render("Cell",{__rowID:Q}))})),X&&R&&i.createElement("tr",{...H,id:Q,className:O.expandedContentRow},i.createElement("td",{colSpan:A.cells.length},R(A.original))))}))),w&&i.createElement("span",null,i.createElement(o.t,{currentPage:K.state.pageIndex+1,numberOfPages:K.pageOptions.length,onNavigate:A=>K.gotoPage(A-1)})))}const y=()=>(0,i.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),E=u=>({sortIcon:(0,t.css)({position:"absolute",top:u.spacing(1)}),headerTooltipIcon:(0,t.css)({marginLeft:u.spacing(.5)})});function C({column:{canSort:u,render:D,isSorted:P,isSortedDesc:S,getSortByToggleProps:x},headerTooltip:M}){const R=(0,m.wW)(E),{onClick:O}=x(),T=i.createElement(i.Fragment,null,D("Header"),M&&i.createElement(l.u,{theme:"info-alt",content:M.content,placement:"top-end"},i.createElement(d.J,{className:R.headerTooltipIcon,name:M.iconName||"info-circle","data-testid":"header-tooltip-icon"})),P&&i.createElement("span",{"aria-hidden":"true",className:R.sortIcon},i.createElement(d.J,{name:S?"angle-down":"angle-up"})));return u?i.createElement("button",{type:"button",onClick:O},T):T}},78838:(j,I,e)=>{"use strict";e.d(I,{g:()=>i});var t=e(27702),n=e(17185);class i extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:r,config:m,open:d,onDidRender:o}=this.props,l=this.wrapperRef.current,a=new n.u(r,d,m);l.hasChildNodes()?l.replaceChild(a.render(),l.lastChild):l.appendChild(a.render()),o&&o(a.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:r}=this.props;return t.createElement("div",{className:r,ref:this.wrapperRef})}}i.defaultProps={open:3,config:{animateOpen:!0}}},17185:(j,I,e)=>{"use strict";e.d(I,{u:()=>y});var t=e(89949);function n(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function i(E){return!!E&&typeof E==="object"}function s(E){if(E===void 0)return"";if(E===null||typeof E=="object"&&!E.constructor)return"Object";const u=/function ([^(]*)/.exec(E.constructor.toString());return u&&u.length>1?u[1]:""}function r(E){return E===null?"null":typeof E}function m(E,C){const u=r(E);return u==="null"||u==="undefined"?u:(u==="string"&&(C='"'+n(C)+'"'),u==="function"?E.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":C)}let d="";function o(E){return i(E)?(d=s(E),Array.isArray(E)&&(d+="["+E.length+"]")):d=m(E,E.toString()),d}function l(E){return`json-formatter-${E}`}function a(E,C,u){const D=document.createElement(E);return C&&D.classList.add(l(C)),u!==void 0&&(u instanceof Node?D.appendChild(u):D.appendChild(document.createTextNode(String(u)))),D}const g=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,c=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,h=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,f=10,b=typeof window<"u"&&window.requestAnimationFrame||(E=>(E(),0)),v={animateOpen:!0,animateClose:!0};class y{constructor(C,u=1,D=v,P){this.json=C,this.open=u,this.config=D,this.key=P,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(C){this._isOpen=C}get isDate(){return this.type==="string"&&(g.test(this.json)||h.test(this.json)||c.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return i(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return r(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(C=>C||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(l("open")))}openAtDepth(C=1){C<0||(this.open=C,this.isOpen=C!==0,this.element&&(this.removeChildren(!1),C===0?this.element.classList.remove(l("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(l("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const C=a("span");return C.appendChild(a("span","bracket","[")),this.isNumberArray()?(this.json.forEach((u,D)=>{D>0&&C.appendChild(a("span","array-comma",",")),C.appendChild(a("span","number",u))}),this.skipChildren=!0):C.appendChild(a("span","number",this.json.length)),C.appendChild(a("span","bracket","]")),C}render(C=!1){this.element=a("div","row");const u=a("a","toggler-link"),D=a("span","toggler");if(this.isObject&&u.appendChild(D),this.hasKey&&u.appendChild(a("span","key",`${this.key}:`)),this.isObject){const S=a("span","value"),x=a("span"),M=a("span","constructor-name",this.constructorName);if(x.appendChild(M),this.isArray){const R=this.renderArray();x.appendChild(R)}S.appendChild(x),u.appendChild(S)}else{const S=this.isUrl?a("a"):a("span");S.classList.add(l(this.type)),this.isDate&&S.classList.add(l("date")),this.isUrl&&(S.classList.add(l("url")),S.setAttribute("href",this.json));const x=m(this.json,this.json);S.appendChild(document.createTextNode(x)),u.appendChild(S)}const P=a("div","children");return this.isObject&&P.classList.add(l("object")),this.isArray&&P.classList.add(l("array")),this.isEmpty&&P.classList.add(l("empty")),this.config&&this.config.theme&&this.element.classList.add(l(this.config.theme)),this.isOpen&&this.element.classList.add(l("open")),C||this.element.appendChild(u),this.skipChildren?u.removeChild(D):this.element.appendChild(P),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&u.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(C=!1){const u=this.element&&this.element.querySelector(`div.${l("children")}`);if(!(!u||this.isEmpty))if(C){let D=0;const P=()=>{const S=this.keys[D],x=new y(this.json[S],this.open-1,this.config,S);u.appendChild(x.render()),D+=1,D<this.keys.length&&(D>f?P():b(P))};b(P)}else this.keys.forEach(D=>{const P=new y(this.json[D],this.open-1,this.config,D);u.appendChild(P.render())})}removeChildren(C=!1){const u=this.element&&this.element.querySelector(`div.${l("children")}`);if(C){let D=0;const P=()=>{u&&u.children.length&&(u.removeChild(u.children[0]),D+=1,D>f?P():b(P))};b(P)}else u&&(u.innerHTML="")}}},64022:(j,I,e)=>{"use strict";e.d(I,{Ar:()=>r,Lh:()=>m,W2:()=>o,wc:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=(c=>(c[c.Horizontal=0]="Horizontal",c[c.Vertical=1]="Vertical",c))(s||{});const r=({children:c,orientation:h=0,spacing:f="sm",justify:b="flex-start",align:v="normal",wrap:y=!1,width:E="100%",height:C="100%",...u})=>{const D=(0,i.wW)((0,n.useCallback)(P=>l(P,h,f,b,v,y),[v,b,h,f,y]));return n.createElement("div",{className:D.layout,style:{width:E,height:C},...u},n.Children.toArray(c).filter(Boolean).map((P,S)=>n.createElement("div",{className:D.childWrapper,key:S},P)))},m=({children:c,spacing:h,justify:f,align:b="center",wrap:v,width:y,height:E})=>n.createElement(r,{spacing:h,justify:f,orientation:0,align:b,width:y,height:E,wrap:v},c),d=({children:c,spacing:h,justify:f,align:b,width:v,height:y})=>n.createElement(r,{spacing:h,justify:f,orientation:1,align:b,width:v,height:y},c),o=({children:c,padding:h,margin:f,grow:b,shrink:v})=>{const y=(0,i.wW)((0,n.useCallback)(E=>g(E,h,f),[h,f]));return n.createElement("div",{className:(0,t.cx)(y.wrapper,b!==void 0&&(0,t.css)({flexGrow:b}),v!==void 0&&(0,t.css)({flexShrink:v}))},c)},l=(c,h,f,b,v,y)=>{const E=f!=="none"?c.spacing(a[f]):0,C=h===0&&!y||h===1?0:`-${E}`,u=h===1?"vertical-group":"horizontal-group";return{layout:(0,t.css)({label:u,display:"flex",flexDirection:h===1?"column":"row",flexWrap:y?"wrap":"nowrap",justifyContent:b,alignItems:v,height:"100%",maxWidth:"100%",marginBottom:C}),childWrapper:(0,t.css)({label:"layoutChildrenWrapper",marginBottom:h===0&&!y?0:E,marginRight:h===0?E:0,display:"flex",alignItems:v,"&:last-child":{marginBottom:h===1?0:void 0,marginRight:h===0?0:void 0}})}},a={none:0,xs:.5,sm:1,md:2,lg:3},g=(c,h,f)=>{const b=h&&h!=="none"&&c.spacing(a[h])||0,v=f&&f!=="none"&&c.spacing(a[f])||0;return{wrapper:(0,t.css)({label:"container",margin:v,padding:b})}}},9848:(j,I,e)=>{"use strict";e.d(I,{r:()=>r});var t=e(27702),n=e(85014),i=e(94469),s=e(48154);const r=(0,t.forwardRef)(({href:m,children:d,...o},l)=>{const a=i.u.stripBaseFromUrl(s.QX.sanitizeUrl(m??""));return t.createElement(n.Link,{ref:l,to:a,...o},d)});r.displayName="Link"},90038:(j,I,e)=>{"use strict";e.d(I,{h:()=>a});var t=e(42844),n=e(27702),i=e(94469),s=e(48154),r=e(66310),m=e(73453),d=e(67106),o=e(9848);const l={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},a=(0,n.forwardRef)(({href:c,color:h="link",external:f=!1,inline:b=!0,variant:v="body",weight:y,icon:E,children:C,...u},D)=>{const P=i.u.stripBaseFromUrl(s.QX.sanitizeUrl(c??"")),S=(0,r.l4)(),x=g(S,b,v,y,h),M=E||"external-link-alt";return f?n.createElement("a",{href:P,ref:D,...u,target:"_blank",rel:"noreferrer",className:x},C,n.createElement(m.J,{size:l[v]||"md",name:M})):n.createElement(o.r,{ref:D,href:P,...u,className:x},C,E&&n.createElement(m.J,{name:E,size:l[v]||"md"}))});a.displayName="TextLink";const g=(c,h,f,b,v)=>(0,t.css)([f&&{...c.typography[f]},b&&{fontWeight:(0,d.RC)(b,c)},v&&{color:c.colors.text[v]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:c.colors.text.link}},h&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},20868:(j,I,e)=>{"use strict";e.d(I,{L:()=>r});var t=e(42844),n=e(27702),i=e(80402);const s=(0,i.B)((m=!1)=>({list:(0,t.css)({listStyleType:"none",margin:0,padding:0}),item:(0,t.css)({display:m&&"inline-block"||"block"})}));class r extends n.PureComponent{constructor(d){super(d)}render(){const{items:d,renderItem:o,getItemKey:l,className:a,inline:g}=this.props,c=s(g);return n.createElement("ul",{className:(0,t.cx)(c.list,a)},d.map((h,f)=>n.createElement("li",{className:c.item,key:l?l(h):f},o(h,f))))}}},71573:(j,I,e)=>{"use strict";e.d(I,{Y:()=>i});var t=e(27702),n=e(20868);class i extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},59390:(j,I,e)=>{"use strict";e.d(I,{a:()=>i});var t=e(27702),n=e(20868);class i extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},98557:(j,I,e)=>{"use strict";e.d(I,{F:()=>d});var t=e(42844),n=e(27702),i=e(66310);const s=2.4,r=500,m=4e3;function d({width:l,ariaLabel:a="Loading bar"}){const g=(0,i.wW)(o),c=Math.min(Math.max(Math.round(l*s),r),m),h={width:"100%",animation:`${g.animation} ${c}ms infinite linear`,willChange:"transform"};return n.createElement("div",{style:h},n.createElement("div",{"aria-label":a,className:g.bar}))}const o=()=>({animation:(0,t.keyframes)({"0%":{transform:"translateX(-50%)"},"100%":{transform:"translateX(100%)"}}),bar:(0,t.css)({width:"28%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)"})})},52419:(j,I,e)=>{"use strict";e.d(I,{u:()=>r});var t=e(42844),n=e(27702),i=e(66310),s=e(62108);const r=({text:d,className:o,...l})=>{const a=(0,i.wW)(m);return n.createElement("div",{className:(0,t.cx)(a.container,o),...l},d," ",n.createElement(s.$,{inline:!0}))},m=d=>({container:(0,t.css)({marginBottom:d.spacing(4)})})},86912:(j,I,e)=>{"use strict";e.d(I,{b:()=>s});var t=e(27702),n=e(28580),i=e(38588);const s=({value:r,onChange:m,context:d,item:o})=>{const l=o.settings??{},a=(0,i.IX)(d.data,l?.filter),g=(0,i.nw)(a,r),c=(0,t.useCallback)(f=>{if(!(f&&!(0,i.w3)(f.value,a)))return m(f?.value)},[a,m]),h=g.find(f=>f.value===r);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:h,placeholder:l.placeholderText??"Select field",options:g,onChange:c,noOptionsMessage:l.noFieldsMessage,width:l.width,isClearable:l.isClearable!==!1}))}},27857:(j,I,e)=>{"use strict";e.d(I,{$w:()=>g,OL:()=>o});var t=e(27702),n=e(29241),i=e(19221),s=e(76178),r=e(4680),m=e(28580);const d=(0,t.memo)(c=>{const{data:h,options:f,onChange:b,id:v}=c,y=l(h),E=a(y,f),C=(0,t.useCallback)(D=>b(D.value),[b]),u=E.find(D=>D.value===f);return t.createElement(m.Ph,{inputId:v,value:u,options:E,onChange:C})});d.displayName="FieldTypeMatcherEditor";const o=[{value:n.fS.number,label:"Number",icon:(0,r.WZ)(n.fS.number)},{value:n.fS.string,label:"String",icon:(0,r.WZ)(n.fS.string)},{value:n.fS.time,label:"Time",icon:(0,r.WZ)(n.fS.time)},{value:n.fS.boolean,label:"Boolean",icon:(0,r.WZ)(n.fS.boolean)},{value:n.fS.trace,label:"Traces",icon:(0,r.WZ)(n.fS.trace)},{value:n.fS.enum,label:"Enum",icon:(0,r.WZ)(n.fS.enum)},{value:n.fS.other,label:"Other",icon:(0,r.WZ)(n.fS.other)}],l=c=>(0,t.useMemo)(()=>{const h=new Map;for(const f of o)h.set(f.value,0);for(const f of c)for(const b of f.fields){const v=b.type||n.fS.other;let y=h.get(v);y||(y=0),h.set(v,y+1)}return h},[c]),a=(c,h)=>(0,t.useMemo)(()=>{let f=!1;const b=[];for(const v of o){const y=c.get(v.value),E=h===v.value;(y||E)&&b.push({...v,label:`${v.label} (${c.get(v.value)})`}),E&&(f=!0)}return h&&!f&&b.push({value:h,label:`${h} (No matches)`}),b},[c,h]),g={id:i.mi.byType,component:d,matcher:s.Ls.get(i.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:c=>c}},45346:(j,I,e)=>{"use strict";e.d(I,{J8:()=>a,fN:()=>f});var t=e(42844),n=e(27702),i=e(66656),s=e(19221),r=e(76178),m=e(64167),d=e(66310),o=e(1128),l=e(28580);const a=[{label:"==",value:m.Bd.EQ},{label:"!=",value:m.Bd.NEQ},{label:">",value:m.Bd.GT},{label:">=",value:m.Bd.GTE},{label:"<",value:m.Bd.LT},{label:"<=",value:m.Bd.LTE}];function g(b){return b===i.gz.allIsNull||b===i.gz.allIsZero}const c=({options:b,onChange:v})=>{const y=(0,d.wW)(h),E=(0,n.useMemo)(()=>i.TB.selectOptions([b?.reducer]),[b?.reducer]),C=(0,n.useCallback)(x=>v({...b,reducer:x.value}),[b,v]),u=(0,n.useCallback)(x=>v({...b,op:x.value}),[b,v]),D=(0,n.useCallback)(x=>{const M=x.currentTarget.valueAsNumber;return v({...b,value:M})},[b,v]),P=b??{},S=g(b.reducer);return n.createElement("div",{className:y.spot},n.createElement(l.Ph,{value:E.current,options:E.options,onChange:C,placeholder:"Select field reducer"}),P.reducer&&!S&&n.createElement(n.Fragment,null,n.createElement(l.Ph,{value:a.find(x=>x.value===P.op),options:a,onChange:u,"aria-label":"Comparison operator",width:19}),n.createElement(o.I,{type:"number",value:P.value,onChange:D})))},h=b=>({spot:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),f={id:s.mi.byValue,component:c,matcher:r.Ls.get(s.mi.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:b=>`${b?.reducer} ${b?.op} ${b?.value}`}},85219:(j,I,e)=>{"use strict";e.d(I,{O:()=>d,S:()=>a});var t=e(27702),n=e(75578),i=e(19221),s=e(76178),r=e(28580);const m=(g,c,h)=>{if(!h)return;let f=g.find(b=>!c.some(v=>b===v));if(f)return f};function d({value:g,data:c,onChange:h,placeholder:f}){const b=(0,t.useMemo)(()=>o(c),[c]),[v,y]=(0,t.useState)({refIds:[],value:void 0}),E=(0,t.useMemo)(()=>b.find(u=>u.value===g)??m(b,v.refIds,v.value),[g,b,v]),C=(0,t.useCallback)(u=>{h(u?.value)},[h]);return(b!==v.refIds||E?.value!==v.value)&&y({refIds:b,value:E?.value}),t.createElement(r.Ph,{options:b,onChange:C,isClearable:!0,placeholder:f??"Select query refId",value:E})}function o(g){const c=new Map;for(const f of g){const b=f.refId??"",v=c.get(b)??[];v.length===0&&c.set(b,v),v.push(f)}const h=[];for(const[f,b]of c.entries())h.push({value:f,label:`Query: ${f??"(missing refId)"}`,description:l(b)});return h}function l(g){return`Frames (${g.length}):
    ${g.slice(0,Math.min(3,g.length)).map(c=>(0,n.nf)(c)).join(", ")} ${g.length>3?"...":""}`}const a={id:i.mi.byFrameRefID,component:g=>t.createElement(d,{value:g.options,data:g.data,onChange:g.onChange}),matcher:s.Ls.get(i.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:g=>g}},78425:(j,I,e)=>{"use strict";e.d(I,{i:()=>y});var t=e(25359),n=e(27702),i=e(19221),s=e(76178),r=e(1128);const m=(0,n.memo)(E=>{const{options:C,onChange:u}=E,D=(0,n.useCallback)(P=>u(P.target.value),[u]);return n.createElement(r.I,{placeholder:"Enter regular expression",defaultValue:C,onBlur:D})});m.displayName="FieldNameByRegexMatcherEditor";const d={id:i.mi.byRegexp,component:m,matcher:s.Ls.get(i.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:E=>E};var o=e(28580),l=e(38588);const a=(0,n.memo)(E=>{const{data:C,options:u,onChange:D,id:P}=E,S=(0,l.IX)(C),x=(0,l.nw)(S,u),M=(0,n.useCallback)(O=>{if((0,l.w3)(O.value,S))return D(O.value)},[S,D]),R=x.find(O=>O.value===u);return n.createElement(o.Ph,{value:R,options:x,onChange:M,inputId:P})});a.displayName="FieldNameMatcherEditor";const g={id:i.mi.byName,component:a,matcher:s.Ls.get(i.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:E=>E},c=(0,n.memo)(E=>{const{data:C,options:u,onChange:D}=E,{readOnly:P,prefix:S}=u,x=(0,l.IX)(C),M=(0,l.nw)(x,void 0),R=(0,n.useCallback)(O=>{if(Array.isArray(O))return D({...u,names:O.reduce((T,U)=>((0,l.w3)(U.value,x)&&T.push(U.value),T),[])})},[x,D,u]);if(P){const O=(u.names??[]).join(", ");return n.createElement(r.I,{value:O,readOnly:!0,disabled:!0,prefix:S})}return n.createElement(o.NU,{value:u.names,options:M,onChange:R})});c.displayName="FieldNameMatcherEditor";const h={id:i.mi.byNames,component:c,matcher:s.Ls.get(i.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:E=>(E.names??[]).join(", "),excludeFromPicker:!0};var f=e(27857),b=e(45346),v=e(85219);const y=new t.B(()=>[g,d,f.$w,v.S,h,b.fN])},38588:(j,I,e)=>{"use strict";e.d(I,{IX:()=>m,g2:()=>r,nw:()=>d,w3:()=>s});var t=e(27702),n=e(75578),i=e(4680);function s(o,l){return o?l.display.has(o)||l.raw.has(o):!1}function r(o,l){const a={display:new Set,raw:new Set,fields:new Map};for(const g of o)for(const c of g.fields){if(l&&!l(c))continue;const h=(0,n.CZ)(c,g,o);a.display.add(h),a.fields.set(h,c),c.name&&h!==c.name&&(a.raw.add(c.name),a.fields.set(c.name,c))}return a}function m(o,l){return(0,t.useMemo)(()=>r(o,l),[o,l])}function d(o,l,a,g){return(0,t.useMemo)(()=>{let c=!1;const h=[];a&&h.push(a);for(const f of o.display){!c&&f===l&&(c=!0);const b=o.fields.get(f);(!g||g===b?.type)&&h.push({value:f,label:f,icon:b?(0,i.e7)(b):void 0})}for(const f of o.raw)o.display.has(f)||(!c&&f===l&&(c=!0),h.push({value:f,label:`${f} (base field name)`}));return l&&!c&&h.push({value:l,label:`${l} (not found)`}),h},[o,l,a,g])}},89746:(j,I,e)=>{"use strict";e.d(I,{v:()=>l});var t=e(42844),n=e(27702),i=e(66310),s=e(53709),r=e(66711),m=e(79655),d=e(55238);const o=n.forwardRef(({header:g,children:c,ariaLabel:h,onOpen:f,onClose:b,onKeyDown:v,...y},E)=>{const C=(0,i.wW)(a),u=(0,n.useRef)(null);(0,n.useImperativeHandle)(E,()=>u.current);const[D]=(0,d.d)({localRef:u,onOpen:f,onClose:b,onKeyDown:v});return n.createElement("div",{...y,tabIndex:-1,ref:u,className:C.wrapper,role:"menu","aria-label":h,onKeyDown:D},g&&n.createElement("div",{className:(0,t.cx)(C.header,!!c&&n.Children.toArray(c).length>0&&C.headerBorder)},g),c)});o.displayName="Menu";const l=Object.assign(o,{Item:m.s,Divider:s.R,Group:r.k}),a=g=>({header:(0,t.css)({padding:`${g.spacing(.5,1,1,1)}`}),headerBorder:(0,t.css)({borderBottom:`1px solid ${g.colors.border.weak}`}),wrapper:(0,t.css)({background:`${g.colors.background.primary}`,boxShadow:`${g.shadows.z3}`,display:"inline-block",borderRadius:`${g.shape.borderRadius()}`,padding:`${g.spacing(.5,0)}`})})},53709:(j,I,e)=>{"use strict";e.d(I,{R:()=>s});var t=e(42844),n=e(27702),i=e(66310);function s(){const m=(0,i.wW)(r);return n.createElement("div",{className:m.divider})}const r=m=>({divider:(0,t.css)({height:1,backgroundColor:m.colors.border.weak,margin:m.spacing(.5,0)})})},66711:(j,I,e)=>{"use strict";e.d(I,{k:()=>m});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(66310);const m=({label:o,ariaLabel:l,children:a})=>{const g=(0,r.wW)(d),c=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!l&&o?c:void 0,"aria-label":l},o&&s.createElement("label",{id:c,className:g.groupLabel,"aria-hidden":!0},o),a)};m.displayName="MenuGroup";const d=o=>({groupLabel:(0,t.css)({color:o.colors.text.secondary,fontSize:o.typography.size.sm,padding:o.spacing(.5,1)})})},79655:(j,I,e)=>{"use strict";e.d(I,{s:()=>g});var t=e(42844),n=e(27702),i=e(66310),s=e(97289),r=e(73453),m=e(74639),d=e(55238);const o=h=>{if(!h)return!1;const f=h.parentElement.getBoundingClientRect(),b=h.getBoundingClientRect();return b.width!==0&&f.right+b.width+10>window.innerWidth},l=n.memo(({items:h,isOpen:f,openedWithArrow:b,setOpenedWithArrow:v,close:y,customStyle:E})=>{const C=(0,i.wW)(a),u=(0,n.useRef)(null),[D]=(0,d.d)({localRef:u,isMenuOpen:f,openedWithArrow:b,setOpenedWithArrow:v,close:y}),[P,S]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{f&&u.current&&S(o(u.current))},[f]),n.createElement(n.Fragment,null,n.createElement("div",{className:C.iconWrapper,"aria-label":m.wl.components.Menu.SubMenu.icon},n.createElement(r.J,{name:"angle-right",className:C.icon,"aria-hidden":!0})),f&&n.createElement("div",{ref:u,className:(0,t.cx)(C.subMenu,{[C.pushLeft]:P}),"aria-label":m.wl.components.Menu.SubMenu.container,style:E},n.createElement("div",{tabIndex:-1,className:C.itemsWrapper,role:"menu",onKeyDown:D},h)))});l.displayName="SubMenu";const a=h=>({iconWrapper:(0,t.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,t.css)({opacity:.7,marginLeft:h.spacing(1),color:h.colors.text.secondary}),itemsWrapper:(0,t.css)({background:h.colors.background.primary,boxShadow:h.shadows.z3,display:"inline-block",borderRadius:h.shape.borderRadius()}),pushLeft:(0,t.css)({right:"100%",left:"unset"}),subMenu:(0,t.css)({position:"absolute",top:0,left:"100%",zIndex:h.zIndex.dropdown})}),g=n.memo(n.forwardRef((h,f)=>{const{url:b,icon:v,label:y,ariaLabel:E,ariaChecked:C,target:u,onClick:D,className:P,active:S,disabled:x,destructive:M,childItems:R,role:O="menuitem",tabIndex:T=-1,customSubMenuContainerStyles:U,shortcut:L,testId:V}=h,w=(0,i.wW)(c),[K,B]=(0,n.useState)(S),[W,_]=(0,n.useState)(!1),[k,A]=(0,n.useState)(!1),z=(0,n.useCallback)(()=>{x||(_(!0),B(!0))},[x]),H=(0,n.useCallback)(()=>{x||(_(!1),B(!1))},[x]),Q=R&&R.length>0,X=Q?"div":b===void 0?"button":"a",te=(0,t.cx)({[w.item]:!0,[w.active]:K,[w.disabled]:x,[w.destructive]:M&&!x},P),oe={[X==="button"?"disabled":"aria-disabled"]:x,...X==="a"&&x&&{href:void 0,onClick:void 0},...x&&{tabIndex:-1,["data-disabled"]:x}},Z=(0,n.useRef)(null);(0,n.useImperativeHandle)(f,()=>Z.current);const le=ne=>{switch(ne.key){case"ArrowRight":ne.preventDefault(),ne.stopPropagation(),Q&&(_(!0),A(!0),B(!0));break;default:break}},ce=()=>{_(!1),B(!1),Z?.current?.focus()},q=!!(L&&L.length>0);return n.createElement(X,{target:u,className:te,rel:u==="_blank"?"noopener noreferrer":void 0,href:b,onClick:D,onMouseEnter:z,onMouseLeave:H,onKeyDown:le,role:b===void 0?O:void 0,"data-role":"menuitem",ref:Z,"data-testid":V,"aria-label":E,"aria-checked":C,tabIndex:T,...oe},n.createElement(n.Fragment,null,v&&n.createElement(r.J,{name:v,className:w.icon,"aria-hidden":!0}),y,n.createElement("div",{className:(0,t.cx)(w.rightWrapper,{[w.withShortcut]:q})},q&&n.createElement("div",{className:w.shortcut},n.createElement(r.J,{name:"keyboard","aria-hidden":!0}),L),Q&&n.createElement(l,{items:R,isOpen:W,openedWithArrow:k,setOpenedWithArrow:A,close:ce,customStyle:U}))))}));g.displayName="MenuItem";const c=h=>({item:(0,t.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:h.colors.text.primary,display:"flex",alignItems:"center",padding:h.spacing(.5,2),minHeight:h.spacing(4),margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus, &:focus-visible":{background:h.colors.action.hover,color:h.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,s.getFocusStyles)(h)}),active:(0,t.css)({background:h.colors.action.hover}),destructive:(0,t.css)({color:h.colors.error.text,svg:{color:h.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:h.colors.error.main,color:h.colors.error.contrastText,svg:{color:h.colors.error.contrastText}}}),disabled:(0,t.css)({color:h.colors.action.disabledText,"&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:h.colors.action.disabledText}}),icon:(0,t.css)({opacity:.7,marginRight:"10px",marginLeft:"-4px",color:h.colors.text.secondary}),rightWrapper:(0,t.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),shortcutIcon:(0,t.css)({marginRight:h.spacing(1)}),withShortcut:(0,t.css)({minWidth:h.spacing(10.5)}),shortcut:(0,t.css)({display:"flex",alignItems:"center",gap:h.spacing(1),marginLeft:h.spacing(2),color:h.colors.text.secondary,opacity:.7})})},55238:(j,I,e)=>{"use strict";e.d(I,{d:()=>r});var t=e(27702),n=e(19559);const i=(m,d)=>(m%d+d)%d,s=-1,r=({localRef:m,isMenuOpen:d,openedWithArrow:o,setOpenedWithArrow:l,close:a,onOpen:g,onClose:c,onKeyDown:h})=>{const[f,b]=(0,t.useState)(s);return(0,t.useEffect)(()=>{d&&o&&(b(0),l?.(!1))},[d,o,l]),(0,t.useEffect)(()=>{const y=m?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');y?.[f]?.focus(),y?.forEach((E,C)=>{E.tabIndex=C===f?0:-1})},[m,f]),(0,n.Z)(()=>{g?.(b)}),[y=>{const E=m?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),C=E?.length??0;switch(y.key){case"ArrowUp":y.preventDefault(),y.stopPropagation(),b(i(f-1,C));break;case"ArrowDown":y.preventDefault(),y.stopPropagation(),b(i(f+1,C));break;case"ArrowLeft":y.preventDefault(),y.stopPropagation(),b(s),a?.();break;case"Home":y.preventDefault(),y.stopPropagation(),b(0);break;case"End":y.preventDefault(),y.stopPropagation(),b(C-1);break;case"Enter":y.preventDefault(),y.stopPropagation(),E?.[f]?.click();break;case"Escape":c?.();break;case"Tab":y.preventDefault(),c?.();break;default:break}h?.(y)}]}},13741:(j,I,e)=>{"use strict";e.d(I,{u:()=>g});var t=e(42844),n=e(45809),i=e(91546),s=e(6714),r=e(27702),m=e(66310),d=e(67437),o=e(64022),l=e(22106),a=e(32173);function g(f){const{title:b,children:v,isOpen:y=!1,closeOnEscape:E=!0,closeOnBackdropClick:C=!0,className:u,contentClassName:D,onDismiss:P,onClickBackdrop:S,trapFocus:x=!0}=f,M=(0,m.l4)(),R=(0,a.J)(M),O=(0,r.useRef)(null),{overlayProps:T,underlayProps:U}=(0,s.Ir)({isKeyboardDismissDisabled:!E,isOpen:y,onClose:P},O),{dialogProps:L,titleProps:V}=(0,n.R)({},O);if(!y)return null;const w=(0,t.cx)(R.modalHeader,typeof b!="string"&&R.modalHeaderWithTabs);return r.createElement(s.Xj,null,r.createElement("div",{role:"presentation",className:R.modalBackdrop,onClick:S||(C?P:void 0),...U}),r.createElement(i.MT,{contain:x,autoFocus:!0,restoreFocus:!0},r.createElement("div",{className:(0,t.cx)(R.modal,u),ref:O,...T,...L},r.createElement("div",{className:w},typeof b=="string"&&r.createElement(h,{...f,title:b,id:V.id}),typeof b!="string"&&b,r.createElement("div",{className:R.modalHeaderClose},r.createElement(d.h,{name:"times",size:"xl",onClick:P,tooltip:"Close"}))),r.createElement("div",{className:(0,t.cx)(R.modalContent,D)},v))))}function c({leftItems:f,children:b}){const v=(0,m.l4)(),y=(0,a.J)(v);return f?r.createElement("div",{className:y.modalButtonRow},r.createElement(o.Lh,{justify:"space-between"},r.createElement(o.Lh,{justify:"flex-start",spacing:"md"},f),r.createElement(o.Lh,{justify:"flex-end",spacing:"md"},b))):r.createElement("div",{className:y.modalButtonRow},r.createElement(o.Lh,{justify:"flex-end",spacing:"md",wrap:!0},b))}g.ButtonRow=c;function h({icon:f,iconTooltip:b,title:v,id:y}){return r.createElement(l.x,{icon:f,iconTooltip:b,title:v,id:y})}},22106:(j,I,e)=>{"use strict";e.d(I,{x:()=>s});var t=e(27702),n=e(66310),i=e(32173);const s=({icon:r,iconTooltip:m,title:d,children:o,id:l})=>{const a=(0,n.wW)(i.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:a.modalHeaderTitle,id:l},d),o)}},64067:(j,I,e)=>{"use strict";e.d(I,{Q:()=>n});var t=e(27702);const n=({children:i})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},i)))},64472:(j,I,e)=>{"use strict";e.d(I,{H:()=>r});var t=e(27702),n=e(54281),i=e(15372),s=e(22106);const r=({icon:m,title:d,tabs:o,activeTab:l,onChangeTab:a})=>t.createElement(s.x,{icon:m,title:d},t.createElement(i.J,{hideBorder:!0},o.map((g,c)=>t.createElement(n.O,{key:`${g.value}-${c}`,label:g.label,icon:g.icon,suffix:g.tabSuffix,active:g.value===l,onChangeTab:()=>a(g)}))))},60729:(j,I,e)=>{"use strict";e.d(I,{$i:()=>i,JY:()=>r,Y0:()=>s,kr:()=>n});var t=e(27702);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class i extends t.Component{constructor(d){super(d),this.showModal=(o,l)=>{this.setState({component:o,props:l})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:d.component||null,props:d.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:m,props:d})=>m?t.createElement(m,{...d}):null),r=n.Consumer},32173:(j,I,e)=>{"use strict";e.d(I,{J:()=>i});var t=e(42844),n=e(80402);const i=(0,n.B)(s=>{const r=s.shape.borderRadius(1);return{modal:(0,t.css)({position:"fixed",zIndex:s.zIndex.modal,background:s.colors.background.primary,boxShadow:s.shadows.z3,borderRadius:r,border:`1px solid ${s.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column"}),modalBackdrop:(0,t.css)({position:"fixed",zIndex:s.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:s.components.overlay.background,backdropFilter:"blur(1px)"}),modalHeader:(0,t.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:s.spacing(1,2,0,2)}),modalHeaderWithTabs:(0,t.css)({borderBottom:`1px solid ${s.colors.border.weak}`}),modalHeaderTitle:(0,t.css)({fontSize:s.typography.size.lg,margin:s.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,t.css)({marginRight:s.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,t.css)({height:"100%",display:"flex",alignItems:"center",color:s.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,t.css)({overflow:"auto",padding:s.spacing(3),width:"100%"}),modalButtonRow:(0,t.css)({paddingTop:s.spacing(3)})}})},11649:(j,I,e)=>{"use strict";e.d(I,{p:()=>h});var t=e(42844),n=e(27702),i=e(60519),s=e(74639),r=e(66310),m=e(15939),d=e(94661);function o(b){for(let v=b.length-1;v>0;v--){const y=b.charAt(v);if(y==="$")return{index:v,prefix:b.substring(v)};if(y===" "||y==="	"||y==='"'||y==="'")return{index:v+1,prefix:b.substring(v+1)}}return{index:0,prefix:b}}function l(b,v,y,E){const C=[];for(const u of y)v&&!u.label.startsWith(v)||C.push({...u,kind:a(b,u.kind),range:E,insertText:u.insertText??u.label});return C}function a(b,v){switch(v){case d.k.Method:return b.languages.CompletionItemKind.Method;case d.k.Field:return b.languages.CompletionItemKind.Field;case d.k.Property:return b.languages.CompletionItemKind.Property;case d.k.Constant:return b.languages.CompletionItemKind.Constant;case d.k.Text:return b.languages.CompletionItemKind.Text}return b.languages.CompletionItemKind.Text}function g(b,v,y,E){if(!(!v||!y))return b.languages.registerCompletionItemProvider(v,{triggerCharacters:["$"],provideCompletionItems:(C,u,D)=>{if(C.id!==E)return;const P={startLineNumber:u.lineNumber,endLineNumber:u.lineNumber,startColumn:u.column,endColumn:u.column};if(D.triggerCharacter==="$")return P.startColumn=u.column-1,{suggestions:l(b,"$",y(),P)};const S=C.getValueInRange({startLineNumber:u.lineNumber,startColumn:1,endLineNumber:u.lineNumber,endColumn:u.column}),{index:x,prefix:M}=o(S);P.startColumn=x+1;const R=l(b,M,y(),P);if(R.length)return{suggestions:R}}})}class c extends n.PureComponent{constructor(v){super(v),this.loadCustomLanguage=()=>{const{language:y}=this.props,E=i.F.getIfExists(y);return E?E.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:y}=this.props;y&&y(this.getEditorValue())},this.onSave=()=>{const{onSave:y}=this.props;y&&y(this.getEditorValue())},this.handleBeforeMount=y=>{this.monaco=y;const{onBeforeEditorMount:E}=this.props;E?.(y)},this.handleOnMount=(y,E)=>{const{getSuggestions:C,language:u,onChange:D,onEditorDidMount:P}=this.props;this.modelId=y.getModel()?.id,this.getEditorValue=()=>y.getValue(),C&&this.modelId&&(this.completionCancel=g(E,u,C,this.modelId)),y.onKeyDown(x=>{x.keyCode===E.KeyCode.KeyS&&(x.ctrlKey||x.metaKey)&&(x.preventDefault(),this.onSave())});const S=this.loadCustomLanguage();P&&(S.then(()=>P(y,E)),y.getModel()?.onDidChangeContent(()=>D?.(y.getValue())))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(v){const{getSuggestions:y,language:E}=this.props,C=v.language!==E;if(v.getSuggestions!==y||C){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}y&&this.modelId&&(this.completionCancel=g(this.monaco,E,y,this.modelId))}C&&this.loadCustomLanguage()}render(){const{theme:v,language:y,width:E,height:C,showMiniMap:u,showLineNumbers:D,readOnly:P,monacoOptions:S}=this.props,x=this.props.value??"",M=x.length>100,R=this.props.containerStyles??f(v).container,O={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:M&&u,renderCharacters:!1},readOnly:P,lineNumbersMinChars:4,lineDecorationsWidth:1*v.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*v.spacing.gridSize,bottom:.5*v.spacing.gridSize},fixedOverflowWidgets:!0};return D||(O.glyphMargin=!1,O.folding=!1,O.lineNumbers="off",O.lineNumbersMinChars=0),n.createElement("div",{className:R,onBlur:this.onBlur,"aria-label":s.wl.components.CodeEditor.container},n.createElement(m.o,{width:E,height:C,language:y,value:x,options:{...O,...S??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount,keepCurrentModel:!0}))}}const h=(0,r.HE)(c),f=b=>({container:(0,t.css)({borderRadius:b.shape.borderRadius(),border:`1px solid ${b.components.input.borderColor}`})})},15939:(j,I,e)=>{"use strict";e.d(I,{o:()=>m});var t=e(27702),n=e(52419),i=e(13431),s=e(25111);const r=d=>{const o=(0,s.Z)(async()=>await d);return{...o,dependency:o.value}},m=d=>{const{loading:o,error:l,dependency:a}=r(e.e(2462).then(e.bind(e,23425)));if(o)return t.createElement(n.u,{text:""});if(l)return t.createElement(i.X,{title:"React Monaco Editor failed to load",error:l,errorInfo:{componentStack:l?.stack||""}});const g=a.ReactMonacoEditor;return t.createElement(g,{...d})}},94661:(j,I,e)=>{"use strict";e.d(I,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},16640:(j,I,e)=>{"use strict";e.d(I,{T:()=>n});var t=e(94661);function n(i){const s="${"+i.value+"}",r=i.value===i.label?i.origin:`${i.label} / ${i.origin}`;return{label:s,kind:t.k.Property,detail:r,documentation:i.documentation}}},58456:(j,I,e)=>{"use strict";e.d(I,{X:()=>a});var t=e(42844),n=e(27702),i=e(74639),s=e(9848),r=e(84693),m=e(66310),d=e(97289),o=e(73453),l=e(67437);const a=n.memo(({title:c,section:h,parent:f,pageIcon:b,onGoBack:v,children:y,titleHref:E,parentHref:C,leftItems:u,isFullscreen:D,className:P,"aria-label":S,buttonOverflowAlignment:x="right",forceShowLeftItems:M=!1})=>{const R=(0,m.wW)(g),O=(0,t.cx)("page-toolbar",R.toolbar,{["page-toolbar--fullscreen"]:D,[R.noPageIcon]:!b},P),T=n.createElement(n.Fragment,null,n.createElement("span",{className:R.truncateText},c),h&&n.createElement("span",{className:R.pre}," / ",h));return n.createElement("nav",{className:O,"aria-label":S},n.createElement("div",{className:R.leftWrapper},b&&!v&&n.createElement("div",{className:R.pageIcon},n.createElement(o.J,{name:b,size:"lg","aria-hidden":!0})),v&&n.createElement("div",{className:R.pageIcon},n.createElement(l.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":i.wl.components.BackButton.backArrow,onClick:v})),n.createElement("nav",{"aria-label":"Search links",className:R.navElement},f&&C&&n.createElement(n.Fragment,null,n.createElement(s.r,{"aria-label":`Search dashboard in the ${f} folder`,className:(0,t.cx)(R.titleText,R.parentLink,R.titleLink,R.truncateText),href:C},f," ",n.createElement("span",{className:R.parentIcon})),E&&n.createElement("span",{className:(0,t.cx)(R.titleText,R.titleDivider),"aria-hidden":!0},"/")),(c||!!u?.length)&&n.createElement("div",{className:R.titleWrapper},c&&n.createElement("h1",{className:R.h1Styles},E?n.createElement(s.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(R.titleText,R.titleLink),href:E},T):n.createElement("div",{className:R.titleText},T)),u?.map((U,L)=>n.createElement("div",{className:(0,t.cx)(R.leftActionItem,{[R.forceShowLeftActionItems]:M}),key:L},U))))),n.createElement(r.R,{alignment:x},n.Children.toArray(y).filter(Boolean)))});a.displayName="PageToolbar";const g=c=>{const{spacing:h,typography:f}=c,b=(0,d.getFocusStyles)(c);return{pre:(0,t.css)({whiteSpace:"pre"}),toolbar:(0,t.css)({alignItems:"center",background:c.colors.background.canvas,display:"flex",gap:c.spacing(2),justifyContent:"space-between",padding:c.spacing(1.5,2),[c.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,t.css)({[c.breakpoints.down("md")]:{paddingLeft:c.spacing(2)}}),leftWrapper:(0,t.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,t.css)({display:"none",[c.breakpoints.up("sm")]:{display:"flex",paddingRight:c.spacing(1),alignItems:"center"}}),truncateText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,t.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,t.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,t.css)({margin:h(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,t.css)({marginLeft:c.spacing(.5)}),titleText:(0,t.css)({display:"flex",fontSize:f.size.lg,margin:0,maxWidth:"300px",borderRadius:c.shape.radius.default}),titleLink:(0,t.css)({"&:focus-visible":b}),titleDivider:(0,t.css)({padding:h(0,.5,0,.5),display:"none",[c.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,t.css)({display:"none",[c.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,t.css)({display:"none",alignItems:"center",paddingRight:h(.5),[c.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,t.css)({display:"flex"})}}},50852:(j,I,e)=>{"use strict";e.d(I,{t:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(66670),r=e(73453);const m=({currentPage:o,numberOfPages:l,onNavigate:a,hideWhenSinglePage:g,showSmallVersion:c,className:h})=>{const f=(0,i.wW)(d),b=c?1:8,v=(0,n.useMemo)(()=>{const y=[...new Array(l).keys()],E=l>b,C=(u,D)=>n.createElement("li",{key:u,className:f.item},n.createElement(s.zx,{size:"sm",variant:D,onClick:()=>a(u)},u));return y.reduce((u,D)=>{const P=D+1,S=P===o?"primary":"secondary",x=b,M=l-b+1,R=M-x,O=P===1||P===l,T=R>-1&&o>=x&&o<=M,U=c?1:3,L=c?0:2;return E?O||o<x&&P<x||R>=0&&o>M&&P>M||R<0&&o>=x&&P>M||T&&P>=o-L&&P<=o+L?u.push(C(P,S)):(P===x&&o<x||P===M&&o>M||T&&(P===o-U||P===o+U))&&u.push(n.createElement("li",{key:P,className:f.item},n.createElement(r.J,{className:f.ellipsis,name:"ellipsis-v"}))):u.push(C(P,S)),u},[])},[o,l,a,b,c,f.ellipsis,f.item]);return g&&l<=1?null:n.createElement("div",{className:(0,t.cx)(f.container,h)},n.createElement("ol",null,n.createElement("li",{className:f.item},n.createElement(s.zx,{"aria-label":"previous page",size:"sm",variant:"secondary",onClick:()=>a(o-1),disabled:o===1},n.createElement(r.J,{name:"angle-left"}))),v,n.createElement("li",{className:f.item},n.createElement(s.zx,{"aria-label":"next page",size:"sm",variant:"secondary",onClick:()=>a(o+1),disabled:o===l},n.createElement(r.J,{name:"angle-right"})))))},d=()=>({container:(0,t.css)({float:"right"}),item:(0,t.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,t.css)({transform:"rotate(90deg)"})})},1573:(j,I,e)=>{"use strict";e.d(I,{g:()=>a});var t=e(42844),n=e(27702),i=e(66310);const s={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},r=8,m={name:"Grafana Default",typography:{fontFamily:{sansSerif:'"Inter", "Helvetica", "Arial", sans-serif',monospace:"'Roboto Mono', monospace"},size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},heading:{h1:"28px",h2:"24px",h3:"21px",h4:"18px",h5:"16px",h6:"14px"},weight:{light:300,regular:400,semibold:500,bold:500},lineHeight:{xs:1,sm:1.1,md:1.5,lg:2},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:"0",sm:"544px",md:"769px",lg:"992px",xl:"1200px",xxl:"1440px"},spacing:{base:r,insetSquishMd:"4px 8px",d:"16px",xxs:"2px",xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",gutter:"30px",formSpacingBase:r,formMargin:`${r*4}px`,formFieldsetMargin:`${r*2}px`,formInputHeight:r*4,formButtonHeight:r*4,formInputPaddingHorizontal:`${r}px`,formInputAffixPaddingHorizontal:`${r/2}px`,formInputMargin:`${r*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${r/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:"2px",md:"3px",lg:"5px"},width:{sm:"1px"}},height:{sm:24,md:32,lg:48},panelPadding:8,panelHeaderHeight:28,zIndex:{navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},d=null;var o=e(73453),l=e(80011);const a=({error:c,onClick:h})=>{const f=(0,i.wW)(g);return c?n.createElement(l.u,{theme:"error",content:c},n.createElement(o.J,{onClick:h,className:(0,t.cx)(f.icon,{[f.clickable]:!!h}),size:"sm",name:"exclamation-triangle"})):null},g=()=>({clickable:(0,t.css)({cursor:"pointer"}),icon:(0,t.css)({color:`${s.red88}`})})},44790:(j,I,e)=>{"use strict";e.d(I,{T:()=>d});var t=e(42844),n=e(27702),i=e(74639),s=e(66310),r=e(73453),m=e(80011);const d=({onCancel:l,loading:a})=>{const g=(0,s.wW)(o);return a?n.createElement(m.u,{content:"Cancel query"},n.createElement(r.J,{className:(0,t.cx)("spin-clockwise",{[g.clickable]:!!l}),name:"sync",size:"sm",onClick:l,"aria-label":i.wl.components.LoadingIndicator.icon})):null},o=()=>({clickable:(0,t.css)({cursor:"pointer"})})},98627:(j,I,e)=>{"use strict";e.d(I,{f:()=>P});var t=e(42844),n=e(27702),i=e(96284),s=e(53933),r=e(74639),m=e(66310),d=e(97289);function o({children:O,delay:T}){const[U,L]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{window.setTimeout(()=>{L(!0)},T)},[O,T]),n.createElement(n.Fragment,null,U?O:null)}var l=e(73453),a=e(98557),g=e(80011),c=e(80434),h=e(30973);function f({menu:O,title:T,placement:U="bottom",offset:L,dragClassCancel:V,menuButtonClass:w,onOpenMenu:K}){const B=T?r.wl.components.Panels.Panel.menu(T):"panel-menu-button",W=(0,n.useCallback)(_=>{_&&K&&K()},[K]);return n.createElement(c.L,{overlay:O,placement:U,offset:L,onVisibleChange:W},n.createElement(h.h,{"aria-label":`Menu for panel with ${T?`title ${T}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":B,className:(0,t.cx)(w,V)}))}function b({menu:O,title:T,dragClass:U,children:L,offset:V=-32,onOpenMenu:w}){const K=(0,m.wW)(v),B=(0,n.useRef)(null),W=r.wl.components.Panels.Panel.HoverWidget,_=(0,n.useCallback)(A=>{B.current?.setPointerCapture(A.pointerId)},[]),k=(0,n.useCallback)(A=>{B.current?.releasePointerCapture(A.pointerId)},[]);return L===void 0||n.Children.count(L)===0?null:n.createElement("div",{className:(0,t.cx)(K.container,"show-on-hover"),style:{top:V},"data-testid":W.container},U&&n.createElement("div",{className:(0,t.cx)(K.square,K.draggable,U),onPointerDown:_,onPointerUp:k,ref:B,"data-testid":W.dragIcon},n.createElement(l.J,{name:"expand-arrows",className:K.draggableIcon})),!T&&n.createElement("h6",{className:(0,t.cx)(K.untitled,{[K.draggable]:!!U},U)},"Untitled"),L,O&&n.createElement(f,{menu:O,title:T,placement:"bottom",menuButtonClass:K.menuButton,onOpenMenu:w}))}function v(O){return{container:(0,t.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:O.colors.background.secondary,color:O.colors.text.primary,border:`1px solid ${O.colors.border.weak}`,borderRadius:O.shape.radius.default,height:O.spacing(4),boxShadow:O.shadows.z1}),square:(0,t.css)({display:"flex",justifyContent:"center",alignItems:"center",width:O.spacing(4),height:"100%"}),draggable:(0,t.css)({cursor:"move",[O.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,t.css)({background:"inherit",border:"none","&:hover":{background:O.colors.secondary.main}}),untitled:(0,t.css)({color:O.colors.text.disabled,fontStyle:"italic",padding:O.spacing(0,1),marginBottom:0}),draggableIcon:(0,t.css)({transform:"rotate(45deg)",color:O.colors.text.secondary,"&:hover":{color:O.colors.text.primary}})}}var y=e(70216);function E({description:O,className:T}){const U=(0,m.wW)(C),L=()=>{const V=typeof O=="function"?O():O;return n.createElement("div",{className:"panel-info-content markdown-html"},n.createElement("div",{dangerouslySetInnerHTML:{__html:V}}))};return O!==""?n.createElement(g.u,{interactive:!0,content:L},n.createElement(y.a,{className:(0,t.cx)(T,U.description)},n.createElement(l.J,{name:"info-circle",size:"md"}))):null}const C=O=>({description:(0,t.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function u({message:O,onClick:T,ariaLabel:U="status"}){const L=(0,m.wW)(D);return n.createElement(h.h,{className:L.buttonStyles,onClick:T,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:O||"","aria-label":U})}const D=O=>{const{headerHeight:T,padding:U}=O.components.panel;return{buttonStyles:(0,t.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:O.spacing(U),width:O.spacing(T),height:O.spacing(T),borderRadius:O.shape.radius.default})}};function P({width:O,height:T,children:U,padding:L="md",title:V="",description:w="",displayMode:K="default",titleItems:B,menu:W,dragClass:_,dragClassCancel:k,hoverHeader:A=!1,hoverHeaderOffset:z,loadingState:H,statusMessage:Q,statusMessageOnClick:X,leftItems:te,actions:oe,onCancelQuery:Z,onOpenMenu:le}){const ce=(0,m.l4)(),q=(0,m.wW)(R),ne=!A,pe="show-on-hover",re=x(ce,ne),{contentStyle:ie,innerWidth:Se,innerHeight:ye}=M(L,ce,re,T,O),Ce={height:re,cursor:_?"move":"auto"},de={width:O,height:T};K==="transparent"&&(de.backgroundColor="transparent",de.border="none");const[we,{width:_e}]=(0,i.Z)();te&&(oe=te);const Je=V?r.wl.components.Panels.Panel.title(V):"Panel",Ue=n.createElement(n.Fragment,null,V&&n.createElement("h6",{title:V,className:q.title},V),n.createElement("div",{className:(0,t.cx)(q.titleItems,k),"data-testid":"title-items-container"},n.createElement(E,{description:w,className:k}),B),H===s.Gu.Streaming&&n.createElement(g.u,{content:Z?"Stop streaming":"Streaming"},n.createElement(y.a,{className:k,"data-testid":"panel-streaming",onClick:Z},n.createElement(l.J,{name:"circle-mono",size:"md",className:q.streaming}))),H===s.Gu.Loading&&Z&&n.createElement(o,{delay:2e3},n.createElement(g.u,{content:"Cancel query"},n.createElement(y.a,{className:(0,t.cx)(k,q.pointer),"data-testid":"panel-cancel-query",onClick:Z},n.createElement(l.J,{name:"sync-slash",size:"md"})))),n.createElement("div",{className:q.rightAligned},oe&&n.createElement("div",{className:q.rightActions},S(oe,$e=>$e))));return n.createElement("div",{className:q.container,style:de,"data-testid":Je,tabIndex:0,ref:we},n.createElement("div",{className:q.loadingBarContainer},H===s.Gu.Loading?n.createElement(a.F,{width:_e,ariaLabel:"Panel loading bar"}):null),A&&n.createElement(n.Fragment,null,n.createElement(b,{menu:W,title:V,offset:z,dragClass:_,onOpenMenu:le},Ue),Q&&n.createElement("div",{className:q.errorContainerFloating},n.createElement(u,{message:Q,onClick:X,ariaLabel:"Panel status"}))),ne&&n.createElement("div",{className:(0,t.cx)(q.headerContainer,_),style:Ce,"data-testid":"header-container"},Q&&n.createElement("div",{className:k},n.createElement(u,{message:Q,onClick:X,ariaLabel:"Panel status"})),Ue,W&&n.createElement(f,{menu:W,title:V,placement:"bottom-end",menuButtonClass:(0,t.cx)(q.menuItem,k,pe),onOpenMenu:le})),n.createElement("div",{className:(0,t.cx)(q.content,T===void 0&&q.containNone),style:ie},typeof U=="function"?U(Se,ye):U))}const S=(O,T)=>{const U=n.Children.toArray(O).filter(Boolean);return U.length>0?T(U):null},x=(O,T)=>T?O.spacing.gridSize*O.components.panel.headerHeight:0,M=(O,T,U,L,V)=>{const w=(O==="md"?T.components.panel.padding:0)*T.spacing.gridSize,K=w*2,B=1*2;let W=0;V&&(W=V-K-B);const _={padding:w};let k=0;return L&&(k=L-U-K-B),{contentStyle:_,innerWidth:W,innerHeight:k}},R=O=>{const{background:T,borderColor:U,padding:L}=O.components.panel;return{container:(0,t.css)({label:"panel-container",backgroundColor:T,border:`1px solid ${U}`,position:"relative",borderRadius:O.shape.borderRadius(1),height:"100%",display:"flex",flexDirection:"column",".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,d.getFocusStyles)(O),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),loadingBarContainer:(0,t.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",overflow:"hidden"}),containNone:(0,t.css)({contain:"none"}),content:(0,t.css)({label:"panel-content",flexGrow:1,contain:"strict"}),headerContainer:(0,t.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,t.css)({cursor:"pointer"}),streaming:(0,t.css)({label:"panel-streaming",marginRight:0,color:O.colors.success.text,"&:hover":{color:O.colors.success.text}}),title:(0,t.css)({label:"panel-title",marginBottom:0,padding:O.spacing(0,L),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:O.typography.h6.fontSize,fontWeight:O.typography.h6.fontWeight}),items:(0,t.css)({display:"flex"}),item:(0,t.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,t.css)({visibility:"hidden"}),menuItem:(0,t.css)({label:"panel-menu",border:"none",background:O.colors.secondary.main,"&:hover":{background:O.colors.secondary.shade}}),errorContainerFloating:(0,t.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:O.zIndex.tooltip}),rightActions:(0,t.css)({display:"flex",padding:O.spacing(0,L),gap:O.spacing(1)}),rightAligned:(0,t.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,t.css)({display:"flex",height:"100%"})}}},70823:(j,I,e)=>{"use strict";e.d(I,{R9:()=>r,_w:()=>s,bb:()=>i});var t=e(27702),n=e(62435);const i=t.createContext({eventsScope:"global",eventBus:new n.F}),s=i.Provider,r=()=>t.useContext(i)},70216:(j,I,e)=>{"use strict";e.d(I,{a:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(97289),r=e(66670);const m=(0,n.forwardRef)(({className:o,children:l,href:a,onClick:g,target:c,title:h,...f},b)=>{const v=(0,i.wW)(d);return a?n.createElement("a",{ref:b,href:a,onClick:g,target:c,title:h,className:(0,t.cx)(v.linkItem,o),...f},l):g?n.createElement(r.zx,{ref:b,className:(0,t.cx)(v.item,o),variant:"secondary",fill:"text",onClick:g},l):n.createElement("span",{ref:b,className:(0,t.cx)(v.item,o),...f},l)});m.displayName="TitleItem";const d=o=>{const l=(0,t.css)({color:`${o.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${o.shape.borderRadius()}`,padding:`${o.spacing(0,1)}`,height:`${o.spacing(o.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,s.getFocusStyles)(o),zIndex:1},"&: focus:not(:focus-visible)":(0,s.getMouseFocusStyles)(o),"&:hover ":{boxShadow:`${o.shadows.z1}`,background:`${o.colors.background.secondary}`,color:`${o.colors.text.primary}`}});return{item:l,linkItem:(0,t.cx)(l,(0,t.css)({cursor:"pointer"}))}}},92056:(j,I,e)=>{"use strict";e.d(I,{fm:()=>r});var t=e(1573),n=e(44790),i=e(98627),s=e(70216);const r=i.f;r.LoadingIndicator=n.T,r.ErrorIndicator=t.g,r.TitleItem=s.a},76761:(j,I,e)=>{"use strict";e.d(I,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},25695:(j,I,e)=>{"use strict";e.d(I,{l:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({children:m,className:d,...o})=>{const l=(0,i.wW)(r);return n.createElement("div",{className:(0,t.cx)(l,d),...o},m)},r=m=>(0,t.css)({backgroundColor:m.components.panel.background,border:`1px solid ${m.components.panel.borderColor}`,borderRadius:m.shape.radius.default})},97918:(j,I,e)=>{"use strict";e.d(I,{o:()=>s});var t=e(27702),n=e(9232),i=e(25357);const s=({status:m,color:d,...o})=>{const l=r(m);return t.createElement(i.C,{text:l.text,color:l.color,icon:l.icon,tooltip:l.tooltip,...o})};s.displayName="PluginSignatureBadge";function r(m){switch(m||(m=n.Xy.invalid),m){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},52995:(j,I,e)=>{"use strict";e.d(I,{RN:()=>r,h_:()=>s,lO:()=>m});var t=e(27702),n=e(27473),i=e(66310);function s(o){const{children:l,className:a,root:g,forwardedRef:c}=o,h=(0,i.l4)(),f=(0,t.useRef)(null),b=g??r();return f.current||(f.current=document.createElement("div"),a&&(f.current.className=a),f.current.style.position="relative",f.current.style.zIndex=`${h.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(f.current&&b.appendChild(f.current),()=>{f.current&&b.removeChild(f.current)}),[b]),n.createPortal(t.createElement("div",{ref:c},l),f.current)}function r(){return window.document.getElementById("grafana-portal-container")??document.body}function m(){return t.createElement("div",{id:"grafana-portal-container"})}const d=t.forwardRef((o,l)=>t.createElement(s,{...o,forwardedRef:l}));d.displayName="RefForwardingPortal"},9857:(j,I,e)=>{"use strict";e.d(I,{q:()=>D});var t=e(42844),n=e(89898),i=e.n(n),s=e(89949),r=e.n(s),m=e(27702),d=e(10418),o=e(73817),l=e(74639),a=e(80553),g=e(14524),c=e(93702),h=e(96662),f=e(3508),b=e(16646),v=e(44687),y=e(73146),E=e(66310),C=e(97289);class u extends m.PureComponent{constructor(x,M){super(x,M),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(L,V)=>{const w=L.document!==this.state.value.document,K=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(L),this.setState({value:L},()=>{if(w){const B=d.Z.serialize(K)!==d.Z.serialize(L);B&&V&&this.runOnChangeAndRunQuery(),B&&!V&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:L}=this.props,V=d.Z.serialize(this.state.value);L&&L(this.cleanText(V))},this.runOnRunQuery=()=>{const{onRunQuery:L}=this.props;L&&(L(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(L,V,w)=>{const{onBlur:K}=this.props;if(K)K();else{const B=this.lastExecutedValue?d.Z.serialize(this.lastExecutedValue):"",W=d.Z.serialize(V.value);B!==W&&this.runOnChangeAndRunQuery()}return w()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:R,cleanText:O,portalOrigin:T,onWillApplySuggestion:U}=x;this.plugins=[(0,g.b)({onTypeahead:R,cleanText:O,portalOrigin:T,onWillApplySuggestion:U}),(0,c.d)({handler:this.runOnChangeAndRunQuery}),(0,h.z)(),(0,f.G)(),(0,b.$)(),(0,v.R)(),(0,y.w)(),...x.additionalPlugins||[]].filter(L=>L),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,a.l1)(x.query||"",x.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(x,M){const{query:R,syntax:O,syntaxLoaded:T}=this.props;if(!x.syntaxLoaded&&T&&this.editor){const L=this.editor.insertText(" ").deleteBackward(1);this.onChange(L.value,!0)}const{value:U}=this.state;R!==x.query&&R!==d.Z.serialize(U)&&this.setState({value:(0,a.l1)(R||"",O)})}cleanText(x){return x.replace(/[\r]/g,"")}render(){const{disabled:x,theme:M}=this.props,R=i()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":x}),O=P(M);return m.createElement("div",{className:(0,t.cx)(R,O.wrapper)},m.createElement("div",{className:"slate-query-field","aria-label":l.wl.components.QueryField.container},m.createElement(o.ML,{ref:T=>this.editor=T,schema:a.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:T=>{this.onChange(T.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const D=(0,E.HE)(u);D.defaultProps={onBlur:()=>{}};const P=S=>{const x=(0,C.getFocusStyles)(S);return{wrapper:(0,t.css)({"&:focus-within":x})}}},26862:(j,I,e)=>{"use strict";e.d(I,{dP:()=>g,o5:()=>l});var t=e(81205),n=e(27702),i=e(32082),s=e(74639),r=e(70610),m=e(77720),d=e(70725),o=e(30973);const l=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],a=class extends n.PureComponent{constructor(f){super(f),this.onChangeSelect=b=>{const{onIntervalChanged:v}=this.props;v&&b.value!=null&&v(b.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:f,intervals:b,tooltip:v,value:y,text:E,isLoading:C,noIntervalPicker:u,width:D,showAutoInterval:P}=this.props,S=y||"",x=this.getVariant(),M=h({intervals:b,showAutoInterval:P}),R=M.find(({value:K})=>K===S),O=c(a.offOption.value);let T=R||O;T.label===O.label&&(T={value:""});const U=T.ariaLabel,L=(0,r.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:U}),V=(0,r.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),w=T.value===""?V:L;return n.createElement(m.h,{className:"refresh-picker"},n.createElement(o.h,{"aria-label":E,tooltip:v,onClick:f,variant:x,icon:C?"fa fa-spinner":"sync",style:D?{width:D}:void 0,"data-testid":s.wl.components.RefreshPicker.runButtonV2},E),!u&&n.createElement(d.d,{value:T,options:M,onChange:this.onChangeSelect,variant:x,title:(0,r.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":s.wl.components.RefreshPicker.intervalButtonV2,"aria-label":w}))}};let g=a;g.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},g.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},g.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"},g.isLive=f=>f===a.liveOption.value;function c(f){switch(f){case g.liveOption.value:return{label:(0,r.t)("refresh-picker.live-option.label","Live"),value:f,ariaLabel:(0,r.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case g.offOption.value:return{label:(0,r.t)("refresh-picker.off-option.label","Off"),value:f,ariaLabel:(0,r.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case g.autoOption.value:return{label:(0,r.t)("refresh-picker.auto-option.label",g.autoOption.label),value:f,ariaLabel:(0,r.t)("refresh-picker.auto-option.aria-label",g.autoOption.ariaLabel)}}return{label:f,value:f}}function h({intervals:f=l,showAutoInterval:b=!1}={}){const v=f.map(y=>{const E=(0,i.RA)(y),C=(0,t.Z)(E);return{label:y,value:y,ariaLabel:C}});return b&&v.unshift(c(g.autoOption.value)),v.unshift(c(g.offOption.value)),v}},20540:(j,I,e)=>{"use strict";e.d(I,{D:()=>i});var t=e(27702),n=e(48154);function i({component:s,content:r,...m}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(r)},...m})}},88885:(j,I,e)=>{"use strict";e.d(I,{c:()=>o});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(66670),m=e(14496);const d=()=>({noRadiusInput:(0,t.css)({borderBottomRightRadius:"0 !important",borderTopRightRadius:"0 !important"}),noRadiusButton:(0,t.css)({borderBottomLeftRadius:"0 !important",borderTopLeftRadius:"0 !important"})}),o=({label:l="Password",labelWidth:a,inputWidth:g=12,onReset:c,isConfigured:h,tooltip:f,placeholder:b="Password",interactive:v,...y})=>{const E=d();return s.createElement(m.W,{label:l,tooltip:f,interactive:v,labelWidth:a,inputEl:h?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${g}`,E.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(y,"value")}),s.createElement(r.zx,{onClick:c,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${g}`,placeholder:b,...y})})};o.displayName="SecretFormField"},43656:(j,I,e)=>{"use strict";e.d(I,{m4:()=>d});var t=e(27702),n=e(66670),i=e(1128),s=e(64022);const r="configured",m="Reset",d=({isConfigured:o,onReset:l,...a})=>t.createElement(s.Lh,null,!o&&t.createElement(i.I,{...a,type:"password"}),o&&t.createElement(i.I,{...a,type:"text",disabled:!0,value:r}),o&&t.createElement(n.zx,{onClick:l,variant:"secondary"},m))},68227:(j,I,e)=>{"use strict";e.d(I,{m:()=>t.m4});var t=e(43656)},65632:(j,I,e)=>{"use strict";e.d(I,{Zk:()=>a});var t=e(42844),n=e(27702),i=e(66310),s=e(66670),r=e(64022),m=e(60105);const d="configured",o="Reset",l=g=>({configuredStyle:(0,t.css)({minHeight:g.spacing(g.components.height.md),paddingTop:g.spacing(.5),resize:"none"})}),a=({isConfigured:g,onReset:c,...h})=>{const f=(0,i.wW)(l);return n.createElement(r.Lh,null,!g&&n.createElement(m.K,{...h}),g&&n.createElement(m.K,{...h,rows:1,disabled:!0,value:d,className:(0,t.cx)(f.configuredStyle)}),g&&n.createElement(s.zx,{onClick:c,variant:"secondary"},o))}},86370:(j,I,e)=>{"use strict";e.d(I,{Z:()=>t.Zk});var t=e(65632)},95578:(j,I,e)=>{"use strict";e.d(I,{X:()=>a});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(66310),m=e(53901),d=e(77798),o=e(50615),l=e(61896);function a({options:g,value:c,onChange:h,Component:f,className:b,allowCustomValue:v,allowEmptyValue:y,placeholder:E,disabled:C,inputMinWidth:u,inputPlaceholder:D,onExpandedChange:P,autofocus:S=!1,...x}){const[M,R,O,T]=(0,o._)(S,P),U=u?Math.max(u,R):R,L=(0,r.wW)(d.N);if(!O){const V=(0,n.isObject)(c)?c.label:c,w=V!=null?String(V):void 0;return s.createElement(M,{disabled:C,Component:f||s.createElement(m.W,{className:(0,t.cx)(L.segment,{[L.queryPlaceholder]:E!==void 0&&!c,[L.disabled]:C},b)},w||E)})}return s.createElement(l.V,{...x,value:c&&!(0,n.isObject)(c)?{value:c}:c,placeholder:D,options:g,width:U,onClickOutside:()=>T(!1),allowCustomValue:v,allowEmptyValue:y,onChange:V=>{T(!1),h(V)}})}},92472:(j,I,e)=>{"use strict";e.d(I,{V:()=>c});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(26811),m=e(66310),d=e(70610),o=e(53901),l=e(61896),a=e(77798),g=e(50615);function c({value:f,onChange:b,loadOptions:v,reloadOptionsOnChange:y=!1,Component:E,className:C,allowCustomValue:u,allowEmptyValue:D,disabled:P,placeholder:S,inputMinWidth:x,inputPlaceholder:M,autofocus:R=!1,onExpandedChange:O,noOptionMessageHandler:T=h,...U}){const[L,V]=(0,r.Z)(v,[v]),[w,K,B,W]=(0,g._)(R,O),_=x?Math.max(x,K):K,k=(0,m.wW)(a.N);if(!B){const A=(0,n.isObject)(f)?f.label:f,z=A!=null?String(A):void 0;return s.createElement(w,{onClick:y?void 0:V,disabled:P,Component:E||s.createElement(o.W,{className:(0,t.cx)(k.segment,{[k.queryPlaceholder]:S!==void 0&&!f,[k.disabled]:P},C)},z||S)})}return s.createElement(l.V,{...U,value:f&&!(0,n.isObject)(f)?{value:f}:f,placeholder:M,options:L.value??[],loadOptions:y?V:void 0,width:_,noOptionsMessage:T(L),allowCustomValue:u,allowEmptyValue:D,onClickOutside:()=>{W(!1)},onChange:A=>{W(!1),b(A)}})}function h(f){return f.loading?(0,d.t)("grafana-ui.segment-async.loading","Loading options..."):f.error?(0,d.t)("grafana-ui.segment-async.error","Failed to load options"):(0,d.t)("grafana-ui.segment-async.no-options","No options found")}},45066:(j,I,e)=>{"use strict";e.d(I,{X:()=>a});var t=e(42844),n=e(27702),i=e(79812),s=e(66310),r=e(11724),m=e(53901),d=e(77798),o=e(50615);const l=14;function a({value:g,onChange:c,Component:h,className:f,placeholder:b,inputPlaceholder:v,disabled:y,autofocus:E=!1,onExpandedChange:C,...u}){const D=(0,n.useRef)(null),[P,S]=(0,n.useState)(g),[x,M]=(0,n.useState)((0,r.X1)((g||"").toString(),l).width),[R,,O,T]=(0,o._)(E,C),U=(0,s.wW)(d.N);if((0,i.Z)(D,()=>{T(!1),c(P)}),!O)return n.createElement(R,{disabled:y,Component:h||n.createElement(m.W,{className:(0,t.cx)(U.segment,{[U.queryPlaceholder]:b!==void 0&&!P,[U.disabled]:y},f)},g||b)});const L=(0,t.css)({width:`${Math.max(x+20,32)}px`});return n.createElement("input",{...u,ref:D,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",L),value:P,placeholder:v,onChange:V=>{const{width:w}=(0,r.X1)(V.target.value,l);M(w),S(V.target.value)},onBlur:()=>{T(!1),c(P)},onKeyDown:V=>{[13,27].includes(V.keyCode)&&(T(!1),c(P))}})}},44541:(j,I,e)=>{"use strict";e.d(I,{f:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(71107),r=e(53901);const m=({label:o,htmlFor:l,children:a,fill:g})=>{const c=(0,i.wW)(d);return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(r.W,{htmlFor:l,width:12,className:c.label},o),a,g&&n.createElement("div",{className:c.fill},n.createElement(r.W,null,""))))},d=o=>({label:(0,t.css)({color:o.colors.primary.text}),fill:(0,t.css)({flexGrow:1,marginBottom:o.spacing(.5)})})},61896:(j,I,e)=>{"use strict";e.d(I,{V:()=>s});var t=e(27702),n=e(66310),i=e(28580);function s({value:r,placeholder:m="",options:d=[],onChange:o,onClickOutside:l,loadOptions:a=void 0,width:g,noOptionsMessage:c="",allowCustomValue:h=!1,allowEmptyValue:f=!1,...b}){const v=(0,t.useRef)(null),y=(0,n.l4)();let E=g>0?g/y.spacing.gridSize:void 0,C,u={};return a?(C=i.qb,u={loadOptions:a,defaultOptions:!0}):C=i.Ph,t.createElement("div",{...b,ref:v},t.createElement(C,{width:E,noOptionsMessage:c,placeholder:m,autoFocus:!0,isOpen:!0,onChange:o,options:d,value:r,closeMenuOnSelect:!1,onCloseMenu:()=>{if(v&&v.current){const D=v.current.querySelector('input[id^="react-select-"]');D&&(D.value||f)?o({value:D.value,label:D.value}):l()}},allowCustomValue:h,...u}))}},77798:(j,I,e)=>{"use strict";e.d(I,{N:()=>n});var t=e(42844);const n=i=>{const s="v1"in i?i.v1.palette:i.palette;return{segment:(0,t.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,t.css)({color:s.gray2}),disabled:(0,t.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})}}},50615:(j,I,e)=>{"use strict";e.d(I,{_:()=>s});var t=e(27702),n=e(66310),i=e(66670);const s=(r,m)=>{const d=(0,t.useRef)(null),o=(0,n.wW)(i.gN),[l,a]=(0,t.useState)(r),[g,c]=(0,t.useState)(0),h=b=>{a(b),m&&m(b)};return[({Component:b,onClick:v,disabled:y})=>t.createElement("button",{type:"button",className:o,ref:d,disabled:y,onClick:()=>{h(!0),d&&d.current&&c(d.current.clientWidth*1.25),v?.()}},b),g,l,h]}},65449:(j,I,e)=>{"use strict";e.d(I,{m:()=>i});var t=e(27702),n=e(73453);const i=({isOpen:s})=>{const r=s?"search":"angle-down",m=s?"sm":"md";return t.createElement(n.J,{name:r,size:m})}},28580:(j,I,e)=>{"use strict";e.d(I,{M8:()=>X,qb:()=>z,gY:()=>Q,NU:()=>A,Ph:()=>k,eI:()=>S.e,LT:()=>H});var t=e(27702),n=e(62937),i=e(98330),s=e(19590),r=e(55794),m=e(2004),d=e(81078),o=e(66310),l=e(73453),a=e(62108),g=e(65449),c=e(42844),h=e(1128);const f=t.forwardRef((te,oe)=>{const{children:Z}=te,le=(0,o.l4)(),ce=(0,h.H)({theme:le,invalid:!1});return t.createElement("div",{className:(0,c.cx)(ce.suffix,(0,c.css)({position:"relative"})),ref:oe},Z)});f.displayName="IndicatorsContainer";var b=e(80402),v=e(26468);const y=(0,b.B)((te,oe,Z)=>{const le=(0,h.H)({theme:te,invalid:oe});return{input:(0,c.cx)((0,v.nf)(te),(0,c.css)({width:"100%",maxWidth:"100%",display:"flex",flexDirection:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"space-between",paddingRight:0,position:"relative",boxSizing:"border-box"}),Z&&(0,c.css)({paddingLeft:0})),prefix:(0,c.cx)(le.prefix,(0,c.css)({position:"relative"}))}}),E=t.forwardRef(function({focused:oe,invalid:Z,disabled:le,children:ce,innerProps:q,prefix:ne,...pe},re){const ie=(0,o.l4)(),Se=y(ie,Z,!!ne);return t.createElement("div",{className:Se.input,...q,ref:re},ne&&t.createElement("div",{className:(0,c.cx)(Se.prefix)},ne),ce)});var C=e(67437),u=e(73578);const D=({innerProps:te,children:oe})=>{const Z=(0,o.l4)(),le=(0,u.D)(Z);return t.createElement("div",{...te,className:le.multiValueContainer},oe)},P=({children:te,innerProps:oe})=>{const Z=(0,o.l4)(),le=(0,u.D)(Z);return t.createElement(C.h,{...oe,name:"times",size:"sm",className:le.multiValueRemove,tooltip:"Remove"})};var S=e(50285),x=e(22655),M=e(42197),R=e(91987);class O extends t.Component{render(){const{children:oe}=this.props,{selectProps:Z}=this.props;if(Z&&Array.isArray(oe)&&Array.isArray(oe[0])&&Z.maxVisibleValues!==void 0&&!(Z.showAllSelectedWhenOpen&&Z.menuIsOpen)){const[le,...ce]=oe,q=le.slice(0,Z.maxVisibleValues);return this.renderContainer([q,...ce])}return this.renderContainer(oe)}renderContainer(oe){const{isMulti:Z,theme:le}=this.props,ce=(0,u.D)(le),q=(0,c.cx)(ce.valueContainer,Z&&ce.valueContainerMulti);return t.createElement("div",{className:q},oe)}}const T=(0,o.HE)(O);var U=e(69213);const L=(te,oe)=>{if(Array.isArray(te)){const Z=te.filter(Boolean);return Z?.length?Z:void 0}if(typeof te=="object")return[te];if(typeof te=="string"||typeof te=="number"){const Z=V(te,oe);if(Z)return[Z]}},V=(te,oe)=>{for(const Z of oe)if("options"in Z){let le=V(te,Z.options);if(le)return le}else if("value"in Z&&Z.value===te)return Z;return null},w=te=>te.map(({description:oe,...Z})=>Z),K=te=>{const{maxVisibleValues:oe,selectedValuesCount:Z,menuIsOpen:le,showAllSelectedWhenOpen:ce}=te;return oe!==void 0&&Z>oe&&!(ce&&le)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",Z-oe,")"):null},B=te=>{const{children:oe,innerProps:Z,selectProps:{menuIsOpen:le,onMenuClose:ce,onMenuOpen:q},isFocused:ne,isMulti:pe,getValue:re,innerRef:ie}=te,Se=te.selectProps;return Se.renderControl?t.createElement(Se.renderControl,{isOpen:le,value:pe?re():re()[0],ref:ie,onClick:le?ce:q,onBlur:ce,disabled:!!Se.disabled,invalid:!!Se.invalid}):t.createElement(E,{ref:ie,innerProps:Z,prefix:Se.prefix,focused:ne,invalid:!!Se.invalid,disabled:!!Se.disabled},oe)};function W({allowCustomValue:te=!1,allowCreateWhileLoading:oe=!1,"aria-label":Z,autoFocus:le=!1,backspaceRemovesValue:ce=!0,blurInputOnSelect:q,cacheOptions:ne,className:pe,closeMenuOnSelect:re=!0,components:ie,createOptionPosition:Se="last",defaultOptions:ye,defaultValue:Ce,disabled:de=!1,filterOption:we,formatCreateLabel:_e,getOptionLabel:Je,getOptionValue:Ue,inputValue:$e,invalid:Qe,isClearable:tt=!1,id:lt,isLoading:Me=!1,isMulti:De=!1,inputId:We,isOpen:qe,isOptionDisabled:st,isSearchable:dt=!0,loadOptions:Tt,loadingMessage:Nt="Loading options...",maxMenuHeight:Bt=300,minMenuHeight:yt,maxVisibleValues:ft,menuPlacement:ct="auto",menuPosition:ge,menuShouldPortal:Be=!0,noOptionsMessage:Le=(0,n.t)("grafana-ui.select.no-options-label","No options found"),onBlur:he,onChange:He,onCloseMenu:Pe,onCreateOption:Ie,onInputChange:Te,onKeyDown:Re,onMenuScrollToBottom:ue,onMenuScrollToTop:xe,onOpenMenu:Ve,onFocus:Ne,openMenuOnFocus:fe=!1,options:ve=[],placeholder:ze=(0,n.t)("grafana-ui.select.placeholder","Choose"),prefix:Oe,renderControl:Fe,showAllSelectedWhenOpen:Ge=!0,tabSelectsValue:nt=!0,value:Xe,virtualized:ut=!1,width:ht,isValidNewOption:wt,formatOptionLabel:mn,hideSelectedOptions:vn,...gn}){const Sn=(0,o.l4)(),Cn=(0,u.D)(Sn),pn=(0,t.useRef)(null),[nn,Ct]=(0,t.useState)(!1),bt=(0,U.O)(Sn,ht),[Ut,_t]=(0,t.useState)(!!$e);(0,t.useEffect)(()=>{if(Tt&&qe&&pn.current&&pn.current.controlRef&&ct==="auto"){const pt=window.innerHeight-pn.current.controlRef.getBoundingClientRect().bottom;Ct(pt<Bt)}},[Bt,ct,Tt,qe]);const Gt=(0,t.useCallback)((pt,It)=>{if(De&&pt==null)return He([],It);He(pt,It)},[De,He]);let jt=i.ZP;const sn={};let St={},mt;if(De&&Tt)mt=Xe;else if(De&&Xe&&Array.isArray(Xe)&&!Tt)mt=Xe.map(pt=>{const It=V(pt.value??pt,ve);return!te||It?It:typeof pt=="string"?(0,d.E)(pt):pt});else if(Tt){const pt=Ce||Xe;mt=pt?[pt]:[]}else mt=L(Xe,ve);const kt={"aria-label":Z,autoFocus:le,backspaceRemovesValue:ce,blurInputOnSelect:q,captureMenuScroll:ue||xe,closeMenuOnSelect:re,defaultValue:Ce,disabled:de,filterOption:Ut?we:null,getOptionLabel:Je,getOptionValue:Ue,hideSelectedOptions:vn,inputValue:$e,invalid:Qe,isClearable:tt,id:lt,isDisabled:de,isLoading:Me,isMulti:De,inputId:We,isOptionDisabled:st,isSearchable:dt,maxMenuHeight:Bt,minMenuHeight:yt,maxVisibleValues:ft,menuIsOpen:qe,menuPlacement:ct==="auto"&&nn?"top":ct,menuPosition:ge,menuShouldBlockScroll:!0,menuPortalTarget:Be&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:he,onChange:Gt,onInputChange:(pt,It)=>{_t(!!pt),Te?.(pt,It)},onKeyDown:Re,onMenuClose:Pe,onMenuOpen:Ve,onMenuScrollToBottom:ue,onMenuScrollToTop:xe,onFocus:Ne,formatOptionLabel:mn,openMenuOnFocus:fe,options:ut?w(ve):ve,placeholder:ze,prefix:Oe,renderControl:Fe,showAllSelectedWhenOpen:Ge,tabSelectsValue:nt,value:De?mt:mt?.[0]};te&&(jt=m.Z,sn.allowCreateWhileLoading=oe,sn.formatCreateLabel=_e??_,sn.onCreateOption=Ie,sn.createOptionPosition=Se,sn.isValidNewOption=wt),Tt&&(jt=te?r.Z:s.Z,St={loadOptions:Tt,cacheOptions:ne,defaultOptions:ye});const it=ut?x.r4:x.SA;return t.createElement(t.Fragment,null,t.createElement(jt,{ref:pn,components:{MenuList:it,Group:M.n,ValueContainer:T,IndicatorsContainer(pt){const{selectProps:It}=pt,{value:Qt,showAllSelectedWhenOpen:rn,maxVisibleValues:un,menuIsOpen:xn}=It;if(un!==void 0){const Kn=Qt.length,_n=[...pt.children];return _n.splice(-1,0,K({maxVisibleValues:un,selectedValuesCount:Kn,showAllSelectedWhenOpen:rn,menuIsOpen:xn})),t.createElement(f,{...pt},_n)}return t.createElement(f,{...pt})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:B,Option:x.Qn,ClearIndicator(pt){const{clearValue:It}=pt;return t.createElement(l.J,{name:"times",role:"button","aria-label":"select-clear-value",className:Cn.singleValueRemove,onMouseDown:Qt=>{Qt.preventDefault(),Qt.stopPropagation(),It()}})},LoadingIndicator(){return t.createElement(a.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:Cn.loadingMessage},Nt)},NoOptionsMessage(){return t.createElement("div",{className:Cn.loadingMessage,"aria-label":"No options provided"},Le)},DropdownIndicator(pt){return t.createElement(g.m,{isOpen:pt.selectProps.menuIsOpen})},SingleValue(pt){return t.createElement(R.P,{...pt,isDisabled:de})},SelectContainer:S.e,MultiValueContainer:D,MultiValueRemove:de?()=>null:P,...ie},styles:bt,className:pe,...kt,...sn,...St,...gn}))}function _(te){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,te),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function k(te){return t.createElement(W,{...te})}function A(te){return t.createElement(W,{...te,isMulti:!0})}function z(te){return t.createElement(W,{...te})}function H(te){return t.createElement(W,{virtualized:!0,...te})}function Q(te){return t.createElement(W,{virtualized:!0,...te})}function X(te){return t.createElement(W,{...te,isMulti:!0})}},50285:(j,I,e)=>{"use strict";e.d(I,{e:()=>l});var t=e(42844),n=e(27702),i=e(38581),s=e(80402),r=e(66310),m=e(97289),d=e(26468),o=e(1128);const l=g=>{const{isDisabled:c,isFocused:h,children:f,selectProps:{invalid:b=!1}}=g,v=(0,r.l4)(),y=a(v,h,c,b);return n.createElement(i.c.SelectContainer,{...g,className:(0,t.cx)(y.wrapper,g.className)},f)},a=(0,s.B)((g,c,h,f)=>{const b=(0,o.H)({theme:g,invalid:f});return{wrapper:(0,t.cx)(b.wrapper,(0,d.RK)(g,f),c&&(0,t.css)((0,m.getFocusStyles)(g)),h&&b.inputDisabled,(0,t.css)({position:"relative",boxSizing:"border-box",flexDirection:"row",flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",minHeight:"32px",height:"auto",maxWidth:"100%",padding:0,cursor:h?"not-allowed":"pointer"}))}})},22655:(j,I,e)=>{"use strict";e.d(I,{Qn:()=>b,SA:()=>g,r4:()=>f});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(25472),m=e(8553),d=e(66310),o=e(29372),l=e(73453),a=e(73578);const g=({children:v,maxHeight:y,innerRef:E,innerProps:C})=>{const u=(0,d.l4)(),D=(0,a.D)(u);return s.createElement("div",{...C,className:D.menu,style:{maxHeight:y},"aria-label":"Select options menu"},s.createElement(o.$,{scrollRefCallback:E,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},v))};g.displayName="SelectMenu";const c=37,h=7,f=({children:v,maxHeight:y,options:E,getValue:C})=>{const u=(0,d.l4)(),D=(0,a.D)(u),[P]=C(),x=(P?E.findIndex(T=>T.value===P.value):0)*c;if(!Array.isArray(v))return null;const R=((0,n.max)(E.map(T=>T.label?.length))??0)*h,O=Math.min(E.length*c,y);return s.createElement(r.t7,{className:D.menu,height:O,width:R,"aria-label":"Select options menu",itemCount:v.length,itemSize:c,initialScrollOffset:x},({index:T,style:U})=>s.createElement("div",{style:{...U,overflow:"hidden"}},v[T]))};f.displayName="VirtualizedSelectMenu";const b=({children:v,data:y,innerProps:E,innerRef:C,isFocused:u,isSelected:D,renderOptionLabel:P})=>{const S=(0,d.l4)(),x=(0,a.D)(S),M=y.icon?(0,m.iJ)(y.icon):void 0,{onMouseMove:R,onMouseOver:O,...T}=E;return s.createElement("div",{ref:C,className:(0,t.cx)(x.option,u&&x.optionFocused,D&&x.optionSelected,y.isDisabled&&x.optionDisabled),...T,"aria-label":"Select option",title:y.title},M&&s.createElement(l.J,{name:M,className:x.optionIcon}),y.imgUrl&&s.createElement("img",{className:x.optionImage,src:y.imgUrl,alt:y.label||y.value}),s.createElement("div",{className:x.optionBody},s.createElement("span",null,P?P(y):v),y.description&&s.createElement("div",{className:x.optionDescription},y.description),y.component&&s.createElement(y.component,null)))};b.displayName="SelectMenuOptions"},42197:(j,I,e)=>{"use strict";e.d(I,{n:()=>o});var t=e(42844),n=e(27702),i=e(80402),s=e(66310),r=e(73453);const m=(0,i.B)(l=>({header:(0,t.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${l.colors.background.secondary}`,"&:hover":{color:l.colors.text.maxContrast}}),label:(0,t.css)({flexGrow:1}),icon:(0,t.css)({paddingRight:"2px"})}));class d extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(a=>({expanded:!a.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:a}=this.props.selectProps.value;a&&this.props.options.some(g=>g.value===a)&&this.setState({expanded:!0})}}componentDidUpdate(a){a.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:a,label:g,theme:c}=this.props,{expanded:h}=this.state,f=m(c);return n.createElement("div",null,n.createElement("div",{className:f.header,onClick:this.onToggleChildren,role:"presentation"},n.createElement("span",{className:f.label},g),n.createElement(r.J,{className:f.icon,name:h?"angle-up":"angle-down"})),h&&a)}}const o=(0,s.HE)(d)},91987:(j,I,e)=>{"use strict";e.d(I,{P:()=>c});var t=e(42844),n=e(27702),i=e(38581),s=e(8553),r=e(66310);function m(f,b={}){const{duration:v=250,delay:y=250}=b,[E,C]=(0,n.useState)(f),u=(0,n.useRef)();return(0,n.useEffect)(()=>{let D;if(f)D=setTimeout(()=>{u.current=new Date,C(f)},y);else{const P=u.current?Date.now()-u.current.valueOf():0,S=()=>{u.current=void 0,C(f)};P>=v?S():D=setTimeout(S,v-P)}return()=>{D&&(clearTimeout(D),D=void 0)}},[f,v,y]),E}var d=e(73453),o=e(62108),l=e(54004),a=e(12806);const g=f=>({singleValue:(0,t.css)({label:"singleValue",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%",gridArea:"1 / 1 / 2 / 3"}),spinnerWrapper:(0,t.css)({width:"16px",height:"16px",display:"inline-block",marginRight:"10px",position:"relative",verticalAlign:"middle",overflow:"hidden"}),spinnerIcon:(0,t.css)({width:"100%",height:"100%",position:"absolute"}),optionIcon:(0,t.css)({marginRight:f.spacing(1),color:f.colors.text.secondary}),disabled:(0,t.css)({color:f.colors.text.disabled}),isOpen:(0,t.css)({color:f.colors.text.disabled})}),c=f=>{const{children:b,data:v,isDisabled:y}=f,E=(0,r.wW)(g),C=m(v.loading||!1,{delay:250,duration:750}),u=v.icon?(0,s.iJ)(v.icon):void 0;return n.createElement(i.c.SingleValue,{...f,className:(0,t.cx)(E.singleValue,y&&E.disabled,f.selectProps.menuIsOpen&&E.isOpen)},v.imgUrl?n.createElement(h,{loading:C,imgUrl:v.imgUrl,styles:E,alt:v.label??v.value}):n.createElement(n.Fragment,null,n.createElement(a.R,{horizontal:!0,size:16,visible:C,duration:150},n.createElement("div",{className:E.spinnerWrapper},n.createElement(o.$,{className:E.spinnerIcon,inline:!0}))),u&&n.createElement(d.J,{name:u,role:"img",className:E.optionIcon})),!v.hideText&&b)},h=f=>n.createElement("div",{className:f.styles.spinnerWrapper},n.createElement(l.n,{duration:150,visible:f.loading},n.createElement(o.$,{className:f.styles.spinnerIcon,inline:!0})),n.createElement(l.n,{duration:150,visible:!f.loading},n.createElement("img",{className:f.styles.spinnerIcon,src:f.imgUrl,alt:f.alt})))},73578:(j,I,e)=>{"use strict";e.d(I,{D:()=>i});var t=e(42844),n=e(80402);const i=(0,n.B)(s=>({menu:(0,t.css)({label:"grafana-select-menu",background:s.components.dropdown.background,boxShadow:s.shadows.z3,position:"relative",minWidth:"100%",zIndex:1}),option:(0,t.css)({label:"grafana-select-option",padding:"8px",display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent","&:hover":{background:s.colors.action.hover}}),optionIcon:(0,t.css)({marginRight:s.spacing(1)}),optionImage:(0,t.css)({label:"grafana-select-option-image",width:"16px",marginRight:"10px"}),optionDescription:(0,t.css)({label:"grafana-select-option-description",fontWeight:"normal",fontSize:s.typography.size.sm,color:s.colors.text.secondary,whiteSpace:"normal",lineHeight:s.typography.body.lineHeight}),optionBody:(0,t.css)({label:"grafana-select-option-body",display:"flex",fontWeight:s.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),optionFocused:(0,t.css)({label:"grafana-select-option-focused",background:s.colors.action.focus}),optionSelected:(0,t.css)({background:s.colors.action.selected}),optionDisabled:(0,t.css)({label:"grafana-select-option-disabled",backgroundColor:s.colors.action.disabledBackground,color:s.colors.action.disabledText,cursor:"not-allowed"}),singleValue:(0,t.css)({label:"grafana-select-single-value",color:s.components.input.text,gridArea:"1 / 1 / 2 / 3",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",boxSizing:"border-box",maxWidth:"100%"}),valueContainer:(0,t.css)({label:"grafana-select-value-container",alignItems:"center",display:"grid",position:"relative",boxSizing:"border-box",flex:"1 1 0%",outline:"none",overflow:"hidden"}),valueContainerMulti:(0,t.css)({label:"grafana-select-value-container-multi",flexWrap:"wrap",display:"flex"}),loadingMessage:(0,t.css)({label:"grafana-select-loading-message",padding:s.spacing(1),textAlign:"center",width:"100%"}),multiValueContainer:(0,t.css)({label:"grafana-select-multi-value-container",display:"flex",alignItems:"center",lineHeight:1,background:s.colors.background.secondary,borderRadius:s.shape.borderRadius(),margin:s.spacing(.25,1,.25,0),padding:s.spacing(.25,0,.25,1),color:s.colors.text.primary,fontSize:s.typography.size.sm,"&:hover":{background:s.colors.emphasize(s.colors.background.secondary)}}),multiValueRemove:(0,t.css)({label:"grafana-select-multi-value-remove",margin:s.spacing(0,.5),cursor:"pointer",svg:{marginBottom:0}}),singleValueRemove:(0,t.css)({cursor:"pointer","&:hover":{color:s.colors.text.primary}})}))},69213:(j,I,e)=>{"use strict";e.d(I,{O:()=>i,Z:()=>n});var t=e(27702);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(r){return{...r,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:r})=>({maxHeight:r}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:r=>({...r,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function i(s,r){return(0,t.useMemo)(()=>({...n(s),menuPortal:m=>({...m,zIndex:s.zIndex.portal}),menu:({top:m,bottom:d,position:o})=>({top:m,bottom:d,position:o,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:r?s.spacing(r):"100%",display:r==="auto"?"inline-flex":"flex"}),option:(m,d)=>({...m,opacity:d.isDisabled?.5:1})}),[s,r])}},49030:()=>{},7179:(j,I,e)=>{"use strict";e.d(I,{F:()=>h});var t=e(89949),n=e.n(t),i=e(27702),s=e(69966),r=e(45383),m=e(8496),d=e(93564),o=e(90996),l=e(76970),a=e(95676),g=e(26862);function c(f){return{label:f,value:stringToMs(f)}}class h extends i.PureComponent{constructor(b){super(b),this.propsSubject=new s.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,o.w)(b=>g.dP.isLive(b.interval)?(0,r.of)({}):b.loading?m.C:(0,d.F)((0,a.e0)(b.interval))),(0,l.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(b){g.dP.isLive(b.interval)&&g.dP.isLive(this.props.interval)||(0,t.isEqual)(b,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},50250:(j,I,e)=>{"use strict";e.d(I,{PR:()=>y,ZH:()=>g,rD:()=>h});var t=e(89949),n=e.n(t),i=e(66656),s=e(90482),r=e(5168),m=e(6850),d=e(93666),o=e(21708),l=e(77104);const a=["reduceOptions","orientation"];function g(E,C,u){let D=E.options;if(E.fieldConfig=E.fieldConfig||{defaults:{},overrides:[]},C==="singlestat"&&u.angular)return c(E,u);for(const P of a)u.hasOwnProperty(P)&&(D[P]=(0,t.cloneDeep)(u[P]));return D}function c(E,C){const u=C.angular,D=i.TB.getIfExists(u.valueName),P={reduceOptions:{calcs:[D?D.id:i.gz.mean]},orientation:s.wm.Horizontal},S={};if(u.format&&(S.unit=u.format),u.tableColumn&&(P.reduceOptions.fields=`/^${u.tableColumn}$/`),u.nullPointMode&&(S.nullValueMode=u.nullPointMode),u.nullText&&(S.noValue=u.nullText),(u.decimals||u.decimals===0)&&(S.decimals=u.decimals),u.thresholds&&u.colors){const M=u.thresholds.split(",").map(O=>Number(O.trim())),R=[];for(const O of u.colors){const T=R.length-1;T>=0?R.push({value:M[T],color:O}):R.push({value:-1/0,color:O})}S.thresholds={mode:r.H.Absolute,steps:R}}const x=(0,m.Jb)(u,S.thresholds);return x&&x.length&&(S.mappings=x),u.gauge&&u.gauge.show&&(S.min=u.gauge.minValue,S.max=u.gauge.maxValue),E.fieldConfig.defaults=S,P}function h(E){if(!E.options)return{};const C=parseFloat(E.pluginVersion||"6.1");let u=E.options;C<6.2&&(u=b(u)),C<6.3&&(u=f(u));const{fieldOptions:D}=u;if(C<6.6&&D){if(D&&D.override){const{override:x,...M}=u.fieldOptions;u={...u,fieldOptions:{...M,overrides:[]}}}let P=D?.defaults?.thresholds;P?delete D.defaults.thresholds:(P=D?.thresholds,delete D.thresholds),P&&(D.defaults.thresholds={mode:r.H.Absolute,steps:P});const{defaults:S}=D;S.color&&typeof S.color=="string"&&(S.color={mode:d.S.Fixed,fixedColor:S.color}),(0,o.gb)(S)}if(C<7&&(E.fieldConfig=E.fieldConfig||{defaults:{},overrides:[]},E.fieldConfig={defaults:D&&D.defaults?{...E.fieldConfig.defaults,...D.defaults}:E.fieldConfig.defaults,overrides:D&&D.overrides?[...E.fieldConfig.overrides,...D.overrides]:E.fieldConfig.overrides},D&&(u.reduceOptions={values:D.values,limit:D.limit,calcs:D.calcs}),delete u.fieldOptions),C<7.1){const P=E.fieldConfig.defaults.title;P!=null&&(E.fieldConfig.defaults.displayName=P,delete E.fieldConfig.defaults.title)}if(C<8){const P=E.fieldConfig?.defaults;let S=P?.unit;S==="percent"?((0,t.isNumber)(P.min)||(P.min=0),(0,t.isNumber)(P.max)||(P.max=100)):S==="percentunit"&&((0,t.isNumber)(P.min)||(P.min=0),(0,t.isNumber)(P.max)||(P.max=1))}return u}function f(E){const{fieldOptions:C}=E;if(!C)return E;const{mappings:u,...D}=E.fieldOptions;let P;return E.thresholds&&(P={mode:r.H.Absolute,steps:v(E.thresholds)}),{...E,fieldOptions:{...D,defaults:{...C.defaults,mappings:u,thresholds:P}}}}function b(E){const{valueOptions:C}=E;if(!C)return E;const u={},D={};if(u.mappings=E.valueMappings,u.thresholds=E.thresholds,u.defaults=D,D.unit=C.unit,D.decimals=C.decimals,C.stat){const S=i.TB.get(C.stat);S&&(u.calcs=[S.id])}D.min=E.minValue,D.max=E.maxValue;const P={...E,fieldOptions:u};return(0,t.omit)(P,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function v(E){if(!E||!E.length)return;const C=E.map(u=>({value:u.value===null?-1/0:u.value,color:u.color}));return(0,l.bP)(C),C[0].value=-1/0,C}function y(E){return(0,m.Jb)(E)}},97583:(j,I,e)=>{"use strict";e.d(I,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(50250)},37983:(j,I,e)=>{"use strict";e.d(I,{U:()=>g});var t=e(42844),n=e(76808),i=e(30450),s=e(27702),r=e(66310),m=e(92742);const d=c=>{const{value:h,children:f,visible:b,placement:v,tipFormatter:y,...E}=c,C=(0,s.useRef)(null),u=(0,s.useRef)(null),D=(0,r.wW)(o);function P(){u.current!==null&&cancelAnimationFrame(u.current)}function S(){u.current=requestAnimationFrame(()=>{C.current?.forceAlign()})}return(0,s.useEffect)(()=>(b?S():P(),P),[h,b]),s.createElement(m.Z,{overlayClassName:D.tooltip,placement:v,overlay:y??h,overlayInnerStyle:{minHeight:"auto"},ref:C,visible:b,...E},f)},o=c=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:c.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:c.zIndex.tooltip})}),l=d;var a=e(72719);const g=({min:c,max:h,onChange:f,onAfterChange:b,orientation:v="horizontal",reverse:y,step:E,formatTooltipResult:C,value:u,tooltipAlwaysVisible:D=!0})=>{const P=(0,s.useCallback)(T=>{f?.(typeof T=="number"?[T,T]:T)},[f]),S=(0,s.useCallback)(T=>{b?.(typeof T=="number"?[T,T]:T)},[b]),x=v==="horizontal",M=(0,r.l4)(),R=(0,a.W)(M,x),O=(T,U)=>s.createElement(l,{value:U.value,visible:D||U.dragging,tipFormatter:C?()=>C(U.value):void 0,placement:x?"top":"right"},T);return s.createElement("div",{className:(0,t.cx)(R.container,R.slider)},s.createElement(n.Global,{styles:R.tooltip}),s.createElement(i.Z,{min:c,max:h,step:E,defaultValue:u,range:!0,onChange:P,onAfterChange:S,vertical:!x,reverse:y,handleRender:O}))};g.displayName="RangeSlider"},39540:(j,I,e)=>{"use strict";e.d(I,{i:()=>o});var t=e(42844),n=e(76808),i=e(30450),s=e(27702),r=e(66310),m=e(1128),d=e(72719);const o=({min:l,max:a,onChange:g,onAfterChange:c,orientation:h="horizontal",reverse:f,step:b,value:v,ariaLabelForHandle:y,marks:E,included:C})=>{const u=h==="horizontal",D=(0,r.l4)(),P=(0,d.W)(D,u,!!E),S=i.Z,[x,M]=(0,s.useState)(v??l),R=(0,s.useCallback)(w=>{const K=typeof w=="number"?w:w[0];M(K),g?.(K)},[M,g]),O=(0,s.useCallback)(w=>{let K=+w.target.value;Number.isNaN(K)&&(K=0),M(K),g&&g(K),c&&c(K)},[g,c]),T=(0,s.useCallback)(w=>{const K=+w.target.value;K>a?M(a):K<l&&M(l)},[a,l]),U=(0,s.useCallback)(w=>{const K=typeof w=="number"?w:w[0];c?.(K)},[c]),L=u?[]:[P.sliderInputVertical],V=u?[]:[P.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(P.container,P.slider)},s.createElement(n.Global,{styles:P.tooltip}),s.createElement("div",{className:(0,t.cx)(P.sliderInput,...L)},s.createElement(S,{min:l,max:a,step:b,defaultValue:v,value:x,onChange:R,onAfterChange:U,vertical:!u,reverse:f,ariaLabelForHandle:y,marks:E,included:C}),s.createElement(m.I,{type:"text",className:(0,t.cx)(P.sliderInputField,...V),value:x,onChange:O,onBlur:T,min:l,max:a})))};o.displayName="Slider"},72719:(j,I,e)=>{"use strict";e.d(I,{W:()=>s});var t=e(42844),n=e(76808),i=e(80402);const s=(0,i.B)((r,m,d=!1)=>{const{spacing:o}=r,l=r.colors.border.strong,a=r.colors.primary.main,g=r.colors.primary.main,h=`box-shadow: 0px 0px 0px 6px ${r.colors.primary.transparent}`;return{container:(0,t.css)({width:"100%",margin:m?"inherit":o(1,3,1,1),paddingBottom:m&&d?r.spacing(1):"inherit",height:m?"auto":"100%"}),slider:(0,t.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${r.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${r.colors.text.disabled};
        font-size: ${r.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${r.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${g};
        box-shadow: ${r.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${h};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${r.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${r.colors.text.primary};
        border-color: ${r.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${a};
      }
      .rc-slider-rail {
        background-color: ${l};
        cursor: pointer;
      }
    `,tooltip:(0,n.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${r.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${r.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,t.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,t.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,t.css)({marginLeft:r.spacing(3),width:"60px",input:{textAlign:"center"}}),sliderInputFieldVertical:(0,t.css)({margin:`0 0 ${r.spacing(3)} 0`,order:1})}})},61398:(j,I,e)=>{"use strict";e.d(I,{b:()=>b});var t=e(89949),n=e(27702),i=e(64987),s=e(29241),r=e(58192),m=e(64167),d=e(81144),o=e(19345),l=e(48473),a=e(48962),g=e(32053),c=e(39596);function h(v,y){const E=v.y.values.length,C={...v.y.config,...y},u=v.x??{name:"",values:[...Array(E).keys()],type:s.fS.number,config:{}};let D={refId:"sparkline",fields:[u,{...v.y,config:C}],length:E};return(0,a.lP)(u.values)||(D=(0,g.aK)(D,0)),(0,c.w)({frame:D,refFieldPseudoMin:v.timeRange?.from.valueOf(),refFieldPseudoMax:v.timeRange?.to.valueOf()})}const f={drawStyle:m.l8.Line,showPoints:m.Jp.Auto,axisPlacement:m.LB.Hidden,pointSize:2};class b extends n.PureComponent{constructor(y){super(y);const E=h(y.sparkline,y.config);this.state={data:(0,l.Bj)(E,(0,l.i7)(E)),alignedDataFrame:E,configBuilder:this.prepareConfig(E)}}static getDerivedStateFromProps(y,E){const C=h(y.sparkline,y.config);return C?{...E,data:(0,l.Bj)(C,(0,l.i7)(C)),alignedDataFrame:C}:{...E}}componentDidUpdate(y,E){const{alignedDataFrame:C}=this.state;if(!C)return;let u=!1;y.sparkline!==this.props.sparkline?u=!(0,i.Ch)(this.state.alignedDataFrame,E.alignedDataFrame):u=!(0,t.isEqual)(y.config,this.props.config),u&&this.setState({configBuilder:this.prepareConfig(C)})}getYRange(y){let{min:E,max:C}=this.state.alignedDataFrame.fields[1].state?.range;return E===C?(E===0?C=100:(E=0,C*=2),[E,C]):[Math.max(E,y.config.min??-1/0),Math.min(C,y.config.max??1/0)]}prepareConfig(y){const{theme:E}=this.props,C=new o.U;C.setCursor({show:!1,x:!1,y:!1});const u=y.fields[0];C.addScale({scaleKey:"x",orientation:m.wN.Horizontal,direction:m.bQ.Right,isTime:!1,range:()=>{const{sparkline:D}=this.props;if(D.x){if(D.timeRange&&D.x.type===s.fS.time)return[D.timeRange.from.valueOf(),D.timeRange.to.valueOf()];const P=D.x.values;return[P[0],P[P.length-1]]}return[0,D.y.values.length-1]}}),C.addAxis({scaleKey:"x",theme:E,placement:m.LB.Hidden});for(let D=0;D<y.fields.length;D++){const P=y.fields[D],S=P.config,x={...f,...S.custom};if(P===u||P.type!==s.fS.number)continue;const M=S.unit||"__fixed";C.addScale({scaleKey:M,orientation:m.wN.Vertical,direction:m.bQ.Up,range:()=>this.getYRange(P)}),C.addAxis({scaleKey:M,theme:E,placement:m.LB.Hidden});const R=(0,r.fD)(P),O=R.getCalculator(P,E)(0,0),T=x.drawStyle===m.l8.Points?m.Jp.Always:x.showPoints;C.addSeries({pxAlign:!1,scaleKey:M,theme:E,colorMode:R,thresholds:S.thresholds,drawStyle:x.drawStyle,lineColor:x.lineColor??O,lineWidth:x.lineWidth,lineInterpolation:x.lineInterpolation,showPoints:T,pointSize:x.pointSize,fillOpacity:x.fillOpacity,fillColor:x.fillColor,lineStyle:x.lineStyle,gradientMode:x.gradientMode})}return C}render(){const{data:y,configBuilder:E}=this.state,{width:C,height:u}=this.props;return n.createElement(d.N,{data:y,config:E,width:C,height:u})}}},62108:(j,I,e)=>{"use strict";e.d(I,{$:()=>m});var t=e(42844),n=e(27702),i=e(80402),s=e(73453);const r=(0,i.B)((d,o)=>(0,t.css)([{fontSize:typeof d=="string"?d:`${d}px`},o&&{display:"inline-block"}])),m=({className:d,inline:o=!1,iconClassName:l,style:a,size:g=16})=>{const c=r(g,o);return n.createElement("div",{"data-testid":"Spinner",style:a,className:(0,t.cx)(c,d)},n.createElement(s.J,{className:(0,t.cx)("fa-spin",l),name:"fa fa-spinner","aria-label":"loading spinner"}))}},10133:(j,I,e)=>{"use strict";e.d(I,{m:()=>m});var t=e(89949),n=e.n(t),i=e(27702),s=e(66656),r=e(28580);class m extends i.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:o,allowMultiple:l,defaultStat:a,onChange:g}=this.props,c=s.TB.list(o);if(c.length!==o.length){const h=c.map(b=>b.id),f=(0,t.difference)(o,h);console.warn("Unknown stats",f,o),g(c.map(b=>b.id))}!l&&o.length>1&&(console.warn("Removing extra stat",o),g([o[0]])),a&&o.length<1&&g([a])},this.onSelectionChange=o=>{const{onChange:l}=this.props;Array.isArray(o)?l(o.map(a=>a.value)):l(o&&o.value?[o.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(o){this.checkInput()}render(){const{stats:o,allowMultiple:l,defaultStat:a,placeholder:g,className:c,menuPlacement:h,width:f,inputId:b}=this.props,v=s.TB.selectOptions(o);return i.createElement(r.Ph,{value:v.current,className:c,isClearable:!a,isMulti:l,width:f,isSearchable:!0,options:v.options,placeholder:g,onChange:this.onSelectionChange,menuPlacement:h,inputId:b})}}m.defaultProps={allowMultiple:!1}},42074:(j,I,e)=>{"use strict";e.d(I,{r:()=>l,x:()=>a});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(58939),m=e(66310),d=e(80402),o=e(97289);const l=s.forwardRef(({value:c,checked:h,onChange:f,id:b,label:v,disabled:y,invalid:E=!1,...C},u)=>{h&&(0,r.d)("Switch","checked prop","value");const D=(0,m.l4)(),P=g(D),S=(0,s.useRef)(b||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(P.switch,E&&P.invalid)},s.createElement("input",{type:"checkbox",disabled:y,checked:c,onChange:x=>{!y&&f?.(x)},id:S.current,...C,ref:u}),s.createElement("label",{htmlFor:S.current,"aria-label":v??"Toggle switch"}))});l.displayName="Switch";const a=s.forwardRef(({transparent:c,className:h,showLabel:f,label:b,value:v,id:y,invalid:E,...C},u)=>{const D=(0,m.l4)(),P=g(D,c);return s.createElement("div",{className:(0,t.cx)(P.inlineContainer,h,C.disabled&&P.disabled,E&&P.invalid)},f&&s.createElement("label",{htmlFor:y,className:(0,t.cx)(P.inlineLabel,v&&P.inlineLabelEnabled,"inline-switch-label")},b),s.createElement(l,{...C,id:y,label:b,ref:u,value:v}))});a.displayName="Switch";const g=(0,d.B)((c,h)=>({switch:(0,t.css)({width:"32px",height:"16px",position:"relative",input:{opacity:0,left:"-100vw",zIndex:-1e3,position:"absolute","&:disabled + label":{background:c.colors.action.disabledBackground,cursor:"not-allowed"},"&:checked + label":{background:c.colors.primary.main,borderColor:c.colors.primary.main,"&:hover":{background:c.colors.primary.shade},"&::after":{transform:"translate3d(18px, -50%, 0)",background:c.colors.primary.contrastText}},"&:focus + label, &:focus-visible + label":(0,o.getFocusStyles)(c),"&:focus:not(:focus-visible) + label":(0,o.getMouseFocusStyles)(c)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:c.shape.radius.pill,background:c.components.input.background,border:`1px solid ${c.components.input.borderColor}`,transition:"all 0.3s ease","&:hover":{borderColor:c.components.input.borderHover},"&::after":{position:"absolute",display:"block",content:'""',width:"12px",height:"12px",borderRadius:c.shape.radius.circle,background:c.colors.text.secondary,boxShadow:c.shadows.z1,top:"50%",transform:"translate3d(2px, -50%, 0)",transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)","@media (forced-colors: active)":{border:"1px solid transparent"}}}}),inlineContainer:(0,t.css)({padding:c.spacing(0,1),height:c.spacing(c.components.height.md),display:"inline-flex",alignItems:"center",background:h?"transparent":c.components.input.background,border:`1px solid ${h?"transparent":c.components.input.borderColor}`,borderRadius:c.shape.borderRadius(),"&:hover":{border:`1px solid ${h?"transparent":c.components.input.borderHover}`,".inline-switch-label":{color:c.colors.text.primary}}}),disabled:(0,t.css)({backgroundColor:"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:"1px solid rgba(204, 204, 220, 0.04)"}),inlineLabel:(0,t.css)({cursor:"pointer",paddingRight:c.spacing(1),color:c.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,t.css)({color:c.colors.text.primary}),invalid:(0,t.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${c.colors.error.border}`}})}))},84279:(j,I,e)=>{"use strict";e.d(I,{W:()=>g});var t=e(42844),n=e(27702),i=e(15372),s=e(54281),r=e(67437),m=e(29372),d=e(4432),o=e(80402),l=e(66310);const a=(0,o.B)(c=>({container:(0,t.css)({height:"100%"}),tabContent:(0,t.css)({padding:c.spacing(2),backgroundColor:c.colors.background.primary,height:`calc(100% - ${c.components.menuTabs.height}px)`}),close:(0,t.css)({position:"absolute",right:"16px",top:"5px",cursor:"pointer",fontSize:c.typography.size.lg}),tabs:(0,t.css)({paddingTop:c.spacing(1),borderColor:c.colors.border.weak,ul:{marginLeft:c.spacing(2)}})}));function g(c){const[h,f]=(0,n.useState)(c.tabs.some(D=>D.value===c.defaultTab)?c.defaultTab:c.tabs?.[0].value),b=D=>{f(D.value)},{tabs:v,onClose:y,closeIconTooltip:E}=c,C=(0,l.l4)(),u=a(C);return n.createElement("div",{className:u.container},n.createElement(i.J,{className:u.tabs},v.map(D=>n.createElement(s.O,{key:D.value,label:D.label,active:D.value===h,onChangeTab:()=>b(D),icon:D.icon})),n.createElement(r.h,{className:u.close,onClick:y,name:"times",tooltip:E??"Close"})),n.createElement(m.$,{autoHeightMin:"100%"},n.createElement(d.I,{className:u.tabContent},v.find(D=>D.value===h)?.content)))}},93915:(j,I,e)=>{"use strict";e.d(I,{i:()=>d,c:()=>l});var t=e(27702),n=e(66656),i=e(74639),s=e(42844);const r=a=>{const g=(0,s.css)({width:"100%",listStyle:"none"}),c=(0,s.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return a.value&&!Array.isArray(a.value)?t.createElement("span",null,a.value):a.value&&Array.isArray(a.value)&&a.value.length>0?t.createElement("ul",{className:g},a.value.map((h,f)=>{const b=Object.keys(h)[0];return t.createElement("li",{className:c,key:f},t.createElement("span",null,b),t.createElement("span",null,h[b]))})):m},m=()=>t.createElement("span",null,"\xA0");function d(a){const{totalColumnsWidth:g,footerGroups:c,isPaginationVisible:h,tableStyles:f}=a,b=i.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:h?"relative":"absolute",width:g?`${g}px`:"100%",bottom:"0px"}},c.map(v=>{const{key:y,...E}=v.getFooterGroupProps();return t.createElement("div",{className:f.tfoot,...E,key:y,"data-testid":b.footer},v.headers.map(C=>o(C,f)))}))}function o(a,g){const c=a.getHeaderProps();return c?(c.style=c.style??{},c.style.position="absolute",c.style.justifyContent=a.justifyContent,t.createElement("div",{className:g.headerCell,...c},a.render("Footer"))):null}function l(a,g,c){if(g===void 0)return m;if(c){if(g[a]===void 0)return m;const h=n.TB.get(n.gz.count).name;return r({value:[{[h]:String(g[a])}]})}return r({value:g[a]})}},42100:(j,I,e)=>{"use strict";e.d(I,{A:()=>l,U:()=>o});var t=e(27702),n=e(11024),i=e(29241),s=e(32053),r=e(64167),m=e(61398),d=e(37193);const o={drawStyle:r.l8.Line,lineInterpolation:r.KC.Smooth,lineWidth:1,fillOpacity:17,gradientMode:r.FI.Hue,pointSize:2,barAlignment:r.pu.Center,showPoints:r.Jp.Never},l=c=>{const{field:h,innerWidth:f,tableStyles:b,cell:v,cellProps:y,timeRange:E}=c,C=a(v.value);if(!C)return t.createElement("div",{...y,className:b.cellContainer},"no data");C.x&&!C.x.config.interval&&C.x.values.length>1&&(C.x.config.interval=C.x.values[1]-C.x.values[0]),C.y.values=C.y.values.map(S=>Number.isFinite(S)?S:null);const u=(0,n.dz)(C.y);C.y.config.min=u.min,C.y.config.max=u.max,C.y.state={range:u},C.timeRange=E;const D=g(h),P={color:h.config.color,custom:{...o,...D}};return t.createElement("div",{...y,className:b.cellContainer},t.createElement(m.b,{width:f,height:b.cellHeightInner,sparkline:C,config:P,theme:b.theme}))};function a(c){if(Array.isArray(c))return{y:{name:"test",type:i.fS.number,values:c,config:{}}};if((0,s.aY)(c)){const h=c.fields.find(b=>b.type===i.fS.time),f=c.fields.find(b=>b.type===i.fS.number);if(h&&f)return{x:h,y:f}}}function g(c){let h=(0,d.S_)(c);if(h.type===r.h2.Auto&&(h={...h,type:r.h2.Sparkline}),h.type===r.h2.Sparkline)return h;throw new Error(`Expected options type ${r.h2.Sparkline} but got ${h.type}`)}},95066:(j,I,e)=>{"use strict";e.d(I,{i:()=>oe});var t=e(27702),n=e(10350),i=e(25472),s=e(66656),r=e(64167),m=e(66310),d=e(29372),o=e(50852),l=e(93915),a=e(74639),g=e(4680),c=e(73453),h=e(42844),f=e(71235),b=e(8430),v=e(64022),y=e(79978),E=e(67437),C=e(66670),u=e(33716),D=e(83967),P=e(80402);const S=28,x=S*5,M=({options:Z,values:le,caseSensitive:ce,onChange:q})=>{const ne=(0,m.l4)(),pe=R(ne),[re,ie]=(0,t.useState)(""),Se=(0,t.useMemo)(()=>new RegExp(re,ce?void 0:"i"),[re,ce]),ye=(0,t.useMemo)(()=>Z.filter(Je=>Je.label===void 0?!1:Se.test(Je.label)),[Z,Se]),Ce=ne.spacing.gridSize,de=(0,t.useMemo)(()=>Math.min(ye.length*S,x)+Ce,[Ce,ye.length]),we=(0,t.useCallback)(Je=>{ie(Je)},[ie]),_e=(0,t.useCallback)(Je=>Ue=>{const $e=Ue.currentTarget.checked?le.concat(Je):le.filter(Qe=>Qe.value!==Je.value);q($e)},[q,le]);return t.createElement(v.wc,{spacing:"md"},t.createElement(u.H,{placeholder:"Filter values",onChange:we,value:re}),!ye.length&&t.createElement(y._,null,"No values"),ye.length&&t.createElement(i.t7,{height:de,itemCount:ye.length,itemSize:S,width:"100%",className:pe.filterList},({index:Je,style:Ue})=>{const $e=ye[Je],{value:Qe,label:tt}=$e,lt=le.find(Me=>Me.value===Qe)!==void 0;return t.createElement("div",{className:pe.filterListRow,style:Ue,title:tt},t.createElement(D.X,{value:lt,label:tt,onChange:_e($e)}))}))},R=(0,P.B)(Z=>({filterList:(0,h.css)({label:"filterList"}),filterListRow:(0,h.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:Z.spacing(.5),":hover":{backgroundColor:Z.colors.action.hover}})}));var O=e(37193);const T=({column:{preFilteredRows:Z,filterValue:le,setFilter:ce},onClose:q,field:ne})=>{const pe=(0,m.l4)(),re=(0,t.useMemo)(()=>(0,O.AF)(Z,ne),[Z,ne]),ie=(0,t.useMemo)(()=>(0,O.mP)(re),[re]),Se=(0,t.useMemo)(()=>(0,O.n0)(ie,le),[ie,le]),[ye,Ce]=(0,t.useState)(Se),[de,we]=(0,t.useState)(!1),_e=(0,t.useCallback)(tt=>q(),[q]),Je=(0,t.useCallback)(tt=>{const lt=ye.length?ye:void 0;ce(lt),q()},[ce,ye,q]),Ue=(0,t.useCallback)(tt=>{ce(void 0),q()},[ce,q]),$e=(0,t.useMemo)(()=>le!==void 0,[le]),Qe=(0,m.wW)(U);return t.createElement(b.L,{onClick:_e,useCapture:!0},t.createElement("div",{className:(0,h.cx)(Qe.filterContainer),onClick:L},t.createElement(v.wc,{spacing:"lg"},t.createElement(v.wc,{spacing:"xs"},t.createElement(v.Lh,{justify:"space-between",align:"center"},t.createElement(y._,{className:Qe.label},"Filter by values:"),t.createElement(E.h,{name:"text-fields",tooltip:"Match case",style:{color:de?pe.colors.text.link:pe.colors.text.disabled},onClick:()=>{we(tt=>!tt)}})),t.createElement("div",{className:(0,h.cx)(Qe.listDivider)}),t.createElement(M,{onChange:Ce,values:ye,options:ie,caseSensitive:de})),t.createElement(v.Lh,{spacing:"lg"},t.createElement(v.Lh,null,t.createElement(C.zx,{size:"sm",onClick:Je},"Ok"),t.createElement(C.zx,{size:"sm",variant:"secondary",onClick:_e},"Cancel")),$e&&t.createElement(v.Lh,null,t.createElement(C.zx,{fill:"text",size:"sm",onClick:Ue},"Clear filter"))))))},U=Z=>({filterContainer:(0,h.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:Z.colors.background.primary,border:`1px solid ${Z.colors.border.weak}`,padding:Z.spacing(2),margin:Z.spacing(1,0),boxShadow:Z.shadows.z3,borderRadius:Z.shape.radius.default}),listDivider:(0,h.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${Z.colors.border.medium}`,padding:Z.spacing(.5,2)}),label:(0,h.css)({marginBottom:0})}),L=Z=>{Z.stopPropagation()},V=({column:Z,field:le,tableStyles:ce})=>{const q=(0,t.useRef)(null),[ne,pe]=(0,t.useState)(!1),re=(0,m.wW)(w),ie=(0,t.useMemo)(()=>!!Z.filterValue,[Z.filterValue]),Se=(0,t.useCallback)(()=>pe(!0),[pe]),ye=(0,t.useCallback)(()=>pe(!1),[pe]);return!le||!le.config.custom?.filterable?null:t.createElement("button",{className:(0,h.cx)(ce.headerFilter,ie?re.filterIconEnabled:re.filterIconDisabled),ref:q,type:"button",onClick:Se},t.createElement(c.J,{name:"filter"}),ne&&q.current&&t.createElement(f.J,{content:t.createElement(T,{column:Z,tableStyles:ce,field:le,onClose:ye}),placement:"bottom-start",referenceElement:q.current,show:!0}))},w=Z=>({filterIconEnabled:(0,h.css)({label:"filterIconEnabled",color:Z.colors.primary.text}),filterIconDisabled:(0,h.css)({label:"filterIconDisabled",color:Z.colors.text.disabled})}),K=Z=>{const{headerGroups:le,showTypeIcons:ce,tableStyles:q}=Z,ne=a.wl.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:q.headerRow},le.map(pe=>{const{key:re,...ie}=pe.getHeaderGroupProps();return t.createElement("div",{className:q.thead,...ie,key:re,"aria-label":ne.header,role:"row"},pe.headers.map((Se,ye)=>B(Se,q,ce)))}))};function B(Z,le,ce){const q=Z.getHeaderProps(),ne=Z.field??null;return Z.canResize&&(q.style.userSelect=Z.isResizing?"none":"auto"),q.style.position="absolute",q.style.justifyContent=Z.justifyContent,t.createElement("div",{className:le.headerCell,...q,role:"columnheader"},Z.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...Z.getSortByToggleProps(),className:le.headerCellLabel},ce&&t.createElement(c.J,{name:(0,g.e7)(ne),title:ne?.type,size:"sm",className:le.typeIcon}),t.createElement("div",null,Z.render("Header")),Z.isSorted&&(Z.isSortedDesc?t.createElement(c.J,{size:"lg",name:"arrow-down",className:le.sortIcon}):t.createElement(c.J,{name:"arrow-up",size:"lg",className:le.sortIcon}))),Z.canFilter&&t.createElement(V,{column:Z,tableStyles:le,field:ne})),!Z.canSort&&Z.render("Header"),!Z.canSort&&Z.canFilter&&t.createElement(V,{column:Z,tableStyles:le,field:ne}),Z.canResize&&t.createElement("div",{...Z.getResizerProps(),className:le.resizeHandle}))}var W=e(94878);function _(Z,le){(0,t.useEffect)(()=>{const ce=Z.current?.querySelector(".track-vertical"),q=le.current?.firstChild;q&&ce&&(ce?.remove(),q.querySelector(":scope > .track-vertical")?.remove(),q.append(ce))})}function k(Z,le,ce){(0,t.useEffect)(()=>{if(Z.lastExpandedIndex!==void 0){le.current?.resetAfterIndex(Math.max(Z.lastExpandedIndex-1,0));return}},[Z.lastExpandedIndex,Z.toggleRowExpandedCounter,le,ce])}var A=e(75578);function z({onColumnResize:Z,onSortByChange:le,data:ce}){return(0,t.useCallback)((q,ne)=>{switch(ne.type){case"columnDoneResizing":if(Z){const re=q.columnResizing.headerIdWidths[0][0],ie=parseInt(re,10),Se=Math.round(q.columnResizing.columnWidths[re]),ye=ce.fields[ie];if(!ye)return q;const Ce=(0,A.CZ)(ye,ce);Z(Ce,Se)}case"toggleSortBy":if(le){const pe=[];for(const re of q.sortBy){const ie=ce.fields[parseInt(re.id,10)];ie&&pe.push({displayName:(0,A.CZ)(ie,ce),desc:re.desc})}le(pe)}case"toggleRowExpanded":if(ne.id)return{...q,lastExpandedIndex:parseInt(ne.id,10),toggleRowExpandedCounter:q.toggleRowExpandedCounter+1}}return q},[ce,Z,le])}function H(Z,le){const ce={toggleRowExpandedCounter:0};if(Z){ce.sortBy=[];for(const q of Z)for(const ne of le)ne.Header===q.displayName&&ce.sortBy.push({id:ne.id,desc:q.desc})}return ce}var Q=e(63194);const X=150,te=36,oe=(0,t.memo)(Z=>{const{ariaLabel:le,data:ce,subData:q,height:ne,onCellFilterAdded:pe,width:re,columnMinWidth:ie=X,noHeader:Se,resizable:ye=!0,initialSortBy:Ce,footerOptions:de,showTypeIcons:we,footerValues:_e,enablePagination:Je,cellHeight:Ue=r.Ss.Sm,timeRange:$e}=Z,Qe=(0,t.useRef)(null),tt=(0,t.useRef)(null),lt=(0,t.useRef)(null),Me=(0,m.l4)(),De=(0,Q.p)(Me,Ue),We=Se?0:De.rowHeight,[qe,st]=(0,t.useState)(_e),dt=(0,t.useMemo)(()=>{const Xe=te;let ut=0;if(!qe)return 0;for(const ht of qe)Array.isArray(ht)&&ht.length>ut&&(ut=ht.length);return ut>1?Xe*ut:Xe},[qe]),Tt=(0,t.useMemo)(()=>ce.fields.length?Array(ce.length).fill(0):[],[ce]),Nt=!!(de?.countRows&&de.reducer&&de.reducer.length&&de.reducer[0]===s.gz.count),Bt=(0,t.useMemo)(()=>(0,O.Pu)(ce,re,ie,!!q?.length,qe,Nt),[ce,re,ie,qe,q,Nt]),yt=z(Z),ft=(0,t.useMemo)(()=>({columns:Bt,data:Tt,disableResizing:!ye,stateReducer:yt,autoResetPage:!1,initialState:H(Ce,Bt),autoResetFilters:!1,sortTypes:{number:O.QT,"alphanumeric-insensitive":O.nl}}),[Ce,Bt,Tt,ye,yt]),{getTableProps:ct,headerGroups:ge,footerGroups:Be,rows:Le,prepareRow:he,totalColumnsWidth:He,page:Pe,state:Ie,gotoPage:Te,setPageSize:Re,pageOptions:ue}=(0,n.useTable)(ft,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),xe=Ie;(0,t.useEffect)(()=>{de||st(_e)},[_e,de]),(0,t.useEffect)(()=>{if(!de)return;if(!de.show){st(void 0);return}if(Nt){const ut=[];ut[0]=ge[0]?.headers[0]?.filteredRows.length.toString()??ce.length.toString(),st(ut);return}const Xe=(0,O.jB)(ge[0].headers,(0,O.KF)(Le),de,Me);st(Xe)},[de,Me,Ie.filters,ce]);let Ve=ne-(We+dt);Je&&(Ve-=De.cellHeight);const Ne=Math.round(Ve/De.rowHeight)-1;(0,t.useEffect)(()=>{Ne<=0||Re(Ne)},[Ne,Re]),k(xe,Qe,ce),_(lt,tt);const fe=(0,t.useCallback)(Xe=>{if(Ie.expanded[Xe]){const ut=q?.find(ht=>ht.meta?.custom?.parentRowIndex===Xe);if(ut){const ht=!!ut.meta?.custom?.noHeader,wt={height:De.rowHeight*(ut.length+(ht?0:1)),background:Me.colors.emphasize(Me.colors.background.primary,.015),paddingLeft:O.bc,position:"absolute",bottom:0};return t.createElement("div",{style:wt},t.createElement(oe,{data:ut,width:re-O.bc,height:De.rowHeight*(ut.length+1),noHeader:ht}))}}return null},[Ie.expanded,q,De.rowHeight,Me.colors,re]),ve=(0,t.useCallback)(({index:Xe,style:ut})=>{let ht=Le[Xe];return Je&&(ht=Pe[Xe]),he(ht),t.createElement("div",{...ht.getRowProps({style:ut}),className:De.row},fe(Xe),ht.cells.map((wt,mn)=>t.createElement(W.p,{key:mn,tableStyles:De,cell:wt,onCellFilterAdded:pe,columnIndex:mn,columnCount:ht.cells.length,timeRange:$e,frame:ce})))},[pe,Pe,Je,he,Le,De,fe,$e,ce]),ze=(0,t.useCallback)(Xe=>{Te(Xe-1)},[Te]),Oe=Je?Pe.length:Le.length;let Fe=null;if(Je){const Xe=Ie.pageIndex*Ie.pageSize+1;let ut=Xe+Ie.pageSize-1;const ht=re<550;ut>ce.length&&(ut=ce.length),Fe=t.createElement("div",{className:De.paginationWrapper},t.createElement(o.t,{currentPage:Ie.pageIndex+1,numberOfPages:ue.length,showSmallVersion:ht,onNavigate:ze}),ht?null:t.createElement("div",{className:De.paginationSummary},Xe," - ",ut," of ",ce.length," rows"))}const Ge=Xe=>{if(Ie.expanded[Xe]){const ut=q?.find(ht=>ht.meta?.custom?.parentRowIndex===Xe);if(ut){const ht=!!ut.meta?.custom?.noHeader;return De.rowHeight*(ut.length+1+(ht?0:1))}}return De.rowHeight},nt=Xe=>{const{scrollTop:ut}=Xe.target;Qe.current!==null&&Qe.current.scrollTo(ut)};return t.createElement("div",{...ct(),className:De.table,"aria-label":le,role:"table",ref:tt,style:{width:re,height:ne}},t.createElement(d.$,{hideVerticalTrack:!0},t.createElement("div",{className:De.tableContentWrapper(He)},!Se&&t.createElement(K,{headerGroups:ge,showTypeIcons:we,tableStyles:De}),Oe>0?t.createElement("div",{ref:lt},t.createElement(d.$,{onScroll:nt,hideHorizontalTrack:!0},t.createElement(i.S_,{key:De.rowHeight,height:Ve,itemCount:Oe,itemSize:Ge,width:"100%",ref:Qe,style:{overflow:void 0}},ve))):t.createElement("div",{style:{height:ne-We},className:De.noData},"No data"),qe&&t.createElement(l.i,{isPaginationVisible:!!Je,footerValues:qe,footerGroups:Be,totalColumnsWidth:He,tableStyles:De}))),Fe)});oe.displayName="Table"},94878:(j,I,e)=>{"use strict";e.d(I,{p:()=>t});const t=({cell:n,tableStyles:i,onCellFilterAdded:s,timeRange:r,userProps:m,frame:d})=>{const o=n.getCellProps(),l=n.column.field;if(!l?.display)return null;o.style&&(o.style.minWidth=o.style.width,o.style.justifyContent=n.column.justifyContent);let a=(n.column.width??24)-i.cellPadding*2;return n.render("Cell",{field:l,tableStyles:i,onCellFilterAdded:s,cellProps:o,innerWidth:a,timeRange:r,userProps:m,frame:d})}},63194:(j,I,e)=>{"use strict";e.d(I,{p:()=>n});var t=e(42844);function n(s,r){const m=s.colors.border.weak,d=s.colors.primary.border,o=6,l=i(s,r,o),a=l+2,g=28,c=(h,f,b)=>(0,t.css)({label:b?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${o}px`,width:"100%",height:`${a-1}px`,display:"flex",alignItems:"center",borderRight:`1px solid ${m}`,color:h??void 0,background:f??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:b?"visible":void 0,width:b?"auto !important":void 0,boxShadow:b?`0 0 2px ${s.colors.primary.main}`:void 0,background:b?f??s.components.table.rowHoverBackground:void 0,zIndex:b?1:void 0,".cellActions":{visibility:"visible",opacity:1,width:"auto"}},a:{color:"inherit"},".cellActions":{display:"flex",position:b?void 0:"absolute",top:b?void 0:0,right:b?void 0:0,margin:b?s.spacing(0,-.5,0,.5):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:s.spacing(1,.5,1,.5),background:f?"none":s.colors.emphasize(s.colors.background.primary,.03),svg:{color:h}},".cellActionsLeft":{right:"auto !important",left:0},".cellActionsTransparent":{background:"none"}});return{theme:s,cellHeight:l,buildCellContainerStyle:c,cellPadding:o,cellHeightInner:l-o*2,rowHeight:a,table:(0,t.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,t.css)({label:"thead",height:`${g}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,t.css)({label:"tfoot",height:`${g}px`,borderTop:`1px solid ${m}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,t.css)({label:"row",borderBottom:`1px solid ${m}`}),headerCell:(0,t.css)({height:"100%",padding:`0 ${o}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:s.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,t.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:s.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:s.spacing(.5),"&:hover":{textDecoration:"underline",color:s.colors.text.link}}),cellContainer:c(void 0,void 0,!0),cellContainerNoOverflow:c(void 0,void 0,!1),cellText:(0,t.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}),sortIcon:(0,t.css)({marginLeft:s.spacing(.5)}),cellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:s.colors.text.link,fontWeight:s.typography.fontWeightMedium,"&:hover":{textDecoration:"underline",color:s.colors.text.link}}),cellLinkForColoredCell:(0,t.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:s.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,t.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,t.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,t.css)({display:"flex",height:`${l}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,t.css)({color:s.colors.text.secondary,fontSize:s.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:s.spacing(0,1,0,2)}),tableContentWrapper:h=>{const f=h!==void 0?`${h}px`:"100%";return(0,t.css)({label:"tableContentWrapper",width:f,display:"flex",flexDirection:"column"})},row:(0,t.css)({label:"row",borderBottom:`1px solid ${m}`,"&:hover":{backgroundColor:s.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,t.css)({height:"100%"}),resizeHandle:(0,t.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:d,opacity:0,transition:"opacity 0.2s ease-in-out",width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:s.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,t.css)({marginRight:s.spacing(1),color:s.colors.text.secondary}),noData:(0,t.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${a}px`,cursor:"pointer"})}}function i(s,r,m){const d=s.typography.fontSize,o=s.typography.body.lineHeight;switch(r){case"md":return 42;case"lg":return 48;case"sm":default:return m*2+d*o}}},36191:(j,I,e)=>{"use strict";e.d(I,{PT:()=>t,tE:()=>n});const t="=",n="!="},37193:(j,I,e)=>{"use strict";e.d(I,{bc:()=>le,AF:()=>re,KF:()=>$e,S_:()=>tt,Pu:()=>q,n0:()=>Ce,jB:()=>Je,E4:()=>ce,q7:()=>lt,nl:()=>de,QT:()=>we,mP:()=>Se});var t=e(89949),n=e(82152),i=e(29241),s=e(75578),r=e(32053),m=e(59425),d=e(21609),o=e(66656),l=e(61965),a=e(64167),g=e(27702),c=e(5168),h=e(11024),f=e(90482),b=e(24919),v=e(50741);const y={mode:c.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},E=De=>{const{field:We,innerWidth:qe,tableStyles:st,cell:dt,cellProps:Tt,row:Nt}=De,Bt=We.display(dt.value),yt=tt(We);let ft=(0,h.xD)(We,!1);ft.thresholds||(ft={...ft,thresholds:y});let ct=a.QH.Gradient,ge;yt.type===a.h2.Gauge&&(ct=yt.mode??a.QH.Gradient,ge=yt.valueDisplayMode!==void 0?yt.valueDisplayMode:a.M8.Text);const Be=()=>(0,t.isFunction)(We.getLinks)?We.getLinks({valueRowIndex:Nt.index}):[],Le=!!Be().length,he=C(We,Bt,dt.row.index),He=Pe=>{const{openMenu:Ie,targetClassName:Te}=Pe;return g.createElement(b.xf,{width:qe,height:st.cellHeightInner,field:ft,display:We.display,text:{valueSize:14},value:Bt,orientation:f.wm.Horizontal,theme:st.theme,alignmentFactors:he,onClick:Ie,className:Te,itemSpacing:1,lcdCellWidth:8,displayMode:ct,valueDisplayMode:ge})};return g.createElement("div",{...Tt,className:st.cellContainer},Le&&g.createElement(v.V,{links:Be,style:{display:"flex",width:"100%"}},Pe=>He(Pe)),!Le&&He({}))};function C(De,We,qe){let st=De.state?.alignmentFactors;if(st)return st.text.length<We.text.length&&(st.text=We.text),st;{st={...We};const dt=Math.min(De.values.length,qe+1e3);for(let Tt=qe+1;Tt<dt;Tt++)De.display(De.values[Tt]).text.length>st.text.length&&(st.text=We.text);return De.state?De.state.alignmentFactors=st:De.state={alignmentFactors:st},st}}var u=e(42844),D=e(71685),P=e(66310),S=e(9451),x=e(5354),M=e(66670),R=e(67437),O=e(64022),T=e(71585),U=e(13741),L=e(11649);function V({value:De,onDismiss:We,mode:qe}){let st=De;if((0,t.isString)(De))try{De=JSON.parse(De)}catch{}else st=JSON.stringify(De,null," ");let dt=st;return qe==="code"&&(dt=JSON.stringify(De,null," ")),g.createElement(U.u,{onDismiss:We,isOpen:!0,title:"Inspect value"},qe==="code"?g.createElement(L.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(dt&&dt.length)>100,value:dt,readOnly:!0}):g.createElement("pre",null,dt),g.createElement(U.u.ButtonRow,null,g.createElement(T.m,{icon:"copy",getText:()=>dt},"Copy to Clipboard")))}var w=e(36191);function K({field:De,cell:We,previewMode:qe,showFilters:st,onCellFilterAdded:dt}){const[Tt,Nt]=(0,g.useState)(!1),Bt=ce(De)==="flex-end",yt=!!De.config.custom?.inspect,ft={size:"sm",tooltipPlacement:"top"},ct=(0,g.useCallback)(Be=>{dt&&dt({key:De.name,operator:w.PT,value:We.value})},[We,De,dt]),ge=(0,g.useCallback)(Be=>{dt&&dt({key:De.name,operator:w.tE,value:We.value})},[We,De,dt]);return g.createElement(g.Fragment,null,g.createElement("div",{className:`cellActions ${Bt?"cellActionsLeft":""}`},g.createElement(O.Lh,{spacing:"xs"},yt&&g.createElement(R.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{Nt(!0)},...ft}),st&&g.createElement(R.h,{name:"search-plus",onClick:ct,tooltip:"Filter for value",...ft}),st&&g.createElement(R.h,{name:"search-minus",onClick:ge,tooltip:"Filter out value",...ft}))),Tt&&g.createElement(V,{mode:qe,value:We.value,onDismiss:()=>{Nt(!1)}}))}const B=De=>{const{field:We,cell:qe,tableStyles:st,row:dt,cellProps:Tt,frame:Nt}=De,Bt=!!We.config.custom?.inspect,yt=We.display(qe.value),ft=De.onCellFilterAdded&&We.config.filterable,ct=ft&&qe.value!==void 0||Bt,ge=tt(We),Be=W(st,ge,yt,Bt),Le=!!(0,S.i)(We,dt)?.length,he=(0,P.wW)(M._7);let He;if(ge.type===a.h2.Custom){const Pe=ge.cellComponent;He=g.createElement(Pe,{field:We,value:qe.value,rowIndex:dt.index,frame:Nt})}else g.isValidElement(qe.value)?He=qe.value:He=(0,d.zc)(yt);return g.createElement("div",{...Tt,className:Be},!Le&&g.createElement("div",{className:st.cellText},He),Le&&g.createElement(v.V,{links:()=>(0,S.i)(We,dt)||[]},Pe=>Pe.openMenu?g.createElement("button",{className:(0,u.cx)(he,_(st,ge,Pe.targetClassName)),onClick:Pe.openMenu},He):g.createElement("div",{className:_(st,ge,Pe.targetClassName)},He)),ct&&g.createElement(K,{...De,previewMode:"text",showFilters:ft}))};function W(De,We,qe,st=!1){const dt=De.theme.isDark?1:-.7;let Tt,Nt;if(We.type===a.h2.ColorText)Tt=qe.color;else if(We.type===a.h2.ColorBackground){const Bt=We.mode??a.v7.Gradient;if(Bt===a.v7.Basic)Tt=(0,x.bM)(qe.color,De.theme.isDark),Nt=(0,D.Z)(qe.color).toRgbString();else if(Bt===a.v7.Gradient){const yt=(0,D.Z)(qe.color).darken(10*dt).spin(5);Tt=(0,x.bM)(qe.color,De.theme.isDark),Nt=`linear-gradient(120deg, ${yt.toRgbString()}, ${qe.color})`}}return Tt!==void 0||Nt!==void 0?De.buildCellContainerStyle(Tt,Nt,!st):st?De.cellContainerNoOverflow:De.cellContainer}function _(De,We,qe){return We.type===a.h2.Auto?(0,u.cx)(De.cellLink,qe):(0,u.cx)(De.cellLinkForColoredCell,qe)}var k=e(93915),A=e(97981),z=e(13012);function H(De){const{cell:We,tableStyles:qe,cellProps:st}=De;let dt="";return We.value instanceof z.Z?dt=new A.Z().writeGeometry(We.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):We.value!=null&&(dt=`${We.value}`),g.createElement("div",{...st,className:qe.cellContainer},g.createElement("div",{className:qe.cellText,style:{fontFamily:"monospace"}},dt))}const Q=De=>{const{field:We,cell:qe,tableStyles:st,row:dt,cellProps:Tt}=De,Nt=We.display(qe.value),Bt=!!(0,S.i)(We,dt)?.length,yt=(0,P.wW)(M._7);return g.createElement("div",{...Tt,className:st.cellContainer},!Bt&&g.createElement("img",{src:Nt.text,className:st.imageCell,alt:""}),Bt&&g.createElement(v.V,{style:{height:"100%"},links:()=>(0,S.i)(We,dt)||[]},ft=>{const ct=g.createElement("img",{src:Nt.text,className:st.imageCell,alt:""});return ft.openMenu?g.createElement(M.zx,{className:(0,u.cx)(yt),onClick:ft.openMenu},ct):ct}))};function X(De){const{cell:We,tableStyles:qe,cellProps:st,field:dt,row:Tt}=De,Nt=!!dt.config.custom?.inspect,Bt=(0,u.css)({cursor:"pointer",fontFamily:"monospace"});let yt=We.value,ft=yt;if((0,t.isString)(yt))try{yt=JSON.parse(yt)}catch{}else ft=JSON.stringify(yt,null," ");const ct=!!(0,S.i)(dt,Tt)?.length,ge=(0,P.wW)(M._7);return g.createElement("div",{...st,className:Nt?qe.cellContainerNoOverflow:qe.cellContainer},g.createElement("div",{className:(0,u.cx)(qe.cellText,Bt)},!ct&&g.createElement("div",{className:qe.cellText},ft),ct&&g.createElement(v.V,{links:()=>(0,S.i)(dt,Tt)||[]},Be=>Be.openMenu?g.createElement(M.zx,{className:(0,u.cx)(ge),onClick:Be.openMenu},ft):g.createElement(g.Fragment,null,ft))),Nt&&g.createElement(K,{...De,previewMode:"code"}))}var te=e(73453);function oe({row:De,tableStyles:We}){return g.createElement("div",{className:We.expanderCell,...De.getToggleRowExpandedProps()},g.createElement(te.J,{"aria-label":De.isExpanded?"Collapse row":"Expand row",name:De.isExpanded?"angle-down":"angle-right",size:"xl"}))}var Z=e(42100);const le=50;function ce(De){if(!De)return"flex-start";if(De.config.custom)switch(De.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return De.type===i.fS.number?"flex-end":"flex-start"}function q(De,We,qe,st,dt,Tt){const Nt=[];let Bt=0;st&&(Nt.push({Header:()=>null,id:"expander",Cell:oe,width:le,minWidth:le,filter:(ft,ct,ge)=>[],justifyContent:"left",field:De.fields[0],sortType:"basic"}),We-=le);for(const[ft,ct]of De.fields.entries()){const ge=ct.config.custom||{};if(ge.hidden)continue;ge.width?We-=ge.width:Bt++;const Be=he=>{switch(he){case i.fS.number:return"number";case i.fS.time:return"basic";default:return"alphanumeric-insensitive"}},Le=ne(ge.cellOptions?.type,ct);Nt.push({Cell:Le,id:ft.toString(),field:ct,Header:ge.hideHeader?"":(0,s.CZ)(ct,De),accessor:(he,He)=>ct.values[He],sortType:Be(ct.type),width:ge.width,minWidth:ge.minWidth??qe,filter:(0,n.Z)(pe(ct)),justifyContent:ce(ct),Footer:(0,k.c)(ft,dt,Tt)})}let yt=We/Bt;for(let ft=Bt;ft>0;ft--)for(const ct of Nt)!ct.width&&ct.minWidth>yt&&(ct.width=ct.minWidth,We-=ct.width,Bt-=1,yt=We/Bt);for(const ft of Nt)ft.width||(ft.width=yt),ft.minWidth=50;return Nt}function ne(De,We){switch(De){case a.h2.Custom:case a.h2.ColorText:case a.h2.ColorBackground:return B;case a.h2.Image:return Q;case a.h2.Gauge:return E;case a.h2.Sparkline:return Z.A;case a.h2.JSONView:return X}if(We.type===i.fS.geo)return H;if(We.type===i.fS.frame){const qe=We.values[0];return(0,r.aY)(qe)&&(0,m.pP)(qe)?Z.A:X}return We.type===i.fS.other?X:B}function pe(De){return function(We,qe,st){return We.length===0||!st||!De?We:We.filter(dt=>{if(!dt.values.hasOwnProperty(qe))return!1;const Tt=ie(dt,De);return st.find(Nt=>Nt.value===Tt)!==void 0})}}function re(De,We){if(!We||De.length===0)return{};const qe={};for(let st=0;st<De.length;st++){const dt=ie(De[st],We);qe[dt||"(Blanks)"]=dt}return qe}function ie(De,We){if(!We||!De)return"";const qe=We.values[De.index],st=We.display?We.display(qe):qe;return We.display?(0,d.zc)(st):st}function Se(De){return Object.keys(De).reduce((We,qe)=>We.concat({value:De[qe],label:qe}),[]).sort(ye)}function ye(De,We){return De.label===void 0&&We.label===void 0?0:De.label===void 0&&We.label!==void 0?-1:De.label!==void 0&&We.label===void 0?1:De.label<We.label?-1:De.label>We.label?1:0}function Ce(De,We){return We?De.filter(qe=>We.some(st=>st.value===qe.value)):[]}function de(De,We,qe){return String(De.values[qe]).localeCompare(String(We.values[qe]),void 0,{sensitivity:"base"})}function we(De,We,qe){const st=_e(De.values[qe]),dt=_e(We.values[qe]);return st===dt?0:st>dt?1:-1}function _e(De){return De==null||De===""||isNaN(De)?Number.NEGATIVE_INFINITY:typeof De=="number"?De:Number(De)}function Je(De,We,qe,st){return Me(De),De.map((dt,Tt)=>{if(dt?.field?.type!==i.fS.number)return Tt===0&&qe.reducer&&qe.reducer.length>0?o.TB.get(qe.reducer[0]).name:void 0;let Nt=(0,t.clone)(dt.field);return Nt.values=We[dt.id],Nt.state=void 0,dt.field=Nt,qe.fields&&qe.fields.length>0?qe.fields.find(yt=>yt===dt?.field?.name)?Ue(dt.field,qe.reducer,st):void 0:Ue(dt.field,qe.reducer||[],st)})}function Ue(De,We,qe){const st=De.display??(0,l.U)({field:De,theme:qe}),dt=We[0],Tt=(0,o.Kx)({field:De,reducers:We})[dt];return(0,d.zc)(st(Tt))}function $e(De){const We=[];for(const qe in De)for(const[st,dt]of Object.entries(De[qe].values))We[st]===void 0&&(We[st]=[]),We[st].push(dt);return We}const Qe={type:a.h2.Auto};function tt(De){return De.config.custom?.displayMode?lt(De.config.custom?.displayMode):De.config.custom?.cellOptions?De.config.custom.cellOptions:Qe}function lt(De){switch(De){case"basic":case"gradient-gauge":case"lcd-gauge":let We=a.QH.Basic;return De==="gradient-gauge"?We=a.QH.Gradient:De==="lcd-gauge"&&(We=a.QH.Lcd),{type:a.h2.Gauge,mode:We};case"color-background":case"color-background-solid":let qe=a.v7.Basic;return De==="color-background"&&(qe=a.v7.Gradient),{type:a.h2.ColorBackground,mode:qe};default:return{type:De}}}function Me(De){const We=De.findIndex((qe,st)=>qe?.id!==String(st));We!==-1&&(De.splice(We,0,{id:String(We)}),Me(De))}},7704:(j,I,e)=>{"use strict";e.d(I,{w:()=>g});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(92827),m=e(66310),d=e(80402),o=e(73453),l=e(60105);class a extends s.PureComponent{constructor(f){super(f),this.readCSV=(0,n.debounce)(()=>{const{config:y}=this.props,{text:E}=this.state;this.setState({data:(0,r.uP)(E,{config:y})})},150),this.onTextChange=y=>{this.setState({text:y.target.value})};const{text:b,config:v}=f;this.state={text:b,data:(0,r.uP)(b,{config:v})}}componentDidUpdate(f,b){const{text:v}=this.state;(v!==b.text||this.props.config!==f.config)&&this.readCSV(),this.props.text!==f.text&&this.props.text!==v&&this.setState({text:this.props.text}),this.state.data!==b.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:f,height:b,theme:v}=this.props,{data:y}=this.state,E=c(v);return s.createElement("div",{className:E.tableInputCsv},s.createElement(l.K,{style:{width:f,height:b},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:E.textarea}),y&&s.createElement("footer",{className:E.footer},y.map((C,u)=>s.createElement("span",{key:u},"Rows:",C.length,", Columns:",C.fields.length," \xA0",s.createElement(o.J,{name:"check-circle"})))))}}const g=(0,m.HE)(a);g.displayName="TableInputCSV";const c=(0,d.B)(h=>({tableInputCsv:(0,t.css)({position:"relative"}),textarea:(0,t.css)({height:"100%",width:"100%"}),footer:(0,t.css)({position:"absolute",bottom:"15px",right:"15px",border:"1px solid #222",background:h.colors.success.main,padding:`1px ${h.spacing(.5)}`,fontSize:"80%"})}))},77122:(j,I,e)=>{"use strict";e.d(I,{A:()=>d});var t=e(42844),n=e(27702),i=e(21609),s=e(80402),r=e(66310);const m=(0,s.B)(o=>({counter:(0,t.css)({label:"counter",marginLeft:o.spacing(1),borderRadius:o.spacing(3),backgroundColor:o.colors.action.hover,padding:o.spacing(.25,1),color:o.colors.text.secondary,fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.size.sm})})),d=({value:o})=>{const l=(0,r.wW)(m);return n.createElement("span",{className:l.counter},(0,i.SP)(o,0).text)}},54281:(j,I,e)=>{"use strict";e.d(I,{O:()=>o});var t=e(42844),n=e(27702),i=e(74639),s=e(66310),r=e(97289),m=e(73453),d=e(77122);const o=n.forwardRef(({label:a,active:g,icon:c,onChangeTab:h,counter:f,suffix:b,className:v,href:y,...E},C)=>{const u=(0,s.wW)(l),D=()=>n.createElement(n.Fragment,null,c&&n.createElement(m.J,{name:c}),a,typeof f=="number"&&n.createElement(d.A,{value:f}),b&&n.createElement(b,{className:u.suffix})),P=(0,t.cx)(u.link,g?u.activeStyle:u.notActive);return n.createElement("div",{className:u.item},n.createElement("a",{href:y||"#",className:P,...E,onClick:h,"aria-label":E["aria-label"]||i.wl.components.Tab.title(a),role:"tab","aria-selected":g,ref:C},D()))});o.displayName="Tab";const l=a=>({item:(0,t.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap"}),link:(0,t.css)({color:a.colors.text.secondary,padding:a.spacing(1.5,2,1),display:"block",height:"100%",svg:{marginRight:a.spacing(1)},"&:focus-visible":(0,r.getFocusStyles)(a),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"4px",borderRadius:a.shape.radius.default,bottom:0}}),notActive:(0,t.css)({"a:hover, &:hover, &:focus":{color:a.colors.text.primary,"&::before":{backgroundColor:a.colors.action.hover}}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:a.colors.text.primary,overflow:"hidden",a:{color:a.colors.text.primary},"&::before":{backgroundImage:a.colors.gradients.brandHorizontal}}),suffix:(0,t.css)({marginLeft:a.spacing(1)})})},4432:(j,I,e)=>{"use strict";e.d(I,{I:()=>m});var t=e(42844),n=e(27702),i=e(80402),s=e(66310);const r=(0,i.B)(d=>({tabContent:(0,t.css)({background:d.colors.background.primary})})),m=({children:d,className:o,...l})=>{const a=(0,s.l4)(),g=r(a);return n.createElement("div",{...l,className:(0,t.cx)(g.tabContent,o)},d)}},15372:(j,I,e)=>{"use strict";e.d(I,{J:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=n.forwardRef(({children:m,className:d,hideBorder:o=!1},l)=>{const a=(0,i.wW)(r);return n.createElement("div",{className:(0,t.cx)(a.tabsWrapper,o&&a.noBorder,d),ref:l},n.createElement("div",{className:a.tabs,role:"tablist"},m))}),r=m=>({tabsWrapper:(0,t.css)({borderBottom:`1px solid ${m.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,t.css)({borderBottom:0}),tabs:(0,t.css)({position:"relative",display:"flex",height:`${m.components.menuTabs.height}px`})});s.displayName="TabsBar"},49050:(j,I,e)=>{"use strict";e.d(I,{L:()=>d});var t=e(42844),n=e(27702),i=e(74639),s=e(66310),r=e(73453),m=e(77122);const d=n.forwardRef(({label:l,active:a,icon:g,counter:c,className:h,suffix:f,onChangeTab:b,href:v,...y},E)=>{const C=(0,s.wW)(o),u=()=>n.createElement(n.Fragment,null,g&&n.createElement(r.J,{name:g}),l,typeof c=="number"&&n.createElement(m.A,{value:c}),f&&n.createElement(f,{className:C.suffix})),D=(0,t.cx)(C.link,a&&C.activeStyle);return n.createElement("a",{href:v,className:D,...y,onClick:b,"aria-label":y["aria-label"]||i.wl.components.Tab.title(l),role:"tab","aria-selected":a,ref:E},u())});d.displayName="Tab";const o=l=>({link:(0,t.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:l.colors.text.primary,svg:{marginRight:l.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,t.css)({label:"activeTabStyle",color:l.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:l.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,t.css)({marginLeft:l.spacing(1)})})},65333:(j,I,e)=>{"use strict";e.d(I,{V:()=>l});var t=e(42844),n=e(27702),i=e(57704),s=e(66310),r=e(64714),m=e(73453);const d=(0,n.forwardRef)(({name:c,onClick:h,icon:f,className:b,colorIndex:v,...y},E)=>{const C=(0,s.l4)(),u=g(C,c,v),D=S=>{S.preventDefault(),S.stopPropagation(),h?.(c,S)},P=(0,t.cx)(u.wrapper,b,{[u.hover]:h!==void 0});return h?n.createElement("button",{...y,className:P,onClick:D,ref:E},f&&n.createElement(m.J,{name:f}),c):n.createElement("span",{...y,className:P,ref:E},f&&n.createElement(m.J,{name:f}),c)});d.displayName="Tag";const l=Object.assign(d,{Skeleton:()=>{const c=(0,s.wW)(a);return n.createElement(i.Z,{width:60,height:22,containerClassName:c.container})}}),a=()=>({container:(0,t.css)({lineHeight:1})}),g=(c,h,f)=>{let b;return f===void 0?b=(0,r.Bx)(h):b=(0,r.vm)(f),{wrapper:(0,t.css)({appearance:"none",borderStyle:"none",fontWeight:c.typography.fontWeightMedium,fontSize:c.typography.size.sm,lineHeight:c.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:b.color,color:c.v1.palette.gray98,whiteSpace:"nowrap",textShadow:"none",padding:"3px 6px",borderRadius:c.shape.radius.default}),hover:(0,t.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},86004:(j,I,e)=>{"use strict";e.d(I,{P:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(65333);const r=(0,n.memo)((0,n.forwardRef)(({displayMax:a,tags:g,icon:c,onClick:h,className:f,getAriaLabel:b,getColorIndex:v},y)=>{const E=(0,i.l4)(),C=l(E,!!(a&&a>0)),u=g.length,D=a?g.slice(0,a):g;return n.createElement("ul",{className:(0,t.cx)(C.wrapper,f),"aria-label":"Tags",ref:y},D.map((P,S)=>n.createElement("li",{className:C.li,key:P},n.createElement(s.V,{name:P,icon:c,onClick:h,"aria-label":b?.(P,S),"data-tag-id":S,colorIndex:v?.(P,S)}))),a&&a>0&&u-a>0&&n.createElement("span",{className:C.moreTagsLabel},"+ ",u-a))}));r.displayName="TagList";const d=Object.assign(r,{Skeleton:()=>{const a=(0,i.wW)(o);return n.createElement("div",{className:a.container},n.createElement(s.V.Skeleton,null),n.createElement(s.V.Skeleton,null))}}),o=a=>({container:(0,t.css)({display:"flex",gap:a.spacing(1)})}),l=(a,g)=>({wrapper:(0,t.css)({position:"relative",alignItems:g?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:g?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,t.css)({color:a.colors.text.secondary,fontSize:a.typography.size.sm}),li:(0,t.css)({listStyle:"none"})})},72699:(j,I,e)=>{"use strict";e.d(I,{B:()=>a});var t=e(42844),n=e(27702),i=e(66310),s=e(66670),r=e(1128),m=e(64714),d=e(67437);const o=({name:c,disabled:h,onRemove:f})=>{const{color:b,borderColor:v}=(0,n.useMemo)(()=>(0,m.Bx)(c),[c]),y=(0,i.wW)(l);return n.createElement("li",{className:y.itemStyle,style:{backgroundColor:b,borderColor:v}},n.createElement("span",{className:y.nameStyle},c),n.createElement(d.h,{name:"times",size:"lg",disabled:h,tooltip:`Remove "${c}" tag`,onClick:()=>f(c),className:y.buttonStyles}))},l=c=>{const h=c.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${h}px`,lineHeight:`${h-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:c.shape.radius.default,padding:`0 ${c.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:c.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},a=({placeholder:c="New tag (enter key to add)",tags:h=[],onChange:f,width:b,className:v,disabled:y,addOnBlur:E,invalid:C,id:u})=>{const[D,P]=(0,n.useState)(""),S=(0,i.wW)(g),x=(0,i.l4)(),M=(0,n.useCallback)(L=>{P(L.target.value)},[]),R=L=>{f(h.filter(V=>V!==L))},O=L=>{L?.preventDefault(),h.includes(D)||f(h.concat(D)),P("")},T=()=>{E&&D&&O()},U=L=>{L.key==="Enter"&&D!==""&&O(L)};return n.createElement("div",{className:(0,t.cx)(S.wrapper,v,b?(0,t.css)({width:x.spacing(b)}):"")},n.createElement(r.I,{id:u,disabled:y,placeholder:c,onChange:M,value:D,onKeyDown:U,onBlur:T,invalid:C,suffix:n.createElement(s.zx,{fill:"text",className:S.addButtonStyle,onClick:O,size:"md",disabled:D.length<=0},"Add")}),h?.length>0&&n.createElement("ul",{className:S.tags},h.map(L=>n.createElement(o,{key:L,name:L,onRemove:R,disabled:y}))))},g=c=>({wrapper:(0,t.css)({minHeight:c.spacing(4),display:"flex",flexDirection:"column",gap:c.spacing(1),flexWrap:"wrap"}),tags:(0,t.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:c.spacing(.5)}),addButtonStyle:(0,t.css)({margin:`0 -${c.spacing(1)}`})})},21323:(j,I,e)=>{"use strict";e.d(I,{x:()=>r});var t=e(42844),n=e(27702),i=e(66310),s=e(67106);const r=n.forwardRef(({element:d="span",variant:o,weight:l,color:a,truncate:g,italic:c,textAlignment:h,children:f},b)=>{const v=(0,i.wW)((0,n.useCallback)(y=>m(y,d,o,a,l,g,c,h),[a,h,g,c,l,o,d]));return(0,n.createElement)(d,{className:v,ref:b},f)});r.displayName="Text";const m=(d,o,l,a,g,c,h,f)=>(0,t.css)([{margin:0,padding:0,...(0,s.jt)(d,o,l)},l&&{...d.typography[l]},a&&{color:(0,s.Jx)(a,d)},g&&{fontWeight:(0,s.RC)(g,d)},c&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},h&&{fontStyle:"italic"},f&&{textAlign:f}])},67106:(j,I,e)=>{"use strict";e.d(I,{Jx:()=>n,RC:()=>t,jt:()=>i});const t=(s,r)=>{switch(s){case"bold":return r.typography.fontWeightBold;case"medium":return r.typography.fontWeightMedium;case"light":return r.typography.fontWeightLight;case"regular":case void 0:return r.typography.fontWeightRegular}},n=(s,r)=>{switch(s){case"error":return r.colors.error.text;case"success":return r.colors.success.text;case"info":return r.colors.info.text;case"warning":return r.colors.warning.text;default:return s?r.colors.text[s]:void 0}},i=(s,r,m)=>{if(m)return s.typography[m];switch(r){case"span":return;case"h1":return s.typography.h1;case"h2":return s.typography.h2;case"h3":return s.typography.h3;case"h4":return s.typography.h4;case"h5":return s.typography.h5;case"h6":return s.typography.h6;default:return s.typography.body}}},60105:(j,I,e)=>{"use strict";e.d(I,{K:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(80402),r=e(26468);const m=n.forwardRef(({invalid:o,className:l,...a},g)=>{const c=(0,i.l4)(),h=d(c,o);return n.createElement("textarea",{...a,className:(0,t.cx)(h.textarea,l),ref:g})}),d=(0,s.B)((o,l=!1)=>({textarea:(0,t.cx)((0,r.RK)(o),(0,r.GL)(o),(0,t.css)({display:"block",borderRadius:o.shape.borderRadius(),padding:`${o.spacing.gridSize/4}px ${o.spacing.gridSize}px`,width:"100%",borderColor:l?o.colors.error.border:o.components.input.borderColor}))}));m.displayName="TextArea"},25181:(j,I,e)=>{"use strict";e.d(I,{p:()=>U});var t=e(27702),n=e(66310),i=e(18869),s=e(70823),r=e(30797),m=e(89949),d=e(26712),o=e(29241),l=e(21609),a=e(61965),g=e(58192),c=e(93666),h=e(75578),f=e(79248),b=e(84714),v=e(64167),y=e(90537),E=e(19345),C=e(12839),u=e(48473);const D=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),P=Array(53);for(let L=0;L<P.length;L++)P[L]=2**L;const S=(L,V=1)=>L==null?"-":L.toFixed(V),x={drawStyle:v.l8.Line,showPoints:v.Jp.Auto,axisPlacement:v.LB.Auto},M=({frame:L,theme:V,timeZones:w,getTimeRange:K,eventBus:B,sync:W,allFrames:_,renderers:k,tweakScale:A=Q=>Q,tweakAxis:z=Q=>Q,eventsScope:H="__global_"})=>{const Q=new E.U(w[0]);let X;Q.setPrepData(ye=>(X=ye[0],(0,u.Bj)(ye[0],Q.getStackingGroups())));const te=L.fields[0];if(!te)return Q;const oe="x";let Z="_x",le="";const ce=te.config.custom?.axisPlacement!==v.LB.Hidden?v.LB.Bottom:v.LB.Hidden,q=te.config.custom?.axisPlacement!==v.LB.Hidden;if(te.type===o.fS.time){Z="time",Q.addScale({scaleKey:oe,orientation:v.wN.Horizontal,direction:v.bQ.Right,isTime:!0,range:()=>{const Ce=K();return[Ce.from.valueOf(),Ce.to.valueOf()]}});const ye=w.length>1?(Ce,de)=>de.map((we,_e)=>_e<2?null:we):void 0;for(let Ce=0;Ce<w.length;Ce++){const de=w[Ce];Q.addAxis({scaleKey:oe,isTime:!0,placement:ce,show:q,label:te.config.custom?.axisLabel,timeZone:de,theme:V,grid:{show:Ce===0&&te.config.custom?.axisGridShow},filter:ye})}w.length>1&&Q.addHook("drawAxes",Ce=>{Ce.ctx.save(),Ce.ctx.fillStyle=V.colors.text.primary,Ce.ctx.textAlign="left",Ce.ctx.textBaseline="bottom";let de=0;Ce.axes.forEach(we=>{if(we.side===2){let _e=we._pos+we._size;Ce.ctx.fillText(w[de],Ce.bbox.left,_e*d.Z.pxRatio),de++}}),Ce.ctx.restore()})}else te.config.unit&&(Z=te.config.unit),Q.addScale({scaleKey:oe,orientation:v.wN.Horizontal,direction:v.bQ.Right,range:(ye,Ce,de)=>[te.config.min??Ce,te.config.max??de]}),Q.addAxis({scaleKey:oe,placement:ce,show:q,label:te.config.custom?.axisLabel,theme:V,grid:{show:te.config.custom?.axisGridShow},formatValue:(ye,Ce)=>(0,l.zc)(te.display(ye,Ce))});let ne=k?.flatMap(ye=>Object.values(ye.fieldMap).filter(Ce=>ye.indicesOnly.indexOf(Ce)===-1))??[],pe;for(let ye=1;ye<L.fields.length;ye++){const Ce=L.fields[ye],de={...Ce.config,custom:{...x,...Ce.config.custom}},we=de.custom;if(Ce===te||Ce.type!==o.fS.number&&Ce.type!==o.fS.enum)continue;let _e=Ce.display??S;Ce.config.custom?.stacking?.mode===v.o0.Percent&&(_e=(0,a.U)({field:{...Ce,config:{...Ce.config,unit:"percentunit"}},theme:V}));const Je=(0,y.z1)(de,Ce.type),Ue=(0,g.fD)(Ce),Qe=(0,g.YO)(Ce,V).color;if(Q.addScale(A({scaleKey:Je,orientation:v.wN.Vertical,direction:v.bQ.Up,distribution:we.scaleDistribution?.type,log:we.scaleDistribution?.log,linearThreshold:we.scaleDistribution?.linearThreshold,min:Ce.config.min,max:Ce.config.max,softMin:we.axisSoftMin,softMax:we.axisSoftMax,centeredZero:we.axisCenteredZero,range:we.stacking?.mode===v.o0.Percent?(st,dt,Tt)=>(dt=dt<0?-1:0,Tt=Tt>0?1:0,[dt,Tt]):Ce.type===o.fS.enum?(st,dt,Tt)=>[-1,Ce.config.type.enum.text.length]:void 0,decimals:Ce.config.decimals},Ce)),le||(le=Je),we.axisPlacement!==v.LB.Hidden){let st;we.axisColorMode===v.yK.Series&&(Ue.isByValue&&Ce.config.custom?.gradientMode===v.FI.Scheme&&Ue.id===c.S.Thresholds?st=(0,C.P2)(1,V,Ue,Ce.config.thresholds):st=Qe);let dt={};st&&(dt={border:{show:!0,width:1,stroke:st},ticks:{stroke:st},color:we.axisColorMode===v.yK.Series?st:void 0});let Tt,Nt,Bt;if(D.has(de.unit))Tt=P;else if(Ce.type===o.fS.enum){let yt=Ce.config.type.enum.text;Bt=yt.map((ft,ct)=>ct),Nt=yt}Q.addAxis(z({scaleKey:Je,label:we.axisLabel,size:we.axisWidth,placement:we.axisPlacement??v.LB.Auto,formatValue:(yt,ft)=>(0,l.zc)(_e(yt,ft)),theme:V,grid:{show:we.axisGridShow},decimals:Ce.config.decimals,distr:we.scaleDistribution?.type,splits:Bt,values:Nt,incrs:Tt,...dt},Ce))}const tt=we.drawStyle===v.l8.Points?v.Jp.Always:we.showPoints;let lt=()=>null;we.spanNulls!==!0&&(lt=(st,dt,Tt,Nt)=>{let Bt=[],yt=st.series[dt];if(!Tt&&Nt&&Nt.length){const[ft,ct]=yt.idxs,ge=st.data[0],Be=st.data[dt],Le=Math.round(st.valToPos(ge[ft],"x",!0)),he=Math.round(st.valToPos(ge[ct],"x",!0));Nt[0][0]===Le&&Bt.push(ft);for(let He=0;He<Nt.length;He++){let Pe=Nt[He],Ie=Nt[He+1];if(Ie&&Pe[1]===Ie[0]){let Te=st.posToIdx(Pe[1],!0);if(Be[Te]==null)for(let Re=1;Re<100;Re++){if(Be[Te+Re]!=null){Te+=Re;break}if(Be[Te-Re]!=null){Te-=Re;break}}Bt.push(Te)}}Nt[Nt.length-1][1]===he&&Bt.push(ct)}return Bt.length?Bt:null});let{fillOpacity:Me}=we,De=null,We=null;if(Ce.state?.origin){pe||(pe=R(L,_));const st=_[Ce.state.origin.frameIndex],dt=st?.fields[Ce.state.origin.fieldIndex],Tt=(0,h.CZ)(dt??Ce,st,_);if(ne.indexOf(Tt)>=0)De=()=>null,We=()=>{};else if(we.transform===v.pR.Constant){const Nt=d.Z.paths.linear();De=(Bt,yt)=>{const ft=Bt._data,ct=K();let ge=[ct.from.valueOf(),ct.to.valueOf()],Be=ft[yt].find(He=>He!=null),Le=[Be,Be],he=ft.slice();return he[0]=ge,he[yt]=Le,Nt({...Bt,_data:he},yt,0,1)}}if(we.fillBelowTo){const Nt=L.fields.find(ct=>we.fillBelowTo===ct.name||we.fillBelowTo===ct.config?.displayNameFromDS||we.fillBelowTo===(0,h.CZ)(ct,L,_)),Bt=Nt?(0,h.CZ)(Nt,L,_):we.fillBelowTo,yt=pe.get(Tt),ft=pe.get(Bt);(0,m.isNumber)(ft)&&(0,m.isNumber)(yt)?(Q.addBand({series:[yt,ft],fill:void 0}),Me||(Me=35)):Me=0}}let qe;Ue.id===c.S.Thresholds&&(qe=st=>(0,g.YO)(X.fields[st],V).color),Q.addSeries({pathBuilder:De,pointsBuilder:We,scaleKey:Je,showPoints:tt,pointsFilter:lt,colorMode:Ue,fillOpacity:Me,theme:V,dynamicSeriesColor:qe,drawStyle:we.drawStyle,lineColor:we.lineColor??Qe,lineWidth:we.lineWidth,lineInterpolation:we.lineInterpolation,lineStyle:we.lineStyle,barAlignment:we.barAlignment,barWidthFactor:we.barWidthFactor,barMaxWidth:we.barMaxWidth,pointSize:we.pointSize,spanNulls:we.spanNulls||!1,show:!we.hideFrom?.viz,gradientMode:we.gradientMode,thresholds:de.thresholds,hardMin:Ce.config.min,hardMax:Ce.config.max,softMin:we.axisSoftMin,softMax:we.axisSoftMax,dataFrameFieldIndex:Ce.state?.origin}),we.thresholdsStyle&&de.thresholds&&(we.thresholdsStyle.mode??v.i3.Off)!==v.i3.Off&&Q.addThresholds({config:we.thresholdsStyle,thresholds:de.thresholds,scaleKey:Je,theme:V,hardMin:Ce.config.min,hardMax:Ce.config.max,softMin:we.axisSoftMin,softMax:we.axisSoftMax})}let re=(0,u.i7)(L);Q.setStackingGroups(re),k?.forEach(ye=>{pe||(pe=R(L,_));let Ce={};for(let de in ye.fieldMap){let we=ye.fieldMap[de];Ce[de]=pe.get(we)}ye.init(Q,Ce)}),Q.scaleKeys=[oe,le];const ie=15;let Se={dataIdx:(ye,Ce,de,we)=>{let _e=ye.data[Ce];if(_e[de]==null){let Je=null,Ue=null,$e;for($e=de;Je==null&&$e-- >0;)_e[$e]!=null&&(Je=$e);for($e=de;Ue==null&&$e++<_e.length;)_e[$e]!=null&&(Ue=$e);let Qe=ye.data[0],tt=ye.valToPos(we,"x"),lt=Ue==null?1/0:ye.valToPos(Qe[Ue],"x"),Me=Je==null?-1/0:ye.valToPos(Qe[Je],"x"),De=tt-Me,We=lt-tt;De<=We?De<=ie&&(de=Je):We<=ie&&(de=Ue)}return de}};if(W&&W()!==f.m.Off){const ye={point:{[oe]:null,[le]:null},data:L},Ce=new b.es(ye);Se.sync={key:H,filters:{pub:(de,we,_e,Je,Ue,$e,Qe)=>W&&W()===f.m.Off?!1:(ye.rowIndex=Qe,_e<0&&Je<0?(ye.point[Z]=null,ye.point[le]=null,B.publish(new b.xH)):(ye.point[Z]=we.posToVal(_e,oe),ye.point[le]=we.posToVal(Je,le),ye.point.panelRelY=Je>0?Je/$e:1,B.publish(Ce),Ce.payload.down=void 0),!0)},scales:[oe,le]}}return Q.setSync(),Q.setCursor(Se),Q};function R(L,V){const w=new Map;return L.fields.forEach((K,B)=>{const W=K.state?.origin;if(W){const _=V[W.frameIndex]?.fields[W.fieldIndex];_&&w.set((0,h.CZ)(_,V[W.frameIndex],V),B)}}),w}const O=["legend","options","theme"];class T extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(V,w,K)=>{const{eventBus:B,eventsScope:W,sync:_}=this.context,{theme:k,timeZone:A,renderers:z,tweakAxis:H,tweakScale:Q}=this.props;return M({frame:V,theme:k,timeZones:Array.isArray(A)?A:[A],getTimeRange:K,eventBus:B,sync:_,allFrames:w,renderers:z,tweakScale:Q,tweakAxis:H,eventsScope:W})},this.renderLegend=V=>{const{legend:w,frames:K}=this.props;return!V||w&&!w.showLegend||!(0,r.o)(V,K)?null:t.createElement(r.l,{data:K,config:V,...w})}}render(){return t.createElement(i.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:O,renderLegend:this.renderLegend})}}T.contextType=s.bb;const U=(0,n.HE)(T);U.displayName="TimeSeries"},16532:(j,I,e)=>{"use strict";e.d(I,{P:()=>o});var t=e(42844),n=e(27702),i=e(66609),s=e(66310),r=e(5723),m=e(67437),d=e(52995);const o=n.memo(({children:a,theme:g="info",placement:c="auto",content:h,title:f,closeButton:b=!0,onClose:v,footer:y,fitContent:E=!1})=>{const C=(0,s.wW)(l),u=C[g],D=(0,n.useRef)(null),[P,S]=n.useState(!1),x=(0,n.useCallback)(()=>{S(!1),v?.()},[v]);(0,n.useEffect)(()=>{if(P){const V=w=>{w.key==="Escape"&&x()};return document.addEventListener("keydown",V),()=>{document.removeEventListener("keydown",V)}}},[P,x]);const{getArrowProps:M,getTooltipProps:R,setTooltipRef:O,setTriggerRef:T,visible:U,update:L}=(0,i.O)({visible:P,placement:c,interactive:!0,offset:[0,8],trigger:"click",onVisibleChange:V=>{S(V),V||v?.()}});return n.createElement(n.Fragment,null,n.cloneElement(a,{ref:T,tabIndex:0}),U&&n.createElement(d.h_,null,n.createElement("div",{"data-testid":"toggletip-content",ref:O,...R({className:(0,t.cx)(u.container,E&&C.fitContent)})},!!f&&n.createElement("div",{className:u.header},f),b&&n.createElement("div",{className:u.headerClose},n.createElement(m.h,{tooltip:"Close",name:"times","data-testid":"toggletip-header-close",onClick:x})),n.createElement("div",{ref:D,...M({className:u.arrow})}),n.createElement("div",{className:u.body},(typeof h=="string"||n.isValidElement(h))&&h,typeof h=="function"&&L&&h({update:L})),!!y&&n.createElement("div",{className:u.footer},y))))});o.displayName="Toggletip";const l=a=>{const g=(0,r.k)(a,a.components.tooltip.background,a.components.tooltip.background,a.components.tooltip.text,{topBottom:3,rightLeft:3}),c=(0,r.k)(a,a.colors.error.main,a.colors.error.main,a.colors.error.contrastText,{topBottom:3,rightLeft:3});return{info:g,error:c,fitContent:(0,t.css)({maxWidth:"fit-content"})}}},30973:(j,I,e)=>{"use strict";e.d(I,{h:()=>a});var t=e(42844),n=e(27702),i=e(8553),s=e(74639),r=e(66310),m=e(97289),d=e(66670),o=e(73453),l=e(80011);const a=(0,n.forwardRef)(({tooltip:f,icon:b,iconSize:v,className:y,children:E,imgSrc:C,imgAlt:u,fullWidth:D,isOpen:P,narrow:S,variant:x="default",iconOnly:M,"aria-label":R,isHighlighted:O,...T},U)=>{const L=(0,r.wW)(h),V=(0,t.cx)({[L.button]:!0,[L.buttonFullWidth]:D,[L.narrow]:S},L[x],y),w=(0,t.cx)({[L.content]:!0,[L.contentWithIcon]:!!b,[L.contentWithRightIcon]:P!==void 0}),K=n.createElement("button",{ref:U,className:V,"aria-label":g(R,f),"aria-expanded":P,...T},c(b,v),C&&n.createElement("img",{className:L.img,src:C,alt:u??""}),E&&!M&&n.createElement("div",{className:w},E),P===!1&&n.createElement(o.J,{name:"angle-down"}),P===!0&&n.createElement(o.J,{name:"angle-up"}),O&&n.createElement("div",{className:L.highlight}));return f?n.createElement(l.u,{content:f,placement:"bottom"},K):K});a.displayName="ToolbarButton";function g(f,b){return f||(b?s.wl.components.PageToolbar.item(b):void 0)}function c(f,b){return f?(0,i.Mo)(f)?n.createElement(o.J,{name:f,size:`${b||"lg"}`}):f:null}const h=f=>{const b=(0,d.c9)(f,"primary","solid"),v=(0,d.c9)(f,"destructive","solid"),y=(0,t.css)({color:f.colors.text.primary,background:f.colors.secondary.main,"&:hover":{color:f.colors.text.primary,background:f.colors.secondary.shade,border:`1px solid ${f.colors.border.medium}`}});return{button:(0,t.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:f.spacing(f.components.height.md),padding:f.spacing(0,1),borderRadius:f.shape.borderRadius(),lineHeight:`${f.components.height.md*f.spacing.gridSize-2}px`,fontWeight:f.typography.fontWeightMedium,border:`1px solid ${f.colors.secondary.border}`,whiteSpace:"nowrap",transition:f.transitions.create(["background","box-shadow","border-color","color"],{duration:f.transitions.duration.short}),"&:focus, &:focus-visible":{...(0,m.getFocusStyles)(f),zIndex:1},"&:focus:not(:focus-visible)":(0,m.getMouseFocusStyles)(f),"&:hover":{boxShadow:f.shadows.z1},"&[disabled], &:disabled":{cursor:"not-allowed",opacity:f.colors.action.disabledOpacity,background:f.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:f.colors.text.disabled,background:f.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,t.css)({color:f.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:f.colors.text.primary,background:f.colors.background.secondary}}),canvas:y,active:(0,t.cx)(y,(0,t.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:f.shape.radius.default,backgroundImage:f.colors.gradients.brandHorizontal}})),primary:(0,t.css)(b),destructive:(0,t.css)(v),narrow:(0,t.css)({padding:f.spacing(0,.5)}),img:(0,t.css)({width:"16px",height:"16px",marginRight:f.spacing(1)}),buttonFullWidth:(0,t.css)({flexGrow:1}),content:(0,t.css)({flexGrow:1}),contentWithIcon:(0,t.css)({display:"none",paddingLeft:f.spacing(1),[`@media ${m.mediaUp(f.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,t.css)({paddingRight:f.spacing(.5)}),highlight:(0,t.css)({backgroundColor:f.colors.success.main,borderRadius:f.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},84693:(j,I,e)=>{"use strict";e.d(I,{R:()=>l});var t=e(42844),n=e(45809),i=e(91546),s=e(6714),r=e(27702),m=e(66310),d=e(52995),o=e(30973);const l=(0,r.forwardRef)(({alignment:g="left",className:c,children:h,...f},b)=>{const v=r.Children.toArray(h).filter(U=>U!=null),[y,E]=(0,r.useState)(Array(v.length).fill(!1)),C=(0,r.useRef)(null),[u,D]=(0,r.useState)(!1),P=(0,r.useRef)(null),S=(0,r.createRef)(),{overlayProps:x}=(0,s.Ir)({onClose:()=>D(!1),isDismissable:!0,isOpen:u,shouldCloseOnInteractOutside:U=>{const L=(0,d.RN)();return!P.current?.contains(U)&&!L.contains(U)}},S),{dialogProps:M}=(0,n.R)({},S),R=(0,m.l4)(),O=g==="left"?y.indexOf(!1)-1:y.length,T=a(R,O,g);return(0,r.useLayoutEffect)(()=>{const U=new IntersectionObserver(L=>{L.forEach(V=>{if(V.target instanceof HTMLElement&&V.target.parentNode){const w=Array.prototype.indexOf.call(V.target.parentNode.children,V.target);E(K=>{const B=[...K];return B[w]=V.isIntersecting,B})}})},{threshold:1,root:C.current});return C.current&&Array.from(C.current.children).forEach(L=>{L instanceof HTMLElement&&L!==P.current&&U.observe(L)}),()=>U.disconnect()},[h]),r.createElement("div",{ref:C,className:(0,t.cx)(T.container,c),...f},v.map((U,L)=>r.createElement("div",{key:L,style:{order:L,visibility:y[L]?"visible":"hidden"},className:T.childWrapper},U)),y.includes(!1)&&r.createElement("div",{ref:P,className:T.overflowButton},r.createElement(o.h,{variant:u?"active":"default",tooltip:"Show more items",onClick:()=>D(!u),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),u&&r.createElement(i.MT,{contain:!0,autoFocus:!0},r.createElement("div",{className:T.overflowItems,ref:S,...x,...M},v.map((U,L)=>!y[L]&&U)))))});l.displayName="ToolbarButtonRow";const a=(g,c,h)=>({overflowButton:(0,t.css)({order:c}),overflowItems:(0,t.css)({alignItems:"center",backgroundColor:g.colors.background.primary,borderRadius:g.shape.borderRadius(),boxShadow:g.shadows.z3,display:"flex",flexWrap:"wrap",gap:g.spacing(1),marginTop:g.spacing(1),maxWidth:"80vw",padding:g.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:g.zIndex.sidemenu}),container:(0,t.css)({alignItems:"center",display:"flex",gap:g.spacing(1),justifyContent:h==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,t.css)({alignItems:"center",display:"flex",gap:g.spacing(1)})})},71235:(j,I,e)=>{"use strict";e.d(I,{J:()=>o});var t=e(27702),n=e(7734),i=e(7965),s=e(39330),r=e(52995);const m={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},d={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class o extends t.PureComponent{render(){const{content:a,show:g,placement:c,className:h,wrapperClassName:f,renderArrow:b,referenceElement:v,...y}=this.props;return t.createElement(n.dK,null,t.createElement(s.ZP,{in:g,timeout:100,mountOnEnter:!0,unmountOnExit:!0},E=>t.createElement(r.h_,null,t.createElement(i.r,{placement:c,referenceElement:v,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:C,style:u,placement:D,arrowProps:P,update:S})=>t.createElement("div",{ref:C,style:{...u,...m,...d[E]},"data-placement":D,className:`${f}`,...y},t.createElement("div",{className:h},typeof a=="string"&&a,t.isValidElement(a)&&t.cloneElement(a),typeof a=="function"&&a({updatePopperPosition:S}),b&&b({arrowProps:P,placement:D})))))))}}},75965:(j,I,e)=>{"use strict";e.d(I,{D:()=>n});var t=e(27702);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:r,placement:m="auto"}=this.props,{show:d}=this.state;return s(this.showPopper,this.hidePopper,{show:d,placement:m,content:r})}}},80011:(j,I,e)=>{"use strict";e.d(I,{u:()=>m});var t=e(27702),n=e(66609),i=e(66310),s=e(5723),r=e(52995);const m=t.forwardRef(({children:o,theme:l,interactive:a,show:g,placement:c,content:h},f)=>{const[b,v]=t.useState(g);(0,t.useEffect)(()=>{if(b!==!1){const R=O=>{O.key==="Escape"&&v(!1)};return document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}}else return},[b]);const{getArrowProps:y,getTooltipProps:E,setTooltipRef:C,setTriggerRef:u,visible:D,update:P}=(0,n.O)({visible:g??b,placement:c,interactive:a,delayHide:a?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:v}),x=(0,i.wW)(d)[l??"info"],M=(0,t.useCallback)(R=>{u(R),typeof f=="function"?f(R):f&&(f.current=R)},[f,u]);return t.createElement(t.Fragment,null,t.cloneElement(o,{ref:M,tabIndex:0}),D&&t.createElement(r.h_,null,t.createElement("div",{ref:C,...E({className:x.container})},t.createElement("div",{...y({className:x.arrow})}),typeof h=="string"&&h,t.isValidElement(h)&&t.cloneElement(h),typeof h=="function"&&P&&h({updatePopperPosition:P}))))});m.displayName="Tooltip";const d=o=>{const l=(0,s.k)(o,o.components.tooltip.background,o.components.tooltip.background,o.components.tooltip.text,{topBottom:.5,rightLeft:1}),a=(0,s.k)(o,o.colors.error.main,o.colors.error.main,o.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:l,["info-alt"]:l,error:a}}},77709:(j,I,e)=>{"use strict";e.d(I,{H:()=>i});var t=e(27702);function n(s,r){const m=[];return s.forEach(d=>{m.push(d.start,d.end+1)}),m[0]!==0&&m.unshift(0),m[m.length-1]!==r&&m.push(r),m}const i=s=>{let{highlightParts:r,text:m,highlightClassName:d}=s;if(!r?.length)return null;let o=[],l=n(r,m.length),a=r[0].start===0;for(let g=1;g<l.length;g++){let c=l[g-1],h=l[g];o.push((0,t.createElement)(a?"mark":"span",{key:g-1,className:a?d:void 0},m.substring(c,h))),a=!a}return t.createElement("div",null,o)}},62916:(j,I,e)=>{"use strict";e.d(I,{n:()=>r});var t=e(27702),n=e(21609),i=e(97560);function s(m){return`Custom unit: ${m}`}class r extends t.PureComponent{constructor(){super(...arguments),this.onChange=d=>{this.props.onChange(d.value)}}render(){const{value:d,width:o}=this.props;let l;const g=(0,n.QW)().map(c=>{const h=c.submenu.map(f=>{const b={label:f.text,value:f.value};return f.value===d&&(l=b),b});return{label:c.text,value:c.text,items:h}});return d&&!l&&(l={value:d,label:d}),t.createElement(i.v,{width:o,initialValue:l&&l.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:g,placeholder:"Choose",onSelect:this.props.onChange})}}},30678:(j,I,e)=>{"use strict";e.d(I,{t:()=>o});var t=e(42844),n=e(27702),i=e(99633),s=e(66310),r=e(80011);const m=g=>{const h=(0,i.CQ)(g).diff((0,i.CQ)(),"hours",!1);return`Active last ${(Math.floor(-h/24)+1)*24}h`},d=g=>{if(!g)return"";const[c,h]=g.split(" ");return`${c?.[0]??""}${h?.[0]??""}`.toUpperCase()},o=({userView:g,className:c,children:h,onClick:f,showTooltip:b=!0})=>{const{user:v,lastActiveAt:y}=g,E=(0,i.CQ)(y).diff((0,i.CQ)(),"minutes",!0)>=-15,C=(0,s.l4)(),u=(0,n.useMemo)(()=>a(C,E),[C,E]),D=n.createElement("button",{type:"button",onClick:f,className:(0,t.cx)(u.container,f&&u.pointer,c),"aria-label":`${v.name} icon`},h?n.createElement("div",{className:(0,t.cx)(u.content,u.textContent)},h):v.avatarUrl?n.createElement("img",{className:u.content,src:v.avatarUrl,alt:`${v.name} avatar`}):n.createElement("div",{className:(0,t.cx)(u.content,u.textContent)},d(v.name)));if(b){const P=n.createElement("div",{className:u.tooltipContainer},n.createElement("div",{className:u.tooltipName},v.name),n.createElement("div",{className:u.tooltipDate},E?n.createElement("div",{className:u.dotContainer},n.createElement("span",null,"Active last 15m"),n.createElement("span",{className:u.dot})):m(y)));return n.createElement(r.u,{content:P},D)}else return D},l=g=>`0 0 0 1px ${g}`,a=(g,c)=>{const h=c?g.colors.primary.main:g.colors.border.medium,f=c?g.colors.primary.text:g.colors.border.strong;return{container:(0,t.css)({padding:0,width:"30px",height:"30px",background:"none",border:"none",borderRadius:g.shape.radius.circle,"& > *":{borderRadius:g.shape.radius.circle}}),content:(0,t.css)({lineHeight:"24px",maxWidth:"100%",border:`3px ${g.colors.background.primary} solid`,boxShadow:l(h),backgroundClip:"padding-box","&:hover":{boxShadow:l(f)}}),textContent:(0,t.css)({background:g.colors.background.primary,padding:0,color:g.colors.text.secondary,textAlign:"center",fontSize:g.typography.size.sm,"&:focus":{boxShadow:l(h)}}),tooltipContainer:(0,t.css)({textAlign:"center",padding:g.spacing(0,1)}),tooltipName:(0,t.css)({fontWeight:g.typography.fontWeightBold}),tooltipDate:(0,t.css)({fontWeight:g.typography.fontWeightRegular}),dotContainer:(0,t.css)({display:"flex",alignItems:"center"}),dot:(0,t.css)({height:"6px",width:"6px",backgroundColor:g.colors.primary.main,borderRadius:g.shape.radius.circle,display:"inline-block",marginLeft:g.spacing(1)}),pointer:(0,t.css)({cursor:"pointer"})}}},73990:(j,I,e)=>{"use strict";e.d(I,{b:()=>m});var t=e(27702),n=e(74639),i=e(66310),s=e(66670),r=e(28580);function m({"aria-label":d,label:o,icon:l,options:a,onChange:g,variant:c,minWidth:h=16,size:f="sm",isFullWidth:b=!0,menuPlacement:v,fill:y,buttonCss:E}){const[C,u]=(0,t.useState)(!1),D=(0,i.l4)();return t.createElement(t.Fragment,null,!C&&t.createElement(s.zx,{size:f||"sm",className:E,icon:l||"plus",onClick:()=>u(!0),variant:c,fill:y,fullWidth:b,"aria-label":n.wl.components.ValuePicker.button(d??o)},o),C&&t.createElement("span",{style:{minWidth:D.spacing(h),flexGrow:b?1:void 0}},t.createElement(r.Ph,{placeholder:o,options:a,"aria-label":n.wl.components.ValuePicker.select(d??o),isOpen:!0,onCloseMenu:()=>u(!1),autoFocus:!0,onChange:P=>{u(!1),g(P)},menuPlacement:v})))}},34072:(j,I,e)=>{"use strict";e.d(I,{AY:()=>d});var t=e(42844),n=e(27702),i=e(96284),s=e(66310),r=e(97289),m=e(29372);const d=({width:a,height:g,legend:c,children:h})=>{const f=(0,s.l4)(),b=(0,s.wW)(o),v={display:"flex",width:`${a}px`,height:`${g}px`},[y,E]=(0,i.Z)();if(!c)return n.createElement(n.Fragment,null,n.createElement("div",{style:v,className:b.viz},h(a,g)));let{placement:C,maxHeight:u="35%",maxWidth:D="60%"}=c.props;document.body.clientWidth<f.breakpoints.values.lg&&(C="bottom");let P=null;const S={};switch(C){case"bottom":v.flexDirection="column",S.maxHeight=u,E.height&&(P={width:a,height:g-E.height});break;case"right":v.flexDirection="row",S.maxWidth=D,E.width&&(P={width:a-E.width,height:g}),c.props.width&&(S.width=c.props.width,P={width:a-c.props.width,height:g});break}return P?.width===0&&(P.width=a),P?.height===0&&(P.height=g),n.createElement("div",{style:v},n.createElement("div",{className:b.viz},P&&h(P.width,P.height)),n.createElement("div",{style:S,ref:y},n.createElement(m.$,{hideHorizontalTrack:!0},c)))},o=a=>({viz:(0,t.css)({flexGrow:2,borderRadius:a.shape.borderRadius(1),"&:focus-visible":(0,r.getFocusStyles)(a)})}),l=({children:a})=>n.createElement(n.Fragment,null,a);d.Legend=l},31297:(j,I,e)=>{"use strict";e.d(I,{F:()=>r});var t=e(42844),n=e(27702),i=e(58192),s=e(66310);const r=n.memo(n.forwardRef(({color:d,className:o,gradient:l,...a},g)=>{const c=(0,s.l4)(),h=(0,s.wW)(m);let f;if(l){const v=i.WO.get(l).getColors?.(c);v?.length?f=`linear-gradient(90deg, ${v.join(", ")})`:f=c.visualization.getColorByName("")}else f=d;const b={background:f,width:"14px",height:"4px",borderRadius:c.shape.radius.pill,display:"inline-block",marginRight:"8px"};return n.createElement("div",{"data-testid":"series-icon",ref:g,className:(0,t.cx)(o,h.forcedColors),style:b,...a})})),m=()=>({forcedColors:(0,t.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});r.displayName="SeriesIcon"},71982:(j,I,e)=>{"use strict";e.d(I,{l:()=>x});var t=e(27702),n=e(84714),i=e(64167),s=e(70823),r=e(76761),m=e(42844),d=e(66310),o=e(71573),l=e(59390),a=e(11141);const g=({items:M,itemRenderer:R,onLabelMouseOver:O,onLabelMouseOut:T,onLabelClick:U,placement:L,className:V,readonly:w})=>{const K=(0,d.wW)(c);R||(R=W=>t.createElement(a.e,{item:W,onLabelClick:U,onLabelMouseOver:O,onLabelMouseOut:T,readonly:w}));const B=W=>`${W.getItemKey?W.getItemKey():W.label}`;switch(L){case"right":{const W=(_,k)=>t.createElement("span",{className:K.itemRight},R(_,k));return t.createElement("div",{className:(0,m.cx)(K.rightWrapper,V)},t.createElement(l.a,{items:M,renderItem:W,getItemKey:B}))}case"bottom":default:{const W=(_,k)=>t.createElement("span",{className:K.itemBottom},R(_,k));return t.createElement("div",{className:(0,m.cx)(K.bottomWrapper,V)},t.createElement("div",{className:K.section},t.createElement(o.Y,{items:M.filter(_=>_.yAxis===1),renderItem:W,getItemKey:B})),t.createElement("div",{className:(0,m.cx)(K.section,K.sectionRight)},t.createElement(o.Y,{items:M.filter(_=>_.yAxis!==1),renderItem:W,getItemKey:B})))}}};g.displayName="VizLegendList";const c=M=>{const R=(0,m.css)({paddingRight:"10px",display:"flex",fontSize:M.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:R,itemRight:(0,m.cx)(R,(0,m.css)({marginBottom:M.spacing(.5)})),rightWrapper:(0,m.css)({paddingLeft:M.spacing(.5)}),bottomWrapper:(0,m.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",paddingLeft:M.spacing(.5)}),section:(0,m.css)({display:"flex"}),sectionRight:(0,m.css)({justifyContent:"flex-end",flexGrow:1})}};var h=e(89949),f=e(73453),b=e(21609),v=e(97289),y=e(60500);const E=({item:M,onLabelClick:R,onLabelMouseOver:O,onLabelMouseOut:T,className:U,readonly:L})=>{const V=(0,d.wW)(C),w=(0,t.useCallback)(W=>{O&&O(M,W)},[M,O]),K=(0,t.useCallback)(W=>{T&&T(M,W)},[M,T]),B=(0,t.useCallback)(W=>{R&&R(M,W)},[M,R]);return t.createElement("tr",{className:(0,m.cx)(V.row,U)},t.createElement("td",null,t.createElement("span",{className:V.itemWrapper},t.createElement(y.i,{color:M.color,seriesName:M.label,readonly:L}),t.createElement("button",{disabled:L,type:"button",title:M.label,onBlur:K,onFocus:w,onMouseOver:w,onMouseOut:K,onClick:L?void 0:B,className:(0,m.cx)(V.label,M.disabled&&V.labelDisabled)},M.label," ",M.yAxis===2&&t.createElement("span",{className:V.yAxisLabel},"(right y-axis)")))),M.getDisplayValues&&M.getDisplayValues().map((W,_)=>t.createElement("td",{className:V.value,key:`${W.title}-${_}`},(0,b.zc)(W))))};E.displayName="LegendTableItem";const C=M=>{const R=v.hoverColor(M.colors.background.primary,M);return{row:(0,m.css)({label:"LegendRow",fontSize:M.v1.typography.size.sm,borderBottom:`1px solid ${M.colors.border.weak}`,td:{padding:M.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:R}}),label:(0,m.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden"}),labelDisabled:(0,m.css)({label:"LegendLabelDisabled",color:M.colors.text.disabled}),itemWrapper:(0,m.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,m.css)({textAlign:"right"}),yAxisLabel:(0,m.css)({color:M.colors.text.secondary})}},u=({items:M,sortBy:R,sortDesc:O,itemRenderer:T,className:U,onToggleSort:L,onLabelClick:V,onLabelMouseOver:w,onLabelMouseOut:K,readonly:B,isSortable:W})=>{const _=(0,d.wW)(D),k={},A="Name";W&&(k[A]={description:"name",numeric:0,text:""});for(const H of M)if(H.getDisplayValues)for(const Q of H.getDisplayValues())k[Q.title??"?"]=Q;const z=R?(0,h.orderBy)(M,H=>{if(R===A)return H.label;if(H.getDisplayValues){const Q=H.getDisplayValues().filter(X=>X.title===R)[0];return Q&&Q.numeric}},O?"desc":"asc"):M;return T||(T=(H,Q)=>t.createElement(E,{key:`${H.label}-${Q}`,item:H,onLabelClick:V,onLabelMouseOver:w,onLabelMouseOut:K,readonly:B})),t.createElement("table",{className:(0,m.cx)(_.table,U)},t.createElement("thead",null,t.createElement("tr",null,!W&&t.createElement("th",null),Object.keys(k).map(H=>{const Q=k[H];return t.createElement("th",{title:Q.description,key:H,className:(0,m.cx)(_.header,L&&_.headerSortable,W&&_.nameHeader,{[_.withIcon]:R===H}),onClick:()=>{L&&L(H)}},H,R===H&&t.createElement(f.J,{size:"xs",name:O?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,z.map(T)))},D=M=>({table:(0,m.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${M.colors.border.weak}`}}),header:(0,m.css)({color:M.colors.primary.text,fontWeight:M.typography.fontWeightMedium,borderBottom:`1px solid ${M.colors.border.weak}`,padding:M.spacing(.25,1,.25,1),fontSize:M.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,m.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,m.css)({paddingRight:"4px"}),headerSortable:(0,m.css)({cursor:"pointer"})});var P=e(43765);function S(M){return M.ctrlKey||M.metaKey||M.shiftKey?r.R.AppendToSelection:r.R.ToggleSelection}function x({items:M,displayMode:R,sortBy:O,seriesVisibilityChangeBehavior:T=P.Y.Isolate,sortDesc:U,onLabelClick:L,onToggleSort:V,placement:w,className:K,itemRenderer:B,readonly:W,isSortable:_}){const{eventBus:k,onToggleSeriesVisibility:A,onToggleLegendSort:z}=(0,s.R9)(),H=(0,t.useCallback)((te,oe)=>{k?.publish({type:n.es.type,payload:{raw:oe,x:0,y:0,dataId:te.label}})},[k]),Q=(0,t.useCallback)((te,oe)=>{k?.publish({type:n.xH.type,payload:{raw:oe,x:0,y:0,dataId:te.label}})},[k]),X=(0,t.useCallback)((te,oe)=>{L&&L(te,oe),A&&A(te.label,T===P.Y.Hide?r.R.AppendToSelection:S(oe))},[A,L,T]);switch(R){case i.jK.Table:return t.createElement(u,{className:K,items:M,placement:w,sortBy:O,sortDesc:U,onLabelClick:X,onToggleSort:V||z,onLabelMouseOver:H,onLabelMouseOut:Q,itemRenderer:B,readonly:W,isSortable:_});case i.jK.List:return t.createElement(g,{className:K,items:M,placement:w,onLabelMouseOver:H,onLabelMouseOut:Q,onLabelClick:X,itemRenderer:B,readonly:W});default:return null}}x.displayName="VizLegend"},11141:(j,I,e)=>{"use strict";e.d(I,{e:()=>g});var t=e(42844),n=e(27702),i=e(74639),s=e(66310),r=e(60500),m=e(89949),d=e(21609),o=e(71573);const l=({stats:h})=>{const f=(0,s.wW)(a);return h.length===0?null:n.createElement(o.Y,{className:f.list,items:h,renderItem:b=>n.createElement("div",{className:f.item,title:b.description},b.title&&`${(0,m.capitalize)(b.title)}:`," ",(0,d.zc)(b))})},a=()=>({list:(0,t.css)({flexGrow:1,textAlign:"right"}),item:(0,t.css)({marginLeft:"8px"})});l.displayName="VizLegendStatsList";const g=({item:h,onLabelClick:f,onLabelMouseOver:b,onLabelMouseOut:v,className:y,readonly:E})=>{const C=(0,s.wW)(c),u=(0,n.useCallback)(S=>{b&&b(h,S)},[h,b]),D=(0,n.useCallback)(S=>{v&&v(h,S)},[h,v]),P=(0,n.useCallback)(S=>{f&&f(h,S)},[h,f]);return n.createElement("div",{className:(0,t.cx)(C.itemWrapper,h.disabled&&C.itemDisabled,y),"aria-label":i.wl.components.VizLegend.seriesName(h.label)},n.createElement(r.i,{seriesName:h.label,color:h.color,gradient:h.gradient,readonly:E}),n.createElement("button",{disabled:E,type:"button",title:h.label,onBlur:D,onFocus:u,onMouseOver:u,onMouseOut:D,onClick:P,className:C.label},h.label),h.getDisplayValues&&n.createElement(l,{stats:h.getDisplayValues()}))};g.displayName="VizLegendListItem";const c=h=>({label:(0,t.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text",maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden"}),itemDisabled:(0,t.css)({label:"LegendLabelDisabled",color:h.colors.text.disabled}),itemWrapper:(0,t.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,t.css)({textAlign:"right"}),yAxisLabel:(0,t.css)({color:h.v1.palette.gray2})})},60500:(j,I,e)=>{"use strict";e.d(I,{i:()=>r});var t=e(27702),n=e(56025),i=e(70823),s=e(31297);const r=t.memo(({seriesName:m,color:d,gradient:o,readonly:l})=>{const{onSeriesColorChange:a}=(0,i.R9)(),g=(0,t.useCallback)(c=>a(m,c),[m,a]);return m&&a&&d&&!l?t.createElement(n.sp,{color:d,onChange:g,enableNamedColors:!0},({ref:c,showColorPicker:h,hideColorPicker:f})=>t.createElement(s.F,{color:d,className:"pointer",ref:c,onClick:h,onMouseLeave:f})):t.createElement(s.F,{color:d,gradient:o})});r.displayName="VizLegendSeriesIcon"},43765:(j,I,e)=>{"use strict";e.d(I,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},44201:(j,I,e)=>{"use strict";e.d(I,{Q:()=>r});var t=e(27702),n=e(90482);const i=(d,o,l,a)=>{const g=s(d,o,a),c=s(o,d,a),h=Math.max(g,c);let f=Math.floor(d/h),b=Math.ceil(a/f);f=Math.ceil(a/b);const v=f-(f*b-a),y=d/v-l+l/v;return{width:d/f-l+l/f,height:o/b-l+l/b,widthOnLastRow:y,xCount:f,yCount:b}};function s(d,o,l){const a=Math.ceil(Math.sqrt(l*d/o));return Math.floor(a*o/d)*a<l?o/Math.ceil(a*o/d):d/a}class r extends t.PureComponent{constructor(o){super(o),this.state={values:o.getValues()}}componentDidUpdate(o){const{renderCounter:l,source:a}=this.props;(l!==o.renderCounter||a!==o.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:o,width:l,height:a}=this.props;return o===n.wm.Auto?l>a?n.wm.Vertical:n.wm.Horizontal:o}renderGrid(){const{renderValue:o,height:l,width:a,itemSpacing:g,getAlignmentFactors:c,orientation:h}=this.props,{values:f}=this.state,b=i(a,l,g,f.length),v=c?c(f,b.width,b.height):{};let y=0,E=0,C=[];for(let u=0;u<f.length;u++){const D=f[u],S=E===b.yCount-1?b.widthOnLastRow:b.width,x=b.height,M=y*S+g*y,R=E*x+g*E,O={position:"absolute",left:M,top:R,width:`${S}px`,height:`${x}px`};C.push(t.createElement("div",{key:u,style:O},o({value:D,width:S,height:x,alignmentFactors:v,orientation:h,count:f.length}))),y++,y===b.xCount&&(y=0,E++)}return t.createElement("div",{style:{position:"relative"}},C)}render(){const{renderValue:o,height:l,width:a,itemSpacing:g,getAlignmentFactors:c,autoGrid:h,orientation:f,minVizWidth:b,minVizHeight:v}=this.props,{values:y}=this.state;if(h&&f===n.wm.Auto)return this.renderGrid();const E={display:"flex"},C={display:"flex",overflow:`${b?"auto":"hidden"} ${v?"auto":"hidden"}`};let u=l,D=a,P=this.getOrientation();switch(P){case n.wm.Horizontal:C.flexDirection="column",C.height=`${l}px`,E.marginBottom=`${g}px`,D=a,u=Math.max(l/y.length-g+g/y.length,v??0);break;case n.wm.Vertical:C.flexDirection="row",C.justifyContent="space-between",E.marginRight=`${g}px`,u=l,D=Math.max(a/y.length-g+g/y.length,b??0)}E.width=`${D}px`,E.height=`${u}px`;const S=c?c(y,D,u):{};return t.createElement("div",{style:C},y.map((x,M)=>t.createElement("div",{key:M,style:m(E,M,y.length)},o({value:x,width:D,height:u,alignmentFactors:S,orientation:P,count:y.length}))))}}r.defaultProps={itemSpacing:8};function m(d,o,l){return o===l-1?{...d,marginRight:0,marginBottom:0}:d}},73014:(j,I,e)=>{"use strict";e.d(I,{V:()=>m,c:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(31297);const r=o=>({icon:(0,t.css)({marginRight:o.spacing(1),verticalAlign:"middle"}),seriesTable:(0,t.css)({display:"table"}),seriesTableRow:(0,t.css)({display:"table-row",fontSize:o.typography.bodySmall.fontSize}),seriesTableCell:(0,t.css)({display:"table-cell"}),label:(0,t.css)({wordBreak:"break-all"}),value:(0,t.css)({paddingLeft:o.spacing(2),textAlign:"right"}),activeSeries:(0,t.css)({fontWeight:o.typography.fontWeightBold,color:o.colors.text.maxContrast}),timestamp:(0,t.css)({fontWeight:o.typography.fontWeightBold,fontSize:o.typography.bodySmall.fontSize})}),m=({color:o,label:l,value:a,isActive:g})=>{const c=(0,i.wW)(r);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(c.seriesTableRow,g&&c.activeSeries)},o&&n.createElement("div",{className:c.seriesTableCell},n.createElement(s.F,{color:o,className:c.icon})),l&&n.createElement("div",{className:(0,t.cx)(c.seriesTableCell,c.label)},l),a&&n.createElement("div",{className:(0,t.cx)(c.seriesTableCell,c.value)},a))},d=({timestamp:o,series:l})=>{const a=(0,i.wW)(r);return n.createElement(n.Fragment,null,o&&n.createElement("div",{className:a.timestamp,"aria-label":"Timestamp"},o),l.map((g,c)=>n.createElement(m,{isActive:g.isActive,label:g.label,color:g.color,value:g.value,key:`${g.label}-${c}`})))}},727:(j,I,e)=>{"use strict";e.d(I,{I:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(52995),r=e(97695);const m=({content:o,position:l,offset:a})=>{const g=(0,i.wW)(d);return l?n.createElement(s.h_,{className:g.portal},n.createElement(r.S,{position:l,offset:a||{x:0,y:0}},o)):null};m.displayName="VizTooltip";const d=()=>({portal:(0,t.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})})},97695:(j,I,e)=>{"use strict";e.d(I,{S:()=>d});var t=e(42844),n=e(27702),i=e(46917),s=e(66310),r=e(97289);const m=(l=0,a=0,g=0,c=0,h=0,f=0,b=0,v=0)=>{let y=l,E=a;const C=Math.max(l+h+g-(b-h),0),u=Math.abs(Math.min(l-h-g-h,0)),D=C>0,P=u>0,S=Math.max(a+f+c-(v-f),0),x=Math.abs(Math.min(a-f-c-f,0)),M=S>0,R=x>0;return D&&P?y=C>u?h:b-h-g:D?y=l-h-g:y=l+h,M&&R?E=S>x?f:v-f-c:M?E=a-f-c:E=a+f,{x:y,y:E}},d=({position:{x:l,y:a},offset:{x:g,y:c},children:h,allowPointerEvents:f=!1,className:b,...v})=>{const y=(0,n.useRef)(null),[E,C]=(0,n.useState)({width:0,height:0}),{width:u,height:D}=(0,i.Z)(),[P,S]=(0,n.useState)({x:l+g,y:a+c}),x=(0,n.useMemo)(()=>new ResizeObserver(R=>{for(let O of R){const T=Math.floor(O.contentRect.width+16),U=Math.floor(O.contentRect.height+2*8);(E.width!==T||E.height!==U)&&C({width:Math.min(T,u),height:Math.min(U,D)})}}),[E,u,D]);(0,n.useLayoutEffect)(()=>(y.current&&x.observe(y.current),()=>{x.disconnect()}),[x]),(0,n.useLayoutEffect)(()=>{if(y&&y.current){const{x:R,y:O}=m(l,a,E.width,E.height,g,c,u,D);S({x:R,y:O})}},[u,D,l,g,a,c,E]);const M=(0,s.wW)(o);return n.createElement("div",{ref:y,style:{position:"fixed",left:0,pointerEvents:f?"auto":"none",top:0,transform:`translate(${P.x}px, ${P.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...v,className:(0,t.cx)(M.wrapper,b)},h)};d.displayName="VizTooltipContainer";const o=l=>({wrapper:(0,t.css)((0,r.getTooltipContainerStyles)(l))})},82367:(j,I,e)=>{"use strict";e.r(I),e.d(I,{Alert:()=>Ne.b,AlertingSettings:()=>mt.O,AsyncMultiSelect:()=>Mn.M8,AsyncSelect:()=>Mn.qb,AsyncVirtualizedSelect:()=>Mn.gY,AutoSaveField:()=>te.h,AutoSizeInput:()=>$s.H,Badge:()=>Ia.C,BarGauge:()=>ft.xf,BarGaugeDisplayMode:()=>ws.QH,BigValue:()=>st.w6,BigValueColorMode:()=>st.pc,BigValueGraphMode:()=>st.IG,BigValueJustifyMode:()=>st.ap,BigValueTextMode:()=>st.jG,BrowserLabel:()=>xt._,Button:()=>ka.zx,ButtonCascader:()=>D.O,ButtonGroup:()=>ma.h,ButtonSelect:()=>qs.d,CallToActionCard:()=>ut._,Card:()=>ds.Z,CardContainer:()=>cn._,Cascader:()=>u.v,CertificationKey:()=>pt.W,Checkbox:()=>ua.X,ClickOutsideWrapper:()=>nt.L,ClipboardButton:()=>C.m,CodeEditor:()=>pe.p,CodeEditorSuggestionItemKind:()=>ie.k,CollapsableSection:()=>ze.s,Collapse:()=>ve.U,ColorPicker:()=>M.zH,ColorPickerInput:()=>R.T,ConfirmButton:()=>a.p,ConfirmModal:()=>q.s,Container:()=>La.W2,ContextMenu:()=>ht.x,ControlledCollapse:()=>ve.y,Counter:()=>We.A,CustomHeadersSettings:()=>St.H,CustomScrollbar:()=>y.$,DataLinkButton:()=>Oe.k,DataLinkInput:()=>Cn.v,DataLinksContextMenu:()=>pn.V,DataLinksInlineEditor:()=>Sn.d,DataSourceHttpSettings:()=>sn.E,DatePicker:()=>k.M,DatePickerWithInput:()=>A.d,DateTimePicker:()=>z.x,DeleteButton:()=>g.m,Divider:()=>Qs.i,Drawer:()=>la.d,Dropdown:()=>Dr.L,DropdownIndicator:()=>Hn.m,EmptySearchResult:()=>T.K,ErrorBoundary:()=>Gt.SV,ErrorBoundaryAlert:()=>Gt.z4,ErrorWithStack:()=>jt.X,EventsCanvas:()=>on.TZ,FIXED_UNIT:()=>Dn.j,FadeTransition:()=>Qt.n,FeatureBadge:()=>bt.a,FeatureInfoBox:()=>bt.Z,Field:()=>$n.g,FieldArray:()=>Kt.F,FieldLinkList:()=>Fe.Z,FieldSet:()=>Fn.C,FieldValidationMessage:()=>Da.S,FileDropzone:()=>Ya.Yo,FileDropzoneDefaultChildren:()=>Ya.A_,FileListItem:()=>Ya.K$,FileUpload:()=>Pa.p,FilterInput:()=>zs.H,FilterPill:()=>ce.B,Form:()=>ga.l,FormattedValueDisplay:()=>os.W,FullWidthButtonContainer:()=>Ge.f,Gauge:()=>Tt.a,Graph:()=>Nt.k,GraphContextMenu:()=>yt.w,GraphContextMenuHeader:()=>yt.b,GraphNG:()=>Dn.d,GraphSeriesToggler:()=>fe.U,GraphWithLegend:()=>Bt.U,HorizontalGroup:()=>La.Lh,Icon:()=>o.J,IconButton:()=>l.h,InfoBox:()=>Ct.v,InlineField:()=>Ta._,InlineFieldRow:()=>Yt.Z,InlineFormLabel:()=>As.c,InlineLabel:()=>Sa.W,InlineSegmentGroup:()=>ca.m,InlineSwitch:()=>ys.x,InlineToast:()=>P.K,Input:()=>hs.I,InputControl:()=>Ha.g,InteractiveTable:()=>Q.e,JSONFormatter:()=>Ut.g,JsonExplorer:()=>_t.u,KeyboardPlugin:()=>Xt.Cm,Label:()=>Un._,LegacyForms:()=>Fa,LegacyInputStatus:()=>n.G,Legend:()=>kn.D,Link:()=>Pn.r,LinkButton:()=>ka.Qj,List:()=>H.a,LoadingBar:()=>x.F,LoadingPlaceholder:()=>S.u,Marker:()=>on.Jx,Menu:()=>wt.v,MenuGroup:()=>mn.k,MenuItem:()=>vn.s,Modal:()=>ye.u,ModalHeader:()=>Ce.x,ModalRoot:()=>_e.Y0,ModalTabContent:()=>we.Q,ModalTabsHeader:()=>de.H,ModalsContext:()=>_e.kr,ModalsController:()=>_e.JY,ModalsProvider:()=>_e.$i,MultiSelect:()=>Mn.NU,PageToolbar:()=>Je.X,Pagination:()=>oe.t,PanelChrome:()=>He.fm,PanelChromeErrorIndicator:()=>Ie.g,PanelChromeLoadingIndicator:()=>Pe.T,PanelContainer:()=>Nn.l,PanelContextProvider:()=>Te._w,PanelContextRoot:()=>Te.bb,PlotLegend:()=>Ot.l,PluginSignatureBadge:()=>dr.o,Popover:()=>f.J,PopoverController:()=>h.D,Portal:()=>v.h_,PortalContainer:()=>v.lO,QueryField:()=>ne.q,RadioButtonGroup:()=>Ka.S,RadioButtonList:()=>qa.x,RangeSlider:()=>ba.U,ReactMonacoEditor:()=>re.o,RefreshPicker:()=>V.dP,RelativeTimeRangePicker:()=>Us.x,RenderUserContentAsHTML:()=>qe.D,ScaleDistribution:()=>ws.wf,SecretInput:()=>Ns.m,SecretTextArea:()=>Xs.Z,SecureSocksProxySettings:()=>kt.i,Segment:()=>un.X,SegmentAsync:()=>xn.V,SegmentInput:()=>Kn.X,SegmentSection:()=>Ma.f,SegmentSelect:()=>_n.V,Select:()=>Mn.Ph,SelectContainer:()=>Mn.eI,SeriesColorPicker:()=>M.sp,SeriesColorPickerPopover:()=>O.j,SeriesColorPickerPopoverWithTheme:()=>O.q,SeriesIcon:()=>nn.F,SeriesTable:()=>Be.c,SeriesTableRow:()=>Be.V,SeriesVisibilityChangeBehavior:()=>ue.Y,SeriesVisibilityChangeMode:()=>Tn.R,SetInterval:()=>Ue.F,SlideOutTransition:()=>rn.R,Slider:()=>aa.i,Sparkline:()=>dt.b,Spinner:()=>It.$,StatsPicker:()=>L.m,Switch:()=>ys.r,TLSAuthSettings:()=>it.s,Tab:()=>lt.O,TabContent:()=>De.I,TabbedContainer:()=>E.W,Table:()=>$e.i,TableInputCSV:()=>Qe.w,TabsBar:()=>tt.J,Tag:()=>Z.V,TagList:()=>le.P,TagsInput:()=>X.B,TextArea:()=>ja.K,TextLink:()=>tn.h,TimeOfDayPicker:()=>B.y,TimePickerTooltip:()=>w.IF,TimeRangeInput:()=>_s.K,TimeRangeLabel:()=>K.q,TimeRangePicker:()=>w.Xc,TimeSeries:()=>wn.p,TimeZonePicker:()=>W.O,Toggletip:()=>b.P,ToolbarButton:()=>At.h,ToolbarButtonRow:()=>Rt.R,Tooltip:()=>c.u,TooltipPlugin:()=>Xt.ii,UPLOT_AXIS_FONT_SIZE:()=>Sr.gD,UPlotChart:()=>Lt.N,UPlotConfigBuilder:()=>ps.U,UnitPicker:()=>U.n,UserIcon:()=>Fr.t,ValuePicker:()=>Mt.b,VerticalGroup:()=>La.wc,VerticalTab:()=>Me.L,VirtualizedSelect:()=>Mn.LT,VizLayout:()=>Re.AY,VizLegend:()=>xe.l,VizLegendListItem:()=>Ve.e,VizRepeater:()=>Le.Q,VizTooltip:()=>ct.I,VizTooltipContainer:()=>ge.S,WeekStartPicker:()=>_.z,WithContextMenu:()=>gn.z,XYCanvas:()=>on.K2,ZoomPlugin:()=>Xt.Rb,buildScaleKey:()=>Gn.z1,clearButtonStyles:()=>ka.gN,convertOldAngularValueMapping:()=>Xe.PR,defaultIntervals:()=>V.o5,fieldMatchersUI:()=>$t.i,getCardStyles:()=>ds.L,getInputStyles:()=>hs.H,getPortalContainer:()=>v.RN,getSelectStyles:()=>Jn.D,graphFieldOptions:()=>Ls.q,graphTickFormatter:()=>he.sV,graphTimeFormat:()=>he.mc,preparePlotFrame:()=>Gn.Rn,resetSelectStyles:()=>hn.Z,sharedInputStyle:()=>Ca.RK,sharedSingleStatMigrationHandler:()=>Xe.rD,sharedSingleStatPanelChangedHandler:()=>Xe.ZH,useGraphNGContext:()=>Bn.z,usePanelContext:()=>Te.R9,variableSuggestionToCodeEditorSuggestion:()=>Se.T,withErrorBoundary:()=>Gt.Pf});var t=e(14496),n=e(83670),i=e(39520),s=e(33261),r=e(49918),m=e(17752),d=e(88885),o=e(73453),l=e(67437),a=e(55205),g=e(15202),c=e(80011),h=e(75965),f=e(71235),b=e(16532),v=e(52995),y=e(29372),E=e(84279),C=e(71585),u=e(97560),D=e(58964),P=e(28676),S=e(52419),x=e(98557),M=e(56025),R=e(56887),O=e(74011),T=e(10701),U=e(62916),L=e(10133),V=e(26862),w=e(37424),K=e(49430),B=e(19820),W=e(15672),_=e(63014),k=e(76911),A=e(37691),z=e(48419),H=e(59390),Q=e(39695),X=e(72699),te=e(32170),oe=e(50852),Z=e(65333),le=e(86004),ce=e(81520),q=e(3613),ne=e(9857),pe=e(11649),re=e(15939),ie=e(94661),Se=e(16640),ye=e(13741),Ce=e(22106),de=e(64472),we=e(64067),_e=e(60729),Je=e(58456),Ue=e(7179),$e=e(95066),Qe=e(7704),tt=e(15372),lt=e(54281),Me=e(49050),De=e(4432),We=e(77122),qe=e(20540),st=e(50323),dt=e(61398),Tt=e(59870),Nt=e(41115),Bt=e(21783),yt=e(36149),ft=e(24919),ct=e(727),ge=e(97695),Be=e(73014),Le=e(44201),he=e(84143),He=e(92056),Pe=e(44790),Ie=e(1573),Te=e(70823),Re=e(34072),ue=e(43765),xe=e(71982),Ve=e(11141),Ne=e(63439),fe=e(7241),ve=e(41640),ze=e(62499),Oe=e(73e3),Fe=e(90282),Ge=e(77075),nt=e(8430),Xe=e(97583),ut=e(60801),ht=e(14986),wt=e(89746),mn=e(66711),vn=e(79655),gn=e(78383),Sn=e(36537),Cn=e(22965),pn=e(50741),nn=e(31297),Ct=e(86064),bt=e(96198),Ut=e(78838),_t=e(17185),Gt=e(37647),jt=e(13431),sn=e(49257),St=e(93741),mt=e(80143),kt=e(79510),it=e(86509),pt=e(43516),It=e(62108),Qt=e(54004),rn=e(12806),un=e(95578),xn=e(92472),Kn=e(45066),_n=e(61896),Ma=e(44541),la=e(14574),aa=e(39540),ba=e(37983),ga=e(23839),Ca=e(26468),Ha=e(16310),ka=e(66670),ma=e(77720),At=e(30973),Rt=e(84693),Mt=e(73990),$t=e(78425),Pn=e(9848),tn=e(90038),Un=e(79978),$n=e(22209),kn=e(12375),Fn=e(5229),Da=e(59904),Ta=e(48024),ca=e(88413),Sa=e(53901),Yt=e(71107),Kt=e(56948),hn=e(69213),Mn=e(28580),Hn=e(65449),Jn=e(73578),Qn=e(49030),va=e.n(Qn),Ga={};for(const us in Qn)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Toggletip","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeRangeLabel","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","AutoSaveField","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelChromeErrorIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","TextLink","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","UserIcon","InlineFormLabel","Divider","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(us)<0&&(Ga[us]=()=>Qn[us]);e.d(I,Ga);var La=e(64022),Ia=e(25357),Ka=e(40705),qa=e(20839),hs=e(1128),$s=e(31465),zs=e(33716),Ns=e(68227),Xs=e(86370),ys=e(42074),ua=e(83967),ja=e(60105),Pa=e(2576),Ya=e(63844),_s=e(95059),Us=e(2184),ds=e(50230),cn=e(90527),os=e(70944),qs=e(70725),Dr=e(80434),dr=e(97918),Fr=e(30678),As=e(60644),Qs=e(238),Ls=e(55219),ws=e(64167),ps=e(19345),Sr=e(59685),Lt=e(81144),Ot=e(30797),on=e(17270),Xt=e(42059),Dn=e(18869),wn=e(25181),Bn=e(62514),Gn=e(90537),Tn=e(76761),xt=e(36162),Nn=e(25695);const Fa={SecretFormField:d.c,FormField:t.W,Select:r.Ph,AsyncSelect:r.qb,IndicatorsContainer:i.B,NoOptionsMessage:s.P,Input:n.I,Switch:m.r}},54004:(j,I,e)=>{"use strict";e.d(I,{n:()=>m});var t=e(42844),n=e(27702),i=e(42358),s=e(80402);const r=(0,s.B)(d=>({enter:(0,t.css)({label:"enter",opacity:0}),enterActive:(0,t.css)({label:"enterActive",opacity:1,transition:`opacity ${d}ms ease-out`}),exit:(0,t.css)({label:"exit",opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,transition:`opacity ${d}ms ease-out`})}));function m(d){const{visible:o,children:l,duration:a=250}=d,g=r(a);return n.createElement(i.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:g},l)}},12806:(j,I,e)=>{"use strict";e.d(I,{R:()=>m});var t=e(42844),n=e(27702),i=e(42358),s=e(80402);const r=(0,s.B)((d,o,l)=>({enter:(0,t.css)({label:"enter",[`${o}`]:0,opacity:0}),enterActive:(0,t.css)({label:"enterActive",[`${o}`]:`${l}px`,opacity:1,transition:`opacity ${d}ms ease-out, ${o} ${d}ms ease-out`}),exit:(0,t.css)({label:"exit",[`${o}`]:`${l}px`,opacity:1}),exitActive:(0,t.css)({label:"exitActive",opacity:0,[`${o}`]:0,transition:`opacity ${d}ms ease-out, ${o} ${d}ms ease-out`})}));function m(d){const{visible:o,children:l,duration:a=250,horizontal:g,size:c}=d,h=r(a,g?"width":"height",c);return n.createElement(i.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:a,classNames:h},l)}},81144:(j,I,e)=>{"use strict";e.d(I,{N:()=>d});var t=e(27702),n=e(26712),i=e(48473);function s(o,l){return l.width===o.width&&l.height===o.height}function r(o,l){return l.data===o.data}function m(o,l){return l.config===o.config}class d extends t.Component{constructor(l){super(l),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:l,height:a,plotRef:g}=this.props;if(this.state.plot?.destroy(),l===0&&a===0)return;this.props.config.addHook("setSize",f=>{f.over});const c={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,i.Zp)("UPlot",!1,"Reinitializing plot",c);const h=new n.Z(c,this.props.data,this.plotContainer.current);g&&g(h),this.setState({plot:h})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(l){let{plot:a}=this.state;s(l,this.props)?m(l,this.props)?r(l,this.props)||a?.setData(this.props.data):this.reinitPlot():a?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},30797:(j,I,e)=>{"use strict";e.d(I,{l:()=>c,o:()=>g});var t=e(27702),n=e(75578),i=e(58192),s=e(66656),r=e(61965),m=e(64167),d=e(66310),o=e(34072),l=e(71982);const a=h=>h==null?"-":h.toFixed(1);function g(h,f){return h.getSeries().some(b=>{const v=b.props.dataFrameFieldIndex;if(!v)return!1;const y=f[v.frameIndex]?.fields[v.fieldIndex];return!(!y||y.config.custom?.hideFrom?.legend)})}const c=t.memo(({data:h,config:f,placement:b,calcs:v,displayMode:y,...E})=>{const C=(0,d.l4)(),u=f.getSeries().map(D=>{const P=D.props,S=P.dataFrameFieldIndex,x=f.getAxisPlacement(D.props.scaleKey);if(!S)return;const M=h[S.frameIndex]?.fields[S.fieldIndex];if(!M||M.config.custom?.hideFrom?.legend)return;const R=(0,n.CZ)(M,h[S.frameIndex],h),T=(0,i.YO)(M,C).color;return{disabled:!(P.show??!0),fieldIndex:S,color:T,label:R,yAxis:x===m.LB.Left||x===m.LB.Bottom?1:2,getDisplayValues:()=>{if(!v?.length)return[];const U=M.display??a;let L=null;const V=(0,s.Kx)({field:M,reducers:v});return v.map(w=>{const K=s.TB.get(w);let B=U;return K.id===s.gz.diffperc&&(B=(0,r.U)({field:{...M,config:{...M.config,unit:"percentunit"}},theme:C})),(K.id===s.gz.count||K.id===s.gz.changeCount||K.id===s.gz.distinctCount)&&(L||(L=(0,r.U)({field:{...M,config:{...M.config,unit:"none"}},theme:C})),B=L),{...B(V[w]),title:K.name,description:K.description}})},getItemKey:()=>`${R}-${S.frameIndex}-${S.fieldIndex}`}}).filter(D=>D!==void 0);return t.createElement(o.AY.Legend,{placement:b,...E},t.createElement(l.l,{placement:b,items:u,displayMode:y,sortBy:E.sortBy,sortDesc:E.sortDesc,isSortable:!0}))});c.displayName="PlotLegend"},55219:(j,I,e)=>{"use strict";e.d(I,{q:()=>n});var t=e(64167);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},59685:(j,I,e)=>{"use strict";e.d(I,{ff:()=>g,gD:()=>l,mr:()=>h});var t=e(21609),n=e(27107),i=e(65347),s=e(60956),r=e(64167),m=e(11724),d=e(67463),o=e(24276);const l=12,a=8;class g extends d.L{merge(v){this.props.size=(0,o.V)("max",this.props.size,v.size),this.props.label||(this.props.label=v.label),this.props.placement===r.LB.Auto&&(this.props.placement=v.placement)}calculateSpace(v,y,E,C,u){const D=v.axes[y],P=v.scales[D.scale];if(D.side!==2||!P)return 30;const S=40;if(P.time){const x=u/S,M=(C-E)/x,R=h(v,[E],y,S,M);return(0,m.X1)(R[0],l).width+18}return S}calculateAxisSize(v,y,E){const C=v.axes[E];let u=C.ticks.size;if(C.side===2)u+=C.gap+l;else if(y?.length){let D=y.reduce((S,x)=>Math.max(S,(0,m.X1)(x,l).width),0);const P=Math.min(v.width*.4,D);u+=C.gap+C.labelGap+P}return Math.ceil(u)}getConfig(){let{scaleKey:v,label:y,show:E=!0,placement:C=r.LB.Auto,grid:u={show:!0},ticks:D,space:P,filter:S,gap:x=5,formatValue:M,splits:R,values:O,incrs:T,isTime:U,timeZone:L,theme:V,tickLabelRotation:w,size:K,color:B,border:W,decimals:_,distr:k=r.wf.Linear}=this.props;const A=`${l}px ${V.typography.fontFamily}`,z=V.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(v)&&(R=[0,1]),_===0&&k===r.wf.Linear&&(S=(Q,X)=>X.map(te=>Number.isInteger(te)?te:null));let H={scale:v,show:E,stroke:B??V.colors.text.primary,side:f(C),font:A,size:K??((Q,X,te)=>this.calculateAxisSize(Q,X,te)),rotate:w,gap:x,labelGap:0,grid:{show:u.show,stroke:z,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:z,width:1/devicePixelRatio,size:4},D),splits:R,values:O,space:P??((Q,X,te,oe,Z)=>this.calculateSpace(Q,X,te,oe,Z)),filter:S,incrs:T};return W!=null&&(H.border=W),y!=null&&y.length>0&&(H.label=y,H.labelSize=l+a,H.labelFont=A,H.labelGap=a),O?H.values=O:U?H.values=h:M&&(H.values=(Q,X,te,oe,Z)=>{let le=(0,n.d)((0,n.O)(Z,6));return X.map(ce=>M(ce,le>0?le:void 0))}),H.timeZone=L,H}}const c={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function h(b,v,y,E,C){const u=b.axes[y].timeZone,D=b.scales.x,P=(D?.max??0)-(D?.min??0),S=Math.round(c.year/c.day)*c.day,x=Math.round(C/c.day)*c.day;let M=i.U6.interval.year;return C<c.second?M=i.U6.interval.millisecond:C<=c.minute?M=i.U6.interval.second:P<=c.day?M=i.U6.interval.minute:C<=c.day?M=i.U6.interval.hour:P<c.year?M=i.U6.interval.day:x===S?M=i.U6.interval.year:C<=c.year&&(M=i.U6.interval.month),v.map(R=>R==null?"":(0,s.dq)(R,{format:M,timeZone:u}))}function f(b){switch(b){case r.LB.Top:return 0;case r.LB.Right:return 1;case r.LB.Bottom:return 2;case r.LB.Left:}return 3}},19345:(j,I,e)=>{"use strict";e.d(I,{U:()=>u});var t=e(89949),n=e(26712),i=e(8508),s=e(80369),r=e(64167),m=e(48473),d=e(59685),o=e(24276),l=e(93666),a=e(96750),g=e(67463),c=e(12839);class h extends g.L{getConfig(){const{facets:P,drawStyle:S,pathBuilder:x,pointsBuilder:M,pointsFilter:R,lineInterpolation:O,lineWidth:T,lineStyle:U,barAlignment:L,barWidthFactor:V,barMaxWidth:w,showPoints:K,pointSize:B,scaleKey:W,pxAlign:_,spanNulls:k,show:A=!0}=this.props;let z={},H=this.getLineColor();z.stroke=H,x!=null?(z.paths=x,z.width=T):S===r.l8.Points?z.paths=()=>null:S!=null&&(z.width=T,U&&U.fill!=="solid"&&(U.fill==="dot"&&(z.cap="round"),z.dash=U.dash??[10,10]),z.paths=(te,oe,Z,le)=>b(S,O,L,V,w)(te,oe,Z,le));const Q=typeof H=="string"?H:(te,oe)=>te.series[oe]._stroke,X={points:{stroke:Q,fill:Q,size:!B||B<T?void 0:B,filter:R}};return M!=null?X.points.show=M:S===r.l8.Points?X.points.show=!0:K===r.Jp.Auto?S===r.l8.Bars&&(X.points.show=!1):K===r.Jp.Never?X.points.show=!1:K===r.Jp.Always&&(X.points.show=!0),{scale:W,facets:P,spanGaps:typeof k=="number"?!1:k,value:()=>"",pxAlign:_,show:A,fill:this.getFill(),...z,...X}}getLineColor(){const{lineColor:P,gradientMode:S,colorMode:x,thresholds:M,theme:R,hardMin:O,hardMax:T,softMin:U,softMax:L,dynamicSeriesColor:V}=this.props;return S===r.FI.None&&V?(w,K)=>V(K)??P??l.R:S===r.FI.Scheme&&x?.id!==l.S.Fixed?(0,c.P2)(1,R,x,M,O,T,U,L):P??l.R}getFill(){const{lineColor:P,fillColor:S,gradientMode:x,fillOpacity:M,colorMode:R,thresholds:O,theme:T,hardMin:U,hardMax:L,softMin:V,softMax:w,dynamicSeriesColor:K}=this.props;if(S)return S;const B=x??r.FI.None,W=(M??0)/100;if(B===r.FI.None&&K&&W>0)return(_,k)=>{let A=_.series[k]._stroke;return a.alpha(A??"",W)};switch(B){case r.FI.Opacity:return(0,c.DT)(S??P,W);case r.FI.Hue:return(0,c.oN)(S??P,W,T);case r.FI.Scheme:if(R?.id!==l.S.Fixed)return(0,c.P2)(W,T,R,O,U,L,V,w);default:if(W>0)return a.alpha(P??"",W)}}}let f;function b(D,P,S=0,x=.6,M=200){const R=n.Z.paths;if(f||(f={linear:R.linear(),smooth:R.spline(),stepBefore:R.stepped({align:-1}),stepAfter:R.stepped({align:1})}),D===r.l8.Bars){let O=`bars|${S}|${x}|${M}`;return f[O]||(f[O]=R.bars({size:[x,M],align:S})),f[O]}else if(D===r.l8.Line){if(P===r.KC.StepBefore)return f.stepBefore;if(P===r.KC.StepAfter)return f.stepAfter;if(P===r.KC.Smooth)return f.smooth}return f.linear}var v=e(71685),y=e(5168);function E(D){const P=D.config.mode===r.i3.Dashed||D.config.mode===r.i3.DashedAndArea?[10,10]:null;function S(K,B,W,_){let k=K.ctx,A=0;for(let z=0;z<W.length;z++)if(W[z].color==="transparent"){A=z;break}k.lineWidth=2,P&&k.setLineDash(P);for(let z=1;z<W.length;z++){const H=W[z];let Q;A>=z&&z>0?Q=(0,v.Z)(_.visualization.getColorByName(W[z-1].color)):Q=(0,v.Z)(_.visualization.getColorByName(H.color)),Q.getAlpha()===1&&Q.setAlpha(.7);let X=Math.round(K.bbox.left),te=Math.round(K.valToPos(H.value,B,!0)),oe=Math.round(K.bbox.left+K.bbox.width),Z=Math.round(K.valToPos(H.value,B,!0));k.beginPath(),k.moveTo(X,te),k.lineTo(oe,Z),k.strokeStyle=Q.toString(),k.stroke()}}function x(K,B,W,_){let k=K.ctx,A=(0,c.KV)(K,B,W.map(z=>{let H=(0,v.Z)(_.visualization.getColorByName(z.color));return H.getAlpha()===1&&H.setAlpha(.15),[z.value,H.toString()]}),!0);k.fillStyle=A,k.fillRect(K.bbox.left,K.bbox.top,K.bbox.width,K.bbox.height)}const{scaleKey:M,thresholds:R,theme:O,config:T,hardMin:U,hardMax:L,softMin:V,softMax:w}=D;return K=>{const B=K.ctx,{min:W,max:_}=K.scales.x,{min:k,max:A}=K.scales[M];if(W==null||_==null||k==null||A==null)return;let{steps:z,mode:H}=R;if(H===y.H.Percentage){let[Q,X]=(0,c.A9)(K,M,U,L,V,w),te=X-Q;z=z.map(oe=>({...oe,value:Q+te*(oe.value/100)}))}switch(B.save(),T.mode){case r.i3.Line:case r.i3.Dashed:S(K,M,z,O);break;case r.i3.Area:x(K,M,z,O);break;case r.i3.LineAndArea:case r.i3.DashedAndArea:x(K,M,z,O),S(K,M,z,O)}B.restore()}}const C={drag:{setScale:!1},points:{size:(D,P)=>D.series[P].points.size*2,width:(D,P,S)=>S/4},focus:{prox:30}};class u{constructor(P=i.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=S=>{let x=new Date(S);return this.tz?n.Z.tzDate(x,this.tz):x},this.tz=(0,s.Pr)(P,Date.now())?.ianaName}addHook(P,S){(0,m.Zp)("UPlotConfigBuilder",!1,"addHook",P),this.hooks[P]||(this.hooks[P]=[]),this.hooks[P].push(S)}addThresholds(P){this.thresholds[P.scaleKey]||(this.thresholds[P.scaleKey]=P,this.addHook("drawClear",E(P)))}addAxis(P){P.placement=P.placement??r.LB.Auto,P.grid=P.grid??{};let S=P.scaleKey;if(S==="x"&&(S+=P.timeZone??""),this.axes[S]){this.axes[S].merge(P);return}P.placement===r.LB.Auto&&(P.placement=this.hasLeftAxis?r.LB.Right:r.LB.Left),P.placement===r.LB.Left&&(this.hasLeftAxis=!0),P.placement===r.LB.Hidden&&(P.grid.show=!1,P.size=0),this.axes[S]=new d.ff(P)}getAxisPlacement(P){return this.axes[P]?.props.placement??r.LB.Left}setCursor(P){this.cursor=(0,t.merge)({},this.cursor,P)}setMode(P){this.mode=P}setSelect(P){this.select=P}addSeries(P){this.series.push(new h(P))}getSeries(){return this.series}addScale(P){const S=this.scales.find(x=>x.props.scaleKey===P.scaleKey);if(S){S.merge(P);return}this.scales.push(new o.I(P))}addBand(P){this.bands.push(P)}setStackingGroups(P){this.stackingGroups=P}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(P){this.tooltipInterpolator=P}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(P){this.prepData=S=>(this.frames=S,P(S,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(P){this.padding=P}getConfig(){const P={...m.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};P.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(x=>x.getConfig()),P.series=[...P.series,...this.series.map(x=>x.getConfig())],P.scales=this.scales.reduce((x,M)=>({...x,...M.getConfig()}),{}),P.hooks=this.hooks,P.select=this.select;const S=(x="")=>(M,R)=>{let O=M.series[R].points._stroke;if(typeof O!="string"){let T=this.frames[0].fields[R];O=T.display(T.values[M.cursor.idxs[R]]).color}return O+x};return P.cursor=(0,t.merge)({},C,{points:{stroke:S("80"),fill:S()}},this.cursor),P.tzDate=this.tzDate,Array.isArray(this.padding)&&(P.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(x=>{(0,m.Kq)(x).forEach(M=>{this.addBand(M)})}),this.bands.length&&(P.bands=this.bands),P}ensureNonOverlappingAxes(P){const S=P.find(R=>R.props.scaleKey==="x"),x=P.filter(R=>R.props.grid?.show===void 0),M=x.findIndex(R=>R.props.placement===r.LB.Left||R.props.placement===r.LB.Right||R.props.placement===r.LB.Bottom&&R!==S);for(let R=0;R<x.length;R++)x[R]===S||R===M?x[R].props.grid.show=!0:x[R].props.grid.show=!1;return P}}},24276:(j,I,e)=>{"use strict";e.d(I,{I:()=>m,V:()=>d});var t=e(26712),n=e(35596),i=e(21609),s=e(64167),r=e(67463);class m extends r.L{merge(l){this.props.min=d("min",this.props.min,l.min),this.props.max=d("max",this.props.max,l.max)}getConfig(){let{isTime:l,scaleKey:a,min:g,max:c,softMin:h,softMax:f,range:b,direction:v,orientation:y,centeredZero:E,decimals:C}=this.props;const u=this.props.distribution,D=l?{}:{distr:u===s.wf.Symlog?4:u===s.wf.Log?3:u===s.wf.Ordinal?2:1,log:u===s.wf.Log||u===s.wf.Symlog?this.props.log??2:void 0,asinh:u===s.wf.Symlog?this.props.linearThreshold??1:void 0};if(u===s.wf.Log){let L=this.props.log,V=L===2?Math.log2:Math.log10;g!=null&&(g<=0?g=null:g=L**Math.floor(V(g))),c!=null&&(c<=0?c=null:c=L**Math.ceil(V(c))),h!=null&&(h<=0?h=null:h=L**Math.floor(V(h))),f!=null&&(f<=0?f=null:f=L**Math.ceil(V(f)))}let P=h==null?3:1,S=f==null?3:1;const x={min:{pad:.1,hard:g??-1/0,soft:h||0,mode:P},max:{pad:.1,hard:c??1/0,soft:f||0,mode:S}};let M=h==null&&g!=null,R=f==null&&c!=null,O=M&&R;const T=(L,V,w,K)=>{const B=L.scales[K];let W=[V,w];if(K==="x"&&!l&&u===s.wf.Linear||!O&&V==null&&w==null)return W;let _=B.log??10;if(B.distr===1||B.distr===2||B.distr===4){if(E){let k=Math.abs(V),A=Math.abs(w),z=Math.max(k,A);z===0&&(z=80),V=-z,w=z}B.distr===4?W=t.Z.rangeAsinh(V,w,_,!0):W=t.Z.rangeNum(M?g:V,R?c:w,x)}else B.distr===3&&(W=t.Z.rangeLog(g??V,c??w,_,!0));if(C===0)if(B.distr===1||B.distr===2)W[0]=(0,n.mB)(W[0],1),W[1]=(0,n.UO)(W[1],1);else if(B.distr===3){let k=B.log===2?Math.log2:Math.log10;if(W[0]<=1)W[0]=1;else{let z=Math.floor(k(W[0]));W[0]=_**z}let A=Math.ceil(k(W[1]));W[1]=_**A,W[0]===W[1]&&(W[1]*=_)}else B.distr===4&&(W[0]=(0,n.mB)(W[0],1),W[1]=(0,n.UO)(W[1],1));return(B.distr===1||B.distr===4)&&(M&&(W[0]=g),R&&(W[1]=c)),W[0]>=W[1]&&(W[0]=B.distr===3?1:0,W[1]=100),W};let U=!l&&!O;return(0,i.br)(a)&&(U=!1,b=[0,1]),{[a]:{time:l,auto:U,range:b??T,dir:v,ori:y,...D}}}}function d(o,l,a){const g=l!=null,c=a!=null;return g?c?o==="min"?l<a?l:a:l>a?l:a:l:a}},12839:(j,I,e)=>{"use strict";e.d(I,{A9:()=>h,DT:()=>o,KV:()=>g,P2:()=>f,oN:()=>l});var t=e(71685),n=e(96750),i=e(93666),s=e(5168),r=e(64167),m=e(11724);function d(b,v,y){let E=0,C=0,u=0,D=0;return b===3?(C=v.top,D=v.top+v.height):b===2?(E=v.left+v.width,u=v.left):b===1?(C=v.top+v.height,D=v.top):b===0&&(E=v.left,u=v.left+v.width),y.createLinearGradient(E,C,u,D)}function o(b,v){return(y,E)=>{const C=(0,m.AE)(),u=d(y.scales.x.ori===r.wN.Horizontal?3:2,y.bbox,C);return u.addColorStop(0,n.alpha(b,v)),u.addColorStop(1,n.alpha(b,0)),u}}function l(b,v,y){return(E,C)=>{const u=(0,m.AE)(),D=d(E.scales.x.ori===r.wN.Horizontal?3:2,E.bbox,u),P=(0,t.Z)(b).spin(-15),S=(0,t.Z)(b).spin(15);return y.isDark?(D.addColorStop(0,S.lighten(10).setAlpha(v).toString()),D.addColorStop(1,P.darken(10).setAlpha(v).toString())):(D.addColorStop(0,S.lighten(10).setAlpha(v).toString()),D.addColorStop(1,P.setAlpha(v).toString())),D}}var a=(b=>(b[b.Right=0]="Right",b[b.Up=1]="Up",b[b.Left=2]="Left",b[b.Down=3]="Down",b))(a||{});function g(b,v,y,E=!1){let C=b.scales[v],u=null,D=null;for(let B=0;B<y.length;B++){let W=y[B][0];if((W<=C.min||u==null)&&(u=B),D=B,W>=C.max)break}if(u===D)return y[u][1];let P=y[u][0],S=y[D][0];P===-1/0&&(P=C.min),S===1/0&&(S=C.max);let x=Math.round(b.valToPos(P,v,!0)),M=Math.round(b.valToPos(S,v,!0)),R=x-M;if(R===0)return y[D][1];let O,T,U,L;b.scales.x.ori===r.wN.Horizontal?(O=U=0,T=x,L=M):(T=L=0,O=x,U=M);let w=(0,m.AE)().createLinearGradient(O,T,U,L),K;for(let B=u;B<=D;B++){let W=y[B],_=B===u?x:B===D?M:Math.round(b.valToPos(W[0],v,!0)),k=(x-_)/R;E&&B>u&&w.addColorStop(k,K),w.addColorStop(k,K=W[1])}return w}function c(b,v){let y=b.scales[v],E=1/0,C=-1/0;return b.series.forEach((u,D)=>{if(u.show&&u.scale===v)if(u.min==null){let P=b.data[D];for(let S=0;S<P.length;S++)P[S]!=null&&(E=Math.min(E,P[S]),C=Math.max(C,P[S]))}else E=Math.min(E,u.min),C=Math.max(C,u.max)}),C===E&&(E=y.min,C=y.max),[E,C]}function h(b,v,y,E,C,u){let D=y??C??null,P=E??u??null;if(D==null||P==null){let[S,x]=c(b,v);D=D??S??0,P=P??x??100}return[D,P]}function f(b,v,y,E,C,u,D,P){if(!y)throw Error("Missing colorMode required for color scheme gradients");if(!E)throw Error("Missing thresholds required for color scheme gradients");return(S,x)=>{let M=S.series[x].scale,R="";if(y.id===i.S.Thresholds)if(E.mode===s.H.Absolute){const O=E.steps.map(T=>[T.value,n.alpha(v.visualization.getColorByName(T.color),b)]);R=g(S,M,O,!0)}else{const[O,T]=h(S,M,C,u,D,P),U=T-O,L=E.steps.map(V=>[O+U*(V.value/100),n.alpha(v.visualization.getColorByName(V.color),b)]);R=g(S,M,L,!0)}else if(y.getColors){const O=y.getColors(v),[T,U]=h(S,M,C,u,D,P),L=U-T,V=O.map((w,K)=>[T+L*(K/(O.length-1)),n.alpha(v.visualization.getColorByName(w),b)]);R=g(S,M,V,!1)}return R}}},42341:(j,I,e)=>{"use strict";e.d(I,{T:()=>r});var t=e(27702),n=e(93562),i=e(97835),s=e(27229);function r({id:m,events:d,renderEventMarker:o,mapEventToXYCoords:l,config:a}){const g=(0,t.useRef)(),[c,h]=(0,t.useState)(0),f=(0,n.Z)();(0,t.useLayoutEffect)(()=>{a.addHook("init",v=>{g.current=v}),a.addHook("draw",()=>{f()&&h(v=>v+1)})},[a,h]);const b=(0,t.useMemo)(()=>{const v=[];if(!g.current||d.length===0)return v;for(let y=0;y<d.length;y++){const E=d[y];for(let C=0;C<E.length;C++){const u=l(E,{fieldIndex:C,frameIndex:y});u&&v.push(t.createElement(i.J,{...u,key:`${m}-marker-${y}-${C}`},o(E,{fieldIndex:C,frameIndex:y})))}}return t.createElement(t.Fragment,null,v)},[d,o,c]);return g.current?t.createElement(s.K,{left:g.current.bbox.left/window.devicePixelRatio,top:g.current.bbox.top/window.devicePixelRatio},b):null}},97835:(j,I,e)=>{"use strict";e.d(I,{J:()=>n});var t=e(27702);const n=({x:i,y:s,children:r})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${i}px`}},r)},27229:(j,I,e)=>{"use strict";e.d(I,{K:()=>i});var t=e(42844),n=e(27702);const i=({children:s,left:r,top:m})=>{const d=(0,n.useMemo)(()=>(0,t.css)({position:"absolute",overflow:"visible",left:`${r}px`,top:`${m}px`}),[r,m]);return n.createElement("div",{className:d},s)}},17270:(j,I,e)=>{"use strict";e.d(I,{Jx:()=>n.J,K2:()=>i.K,TZ:()=>t.T});var t=e(42341),n=e(97835),i=e(27229)},28482:(j,I,e)=>{"use strict";e.d(I,{C:()=>o});var t=e(89949),n=e.n(t),i=e(27702);const s=.1,r=2,m=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),d=l=>{let a=l.root.closest("[tabindex]"),g=new Set,c=null,h=null;if(!a)return;const f=(D,P)=>{const{cursor:S}=l;if(S.left===void 0||S.top===void 0)return;const{width:x,height:M}=l.over.style,[R,O]=[Math.floor(parseFloat(x)),Math.floor(parseFloat(M))];l.setCursor({left:(0,t.clamp)(S.left+D,0,R),top:(0,t.clamp)(S.top+P,0,O)})},b=D=>{if(g.size===0||!l){h=null;return}const x=(D-(h??D))*s;let M=0,R=0;g.has("ArrowUp")&&(R-=x),g.has("ArrowDown")&&(R+=x),g.has("ArrowLeft")&&(M-=x),g.has("ArrowRight")&&(M+=x),g.has("Shift")&&(M*=r,R*=r),f(M,R);const{cursor:O}=l;if(g.has(" ")&&O){const T=Number(l.over.style.height.slice(0,-2));l.setSelect({left:O.left<c?O.left:c,top:0,width:Math.abs(O.left-(c??O.left)),height:T},!1)}h=D,window.requestAnimationFrame(b)},v=D=>{if(D.key==="Tab"){l.setCursor({left:-5,top:-5});return}if(!m.has(D.key))return;if(D.preventDefault(),D.stopPropagation(),!g.has(D.key)){const S=g.size===0;g.add(D.key),c=D.key===" "&&c===null?l.cursor.left:c,S&&window.requestAnimationFrame(b)}},y=D=>{m.has(D.key)&&(g.delete(D.key),D.key===" "&&(D.preventDefault(),D.stopPropagation(),l.setSelect(l.select),c=null))},E=()=>{if(!a?.matches(":focus-visible"))return;const D=parseFloat(l.over.style.width),P=parseFloat(l.over.style.height);l.setCursor({left:D/2,top:P/2})},C=()=>{h=null,c=null,g.clear(),l.setSelect({left:0,top:0,width:0,height:0},!1)};a.addEventListener("keydown",v),a.addEventListener("keyup",y),a.addEventListener("focus",E),a.addEventListener("blur",C);const u=()=>{a?.removeEventListener("keydown",v),a?.removeEventListener("keyup",y),a?.removeEventListener("focus",E),a?.removeEventListener("blur",C),a=null};(l.hooks.destroy??=[]).push(u)},o=({config:l})=>((0,i.useLayoutEffect)(()=>l.addHook("init",d),[l]),null)},11921:(j,I,e)=>{"use strict";e.d(I,{_:()=>u,i:()=>E});var t=e(42844),n=e(27702),i=e(93562),s=e(79248),r=e(61965),m=e(93666),d=e(75578),o=e(21609),l=e(29241),a=e(99025),g=e(64167),c=e(66310),h=e(52995),f=e(73014),b=e(97695),v=e(48473);const y=10,E=({mode:P=g.f3.Single,sortOrder:S=g.As.None,sync:x,timeZone:M,config:R,renderTooltip:O,...T})=>{const U=(0,n.useRef)(),L=(0,c.l4)(),[V,w]=(0,n.useState)(null),[K,B]=(0,n.useState)(null),[W,_]=(0,n.useState)([]),[k,A]=(0,n.useState)(null),[z,H]=(0,n.useState)(!1),Q=(0,i.Z)();let X=null;const te="TooltipPlugin",oe=(0,c.wW)(D);if((0,n.useEffect)(()=>{(0,v.Zp)(te,!0,`Focused series: ${V}, focused point: ${K}`)},[K,V]),(0,n.useLayoutEffect)(()=>{let ne;const pe=()=>{Q()&&(H(!0),U.current?.root.classList.add("plot-active"))},re=()=>{Q()&&(A(null),H(!1),U.current?.root.classList.remove("plot-active"))};R.addHook("syncRect",(Se,ye)=>ne=ye),R.addHook("init",Se=>{U.current=Se,Se.over.addEventListener("mouseenter",pe),Se.over.addEventListener("mouseleave",re),X=Se.root.closest("[tabindex]"),X&&(X.addEventListener("focus",pe),X.addEventListener("blur",re)),x&&x()===s.m.Crosshair&&Se.root.classList.add("shared-crosshair")});const ie=R.getTooltipInterpolator();return ie?R.addHook("setCursor",Se=>{ie(w,B,ye=>{if(ye){A(null);return}if(!ne)return;const{x:Ce,y:de}=u(Se,ne);Ce!==void 0&&de!==void 0&&A({x:Ce,y:de})},Se)}):(R.addHook("setLegend",Se=>{Q()&&(B(Se.legend.idx),_(Se.legend.idxs.slice()))}),R.addHook("setCursor",Se=>{if(!ne||!Q())return;const{x:ye,y:Ce}=u(Se,ne);A(ye!==void 0&&Ce!==void 0?{x:ye,y:Ce}:null)}),R.addHook("setSeries",(Se,ye)=>{Q()&&w(ye)})),()=>{A(null),U.current&&(U.current.over.removeEventListener("mouseleave",re),U.current.over.removeEventListener("mouseenter",pe),X&&(X.removeEventListener("focus",pe),X.removeEventListener("blur",re)))}},[R,A,H,B,_]),K===null||!z&&x&&x()===s.m.Crosshair)return null;let Z=T.data.fields[0];if(!Z)return null;const le=Z.display||(0,r.U)({field:Z,timeZone:M,theme:L});let ce=null,q=le(Z.values[K]).text;if(O)ce=O(T.data,V,K);else{if(P===g.f3.Single&&V!==null){const ne=T.data.fields[V];if(!ne)return null;const pe=W?.[V]??K;q=le(Z.values[pe]).text;const ie=(ne.display||(0,r.U)({field:ne,timeZone:M,theme:L}))(ne.values[pe]);ce=n.createElement(f.c,{series:[{color:ie.color||m.R,label:(0,d.CZ)(ne,T.data,T.frames),value:ie?(0,o.zc)(ie):null}],timestamp:q})}if(P===g.f3.Multi){let ne=[];const pe=T.data,re=pe.fields,ie=[];for(let Se=0;Se<re.length;Se++){const ye=pe.fields[Se];if(!ye||ye===Z||ye.type===l.fS.time||ye.type!==l.fS.number||ye.config.custom?.hideFrom?.tooltip||ye.config.custom?.hideFrom?.viz)continue;const Ce=T.data.fields[Se].values[W[Se]],de=ye.display(Ce);ie.push(Ce),ne.push({color:de.color||m.R,label:(0,d.CZ)(ye,pe,T.frames),value:de?(0,o.zc)(de):null,isActive:V===Se})}if(S!==g.As.None){const Se=[...ne],ye=a.sortValues(S);ne.sort((Ce,de)=>{const we=Se.indexOf(Ce),_e=Se.indexOf(de);return ye(ie[we],ie[_e])})}ce=n.createElement(f.c,{series:ne,timestamp:q})}}return n.createElement(h.h_,{className:z?oe.tooltipWrapper:void 0},ce&&k&&n.createElement(b.S,{position:{x:k.x,y:k.y},offset:{x:y,y}},ce))};function C({left:P,top:S},x){return P===void 0||S===void 0?!1:P<0||P>x.width||S<0||S>x.height}function u(P,S){let x,M;const R=P.cursor.left||0,O=P.cursor.top||0;if(C(P.cursor,S)){const T=P.posToIdx(R);if(O<0||O>S.height){let U=(0,v.ah)(P,T);U&&(M=S.top+U,R>=0&&R<=S.width&&(x=S.left+P.valToPos(P.data[0][P.posToIdx(R)],P.series[0].scale)))}}else x=S.left+R,M=S.top+O;return{x,y:M}}const D=P=>({tooltipWrapper:(0,t.css)({"z-index":P.zIndex.portal+1+" !important"})})},67151:(j,I,e)=>{"use strict";e.d(I,{R:()=>s});var t=e(27702),n=e(48473);const i=5,s=({onZoom:r,config:m})=>((0,t.useLayoutEffect)(()=>{m.addHook("setSelect",d=>{const o=d.posToVal(d.select.left,"x"),l=d.posToVal(d.select.left+d.select.width,"x");d.select.width>=i&&((0,n.Zp)("ZoomPlugin",!1,"selected",{min:o,max:l,bbox:{left:d.bbox.left/window.devicePixelRatio+d.select.left,top:d.bbox.top/window.devicePixelRatio,height:d.bbox.height/window.devicePixelRatio,width:d.select.width}}),r({from:o,to:l})),d.setSelect({left:0,width:0},!1)}),m.setCursor({bind:{dblclick:d=>()=>{let o=d.scales.x;const l=o.min,a=o.max,g=(a-l)/2;return r({from:l-g,to:a+g}),null}}})},[m]),null)},42059:(j,I,e)=>{"use strict";e.d(I,{Cm:()=>i.C,Rb:()=>t.R,ii:()=>n.i});var t=e(67151),n=e(11921),i=e(28482)},67463:(j,I,e)=>{"use strict";e.d(I,{L:()=>t});class t{constructor(i){this.props=i}}},48473:(j,I,e)=>{"use strict";e.d(I,{Bj:()=>f,Kq:()=>c,Zp:()=>C,ah:()=>b,i7:()=>h,qt:()=>a});var t=e(29241),n=e(95381),i=e(64167),s=e(46414),r=e(12343),m=e(90537);const d=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function o(u){return u.replace(d,D=>`{${D}}`)}const l=(u,D,P)=>{let S=D%2?P[0]||P[2]:P[1]||P[3];return P[D]||!S?0:8},a={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[l,l,l,l],series:[],hooks:{}};var g=(u=>(u[u.Pos=1]="Pos",u[u.Neg=-1]="Neg",u))(g||{});function c(u){let D=[],{series:P,dir:S}=u,x=P.length-1,M=P.slice().reverse();return M.forEach((R,O)=>{if(O!==x){let T=M[O+1];D.push({series:[R,T],dir:-1*S})}}),D}function h(u){let D=new Map;return u.fields.forEach(({config:P,values:S,type:x},M)=>{if(M===0)return;let{custom:R}=P;if(R==null||R.hideFrom?.viz)return;let{stacking:O}=R;if(O==null)return;let{mode:T,group:U}=O;if(T===i.o0.None)return;let L=R.transform,V=v(L,S),w=R.drawStyle,K=w===i.l8.Bars?R.barAlignment:w===i.l8.Line?R.lineInterpolation:null,B=`${V}|${T}|${U}|${(0,m.z1)(P,x)}|${w}|${K}`,W=D.get(B);W==null&&(W={series:[],dir:V},D.set(B,W)),W.series.push(M)}),[...D.values()]}function f(u,D,P){let S=Array(u.fields.length),x=D.length,M=u.length,R=x>0?Array(M).fill(0):[],O=x>0?Array(M).fill(!1):[],T=Array.from({length:x},()=>R.slice()),U=Array.from({length:x},()=>O.slice());if(D.forEach((L,V)=>{let w=U[V];L.series.forEach(K=>{let B=u.fields[K];if(B.config.custom?.hideFrom?.viz)return;let W=B.values;for(let _=0;_<M;_++)W[_]!=null&&(w[_]=!0)})}),u.fields.forEach((L,V)=>{let w=L.values;if(V===0){L.type===t.fS.time?S[V]=(0,n.J_)(L).values:S[V]=w;return}let{custom:K}=L.config;if(!K||K.hideFrom?.viz){S[V]=w;return}if(K.transform===i.pR.Constant){let W=w.findIndex(k=>k!=null),_=w[W];w=Array(w.length).fill(void 0),w[W]=_}else if(w=w.slice(),K.transform===i.pR.NegativeY)for(let W=0;W<w.length;W++)w[W]!=null&&(w[W]*=-1);let B=K.stacking?.mode;if(!B||B===i.o0.None)S[V]=w;else{let W=D.findIndex(z=>z.series.indexOf(V)>-1),_=T[W],k=U[W],A=S[V]=Array(M);for(let z=0;z<M;z++){let H=w[z];H!=null?A[z]=_[z]+=H:A[z]=k[z]?_[z]:H}}}),P){let L=S.map((V,w)=>{let K=D.findIndex(B=>B.series.indexOf(w)>-1);return K!==-1?T[K]:V});P({totals:L})}return u.fields.forEach((L,V)=>{if(V===0||L.config.custom?.hideFrom?.viz)return;if(L.config.custom?.stacking?.mode===i.o0.Percent){let K=D.findIndex(k=>k.series.indexOf(V)>-1),B=T[K],W=D[K],_=S[V];for(let k=0;k<M;k++){let A=_[k];A!=null&&(_[k]=B[k]===0?0:W.dir*(A/B[k]))}}}),S}function b(u,D){let P,S=1,x=1,M=u.data[1][D],R=u.data[1][D];for(let O=1;O<u.data.length;O++){const U=u.data[O][D];U!=null&&(M==null?M=U:U>M&&(M=u.data[O][D],S=O),R==null?R=U:U<R&&(R=u.data[O][D],x=O))}return R==null&&M==null?P=void 0:R!=null&&M!=null?P=(u.valToPos(R,u.series[x].scale)+u.valToPos(M,u.series[S].scale))/2:P=u.valToPos(R||M,u.series[S||x].scale),P!==void 0&&P<0&&(P=u.bbox.height/devicePixelRatio),P}function v(u,D){const P=y(D);return u===i.pR.NegativeY?P?1:-1:P?-1:1}function y(u,D=100){const P=u.length;if(P===0)return!1;let S=0,x=P-1;for(;S<=x&&u[S]==null;)S++;for(;x>=S&&u[x]==null;)x--;let M=0,R=0;if(x>=S){const O=Math.max(1,Math.floor((x-S+1)/D));for(let T=S;T<=x;T+=O){const U=u[T];U!=null&&(U<0||Object.is(U,-0)?M++:U>0&&R++)}if(M>R)return!0}return!1}const E=(0,r.h)("uPlot"),C=E.logger;(0,s.x)("graphng",void 0,E)},65469:(j,I,e)=>{"use strict";e.r(I),e.d(I,{ALERTING_COLOR:()=>s.ns,AxisPlacement:()=>o.LB,BarAlignment:()=>o.pu,BarValueVisibility:()=>o.eU,BracesPlugin:()=>d.hP,ClearPlugin:()=>d.Gp,ClipboardPlugin:()=>d.wl,DEFAULT_ANNOTATION_COLOR:()=>s.Jx,DOMUtil:()=>s.Qi,DrawStyle:()=>o.$6,EventsWithValidation:()=>s.JU,GlobalStyles:()=>r.nz,GraphGradientMode:()=>o.FI,GraphTresholdsStyleMode:()=>o.i3,IndentationPlugin:()=>d.Rc,LegendDisplayMode:()=>o.jK,LineInterpolation:()=>o.KC,NO_DATA_COLOR:()=>s._V,NewlinePlugin:()=>d.z2,NodeGraphDataFrameFieldNames:()=>s.zG,OK_COLOR:()=>s.te,PENDING_COLOR:()=>s.f7,PointVisibility:()=>o.mv,REGION_FILL_ALPHA:()=>s.iV,ReactUtils:()=>s.Ot,RunnerPlugin:()=>d.dv,SCHEMA:()=>s.Yi,ScaleDirection:()=>o.bQ,ScaleOrientation:()=>o.wN,SearchFunctionType:()=>s.nu,SelectionShortcutsPlugin:()=>d.$L,SlatePrism:()=>d.Ze,StackingMode:()=>o.o0,SuggestionsPlugin:()=>d.bm,TableCellDisplayMode:()=>o.h2,ThemeContext:()=>r.Ni,TooltipDisplayMode:()=>o.f3,ansicolor:()=>s._J,attachDebugger:()=>s.xq,calculateFontSize:()=>s.MX,colors:()=>s.O9,commonOptionsBuilder:()=>m.q,createLogger:()=>s.hu,fuzzyMatch:()=>s.C6,getCanvasContext:()=>s.AE,getCellLinks:()=>s.iu,getScrollbarWidth:()=>s.np,getTagColor:()=>s.vm,getTagColorIndexFromName:()=>s.tu,getTagColorsFromName:()=>s.Bx,getTextColorForAlphaBackground:()=>s.bM,getTextColorForBackground:()=>s.Gc,getTheme:()=>r.gh,hasValidationEvent:()=>s.z3,isCompactUrl:()=>s.go,linkModelToContextMenuItems:()=>s.Rc,makeFragment:()=>s.xl,makeValue:()=>s.l1,measureText:()=>s.X1,mockTheme:()=>r.Zu,mockThemeContext:()=>r.sJ,regexValidation:()=>s.FE,sortedColors:()=>s.Wm,styleMixins:()=>r.GU,stylesFactory:()=>r.Bb,useForceUpdate:()=>s.NW,useStyles:()=>r.yK,useStyles2:()=>r.wW,useTheme:()=>r.Fg,useTheme2:()=>r.l4,validate:()=>s.Gu,withTheme:()=>r.Zz,withTheme2:()=>r.HE});var t=e(82367),i={};for(const l in t)l!=="default"&&(i[l]=()=>t[l]);e.d(I,i);var n=e(74032),i={};for(const l in n)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSaveField","AutoSizeInput","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Divider","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeErrorIndicator","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableInputCSV","TabsBar","Tag","TagList","TagsInput","TextArea","TextLink","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangeLabel","TimeRangePicker","TimeSeries","TimeZonePicker","Toggletip","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","UserIcon","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(l)<0&&(i[l]=()=>n[l]);e.d(I,i);var s=e(42129),r=e(57907),m=e(74603),d=e(58387),o=e(19080)},53387:(j,I,e)=>{"use strict";e.d(I,{Y:()=>h,r:()=>a});var t=e(27702),n=e(29241),i=e(27001),s=e(64167),r=e(55219),m=e(40705),d=e(22209),o=e(28580),l=e(1128);function a(f,b,v){const y=["Axis"];f.addRadio({path:"axisPlacement",name:"Placement",category:y,defaultValue:r.q.axisPlacement[0].value,settings:{options:r.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:y,defaultValue:"",settings:{placeholder:"Optional text"},showIf:E=>E.axisPlacement!==s.LB.Hidden,shouldApply:E=>E.type!==n.fS.time&&E.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:y,settings:{placeholder:"Auto"},showIf:E=>E.axisPlacement!==s.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:y,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:y,defaultValue:s.yK.Text,settings:{options:[{value:s.yK.Text,label:"Text"},{value:s.yK.Series,label:"Series"}]}}),f.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:y,editor:h,override:h,defaultValue:{type:s.wf.Linear},shouldApply:E=>E.type===n.fS.number,process:i.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:y,defaultValue:!1,showIf:E=>E.scaleDistribution?.type!==s.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:b.axisSoftMin,category:y,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:b.axisSoftMax,category:y,settings:{placeholder:"See: Standard options > Max"}})}const g=[{label:"Linear",value:s.wf.Linear},{label:"Logarithmic",value:s.wf.Log},{label:"Symlog",value:s.wf.Symlog}],c=[{label:"2",value:2},{label:"10",value:10}],h=({value:f,onChange:b})=>{const v=f?.type??s.wf.Linear,y=f?.log??2;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(m.S,{value:v,options:g,onChange:E=>{b({...f,type:E,log:E===s.wf.Linear?void 0:y})}})),(v===s.wf.Log||v===s.wf.Symlog)&&t.createElement(d.g,{label:"Log base"},t.createElement(o.Ph,{options:c,value:y,onChange:E=>{b({...f,log:E.value})}})),v===s.wf.Symlog&&t.createElement(d.g,{label:"Linear threshold"},t.createElement(l.I,{placeholder:"1",value:f?.linearThreshold,onChange:E=>{b({...f,linearThreshold:Number(E.currentTarget.value)})}})))}},56617:(j,I,e)=>{"use strict";e.d(I,{B:()=>d});var t=e(89949),n=e.n(t),i=e(27702),s=e(64022),r=e(81520);const m=({value:o,onChange:l})=>{const a=(0,i.useCallback)(g=>{l({...o,[g]:!o[g]})},[o,l]);return i.createElement(s.Lh,{spacing:"xs"},Object.keys(o).map(g=>{const c=g;return i.createElement(r.B,{icon:o[c]?"eye-slash":"eye",onClick:()=>a(c),key:c,label:(0,t.startCase)(c),selected:o[c]})}))};function d(o){o.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:m,override:m,shouldApply:()=>!0,hideFromDefaults:!0,process:l=>l})}},1505:(j,I,e)=>{"use strict";e.d(I,{J:()=>i});var t=e(41199),n=e(64167);function i(s,r=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:m=>m.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:m=>m.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:m=>m.legend.showLegend&&m.legend.placement==="right"}),r&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:m=>m.legend.showLegend!==!1})}},8658:(j,I,e)=>{"use strict";e.d(I,{V:()=>g,n:()=>a});var t=e(27702),n=e(27001),i=e(29241),s=e(64167),r=e(64022),m=e(40705),d=e(1128),o=e(67437),l=e(55219);const a=({value:c,context:h,onChange:f,item:b})=>t.createElement(r.Lh,null,t.createElement(m.S,{value:c?.mode||s.o0.None,options:b.settings.options,onChange:v=>{f({...c,mode:v})}}),h.isOverride&&c?.mode&&c?.mode!==s.o0.None&&t.createElement(d.I,{type:"text",placeholder:"Group",suffix:t.createElement(o.h,{name:"question-circle",tooltip:"Name of the stacking group",tooltipPlacement:"top"}),defaultValue:c?.group,onChange:v=>{f({...c,group:v.currentTarget.value.trim()})}}));function g(c,h,f=["Graph styles"]){c.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:f,defaultValue:h,editor:a,override:a,settings:{options:l.q.stacking},process:n.kG,shouldApply:b=>b.type===i.fS.number})}},77148:(j,I,e)=>{"use strict";e.d(I,{Z:()=>t});function t(n,i=!0){i&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},74928:(j,I,e)=>{"use strict";e.d(I,{L:()=>n});var t=e(64167);function n(i,s=!1){const r=["Tooltip"],m=s?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],d=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];i.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:r,defaultValue:"single",settings:{options:m}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:r,defaultValue:t.As.None,showIf:o=>o.tooltip?.mode===t.f3.Multi,settings:{options:d}})}},74603:(j,I,e)=>{"use strict";e.d(I,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>d.n,addAxisConfig:()=>n.r,addHideFrom:()=>i.B,addLegendOptions:()=>s.J,addStackingConfig:()=>d.V,addTextSizeOptions:()=>m.Z,addTooltipOptions:()=>r.L});var n=e(53387),i=e(56617),s=e(1505),r=e(74928),m=e(77148),d=e(8658)},19080:(j,I,e)=>{"use strict";e.d(I,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,h2:()=>t.h2,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(64167)},45485:(j,I,e)=>{"use strict";e.d(I,{h:()=>s});var t=e(66117);const n={"[":"]","{":"}","(":")"},i="brace_match";function s(){return{onKeyDown(r,m,d){const{value:o}=m;switch(r.key){case"(":case"{":case"[":{const{start:{offset:l,key:a},end:{offset:g,key:c},focus:{offset:h}}=o.selection,f=o.focusText.text;if(o.selection.isExpanded)return r.preventDefault(),m.insertTextByKey(a,l,r.key).insertTextByKey(c,g+1,n[r.key]).moveEndBackward(1),!0;if(h===f.length||f[h]===" "||Object.values(n).includes(f[h])){r.preventDefault();const b=n[r.key],v={key:`${i}-${(0,t.Z)()}`,type:`${i}-${b}`,anchor:{key:a,offset:l,object:"point"},focus:{key:c,offset:g+1,object:"point"},object:"annotation"};return m.insertText(r.key).insertText(b).addAnnotation(v).moveBackward(1),!0}break}case")":case"}":case"]":{const l=o.anchorText.text,a=o.selection.anchor.offset,g=l[a],c=r.key,h=`${i}-${c}`,f=o.annotations.find(b=>b?.type===h&&b.anchor.key===o.anchorText.key);if(f&&g===c&&!o.selection.isExpanded)return r.preventDefault(),m.moveFocusForward(1).removeAnnotation(f).moveAnchorForward(1),!0;break}case"Backspace":{const l=o.anchorText.text,a=o.selection.anchor.offset,g=l[a-1],c=l[a];if(n[g]&&n[g]===c)return r.preventDefault(),m.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return d()}}}},3508:(j,I,e)=>{"use strict";e.d(I,{G:()=>t});function t(){return{onKeyDown(n,i,s){const r=i.value;if(r.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const m=r.anchorText.text,d=r.selection.anchor.offset,l=m.length-d;return i.deleteForward(l),!0}return s()}}}},73146:(j,I,e)=>{"use strict";e.d(I,{w:()=>i});const t=(s,r,m)=>{if(!s.length)return;const d=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(r,d+m)},n=s=>s?.replace(/[\uFEFF]/g,"");function i(){const s={onCopy(r,m,d){r.preventDefault();const{document:o,selection:l}=m.value,{start:{offset:a},end:{offset:g}}=l,c=o.getLeafBlocksAtRange(l).toArray().map(f=>f.text),h=n(t(c,a,g));return h&&r.clipboardData&&r.clipboardData.setData("Text",h),!0},onPaste(r,m,d){if(r.preventDefault(),r.clipboardData){const l=n(r.clipboardData.getData("Text"))?.split(`
`);if(l&&l.length){m.insertText(l[0]);for(const a of l.slice(1))m.splitBlock().insertText(a)}}return!0}};return{...s,onCut(r,m,d){return s.onCopy(r,m,d),m.deleteAtRange(m.value.selection),!0}}}},44687:(j,I,e)=>{"use strict";e.d(I,{R:()=>a});var t=e(94038),n=e(45273),i=e(10418);const s=(0,t.TB)("mod+["),r=(0,t.TB)("shift+tab"),m=(0,t.TB)("mod+]"),d="  ",o=(g,c,h)=>{const{startBlock:f,endBlock:b,selection:{start:{offset:v,key:y},end:{offset:E,key:C}}}=c.value;if(i.Z.serialize(c.value)==="")return;g.preventDefault();const u=f.getFirstText();u&&v===0&&y===u.key&&E===u.text.length&&C===u.key||!f.equals(b)?l(c,"right"):c.insertText(d)},l=(g,c)=>{const h=g.value.selection,f=g.value.document.getLeafBlocksAtRange(h).toArray();if(c==="left")for(const b of f){const v=b.text.length-b.text.trimLeft().length,y=b.getFirstText().key,E={anchor:{key:y,offset:v,path:[]},focus:{key:y,offset:v,path:[]}};g.deleteBackwardAtRange(n.e6.create(E),Math.min(d.length,v))}else{const{startText:b}=g.value,v=b.text.slice(0,h.start.offset),y=/^\s*$/.test(v);for(const E of f)g.insertTextByKey(E.getFirstText().key,0,d);y&&g.moveStartBackward(d.length)}};function a(){return{onKeyDown(g,c,h){if(s(g)||r(g))g.preventDefault(),l(c,"left");else if(m(g))g.preventDefault(),l(c,"right");else if(g.key==="Tab")o(g,c,h);else return h();return!0}}}},58387:(j,I,e)=>{"use strict";e.d(I,{$L:()=>d.$,Gp:()=>n.G,Rc:()=>s.R,Ze:()=>o.Z,bm:()=>l.b,dv:()=>m.d,hP:()=>t.h,wl:()=>i.w,z2:()=>r.z});var t=e(45485),n=e(3508),i=e(73146),s=e(44687),r=e(96662),m=e(93702),d=e(16646),o=e(54916),l=e(14524)},96662:(j,I,e)=>{"use strict";e.d(I,{z:()=>n});function t(i){let s=i.length-i.trimLeft().length;if(s){let r=i[0];for(;--s;)r+=i[0];return r}return""}function n(){return{onKeyDown(i,s,r){const m=s.value;if(m.selection.isExpanded)return r();if(i.key==="Enter"){i.preventDefault();const{startBlock:d}=m,o=d.text,l=t(o);return s.splitBlock().insertText(l).focus()}return r()}}}},93702:(j,I,e)=>{"use strict";e.d(I,{d:()=>t});function t({handler:n}){return{onKeyDown(i,s,r){return n&&i.key==="Enter"&&(i.shiftKey||i.ctrlKey)?(i.preventDefault(),n(i),s):r()}}}},16646:(j,I,e)=>{"use strict";e.d(I,{$:()=>i});var t=e(94038);const n=(0,t.TB)("mod+l");function i(){return{onKeyDown(s,r,m){if(n(s)){s.preventDefault();const{focusBlock:d,document:o}=r.value;r.moveAnchorToStartOfBlock(),o.getNextBlock(d.key)?r.moveFocusToStartOfNextBlock():r.moveFocusToEndOfText()}else return m();return!0}}}},38399:(j,I,e)=>{"use strict";e.d(I,{Z:()=>n});const n="prism-token"},54916:(j,I,e)=>{"use strict";e.d(I,{Z:()=>c,a:()=>v});var t=e(6570),n=e.n(t),i=e(45273),s=e(38399),r=e(77592),m=e(27702);function d(y){return y.object==="block"&&y.type==="code_block"}function o(y){return"javascript"}function l(y,E,C){const{decoration:u}=y;if(u.type!==s.Z)return C();const D=u.data.get("className");return m.createElement("span",{className:D},y.children)}class a extends(0,r.Record)({onlyIn:d,getSyntax:o,renderDecoration:l}){constructor(E){super(E)}}const g=a;function c(y={},E=n().languages){const C=new g(y);return{decorateNode:(u,D,P)=>{if(!C.onlyIn(u))return P();const S=i.gO.create(u),x=C.getSyntax(S),M=E[x];if(!M)return[];const O=S.getTexts().map(V=>V&&V.getText()).join(`
`),T=n().tokenize(O,M),U=v(T),L=D.value.data.set("tokens",U);return D.setData(L),h(C,T,S)},renderDecoration:(u,D,P)=>C.renderDecoration({children:u.children,decoration:u.decoration},D,P)}}function h(y,E,C){const u=C.getTexts(),D=[];let P=0,S=0;return u.forEach(x=>{S=P+x.getText().length;let M=0;function R(O,T){if(typeof O=="string"){if(T){const U=f({text:x,textStart:P,textEnd:S,start:M,end:M+O.length,className:`prism-token token ${T}`,block:C});U&&D.push(U)}M+=O.length}else if(T=`${T} ${O.type}`,O.alias&&(T+=" "+O.alias),typeof O.content=="string"){const U=f({text:x,textStart:P,textEnd:S,start:M,end:M+O.content.length,className:`prism-token token ${T}`,block:C});U&&D.push(U),M+=O.content.length}else for(let U=0;U<O.content.length;U+=1)R(O.content[U],T)}E.forEach(R),P=S+1}),D}function f({text:y,textStart:E,textEnd:C,start:u,end:D,className:P,block:S}){return u>=C||D<=E?null:(u=Math.max(u,E),D=Math.min(D,C),u-=E,D-=E,S.createDecoration({object:"decoration",anchor:{key:y.key,offset:u,object:"point"},focus:{key:y.key,offset:D,object:"point"},type:s.Z,data:{className:P}}))}function b(y){return typeof y=="string"?[{content:y,types:[],aliases:[]}]:Array.isArray(y)?y.flatMap(E=>b(E)):y instanceof n().Token?b(y.content).flatMap(E=>{let C=[];return typeof y.alias=="string"?C=[y.alias]:C=y.alias??[],{content:E.content,types:[y.type,...E.types],aliases:[...C,...E.aliases]}}):[]}function v(y){const E=b(y);if(!E.length)return[];const C=E[0];C.prev=null,C.next=E.length>=2?E[1]:null,C.offsets={start:0,end:C.content.length};for(let D=1;D<E.length-1;D++)E[D].prev=E[D-1],E[D].next=E[D+1],E[D].offsets={start:E[D-1].offsets.end,end:E[D-1].offsets.end+E[D].content.length};const u=E[E.length-1];return u.prev=E.length>=2?E[E.length-2]:null,u.next=null,u.offsets={start:E.length>=2?E[E.length-2].offsets.end:0,end:E.length>=2?E[E.length-2].offsets.end+u.content.length:u.content.length},E}},14524:(j,I,e)=>{"use strict";e.d(I,{b:()=>L});var t=e(89949),n=e(27702),i=e(27473),s=e(25472),r=e(66310),m=e(34568),d=e(60494);const o=w=>w.reduce((K,{items:B,label:W})=>(K.push({label:W,kind:m.c.GroupTitle}),B.reduce((_,k)=>(_.push(k),_),K)),[]),l=w=>w.reduce((K,B)=>K.length<B.label.length?B.label:K,""),a=(w,K,B)=>{const W=(0,d.Z)(B,{font:w.typography.fontFamilyMonospace,fontSize:w.typography.bodySmall.fontSize,fontWeight:"normal"}),_=c(W.width,w),k=g(W.height,w),A=h(k,K);return{listWidth:_,listHeight:A,itemHeight:k}},g=(w,K)=>{const B=K.spacing.gridSize*2;return w+B},c=(w,K)=>{const B=K.spacing.gridSize*3,W=800;return Math.min(Math.max(w+B,200),W)},h=(w,K)=>{const B=Math.min(K.length,10),W=100,_=B*w;return Math.max(_,W)};var f=e(42844),b=e(18112);const v=(w,K,B)=>({typeaheadItem:(0,f.css)({label:"type-ahead-item",zIndex:11,padding:w.spacing(1,1,1,2),border:w.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:w.colors.background.secondary,color:w.colors.text.secondary,boxShadow:`0 0 20px ${w.v1.colors.dropdownShadow}`,visibility:B===!0?"visible":"hidden",width:"250px",minHeight:`${K+parseInt(w.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),y=({item:w,height:K})=>{const B=w&&!!w.documentation,W=w?w.label:"",_=(0,b.a)(w?.documentation),k=(0,r.l4)(),A=v(k,K,B);return n.createElement("div",{className:(0,f.cx)([A.typeaheadItem])},n.createElement("b",null,W),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:_}}))};var E=e(3819),C=e.n(E),u=e(77709);const D=w=>({typeaheadItem:(0,f.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:w.typography.fontFamilyMonospace,padding:w.spacing(1,1,1,2),fontSize:w.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}),typeaheadItemSelected:(0,f.css)({label:"type-ahead-item-selected",backgroundColor:w.colors.background.secondary}),typeaheadItemMatch:(0,f.css)({label:"type-ahead-item-match",color:w.v1.palette.yellow,borderBottom:`1px solid ${w.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,f.css)({label:"type-ahead-item-group-title",color:w.colors.text.secondary,fontSize:w.typography.bodySmall.fontSize,lineHeight:w.typography.body.lineHeight,padding:w.spacing(1)})}),P=w=>{const K=(0,r.wW)(D),{isSelected:B,item:W,prefix:_,style:k,onMouseEnter:A,onMouseLeave:z,onClickItem:H}=w,Q=B?(0,f.cx)([K.typeaheadItem,K.typeaheadItemSelected]):(0,f.cx)([K.typeaheadItem]),X=(0,f.cx)([K.typeaheadItemMatch]),te=(0,f.cx)([K.typeaheadItemGroupTitle]),oe=W.label||"";return W.kind===m.c.GroupTitle?n.createElement("li",{className:te,style:k},n.createElement("span",null,oe)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:Q,style:k,onMouseDown:H,onMouseEnter:A,onMouseLeave:z,type:"button"},W.highlightParts!==void 0?n.createElement(u.H,{text:oe,highlightClassName:X,highlightParts:W.highlightParts}):n.createElement(C(),{textToHighlight:oe,searchWords:[_??""],autoEscape:!0,highlightClassName:X})))},S=(w,K)=>w-K*Math.floor(w/K);class x extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const K=o(this.props.groupedItems),B=l(K),{listWidth:W,listHeight:_,itemHeight:k}=a(this.context,K,B);this.setState({listWidth:W,listHeight:_,itemHeight:k,allItems:K})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(K,B)=>{if(this.state.typeaheadIndex!==null&&B.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(K.groupedItems,this.props.groupedItems)===!1){const W=o(this.props.groupedItems),_=l(W),{listWidth:k,listHeight:A,itemHeight:z}=a(this.context,W,_);this.setState({listWidth:k,listHeight:A,itemHeight:z,allItems:W,typeaheadIndex:null})}},this.onMouseEnter=K=>{this.setState({hoveredItem:K})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=K=>{const B=this.state.allItems.length;if(B){const W=this.state.typeaheadIndex||0;let _=S(W+K,B);this.state.allItems[_].kind===m.c.GroupTitle&&(_=S(_+K,B)),this.setState({typeaheadIndex:_});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const K=window.getSelection(),B=K&&K.anchorNode;if(B&&B.parentElement){const W=B.parentElement.getBoundingClientRect(),_=window.scrollX,k=window.scrollY;return`position: absolute; display: flex; top: ${W.top+k+W.height+6}px; left: ${W.left+_-2}px`}return""}render(){const{prefix:K,isOpen:B=!1,origin:W}=this.props,{allItems:_,listWidth:k,listHeight:A,itemHeight:z,hoveredItem:H,typeaheadIndex:Q}=this.state,X=H||Q,te=_[H||Q||0];return n.createElement(M,{origin:W,isOpen:B,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.t7,{ref:this.listRef,itemCount:_.length,itemSize:z,itemKey:oe=>{const Z=_&&_[oe];return Z?`${oe}-${Z.label}`:`${oe}`},width:k,height:A},({index:oe,style:Z})=>{const le=_&&_[oe];return le?n.createElement(P,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(le):{},isSelected:Q===null?!1:_[Q]===le,item:le,prefix:K,style:Z,onMouseEnter:()=>this.onMouseEnter(oe),onMouseLeave:this.onMouseLeave}):null})),X&&n.createElement(y,{height:A,item:te}))}}x.contextType=r.Ni;class M extends n.PureComponent{constructor(K){super(K);const{index:B=0,origin:W="query",style:_}=K;this.node=document.createElement("div"),this.node.setAttribute("style",_),this.node.classList.add("slate-typeahead",`slate-typeahead-${W}-${B}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),i.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var R=e(80553),O=e(95704),T=e(38399);const U=250;function L({onTypeahead:w,cleanText:K,onWillApplySuggestion:B,portalOrigin:W}){let _,k={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const A=(0,t.debounce)(V,U),z=H=>{k={...k,...H}};return{onBlur:(H,Q,X)=>(k={...k,groupedItems:[]},X()),onClick:(H,Q,X)=>(k={...k,groupedItems:[]},X()),onKeyDown:(H,Q,X)=>{const oe=k.groupedItems.length;switch(H.key){case"Escape":{if(oe)return H.preventDefault(),k={...k,groupedItems:[]},Q.insertText("");break}case"ArrowDown":case"ArrowUp":if(oe){H.preventDefault(),_.moveMenuIndex(H.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(H.shiftKey||H.ctrlKey)&&oe)return H.preventDefault(),_.insertSuggestion();break}case"Tab":{if(oe)return H.preventDefault(),_.insertSuggestion();break}default:{H.key.length===1&&A(Q,z,w,K);break}}return X()},commands:{selectSuggestion:(H,Q)=>{const X=k.groupedItems;if(!X||!X.length)return H;const te=H.applyTypeahead(Q);return A(H,z,w,K),te},applyTypeahead:(H,Q)=>{let X=Q.insertText||Q.label;const te=Q.kind==="function",oe=Q.move||0,Z=oe>0?oe:0,le=oe<0?-oe:0,{typeaheadPrefix:ce,typeaheadText:q,typeaheadContext:ne}=k;B&&(X=B(X,{groupedItems:k.groupedItems,typeaheadContext:ne,typeaheadPrefix:ce,typeaheadText:q}));const pe=Q.deleteBackwards||ce.length,ie=(K?K(q):q).length-ce.length,Se=q.indexOf(ce),Ce=ce&&(ie>0&&Se>-1||X===q)&&!te?ie+Se:0;if(X.match(/\n/)){const de=(0,R.xl)(X);return H.deleteBackward(pe).deleteForward(Ce).insertFragment(de).focus(),H}return k={...k,groupedItems:[]},H.snapshotSelection().deleteBackward(pe).deleteForward(Ce).insertText(X).moveForward(Z).moveBackward(le).focus(),H}},renderEditor(H,Q,X){if(Q.value.selection.isExpanded)return X();const te=X();return n.createElement(n.Fragment,null,te,n.createElement(x,{menuRef:oe=>_=oe,origin:W,prefix:k.typeaheadPrefix,isOpen:!!k.groupedItems.length,groupedItems:k.groupedItems,onSelectSuggestion:Q.selectSuggestion}))}}}const V=async(w,K,B,W)=>{if(!B)return;const{value:_}=w,{selection:k}=_,A=_.document.getClosestBlock(_.focusBlock.key),z=_.selection.start.offset-1,H=A&&A.getDecorations(w),Q=H?H.filter(re=>re.start.offset<=z&&re.end.offset>z&&re.type===T.Z).toArray():[],X=H&&H.filter(re=>re.end.offset<=z&&re.type===T.Z&&re.data.get("className").includes("label-key")).last(),te=X&&_.focusText.text.slice(X.start.offset,X.end.offset),oe=Q.map(re=>re.data.get("className")).join(" ").split(" ").filter(re=>re.length);let Z=_.focusText.text,le=Z.slice(0,k.focus.offset);Q.length&&(Z=_.focusText.text.slice(Q[0].start.offset,Q[0].end.offset),le=_.focusText.text.slice(Q[0].start.offset,k.focus.offset));const ce=le.match(/(?:!?=~?"?|")(.*)/);ce?le=ce[1]:W&&(le=W(le));const{suggestions:q,context:ne}=await B({prefix:le,text:Z,value:_,wrapperClasses:oe,labelKey:te||void 0,editor:w}),pe=q.map(re=>{if(!re.items)return re;const ie=re.searchFunctionType||(re.prefixMatch?O.Z.Prefix:O.Z.Word),Se=O.n[ie];let ye={...re};return le&&(re.skipFilter||(ye.items=ye.items.filter(Ce=>(Ce.filterText||Ce.label).length>=le.length),ye.items=Se(ye.items,le)),ye.items=ye.items.filter(Ce=>!(Ce.insertText===le||(Ce.filterText??Ce.label)===le))),re.skipSort||(ye.items=(0,t.sortBy)(ye.items,Ce=>Ce.sortText===void 0?Ce.sortValue!==void 0?Ce.sortValue:Ce.label:Ce.sortText||Ce.label)),ye}).filter(re=>re.items&&re.items.length);K({groupedItems:pe,typeaheadPrefix:le,typeaheadContext:ne,typeaheadText:Z}),w.blur().focus()}},29223:(j,I,e)=>{"use strict";e.d(I,{n:()=>h});var t=e(76808),n=e(27702),i=e(66310);function s(f){return(0,t.css)({".panel-options-group":{borderBottom:`1px solid ${f.colors.border.weak}`},".panel-options-group__header":{padding:f.spacing(1,2,1,1),position:"relative",display:"flex",alignItems:"center",cursor:"pointer",fontWeight:500,color:f.colors.text.primary,"&:hover":{background:f.colors.emphasize(f.colors.background.primary,.03)}},".panel-options-group__icon":{color:f.colors.text.secondary,marginRight:f.spacing(1),padding:f.spacing(0,.9,0,.6)},".panel-options-group__title":{position:"relative"},".panel-options-group__body":{padding:f.spacing(1,2,1,4)}})}function r(f){return(0,t.css)({".card-section":{marginBottom:f.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:f.colors.background.secondary,boxShadow:"none",padding:f.spacing(2),borderRadius:"4px","&:hover":{background:f.colors.emphasize(f.colors.background.secondary,.03)},".label-tag":{marginLeft:f.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:f.spacing(2)},".card-item-type":{color:f.colors.text.secondary,textTransform:"uppercase",fontSize:f.typography.size.sm,fontWeight:f.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:f.typography.size.sm},".card-item-name":{color:f.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:f.spacing(1)},".card-item-sub-name":{color:f.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:f.colors.text.secondary,textTransform:"uppercase",marginBottom:f.spacing(2),fontSize:f.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:f.typography.size.sm,display:"inline-block",marginLeft:f.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:f.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:f.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:f.typography.h3.fontSize},[f.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[f.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[f.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:f.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:"2px"},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:f.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:f.typography.h4.fontSize},".card-item-sub-name":{fontSize:f.typography.size.sm},".layout-selector":{marginRight:0}}})}var m=e(97289);function d(f){return(0,t.css)({html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",height:"100%",fontSize:`${f.typography.htmlFontSize}px`,fontFamily:f.typography.fontFamily,lineHeight:f.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:f.colors.mode},body:{height:"100%",width:"100%",position:"absolute",color:f.colors.text.primary,backgroundColor:f.colors.background.canvas,...o(f.typography.body)},"h1, .h1":o(f.typography.h1),"h2, .h2":o(f.typography.h2),"h3, .h3":o(f.typography.h3),"h4, .h4":o(f.typography.h4),"h5, .h5":o(f.typography.h5),"h6, .h6":o(f.typography.h6),p:{margin:f.spacing(0,0,2)},button:{letterSpacing:f.typography.body.letterSpacing,"&:focus-visible":(0,m.getFocusStyles)(f),"&:focus":{outline:"none"}},small:{fontSize:f.typography.bodySmall.fontSize},"b, strong":{fontWeight:f.typography.fontWeightMedium},em:{fontStyle:"italic",color:f.colors.text.primary},cite:{fontStyle:"normal"},".muted":{color:f.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:f.colors.text.primary},".text-warning":{color:f.colors.warning.text,"&:hover, &:focus":{color:f.colors.emphasize(f.colors.warning.text,.15)}},".text-error":{color:f.colors.error.text,"&:hover, &:focus":{color:f.colors.emphasize(f.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:f.colors.emphasize(f.colors.success.text,.15)}},a:{cursor:"pointer",color:f.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,m.getFocusStyles)(f),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:f.components.textHighlight.background,color:f.components.textHighlight.text,padding:0}})}function o(f){return{margin:0,fontSize:f.fontSize,lineHeight:f.lineHeight,fontWeight:f.fontWeight,letterSpacing:f.letterSpacing,fontFamily:f.fontFamily,marginBottom:"0.45em"}}function l(f){return(0,t.css)({"iframe.intercom-borderless-frame":{colorScheme:f.colors.mode}})}function a(f){return(0,t.css)({"input, button, select, textarea":{fontFamily:f.typography.body.fontFamily,fontSize:f.typography.body.fontSize,fontWeight:f.typography.body.fontWeight,lineHeight:f.typography.body.lineHeight},"input, select":{backgroundColor:f.components.input.background,color:f.components.input.text,border:"none",boxShadow:"none"},textarea:{height:"auto"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"}})}function g(f){return(0,t.css)({})}function c(f){const b=f.breakpoints.values.xxl+f.spacing.gridSize*2+f.components.sidemenu.width;return(0,t.css)({".grafana-app":{display:"flex",alignItems:"stretch",position:"absolute",width:"100%",height:"100%",top:0,left:0},".main-view":{position:"relative",display:"flex",flexDirection:"column",flexGrow:1,height:"100%",flex:"1 1 0",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:f.spacing(2),paddingRight:f.spacing(2),[f.breakpoints.up("sm")]:{margin:f.spacing(0,1)},[f.breakpoints.up("md")]:{margin:f.spacing(0,2)},[`@media (min-width: ${b}px)`]:{maxWidth:`${f.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:f.spacing(2),paddingLeft:f.spacing(2),paddingRight:f.spacing(2)},".page-body":{padding:f.spacing(1),background:f.components.panel.background,border:`1px solid ${f.components.panel.borderColor}`,marginBottom:"32px",[f.breakpoints.up("md")]:{padding:f.spacing(2)},[f.breakpoints.up("lg")]:{padding:f.spacing(3)}},".page-heading":{fontSize:f.typography.h4.fontSize,marginTop:0,marginBottom:f.spacing(2)},".page-action-bar":{marginBottom:f.spacing(2),display:"flex",alignItems:"flex-start",gap:f.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:f.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:f.spacing(2)},".page-sub-heading-icon":{marginLeft:f.spacing(1),marginTop:f.spacing(.5)},".page-hidden":{display:"none"}})}function h(){const f=(0,i.l4)();return n.createElement(t.Global,{styles:[d(f),l(f),a(f),c(f),r(f),s(f),g(f)]})}},66310:(j,I,e)=>{"use strict";e.d(I,{Fg:()=>g,HE:()=>a,Ni:()=>o,Zz:()=>l,l4:()=>c,sJ:()=>b,wW:()=>f,yK:()=>h});var t=e(43313),n=e.n(t),i=e(27702),s=e(45540),r=e(80402);let m=null;const d=new WeakMap,o=i.createContext((0,s.j)());o.displayName="ThemeContext";const l=v=>{const y=E=>{const C=m||o;return i.createElement(C.Consumer,null,u=>i.createElement(v,{...E,theme:u.v1}))};return y.displayName=`WithTheme(${v.displayName})`,n()(y,v),y},a=v=>{const y=E=>{const C=m||o;return i.createElement(C.Consumer,null,u=>i.createElement(v,{...E,theme:u}))};return y.displayName=`WithTheme(${v.displayName})`,n()(y,v),y};function g(){return(0,i.useContext)(m||o).v1}function c(){return(0,i.useContext)(m||o)}function h(v){const y=g();let E=d.get(v);return E||(E=(0,r.B)(v),d.set(v,E)),E(y)}function f(v){const y=c();let E=d.get(v);return E||(E=(0,r.B)(v),d.set(v,E)),E(y)}const b=v=>(m=i.createContext(v),()=>{m=null})},57907:(j,I,e)=>{"use strict";e.d(I,{nz:()=>d.n,Ni:()=>t.Ni,gh:()=>s,Zu:()=>r,sJ:()=>t.sJ,GU:()=>o,Bb:()=>m.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(66310),n=e(45540);let i;const s=(l="dark")=>i?i(l):(0,n.j)({colors:{mode:l}}).v1,r=l=>(i=l,()=>{i=null});var m=e(80402),d=e(29223),o=e(97289)},97289:(j,I,e)=>{"use strict";e.r(I),e.d(I,{cardChrome:()=>n,focusCss:()=>o,getFocusStyles:()=>a,getMouseFocusStyles:()=>l,getTooltipContainerStyles:()=>g,hoverColor:()=>i,listItem:()=>s,listItemSelected:()=>r,mediaUp:()=>m});var t=e(71685);function n(c){return`
    background: ${c.colors.background.secondary};
    &:hover {
      background: ${i(c.colors.background.secondary,c)};
    }
    box-shadow: ${c.components.panel.boxShadow};
    border-radius: ${c.shape.radius.default};
`}function i(c,h){return h.isDark?(0,t.Z)(c).brighten(2).toString():(0,t.Z)(c).darken(2).toString()}function s(c){return`
  background: ${c.colors.background.secondary};
  &:hover {
    background: ${i(c.colors.background.secondary,c)};
  }
  box-shadow: ${c.components.panel.boxShadow};
  border-radius: ${c.shape.radius.default};
`}function r(c){return`
    background: ${i(c.colors.background.secondary,c)};
    color: ${c.colors.text.maxContrast};
`}function m(c){return`only screen and (min-width: ${c})`}const d=c=>c.hasOwnProperty("v1"),o=c=>{const h=d(c),f=h?c.colors.background.canvas:c.colors.bodyBg,b=h?c.colors.primary.main:c.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${f}, 0 0 0px 4px ${b};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function l(c){return{outline:"none",boxShadow:"none"}}function a(c){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${c.colors.background.canvas}, 0 0 0px 4px ${c.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const g=c=>({overflow:"hidden",background:c.colors.background.secondary,boxShadow:c.shadows.z2,maxWidth:"800px",padding:c.spacing(1),borderRadius:c.shape.radius.default,zIndex:c.zIndex.tooltip})},80402:(j,I,e)=>{"use strict";e.d(I,{B:()=>n});var t=e(82152);function n(i){return(0,t.Z)(i)}},34568:(j,I,e)=>{"use strict";e.d(I,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},6276:()=>{},4680:(j,I,e)=>{"use strict";e.d(I,{BI:()=>i,WZ:()=>r,e7:()=>s,iJ:()=>t.iJ});var t=e(8553),n=e(29241);const i=()=>Object.keys(t._S);function s(m){return r(m?.type)}function r(m){if(m)switch(m){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.enum:return"list-ol";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},74032:(j,I,e)=>{"use strict";e.r(I),e.d(I,{CompletionItemKind:()=>r.c,getAvailableIcons:()=>o.BI,getFieldTypeIcon:()=>o.e7,getFieldTypeIconName:()=>o.WZ,toIconName:()=>o.iJ});var t=e(10298),n=e.n(t),b={};for(const v in t)v!=="default"&&(b[v]=()=>t[v]);e.d(I,b);var i=e(9675),s=e.n(i),b={};for(const v in i)v!=="default"&&(b[v]=()=>i[v]);e.d(I,b);var r=e(34568),m=e(6276),d=e.n(m),b={};for(const v in m)["default","CompletionItemKind"].indexOf(v)<0&&(b[v]=()=>m[v]);e.d(I,b);var o=e(4680),l=e(69226),a=e.n(l),b={};for(const v in l)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(v)<0&&(b[v]=()=>l[v]);e.d(I,b);var g=e(21134),c=e.n(g),b={};for(const v in g)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(v)<0&&(b[v]=()=>g[v]);e.d(I,b);var h=e(80012),f=e.n(h),b={};for(const v in h)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(v)<0&&(b[v]=()=>h[v]);e.d(I,b)},9675:()=>{},80012:()=>{},69226:()=>{},21134:()=>{},10298:()=>{},54826:(j,I,e)=>{"use strict";e.d(I,{i:()=>t});const t=(n,i)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&i())}},5354:(j,I,e)=>{"use strict";e.d(I,{Gc:()=>b,Jx:()=>r,O9:()=>g,Wm:()=>y,_V:()=>o,bM:()=>v,f7:()=>l,iV:()=>a,ns:()=>d,te:()=>m});var t=e(89949),n=e.n(t),i=e(71685);const s=4,r="rgba(0, 211, 255, 1)",m="rgba(11, 237, 50, 1)",d="rgba(237, 46, 24, 1)",o="rgba(150, 150, 150, 1)",l="rgba(247, 149, 32, 1)",a=.09,g=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function c(E){const C=(0,t.map)(E,h),u=(0,t.sortBy)(C,["h"]),D=(0,t.chunk)(u,s),P=(0,t.map)(D,x=>(0,t.sortBy)(x,"l")),S=(0,t.flattenDeep)((0,t.zip)(...P));return(0,t.map)(S,f)}function h(E){return(0,i.Z)(E).toHsl()}function f(E){return(0,i.Z)(E).toHexString()}function b(E){return(0,i.Z)(E).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function v(E,C){const u=(0,i.Z)(E),D=u.getBrightness();return u.getAlpha()<.3?C?"rgb(247, 248, 250)":"rgb(32, 34, 38)":D>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let y=c(g)},97902:(j,I,e)=>{"use strict";e.d(I,{R:()=>t,g:()=>n});const t=i=>i().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=i=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(i)},46414:(j,I,e)=>{"use strict";e.d(I,{x:()=>t});function t(n,i,s){}},56160:(j,I,e)=>{"use strict";e.d(I,{O:()=>t});function t(n){const s=n.lastIndexOf("."),r=n.substring(s),m=n.substring(0,s);return m.length<16?n:`${m.substring(0,16)}...${r}`}},37221:(j,I,e)=>{"use strict";e.d(I,{C:()=>i});var t=e(89949),n=e.n(t);function i(s,r){let m=0,d=s.indexOf(r);r=r.replace(/\s/g,"");const o=[];if(d!==-1)return{distance:0,found:!0,ranges:[{start:d,end:d+r.length-1}]};for(const l of r){const a=s.indexOf(l,d);if(a===-1)return{distance:1/0,ranges:[],found:!1};if(d!==-1&&(m+=a-d),d=a+1,o.length===0)o.push({start:a,end:a});else{const g=(0,t.last)(o);a===g.end+1?g.end++:o.push({start:a,end:a})}}return{distance:m,ranges:o,found:!0}}},70610:(j,I,e)=>{"use strict";e.d(I,{c:()=>m,t:()=>o});var t=e(62937),n=e(27702),i=e(83399),s=e(92046);function r(){typeof t.ZP.options.resources!="object"&&t.ZP.use(i.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const m=l=>(r(),n.createElement(s.c,{...l})),d=t.ZP.t,o=(l,a,g)=>(r(),d(l,a,g))},42129:(j,I,e)=>{"use strict";e.d(I,{ns:()=>r.ns,Jx:()=>r.Jx,Qi:()=>t,JU:()=>m.JU,_V:()=>r._V,zG:()=>E,te:()=>r.te,f7:()=>r.f7,iV:()=>r.iV,Ot:()=>s,Yi:()=>d.Yi,nu:()=>f.Z,_J:()=>b._J,xq:()=>y.x,MX:()=>c.MX,O9:()=>r.O9,hu:()=>v.h,C6:()=>C.C,AE:()=>c.AE,iu:()=>g.i,np:()=>a.n,vm:()=>l.vm,tu:()=>l.tu,Bx:()=>l.Bx,bM:()=>r.bM,Gc:()=>r.Gc,z3:()=>m.z3,go:()=>o.g,Rc:()=>o.R,xl:()=>d.xl,l1:()=>d.l1,X1:()=>c.X1,FE:()=>m.FE,Wm:()=>r.Wm,NW:()=>h.N,Gu:()=>m.Gu});var t={};e.r(t),e.d(t,{getNextCharacter:()=>i,getPreviousCousin:()=>n}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(u){const D=(this.document||this.ownerDocument).querySelectorAll(u);let P=this,S;do{for(S=D.length;--S>=0&&D.item(S)!==P;);P=P.parentElement}while(S<0&&P);return P});function n(u,D){let P=u.parentElement.previousSibling,S;for(;P;){if(S=P.querySelector(D),S)return S;P=P.previousSibling}}function i(u){const D=(u||window).getSelection();if(!D||!D.anchorNode)return null;const P=D.getRangeAt(0),S=D.anchorNode.textContent,x=P.startOffset;return S.slice(x,x+1)}var s=e(66258),r=e(5354),m=e(61203),d=e(80553),o=e(97902),l=e(64714),a=e(28388),g=e(9451),c=e(11724),h=e(75340),f=e(95704),b=e(79690),v=e(12343),y=e(46414),E=(u=>(u.id="id",u.title="title",u.subTitle="subTitle",u.mainStat="mainStat",u.secondaryStat="secondaryStat",u.source="source",u.target="target",u.detail="detail__",u.arc="arc__",u.color="color",u))(E||{}),C=e(37221)},12343:(j,I,e)=>{"use strict";e.d(I,{h:()=>s});var t=e(89949),n=e.n(t);const i=(0,t.throttle)((...r)=>{console.log(...r)},500),s=r=>{let m=!1;return{logger:(d,o=!1,...l)=>{},enable:()=>m=!0,disable:()=>m=!1,isEnabled:()=>m}}},11724:(j,I,e)=>{"use strict";e.d(I,{AE:()=>r,MX:()=>d,X1:()=>m});let t;const n=new Map,i=500;let s="";function r(){return t||(t=document.createElement("canvas").getContext("2d")),t}function m(o,l,a=400){const g=`${a} ${l}px 'Inter'`,c=o+g,h=n.get(c);if(h)return h;const f=r();s!==g&&(f.font=s=g);const b=f.measureText(o);return n.size===i&&n.clear(),n.set(c,b),b}function d(o,l,a,g,c,h){const f=m(o,14,h),b=l/(f.width+2)*14,v=a/g,y=Math.min(v,b);return Math.min(y,c??y)}},66258:(j,I,e)=>{"use strict";e.r(I),e.d(I,{getChildId:()=>n,renderOrCallToRender:()=>i});var t=e(27702);function n(s){let r;const m=t.Children.only(s);return"id"in m?.props?r=m.props.id:"inputId"in m.props&&(r=m?.props.inputId),typeof r=="string"?r:void 0}function i(s,r){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function"&&r)return s(r);throw new Error(`${s} is not a React element nor a function that returns React element`)}},28388:(j,I,e)=>{"use strict";e.d(I,{n:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const i=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(r=>{i.style[r]=s[r]}),document.body.appendChild(i),t=i.offsetWidth-i.clientWidth,document.body.removeChild(i)}else t=0;return t||0}},95704:(j,I,e)=>{"use strict";e.d(I,{Z:()=>n,n:()=>m});var t=e(37221),n=(d=>(d.Word="Word",d.Prefix="Prefix",d.Fuzzy="Fuzzy",d))(n||{});const m={Word:(d,o)=>d.filter(l=>(l.filterText||l.label).includes(o)),Prefix:(d,o)=>d.filter(l=>(l.filterText||l.label).startsWith(o)),Fuzzy:(d,o)=>(o=o.toLowerCase(),d.filter(l=>{const{distance:a,ranges:g,found:c}=(0,t.C)(l.label.toLowerCase(),o);return c?(l.sortValue=a,l.highlightParts=g,!0):!1}))}},80553:(j,I,e)=>{"use strict";e.d(I,{Yi:()=>n,l1:()=>s,xl:()=>i});var t=e(45273);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},i=(r,m)=>{const d=r.split(`
`).map(l=>t.gO.create({type:"code_line",nodes:[t.xv.create(l)]})),o=t.gO.create({data:{syntax:m},type:"code_block",nodes:d});return t.BB.create({nodes:[o]})},s=(r,m)=>{const d=i(r,m);return t.B4.create({document:d})}},9451:(j,I,e)=>{"use strict";e.d(I,{i:()=>t});const t=(n,i)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:i.index})),!!s){for(let r=0;r<s?.length;r++)if(s[r].onClick){const m=s[r].onClick;s[r].onClick=d=>{d.ctrlKey||d.metaKey||d.shiftKey||(d.preventDefault(),m(d,{field:n,rowIndex:i.index}))}}return s}}},64714:(j,I,e)=>{"use strict";e.d(I,{Bx:()=>s,tu:()=>i,vm:()=>r});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function i(o=""){const l=m(o.toLowerCase());return Math.abs(l%t.length)}function s(o=""){const l=i(o);return r(l)}function r(o){return{color:t[o],borderColor:n[o]}}function m(o){let l=5381;for(let a=0;a<o.length;a++)l=(l<<5)+l+o.charCodeAt(a);return l}var d={getTagColorsFromName:s}},5723:(j,I,e)=>{"use strict";e.d(I,{k:()=>i});var t=e(42844),n=e(96750);function i(s,r,m,d,o){return{arrow:(0,t.css)({height:"1rem",width:"1rem",position:"absolute",pointerEvents:"none","&::before":{borderStyle:"solid",content:'""',display:"block",height:0,margin:"auto",width:0},"&::after":{borderStyle:"solid",content:'""',display:"block",height:0,margin:"auto",position:"absolute",width:0}}),container:(0,t.css)({backgroundColor:r,borderRadius:s.shape.radius.default,border:`1px solid ${m}`,boxShadow:s.shadows.z2,color:d,fontSize:s.typography.bodySmall.fontSize,padding:s.spacing(o.topBottom,o.rightLeft),transition:"opacity 0.3s",zIndex:s.zIndex.tooltip,maxWidth:"400px",overflowWrap:"break-word","&[data-popper-interactive='false']":{pointerEvents:"none"},"&[data-popper-placement*='bottom'] > div[data-popper-arrow='true']":{left:0,marginTop:"-7px",top:0,"&::before":{borderColor:`transparent transparent ${m} transparent`,borderWidth:"0 8px 7px 8px",position:"absolute",top:"-1px"},"&::after":{borderColor:`transparent transparent ${r} transparent`,borderWidth:"0 8px 7px 8px"}},"&[data-popper-placement*='top'] > div[data-popper-arrow='true']":{bottom:0,left:0,marginBottom:"-14px","&::before":{borderColor:`${m} transparent transparent transparent`,borderWidth:"7px 8px 0 7px",position:"absolute",top:"1px"},"&::after":{borderColor:`${r} transparent transparent transparent`,borderWidth:"7px 8px 0 7px"}},"&[data-popper-placement*='right'] > div[data-popper-arrow='true']":{left:0,marginLeft:"-10px","&::before":{borderColor:`transparent ${m} transparent transparent`,borderWidth:"7px 6px 7px 0"},"&::after":{borderColor:`transparent ${r} transparent transparent`,borderWidth:"6px 7px 7px 0",left:"2px",top:"1px"}},"&[data-popper-placement*='left'] > div[data-popper-arrow='true']":{marginRight:"-11px",right:0,"&::before":{borderColor:`transparent transparent transparent ${m}`,borderWidth:"7px 0 6px 7px"},"&::after":{borderColor:`transparent transparent transparent ${r}`,borderWidth:"6px 0 5px 5px",left:"1px",top:"1px"}},code:{border:"none",display:"inline",background:n.darken(r,.1),color:d},pre:{background:n.darken(r,.1),color:d},a:{color:d,textDecoration:"underline"},"a:hover":{textDecoration:"none"}}),headerClose:(0,t.css)({color:s.colors.text.secondary,position:"absolute",right:s.spacing(1),top:s.spacing(1.5),backgroundColor:"transparent",border:0}),header:(0,t.css)({paddingTop:s.spacing(1),paddingBottom:s.spacing(2)}),body:(0,t.css)({paddingTop:s.spacing(1),paddingBottom:s.spacing(1)}),footer:(0,t.css)({paddingTop:s.spacing(2),paddingBottom:s.spacing(1)})}}},75340:(j,I,e)=>{"use strict";e.d(I,{N:()=>n});var t=e(27702);function n(){const[i,s]=(0,t.useState)(0);return()=>s(r=>r+1)}},61203:(j,I,e)=>{"use strict";e.d(I,{FE:()=>s,Gu:()=>n,JU:()=>t,z3:()=>i});var t=(r=>(r.onBlur="onBlur",r.onFocus="onFocus",r.onChange="onChange",r))(t||{});const n=(r,m)=>{const d=m.reduce((o,l)=>l.rule(r)?o:o.concat(l.errorMessage),[]);return d.length>0?d:null},i=(r,m)=>m&&m[r],s=(r,m)=>({rule:d=>!!d.match(r),errorMessage:m||"Value is not valid"})},53327:(j,I,e)=>{"use strict";e.d(I,{z:()=>t});const t={Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`Panel header item ${n}`,menuItems:n=>`data-testid Panel menu item ${n}`,menu:n=>`data-testid Panel menu ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`,loadingBar:()=>"Panel loading bar",HoverWidget:{container:"data-testid hover-header-container",dragIcon:"data-testid drag-icon"}},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:n=>`VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"data-testid toggle-viz-picker",toggleVizOptions:"data-testid toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`${n}`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"data-testid Transform editor tab content",newTransform:n=>`data-testid New transform ${n}`,transformationEditor:n=>`data-testid Transformation editor ${n}`,transformationEditorDebugger:n=>`data-testid Transformation editor debugger ${n}`},Transforms:{card:n=>`data-testid New transform ${n}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations",addTransformationButton:"data-testid add transformation button"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`,itemButton:n=>`data-testid ${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"data-testid Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"data-testid Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:n=>`Value picker button ${n}`,select:n=>`Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"},Annotations:{annotationsTypeInput:"annotations-type-input",annotationsChoosePanelInput:"choose-panels-input"}}},74639:(j,I,e)=>{"use strict";e.d(I,{wl:()=>i});var t=e(53327);const i={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"data-testid Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},EditDataSource:{url:s=>`/datasources/edit/${s}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"data-testid Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:s=>`data-testid ${s}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`,Annotations:{annotationsWrapper:"data-testid annotation-wrapper",annotationLabel:s=>`data-testid Dashboard annotations submenu Label ${s}`,annotationToggle:s=>`data-testid Dashboard annotations submenu Toggle ${s}`}},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"},NewAnnotation:{panelFilterSelect:"data-testid annotations-panel-filter",showInLabel:"show-in-label",previewInDashboard:"data-testid annotations-preview"}},Variables:{List:{addVariableCTA:t.z.CallToActionCard.button("Add variable"),addVariableCTAV2:t.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}},Annotations:{marker:"data-testid annotation-marker"}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",SettingsDropdown:"data-testid public dashboard settings dropdown",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},BrowseDashbards:{table:{row:s=>`data-testid ${s} row`,checkbox:s=>`data-testid ${s} checkbox`}},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button",pauseSwitch:"data-testid public dashboard pause switch"}},UserListPage:{tabs:{allUsers:"data-testid all-users-tab",orgUsers:"data-testid org-users-tab",publicDashboardsUsers:"data-testid public-dashboards-users-tab",users:"data-testid users-tab"},org:{url:"/org/users"},admin:{url:"/admin/users"},publicDashboards:{container:"data-testid public-dashboards-users-list"},UserListAdminPage:{container:"data-testid user-list-admin-page"},UsersListPage:{container:"data-testid users-list-page"},UsersListPublicDashboardsPage:{container:"data-testid users-list-public-dashboards-page",DashboardsListModal:{listItem:s=>`data-testid dashboards-list-item-${s}`}}}},components:t.z}},64167:(j,I,e)=>{"use strict";e.d(I,{As:()=>w,B5:()=>t,Bd:()=>X,FI:()=>v,IG:()=>T,Jp:()=>g,KC:()=>f,LB:()=>l,M8:()=>W,Q8:()=>s,QH:()=>B,Ss:()=>z,UV:()=>o,Y4:()=>Q,ap:()=>U,b8:()=>H,bQ:()=>u,eK:()=>n,f3:()=>V,h2:()=>_,i3:()=>P,iT:()=>oe,jG:()=>L,jK:()=>S,kW:()=>m,kv:()=>d,l8:()=>c,o0:()=>y,pR:()=>h,pc:()=>O,pu:()=>E,q1:()=>r,v7:()=>k,wN:()=>C,wf:()=>b,wm:()=>M,xy:()=>i,yK:()=>a});var t=(Z=>(Z.Linear="linear",Z.Quad="quad",Z))(t||{}),n=(Z=>(Z.Clamped="clamped",Z.Mod="mod",Z))(n||{}),i=(Z=>(Z.Field="field",Z.Fixed="fixed",Z.Template="template",Z))(i||{}),s=(Z=>(Z.Field="field",Z.Fixed="fixed",Z.Mapping="mapping",Z))(s||{}),r=(Z=>(Z.Auto="auto",Z.Coords="coords",Z.Geohash="geohash",Z.Lookup="lookup",Z))(r||{}),m=(Z=>(Z.Count="count",Z.Size="size",Z))(m||{}),d=(Z=>(Z.auto="auto",Z.ge="ge",Z.le="le",Z.unknown="unknown",Z))(d||{}),o=(Z=>(Z.Ascending="Ascending",Z.Descending="Descending",Z))(o||{}),l=(Z=>(Z.Auto="auto",Z.Bottom="bottom",Z.Hidden="hidden",Z.Left="left",Z.Right="right",Z.Top="top",Z))(l||{}),a=(Z=>(Z.Series="series",Z.Text="text",Z))(a||{}),g=(Z=>(Z.Always="always",Z.Auto="auto",Z.Never="never",Z))(g||{}),c=(Z=>(Z.Bars="bars",Z.Line="line",Z.Points="points",Z))(c||{}),h=(Z=>(Z.Constant="constant",Z.NegativeY="negative-Y",Z))(h||{}),f=(Z=>(Z.Linear="linear",Z.Smooth="smooth",Z.StepAfter="stepAfter",Z.StepBefore="stepBefore",Z))(f||{}),b=(Z=>(Z.Linear="linear",Z.Log="log",Z.Ordinal="ordinal",Z.Symlog="symlog",Z))(b||{}),v=(Z=>(Z.Hue="hue",Z.None="none",Z.Opacity="opacity",Z.Scheme="scheme",Z))(v||{}),y=(Z=>(Z.None="none",Z.Normal="normal",Z.Percent="percent",Z))(y||{}),E=(Z=>(Z[Z.After=1]="After",Z[Z.Before=-1]="Before",Z[Z.Center=0]="Center",Z))(E||{}),C=(Z=>(Z[Z.Horizontal=0]="Horizontal",Z[Z.Vertical=1]="Vertical",Z))(C||{}),u=(Z=>(Z[Z.Down=-1]="Down",Z[Z.Left=-1]="Left",Z[Z.Right=1]="Right",Z[Z.Up=1]="Up",Z))(u||{});const D={dash:[]};var P=(Z=>(Z.Area="area",Z.Dashed="dashed",Z.DashedAndArea="dashed+area",Z.Line="line",Z.LineAndArea="line+area",Z.Off="off",Z.Series="series",Z))(P||{}),S=(Z=>(Z.Hidden="hidden",Z.List="list",Z.Table="table",Z))(S||{});const x={calcs:[]};var M=(Z=>(Z.Auto="auto",Z.Horizontal="horizontal",Z.Vertical="vertical",Z))(M||{});const R={timezone:[]};var O=(Z=>(Z.Background="background",Z.BackgroundSolid="background_solid",Z.None="none",Z.Value="value",Z))(O||{}),T=(Z=>(Z.Area="area",Z.Line="line",Z.None="none",Z))(T||{}),U=(Z=>(Z.Auto="auto",Z.Center="center",Z))(U||{}),L=(Z=>(Z.Auto="auto",Z.Name="name",Z.None="none",Z.Value="value",Z.ValueAndName="value_and_name",Z))(L||{}),V=(Z=>(Z.Multi="multi",Z.None="none",Z.Single="single",Z))(V||{}),w=(Z=>(Z.Ascending="asc",Z.Descending="desc",Z.None="none",Z))(w||{});const K={calcs:[]};var B=(Z=>(Z.Basic="basic",Z.Gradient="gradient",Z.Lcd="lcd",Z))(B||{}),W=(Z=>(Z.Color="color",Z.Hidden="hidden",Z.Text="text",Z))(W||{}),_=(Z=>(Z.Auto="auto",Z.BasicGauge="basic",Z.ColorBackground="color-background",Z.ColorBackgroundSolid="color-background-solid",Z.ColorText="color-text",Z.Custom="custom",Z.Gauge="gauge",Z.GradientGauge="gradient-gauge",Z.Image="image",Z.JSONView="json-view",Z.LcdGauge="lcd-gauge",Z.Sparkline="sparkline",Z))(_||{}),k=(Z=>(Z.Basic="basic",Z.Gradient="gradient",Z))(k||{});const A={fields:[],reducer:[]};var z=(Z=>(Z.Lg="lg",Z.Md="md",Z.Sm="sm",Z))(z||{}),H=(Z=>(Z.CSV="csv",Z.Date="date",Z.Distributed="distributed",Z.DoubleQuote="doublequote",Z.Glob="glob",Z.HTML="html",Z.JSON="json",Z.Lucene="lucene",Z.PercentEncode="percentencode",Z.Pipe="pipe",Z.QueryParam="queryparam",Z.Raw="raw",Z.Regex="regex",Z.SQLString="sqlstring",Z.SingleQuote="singlequote",Z.Text="text",Z.UriEncode="uriencode",Z))(H||{}),Q=(Z=>(Z.exact="exact",Z.none="none",Z.numbers="numbers",Z.signature="signature",Z))(Q||{}),X=(Z=>(Z.EQ="eq",Z.GT="gt",Z.GTE="gte",Z.LT="lt",Z.LTE="lte",Z.NEQ="neq",Z))(X||{});const te={align:"auto",inspect:!1},oe="browser"},8238:(j,I,e)=>{"use strict";e.d(I,{AU:()=>s,vC:()=>i});var t=e(64167);const n="10.1.0",i={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:t.wm.Auto,showValue:t.Jp.Auto,stacking:t.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},s={fillOpacity:80,gradientMode:t.FI.None,lineWidth:1}},84283:(j,I,e)=>{"use strict";e.d(I,{v:()=>i});var t=e(64167);const n="10.1.0",i={displayMode:t.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0,valueMode:t.M8.Color}},97067:(j,I,e)=>{"use strict";e.d(I,{v:()=>n});const t="10.1.0",n={selectedSeries:0}},84317:(j,I,e)=>{"use strict";e.d(I,{v:()=>n});const t="10.1.0",n={showThresholdLabels:!1,showThresholdMarkers:!0}},1472:(j,I,e)=>{"use strict";e.d(I,{vC:()=>n});const t="10.1.0",n={layers:[]},i={allLayers:!0,id:"zero",lat:0,lon:0,zoom:1};var s=(m=>(m.Details="details",m.None="none",m))(s||{}),r=(m=>(m.Coords="coords",m.Fit="fit",m.Zero="zero",m))(r||{})},2137:(j,I,e)=>{"use strict";e.d(I,{vC:()=>r});var t=e(64167);const n="10.1.0";var i=(m=>(m.Opacity="opacity",m.Scheme="scheme",m))(i||{}),s=(m=>(m.Exponential="exponential",m.Linear="linear",m))(s||{});const r={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},showValue:t.Jp.Auto,tooltip:{show:!0,yHistogram:!1}}},24839:(j,I,e)=>{"use strict";e.d(I,{AU:()=>s,vC:()=>i});var t=e(64167);const n="10.1.0",i={bucketOffset:0},s={fillOpacity:80,gradientMode:t.FI.None,lineWidth:1}},69701:(j,I,e)=>{"use strict";e.d(I,{v:()=>n});const t="10.1.0",n={showImage:!0}},93848:(j,I,e)=>{"use strict";e.d(I,{vC:()=>m});const t="10.1.0";var n=(d=>(d.Donut="donut",d.Pie="pie",d))(n||{}),i=(d=>(d.Name="name",d.Percent="percent",d.Value="value",d))(i||{}),s=(d=>(d.Percent="percent",d.Value="value",d))(s||{});const r={values:[]},m={displayLabels:[]}},73797:(j,I,e)=>{"use strict";e.d(I,{v:()=>i});var t=e(64167);const n="10.1.0",i={colorMode:t.pc.Value,graphMode:t.IG.Area,justifyMode:t.ap.Auto,textMode:t.jG.Auto}},39973:(j,I,e)=>{"use strict";e.d(I,{AU:()=>s,vC:()=>i});var t=e(64167);const n="10.1.0",i={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:t.Jp.Auto},s={fillOpacity:70,lineWidth:0}},10484:(j,I,e)=>{"use strict";e.d(I,{AU:()=>s,vC:()=>i});var t=e(64167);const n="10.1.0",i={colWidth:.9,rowHeight:.9,showValue:t.Jp.Auto},s={fillOpacity:70,lineWidth:1}},91813:(j,I,e)=>{"use strict";e.d(I,{v:()=>i});var t=e(64167);const n="10.1.0",i={cellHeight:t.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},37645:(j,I,e)=>{"use strict";e.d(I,{vC:()=>m});const t="10.1.0";var n=(d=>(d.Code="code",d.HTML="html",d.Markdown="markdown",d))(n||{}),i=(d=>(d.Go="go",d.Html="html",d.Json="json",d.Markdown="markdown",d.Plaintext="plaintext",d.Sql="sql",d.Typescript="typescript",d.Xml="xml",d.Yaml="yaml",d))(i||{});const s="plaintext",r={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},m={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},34094:(j,I,e)=>{"use strict";e.d(I,{vC:()=>d});var t=e(64167);const n="10.1.0";var i=(o=>(o.Auto="auto",o.Manual="manual",o))(i||{}),s=(o=>(o.Lines="lines",o.Points="points",o.PointsAndLines="points+lines",o))(s||{});const r={exclude:[]},m={label:t.Jp.Auto,show:"points"},d={series:[]}},66805:(j,I,e)=>{"use strict";e.d(I,{AU:()=>P,G_:()=>s,Gu:()=>l,H3:()=>h,Hi:()=>b,NU:()=>C,Ql:()=>x,SJ:()=>S,Vb:()=>u,ZM:()=>D,bn:()=>i,gW:()=>r});const t={tags:[]},n={exclude:!1,ids:[]},i={list:[]},s={enable:!0,hide:!1},r={id:"00000000-0000-0000-0000-000000000000",multi:!1,options:[],skipUrlSync:!1};var m=(M=>(M[M.never=0]="never",M[M.onDashboardLoad=1]="onDashboardLoad",M[M.onTimeRangeChanged=2]="onTimeRangeChanged",M))(m||{}),d=(M=>(M[M.dontHide=0]="dontHide",M[M.hideLabel=1]="hideLabel",M[M.hideVariable=2]="hideVariable",M))(d||{}),o=(M=>(M[M.alphabeticalAsc=1]="alphabeticalAsc",M[M.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",M[M.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",M[M.alphabeticalDesc=2]="alphabeticalDesc",M[M.disabled=0]="disabled",M[M.numericalAsc=3]="numericalAsc",M[M.numericalDesc=4]="numericalDesc",M))(o||{}),l=(M=>(M.Done="Done",M.Error="Error",M.Loading="Loading",M.NotStarted="NotStarted",M.Streaming="Streaming",M))(l||{});const a={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var g=(M=>(M.ContinuousBlPu="continuous-BlPu",M.ContinuousBlYlRd="continuous-BlYlRd",M.ContinuousBlues="continuous-blues",M.ContinuousGrYlRd="continuous-GrYlRd",M.ContinuousGreens="continuous-greens",M.ContinuousPurples="continuous-purples",M.ContinuousRdYlGr="continuous-RdYlGr",M.ContinuousReds="continuous-reds",M.ContinuousYlBl="continuous-YlBl",M.ContinuousYlRd="continuous-YlRd",M.Fixed="fixed",M.PaletteClassic="palette-classic",M.PaletteClassicByName="palette-classic-by-name",M.Shades="shades",M.Thresholds="thresholds",M))(g||{});const c={h:9,w:12,x:0,y:0};var h=(M=>(M.Absolute="absolute",M.Percentage="percentage",M))(h||{});const f={steps:[]};var b=(M=>(M.RangeToText="range",M.RegexToText="regex",M.SpecialValue="special",M.ValueToText="value",M))(b||{}),v=(M=>(M.Empty="empty",M.False="false",M.NaN="nan",M.Null="null",M.NullAndNan="null+nan",M.True="true",M))(v||{}),y=(M=>(M[M.Crosshair=1]="Crosshair",M[M.Off=0]="Off",M[M.Tooltip=2]="Tooltip",M))(y||{});const E=0,C={links:[],repeatDirection:"h",tags:[],targets:[],transformations:[],transparent:!1},u={overrides:[]},D={id:""},P={links:[],mappings:[]},S={collapsed:!1,panels:[]},x={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,style:"dark",tags:[],timezone:"browser"}},48414:(j,I,e)=>{"use strict";e.d(I,{Ql:()=>i});var t=e(66805),n=(c=>(c[c.dontHide=0]="dontHide",c[c.hideLabel=1]="hideLabel",c[c.hideVariable=2]="hideVariable",c))(n||{});const i=t.Ql,s={...t.gW,description:null,hide:0,datasource:null},r=t.NU,m=t.SJ,d=t.AU,o=t.Vb,l=t.ZM,a=t.G_,g=t.bn},71949:(j,I,e)=>{"use strict";e.d(I,{Or:()=>$r,b4:()=>Kr,nH:()=>vr});var t=e(55801),n=e(27702),i=e(27173),s=e(7662),r=e(66920),m=e(26129),d=e(86312),o=e(34667),l=e(37647),a=e(60729),g=e(29223),c=e(52995),h=e(11504),f=e(84749);const b=n.forwardRef((je,Zt)=>n.createElement("div",{id:"ngRoot",ref:Zt,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));b.displayName="AngularRoot";var v=e(58939),y=e(9772),E=e(32416),C=e(73289),u=e(10864),D=e(39317),P=e(66574),S=e(75261),x=e(26858),M=e(39345),R=e(89897);async function O(){if(o.config.angularSupportEnabled){const{AngularApp:je}=await Promise.all([e.e(1189),e.e(8695),e.e(3633),e.e(4704)]).then(e.bind(e,83633)),Zt=new je;Zt.init(),Zt.bootstrap()}else(0,y.W)({load:(je,Zt,Ht)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})}),(0,E.t)({get:je=>{switch(je){case"backendSrv":return(0,v.d)("getLegacyAngularInjector","backendSrv","use getBackendSrv() in @grafana/runtime"),(0,C.i)();case"contextSrv":return(0,v.d)("getLegacyAngularInjector","contextSrv"),P.contextSrv;case"dashboardSrv":return(0,v.d)("getLegacyAngularInjector","getDashboardSrv"),(0,S.h4)();case"datasourceSrv":return(0,v.d)("getLegacyAngularInjector","datasourceSrv","use getDataSourceSrv() in @grafana/runtime"),(0,u.F)();case"linkSrv":return(0,v.d)("getLegacyAngularInjector","linkSrv"),(0,R.Bq)();case"validationSrv":return(0,v.d)("getLegacyAngularInjector","validationSrv"),M.t;case"timeSrv":return(0,v.d)("getLegacyAngularInjector","timeSrv"),(0,x.$t)();case"templateSrv":return(0,v.d)("getLegacyAngularInjector","templateSrv","use getTemplateSrv() in @grafana/runtime"),(0,D.J)()}throw"Angular is disabled.  Unable to expose: "+je}})}var T=e(42844),U=e(89898),L=e.n(U),V=e(38192),w=e(66310),K=e(66670),B=e(26473),W=e(45809),_=e(91546),k=e(6714),A=e(62108),z=e(73453),H=e(65322),Q=e(53735),X=e(14705);const te=0,oe=je=>{const Zt=n.useRef(null),Ht=n.useRef(null),fn=n.useRef(je.items);fn.current=je.items;const bn=(0,X.useVirtual)({size:fn.current.length,parentRef:Ht}),{query:An,search:Vn,currentRootActionId:qn,activeIndex:Yn,options:ta}=(0,t.useKBar)(Ea=>({search:Ea.searchQuery,currentRootActionId:Ea.currentRootActionId,activeIndex:Ea.activeIndex}));n.useEffect(()=>{const Ea=Oa=>{Oa.key==="ArrowUp"||Oa.ctrlKey&&Oa.key==="p"?(Oa.preventDefault(),An.setActiveIndex(za=>{let es=za>te?za-1:za;if(typeof fn.current[es]=="string"){if(es===0)return za;es-=1}return es})):Oa.key==="ArrowDown"||Oa.ctrlKey&&Oa.key==="n"?(Oa.preventDefault(),An.setActiveIndex(za=>{let es=za<fn.current.length-1?za+1:za;if(typeof fn.current[es]=="string"){if(es===fn.current.length-1)return za;es+=1}return es})):Oa.key==="Enter"&&(Oa.preventDefault(),Zt.current?.click())};return window.addEventListener("keydown",Ea),()=>window.removeEventListener("keydown",Ea)},[An]);const{scrollToIndex:pa}=bn;n.useEffect(()=>{pa(Yn,{align:Yn<=1?"end":"auto"})},[Yn,pa]),n.useEffect(()=>{An.setActiveIndex(typeof je.items[te]=="string"?te+1:te)},[Vn,qn,je.items,An]);const ms=n.useCallback((Ea,Oa)=>{if(typeof Oa=="string")return;const za=Oa.url;Oa.command?(Oa.command.perform(Oa),An.toggle()):za?Ea.ctrlKey||Ea.metaKey||Ea.shiftKey||An.toggle():(An.setSearch(""),An.setCurrentRootAction(Oa.id)),ta.callbacks?.onSelectAction?.(Oa)},[An,ta]),Na=(0,Q.usePointerMovedSinceMount)();return n.createElement("div",{ref:Ht,style:{maxHeight:je.maxHeight||400,position:"relative",overflow:"auto"}},n.createElement("div",{role:"listbox",id:t.KBAR_LISTBOX,style:{height:`${bn.totalSize}px`,width:"100%"}},bn.virtualItems.map(Ea=>{const Oa=fn.current[Ea.index],{target:za,url:es}=Oa,tr=typeof Oa!="string"&&{onPointerMove:()=>Na&&Yn!==Ea.index&&An.setActiveIndex(Ea.index),onPointerDown:()=>An.setActiveIndex(Ea.index),onClick:go=>ms(go,Oa)},nr=Ea.index===Yn,gi={id:(0,t.getListboxItemId)(Ea.index),role:"option","aria-selected":nr,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Ea.start}px)`},...tr},To=n.cloneElement(je.onRender({item:Oa,active:nr}),{ref:Ea.measureRef});return es?n.createElement("a",{key:Ea.index,href:es,target:za,ref:nr?Zt:null,...gi},To):n.createElement("div",{key:Ea.index,ref:nr?Zt:null,...gi},To)})))},Z=n.forwardRef(({action:je,active:Zt,currentRootActionId:Ht},fn)=>{const bn=n.useMemo(()=>{if(!Ht)return je.ancestors;const Yn=je.ancestors.findIndex(ta=>ta.id===Ht);return je.ancestors.slice(Yn+1)},[je.ancestors,Ht]),An=(0,w.wW)(le);let Vn=je.name;const qn=Yn=>!!(Yn.command?.perform||Yn.url);return je.children.length&&!qn(je)&&!Vn.endsWith("...")&&(Vn+="..."),n.createElement("div",{ref:fn,className:(0,T.cx)(An.row,Zt&&An.activeRow)},n.createElement("div",{className:An.actionContainer},je.icon,n.createElement("div",{className:An.textContainer},bn.map(Yn=>n.createElement(n.Fragment,{key:Yn.id},!qn(Yn)&&n.createElement(n.Fragment,null,n.createElement("span",{className:An.breadcrumbAncestor},Yn.name),n.createElement("span",{className:An.breadcrumbSeparator},"\u203A")))),n.createElement("span",null,Vn)),je.subtitle&&n.createElement("span",{className:An.subtitleText},je.subtitle)))});Z.displayName="ResultItem";const le=je=>({row:(0,T.css)({padding:je.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:je.shape.radius.default,margin:je.spacing(0,1)}),activeRow:(0,T.css)({color:je.colors.text.maxContrast,background:je.colors.emphasize(je.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:je.spacing(.5),borderRadius:je.shape.radius.default,backgroundImage:je.colors.gradients.brandVertical}}),actionContainer:(0,T.css)({display:"flex",gap:je.spacing(1),alignItems:"baseline",fontSize:je.typography.fontSize,width:"100%"}),textContainer:(0,T.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,T.css)({color:je.colors.text.secondary}),breadcrumbSeparator:(0,T.css)({color:je.colors.text.secondary,marginLeft:je.spacing(1),marginRight:je.spacing(1)}),subtitleText:(0,T.css)({...je.typography.bodySmall,color:je.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var ce=e(56027),q=e.n(ce),ne=e(91368),pe=e(6872),re=e(63064);const ie=5,Se=4,ye=3,Ce=2,de=1,we=100,_e=5,Je=q()($e,200);async function Ue(){if(!ne.contextSrv.user.isSignedIn)return[];const je=(await pe.Z.getDashboardOpened()).slice(0,_e),Ht=(await(0,re.getGrafanaSearcher)().search({kind:["dashboard"],limit:_e,uid:je})).view.toArray();return Ht.sort((bn,An)=>{const Vn=je.indexOf(bn.uid),qn=je.indexOf(An.uid);return Vn-qn}),Ht.map(bn=>{const{url:An,name:Vn}=bn;return{id:`recent-dashboards${An}`,name:`${Vn}`,section:(0,H.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:ie,url:An}})}async function $e(je){if(je.length===0||!ne.contextSrv.user.isSignedIn&&!o.config.bootData.settings.anonymousEnabled)return[];const Zt=await(0,re.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:je,limit:we});return Zt.view.map(fn=>{const{url:bn,name:An,kind:Vn,location:qn}=fn;return{id:`go/${Vn}${bn}`,name:`${An}`,section:Vn==="dashboard"?(0,H.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,H.t)("command-palette.section.folder-search-results","Folders"),priority:de,url:bn,subtitle:Zt.view.dataFrame.meta?.custom?.locationInfo[qn]?.name}})}function Qe(je,Zt){const[Ht,fn]=(0,n.useState)([]),[bn,An]=(0,n.useState)(!1),Vn=(0,n.useRef)(0);return(0,n.useEffect)(()=>{const qn=Date.now();Zt&&je.length>0?(An(!0),Je(je).then(Yn=>{qn>Vn.current&&(fn(Yn),An(!1),Vn.current=qn)})):(fn([]),An(!1),Vn.current=qn)},[Zt,je]),{searchResults:Ht,isFetchingSearchResults:bn}}var tt=e(18771),lt=e(94469),Me=e(43620),De=e(5933),We=e(40387),qe=e(12969);const st=je=>{let Zt=je.children||[];if(je.id==="help"){const Ht=()=>{De.Z.publish(new Me.Dn({component:qe.B}))};je.children=[...Zt,...(0,We.dP)(),...ct(),{id:"keyboard-shortcuts",text:(0,H.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:Ht}]}return je},dt=(je,Zt)=>{const Ht=je.onClick;return je.onClick=()=>{(0,d.ff)("grafana_navigation_item_clicked",{path:je.url??je.id,state:Zt?"expanded":"collapsed"}),Ht?.()},je.children&&(je.children=je.children.map(fn=>dt(fn,Zt))),je},Tt=(je,Zt)=>!!(je===Zt||Nt(je,Zt)),Nt=(je,Zt)=>!!je.children?.some(Ht=>Ht===Zt?!0:Nt(Ht,Zt)),Bt=je=>je?.split("?")[0]??"",yt=(je,Zt)=>{const Ht=Bt(Zt?.url),fn=Bt(je.url);return fn&&fn.length>Ht?.length},ft=(je,Zt,Ht)=>{const fn="/dashboards";for(const bn of je){const An=Bt(bn.url),Vn=lt.u.stripBaseFromUrl(An);if(Vn&&bn.id!=="starred")if(Vn===Zt){Ht=bn;break}else if(Vn!=="/"&&Zt.startsWith(Vn))yt(bn,Ht)&&(Ht=bn);else if(Vn==="/alerting/list"&&Zt.startsWith("/alerting/notification/")){Ht=bn;break}else Vn===fn&&Zt.startsWith("/d/")&&yt(bn,Ht)&&(Ht=bn);if(bn.children&&(Ht=ft(bn.children,Zt,Ht)),Bt(Ht?.url)===Zt)return Ht}return Ht};function ct(){const{buildInfo:je,licenseInfo:Zt}=o.config,Ht=Zt.stateInfo?` (${Zt.stateInfo})`:"",fn=[];return fn.push({target:"_blank",id:"version",text:`${je.edition}${Ht}`,url:Zt.licenseUrl,icon:"external-link-alt"}),je.hasUpdate&&fn.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),fn}var ge=e(70828);function Be(je){return"navModel."+je.id}function Le(je,Zt=[]){const Ht=[];for(let fn of je){fn.id==="help"&&(fn=st({...fn}),delete fn.url);const{url:bn,target:An,text:Vn,isCreateAction:qn,children:Yn,onClick:ta}=fn,pa=!!Yn?.length;if(!(bn||ta||pa))continue;const ms=qn?(0,H.t)("command-palette.section.actions","Actions"):(0,H.t)("command-palette.section.pages","Pages"),Na=qn?Se:ye,Ea=Zt.map(za=>za.text).join(" > "),Oa={id:Be(fn),name:Vn,section:ms,url:bn,target:An,parent:Zt.length>0&&!qn?Be(Zt[Zt.length-1]):void 0,perform:ta,priority:Na,subtitle:qn?void 0:Ea};if(Ht.push(Oa),Yn?.length){const za=Le(Yn,[...Zt,fn]);Ht.push(...za)}}return Ht}const he=je=>{const Zt=[{id:"preferences/theme",name:(0,H.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,H.t)("command-palette.section.preferences","Preferences"),priority:Ce},{id:"preferences/dark-theme",name:(0,H.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,ge.L)("dark"),parent:"preferences/theme",priority:Ce},{id:"preferences/light-theme",name:(0,H.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,ge.L)("light"),parent:"preferences/theme",priority:Ce}],Ht=Le(je);return[...Zt,...Ht]};function He(je){const[Zt,Ht]=(0,n.useState)([]),[fn,bn]=(0,n.useState)([]),{navBarTree:An}=(0,tt.useSelector)(Vn=>({navBarTree:Vn.navBarTree}));return(0,n.useEffect)(()=>{const Vn=he(An);Ht(Vn)},[An]),(0,n.useEffect)(()=>{je||Ue().then(Vn=>bn(Vn)).catch(Vn=>{console.error("Error loading recent dashboard actions",Vn)})},[je]),je?Zt:[...fn,...Zt]}var Pe=e(12354);const Ie={name:"none",priority:t.Priority.NORMAL};function Te(je,Zt){return Zt.priority-je.priority}function Re(){const{search:je,actions:Zt,rootActionId:Ht}=(0,t.useKBar)(pa=>({search:pa.searchQuery,actions:pa.actions,rootActionId:pa.currentRootActionId})),fn=n.useMemo(()=>Object.keys(Zt).reduce((pa,ms)=>{const Na=Zt[ms];if(!Na.parent&&!Ht&&pa.push(Na),Na.id===Ht)for(let Ea=0;Ea<Na.children.length;Ea++)pa.push(Na.children[Ea]);return pa},[]).sort(Te),[Zt,Ht]),bn=n.useCallback(pa=>{let ms=[];for(let Na=0;Na<pa.length;Na++)ms.push(pa[Na]);return function Na(Ea,Oa=ms){for(let za=0;za<Ea.length;za++)if(Ea[za].children.length>0){let es=Ea[za].children;for(let tr=0;tr<es.length;tr++)Oa.push(es[tr]);Na(Ea[za].children,Oa)}return Oa}(pa)},[]),An=!je,Vn=n.useMemo(()=>An?fn:bn(fn),[bn,fn,An]),qn=ue(Vn,je),Yn=n.useMemo(()=>{let pa={},ms=[],Na=[];for(let Oa=0;Oa<qn.length;Oa++){const za=qn[Oa],es=za.action,tr=za.score||t.Priority.NORMAL,nr={name:typeof es.section=="string"?es.section:es.section?.name||Ie.name,priority:typeof es.section=="string"?tr:es.section?.priority||0+tr};pa[nr.name]||(pa[nr.name]=[],ms.push(nr)),pa[nr.name].push({priority:es.priority+tr,action:es})}Na=ms.sort(Te).map(Oa=>({name:Oa.name,actions:pa[Oa.name].sort(Te).map(za=>za.action)}));let Ea=[];for(let Oa=0;Oa<Na.length;Oa++){let za=Na[Oa];za.name!==Ie.name&&Ea.push(za.name);for(let es=0;es<za.actions.length;es++)Ea.push(za.actions[es])}return Ea},[qn]),ta=n.useMemo(()=>Ht,[Yn]);return n.useMemo(()=>({results:Yn,rootActionId:ta}),[ta,Yn])}function ue(je,Zt){const Ht=Ve(),fn=n.useMemo(()=>({filtered:je,search:Zt}),[je,Zt]),{filtered:bn,search:An}=(0,Q.useThrottledValue)(fn);return n.useMemo(()=>{if(An.trim()==="")return bn.map(Yn=>({score:0,action:Yn}));const Vn=bn.map(({name:Yn,keywords:ta})=>`${Yn} ${ta??""}`.toLowerCase()),qn=[];if(An.length>xe){const Yn=An.toLowerCase();for(let ta=0;ta<Vn.length;ta++){const ms=Vn[ta].indexOf(Yn);if(ms>-1){const Na=ms*-1,Ea=bn[ta];qn.push({score:Na,action:Ea})}}}else{const Yn=Ht.split(An).length,ta=1/0,pa=Yn<5,[,ms,Na]=Ht.search(Vn,An,pa,ta);if(ms&&Na)for(let Ea=0;Ea<Na.length;Ea++){const Oa=Na[Ea],za=Na.length-Ea,es=bn[ms.idx[Oa]];qn.push({score:za,action:es})}}return qn},[bn,An,Ht])}const xe=25;function Ve(){const je=n.useRef();return je.current||(je.current=new Pe.Z({intraMode:0,intraIns:0})),je.current}function Ne(){const je=(0,w.wW)(ve),{query:Zt,showing:Ht,searchQuery:fn}=(0,t.useKBar)(pa=>({showing:pa.visualState===t.VisualState.showing,searchQuery:pa.searchQuery})),bn=He(fn);(0,t.useRegisterActions)(bn,[bn]);const{searchResults:An,isFetchingSearchResults:Vn}=Qe(fn,Ht),qn=(0,n.useRef)(null),{overlayProps:Yn}=(0,k.Ir)({isOpen:Ht,onClose:()=>Zt.setVisualState(t.VisualState.animatingOut)},qn),{dialogProps:ta}=(0,W.R)({},qn);return(0,n.useEffect)(()=>{Ht&&(0,d.ff)("command_palette_opened")},[Ht]),bn.length>0?n.createElement(t.KBarPortal,null,n.createElement(t.KBarPositioner,{className:je.positioner},n.createElement(t.KBarAnimator,{className:je.animator},n.createElement(_.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("div",{...Yn,...ta},n.createElement("div",{className:je.searchContainer},Vn?n.createElement(A.$,{className:je.spinner}):n.createElement(z.J,{name:"search",size:"md"}),n.createElement(t.KBarSearch,{defaultPlaceholder:(0,H.t)("command-palette.search-box.placeholder","Search or jump to..."),className:je.search})),n.createElement("div",{className:je.resultsContainer},n.createElement(fe,{searchResults:An}))))))):null}const fe=({searchResults:je})=>{const{results:Zt,rootActionId:Ht}=Re(),fn=(0,w.wW)(ve),bn=(0,H.t)("command-palette.section.dashboard-search-results","Dashboards"),An=(0,H.t)("command-palette.section.folder-search-results","Folders"),Vn=(0,n.useMemo)(()=>je.filter(ta=>ta.id.startsWith("go/dashboard")).map(ta=>new t.ActionImpl(ta,{store:{}})),[je]),qn=(0,n.useMemo)(()=>je.filter(ta=>ta.id.startsWith("go/folder")).map(ta=>new t.ActionImpl(ta,{store:{}})),[je]),Yn=(0,n.useMemo)(()=>{const ta=[...Zt];return qn.length>0&&(ta.push(An),ta.push(...qn)),Vn.length>0&&(ta.push(bn),ta.push(...Vn)),ta},[Zt,bn,Vn,An,qn]);return n.createElement(oe,{items:Yn,maxHeight:650,onRender:({item:ta,active:pa})=>{const ms=Yn[0]===ta;return typeof ta=="string"?n.createElement("div",{className:(0,T.cx)(fn.sectionHeader,ms&&fn.sectionHeaderFirst)},ta):n.createElement(Z,{action:ta,active:pa,currentRootActionId:Ht})}})},ve=je=>({positioner:(0,T.css)({zIndex:je.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:je.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,T.css)({maxWidth:je.breakpoints.values.md,width:"100%",background:je.colors.background.primary,color:je.colors.text.primary,borderRadius:je.shape.radius.default,border:`1px solid ${je.colors.border.weak}`,overflow:"hidden",boxShadow:je.shadows.z3}),searchContainer:(0,T.css)({alignItems:"center",background:je.components.input.background,borderBottom:`1px solid ${je.colors.border.weak}`,display:"flex",gap:je.spacing(1),padding:je.spacing(1,2)}),search:(0,T.css)({fontSize:je.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:je.components.input.text}),spinner:(0,T.css)({height:"22px"}),resultsContainer:(0,T.css)({paddingBottom:je.spacing(1)}),sectionHeader:(0,T.css)({padding:je.spacing(1.5,2,2,2),fontSize:je.typography.bodySmall.fontSize,fontWeight:je.typography.fontWeightMedium,color:je.colors.text.secondary,borderTop:`1px solid ${je.colors.border.weak}`,marginTop:je.spacing(1)}),sectionHeaderFirst:(0,T.css)({paddingBottom:je.spacing(1),borderTop:"none",marginTop:0})});var ze=e(89949),Oe=e(42358),Fe=e(67437),Ge=e(29372),nt=e(63362),Xe=e(74639),ut=e(9848);function ht({children:je,icon:Zt,isActive:Ht,isChild:fn,onClick:bn,target:An,url:Vn}){const qn=(0,w.l4)(),Yn=wt(qn,Ht,fn),ta=n.createElement("div",{className:Yn.linkContent},Zt&&n.createElement(z.J,{"data-testid":"dropdown-child-icon",name:Zt}),n.createElement("div",{className:Yn.linkText},je),An==="_blank"&&n.createElement(z.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:Yn.externalLinkIcon}));let pa=n.createElement("button",{"data-testid":Xe.wl.components.NavMenu.item,className:(0,T.cx)(Yn.button,Yn.element),onClick:bn},ta);return Vn&&(pa=!An&&Vn.startsWith("/")?n.createElement(ut.r,{"data-testid":Xe.wl.components.NavMenu.item,className:Yn.element,href:Vn,target:An,onClick:bn},ta):n.createElement("a",{"data-testid":Xe.wl.components.NavMenu.item,href:Vn,target:An,className:Yn.element,onClick:bn},ta)),n.createElement("li",{className:Yn.listItem},pa)}ht.displayName="NavBarMenuItem";const wt=(je,Zt,Ht)=>({button:(0,T.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,T.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,T.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,T.css)({color:je.colors.text.secondary}),element:(0,T.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:Zt?je.colors.text.primary:je.colors.text.secondary,padding:je.spacing(1,1,1,Ht?5:0),...Ht&&{borderRadius:je.shape.borderRadius()},width:"100%","&:hover, &:focus-visible":{...Ht&&{background:je.colors.emphasize(je.colors.background.primary,.03)},textDecoration:"underline",color:je.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${je.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:Zt?"block":"none",content:'" "',height:je.spacing(3),position:"absolute",left:je.spacing(1),top:"50%",transform:"translateY(-50%)",width:je.spacing(.5),borderRadius:je.shape.borderRadius(1),backgroundImage:je.colors.gradients.brandVertical}}),listItem:(0,T.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...Ht&&{padding:je.spacing(0,2)}})});var mn=e(84789),vn=e(65469),gn=e(76404);function Sn({link:je}){const Zt=(0,w.l4)(),Ht=Cn(Zt);if(je.icon==="grafana")return n.createElement(gn.c.MenuLogo,{className:Ht.img});if(je.icon){const fn=(0,vn.toIconName)(je.icon);return n.createElement(z.J,{name:fn??"link",size:"xl"})}else return n.createElement("img",{className:(0,T.cx)(Ht.img,je.roundIcon&&Ht.round),src:je.img,alt:""})}function Cn(je){return{img:(0,T.css)({height:je.spacing(3),width:je.spacing(3)}),round:(0,T.css)({borderRadius:je.shape.radius.circle})}}const pn=({children:je})=>{const Zt=(0,w.wW)(nn);return n.createElement("div",null,je,n.createElement("span",{className:Zt.highlight}))},nn=je=>({highlight:(0,T.css)`
      background-color: ${je.colors.success.main};
      border-radius: ${je.shape.radius.circle};
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function Ct({link:je,activeItem:Zt,children:Ht,className:fn,onClose:bn}){const An=(0,w.wW)(bt),Vn=je.highlightText?pn:n.Fragment,qn=je===Zt,Yn=Nt(je,Zt),[ta,pa]=(0,mn.Z)(`grafana.navigation.expanded[${je.text}]`,!1)??!!Yn;return n.createElement(n.Fragment,null,n.createElement("div",{className:(0,T.cx)(An.collapsibleSectionWrapper,fn)},n.createElement(ht,{isActive:je===Zt,onClick:()=>{je.onClick?.(),bn?.()},target:je.target,url:je.url},n.createElement("div",{className:(0,T.cx)(An.labelWrapper,{[An.isActive]:qn,[An.hasActiveChild]:Yn})},n.createElement(Vn,null,n.createElement(Sn,{link:je})),je.text)),Ht&&n.createElement(K.zx,{"aria-label":`${ta?"Collapse":"Expand"} section ${je.text}`,variant:"secondary",fill:"text",className:An.collapseButton,onClick:()=>pa(!ta)},n.createElement(z.J,{name:ta?"angle-up":"angle-down",size:"xl"}))),ta&&Ht)}const bt=je=>({collapsibleSectionWrapper:(0,T.css)({alignItems:"center",display:"flex"}),collapseButton:(0,T.css)({color:je.colors.text.disabled,padding:je.spacing(0,.5),marginRight:je.spacing(1)}),collapseWrapperActive:(0,T.css)({backgroundColor:je.colors.action.disabledBackground}),collapseContent:(0,T.css)({padding:0}),labelWrapper:(0,T.css)({display:"grid",fontSize:je.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${je.spacing(7)} auto`,placeItems:"center",fontWeight:je.typography.fontWeightMedium}),isActive:(0,T.css)({color:je.colors.text.primary,"&::before":{display:"block",content:'" "',height:je.spacing(3),position:"absolute",left:je.spacing(1),top:"50%",transform:"translateY(-50%)",width:je.spacing(.5),borderRadius:je.shape.borderRadius(1),backgroundImage:je.colors.gradients.brandVertical}}),hasActiveChild:(0,T.css)({color:je.colors.text.primary})});function Ut({link:je,activeItem:Zt,onClose:Ht}){const fn=(0,w.wW)(_t);return je.emptyMessage&&!Gt(je)?n.createElement(Ct,{onClose:Ht,link:je,activeItem:Zt},n.createElement("ul",{className:fn.children},n.createElement("div",{className:fn.emptyMessage},je.emptyMessage))):n.createElement(Ct,{onClose:Ht,link:je,activeItem:Zt},Gt(je)&&n.createElement("ul",{className:fn.children},je.children.map(bn=>!bn.isCreateAction&&n.createElement(ht,{key:`${je.text}-${bn.text}`,isActive:Tt(bn,Zt),isChild:!0,onClick:()=>{bn.onClick?.(),Ht()},target:bn.target,url:bn.url},bn.text))))}const _t=je=>({children:(0,T.css)({display:"flex",flexDirection:"column"}),flex:(0,T.css)({display:"flex"}),itemWithoutMenu:(0,T.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,T.css)({height:"100%",width:"100%"}),iconContainer:(0,T.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,T.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${je.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,T.css)({fontSize:je.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,T.css)({color:je.colors.text.secondary,fontStyle:"italic",padding:je.spacing(1,1.5,1,7)})});function Gt(je){return!!(je.children&&je.children.length>0)}const jt="350px";function sn({activeItem:je,navItems:Zt,searchBarHidden:Ht,onClose:fn}){const bn=(0,w.l4)(),An=St(bn,Ht),Vn=bn.transitions.duration.shortest,qn=mt(bn,Vn),{chrome:Yn}=(0,B.p)(),ta=Yn.useState(),pa=(0,n.useRef)(null),ms=(0,n.useRef)(null),{dialogProps:Na}=(0,W.R)({},pa),[Ea,Oa]=(0,n.useState)(!1),za=()=>Oa(!1),{overlayProps:es,underlayProps:tr}=(0,k.Ir)({isDismissable:!0,isOpen:!0,onClose:za},pa);return(0,n.useEffect)(()=>{ta.megaMenuOpen&&Oa(!0)},[ta.megaMenuOpen]),n.createElement(k.Xj,null,n.createElement(Oe.Z,{nodeRef:pa,in:Ea,unmountOnExit:!0,classNames:qn.overlay,timeout:{enter:Vn,exit:0},onExited:fn},n.createElement(_.MT,{contain:!0,autoFocus:!0},n.createElement("div",{"data-testid":"navbarmenu",ref:pa,...es,...Na,className:An.container},n.createElement("div",{className:An.mobileHeader},n.createElement(z.J,{name:"bars",size:"xl"}),n.createElement(Fe.h,{"aria-label":"Close navigation menu",tooltip:"Close menu",name:"times",onClick:za,size:"xl",variant:"secondary"})),n.createElement("nav",{className:An.content},n.createElement(Ge.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},n.createElement("ul",{className:An.itemList},Zt.map(nr=>n.createElement(Ut,{link:nr,onClose:za,activeItem:je,key:nr.text})))))))),n.createElement(Oe.Z,{nodeRef:ms,in:Ea,unmountOnExit:!0,classNames:qn.backdrop,timeout:{enter:Vn,exit:0}},n.createElement("div",{ref:ms,className:An.backdrop,...tr})))}sn.displayName="NavBarMenu";const St=(je,Zt)=>{const Ht=(Zt?nt.$:nt.$*2)+1;return{backdrop:(0,T.css)({backdropFilter:"blur(1px)",backgroundColor:je.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:Zt?0:nt.$,zIndex:je.zIndex.modalBackdrop,[je.breakpoints.up("md")]:{top:Ht}}),container:(0,T.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:je.spacing(1.5),right:0,zIndex:je.zIndex.modal,position:"fixed",top:Zt?0:nt.$,backgroundColor:je.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[je.breakpoints.up("md")]:{borderRight:`1px solid ${je.colors.border.weak}`,right:"unset",top:Ht}}),content:(0,T.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0}),mobileHeader:(0,T.css)({display:"flex",justifyContent:"space-between",padding:je.spacing(1,1,1,2),borderBottom:`1px solid ${je.colors.border.weak}`,[je.breakpoints.up("md")]:{display:"none"}}),itemList:(0,T.css)({display:"grid",gridAutoRows:`minmax(${je.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${jt}, auto)`,minWidth:jt})}},mt=(je,Zt)=>{const Ht={transitionDuration:`${Zt}ms`,transitionTimingFunction:je.transitions.easing.easeInOut,[je.breakpoints.down("md")]:{overflow:"hidden"}},fn={...Ht,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},bn={...Ht,transitionProperty:"opacity"},An={width:"100%",[je.breakpoints.up("md")]:{boxShadow:je.shadows.z3,width:jt}},Vn={boxShadow:"none",width:0},qn={opacity:1},Yn={opacity:0};return{backdrop:{enter:(0,T.css)(Yn),enterActive:(0,T.css)(bn,qn),enterDone:(0,T.css)(qn)},overlay:{enter:(0,T.css)(Vn),enterActive:(0,T.css)(fn,An),enterDone:(0,T.css)(An)}}},kt=n.memo(({onClose:je,searchBarHidden:Zt})=>{const Ht=(0,tt.useSelector)(ta=>ta.navBarTree),fn=(0,w.l4)(),bn=it(fn),An=(0,s.TH)(),qn=(0,ze.cloneDeep)(Ht).filter(ta=>ta.id!=="profile"&&ta.id!=="help").map(ta=>dt(ta,!0)),Yn=ft(qn,An.pathname);return n.createElement("div",{className:bn.menuWrapper},n.createElement(sn,{activeItem:Yn,navItems:qn,onClose:je,searchBarHidden:Zt}))});kt.displayName="MegaMenu";const it=je=>({menuWrapper:(0,T.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:je.zIndex.sidemenu})});var pt=e(53327),It=e(30973),Qt=e(34139);function rn({href:je,isCurrent:Zt,text:Ht,index:fn,flexGrow:bn}){const An=(0,w.wW)(un),Vn=()=>{(0,d.ff)("grafana_breadcrumb_clicked",{url:je})};return n.createElement("li",{className:An.breadcrumbWrapper,style:{flexGrow:bn}},Zt?n.createElement("span",{"data-testid":pt.z.Breadcrumbs.breadcrumb(Ht),className:An.breadcrumb,"aria-current":"page",title:Ht},Ht):n.createElement(n.Fragment,null,n.createElement("a",{onClick:Vn,"data-testid":pt.z.Breadcrumbs.breadcrumb(Ht),className:(0,T.cx)(An.breadcrumb,An.breadcrumbLink),title:Ht,href:je},Ht),n.createElement("div",{className:An.separator,"aria-hidden":!0},n.createElement(z.J,{name:"angle-right"}))))}const un=je=>({breadcrumb:(0,T.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:je.spacing(0,.5),whiteSpace:"nowrap",color:je.colors.text.secondary}),breadcrumbLink:(0,T.css)({color:je.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,T.css)({alignItems:"center",color:je.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[je.breakpoints.down("sm")]:{display:"none","&:nth-last-child(2)":{display:"flex",minWidth:"40px"},"&:last-child":{display:"flex"}}}),separator:(0,T.css)({color:je.colors.text.secondary})});function xn({breadcrumbs:je,className:Zt}){const Ht=(0,w.wW)(_n);return n.createElement("nav",{"aria-label":"Breadcrumbs",className:Zt},n.createElement("ol",{className:Ht.breadcrumbs},je.map((fn,bn)=>n.createElement(rn,{...fn,isCurrent:bn===je.length-1,key:bn,index:bn,flexGrow:Kn(bn,je.length)}))))}function Kn(je,Zt){return Zt<5&&je>0&&je<Zt-2||Zt>6&&je>1&&je<Zt-3?4:10}const _n=je=>({breadcrumbs:(0,T.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"})});var Ma=e(57821),la=e(80557);function aa({actions:je,searchBarHidden:Zt,sectionNav:Ht,pageNav:fn,onToggleMegaMenu:bn,onToggleSearchBar:An,onToggleKioskMode:Vn}){const qn=(0,tt.useSelector)(pa=>pa.navIndex)[Qt.Qz],Yn=(0,w.wW)(ba),ta=(0,Ma.t)(Ht,fn,qn);return n.createElement("div",{"data-testid":pt.z.NavToolbar.container,className:Yn.pageToolbar},n.createElement("div",{className:Yn.menuButton},n.createElement(Fe.h,{name:"bars",tooltip:(0,H.t)("navigation.toolbar.toggle-menu","Toggle menu"),tooltipPlacement:"bottom",size:"xl",onClick:bn})),n.createElement(xn,{breadcrumbs:ta,className:Yn.breadcrumbsWrapper}),n.createElement("div",{className:Yn.actions},je,je&&n.createElement(la.M,null),Zt&&n.createElement(It.h,{onClick:Vn,narrow:!0,title:(0,H.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),n.createElement(It.h,{onClick:An,narrow:!0,title:(0,H.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},n.createElement(z.J,{name:Zt?"angle-down":"angle-up",size:"xl"}))))}const ba=je=>({breadcrumbsWrapper:(0,T.css)({display:"flex",overflow:"hidden",[je.breakpoints.down("sm")]:{minWidth:"50%"}}),pageToolbar:(0,T.css)({height:nt.$,display:"flex",padding:je.spacing(0,1,0,2),alignItems:"center"}),menuButton:(0,T.css)({display:"flex",alignItems:"center",marginRight:je.spacing(1)}),actions:(0,T.css)({label:"NavToolbar-actions",display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:je.spacing(1),flexGrow:1,gap:je.spacing(.5),minWidth:0,".body-drawer-open &":{display:"none"}})});function ga({item:je,isSectionRoot:Zt=!1}){const Ht=(0,w.wW)(Ca),fn=je.children?.filter(Yn=>!Yn.hideFromTabs),bn=Zt&&!!je.children[0].children?.length,An=(0,T.cx)({[Ht.link]:!0,[Ht.activeStyle]:je.active,[Ht.isSection]:!!fn?.length||je.isSection,[Ht.isSectionRoot]:Zt,[Ht.noRootMargin]:bn});let Vn=null;je.img?Vn=n.createElement("img",{"data-testid":"section-image",className:Ht.sectionImg,src:je.img,alt:""}):je.icon&&(Vn=n.createElement(z.J,{"data-testid":"section-icon",className:Ht.sectionImg,name:je.icon}));const qn=()=>{(0,d.ff)("grafana_navigation_item_clicked",{path:je.url??je.id,sectionNav:!0})};return n.createElement(n.Fragment,null,n.createElement("a",{onClick:qn,href:je.url,className:An,"aria-label":Xe.wl.components.Tab.title(je.text),role:"tab","aria-selected":je.active},Zt&&Vn,je.text,je.tabSuffix&&n.createElement(je.tabSuffix,{className:Ht.suffix})),fn?.map((Yn,ta)=>n.createElement(ga,{item:Yn,key:ta})))}const Ca=je=>({link:(0,T.css)`
      padding: ${je.spacing(1,0,1,1.5)};
      display: flex;
      align-items: flex-start;
      border-radius: ${je.shape.radius.default};
      gap: ${je.spacing(1)};
      height: 100%;
      position: relative;
      color: ${je.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:(0,T.css)`
      label: activeTabStyle;
      color: ${je.colors.text.primary};
      font-weight: ${je.typography.fontWeightMedium};
      background: ${je.colors.emphasize(je.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${je.shape.radius.default};
        background-image: ${je.colors.gradients.brandVertical};
      }
    `,suffix:(0,T.css)`
      margin-left: ${je.spacing(1)};
    `,sectionImg:(0,T.css)({margin:"6px 0",width:je.spacing(2)}),isSectionRoot:(0,T.css)({fontSize:je.typography.h4.fontSize,marginTop:0,marginBottom:je.spacing(2),fontWeight:je.typography.fontWeightMedium}),isSection:(0,T.css)({color:je.colors.text.primary,fontSize:je.typography.h5.fontSize,marginTop:je.spacing(2),fontWeight:je.typography.fontWeightMedium}),noRootMargin:(0,T.css)({marginBottom:0})}),Ha=({isExpanded:je,onClick:Zt})=>{const Ht=(0,w.l4)(),fn=ka(Ht);return n.createElement(K.zx,{title:"Toggle section navigation","aria-label":je?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:L()(fn.icon,{[fn.iconExpanded]:je}),variant:"secondary",fill:"text",size:"md",onClick:Zt})};Ha.displayName="SectionNavToggle";const ka=je=>({icon:(0,T.css)({alignSelf:"center",margin:je.spacing(1,0),transform:"rotate(90deg)",transition:je.transitions.create("opacity"),color:je.colors.text.secondary,zIndex:1,[je.breakpoints.up("md")]:{alignSelf:"flex-start",position:"relative",left:0,margin:je.spacing(0,0,0,1),top:je.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),iconExpanded:(0,T.css)({rotate:"180deg",[je.breakpoints.up("md")]:{opacity:0,margin:0,position:"absolute",right:0,left:"initial"}})});function ma({model:je}){const Zt=(0,w.wW)(Rt),{isExpanded:Ht,onToggleSectionNav:fn}=At();return je.main?.children?.length?n.createElement("div",{className:Zt.navContainer},n.createElement("nav",{className:(0,T.cx)(Zt.nav,{[Zt.navExpanded]:Ht})},n.createElement(Ge.$,{showScrollIndicators:!0},n.createElement("div",{className:Zt.items,role:"tablist"},n.createElement(ga,{item:je.main,isSectionRoot:!0})))),n.createElement(Ha,{isExpanded:Ht,onClick:fn})):null}function At(){const je=(0,w.l4)(),Zt=window.matchMedia(`(max-width: ${je.breakpoints.values.lg}px)`).matches,[Ht,fn]=(0,mn.Z)("grafana.sectionNav.expanded",!Zt),[bn,An]=(0,n.useState)(!Zt&&Ht);return(0,n.useEffect)(()=>{const qn=window.matchMedia(`(max-width: ${je.breakpoints.values.lg}px)`),Yn=ta=>An(ta.matches?!1:Ht);return qn.addEventListener("change",Yn),()=>qn.removeEventListener("change",Yn)},[Ht,je.breakpoints.values.lg]),{isExpanded:bn,onToggleSectionNav:()=>{fn(!bn),An(!bn)}}}const Rt=je=>({navContainer:(0,T.css)({display:"flex",flexDirection:"column",position:"relative",[je.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,T.css)({display:"flex",flexDirection:"column",background:je.colors.background.canvas,flexShrink:0,transition:je.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[je.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,T.css)({maxHeight:"50vh",visibility:"visible",[je.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,T.css)({display:"flex",flexDirection:"column",padding:je.spacing(2,1,2,2),minWidth:"250px",[je.breakpoints.up("md")]:{padding:je.spacing(4.5,1,2,2)}})});var Mt=e(48154),$t=e(80434),Pn=e(12308),tn=e(73195),Un=e(14574),$n=e(21323),kn=e(42349),Fn=e(96284),Da=e(52419),Ta=e(54945),ca=e(5008);function Sa({feedUrl:je}){const Zt=(0,w.wW)(Yt),{state:Ht,getNews:fn}=(0,ca.j)(je),[bn,An]=(0,Fn.Z)();return(0,n.useEffect)(()=>{fn()},[fn]),Ht.loading||Ht.error?n.createElement("div",{className:Zt.innerWrapper},Ht.loading&&n.createElement(Da.u,{text:"Loading..."}),Ht.error&&Ht.error.message):Ht.value?n.createElement("div",{ref:bn},An.width>0&&Ht.value.map((Vn,qn)=>n.createElement(Ta.S,{key:qn,index:qn,showImage:!0,width:An.width,data:Ht.value})),n.createElement("div",{className:Zt.grot},n.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog"},n.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})))):null}const Yt=je=>({innerWrapper:(0,T.css)`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,grot:(0,T.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:je.spacing(5,0),img:{width:"186px",height:"186px"}})});function Kt({className:je}){const[Zt,Ht]=(0,tn.Z)(!1),fn=(0,w.wW)(hn);return n.createElement(n.Fragment,null,n.createElement(It.h,{className:je,onClick:Ht,iconOnly:!0,icon:"rss","aria-label":"News"}),Zt&&n.createElement(Un.d,{title:n.createElement("div",{className:fn.title},n.createElement($n.x,{element:"h3"},(0,H.t)("news.title","Latest from the blog")),n.createElement("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:"Go to Grafana labs blog",className:fn.grot},n.createElement("img",{src:"public/img/grot-news.svg",alt:"Grot reading news"})),n.createElement("div",{className:fn.actions},n.createElement(K.zx,{icon:"times",variant:"secondary",fill:"text",onClick:Ht,"aria-label":Xe.wl.components.Drawer.General.close}))),scrollableContent:!0,onClose:Ht,size:"md"},n.createElement(Sa,{feedUrl:kn.k})))}const hn=je=>({title:(0,T.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:je.spacing(2),borderBottom:`1px solid ${je.colors.border.weak}`}),grot:(0,T.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:je.spacing(2,0),img:{width:"75px",height:"75px"}}),actions:(0,T.css)({position:"absolute",right:je.spacing(1),top:je.spacing(2)})});function Mn({breakpoint:je,onChange:Zt}){(0,n.useEffect)(()=>{const Ht=window.matchMedia(`(min-width: ${je}px)`),fn=bn=>Zt(bn);return Ht.addEventListener("change",fn),()=>Ht.removeEventListener("change",fn)},[je,Zt])}var Hn=e(30284),Jn=e(73990);function Qn({orgs:je,onSelectChange:Zt}){const Ht=(0,w.wW)(va);return n.createElement(Jn.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:Ht.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:je.map(fn=>({label:fn.name,description:fn.role,value:fn})),onChange:Zt,icon:"building"})}const va=je=>({buttonCss:(0,T.css)({color:je.colors.text.secondary,"&:hover":{color:je.colors.text.primary}})});var Ga=e(28580);function La({orgs:je,onSelectChange:Zt}){const Ht=(0,w.wW)(Ia),{orgName:fn,orgId:bn,orgRole:An}=ne.contextSrv.user,[Vn,qn]=(0,n.useState)(()=>({label:fn,value:{role:An,orgId:bn,name:fn},description:An})),Yn=ta=>{qn(ta),Zt(ta)};return n.createElement(Ga.Ph,{"aria-label":"Change organization",width:"auto",value:Vn,prefix:n.createElement(z.J,{className:"prefix-icon",name:"building"}),className:Ht.select,options:je.map(ta=>({label:ta.name,description:ta.role,value:ta})),onChange:Yn})}const Ia=je=>({select:(0,T.css)({border:"none",background:"none",color:je.colors.text.secondary,"&:hover":{color:je.colors.text.primary,"& .prefix-icon":(0,T.css)({color:je.colors.text.primary})}})});function Ka(){const je=(0,w.l4)(),Zt=(0,tt.useDispatch)(),Ht=(0,tt.useSelector)(Yn=>Yn.organization.userOrgs),fn=Yn=>{Yn.value&&((0,Hn.Q$)(Yn.value.orgId),m.E1.push(`/?orgId=${Yn.value.orgId}`),window.location.reload())};(0,n.useEffect)(()=>{ne.contextSrv.isSignedIn&&Zt((0,Hn.JE)())},[Zt]);const bn=je.breakpoints.values.sm,[An,Vn]=(0,n.useState)(!window.matchMedia(`(min-width: ${bn}px)`).matches);if(Mn({breakpoint:bn,onChange:Yn=>{Vn(!Yn.matches)}}),Ht?.length<=1)return null;const qn=An?Qn:La;return n.createElement(qn,{orgs:Ht,onSelectChange:fn})}var qa=e(89746);function hs(je){const Zt=[];for(const Ht of je)Ht.isCreateAction&&Zt.push(Ht),Ht.children&&Zt.push(...hs(Ht.children));return Zt}const $s=({})=>{const je=(0,w.wW)(zs),Zt=(0,w.l4)(),Ht=(0,tt.useSelector)(pa=>pa.navBarTree),fn=Zt.breakpoints.values.sm,[bn,An]=(0,n.useState)(!1),[Vn,qn]=(0,n.useState)(!window.matchMedia(`(min-width: ${fn}px)`).matches),Yn=(0,n.useMemo)(()=>hs(Ht),[Ht]);Mn({breakpoint:fn,onChange:pa=>{qn(!pa.matches)}});const ta=()=>n.createElement(qa.v,null,Yn.map((pa,ms)=>n.createElement(qa.v.Item,{key:ms,url:pa.url,label:pa.text,onClick:()=>(0,d.ff)("grafana_menu_item_clicked",{url:pa.url,from:"quickadd"})})));return Yn.length>0?n.createElement(n.Fragment,null,n.createElement($t.L,{overlay:ta,placement:"bottom-end",onVisibleChange:An},n.createElement(It.h,{iconOnly:!0,icon:Vn?"plus-circle":"plus",isOpen:Vn?void 0:bn,"aria-label":"New"})),n.createElement(la.M,{className:je.separator})):null},zs=je=>({buttonContent:(0,T.css)({alignItems:"center",display:"flex"}),buttonText:(0,T.css)({[je.breakpoints.down("md")]:{display:"none"}}),separator:(0,T.css)({[je.breakpoints.down("sm")]:{display:"none"}})});function Ns(){const je=(0,s.TH)(),Zt=(0,w.wW)(Xs),Ht=Mt.QX.sanitizeUrl(lt.u.getUrlForPartial(je,{forceLogin:"true"}));return n.createElement("a",{className:Zt.link,href:Ht,target:"_self"},"Sign in")}const Xs=je=>({link:(0,T.css)({paddingRight:je.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var ys=e(79655);function ua({node:je}){const Zt=(0,w.wW)(ja),Ht=dt((0,ze.cloneDeep)(je),!1);return Ht?n.createElement(qa.v,{header:n.createElement("div",{onClick:fn=>fn.stopPropagation(),className:Zt.header},n.createElement("div",null,Ht.text),Ht.subTitle&&n.createElement("div",{className:Zt.subTitle},Ht.subTitle))},Ht.children?.map(fn=>fn.url?n.createElement(ys.s,{url:fn.url,label:fn.text,icon:fn.icon,target:fn.target,key:fn.id}):n.createElement(ys.s,{icon:fn.icon,onClick:fn.onClick,label:fn.text,key:fn.id}))):null}const ja=je=>({header:(0,T.css)({fontSize:je.typography.h5.fontSize,fontWeight:je.typography.h5.fontWeight,padding:je.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,T.css)({color:je.colors.text.secondary,fontSize:je.typography.bodySmall.fontSize})});var Pa=e(1128),Ya=e(97289),_s=e(72625);function Us(){const je=(0,w.l4)(),{query:Zt}=(0,t.useKBar)(Vn=>({kbarSearchQuery:Vn.searchQuery,kbarIsOpen:Vn.visualState===t.VisualState.showing})),Ht=je.breakpoints.values.sm,[fn,bn]=(0,n.useState)(!window.matchMedia(`(min-width: ${Ht}px)`).matches);Mn({breakpoint:Ht,onChange:Vn=>{bn(!Vn.matches)}});const An=()=>{Zt.toggle()};return fn?n.createElement(It.h,{iconOnly:!0,icon:"search","aria-label":(0,H.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:An}):n.createElement(ds,{onClick:An})}function ds({onClick:je}){const Zt=(0,w.wW)(cn),Ht=(0,n.useMemo)(()=>(0,_s.vl)(),[]);return n.createElement("div",{className:Zt.wrapper},n.createElement("div",{className:Zt.inputWrapper},n.createElement("div",{className:Zt.prefix},n.createElement(z.J,{name:"search"})),n.createElement("button",{className:Zt.fakeInput,onClick:je},(0,H.t)("nav.search.placeholderCommandPalette","Search or jump to...")),n.createElement("div",{className:Zt.suffix},n.createElement(z.J,{name:"keyboard"}),n.createElement("span",{className:Zt.shortcut},Ht,"+k"))))}const cn=je=>{const Zt=(0,Pa.H)({theme:je});return{wrapper:Zt.wrapper,inputWrapper:Zt.inputWrapper,prefix:Zt.prefix,suffix:(0,T.css)([Zt.suffix,{display:"flex",gap:je.spacing(.5)}]),shortcut:(0,T.css)({fontSize:je.typography.bodySmall.fontSize}),fakeInput:(0,T.css)([Zt.input,{textAlign:"left",paddingLeft:28,color:je.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,T.css)`
          ${(0,Ya.focusCss)(je)}
        `}]),button:(0,T.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};function os({children:je,align:Zt="left"}){const Ht=(0,w.wW)(qs),bn=(0,w.l4)().breakpoints.values.sm,[An,Vn]=(0,n.useState)(!window.matchMedia(`(min-width: ${bn}px)`).matches);return Mn({breakpoint:bn,onChange:qn=>{Vn(!qn.matches)}}),An?n.createElement(n.Fragment,null,je):n.createElement("div",{"data-testid":"wrapper",className:(0,T.cx)(Ht.wrapper,{[Ht[Zt]]:Zt==="right"})},je)}const qs=je=>({wrapper:(0,T.css)({display:"flex",gap:je.spacing(.5),alignItems:"center"}),right:(0,T.css)({justifyContent:"flex-end"}),left:(0,T.css)({}),center:(0,T.css)({})}),Dr=n.memo(function(){const Zt=(0,w.wW)(dr),Ht=(0,tt.useSelector)(Yn=>Yn.navIndex),fn=(0,s.TH)(),bn=(0,ze.cloneDeep)(Ht.help),An=bn?st(bn):void 0,Vn=Ht.profile;let qn=Pn.config.appSubUrl||"/";return!Pn.config.bootData.user.isSignedIn&&!Pn.config.anonymousEnabled&&(qn=Mt.QX.sanitizeUrl(lt.u.getUrlForPartial(fn,{forceLogin:"true"}))),n.createElement("div",{className:Zt.layout},n.createElement(os,null,n.createElement("a",{className:Zt.logo,href:qn,title:"Go to home"},n.createElement(gn.c.MenuLogo,{className:Zt.img})),n.createElement(Ka,null)),n.createElement(os,null,n.createElement(Us,null)),n.createElement(os,{align:"right"},n.createElement($s,null),An&&n.createElement($t.L,{overlay:()=>n.createElement(ua,{node:An}),placement:"bottom-end"},n.createElement(It.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),Pn.config.newsFeedEnabled&&n.createElement(Kt,null),!P.contextSrv.user.isSignedIn&&n.createElement(Ns,null),Vn&&n.createElement($t.L,{overlay:()=>n.createElement(ua,{node:Vn}),placement:"bottom-end"},n.createElement(It.h,{className:Zt.profileButton,imgSrc:P.contextSrv.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),dr=je=>({layout:(0,T.css)({height:nt.$,display:"flex",gap:je.spacing(1),alignItems:"center",padding:je.spacing(0,1,0,2),borderBottom:`1px solid ${je.colors.border.weak}`,justifyContent:"space-between",[je.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,T.css)({height:je.spacing(3),width:je.spacing(3)}),logo:(0,T.css)({display:"flex"}),profileButton:(0,T.css)({padding:je.spacing(0,.25),img:{borderRadius:je.shape.radius.circle,height:"24px",marginRight:0,width:"24px"}})});function Fr({children:je}){const Zt=(0,w.wW)(As),{chrome:Ht}=(0,B.p)(),fn=Ht.useState(),bn=fn.searchBarHidden||fn.kioskMode===tt.KioskMode.TV,An=(0,T.cx)({[Zt.content]:!0,[Zt.contentNoSearchBar]:bn,[Zt.contentChromeless]:fn.chromeless});return n.createElement("div",{className:L()("main-view",bn&&"main-view--search-bar-hidden")},!fn.chromeless&&n.createElement(n.Fragment,null,n.createElement(K.Qj,{className:Zt.skipLink,href:"#pageContent"},"Skip to main content"),n.createElement("div",{className:(0,T.cx)(Zt.topNav)},!bn&&n.createElement(Dr,null),n.createElement(aa,{searchBarHidden:bn,sectionNav:fn.sectionNav.node,pageNav:fn.pageNav,actions:fn.actions,onToggleSearchBar:Ht.onToggleSearchBar,onToggleMegaMenu:Ht.onToggleMegaMenu,onToggleKioskMode:Ht.onToggleKioskMode}))),n.createElement("main",{className:An,id:"pageContent"},n.createElement("div",{className:Zt.panes},fn.layout===V.Q.Standard&&fn.sectionNav&&n.createElement(ma,{model:fn.sectionNav}),n.createElement("div",{className:Zt.pageContainer},je))),!fn.chromeless&&n.createElement(n.Fragment,null,n.createElement(kt,{searchBarHidden:bn,onClose:()=>Ht.setMegaMenu(!1)}),n.createElement(Ne,null)))}const As=je=>{const Zt=je.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 4px 8px rgb(0 0 0 / 4%)";return{content:(0,T.css)({display:"flex",flexDirection:"column",paddingTop:nt.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,T.css)({paddingTop:nt.$}),contentChromeless:(0,T.css)({paddingTop:0}),topNav:(0,T.css)({display:"flex",position:"fixed",zIndex:je.zIndex.navbarFixed,left:0,right:0,boxShadow:Zt,background:je.colors.background.primary,flexDirection:"column",borderBottom:`1px solid ${je.colors.border.weak}`}),panes:(0,T.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[je.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,T.css)({label:"page-container",flexGrow:1,minHeight:0,minWidth:0}),skipLink:(0,T.css)({position:"absolute",top:-1e3,":focus":{left:je.spacing(1),top:je.spacing(1),zIndex:je.zIndex.portal}})}};var Qs=e(3935),Ls=e(64022),ws=e(33877),ps=e(4021),Sr=e(73807),Lt=e(19559),Ot=e(63439);function on({appNotification:je,onClearNotification:Zt}){const Ht=(0,w.wW)(Xt);(0,Lt.Z)(()=>{setTimeout(()=>{Zt(je.id)},tt.timeoutMap[je.severity])});const fn=je.component||je.text||je.traceId;return n.createElement(Ot.b,{severity:je.severity,title:je.title,onRemove:()=>Zt(je.id),elevated:!0},fn&&n.createElement("div",{className:Ht.wrapper},n.createElement("span",null,je.component||je.text),je.traceId&&n.createElement("span",{className:Ht.trace},"Trace ID: ",je.traceId)))}function Xt(je){return{wrapper:(0,T.css)({display:"flex",flexDirection:"column"}),trace:(0,T.css)({fontSize:je.typography.pxToRem(10)})}}function Dn(){const je=(0,tt.useSelector)(bn=>(0,ps.vo)(bn.appNotifications)),Zt=(0,tt.useDispatch)(),Ht=(0,w.wW)(wn);(0,n.useEffect)(()=>{De.Z.on(Qs.SI.alertWarning,bn=>Zt((0,ws.$l)((0,Sr.ZR)(...bn)))),De.Z.on(Qs.SI.alertSuccess,bn=>Zt((0,ws.$l)((0,Sr.AT)(...bn)))),De.Z.on(Qs.SI.alertError,bn=>Zt((0,ws.$l)((0,Sr.t_)(...bn))))},[Zt]);const fn=bn=>{Zt((0,ws.ad)(bn))};return n.createElement("div",{className:Ht.wrapper},n.createElement(Ls.wc,null,je.map((bn,An)=>n.createElement(on,{key:`${bn.id}-${An}`,appNotification:bn,onClearNotification:fn}))))}function wn(je){return{wrapper:(0,T.css)({label:"app-notifications-list",zIndex:je.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var Bn=e(75475),Gn=e.n(Bn),Tn=e(13431),xt=e(80402),Nn=e(44644);function Fa({error:je,errorInfo:Zt}){const Ht=(0,s.TH)(),fn=je?.name==="ChunkLoadError";return(0,n.useEffect)(()=>{fn&&Ht.search.indexOf("chunkNotFound")===-1&&(window.location.href=lt.u.getUrlForPartial(Ht,{chunkNotFound:!0}))},[Ht,fn]),n.createElement(Nn.T,{navId:"error",layout:V.Q.Canvas},n.createElement("div",{className:us()},fn&&n.createElement("div",null,n.createElement("h2",null,"Unable to find application file"),n.createElement("br",null),n.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),n.createElement("br",null),n.createElement("div",{className:"gf-form-group"},n.createElement(K.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),n.createElement(Tn.X,{title:"Error details",error:je,errorInfo:Zt})),!fn&&n.createElement(Tn.X,{title:"An unexpected error happened",error:je,errorInfo:Zt})))}const us=(0,xt.B)(()=>(0,T.css)`
    width: 500px;
    margin: 64px auto;
  `);function Ts(){const je=(0,w.wW)(vs);return n.createElement("div",{className:je.loadingPage},n.createElement(Da.u,{text:"Loading..."}))}const vs=()=>({loadingPage:(0,T.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function Ws(je){const{chrome:Zt,keybindings:Ht}=(0,B.p)();return Zt.setMatchedRoute(je.route),(0,n.useLayoutEffect)(()=>{Ht.clearAndInitGlobalBindings(je.route)},[Ht,je.route]),(0,n.useEffect)(()=>(Mr(je.route),Za(),(0,m.GQ)("GrafanaRoute",!1,"Mounted",je.match),()=>{(0,m.GQ)("GrafanaRoute",!1,"Unmounted",je.route),Mr(je.route,!0)}),[]),(0,n.useEffect)(()=>{Za(),(0,d.sm)(),(0,m.GQ)("GrafanaRoute",!1,"Updated",je)}),(0,m.GQ)("GrafanaRoute",!1,"Rendered",je.route),n.createElement(l.SV,null,({error:fn,errorInfo:bn})=>fn?n.createElement(Fa,{error:fn,errorInfo:bn}):n.createElement(n.Suspense,{fallback:n.createElement(Ts,null)},n.createElement(je.route.component,{...je,queryParams:(0,m.Ox)(je.location.search)})))}function xr(je){return je.pageClass?je.pageClass.split(" "):[]}function Mr(je,Zt=!1){for(const Ht of xr(je))Zt?document.body.classList.remove(Ht):document.body.classList.add(Ht)}function Za(){document.body.classList.remove("sidemenu-open--xs");const je=document.getElementById("tooltip");je?.parentElement?.removeChild(je);const Zt=document.querySelectorAll(".tooltip");for(let Ht=0;Ht<Zt.length;Ht++){const fn=Zt[Ht];fn.parentElement?.removeChild(fn)}for(const Ht of Gn().drops)Ht.destroy()}var Ps=e(94547),ur=e(43685);class Xa extends n.PureComponent{constructor(){super(...arguments),this.styles=Es(o.config.theme2),this.state={},this.initListener=()=>{const Zt=(0,ur.gj)();Zt&&(this.subscription=Zt.getConnectionState().subscribe({next:Ht=>{this.setState({show:!Ht})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:Zt}=this.state;return Zt?!ne.contextSrv.isSignedIn||!o.config.liveEnabled||ne.contextSrv.user.orgRole===""?null:n.createElement("div",{className:this.styles.foot},n.createElement(Ot.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Es=(0,xt.B)(je=>({foot:(0,T.css)`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:(0,T.css)`
      max-width: 400px;
      margin: auto;
    `}));let er=[],Mo=[];function Kr(je){er.push(je)}function vr(je){Mo.push(je)}class $r extends n.Component{constructor(Zt){super(Zt),this.renderRoute=Ht=>{const fn=Ht.roles?Ht.roles():[];return n.createElement(r.CompatRoute,{exact:Ht.exact===void 0?!0:Ht.exact,sensitive:Ht.sensitive===void 0?!1:Ht.sensitive,path:Ht.path,key:Ht.path,render:bn=>fn?.length&&!fn.some(An=>ne.contextSrv.hasRole(An))?n.createElement(s.l_,{to:"/"}):n.createElement(Ws,{...bn,route:Ht})})},this.state={}}async componentDidMount(){await O(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return n.createElement(s.rs,null,(0,h.eU)().map(Zt=>this.renderRoute(Zt)))}render(){const{app:Zt}=this.props,{ready:Ht}=this.state;(0,m.GQ)("AppWrapper",!1,"rendering");const fn=bn=>{(0,d.ff)("command_palette_action_selected",{actionId:bn.id,actionName:bn.name})};return n.createElement(i.Provider,{store:f.h},n.createElement(l.z4,{style:"page"},n.createElement(B.h.Provider,{value:Zt.context},n.createElement(Ps.f,{value:o.config.theme2},n.createElement(t.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:fn}}},n.createElement(a.$i,null,n.createElement(g.n,null),n.createElement("div",{className:"grafana-app"},n.createElement(s.F0,{history:m.E1.getHistory()},n.createElement(r.CompatRouter,null,n.createElement(Fr,null,Mo.map((bn,An)=>n.createElement(bn,{key:An.toString()})),n.createElement(b,null),n.createElement(Dn,null),Ht&&this.renderRoutes(),er.map((bn,An)=>n.createElement(bn,{key:An.toString()})))))),n.createElement(Xa,null),n.createElement(a.Y0,null),n.createElement(c.lO,null)))))))}}},28291:(j,I,e)=>{"use strict";e.d(I,{M:()=>r,Z:()=>i});var t=e(89949),n=e.n(t);class i{constructor(d){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",d){if(d.columns)for(const o of d.columns)this.addColumn(o);if(d.rows)for(const o of d.rows)this.addRow(o)}}sort(d){d.col===null||d.col===void 0||this.columns.length<=d.col||(this.rows.sort((o,l)=>(o=o[d.col],l=l[d.col],+(o==null)-+(l==null)||+(o>l)||-(o<l))),d.desc&&this.rows.reverse(),this.columns[d.col].sort=!0,this.columns[d.col].desc=d.desc)}addColumn(d){this.columnMap[d.text]||(this.columns.push(d),this.columnMap[d.text]=d)}addRow(d){this.rows.push(d)}}function s(m,d,o){let l=!1;for(let a=0;a<m.length;a++)if(d[a]!==void 0&&o[a]!==void 0){if(d[a]!==o[a])return!1}else(d[a]===void 0||o[a]===void 0)&&(l=!0);return l}function r(m,...d){const o=m||new i;if(arguments.length===1)return o;if(arguments.length===2)return o.columns=d[0].hasOwnProperty("columns")?[...d[0].columns]:[],o.rows=d[0].hasOwnProperty("rows")?[...d[0].rows]:[],o;const l=d.filter(v=>!!v.columns),a={},g=l.slice().reduce((v,y)=>(y.columns.forEach(E=>{const{text:C}=E;a[C]===void 0&&(a[C]=v.length,v.push(E))}),v),[]),c=l.map(v=>v.columns.map(y=>a[y.text])),h=l.reduce((v,y,E)=>{const C=c[E];return y.rows.forEach(u=>{const D=[];C.forEach((P,S)=>{D[P]=u[S]}),v.push(D)}),v},[]),f={},b=h.reduce((v,y,E)=>{if(!f[E]){let C=E+1;for(;C<h.length;){const u=(0,t.findIndex)(h,D=>s(g,y,D),C);if(u>-1){const D=h[u];for(let P=0;P<g.length;P++)y[P]===void 0&&D[P]!==void 0&&(y[P]=D[P]);f[u]=D,C=u+1}else break}v.push(y)}return v},[]);return o.columns=g,o.rows=b,o}},92071:(j,I,e)=>{"use strict";e.d(I,{e:()=>n});var t=e(34099);const n=(0,t.PH)("core/cleanUpState")},33877:(j,I,e)=>{"use strict";e.d(I,{$l:()=>t.$l,H7:()=>n.H7,RL:()=>n.RL,ad:()=>t.ad});var t=e(4021),n=e(34139)},5933:(j,I,e)=>{"use strict";e.d(I,{Z:()=>i,h:()=>n});var t=e(62435);const n=new t.F,i=n},1541:(j,I,e)=>{"use strict";e.d(I,{P:()=>V});var t=e(42844),n=e(89949),i=e(27702),s=e(60426),r=e(34667),m=e(66310),d=e(66670),o=e(88203),l=e(65322),a=e(45937),g=e(50837),c=e(23852),h=e(23839),f=e(28580),b=e(35952),v=e(23159),y=e(79173),E=e(43533),C=(z=>(z.None="None",z.Team="Team",z.User="User",z.BuiltInRole="builtInRole",z))(C||{});const u=({title:z=(0,l.t)("access-control.add-permission.title","Add permission for"),permissions:H,assignments:Q,onAdd:X,onCancel:te})=>{const[oe,Z]=(0,i.useState)(C.None),[le,ce]=(0,i.useState)(0),[q,ne]=(0,i.useState)(0),[pe,re]=(0,i.useState)(""),[ie,Se]=(0,i.useState)(""),ye=(0,i.useMemo)(()=>{const de=[];return Q.users&&de.push({value:C.User,label:(0,l.t)("access-control.add-permission.user-label","User")}),Q.teams&&de.push({value:C.Team,label:(0,l.t)("access-control.add-permission.team-label","Team")}),Q.builtInRoles&&de.push({value:C.BuiltInRole,label:(0,l.t)("access-control.add-permission.role-label","Role")}),de},[Q]);(0,i.useEffect)(()=>{H.length>0&&Se(H[0])},[H]);const Ce=()=>oe===C.Team&&le>0||oe===C.User&&q>0||C.BuiltInRole&&E.B5.hasOwnProperty(pe);return i.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},i.createElement(b.P,{onClick:te}),i.createElement("h5",null,z),i.createElement(h.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>X({userId:q,teamId:le,builtInRole:pe,permission:ie,target:oe})},()=>i.createElement(c.K,{gap:1,direction:"row"},i.createElement(f.Ph,{"aria-label":"Role to add new permission to",value:oe,options:ye,onChange:de=>Z(de.value),disabled:ye.length===0,width:"auto"}),oe===C.User&&i.createElement(y.f,{onSelected:de=>ne(de?.value||0)}),oe===C.Team&&i.createElement(v.c,{onSelected:de=>ce(de.value?.id||0)}),oe===C.BuiltInRole&&i.createElement(f.Ph,{"aria-label":"Built-in role picker",options:Object.values(E.B5).filter(de=>de!==E.B5.None).map(de=>({value:de,label:de})),onChange:de=>re(de.value||""),width:"auto"}),i.createElement(f.Ph,{"aria-label":"Permission Level",width:"auto",value:H.find(de=>de===ie),options:H.map(de=>({label:de,value:de})),onChange:de=>Se(de.value||"")}),i.createElement(d.zx,{type:"submit",disabled:!Ce()},i.createElement(l.cC,{i18nKey:"access-control.add-permissions.save"},"Save")))))};var D=e(80011),P=e(73453);const S=({item:z,permissionLevels:H,canSet:Q,onRemove:X,onChange:te})=>i.createElement("tr",null,i.createElement("td",null,x(z)),i.createElement("td",null,R(z)),i.createElement("td",null,z.isInherited&&i.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),i.createElement("td",null,i.createElement(f.Ph,{disabled:!Q||!z.isManaged,onChange:oe=>te(z,oe.value),value:H.find(oe=>oe===z.permission),options:H.map(oe=>({value:oe,label:oe}))})),i.createElement("td",null,i.createElement(D.u,{content:O(z)},i.createElement(P.J,{name:"info-circle"}))),i.createElement("td",null,z.isManaged?i.createElement(d.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!Q,onClick:()=>X(z),"aria-label":`Remove permission for ${M(z)}`}):i.createElement(D.u,{content:z.isInherited?"Inherited Permission":"Provisioned Permission"},i.createElement(d.zx,{size:"sm",icon:"lock"})))),x=z=>z.teamId?i.createElement("img",{className:"filter-table__avatar",src:z.teamAvatarUrl,alt:`Avatar for team ${z.teamId}`}):z.userId?i.createElement("img",{className:"filter-table__avatar",src:z.userAvatarUrl,alt:`Avatar for user ${z.userId}`}):i.createElement(P.J,{size:"xl",name:"shield"}),M=z=>z.userId?z.userLogin:z.teamId?z.team:z.builtInRole,R=z=>z.userId?i.createElement("span",{key:"name"},z.userLogin," "):z.teamId?i.createElement("span",{key:"name"},z.team," "):z.builtInRole?i.createElement("span",{key:"name"},z.builtInRole," "):i.createElement("span",{key:"name"}),O=z=>`Actions: ${[...new Set(z.actions)].sort().join(" ")}`,T=({title:z,items:H,compareKey:Q,permissionLevels:X,canSet:te,onRemove:oe,onChange:Z})=>{const le=(0,i.useMemo)(()=>{const ce={};for(let q of H){const ne=q[Q];if(!ce[ne]){ce[ne]=q;continue}q.actions.length>ce[ne].actions.length&&(ce[ne]=q)}return Object.keys(ce).map(q=>ce[q])},[H,Q]);return le.length===0?null:i.createElement("div",null,i.createElement("table",{className:"filter-table gf-form-group"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",{style:{width:"1%"}}),i.createElement("th",null,z),i.createElement("th",{style:{width:"1%"}}),i.createElement("th",{style:{width:"40%"}},i.createElement(l.cC,{i18nKey:"access-control.permission-list.permission"},"Permission")),i.createElement("th",{style:{width:"1%"}}),i.createElement("th",{style:{width:"1%"}}))),i.createElement("tbody",null,le.map((ce,q)=>i.createElement(S,{item:ce,onRemove:oe,onChange:Z,canSet:te,key:`${q}-${ce.userId}`,permissionLevels:X})))))},U="",L={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},V=({title:z=(0,l.t)("access-control.permissions.title","Permissions"),buttonLabel:H=(0,l.t)("access-control.permissions.add-label","Add a permission"),emptyLabel:Q=(0,l.t)("access-control.permissions.no-permissions","There are no permissions"),resource:X,resourceId:te,canSetPermissions:oe,addPermissionTitle:Z})=>{const le=(0,m.wW)(A),[ce,q]=(0,i.useState)(!1),[ne,pe]=(0,i.useState)([]),[re,ie]=(0,i.useState)(L),Se=(0,i.useCallback)(()=>K(X,te).then(tt=>pe(tt)),[X,te]);(0,i.useEffect)(()=>{w(X).then(tt=>(ie(tt),Se()))},[X,te,Se]);const ye=tt=>{let lt=null;tt.target===C.User?lt=B(X,te,tt.userId,tt.permission):tt.target===C.Team?lt=W(X,te,tt.teamId,tt.permission):tt.target===C.BuiltInRole&&(lt=_(X,te,tt.builtInRole,tt.permission)),lt!==null&&lt.then(Se)},Ce=tt=>{let lt=null;tt.userId?lt=B(X,te,tt.userId,U):tt.teamId?lt=W(X,te,tt.teamId,U):tt.builtInRole&&(lt=_(X,te,tt.builtInRole,U)),lt!==null&&lt.then(Se)},de=(tt,lt)=>{tt.permission!==lt&&(tt.userId?ye({permission:lt,userId:tt.userId,target:C.User}):tt.teamId?ye({permission:lt,teamId:tt.teamId,target:C.Team}):tt.builtInRole&&ye({permission:lt,builtInRole:tt.builtInRole,target:C.BuiltInRole}))},we=(0,i.useMemo)(()=>(0,n.sortBy)(ne.filter(tt=>tt.teamId),["team","isManaged"]),[ne]),_e=(0,i.useMemo)(()=>(0,n.sortBy)(ne.filter(tt=>tt.userId),["userLogin","isManaged"]),[ne]),Je=(0,i.useMemo)(()=>(0,n.sortBy)(ne.filter(tt=>tt.builtInRole),["builtInRole","isManaged"]),[ne]),Ue=(0,l.t)("access-control.permissions.role","Role"),$e=(0,l.t)("access-control.permissions.user","User"),Qe=(0,l.t)("access-control.permissions.team","Team");return i.createElement("div",null,oe&&i.createElement(i.Fragment,null,r.config.featureToggles.nestedFolders&&X==="folders"&&i.createElement(i.Fragment,null,i.createElement(l.cC,{i18nKey:"access-control.permissions.permissions-change-warning"},"This will change permissions for this folder and all its descendants. In total, this will affect:"),i.createElement(g.X,{selectedItems:{folder:{[te]:!0},dashboard:{},panel:{},$all:!1}}),i.createElement(s.T,{v:2})),i.createElement(d.zx,{className:le.addPermissionButton,variant:"primary",key:"add-permission",onClick:()=>q(!0)},H),i.createElement(o.s,{in:ce},i.createElement(u,{title:Z,onAdd:ye,permissions:re.permissions,assignments:re.assignments,onCancel:()=>q(!1)}))),ne.length===0&&i.createElement("table",{className:"filter-table gf-form-group"},i.createElement("tbody",null,i.createElement("tr",null,i.createElement("th",null,Q)))),i.createElement(T,{title:Ue,items:Je,compareKey:"builtInRole",permissionLevels:re.permissions,onChange:de,onRemove:Ce,canSet:oe}),i.createElement(T,{title:$e,items:_e,compareKey:"userLogin",permissionLevels:re.permissions,onChange:de,onRemove:Ce,canSet:oe}),i.createElement(T,{title:Qe,items:we,compareKey:"team",permissionLevels:re.permissions,onChange:de,onRemove:Ce,canSet:oe}))},w=async z=>{try{return await(0,a.i)().get(`/api/access-control/${z}/description`)}catch(H){return console.error("failed to load resource description: ",H),L}},K=(z,H)=>(0,a.i)().get(`/api/access-control/${z}/${H}`),B=(z,H,Q,X)=>k(z,H,"users",Q,X),W=(z,H,Q,X)=>k(z,H,"teams",Q,X),_=(z,H,Q,X)=>k(z,H,"builtInRoles",Q,X),k=(z,H,Q,X,te)=>(0,a.i)().post(`/api/access-control/${z}/${H}/${Q}/${X}`,{permission:te}),A=z=>({breakdown:(0,t.css)({...z.typography.bodySmall,color:z.colors.text.secondary,marginBottom:z.spacing(2)}),addPermissionButton:(0,t.css)({marginBottom:z.spacing(2)})})},88203:(j,I,e)=>{"use strict";e.d(I,{s:()=>m});var t=e(27702),n=e(39330);const i="200px",s=200,r={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},m=({children:d,in:o,maxHeight:l=i,style:a=r})=>{const g={exited:{maxHeight:0},entering:{maxHeight:l},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.ZP,{in:o,timeout:s},c=>t.createElement("div",{style:{...a,...g[c]}},d))}},75443:(j,I,e)=>{"use strict";e.d(I,{A:()=>i});var t=e(27702),n=e(26473);const i=t.memo(({actions:s})=>{const{chrome:r}=(0,n.p)();return(0,t.useLayoutEffect)(()=>{r.update({actions:s})}),null});i.displayName="TopNavUpdate"},51391:(j,I,e)=>{"use strict";e.d(I,{L:()=>i,Y:()=>n});var t=e(65322);function n(s){switch(s){case"home":return(0,t.t)("nav.home.title","Home");case"new":return(0,t.t)("nav.new.title","New");case"create":return(0,t.t)("nav.create.title","Create");case"create-dashboard":return(0,t.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,t.t)("nav.create-folder.title","Folder");case"import":return(0,t.t)("nav.create-import.title","Import dashboard");case"alert":return(0,t.t)("nav.create-alert.title","Create alert rule");case"starred":return(0,t.t)("nav.starred.title","Starred");case"starred-empty":return(0,t.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,t.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,t.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.title","Library panels");case"reports":return(0,t.t)("nav.reporting.title","Reporting");case"dashboards/public":return(0,t.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,t.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,t.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,t.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,t.t)("nav.scenes.title","Scenes");case"explore":return(0,t.t)("nav.explore.title","Explore");case"alerting":return(0,t.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,t.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,t.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,t.t)("nav.alerting-home.title","Home");case"alert-list":return(0,t.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,t.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,t.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,t.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,t.t)("nav.alerting-silences.title","Silences");case"groups":return(0,t.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,t.t)("nav.alerting-admin.title","Admin");case"cfg":return(0,t.t)("nav.config.title","Administration");case"datasources":return(0,t.t)("nav.datasources.title","Data sources");case"authentication":return(0,t.t)("nav.authentication.title","Authentication");case"licensing":return(0,t.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,t.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,t.t)("nav.correlations.title","Correlations");case"users":return(0,t.t)("nav.users.title","Users");case"teams":return(0,t.t)("nav.teams.title","Teams");case"plugins":return(0,t.t)("nav.plugins.title","Plugins");case"org-settings":return(0,t.t)("nav.org-settings.title","Default preferences");case"apikeys":return(0,t.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,t.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,t.t)("nav.admin.title","Server admin");case"support-bundles":return(0,t.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,t.t)("nav.global-users.title","Users");case"global-orgs":return(0,t.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,t.t)("nav.server-settings.title","Settings");case"storage":return(0,t.t)("nav.storage.title","Storage");case"upgrading":return(0,t.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,t.t)("nav.monitoring.title","Observability");case"apps":return(0,t.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"plugin-page-grafana-incident-app":return(0,t.t)("nav.incidents.title","Incidents");case"plugin-page-grafana-ml-app":return(0,t.t)("nav.machine-learning.title","Machine learning");case"plugin-page-grafana-slo-app":return(0,t.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return(0,t.t)("nav.performance-testing.title","Performance testing");case"monitoring":return(0,t.t)("nav.observability.title","Observability");case"plugin-page-grafana-k8s-app":return(0,t.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-app-observability-app":return(0,t.t)("nav.application.title","Application (preview)");case"plugin-page-grafana-pyroscope-app":return(0,t.t)("nav.profiles.title","Profiles (preview)");case"plugin-page-grafana-kowalski-app":return(0,t.t)("nav.frontend.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,t.t)("nav.synthetics.title","Synthetics");case"help":return(0,t.t)("nav.help.title","Help");case"profile/settings":return(0,t.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,t.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,t.t)("nav.profile/password.title","Change password");case"sign-out":return(0,t.t)("nav.sign-out.title","Sign out");case"search":return(0,t.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,t.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,t.t)("nav.add-new-connections.title","Add new connection");case"connections-datasources":return(0,t.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,t.t)("nav.infrastructure.title","Infrastructure");case"standalone-plugin-page-/connections/connect-data":return(0,t.t)("nav.connect-data.title","Connect data");case"plugin-page-grafana-detect-app":return(0,t.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,t.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function i(s){switch(s){case"dashboards":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,t.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,t.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,t.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,t.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,t.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,t.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,t.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,t.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,t.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,t.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,t.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,t.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,t.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,t.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,t.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,t.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,t.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,t.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,t.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,t.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,t.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,t.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,t.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,t.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,t.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"apps":return(0,t.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,t.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,t.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"connections-add-new-connection":return(0,t.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,t.t)("nav.data-sources.subtitle","View and manage your connected data source connections");default:return}}},80557:(j,I,e)=>{"use strict";e.d(I,{M:()=>s});var t=e(42844),n=e(27702),i=e(66310);function s({className:m,leftActionsSeparator:d}){const o=(0,i.wW)(r);return d?n.createElement("div",{className:(0,t.cx)(m,o.leftActionsSeparator)}):n.createElement("div",{className:(0,t.cx)(m,o.line)})}const r=m=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:m.colors.border.medium,height:24})})},63362:(j,I,e)=>{"use strict";e.d(I,{$:()=>t});const t=40},76404:(j,I,e)=>{"use strict";e.d(I,{c:()=>a});var t=e(42844),n=e(27702),i=e(96750),s=e(66310),r=e(97289);const m=({className:g,logo:c})=>n.createElement("img",{className:g,src:`${c||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),d=({className:g,children:c})=>{const h=(0,s.l4)(),f=(0,t.css)`
    &:before {
      content: '';
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${h.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${r.mediaUp(h.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return n.createElement("div",{className:(0,t.cx)(f,g)},c)},o=({className:g})=>n.createElement("img",{className:g,src:"public/img/grafana_icon.svg",alt:"Grafana"}),l=()=>{const g=(0,s.l4)();return(0,t.css)`
    background: ${i.alpha(g.colors.background.primary,.7)};
    background-size: cover;
  `};class a{}a.LoginLogo=m,a.LoginBackground=d,a.MenuLogo=o,a.LoginBoxBackground=l,a.AppTitle="Grafana",a.LoginTitle="Welcome to Grafana",a.GetLoginSubTitle=()=>null},57821:(j,I,e)=>{"use strict";e.d(I,{t:()=>t});function t(n,i,s){const r=[];let m=!1;function d(o){const l=new URLSearchParams(o.url?.split("?")[1]);let a=`${o.url?.split("?")[0]}`;l.has("editview")&&(a+=`?editview=${l.get("editview")}`),!m&&!o.hideFromBreadcrumbs&&(s&&a===s.url?(r.unshift({text:s.text,href:o.url??""}),m=!0):r.unshift({text:o.text,href:o.url??""})),o.parentItem&&d(o.parentItem)}return i&&d(i),d(n),r}},2480:(j,I,e)=>{"use strict";e.d(I,{x:()=>r});var t=e(42844),n=e(27702),i=e(66310),s=e(73453);const r=n.forwardRef(({icon:d,children:o,onClick:l,...a},g)=>{const c=(0,i.wW)(m);return n.createElement("button",{...a,className:c.action,onClick:l},n.createElement(s.J,{name:d,size:"xl"}),o)});r.displayName="CardButton";const m=d=>({action:(0,t.css)`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${d.colors.background.secondary};
      border-radius: ${d.shape.borderRadius(1)};
      color: ${d.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${d.colors.emphasize(d.colors.background.secondary)};
      }
    `})},35952:(j,I,e)=>{"use strict";e.d(I,{P:()=>r});var t=e(42844),n=e(27702),i=e(66310),s=e(67437);const r=({onClick:d,"aria-label":o,style:l})=>{const a=(0,i.wW)(m);return n.createElement(s.h,{"aria-label":o??"Close",className:a,name:"times",onClick:d,style:l,tooltip:"Close"})},m=d=>(0,t.css)`
  position: absolute;
  right: ${d.spacing(.5)};
  top: ${d.spacing(1)};
`},47449:(j,I,e)=>{"use strict";e.d(I,{W:()=>s});var t=e(42844),n=e(27702),i=e(66310);function s(m){const{description:d,suffix:o,feature:l}=m,a=`Learn more about ${l}`,g=(0,i.wW)(r);return n.createElement("span",{className:g.container},d,n.createElement("a",{"aria-label":a,href:`https://grafana.com/docs/grafana/next/datasources/${o}`,rel:"noreferrer",target:"_blank"},a))}const r=m=>({container:(0,t.css)({color:m.colors.text.secondary,a:(0,t.css)({color:m.colors.text.link,textDecoration:"underline",marginLeft:"5px","&:hover":{textDecoration:"none"}})})})},9031:(j,I,e)=>{"use strict";e.d(I,{Q:()=>n});var t=e(27702);const n=i=>t.lazy(i)},66970:(j,I,e)=>{"use strict";e.d(I,{Z:()=>a});var t=e(42844),n=e(27702),i=e(74639),s=e(73453),r=e(66670),m=e(60801);const d=(0,t.css)`
  text-align: center;
`,o=(0,t.css)`
  max-width: 700px;
  margin: 0 auto;
`,a=({title:g,buttonIcon:c,buttonLink:h,buttonTitle:f,buttonDisabled:b,onClick:v,proTip:y,proTipLink:E,proTipLinkTitle:C,proTipTarget:u,infoBox:D,infoBoxTitle:P})=>{const S=()=>n.createElement(n.Fragment,null,y?n.createElement("span",{key:"proTipFooter"},n.createElement(s.J,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",y," "),E&&n.createElement("a",{href:E,target:u,className:"text-link"},C)):"",D?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${o}`},P&&n.createElement("h5",null,P),n.createElement("div",{dangerouslySetInnerHTML:D})):""),x=S()?"":(0,t.css)`
        margin-bottom: 20px;
      `,M=h?r.Qj:r.zx,R=n.createElement(M,{size:"lg",onClick:v,href:h,icon:c,className:x,"data-testid":i.wl.components.CallToActionCard.buttonV2(f),disabled:b},f);return n.createElement(m._,{className:d,message:g,footer:S(),callToActionElement:R})}},40387:(j,I,e)=>{"use strict";e.d(I,{$_:()=>l,Dv:()=>o,dP:()=>r});var t=e(27702),n=e(34667),i=e(73453),s=e(65322);let r=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function m(g){return{hasReleaseNotes:!0,isBeta:g.includes("-beta")}}function d(){const{buildInfo:g,licenseInfo:c}=n.config,h=[],f=c.stateInfo?` (${c.stateInfo})`:"";if(h.push({target:"_blank",id:"license",text:`${g.edition}${f}`,url:c.licenseUrl}),g.hideVersion)return h;const{hasReleaseNotes:b}=m(g.version);return h.push({target:"_blank",id:"version",text:`v${g.version} (${g.commit})`,url:b?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),g.hasUpdate&&h.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),h}function o(g){r=g}const l=t.memo(({customLinks:g})=>{const c=(g||r()).concat(d());return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,c.map(h=>t.createElement("li",{key:h.text},t.createElement(a,{item:h}))))))});l.displayName="Footer";function a({item:g}){const c=g.url?t.createElement("a",{href:g.url,target:g.target,rel:"noopener noreferrer",id:g.id},g.text):g.text;return t.createElement(t.Fragment,null,g.icon&&t.createElement(i.J,{name:g.icon})," ",c)}},2578:(j,I,e)=>{"use strict";e.d(I,{G:()=>g});var t=e(27702),n=e(74639),i=e(23839),s=e(63439),r=e(22209),m=e(64022),d=e(66670),o=e(80011),l=e(79562),a=e(77597);const g=({onSubmit:c,onSkip:h,showDefaultPasswordWarning:f})=>{const b=v=>{c(v.newPassword)};return t.createElement(i.l,{onSubmit:b},({errors:v,register:y,getValues:E})=>t.createElement(t.Fragment,null,f&&t.createElement(s.b,{severity:"info",title:"Continuing to use the default password exposes you to security risks."}),t.createElement(r.g,{label:"New password",invalid:!!v.newPassword,error:v?.newPassword?.message},t.createElement(a.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...y("newPassword",{required:"New Password is required"})})),t.createElement(r.g,{label:"Confirm new password",invalid:!!v.confirmNew,error:v?.confirmNew?.message},t.createElement(a.Z,{id:"confirm-new-password",autoComplete:"new-password",...y("confirmNew",{required:"Confirmed Password is required",validate:C=>C===E().newPassword||"Passwords must match!"})})),t.createElement(m.wc,null,t.createElement(d.zx,{type:"submit",className:l.F},"Submit"),h&&t.createElement(o.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(d.zx,{fill:"text",onClick:h,type:"button","aria-label":n.wl.pages.Login.skip},"Skip")))))}},71654:(j,I,e)=>{"use strict";e.d(I,{w:()=>d});var t=e(27702),n=e(29956),i=e(48024),s=e(1128);const r=/^(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])$/,m=(o,l)=>!(o.match(l)||!o),d=o=>{const l=o.validationRegex||r,[a,g]=(0,t.useState)(()=>o.value?m(o.value,l):!1);(0,n.Z)(()=>{g(m(o.value,l))},500,[o.value]);const c={labelWidth:26,disabled:o.disabled??!1,invalid:a,error:o.isInvalidError};return o.label&&(c.label=o.label,c.tooltip=o.tooltip||""),t.createElement(i._,{...c},t.createElement(s.I,{type:"text",placeholder:o.placeholder||"0",width:o.width||40,onChange:h=>{o.onChange(h.currentTarget.value)},value:o.value,"aria-label":o.ariaLabel||"interval input"}))}},84270:(j,I,e)=>{"use strict";e.d(I,{X:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(73453),r=e(1128),m=e(59904);const d=({name:l,onChange:a,verifyLayerNameUniqueness:g,overrideStyles:c})=>{const h=(0,i.wW)(o),[f,b]=(0,n.useState)(!1),[v,y]=(0,n.useState)(null),E=x=>{b(!0)},C=x=>{if(b(!1),v){y(null);return}l!==x&&a(x)},u=x=>{const M=x.currentTarget.value.trim();if(M.length===0){y("An empty layer name is not allowed");return}if(g&&!g(M)&&M!==l){y("Layer name already exists");return}v&&y(null)},D=x=>{C(x.currentTarget.value.trim())},P=x=>{x.key==="Enter"&&C(x.currentTarget.value)},S=x=>{x.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:h.wrapper},!f&&n.createElement("button",{className:h.layerNameWrapper,title:"Edit layer name",onClick:E,"data-testid":"layer-name-div"},n.createElement("span",{className:c?"":h.layerName},l),n.createElement(s.J,{name:"pen",className:h.layerEditIcon,size:"sm"})),f&&n.createElement(n.Fragment,null,n.createElement(r.I,{type:"text",defaultValue:l,onBlur:D,autoFocus:!0,onKeyDown:P,onFocus:S,invalid:v!==null,onChange:u,className:h.layerNameInput,"data-testid":"layer-name-input"}),v&&n.createElement(m.S,{horizontal:!0},v))))},o=l=>({wrapper:(0,t.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${l.spacing(.5)};
    `,layerNameWrapper:(0,t.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${l.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${l.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${l.colors.action.hover};
        border: 1px dashed ${l.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${l.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:(0,t.css)`
      font-weight: ${l.typography.fontWeightMedium};
      color: ${l.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${l.spacing(.5)};
    `,layerEditIcon:(0,t.cx)((0,t.css)`
        margin-left: ${l.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:(0,t.css)`
      max-width: 300px;
      margin: -4px 0;
    `})},74273:(j,I,e)=>{"use strict";e.d(I,{G:()=>i});var t=e(27702),n=e(56812);const i=s=>{const{children:r,storageKey:m,defaultValue:d}=s,[o,l]=(0,t.useState)({value:n.Z.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const c=h=>{h.key===m&&l({value:n.Z.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",c),()=>{window.removeEventListener("storage",c)}});const a=c=>{try{n.Z.setObject(m,c)}catch(h){console.error(h)}l({value:c})},g=()=>{try{n.Z.delete(m)}catch(c){console.log(c)}l({value:d})};return t.createElement(t.Fragment,null,r(o.value,a,g))}},97706:(j,I,e)=>{"use strict";e.d(I,{Z:()=>d});var t=e(27702),n=e(73289),i=e(12308),s=e(65322);const r=()=>!!i.default.oauth&&Object.keys(i.default.oauth).length>0;class m extends t.PureComponent{constructor(a){super(a),this.changePassword=g=>{const c={newPassword:g,confirmNew:g,oldPassword:"admin"};if(this.props.resetCode){const h={code:this.props.resetCode,newPassword:g,confirmPassword:g};(0,n.i)().post("/api/user/password/reset",h).then(()=>{this.toGrafana()})}else(0,n.i)().put("/api/user/password",c).then(()=>{this.toGrafana()}).catch(h=>console.error(h))},this.login=g=>{this.setState({loginErrorMessage:void 0,isLoggingIn:!0}),(0,n.i)().post("/login",g,{showErrorAlert:!1}).then(c=>{if(this.result=c,g.password!=="admin"||i.default.ldapEnabled||i.default.authProxyEnabled){this.toGrafana();return}else this.changeView(g.password==="admin")}).catch(c=>{const h=(0,n.kW)(c)?o(c):void 0;this.setState({isLoggingIn:!1,loginErrorMessage:h||(0,s.t)("login.error.unknown","Unknown error occurred")})})},this.changeView=g=>{this.setState({isChangingPassword:!0,showDefaultPasswordWarning:g})},this.toGrafana=()=>{this.result?.redirectUrl?i.default.appSubUrl!==""&&!this.result.redirectUrl.startsWith(i.default.appSubUrl)?window.location.assign(i.default.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(i.default.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1,showDefaultPasswordWarning:!1,loginErrorMessage:i.default.loginError}}render(){const{children:a}=this.props,{isLoggingIn:g,isChangingPassword:c,showDefaultPasswordWarning:h,loginErrorMessage:f}=this.state,{login:b,toGrafana:v,changePassword:y}=this,{loginHint:E,passwordHint:C,disableLoginForm:u,disableUserSignUp:D}=i.default;return t.createElement(t.Fragment,null,a({isOauthEnabled:r(),loginHint:E,passwordHint:C,disableLoginForm:u,disableUserSignUp:D,login:b,isLoggingIn:g,changePassword:y,skipPasswordChange:v,isChangingPassword:c,showDefaultPasswordWarning:h,loginErrorMessage:f}))}}const d=m;function o(l){switch(l.data?.messageId){case"password-auth.empty":case"password-auth.failed":case"password-auth.invalid":return(0,s.t)("login.error.invalid-user-or-password","Invalid username or password");case"login-attempt.blocked":return(0,s.t)("login.error.blocked","You have exceeded the number of login attempts for this user. Please try again later.");default:return l.data?.message}}},79562:(j,I,e)=>{"use strict";e.d(I,{F:()=>a,U:()=>g});var t=e(42844),n=e(27702),i=e(74639),s=e(23839),r=e(22209),m=e(1128),d=e(66670),o=e(77597);const l=(0,t.css)`
  width: 100%;
  padding-bottom: 16px;
`,a=(0,t.css)`
  justify-content: center;
  width: 100%;
`,g=({children:c,onSubmit:h,isLoggingIn:f,passwordHint:b,loginHint:v})=>n.createElement("div",{className:l},n.createElement(s.l,{onSubmit:h,validateOn:"onChange"},({register:y,errors:E})=>n.createElement(n.Fragment,null,n.createElement(r.g,{label:"Email or username",invalid:!!E.user,error:E.user?.message},n.createElement(m.I,{...y("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:v,"aria-label":i.wl.pages.Login.username})),n.createElement(r.g,{label:"Password",invalid:!!E.password,error:E.password?.message},n.createElement(o.Z,{id:"current-password",autoComplete:"current-password",passwordHint:b,...y("password",{required:"Password is required"})})),n.createElement(d.zx,{type:"submit","aria-label":i.wl.pages.Login.submit,className:a,disabled:f},f?"Logging in...":"Log in"),c)))},8874:(j,I,e)=>{"use strict";e.d(I,{$s:()=>d,dd:()=>o,pJ:()=>a});var t=e(42844),n=e(27702),i=e(66310),s=e(97289),r=e(76404),m=e(40387);const d=({children:g,enterAnimation:c=!0})=>{const h=(0,i.wW)(a);return n.createElement("div",{className:(0,t.cx)(h.loginInnerBox,c&&h.enterAnimation)},g)},o=({children:g,branding:c,isChangingPassword:h})=>{const f=(0,i.wW)(a),[b,v]=(0,n.useState)(!1),y=c?.loginSubtitle??r.c.GetLoginSubTitle(),E=c?.loginTitle??r.c.LoginTitle,C=c?.loginBoxBackground||r.c.LoginBoxBackground(),u=c?.loginLogo;return(0,n.useEffect)(()=>v(!0),[]),n.createElement(r.c.LoginBackground,{className:(0,t.cx)(f.container,b&&f.loginAnim,c?.loginBackground)},n.createElement("div",{className:f.loginMain},n.createElement("div",{className:(0,t.cx)(f.loginContent,C,"login-content-box")},n.createElement("div",{className:f.loginLogoWrapper},n.createElement(r.c.LoginLogo,{className:f.loginLogo,logo:u}),n.createElement("div",{className:f.titleWrapper},h?n.createElement("h1",{className:f.mainTitle},"Update your password"):n.createElement(n.Fragment,null,n.createElement("h1",{className:f.mainTitle},E),y&&n.createElement("h3",{className:f.subTitle},y)))),n.createElement("div",{className:f.loginOuterBox},g))),c?.hideFooter?n.createElement(n.Fragment,null):n.createElement(m.$_,{customLinks:c?.footerLinks}))},l=(0,t.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,a=g=>({loginMain:(0,t.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,t.css)`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:(0,t.css)`
      justify-content: center;
      width: 100%;
    `,loginLogo:(0,t.css)`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${s.mediaUp(g.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:(0,t.css)`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${g.spacing(3)};
    `,titleWrapper:(0,t.css)`
      text-align: center;
    `,mainTitle:(0,t.css)`
      font-size: 22px;

      @media ${s.mediaUp(g.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:(0,t.css)`
      font-size: ${g.typography.size.md};
      color: ${g.colors.text.secondary};
    `,loginContent:(0,t.css)`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${g.shape.borderRadius(4)};
      padding: ${g.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${s.mediaUp(g.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:(0,t.css)`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:(0,t.css)`
      padding: ${g.spacing(0,2,2,2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:(0,t.css)`
      animation: ${l} ease-out 0.2s;
    `})},55093:(j,I,e)=>{"use strict";e.d(I,{Y:()=>m});var t=e(89949),n=e.n(t),i=e(27702),s=e(1128),r=e(22209);class m extends i.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=i.createRef(),this.updateValue=()=>{const o=this.inputRef.current?.value;let l=!1,a="";const g=this.props.min,c=this.props.max;let h=o!==""?Number(o):void 0;h&&!Number.isNaN(h)&&(g!=null&&h<g?(a=g.toString(),l=!0):c!=null&&h>c?(a=c.toString(),l=!0):a=o??"",this.setState({text:a,inputCorrected:l})),l&&this.updateValueDebounced(),!Number.isNaN(h)&&h!==this.props.value&&this.props.onChange(h)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=o=>{this.setState({text:o.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=o=>{o.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(o){if(this.props.value!==o.value){const l=isNaN(this.props.value)?"":`${this.props.value}`;l!==this.state.text&&this.setState({text:l})}}renderInput(){return i.createElement(s.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:o}=this.state;if(o){let l="",{min:a,max:g}=this.props;return g==null?a!=null&&(l=`< ${a}`):a!=null?l=`${a} < > ${g}`:l=`> ${g}`,i.createElement(r.g,{invalid:o,error:`Out of range ${l}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},74908:(j,I,e)=>{"use strict";e.d(I,{B:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(56025),r=e(67437),m=e(79262);const d=({value:l,settings:a,onChange:g,details:c})=>{const h=(0,i.l4)(),f=(0,i.wW)(o);return n.createElement(s.zH,{color:l??"",onChange:g,enableNamedColors:a?.enableNamedColors!==!1},({ref:b,showColorPicker:v,hideColorPicker:y})=>n.createElement("div",{className:f.spot},n.createElement("div",{className:f.colorPicker},n.createElement(m.b,{ref:b,onClick:v,onMouseLeave:y,color:l?h.visualization.getColorByName(l):h.components.input.borderColor})),c&&n.createElement(n.Fragment,null,l?n.createElement("span",{className:f.colorText,onClick:v},l):n.createElement("span",{className:f.placeholderText,onClick:v},a?.placeholder??"Select color"),a?.isClearable&&l&&n.createElement(r.h,{name:"times",onClick:()=>g(void 0),tooltip:"Clear settings"}))))},o=l=>({spot:(0,t.css)`
      cursor: pointer;
      color: ${l.colors.text};
      background: ${l.components.input.background};
      padding: 3px;
      height: ${l.v1.spacing.formInputHeight}px;
      border: 1px solid ${l.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      &:hover {
        border: 1px solid ${l.components.input.borderHover};
      }
    `,colorPicker:(0,t.css)`
      padding: 0 ${l.spacing(1)};
    `,colorText:(0,t.css)`
      flex-grow: 2;
    `,placeholderText:(0,t.css)`
      flex-grow: 2;
      color: ${l.colors.text.secondary};
    `})},48570:(j,I,e)=>{"use strict";e.d(I,{w:()=>i});var t=e(27702),n=e(55093);const i=({value:s,onChange:r,item:m})=>{const{settings:d}=m,o=(0,t.useCallback)(l=>{r(d?.integer&&l!==void 0?Math.floor(l):l)},[r,d?.integer]);return t.createElement(n.Y,{value:s,min:d?.min,max:d?.max,step:d?.step,placeholder:d?.placeholder,onChange:o})}},53035:(j,I,e)=>{"use strict";e.d(I,{u:()=>Bt,l:()=>yt});var t=e(27702),n=e(41199),i=e(27001),s=e(29241),r=e(5168),m=e(42074),d=e(40705),o=e(15672),l=e(86912),a=e(42844),g=e(89949),c=e(77104),h=e(5354),f=e(1128),b=e(56025),v=e(67437),y=e(66310),E=e(66670),C=e(79978),u=e(80402);const D=[{value:r.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:r.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class P extends t.PureComponent{constructor(ct){super(ct),this.onAddThreshold=()=>{const{steps:Be}=this.state;let Le=0;Be.length>1&&(Le=Be[Be.length-1].value+10);let he=h.O9.filter(Ie=>!Be.some(Te=>Te.color===Ie))[1];he||(he="#CCCCCC");const He={value:Le,color:he,key:S++},Pe=[...Be,He];(0,c.bP)(Pe),this.setState({steps:Pe},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=Be=>{const{steps:Le}=this.state;Le.length&&Be.key!==Le[0].key&&this.setState({steps:Le.filter(he=>he.key!==Be.key)},this.onChange)},this.onChangeThresholdValue=(Be,Le)=>{const he=Be.target.value.replace(/,/g,"."),He=parseFloat(he),Pe=isNaN(He)?"":He,Ie=this.state.steps.map(Te=>(Te.key===Le.key&&(Te={...Te,value:Pe}),Te));Ie.length&&(Ie[0].value=-1/0),(0,c.bP)(Ie),this.setState({steps:Ie})},this.onChangeThresholdColor=(Be,Le)=>{const{steps:he}=this.state,He=he.map(Pe=>(Pe.key===Be.key&&(Pe={...Pe,color:Le}),Pe));this.setState({steps:He},this.onChange)},this.onBlur=()=>{const Be=[...this.state.steps];(0,c.bP)(Be),this.setState({steps:Be},this.onChange)},this.onChange=()=>{this.props.onChange(M(this.props.thresholds,this.state.steps))},this.onModeChanged=Be=>{this.props.onChange({...this.props.thresholds,mode:Be})};const ge=x(ct.thresholds.steps);ge[0].value=-1/0,this.state={steps:ge},this.latestThresholdInputRef=t.createRef()}renderInput(ct,ge,Be){const Le=this.props.thresholds.mode===r.H.Percentage,he=`Threshold ${Be+1}`;return isFinite(ct.value)?t.createElement(f.I,{type:"number",step:"0.0001",key:Le.toString(),onChange:He=>this.onChangeThresholdValue(He,ct),value:ct.value,"aria-label":he,ref:Be===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:ge.inputPrefix},t.createElement("div",{className:ge.colorPicker},t.createElement(b.zH,{color:ct.color,onChange:He=>this.onChangeThresholdColor(ct,He),enableNamedColors:!0})),Le&&t.createElement("div",{className:ge.percentIcon},"%")),suffix:t.createElement(v.h,{className:ge.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(ct),tooltip:`Remove ${he}`})}):t.createElement(f.I,{type:"text",value:"Base","aria-label":he,disabled:!0,prefix:t.createElement("div",{className:ge.colorPicker},t.createElement(b.zH,{color:ct.color,onChange:He=>this.onChangeThresholdColor(ct,He),enableNamedColors:!0}))})}render(){const{thresholds:ct}=this.props,{steps:ge}=this.state;return t.createElement(y.Ni.Consumer,null,Be=>{const Le=R(Be);return t.createElement("div",{className:Le.wrapper},t.createElement(E.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Le.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Le.thresholds},ge.slice(0).reverse().map((he,He)=>t.createElement("div",{className:Le.item,key:`${he.key}`},this.renderInput(he,Le,He)))),t.createElement("div",null,t.createElement(C._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(d.S,{options:D,onChange:this.onModeChanged,value:ct.mode})))})}}let S=100;function x(ft){return(!ft||ft.length===0)&&(ft=[{value:-1/0,color:"green"}]),ft.filter((ct,ge)=>(0,g.isNumber)(ct.value)||ge===0).map(ct=>({color:ct.color,value:ct.value===null?-1/0:ct.value,key:S++}))}function M(ft,ct){return{mode:ft.mode??r.H.Absolute,steps:ct.map(Be=>{const{key:Le,...he}=Be;return he})}}const R=(0,u.B)(ft=>({wrapper:(0,a.css)`
      display: flex;
      flex-direction: column;
    `,thresholds:(0,a.css)`
      display: flex;
      flex-direction: column;
      margin-bottom: ${ft.spacing(2)};
    `,item:(0,a.css)`
      margin-bottom: ${ft.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:(0,a.css)`
      padding: 0 ${ft.spacing(1)};
    `,addButton:(0,a.css)`
      margin-bottom: ${ft.spacing(1)};
    `,percentIcon:(0,a.css)`
      font-size: ${ft.typography.bodySmall.fontSize};
      color: ${ft.colors.text.secondary};
    `,inputPrefix:(0,a.css)`
      display: flex;
      align-items: center;
    `,trashIcon:(0,a.css)`
      color: ${ft.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${ft.colors.text};
      }
    `}));class O extends t.PureComponent{constructor(ct){super(ct)}render(){const{onChange:ct}=this.props;let ge=this.props.value;return ge||(ge={mode:r.H.Percentage,steps:[]}),t.createElement(P,{thresholds:ge,onChange:ct})}}var T=e(51046),U=e(64022),L=e(73453),V=e(13741),w=e(1553),K=e(95535),B=e(85532),W=e(73990),_=e(28580);function k({mapping:ft,index:ct,onChange:ge,onRemove:Be,onDuplicate:Le,showIconPicker:he}){const{key:He,result:Pe,id:Ie}=ft,Te=(0,y.wW)(A),Re=(0,t.useRef)(null),ue=(0,t.useCallback)(ut=>{const ht={...ft,result:{...ft.result}};ut(ht),ge(ct,ht)},[ft,ct,ge]);(0,t.useEffect)(()=>{Re.current&&ft.isNew&&(Re.current.focus(),ue(ut=>{ut.isNew=!1}))},[ft,Re,ue]);const xe=ut=>{ue(ht=>{ht.result.color=ut})},Ve=()=>{ue(ut=>{ut.result.color=void 0})},Ne=ut=>{ue(ht=>{ht.result.icon=ut})},fe=()=>{ue(ut=>{ut.result.icon=void 0})},ve=ut=>{ue(ht=>{ht.key=ut.currentTarget.value})},ze=ut=>{ue(ht=>{ht.result.text=ut.currentTarget.value})},Oe=ut=>{ue(ht=>{ht.from=parseFloat(ut.currentTarget.value)})},Fe=ut=>{ue(ht=>{ht.to=parseFloat(ut.currentTarget.value)})},Ge=ut=>{ue(ht=>{ht.pattern=ut.currentTarget.value})},nt=ut=>{ue(ht=>{ht.specialMatch=ut.value})},Xe=[{label:"Null",value:T.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:T.e.NaN,description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:T.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:T.e.True,description:"Boolean true values"},{label:"False",value:T.e.False,description:"Boolean false values"},{label:"Empty",value:T.e.Empty,description:"Empty string"}];return t.createElement(B._l,{key:Ie,draggableId:Ie,index:ct},ut=>t.createElement("tr",{className:Te.dragRow,ref:ut.innerRef,...ut.draggableProps},t.createElement("td",null,t.createElement("div",{className:Te.dragHandle,...ut.dragHandleProps},t.createElement(L.J,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:Te.typeColumn},ft.type),t.createElement("td",null,ft.type===T.H.ValueToText&&t.createElement(f.I,{ref:Re,type:"text",value:He??"",onChange:ve,placeholder:"Exact value to match"}),ft.type===T.H.RangeToText&&t.createElement("div",{className:Te.rangeInputWrapper},t.createElement(f.I,{type:"number",value:ft.from??"",placeholder:"Range start",onChange:Oe,prefix:"From"}),t.createElement(f.I,{type:"number",value:ft.to??"",placeholder:"Range end",onChange:Fe,prefix:"To"})),ft.type===T.H.RegexToText&&t.createElement(f.I,{type:"text",value:ft.pattern??"",placeholder:"Regular expression",onChange:Ge}),ft.type===T.H.SpecialValue&&t.createElement(_.Ph,{value:Xe.find(ht=>ht.value===ft.specialMatch),options:Xe,onChange:nt})),t.createElement("td",null,t.createElement(f.I,{type:"text",value:Pe.text??"",onChange:ze,placeholder:"Optional display text"})),t.createElement("td",{className:Te.textAlignCenter},Pe.color&&t.createElement(U.Lh,{spacing:"sm",justify:"center"},t.createElement(b.zH,{color:Pe.color,onChange:xe,enableNamedColors:!0}),t.createElement(v.h,{name:"times",onClick:Ve,tooltip:"Remove color",tooltipPlacement:"top"})),!Pe.color&&t.createElement(b.zH,{color:"gray",onChange:xe,enableNamedColors:!0},ht=>t.createElement(E.zx,{variant:"primary",fill:"text",onClick:ht.showColorPicker,ref:ht.ref,size:"sm"},"Set color"))),he&&t.createElement("td",{className:Te.textAlignCenter},t.createElement(U.Lh,{spacing:"sm",justify:"center"},t.createElement(K.E,{onChange:Ne,onClear:fe,value:Pe.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:Pe.color}),Pe.icon&&t.createElement(v.h,{name:"times",onClick:fe,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:Te.textAlignCenter},t.createElement(U.Lh,{spacing:"sm"},t.createElement(v.h,{name:"copy",onClick:()=>Le(ct),"data-testid":"duplicate-value-mapping","aria-label":"Duplicate value mapping",tooltip:"Duplicate"}),t.createElement(v.h,{name:"trash-alt",onClick:()=>Be(ct),"data-testid":"remove-value-mapping","aria-label":"Delete value mapping",tooltip:"Delete"})))))}const A=ft=>({dragRow:(0,a.css)({position:"relative"}),dragHandle:(0,a.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${ft.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,a.css)({display:"flex","> div:first-child":{marginRight:ft.spacing(2)}}),regexInputWrapper:(0,a.css)({display:"flex","> div:first-child":{marginRight:ft.spacing(2)}}),typeColumn:(0,a.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,a.css)({textAlign:"center"})});function z({value:ft,onChange:ct,onClose:ge,showIconPicker:Be}){const Le=(0,y.wW)(H),[he,He]=(0,t.useState)([]);(0,t.useEffect)(()=>{He(Z(ft))},[ft]);const Pe=Ne=>{if(!ft||!Ne.destination)return;const fe=[...he],ve=fe[Ne.source.index];fe.splice(Ne.source.index,1),fe.splice(Ne.destination.index,0,ve),He(fe)},Ie=(Ne,fe)=>{const ve=[...he];ve.splice(Ne,1,fe),He(ve)},Te=Ne=>{const fe=[...he];fe.splice(Ne,1),He(fe)},Re=[{label:"Value",value:T.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:T.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:T.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:T.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],ue=Ne=>{He([...he,X({type:Ne.value,result:{},isNew:!0})])},xe=Ne=>{const fe=te(he[Ne]),ve=[...he];ve.splice(Ne,0,{...fe});for(let ze=Ne;ze<he.length;ze++)ve[ze].result.index=ze;He(ve)},Ve=()=>{ct(oe(he)),ge()};return(0,t.useEffect)(()=>{ft?.length||ue({value:T.H.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Le.tableWrap},t.createElement("table",{className:Le.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),Be&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(B.Z5,{onDragEnd:Pe},t.createElement(B.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},Ne=>t.createElement("tbody",{ref:Ne.innerRef,...Ne.droppableProps},he.map((fe,ve)=>t.createElement(k,{key:fe.id,mapping:fe,index:ve,onChange:Ie,onRemove:Te,onDuplicate:xe,showIconPicker:Be})),Ne.placeholder))))),t.createElement(V.u.ButtonRow,{leftItems:t.createElement(W.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:Re,onChange:ue})},t.createElement(E.zx,{variant:"secondary",fill:"outline",onClick:ge},"Cancel"),t.createElement(E.zx,{variant:"primary",onClick:Ve},"Update")))}const H=ft=>({tableWrap:(0,a.css)`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,a.css)({width:"100%",marginBottom:ft.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:ft.colors.action.hover}," th, td":{padding:ft.spacing(1)}})});function Q(){return(0,g.uniqueId)("mapping-")}function X(ft){return{type:T.H.ValueToText,result:{},id:Q(),...ft}}function te(ft){return{...X(ft),id:Q()}}function oe(ft){const ct=[],ge={type:T.H.ValueToText,options:{}};return ft.forEach((Be,Le)=>{const he={...Be.result,index:Le};switch((!he.text||he.text.trim().length===0)&&(he.text=void 0),Be.type){case T.H.ValueToText:Be.key!=null&&(ge.options[Be.key]=he);break;case T.H.RangeToText:Be.from!=null&&Be.to!=null&&ct.push({type:Be.type,options:{from:Be.from,to:Be.to,result:he}});break;case T.H.RegexToText:Be.pattern!=null&&ct.push({type:Be.type,options:{pattern:Be.pattern,result:he}});break;case T.H.SpecialValue:ct.push({type:Be.type,options:{match:Be.specialMatch,result:he}})}}),Object.keys(ge.options).length>0&&ct.unshift(ge),ct}function Z(ft){const ct=[];if(ft)for(const ge of ft)switch(ge.type){case T.H.ValueToText:for(const Be of Object.keys(ge.options))ct.push(X({type:ge.type,result:ge.options[Be],key:Be}));break;case T.H.RangeToText:ct.push(X({type:ge.type,result:ge.options.result,from:ge.options.from??0,to:ge.options.to??0}));break;case T.H.RegexToText:ct.push(X({type:ge.type,result:ge.options.result,pattern:ge.options.pattern}));break;case T.H.SpecialValue:ct.push(X({type:ge.type,result:ge.options.result,specialMatch:ge.options.match??T.e.Null}))}return ct.sort((ge,Be)=>(ge.result.index??0)>(Be.result.index??0)?1:-1),ct}const le=t.memo(ft=>{const{value:ct,onChange:ge,item:Be}=ft,Le=(0,y.wW)(ce),he=Be.settings?.icon,[He,Pe]=(0,t.useState)(!1),Ie=(0,t.useCallback)(()=>{Pe(!1)},[Pe]),Te=(0,t.useMemo)(()=>Z(ct),[ct]),Re=(0,t.useCallback)((xe,Ve)=>{Te[Ve].result.color=xe,ge(oe(Te))},[Te,ge]),ue=(0,t.useCallback)((xe,Ve)=>{Te[Ve].result.icon=xe,ge(oe(Te))},[Te,ge]);return t.createElement(U.wc,null,t.createElement("table",{className:Le.compactTable},t.createElement("tbody",null,Te.map((xe,Ve)=>t.createElement("tr",{key:Ve.toString()},t.createElement("td",null,xe.type===T.H.ValueToText&&xe.key,xe.type===T.H.RangeToText&&t.createElement("span",null,"[",xe.from," - ",xe.to,"]"),xe.type===T.H.RegexToText&&xe.pattern,xe.type===T.H.SpecialValue&&xe.specialMatch),t.createElement("td",null,t.createElement(L.J,{name:"arrow-right"})),t.createElement("td",null,xe.result.text),xe.result.color&&t.createElement("td",null,t.createElement(b.zH,{color:xe.result.color,onChange:Ne=>Re(Ne,Ve),enableNamedColors:!0})),he&&xe.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(K.E,{onChange:Ne=>ue(Ne,Ve),value:xe.result.icon,size:w.zc.SMALL,folderName:w.QS.Icon,mediaType:w.DD.Icon,color:xe.result.color})))))),t.createElement(E.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Pe(!0)},Te.length>0&&t.createElement("span",null,"Edit value mappings"),Te.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(V.u,{isOpen:He,title:"Value mappings",onDismiss:Ie,className:Le.modal,closeOnBackdropClick:!1},t.createElement(z,{value:ct,onChange:ge,onClose:Ie,showIconPicker:he})))});le.displayName="ValueMappingsEditor";const ce=ft=>({modal:(0,a.css)({width:"980px"}),compactTable:(0,a.css)({width:"100%","tbody td":{padding:ft.spacing(.5)}})});var q=e(81290);const ne=({value:ft,onChange:ct,item:ge})=>{const{placeholder:Be,isClearable:Le}=ge?.settings??{},he=(0,t.useCallback)(He=>{ct(He?.value?.uid)},[ct]);return t.createElement(q.o,{isClearable:Le,defaultOptions:!0,onChange:he,placeholder:Be,value:ft})};var pe=e(74908),re=e(58192),ie=e(93666),Se=e(22209);const ye=({value:ft,onChange:ct,item:ge,id:Be})=>{const Le=(0,y.l4)(),he=(0,y.wW)(de),He=(0,re.QY)(ft?.mode),Ie=(ge.settings?.byValueSupport?re.WO.list():re.WO.list().filter(Ve=>!Ve.isByValue)).map(Ve=>{let Ne=Ve.isByValue?" (by value)":"";return{value:Ve.id,label:`${Ve.name}${Ne}`,description:Ve.description,isContinuous:Ve.isContinuous,isByValue:Ve.isByValue,component(){return t.createElement(Ce,{mode:Ve,theme:Le})}}}),Te=Ve=>{ct({...ft,mode:Ve.value})},Re=Ve=>{ct({...ft,mode:xe,fixedColor:Ve})},ue=Ve=>{ct({...ft,mode:xe,seriesBy:Ve})},xe=ft?.mode??ie.S.Thresholds;if(xe===ie.S.Fixed||xe===ie.S.Shades)return t.createElement("div",{className:he.group},t.createElement(_.Ph,{minMenuHeight:200,options:Ie,value:xe,onChange:Te,className:he.select,inputId:Be}),t.createElement(pe.B,{value:ft?.fixedColor,onChange:Re}));if(ge.settings?.bySeriesSupport&&He.isByValue){const Ve=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Le.spacing(2)}},t.createElement(_.Ph,{minMenuHeight:200,options:Ie,value:xe,onChange:Te,inputId:Be})),t.createElement(Se.g,{label:"Color series by"},t.createElement(d.S,{value:ft?.seriesBy??"last",options:Ve,onChange:ue})))}return t.createElement(_.Ph,{minMenuHeight:200,options:Ie,value:xe,onChange:Te,inputId:Be})},Ce=({mode:ft,theme:ct})=>{if(!ft.getColors)return null;const ge=ft.getColors(ct).map(ct.visualization.getColorByName),Be={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(ft.isContinuous)Be.background=`linear-gradient(90deg, ${ge.join(",")})`;else{let Le="",he="";for(let He=0;He<ge.length;He++){const Pe=ge[He];if(Le==="")Le=`linear-gradient(90deg, ${Pe} 0%`;else{const Te=He/(ge.length-1)*100;Le+=`, ${he} ${Te}%, ${Pe} ${Te}%`}he=Pe}Be.background=Le}return t.createElement("div",{style:Be})},de=ft=>({group:(0,a.css)`
      display: flex;
    `,select:(0,a.css)`
      margin-right: 8px;
      flex-grow: 1;
    `});var we=e(24094),_e=e(36537);const Je=({value:ft,onChange:ct,context:ge})=>t.createElement(_e.d,{links:ft,onChange:ct,data:ge.data,getSuggestions:()=>ge.getSuggestions?ge.getSuggestions(we.o3.Values):[]});class Ue extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:ct}=this.props,{settings:ge}=ct;let Be=ct.settings?.options||[];ge?.getOptions&&(Be=await ge.getOptions(this.props.context)),this.state.options!==Be&&this.setState({isLoading:!1,options:Be})}}componentDidMount(){this.updateOptions()}componentDidUpdate(ct){const ge=ct.item?.settings,Be=this.props.item?.settings;if(ge!==Be)this.updateOptions();else if(Be?.getOptions){const Le=ct.context?.data,he=this.props.context?.data;Le!==he&&this.updateOptions()}}render(){const{options:ct,isLoading:ge}=this.state,{value:Be,onChange:Le,item:he}=this.props,{settings:He}=he;return t.createElement(_.NU,{isLoading:ge,value:Be,defaultValue:Be,allowCustomValue:He?.allowCustomValue,onChange:Pe=>{Le(Pe.map(Ie=>Ie.value).flatMap(Ie=>Ie!==void 0?[Ie]:[]))},options:ct})}}var $e=e(48570);class Qe extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:ct}=this.props,{settings:ge}=ct;let Be=ct.settings?.options||[];ge?.getOptions&&(Be=await ge.getOptions(this.props.context)),this.state.options!==Be&&this.setState({isLoading:!1,options:Be})}}componentDidMount(){this.updateOptions()}componentDidUpdate(ct){const ge=ct.item?.settings,Be=this.props.item?.settings;if(ge!==Be)this.updateOptions();else if(Be?.getOptions){const Le=ct.context?.data,he=this.props.context?.data;Le!==he&&this.updateOptions()}}render(){const{options:ct,isLoading:ge}=this.state,{value:Be,onChange:Le,item:he}=this.props,{settings:He}=he;let Pe=ct.find(Ie=>Ie.value===Be);return!Pe&&Be&&(Pe={label:`${Be}`,value:Be}),t.createElement(_.Ph,{isLoading:ge,value:Pe,defaultValue:Be,allowCustomValue:He?.allowCustomValue,isClearable:He?.isClearable,onChange:Ie=>Le(Ie?.value),options:ct})}}var tt=e(79451),lt=e(10133);const Me=({value:ft,onChange:ct,item:ge,id:Be})=>t.createElement(lt.m,{stats:ft,onChange:ct,allowMultiple:!!ge.settings?.allowMultiple,defaultStat:ge.settings?.defaultStat,inputId:Be});var De=e(85819),We=e(34667);class qe extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=ct=>{const{value:ge,onChange:Be}=this.props,Le=[...ge];Le.splice(ct,1),Be(Le)},this.onValueChange=(ct,ge)=>{if("key"in ct&&ct.key!=="Enter")return;const{value:Be,onChange:Le}=this.props,he=ct.currentTarget.value.trim();if(ge<0){he&&(ct.currentTarget.value="",Le([...Be,he])),this.setState({showAdd:!1});return}if(!he)return this.onRemoveString(ge);const He=[...Be];He[ge]=he,Le(He)}}render(){const{value:ct,item:ge}=this.props,{showAdd:Be}=this.state,Le=st(We.config.theme2),he=ge.settings?.placeholder||"Add text";return t.createElement("div",null,ct.map((He,Pe)=>t.createElement(f.I,{className:Le.textInput,key:`${Pe}/${He}`,defaultValue:He||"",onBlur:Ie=>this.onValueChange(Ie,Pe),onKeyDown:Ie=>this.onValueChange(Ie,Pe),suffix:t.createElement(L.J,{className:Le.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Pe)})})),Be?t.createElement(f.I,{autoFocus:!0,className:Le.textInput,placeholder:he,defaultValue:"",onBlur:He=>this.onValueChange(He,-1),onKeyDown:He=>this.onValueChange(He,-1),suffix:t.createElement(L.J,{name:"plus-circle"})}):t.createElement(E.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},he))}}const st=(0,u.B)(ft=>({textInput:(0,a.css)`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${ft.components.input.borderHover};
      }
    `,trashIcon:(0,a.css)`
      color: ${ft.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${ft.colors.text};
      }
    `}));var dt=e(62916);function Tt({value:ft,onChange:ct,item:ge}){const Be=(0,y.wW)(Nt);return ge?.settings?.isClearable&&ft!=null?t.createElement("div",{className:Be.wrapper},t.createElement("span",{className:Be.first},t.createElement(dt.n,{value:ft,onChange:ct})),t.createElement(v.h,{name:"times",onClick:()=>ct(void 0),tooltip:"Clear unit selection"})):t.createElement(dt.n,{value:ft,onChange:ct})}const Nt=ft=>({wrapper:(0,a.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,a.css)`
    margin-right: 8px;
    flex-grow: 2;
  `}),Bt=()=>{const ft={id:"number",name:"Number",description:"Allows numeric values input",editor:$e.w},ct={id:"slider",name:"Slider",description:"Allows numeric values input",editor:tt.p},ge={id:"text",name:"Text",description:"Allows string values input",editor:De.A},Be={id:"strings",name:"String array",description:"An array of strings",editor:qe},Le={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Oe){const{id:Fe,...Ge}=Oe;return t.createElement(m.r,{...Ge,onChange:nt=>Oe.onChange(nt.currentTarget.checked)})}},he={id:"select",name:"Select",description:"Allows option selection",editor:Qe},He={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:Ue},Pe={id:"radio",name:"Radio",description:"Allows option selection",editor(Oe){return t.createElement(d.S,{...Oe,options:Oe.item.settings?.options})}},Ie={id:"unit",name:"Unit",description:"Allows unit input",editor:Tt},Te={id:"color",name:"Color",description:"Allows color selection",editor(Oe){return t.createElement(pe.B,{value:Oe.value,onChange:Oe.onChange,settings:Oe.item.settings,details:!0})}},Re={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:ye},ue={id:"links",name:"Links",description:"Allows defining data links",editor:Je},xe={id:"stats-picker",name:"Stats Picker",editor:Me,description:""},Ve={id:"timezone",name:"Time zone",description:"Time zone selection",editor:o.O},Ne={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:l.b};return[ge,ft,ct,Le,Pe,he,Ie,ue,xe,Be,Ve,Re,Te,He,Ne,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ne},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:le},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:O}]},yt=()=>{const ft=["Standard options"],ct={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:i.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:ft},ge={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:i.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:ft},Be={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto"},shouldApply:xe=>xe.type===s.fS.number,category:ft},Le={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto"},shouldApply:xe=>xe.type===s.fS.number,category:ft},he={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:i.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:xe=>xe.type===s.fS.number,category:ft},He={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:i.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:ft},Pe={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:i.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:xe=>xe?xe.length:0},Ie={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:i.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:ft},Te={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:i.uj,settings:{},defaultValue:[],shouldApply:xe=>xe.type!==s.fS.time,category:["Value mappings"],getItemsCount:xe=>xe?xe.length:0},Re={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:i.ZN,settings:{},defaultValue:{mode:r.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:xe=>xe?xe.steps.length:0},ue={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:i.W4,shouldApply:()=>!0,settings:{},category:ft};return[ge,Be,Le,he,ct,Ie,He,Pe,Te,Re,ue]}},79451:(j,I,e)=>{"use strict";e.d(I,{p:()=>o});var t=e(42844),n=e(76808),i=e(30450),s=e(27702),r=e(66310),m=e(72719),d=e(55093);const o=({value:g,onChange:c,item:h})=>{const f=(0,s.useRef)(null),{settings:b}=h,v=b?.min||0,y=b?.max||100,E=b?.step,C=b?.marks||{[v]:v,[y]:y},u=b?.included,D=b?.ariaLabelForHandle,P=75,S=!0,x=(0,r.l4)(),[M,R]=(0,s.useState)(g??v),[O,T]=(0,s.useState)(P);(0,s.useEffect)(()=>{g!=null&&g!==M&&R(g)},[g,M]),(0,s.useEffect)(()=>{const B=getComputedStyle(f.current),W=B.getPropertyValue("font-weight")||"normal",_=B.getPropertyValue("font-size")||"16px",k=B.getPropertyValue("font-family")||"Arial",A="0",z=4,H=8,Q=Math.max((y+(E||0)).toString().length,(y-(E||0)).toString().length)+z,X=A.repeat(Q),te=l(X,`${W} ${_} ${k}`);te&&T(te+H*2)},[y,E]);const U=(0,s.useCallback)(B=>{const W=typeof B=="number"?B:B[0];R(W),c&&c(W)},[R,c]),L=(0,s.useCallback)(B=>{let W=B;(Number.isNaN(W)||!W)&&(W=0),R(W),c&&c(W)},[c]),V=(0,m.W)(x,S,!!C),w=a(x,O),K=S?[]:[V.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(V.container,V.slider)},s.createElement(n.Global,{styles:V.slider}),s.createElement("label",{className:(0,t.cx)(V.sliderInput,...K)},s.createElement(i.Z,{min:v,max:y,step:E,defaultValue:g,value:M,onChange:U,vertical:!S,reverse:!1,ariaLabelForHandle:D,marks:C,included:u}),s.createElement("span",{className:w.numberInputWrapper,ref:f},s.createElement(d.Y,{value:M,onChange:L,max:y,min:v,step:E}))))};function l(g,c){const f=document.createElement("canvas").getContext("2d");return f?(f.font=c,f.measureText(g).width):null}const a=(g,c)=>({numberInputWrapper:(0,t.css)`
      margin-left: ${g.spacing(3)};
      max-height: 32px;
      max-width: ${c}px;
      min-width: ${c}px;
      overflow: visible;
      width: 100%;
    `})},85819:(j,I,e)=>{"use strict";e.d(I,{A:()=>s});var t=e(27702),n=e(60105),i=e(1128);const s=({value:r,onChange:m,item:d,suffix:o})=>{const l=d.settings?.useTextarea?n.K:i.I,a=(0,t.useCallback)(g=>{let c=r??"";"key"in g?g.key==="Enter"&&!d.settings?.useTextarea&&(c=g.currentTarget.value.trim()):c=g.currentTarget.value.trim(),c!==r&&m(c===""?void 0:c)},[r,d.settings?.useTextarea,m]);return t.createElement(l,{placeholder:d.settings?.placeholder,defaultValue:r||"",rows:d.settings?.useTextarea&&d.settings.rows||5,onBlur:a,onKeyDown:a,suffix:o})}},44644:(j,I,e)=>{"use strict";e.d(I,{T:()=>L});var t=e(42844),n=e(27702),i=e(38192),s=e(66310),r=e(29372),m=e(26473),d=e(95685);const o=({isLoading:w,children:K,className:B})=>{let W=B?n.createElement("div",{className:B},K):K;return n.createElement(n.Fragment,null,w?n.createElement(d.Z,null):W)};var l=e(87831),a=e(73289),g=e(67437),c=e(22209),h=e(1128),f=e(21323);const b=({value:w,onEdit:K})=>{const B=(0,s.wW)(v),[W,_]=(0,n.useState)(w),[k,A]=(0,n.useState)(!1),[z,H]=(0,n.useState)(!1),[Q,X]=(0,n.useState)();(0,n.useEffect)(()=>{_(w)},[w]);const te=(0,n.useCallback)(async oe=>{const Z=oe.currentTarget.value;if(!Z)X("Please enter a title");else if(Z===w)X(void 0),A(!1);else{H(!0);try{await K(Z),X(void 0),A(!1)}catch(le){(0,a.kW)(le)?X(le.data.message):le instanceof Error&&X(le.message)}H(!1)}},[K,w]);return k?n.createElement("div",{className:B.inputContainer},n.createElement(c.g,{className:B.field,loading:z,invalid:!!Q,error:Q},n.createElement(h.I,{className:B.input,defaultValue:W,onKeyDown:oe=>{oe.key==="Enter"&&te(oe)},autoFocus:!0,onBlur:te,onChange:oe=>_(oe.currentTarget.value),onFocus:()=>A(!0)}))):n.createElement("div",{className:B.textContainer},n.createElement("div",{className:B.textWrapper},n.createElement(f.x,{element:"h1",truncate:!0},W),n.createElement(g.h,{name:"pen",size:"lg",tooltip:"Edit title",onClick:()=>A(!0)})))};b.displayName="EditableTitle";const v=w=>({textContainer:(0,t.css)({minWidth:0}),field:(0,t.css)({flex:1,left:`calc(-${w.spacing(1)} - 1px)`,position:"relative",marginBottom:0}),input:(0,t.css)({input:{...w.typography.h1}}),inputContainer:(0,t.css)({display:"flex",flex:1}),textWrapper:(0,t.css)({alignItems:"center",display:"flex",gap:w.spacing(1)})});function y({navItem:w,renderTitle:K,actions:B,info:W,subTitle:_,onEditTitle:k}){const A=(0,s.wW)(E),z=_??w.subTitle,H=k?n.createElement(b,{value:w.text,onEdit:k}):n.createElement("div",{className:A.title},w.img&&n.createElement("img",{className:A.img,src:w.img,alt:`logo for ${w.text}`}),K?K(w.text):n.createElement("h1",null,w.text));return n.createElement("div",{className:A.pageHeader},n.createElement("div",{className:A.topRow},n.createElement("div",{className:A.titleInfoContainer},H,W&&n.createElement(l.S,{info:W})),n.createElement("div",{className:A.actions},B)),z&&n.createElement("div",{className:A.subTitle},z))}const E=w=>({topRow:(0,t.css)({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:w.spacing(1,3)}),title:(0,t.css)({display:"flex",flexDirection:"row",h1:{display:"flex",marginBottom:0}}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:w.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:w.spacing(1,4),justifyContent:"space-between",maxWidth:"100%",minWidth:"200px"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:w.spacing(1),marginBottom:w.spacing(2)}),subTitle:(0,t.css)({position:"relative",color:w.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:w.spacing(2)})});var C=e(15372),u=e(65469),D=e(54281);function P({navItem:w}){const K=(0,s.wW)(S);return n.createElement("div",{className:K.tabsWrapper},n.createElement(C.J,null,w.children.map((B,W)=>{const _=B.icon?(0,u.toIconName)(B.icon):void 0;return!B.hideFromTabs&&n.createElement(D.O,{label:B.text,active:B.active,key:`${B.url}-${W}`,icon:_,href:B.url,suffix:B.tabSuffix})})))}const S=w=>({tabsWrapper:(0,t.css)({paddingBottom:w.spacing(3)})});var x=e(56868),M=e(34139),R=e(18771),O=e(76404),T=e(57821);function U(w,K){const B=(0,R.useSelector)(W=>W.navIndex)?.[M.Qz];(0,n.useEffect)(()=>{const W=(w?.node!==w?.main?w?.node:w?.main)??{text:"Grafana"},_=(0,T.t)(W,K,B).map(k=>k.text).reverse();_[_.length-1]=O.c.AppTitle,document.title=_.join(" - ")},[B,w,K])}const L=({navId:w,navModel:K,pageNav:B,renderTitle:W,onEditTitle:_,actions:k,subTitle:A,children:z,className:H,info:Q,layout:X=i.Q.Standard,scrollTop:te,scrollRef:oe,...Z})=>{const le=(0,s.wW)(V),ce=(0,x.P)(w,K),{chrome:q}=(0,m.p)();U(ce,B);const ne=B??ce?.node;return(0,n.useLayoutEffect)(()=>{ce&&q.update({sectionNav:ce,pageNav:B,layout:X})},[ce,B,q,X]),n.createElement("div",{className:(0,t.cx)(le.wrapper,H),...Z},X===i.Q.Standard&&n.createElement(r.$,{autoHeightMin:"100%",scrollTop:te,scrollRefCallback:oe},n.createElement("div",{className:le.pageInner},ne&&n.createElement(y,{actions:k,onEditTitle:_,navItem:ne,renderTitle:W,info:Q,subTitle:A}),B&&B.children&&n.createElement(P,{navItem:B}),n.createElement("div",{className:le.pageContent},z))),X===i.Q.Canvas&&n.createElement(r.$,{autoHeightMin:"100%",scrollTop:te,scrollRefCallback:oe},n.createElement("div",{className:le.canvasContent},z)),X===i.Q.Custom&&z)};L.Contents=o;const V=w=>({wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:w.spacing(2),borderRadius:w.shape.borderRadius(1),border:`1px solid ${w.colors.border.weak}`,borderBottom:"none",background:w.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:w.spacing(0,0,0,0),[w.breakpoints.up("md")]:{margin:w.spacing(2,2,0,1),padding:w.spacing(3)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:w.spacing(2),flexBasis:"100%",flexGrow:1})})},56868:(j,I,e)=>{"use strict";e.d(I,{P:()=>r});var t=e(75892),n=e(86809),i=e(84749),s=e(18771);function r(d,o){if(o)return o;if(d&&i.h)return(0,s.useSelector)((0,t.P1)(m,l=>(0,n.ht)(l,d??"home")))}function m(d){return d.navIndex}},87831:(j,I,e)=>{"use strict";e.d(I,{S:()=>s});var t=e(42844),n=e(27702),i=e(66310);function s({info:m}){const d=(0,i.wW)(r);return n.createElement("div",{className:d.container},m.map((o,l)=>n.createElement(n.Fragment,{key:l},n.createElement("div",{className:d.infoItem},n.createElement("div",{className:d.label},o.label),o.value),l+1<m.length&&n.createElement("div",{"data-testid":"page-info-separator",className:d.separator}))))}const r=m=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:m.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...m.typography.bodySmall,display:"flex",flexDirection:"column",gap:m.spacing(.5)}),label:(0,t.css)({color:m.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${m.colors.border.weak}`})})},95685:(j,I,e)=>{"use strict";e.d(I,{Z:()=>s});var t=e(27702),n=e(52419);const s=({pageName:r=""})=>{const m=`Loading ${r}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:m}))}},73149:(j,I,e)=>{"use strict";e.d(I,{j:()=>s});var t=e(42844),n=e(27702),i=e(66310);function s({entity:m="Page"}){const d=(0,i.wW)(r),o=(0,i.l4)();return n.createElement("div",{className:d.container},n.createElement("h1",null,m," not found"),n.createElement("div",{className:d.subtitle},"We're looking but can't seem to find this ",m.toLowerCase(),". Try returning"," ",n.createElement("a",{href:"/",className:"external-link"},"home")," ","or seeking help on the"," ",n.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"external-link"},"community site.")),n.createElement("div",{className:d.grot},n.createElement("img",{src:`public/img/grot-404-${o.isDark?"dark":"light"}.svg`,width:"100%",alt:"grot"})))}function r(m){return{container:(0,t.css)({display:"flex",flexDirection:"column",padding:m.spacing(8,2,2,2),h1:{textAlign:"center"}}),subtitle:(0,t.css)({color:m.colors.text.secondary,fontSize:m.typography.h5.fontSize,padding:m.spacing(2,0),textAlign:"center"}),grot:(0,t.css)({maxWidth:"450px",paddingTop:m.spacing(8),margin:"0 auto"})}}},77597:(j,I,e)=>{"use strict";e.d(I,{Z:()=>r});var t=e(27702),n=e(74639),i=e(1128),s=e(67437);const r=t.forwardRef(({autoComplete:m,autoFocus:d,id:o,passwordHint:l,...a},g)=>{const[c,h]=(0,t.useState)(!1);return t.createElement(i.I,{id:o,autoFocus:d,autoComplete:m,...a,type:c?"text":"password",placeholder:l,"aria-label":n.wl.pages.Login.password,ref:g,suffix:t.createElement(s.h,{name:c?"eye-slash":"eye","aria-controls":o,role:"switch","aria-checked":c,onClick:()=>{h(!c)},tooltip:c?"Hide password":"Show password"})})});r.displayName="PasswordField"},71313:(j,I,e)=>{"use strict";e.d(I,{Z:()=>b});var t=e(42844),n=e(27702),i=e(23839),s=e(64022),r=e(28580),m=e(66670),d=e(80402),o=e(23159),l=e(79173),a=e(12308),g=e(43533),c=e(35952);class h extends n.Component{constructor(y){super(y),this.onTypeChanged=E=>{const C=E.value;switch(C){case g.pC.User:case g.pC.Team:this.setState({type:C,userId:0,teamId:0,role:void 0});break;case g.pC.Editor:this.setState({type:C,userId:0,teamId:0,role:g.B5.Editor});break;case g.pC.Viewer:this.setState({type:C,userId:0,teamId:0,role:g.B5.Viewer});break}},this.onUserSelected=E=>{this.setState({userId:E&&!Array.isArray(E)?E.id:0})},this.onTeamSelected=E=>{this.setState({teamId:E.value?.id&&!Array.isArray(E.value)?E.value.id:0})},this.onPermissionChanged=E=>{this.setState({permission:E.value})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())},this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:g.pC.Team,permission:g.V5.View}}isValid(){switch(this.state.type){case g.pC.Team:return this.state.teamId>0;case g.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:y}=this.props,E=this.state,C="min-width-20",u=this.isValid(),D=f(a.default.theme2);return n.createElement("div",{className:"cta-form"},n.createElement(c.P,{onClick:y}),n.createElement("h5",null,"Add Permission For"),n.createElement(i.l,{maxWidth:"none",onSubmit:this.onSubmit},()=>n.createElement(s.Lh,null,n.createElement(r.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:g.BL,onChange:this.onTypeChanged}),E.type===g.pC.User?n.createElement(l.f,{onSelected:this.onUserSelected,className:C}):null,E.type===g.pC.Team?n.createElement(o.c,{onSelected:this.onTeamSelected,className:C}):null,n.createElement("span",{className:D.label},"Can"),n.createElement(r.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:g.vT,onChange:this.onPermissionChanged,width:25}),n.createElement(m.zx,{"data-save-permission":!0,type:"submit",disabled:!u},"Save"))))}}h.defaultProps={showPermissionLevels:!0};const f=(0,d.B)(v=>({label:(0,t.css)`
    color: ${v.colors.primary.text};
    font-weight: bold;
  `})),b=h},50683:(j,I,e)=>{"use strict";e.d(I,{Z:()=>c});var t=e(27702),n=e(73453),i=e(28580),s=e(66670),r=e(43533);class m extends t.Component{render(){const{item:f}=this.props,b=r.vT.find(v=>v.value===f.permission);return t.createElement("tr",{className:"gf-form-disabled"},t.createElement("td",{style:{width:"1%"}},t.createElement(n.J,{size:"lg",name:"shield"})),t.createElement("td",{style:{width:"90%"}},f.name,t.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),t.createElement("td",null),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement("div",{className:"gf-form"},t.createElement(i.Ph,{"aria-label":`Permission level for "${f.name}"`,options:r.vT,onChange:()=>{},disabled:!0,value:b}))),t.createElement("td",null,t.createElement(s.zx,{"aria-label":`Remove permission for "${f.name}"`,size:"sm",icon:"lock",disabled:!0})))}}const d=h=>h?"gf-form-disabled":"";function o({item:h}){return h.userAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:h.userAvatarUrl,alt:"User avatar"}):h.teamAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:h.teamAvatarUrl,alt:"Team avatar"}):h.role==="Editor"?t.createElement(n.J,{size:"lg",name:"edit"}):t.createElement(n.J,{size:"lg",name:"eye"})}function l({item:h}){return h.userId?t.createElement("span",{className:"filter-table__weak-italic"},"(User)"):h.teamId?t.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):t.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}class a extends t.PureComponent{constructor(){super(...arguments),this.onPermissionChanged=f=>{this.props.onPermissionChanged(this.props.item,f.value)},this.onRemoveItem=()=>{this.props.onRemoveItem(this.props.item)}}render(){const{item:f,folderInfo:b}=this.props,v=f.dashboardId===-1&&!f.inherited,y=r.vT.find(E=>E.value===f.permission);return t.createElement("tr",{className:d(!!f?.inherited)},t.createElement("td",{style:{width:"1%"}},t.createElement(o,{item:f})),t.createElement("td",{style:{width:"90%"}},f.name," ",t.createElement(l,{item:f})),t.createElement("td",null,f.inherited&&b&&t.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",b.canViewFolderPermissions?t.createElement("a",{className:"text-link",href:`${b.url}/permissions`},b.title):b.title),v&&t.createElement("em",{className:"muted no-wrap"},"Default Permission")),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement(i.Ph,{"aria-label":`Permission level for "${f.name}"`,isSearchable:!1,options:r.vT,onChange:this.onPermissionChanged,disabled:f.inherited,value:y,width:25})),t.createElement("td",null,f.inherited?t.createElement(s.zx,{"aria-label":`Remove permission for "${f.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):t.createElement(s.zx,{"aria-label":`Remove permission for "${f.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})))}}class g extends t.PureComponent{render(){const{items:f,onRemoveItem:b,onPermissionChanged:v,isFetching:y,folderInfo:E}=this.props;return t.createElement("table",{className:"filter-table gf-form-group"},t.createElement("tbody",null,t.createElement(m,{key:0,item:{name:"Admin",permission:4}}),f.map((C,u)=>t.createElement(a,{key:u+1,item:C,onRemoveItem:b,onPermissionChanged:v,folderInfo:E})),y===!0&&f.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"Loading permissions..."))):null,y===!1&&f.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))}}const c=g},22698:(j,I,e)=>{"use strict";e.d(I,{Z:()=>i});var t=e(27702);const i=()=>t.createElement("div",null,t.createElement("h5",null,"What are Permissions?"),t.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))},43567:(j,I,e)=>{"use strict";e.d(I,{h:()=>r});var t=e(42844),n=e(27702),i=e(18112),s=e(66310);const r=n.memo(n.forwardRef(({className:o,children:l,markdown:a,onRemove:g,...c},h)=>{const f=(0,s.wW)(d);return n.createElement("div",{className:(0,t.cx)(f.wrapper,o),...c,ref:h},a&&m(a),l)}));function m(o){const l=(0,i.a)(o);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:l}})}r.displayName="OperationRowHelp";const d=o=>{const l=o.shape.borderRadius();return{wrapper:(0,t.css)`
      padding: ${o.spacing(2)};
      border: 2px solid ${o.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${l} ${l};
      position: relative;
      top: -4px;
    `}}},984:(j,I,e)=>{"use strict";e.d(I,{V:()=>o,y:()=>d});var t=e(42844),n=e(27702),i=e(74639),s=e(66310),r=e(67437);function m(a){const g=(0,s.wW)(l);return n.createElement("div",{className:(0,t.cx)(g.icon,"active"in a&&a.active&&g.active)},n.createElement(r.h,{name:a.icon,tooltip:a.title,className:g.icon,disabled:!!a.disabled,onClick:a.onClick,type:"button","aria-label":i.wl.components.QueryEditorRow.actionButton(a.title),..."active"in a&&{"aria-pressed":a.active}}))}function d(a){return n.createElement(m,{...a})}const o=a=>n.createElement(m,{...a}),l=a=>({icon:(0,t.css)`
      display: flex;
      position: relative;
      color: ${a.colors.text.secondary};
    `,active:(0,t.css)`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: ${a.shape.radius.default};
        bottom: -8px;
        background-image: ${a.colors.gradients.brandHorizontal} !important;
      }
    `})},10186:(j,I,e)=>{"use strict";e.d(I,{t:()=>c});var t=e(42844),n=e(27702),i=e(85532),s=e(96073),r=e(86312),m=e(66310),d=e(66258),o=e(67437),l=e(73453);const a=({actionsElement:f,disabled:b,draggable:v,collapsable:y=!0,dragHandleProps:E,headerElement:C,isContentVisible:u,onRowToggle:D,reportDragMousePosition:P,title:S,id:x})=>{const M=(0,m.wW)(g);return n.createElement("div",{className:M.header},n.createElement("div",{className:M.column},y&&n.createElement(o.h,{name:u?"angle-down":"angle-right",tooltip:u?"Collapse query row":"Expand query row",className:M.collapseIcon,onClick:D,"aria-expanded":u,"aria-controls":x}),S&&n.createElement("div",{className:M.titleWrapper,onClick:D,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(M.title,b&&M.disabled)},S)),C),n.createElement("div",{className:M.column},f,v&&n.createElement(l.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:M.dragIcon,onMouseMove:P,...E})))},g=f=>({header:(0,t.css)`
    label: Header;
    padding: ${f.spacing(.5,.5)};
    border-radius: ${f.shape.borderRadius(1)};
    background: ${f.colors.background.secondary};
    min-height: ${f.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:(0,t.css)`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:(0,t.css)`
    cursor: grab;
    color: ${f.colors.text.disabled};
    margin: ${f.spacing(0,.5)};
    &:hover {
      color: ${f.colors.text};
    }
  `,collapseIcon:(0,t.css)`
    margin-left: ${f.spacing(.5)};
    color: ${f.colors.text.disabled};
    }
  `,titleWrapper:(0,t.css)`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${f.spacing(.5)};
  `,title:(0,t.css)`
    font-weight: ${f.typography.fontWeightBold};
    color: ${f.colors.text.link};
    margin-left: ${f.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:(0,t.css)`
    color: ${f.colors.text.disabled};
  `});a.displayName="QueryOperationRowHeader";function c({children:f,actions:b,title:v,headerElement:y,onClose:E,onOpen:C,isOpen:u,disabled:D,draggable:P,collapsable:S,index:x,id:M}){const[R,O]=(0,n.useState)(u!==void 0?u:!0),T=(0,m.wW)(h),U=(0,n.useCallback)(()=>{O(!R)},[R,O]),L=(0,n.useCallback)(B=>{if(B.defaultPrevented){const W=B.currentTarget.getBoundingClientRect(),_=B.clientX-W.left,k=B.clientY-W.top;(0,r.ff)("query_row_reorder_drag_position",{x:_/W.width,y:k/W.height,width:W.width,height:W.height})}},[]);(0,s.Z)(()=>{R?C&&C():E&&E()},[R]);const V={isOpen:R,onOpen:()=>{O(!0)},onClose:()=>{O(!1)}},w=b&&d.renderOrCallToRender(b,V),K=y&&d.renderOrCallToRender(y,V);return P?n.createElement(i._l,{draggableId:M,index:x},B=>n.createElement(n.Fragment,null,n.createElement("div",{ref:B.innerRef,className:T.wrapper,...B.draggableProps},n.createElement("div",null,n.createElement(a,{id:M,actionsElement:w,disabled:D,draggable:!0,collapsable:S,dragHandleProps:B.dragHandleProps,headerElement:K,isContentVisible:R,onRowToggle:U,reportDragMousePosition:L,title:v})),R&&n.createElement("div",{className:T.content},f)))):n.createElement("div",{className:T.wrapper},n.createElement(a,{id:M,actionsElement:w,disabled:D,draggable:!1,collapsable:S,headerElement:K,isContentVisible:R,onRowToggle:U,reportDragMousePosition:L,title:v}),R&&n.createElement("div",{className:T.content},f))}const h=f=>({wrapper:(0,t.css)`
      margin-bottom: ${f.spacing(2)};
    `,content:(0,t.css)`
      margin-top: ${f.spacing(.5)};
      margin-left: ${f.spacing(3)};
    `});c.displayName="QueryOperationRow"},3718:(j,I,e)=>{"use strict";e.d(I,{I:()=>pe});var t=e(27702),n=e(64022),i=e(62108),s=e(8430),r=e(42844),m=e(66310),d=e(73453),o=e(80011),l=e(1128),a=e(26468),g=e(97289),c=e(73578);const h=(0,t.forwardRef)(({children:re,iconName:ie},Se)=>{const ye=(0,m.wW)(f);return t.createElement("div",{className:ye.container,ref:Se},ie&&t.createElement(d.J,{name:ie,size:"xs"}),re)});h.displayName="ValueContainer";const f=re=>{const{prefix:ie}=(0,l.H)({theme:re}),{multiValueContainer:Se}=(0,c.D)(re);return{container:(0,r.cx)(ie,Se,(0,r.css)`
        position: relative;
        padding: ${re.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${re.spacing(.5)};
        }
      `)}},b=300,v=360,y=260,E=re=>re.stopPropagation(),C=({appliedRoles:re,basicRole:ie,disabled:Se,isFocused:ye,query:Ce,showBasicRole:de,onOpen:we,onClose:_e,onQueryChange:Je,...Ue})=>{const $e=(0,m.wW)(Me=>D(Me,!1,!!ye,!!Se,!1)),Qe=(0,t.useRef)(null);(0,t.useEffect)(()=>{ye&&Qe.current?.focus()});const tt=Me=>{const De=Me.target?.value;Je(De)},lt=re.length;return ye?t.createElement("div",{className:$e.wrapper},de&&t.createElement(h,null,ie),re.map(Me=>t.createElement(h,{key:Me.uid},Me.displayName||Me.name)),!Se&&t.createElement("input",{...Ue,className:$e.input,ref:Qe,onMouseDown:E,onChange:tt,"data-testid":"role-picker-input",placeholder:ye?"Select role":"",value:Ce}),t.createElement("div",{className:$e.suffix},t.createElement(d.J,{name:"angle-up",className:$e.dropdownIndicator,onMouseDown:_e}))):t.createElement("div",{className:(0,r.cx)($e.wrapper,$e.selectedRoles),onMouseDown:we},de&&t.createElement(h,null,ie),t.createElement(u,{appliedRoles:re,numberOfRoles:lt,showBuiltInRole:de}))};C.displayName="RolePickerInput";const u=({showBuiltInRole:re,numberOfRoles:ie,appliedRoles:Se})=>{const ye=(0,m.wW)(Ce=>P(Ce));return t.createElement(t.Fragment,null,ie?t.createElement(o.u,{content:t.createElement("div",{className:ye.tooltip},Se?.map(Ce=>t.createElement("p",{key:Ce.uid},Ce.displayName)))},t.createElement(h,null,`${re?"+":""}${ie} role${ie>1?"s":""}`)):!re&&t.createElement(h,null,"No roles assigned"))},D=(re,ie,Se,ye,Ce)=>{const de=(0,l.H)({theme:re,invalid:ie});return{wrapper:(0,r.cx)(de.wrapper,(0,a.RK)(re,ie),Se&&(0,r.css)`
          ${g.focusCss(re.v1)}
        `,ye&&de.inputDisabled,(0,r.css)`
        min-width: ${v}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,Ce&&(0,r.css)`
          padding-left: 0;
        `),input:(0,r.cx)((0,a.RK)(re,ie),(0,r.css)`
        max-width: 120px;
        border: none;
        cursor: ${Se?"default":"pointer"};
      `),suffix:de.suffix,dropdownIndicator:(0,r.css)`
      cursor: pointer;
    `,selectedRoles:(0,r.css)`
      display: flex;
      align-items: center;
      cursor: ${ye?"not-allowed":"pointer"};
    `,tooltip:(0,r.css)`
      p {
        margin-bottom: ${re.spacing(.5)};
      }
    `}},P=re=>({tooltip:(0,r.css)`
    p {
      margin-bottom: ${re.spacing(.5)};
    }
  `});var S=e(29372),x=e(66670),M=e(40705),R=e(18771);const O=re=>({menuWrapper:(0,r.css)`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${re.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:(0,r.css)`
      min-width: ${y}px;

      & > div {
        padding-top: ${re.spacing(1)};
      }
    `,menuLeft:(0,r.css)`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:(0,r.css)`
      height: 100%;
      min-width: ${y}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${re.components.input.borderColor};

      & > div {
        padding-top: ${re.spacing(1)};
      }
    `,subMenuLeft:(0,r.css)`
      border-right: 1px solid ${re.components.input.borderColor};
      border-left: unset;
    `,groupHeader:(0,r.css)`
      padding: ${re.spacing(0,4.5)};
      display: flex;
      align-items: center;
      color: ${re.colors.text.primary};
      font-weight: ${re.typography.fontWeightBold};
    `,container:(0,r.css)`
      padding: ${re.spacing(1)};
      border: 1px ${re.colors.border.weak} solid;
      border-radius: ${re.shape.borderRadius(1)};
      background-color: ${re.colors.background.primary};
      z-index: ${re.zIndex.modal};
    `,menuSection:(0,r.css)`
      margin-bottom: ${re.spacing(2)};
    `,menuOptionCheckbox:(0,r.css)`
      display: flex;
      margin: ${re.spacing(0,1,0,.25)};
    `,menuButtonRow:(0,r.css)`
      background-color: ${re.colors.background.primary};
      padding: ${re.spacing(1)};
    `,menuOptionBody:(0,r.css)`
      font-weight: ${re.typography.fontWeightRegular};
      padding: ${re.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:(0,r.css)`
      color: ${re.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:(0,r.css)`
      position: absolute;
      right: ${re.spacing(1.25)};
      color: ${re.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:(0,r.css)`
      color: ${re.colors.text.disabled};
    `,basicRoleSelector:(0,r.css)`
      margin: ${re.spacing(1,1.25,1,1)};
    `,subMenuPortal:(0,r.css)`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:(0,r.css)`
      background-color: ${re.colors.background.primary};
      padding: ${re.spacing(1)};
    `,checkboxPartiallyChecked:(0,r.css)`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),U=Object.values(R.OrgRole).filter(re=>re!==R.OrgRole.None).map(re=>({label:re,value:re})),L=({value:re,onChange:ie,disabled:Se,disabledMesssage:ye})=>{const Ce=(0,m.wW)(O),de=(0,m.l4)();return t.createElement(t.Fragment,null,t.createElement("div",{className:Ce.groupHeader},t.createElement("span",{style:{marginRight:de.spacing(1)}},"Basic roles"),Se&&ye&&t.createElement(o.u,{placement:"right-end",interactive:!0,content:t.createElement("div",null,ye)},t.createElement(d.J,{name:"question-circle"}))),t.createElement(M.S,{className:Ce.basicRoleSelector,options:U,value:re,onChange:ie,fullWidth:!0,disabled:Se}))};var V=e(83967),w=e(52995);const K=(0,t.memo)(t.forwardRef(({name:re,value:ie,isFocused:Se,isSelected:ye,partiallySelected:Ce,disabled:de,onChange:we,onClick:_e,onOpenSubMenu:Je,onCloseSubMenu:Ue,children:$e,root:Qe},tt)=>{const lt=(0,m.l4)(),Me=(0,c.D)(lt),De=(0,m.wW)(O),We=(0,r.cx)(Me.option,Se&&Me.optionFocused,de&&De.menuOptionDisabled),qe=Nt=>{de||ie&&we(ie)},st=Nt=>{_e&&_e(ie)},dt=()=>{Je&&Je(ie)},Tt=()=>{Ue&&Ue()};return t.createElement("div",{onMouseEnter:dt,onMouseLeave:Tt},t.createElement("div",{ref:tt,className:We,"aria-label":"Role picker option",onClick:st},t.createElement(V.X,{value:ye,className:(0,r.cx)(De.menuOptionCheckbox,{[De.checkboxPartiallyChecked]:Ce}),onChange:qe,disabled:de}),t.createElement("div",{className:(0,r.cx)(Me.optionBody,De.menuOptionBody)},t.createElement("span",null,re),t.createElement("span",{className:De.menuOptionExpand})),Qe&&$e&&t.createElement(w.h_,{className:De.subMenuPortal,root:Qe},$e)))}));K.displayName="RoleMenuGroupOption";const B=t.forwardRef(({data:re,isFocused:ie,isSelected:Se,disabled:ye,onChange:Ce,hideDescription:de},we)=>{const _e=(0,m.l4)(),Je=(0,c.D)(_e),Ue=(0,m.wW)(O),$e=(0,r.cx)(Je.option,ie&&Je.optionFocused,ye&&Ue.menuOptionDisabled),Qe=tt=>{ye||(tt.preventDefault(),tt.stopPropagation(),Ce(re))};return t.createElement("div",{ref:we,className:$e,"aria-label":"Role picker option",onClick:Qe},t.createElement(V.X,{value:Se,className:Ue.menuOptionCheckbox,onChange:Qe,disabled:ye}),t.createElement("div",{className:(0,r.cx)(Je.optionBody,Ue.menuOptionBody)},t.createElement("span",null,re.displayName||re.name),!de&&re.description&&t.createElement("div",{className:Je.optionDescription},re.description)),re.description&&t.createElement(o.u,{content:re.description},t.createElement(d.J,{name:"info-circle",className:Ue.menuOptionInfoSign})))});B.displayName="RoleMenuOption";var W=e(26115);const _=({options:re,selectedOptions:ie,disabledOptions:Se,onSelect:ye,onClear:Ce,showOnLeft:de})=>{const we=(0,m.l4)(),_e=(0,c.D)(we),Je=(0,m.wW)(O),Ue=async()=>{Ce&&Ce()};return t.createElement("div",{className:(0,r.cx)(Je.subMenu,{[Je.subMenuLeft]:de}),"aria-label":"Role picker submenu"},t.createElement(S.$,{autoHide:!1,autoHeightMax:`${b}px`,hideHorizontalTrack:!0},t.createElement("div",{className:_e.optionBody},re.map(($e,Qe)=>t.createElement(B,{data:$e,key:Qe,isSelected:!!($e.uid&&(ie.find(tt=>tt.uid===$e.uid)||Se?.find(tt=>tt.uid===$e.uid))),disabled:!!($e.uid&&Se?.find(tt=>tt.uid===$e.uid))||(0,W.r)($e),onChange:ye,hideDescription:!0})))),t.createElement("div",{className:Je.subMenuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:Ue},"Clear"))))},k=t.forwardRef(({roles:re,renderedName:ie,showGroups:Se,optionGroups:ye,onGroupChange:Ce,groupSelected:de,groupPartiallySelected:we,subMenuNode:_e,selectedOptions:Je,onRoleChange:Ue,onClearSubMenu:$e,showOnLeftSubMenu:Qe},tt)=>{const[lt,Me]=(0,t.useState)(!1),[De,We]=(0,t.useState)(""),qe=(0,m.l4)(),st=(0,c.D)(qe),dt=(0,m.wW)(O),Tt=(0,t.useCallback)(Bt=>{We(Bt),Me(!0)},[]),Nt=(0,t.useCallback)(()=>{Me(!1),We("")},[]);return t.createElement("div",null,re.length>0&&t.createElement("div",{className:dt.menuSection},t.createElement("div",{className:dt.groupHeader},ie),t.createElement("div",{className:st.optionBody}),Se&&ye?.length?ye.map(Bt=>t.createElement(K,{key:Bt.value,name:Bt.name,value:Bt.value,isSelected:de(Bt.value)||we(Bt.value),partiallySelected:we(Bt.value),disabled:Bt.options?.every(W.r),onChange:Ce,onOpenSubMenu:Tt,onCloseSubMenu:Nt,root:_e,isFocused:lt&&De===Bt.value},lt&&De===Bt.value&&t.createElement(_,{options:Bt.options,selectedOptions:Je,onSelect:Ue,onClear:()=>$e(De),showOnLeft:Qe}))):re.map(Bt=>t.createElement(B,{data:Bt,key:Bt.uid,isSelected:!!(Bt.uid&&Je.find(yt=>yt.uid===Bt.uid)),disabled:(0,W.r)(Bt),onChange:Ue,hideDescription:!0}))))});k.displayName="RoleMenuGroupsSection";var A=(re=>(re.fixed="fixed",re.custom="custom",re.plugin="plugin",re))(A||{});const z={ldap:"LDAP",current:"Current org"},H=({basicRole:re,options:ie,appliedRoles:Se,showGroups:ye,basicRoleDisabled:Ce,disabledMessage:de,showBasicRole:we,onSelect:_e,onBasicRoleSelect:Je,onUpdate:Ue,updateDisabled:$e,offset:Qe,apply:tt})=>{const[lt,Me]=(0,t.useState)(Se),[De,We]=(0,t.useState)(re),[qe,st]=(0,t.useState)({}),dt=(0,t.useRef)(null),Tt=(0,m.l4)(),Nt=(0,c.D)(Tt),Bt=(0,m.wW)(O);(0,t.useEffect)(()=>{_e(lt)},[lt,_e]),(0,t.useEffect)(()=>{Je&&De&&Je(De)},[De,Je]),(0,t.useEffect)(()=>{const Ie=ie.filter(Q).sort(q),Te=ie.filter(X).sort(q),Re=ie.filter(te).sort(q),ue={fixed:oe(Te).sort((xe,Ve)=>xe.name.localeCompare(Ve.name)),custom:oe(Ie).sort((xe,Ve)=>xe.name.localeCompare(Ve.name)),plugin:oe(Re).sort((xe,Ve)=>xe.name.localeCompare(Ve.name))};st({fixed:{groupType:"fixed",optionGroup:ue.fixed,renderedName:"Fixed roles",roles:Te},custom:{groupType:"custom",optionGroup:ue.custom,renderedName:"Custom roles",roles:Ie},plugin:{groupType:"plugin",optionGroup:ue.plugin,renderedName:"Plugin roles",roles:Re}})},[ie]);const yt=Ie=>{const Te=[];for(const Re of lt)Z(Re)===Ie&&Te.push(Re);return Te},ft=(Ie,Te)=>{const Re=yt(Te),ue=qe[Ie]?.optionGroup.find(xe=>xe.value===Te);return Re.length>0&&Re.length>=ue.options.length},ct=(Ie,Te)=>{const Re=yt(Te),ue=qe[Ie]?.optionGroup.find(xe=>xe.value===Te);return Re.length>0&&Re.length<ue.options.length},ge=Ie=>{lt.find(Te=>Te.uid===Ie.uid)?Me(lt.filter(Te=>Te.uid!==Ie.uid)):Me([...lt,Ie])},Be=(Ie,Te)=>{const Re=qe[Ie]?.optionGroup.find(ue=>ue.value===Te);if(Re)if(ft(Ie,Te)||ct(Ie,Te))Me(lt.filter(ue=>!Re.options.find(xe=>ue.uid===xe.uid)));else{const ue=Re.options.filter(Ve=>Ve.delegatable),xe=lt.filter(Ve=>!Re.options.find(Ne=>Ve.uid===Ne.uid));Me([...xe,...ue])}},Le=Ie=>{We(Ie)},he=async()=>{Me([])},He=Ie=>{const Te=lt.filter(Re=>Z(Re)!==Ie);Me(Te)},Pe=()=>{Ue(lt,De)};return t.createElement("div",{className:(0,r.cx)(Nt.menu,Bt.menuWrapper,{[Bt.menuLeft]:Qe.horizontal>0},(0,r.css)`
          bottom: ${Qe.vertical>0?`${Qe.vertical}px`:"unset"};
          top: ${Qe.vertical<0?`${Math.abs(Qe.vertical)}px`:"unset"};
        `)},t.createElement("div",{className:Bt.menu,"aria-label":"Role picker menu"},t.createElement(S.$,{autoHide:!1,autoHeightMax:`${b}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0},we&&t.createElement("div",{className:Bt.menuSection},t.createElement(L,{value:De,onChange:Le,disabled:Ce,disabledMesssage:de})),Object.entries(qe).map(([Ie,Te])=>t.createElement(k,{key:Ie,roles:Te.roles,renderedName:Te.renderedName,showGroups:ye,optionGroups:Te.optionGroup,groupSelected:Re=>ft(Te.groupType,Re),groupPartiallySelected:Re=>ct(Te.groupType,Re),onGroupChange:Re=>Be(Te.groupType,Re),subMenuNode:dt?.current,selectedOptions:lt,onRoleChange:ge,onClearSubMenu:He,showOnLeftSubMenu:Qe.horizontal>0}))),t.createElement("div",{className:Bt.menuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:he,disabled:$e},"Clear all"),t.createElement(x.zx,{size:"sm",onClick:Pe,disabled:$e},tt?"Apply":"Update")))),t.createElement("div",{ref:dt}))},Q=re=>!re.name?.startsWith("fixed:")&&!re.name.startsWith("plugins:"),X=re=>re.name?.startsWith("fixed:"),te=re=>re.name?.startsWith("plugins:"),oe=re=>{const ie={};return re.forEach(ye=>{const Ce=Z(ye),de=le(ye);ie[Ce]||(ie[Ce]={name:de,roles:[]}),ie[Ce].roles.push(ye)}),Object.entries(ie).map(([ye,Ce])=>({name:z[ye]||ne(Ce.name),value:ye,options:Ce.roles.sort(q)}))},Z=re=>{const ie=ce(re),Se=le(re);return`${ie}:${Se}`},le=re=>re.group||"Other",ce=re=>{const ie=re.name.indexOf(":");return ie<0?"unknown":re.name.substring(0,ie)},q=(re,ie)=>re.name.localeCompare(ie.name),ne=re=>re.slice(0,1).toUpperCase()+re.slice(1),pe=({basicRole:re,appliedRoles:ie,roleOptions:Se,disabled:ye,isLoading:Ce,basicRoleDisabled:de,basicRoleDisabledMessage:we,showBasicRole:_e,onRolesChange:Je,onBasicRoleChange:Ue,canUpdateRoles:$e=!0,apply:Qe=!1,maxWidth:tt=v})=>{const[lt,Me]=(0,t.useState)(!1),[De,We]=(0,t.useState)(ie),[qe,st]=(0,t.useState)(re),[dt,Tt]=(0,t.useState)(""),[Nt,Bt]=(0,t.useState)({vertical:0,horizontal:0}),yt=(0,t.useRef)(null);(0,t.useEffect)(()=>{st(re),We(ie)},[ie,re]),(0,t.useEffect)(()=>{const Ie=yt?.current?.getBoundingClientRect();if(!Ie||!lt)return;const{bottom:Te,top:Re,left:ue,right:xe,width:Ve}=Ie,Ne=window.innerHeight-Te,fe=Te-Re+10,ve=xe-ue;let ze=-ve,Oe=-fe;Ne<b+20&&(Oe=50+(b-Ne)-fe),window.innerWidth-xe<Ve&&Ve<2*y&&(ze=ve),Bt({horizontal:ze,vertical:Oe})},[lt,De]);const ft=(0,t.useCallback)(Ie=>{ye||(Ie.preventDefault(),Ie.stopPropagation(),Me(!0))},[Me,ye]),ct=(0,t.useCallback)(()=>{Me(!1),Tt(""),We(ie),st(re)},[ie,re]),ge=()=>lt&&ct(),Be=Ie=>{Tt(Ie||"")},Le=Ie=>{We(Ie)},he=Ie=>{st(Ie)},He=(Ie,Te)=>{Ue&&Te&&Te!==re&&Ue(Te),$e&&Je(Ie),Tt(""),Me(!1)},Pe=()=>{const Ie=Se.map(Te=>({...Te,delegatable:$e&&Te.delegatable}));return dt&&dt.trim()!==""?Ie.filter(Te=>Te.name?.toLowerCase().includes(dt.toLowerCase())):Ie};return Ce?t.createElement(n.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(i.$,{size:16})):t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:tt},ref:yt},t.createElement(s.L,{onClick:ge},t.createElement(C,{basicRole:qe,appliedRoles:De,query:dt,onQueryChange:Be,onOpen:ft,onClose:ct,isFocused:lt,disabled:ye,showBasicRole:_e}),lt&&t.createElement(H,{options:Pe(),basicRole:qe,appliedRoles:ie,onBasicRoleSelect:he,onSelect:Le,onUpdate:He,showGroups:dt.length===0||dt.trim()==="",basicRoleDisabled:de,disabledMessage:we,showBasicRole:_e,updateDisabled:de&&!$e,apply:Qe,offset:Nt})))}},75574:(j,I,e)=>{"use strict";e.d(I,{R:()=>d});var t=e(27702),n=e(26811),i=e(66574),s=e(18771),r=e(3718),m=e(11349);const d=({basicRole:o,userId:l,orgId:a,onBasicRoleChange:g,roleOptions:c,disabled:h,basicRoleDisabled:f,basicRoleDisabledMessage:b,apply:v=!1,onApplyRoles:y,pendingRoles:E,maxWidth:C})=>{const[{loading:u,value:D=[]},P]=(0,n.Z)(async()=>{try{if(v&&E?.length)return E;if(i.contextSrv.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,m.kt)(l,a)}catch{console.error("Error loading options")}return[]},[a,l,E]);(0,t.useEffect)(()=>{a&&P()},[a,P,E]);const S=async M=>{v?y&&y(M,l,a):(await(0,m.hB)(M,l,a),await P())},x=i.contextSrv.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&i.contextSrv.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(r.I,{appliedRoles:D,basicRole:o,onRolesChange:S,onBasicRoleChange:g,roleOptions:c,isLoading:u,disabled:h,basicRoleDisabled:f,basicRoleDisabledMessage:b,showBasicRole:!0,apply:v,canUpdateRoles:x,maxWidth:C})}},11349:(j,I,e)=>{"use strict";e.d(I,{_C:()=>m,hB:()=>r,kt:()=>s,u7:()=>d,ul:()=>i});var t=e(73289),n=e(26115);const i=async(o,l)=>{let a="/api/access-control/roles?delegatable=true";o&&(a+=`&targetOrgId=${o}`);const g=await(0,t.i)().get(a);return!g||!g.length?[]:g.map(n.w)},s=async(o,l)=>{let a=`/api/access-control/users/${o}/roles`;l&&(a+=`?targetOrgId=${l}`);try{const g=await(0,t.i)().get(a);return!g||!g.length?[]:g.map(n.w)}catch(g){return(0,t.kW)(g)&&(g.isHandled=!0),[]}},r=(o,l,a)=>{let g=`/api/access-control/users/${l}/roles`;a&&(g+=`?targetOrgId=${a}`);const c=o.flatMap(h=>h.uid);return(0,t.i)().put(g,{orgId:a,roleUids:c})},m=async(o,l)=>{let a=`/api/access-control/teams/${o}/roles`;l&&(a+=`?targetOrgId=${l}`);try{const g=await(0,t.i)().get(a);return!g||!g.length?[]:g.map(n.w)}catch(g){return(0,t.kW)(g)&&(g.isHandled=!0),[]}},d=(o,l,a)=>{let g=`/api/access-control/teams/${l}/roles`;a&&(g+=`?targetOrgId=${a}`);const c=o.flatMap(h=>h.uid);return(0,t.i)().put(g,{orgId:a,roleUids:c})}},26115:(j,I,e)=>{"use strict";e.d(I,{r:()=>t,w:()=>n});const t=i=>i.delegatable!==void 0&&!i.delegatable,n=i=>{const s="fixed:";if(!i.displayName&&i.name.startsWith(s)){let r="";r=i.name.replace(s,"").replace(/:/g," "),i.displayName=r}return i}},66300:(j,I,e)=>{"use strict";e.d(I,{V:()=>s});var t=e(27702),n=e(98432),i=e(48154);const s=d=>t.createElement(n.Z,{...d,cacheRequests:!0,preProcessor:m});let r=new Map;function m(d){let o=r.get(d);return o||(o=i.QX.sanitizeSVGContent(d),r.set(d,o)),o}},81290:(j,I,e)=>{"use strict";e.d(I,{o:()=>l});var t=e(56027),n=e.n(t),i=e(27702),s=e(28580),r=e(45937);const m=(a="General",g)=>`${a}/${g}`;async function d(a=""){return r.ae.search({type:"dash-db",query:a,limit:100}).then(g=>g.map(c=>({value:{uid:c.uid,title:c.title,folderTitle:c.folderTitle,folderUid:c.folderUid},label:m(c?.folderTitle,c.title)})))}const o=n()(d,250,{leading:!0}),l=({value:a,onChange:g,placeholder:c="Select dashboard",noOptionsMessage:h="No dashboards found",...f})=>{const[b,v]=(0,i.useState)();(0,i.useEffect)(()=>{!a||a===b?.value?.uid||(async()=>{const E=await r.ae.getDashboardByUid(a);E.dashboard&&v({value:{uid:E.dashboard.uid,title:E.dashboard.title,folderTitle:E.meta.folderTitle,folderUid:E.meta.folderUid},label:m(E.meta?.folderTitle,E.dashboard.title)})})()},[a]);const y=(0,i.useCallback)(E=>{v(E),g?.(E?.value)},[g,v]);return i.createElement(s.qb,{loadOptions:o,onChange:y,placeholder:c,noOptionsMessage:h,value:b,defaultOptions:!0,...f})}},74729:(j,I,e)=>{"use strict";e.d(I,{E:()=>te});var t=e(27702),n=e(34667),i=e(42844),s=e(66609),r=e(25111),m=e(66310),d=e(1128),o=e(73453),l=e(63439),a=e(98557),g=e(65322),c=e(67572),h=e(49079),f=e(1631),b=e(59648),v=e(63064),y=e(6092),E=e(29891),C=e(57704),u=e(25472),D=e(56365),P=e(67437),S=e(94851),x=e(21323),M=e(4571),R=e(18771);const O=40,T="md",U=(Z,le)=>`${Z}-${le||"root"}`;function L({items:Z,focusedItemIndex:le,foldersAreOpenable:ce,idPrefix:q,selectedFolder:ne,onFolderExpand:pe,onFolderSelect:re,isItemLoaded:ie,requestLoadMore:Se}){const ye=(0,t.useRef)(null),Ce=(0,m.wW)(K),de=(0,t.useMemo)(()=>({items:Z,focusedItemIndex:le,foldersAreOpenable:ce,selectedFolder:ne,onFolderExpand:pe,onFolderSelect:re,idPrefix:q}),[Z,le,ce,ne,pe,re,q]),we=(0,t.useCallback)(Je=>ie(Je),[ie]),_e=(0,t.useCallback)((Je,Ue)=>{const{parentUID:$e}=Z[Je];Se($e)},[Se,Z]);return t.createElement("div",{className:Ce.table,role:"tree"},Z.length>0?t.createElement(D.Z,{ref:ye,itemCount:Z.length,isItemLoaded:we,loadMoreItems:_e},({onItemsRendered:Je,ref:Ue})=>t.createElement(u.t7,{ref:Ue,height:O*Math.min(6.5,Z.length),width:"100%",itemData:de,itemSize:O,itemCount:Z.length,onItemsRendered:Je},w)):t.createElement("div",{className:Ce.emptyMessage},t.createElement(g.cC,{i18nKey:"browse-dashboards.folder-picker.empty-message"},"No folders found")))}const V=[100,200,130,160,150];function w({index:Z,style:le,data:ce}){const{items:q,focusedItemIndex:ne,foldersAreOpenable:pe,selectedFolder:re,onFolderExpand:ie,onFolderSelect:Se,idPrefix:ye}=ce,{item:Ce,isOpen:de,level:we,parentUID:_e}=q[Z],Je=(0,t.useRef)(null),Ue=(0,t.useId)(),$e=(0,R.useSelector)(f.hO),Qe=(0,R.useSelector)(f.MH),tt=(Ce.uid?Qe[Ce.uid]:$e)?.items??[];let lt=[];Ce.uid&&(lt=(_e?Qe[_e]:$e)?.items??[]);const Me=(0,m.wW)(K),De=(0,t.useCallback)(qe=>{qe.preventDefault(),qe.stopPropagation(),Ce.uid&&ie(Ce.uid,!de)},[Ce.uid,de,ie]),We=(0,t.useCallback)(()=>{Ce.kind==="folder"&&Se(Ce)},[Ce,Se]);return Ce.kind==="ui"&&Ce.uiKind==="pagination-placeholder"?t.createElement("span",{style:le,className:Me.row},t.createElement(M.A,{level:we}),t.createElement(C.Z,{width:V[Z%V.length]})):Ce.kind!=="folder"?null:t.createElement("div",{ref:Je,style:le,className:(0,i.cx)(Me.row,{[Me.rowFocused]:Z===ne,[Me.rowSelected]:Ce.uid===re}),tabIndex:-1,onClick:We,"aria-expanded":de,"aria-selected":Ce.uid===re,"aria-labelledby":Ue,"aria-level":we+1,role:"treeitem","aria-owns":tt.length>0?tt.map(qe=>U(ye,qe.uid)).join(" "):void 0,"aria-setsize":tt.length,"aria-posinset":lt.findIndex(qe=>qe.uid===Ce.uid)+1,id:U(ye,Ce.uid)},t.createElement("div",{className:Me.rowBody},t.createElement(M.A,{level:we}),pe?t.createElement(P.h,{size:T,onMouseDown:De,tabIndex:-1,"aria-label":de?`Collapse folder ${Ce.title}`:`Expand folder ${Ce.title}`,name:de?"angle-down":"angle-right"}):t.createElement("span",{className:Me.folderButtonSpacer}),t.createElement("label",{className:Me.label,id:Ue},t.createElement(x.x,{truncate:!0},Ce.title))))}const K=Z=>{const le=(0,i.css)({height:O,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:Z.spacing(.5),overflow:"hidden",padding:Z.spacing(0,1)});return{table:(0,i.css)({background:Z.components.input.background}),emptyMessage:(0,i.css)({padding:Z.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,i.css)({paddingLeft:`calc(${(0,S.B)(T)}px + ${Z.spacing(.5)})`}),row:(0,i.css)({display:"flex",position:"relative",alignItems:"center",[":not(:first-child)"]:{borderTop:`solid 1px ${Z.colors.border.weak}`}}),rowFocused:(0,i.css)({backgroundColor:Z.colors.background.secondary}),rowSelected:(0,i.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:Z.shape.radius.default,backgroundImage:Z.colors.gradients.brandVertical}}),rowBody:le,label:(0,i.css)({lineHeight:O+"px",flexGrow:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};var B=e(97289);function W({isLoading:Z,invalid:le,label:ce,...q},ne){const pe=(0,m.l4)(),re=k(pe,le);return t.createElement("div",{className:re.wrapper},t.createElement("div",{className:re.inputWrapper},ce?t.createElement("div",{className:re.prefix},t.createElement(o.J,{name:"folder"})):void 0,t.createElement("button",{type:"button",className:(0,i.cx)(re.fakeInput,ce?re.hasPrefix:void 0),...q,ref:ne},Z?t.createElement(C.Z,{width:100}):ce?t.createElement(x.x,{truncate:!0},ce):t.createElement(x.x,{truncate:!0,color:"secondary"},t.createElement(g.cC,{i18nKey:"browse-dashboards.folder-picker.button-label"},"Select folder"))),t.createElement("div",{className:re.suffix},t.createElement(o.J,{name:"angle-down"}))))}const _=(0,t.forwardRef)(W),k=(Z,le=!1)=>{const ce=(0,d.H)({theme:Z,invalid:le});return{wrapper:ce.wrapper,inputWrapper:ce.inputWrapper,prefix:(0,i.css)([ce.prefix,{pointerEvents:"none",color:Z.colors.text.primary}]),suffix:(0,i.css)([ce.suffix,{pointerEvents:"none"}]),fakeInput:(0,i.css)([ce.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,i.css)`
          ${(0,B.focusCss)(Z)}
        `}]),hasPrefix:(0,i.css)({paddingLeft:28})}};function A({tree:Z,handleCloseOverlay:le,handleFolderSelect:ce,handleFolderExpand:q,idPrefix:ne,search:pe,visible:re}){const[ie,Se]=(0,t.useState)(-1);(0,t.useEffect)(()=>{re&&Se(-1)},[re]),(0,t.useEffect)(()=>{Se(0)},[pe]),(0,t.useEffect)(()=>{document.getElementById(U(ne,Z[ie]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[ie,ne,Z]);const ye=(0,t.useCallback)(Ce=>{const de=!pe;switch(Ce.key){case"ArrowRight":case"ArrowLeft":de&&(Ce.preventDefault(),q(Z[ie].item.uid,Ce.key==="ArrowRight"));break;case"ArrowUp":ie>0&&(Ce.preventDefault(),Se(ie-1));break;case"ArrowDown":ie<Z.length-1&&(Ce.preventDefault(),Se(ie+1));break;case"Enter":Ce.preventDefault();const we=Z[ie].item;we.kind==="folder"&&ce(we);break;case"Tab":Ce.stopPropagation(),le();break;case"Escape":Ce.stopPropagation(),Ce.preventDefault(),le();break}},[ie,le,q,ce,pe,Z]);return{focusedItemIndex:ie,handleKeyDown:ye}}const z=["empty-folder","dashboard"];function H({value:Z,invalid:le,showRootFolder:ce=!0,excludeUIDs:q,onChange:ne}){const pe=(0,m.wW)(Q),re=(0,E.I0)(),ie=(0,c.t4)(Z||c.CN),Se=(0,f.zw)(void 0),[ye,Ce]=(0,t.useState)(""),[de,we]=(0,t.useState)(!1),[_e,Je]=(0,t.useState)(!1),[Ue,$e]=(0,t.useState)({}),Qe=(0,t.useId)(),[tt]=(0,t.useState)(void 0),lt=(0,r.Z)(async()=>{if(!ye)return;const Te=await(0,v.getGrafanaSearcher)().search({query:ye,kind:["folder"],limit:100}),Re=Te.view.map(ue=>(0,y.f9)(ue,Te.view));return{...Te,items:Re}},[ye]),Me=(0,E.v9)(f.hO),De=(0,E.v9)(f.MH),{getTooltipProps:We,setTooltipRef:qe,setTriggerRef:st,visible:dt,triggerRef:Tt}=(0,s.O)({visible:_e,placement:"bottom",interactive:!0,offset:[0,0],trigger:"click",onVisibleChange:Ie=>{Ie&&(Ce(""),we(!0)),Je(Ie)}}),Nt=(0,t.useCallback)(async(Ie,Te)=>{$e(Re=>({...Re,[Ie]:Te})),Te&&!Ue[Ie]&&re((0,f.si)({parentUID:Ie,pageSize:h.IV,excludeKinds:z}))},[re,Ue]),Bt=(0,t.useCallback)(Ie=>{ne&&ne(Ie.uid,Ie.title),Je(!1)},[ne]),yt=(0,t.useCallback)(()=>Je(!1),[Je]),ft=(0,f.D$)(z),ct=(0,t.useCallback)(Ie=>{ye||ft(Ie)},[ye,ft]),ge=(0,t.useMemo)(()=>{const Ie=ye&&lt.value;if(Ie){const Re={isFullyLoaded:!0,lastKindHasMoreItems:!1,lastFetchedKind:"folder",lastFetchedPage:1,items:Ie.items??[]};return(0,f.qO)(void 0,Re,De,{},0,z,q)}let Te=(0,f.qO)(void 0,Me,De,Ue,0,z,q);if(ce){for(const Re of Te)Re.level+=1;Te.unshift({isOpen:!0,level:0,item:{kind:"folder",title:"Dashboards",uid:""}})}return Me||(Te=Te.concat((0,b.k)(h.IV,void 0,0))),Te},[ye,lt.value,Me,De,Ue,q,ce]),Be=(0,t.useCallback)(Ie=>{const Te=ge[Ie];if(!Te)return!1;const Re=Te.item;return!(Re.kind==="ui"&&Re.uiKind==="pagination-placeholder")},[ge]),Le=Se==="pending"||lt.loading,{focusedItemIndex:he,handleKeyDown:He}=A({tree:ge,handleCloseOverlay:yt,handleFolderSelect:Bt,handleFolderExpand:Nt,idPrefix:Qe,search:ye,visible:dt});let Pe=ie.data?.title;return Z===""&&(Pe="Dashboards"),dt?t.createElement(t.Fragment,null,t.createElement(d.I,{ref:st,autoFocus:!0,prefix:Pe?t.createElement(o.J,{name:"folder"}):null,placeholder:Pe??(0,g.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:ye,invalid:le,className:pe.search,onKeyDown:He,onChange:Ie=>Ce(Ie.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":Qe,"aria-owns":Qe,"aria-activedescendant":U(Qe,ge[he]?.item.uid),role:"combobox",suffix:t.createElement(o.J,{name:"search"})}),t.createElement("fieldset",{ref:qe,id:Qe,...We({className:pe.tableWrapper,style:{width:Tt?.clientWidth}})},tt?t.createElement(l.b,{className:pe.error,severity:"warning",title:(0,g.t)("browse-dashboards.folder-picker.error-title","Error loading folders")},tt.message||tt.toString?.()||(0,g.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")):t.createElement("div",null,Le&&t.createElement("div",{className:pe.loader},t.createElement(a.F,{width:600})),t.createElement(L,{items:ge,selectedFolder:Z,focusedItemIndex:he,onFolderExpand:Nt,onFolderSelect:Bt,idPrefix:Qe,foldersAreOpenable:!(ye&&lt.value),isItemLoaded:Be,requestLoadMore:ct})))):t.createElement(_,{label:Pe,invalid:le,isLoading:ie.isLoading,autoFocus:de,ref:st,"aria-label":Pe?(0,g.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:Pe}):void 0})}const Q=Z=>({button:(0,i.css)({maxWidth:"100%"}),error:(0,i.css)({marginBottom:0}),tableWrapper:(0,i.css)({boxShadow:Z.shadows.z3,position:"relative",zIndex:Z.zIndex.portal}),loader:(0,i.css)({position:"absolute",top:0,left:0,right:0,zIndex:Z.zIndex.portal+1,overflow:"hidden"}),search:(0,i.css)({input:{cursor:"default"}})});var X=e(41482);function te(Z){const le=n.config.featureToggles.nestedFolders&&n.config.featureToggles.nestedFolderPicker,{initialTitle:ce,dashboardId:q,enableCreateNew:ne,...pe}=Z;return le?t.createElement(H,{...pe}):t.createElement(oe,{...Z})}function oe({value:Z,showRootFolder:le,onChange:ce,initialTitle:q,dashboardId:ne,enableCreateNew:pe,inputId:re,skipInitialLoad:ie}){const Se=(0,t.useCallback)(ye=>{ce&&ce(ye.uid,ye.title)},[ce]);return t.createElement(X.Fz,{onChange:Se,showRoot:le,initialFolderUid:Z,initialTitle:q,inputId:re,skipInitialLoad:ie,dashboardId:ne,enableCreateNew:pe})}},41482:(j,I,e)=>{"use strict";e.d(I,{Fz:()=>u});var t=e(42844),n=e(56027),i=e.n(n),s=e(27702),r=e(25111),m=e(3935),d=e(74639),o=e(34667),l=e(86312),a=e(66310),g=e(1128),c=e(28580),h=e(5933),f=e(65322),b=e(91368),v=e(77799),y=e(18771);const E="+ Add new",C="-10";function u(x){const{dashboardId:M,allowEmpty:R,onChange:O,filter:T,enableCreateNew:U,inputId:L,onClear:V,enableReset:w,initialFolderUid:K,initialTitle:B="",permissionLevel:W=y.PermissionLevelString.Edit,rootName:_,showRoot:k=!0,skipInitialLoad:A,searchQueryType:z,customAdd:H,folderWarning:Q}=x,X=_??o.config.featureToggles.nestedFolders?"Dashboards":"General",[te,oe]=(0,s.useState)(null),[Z,le]=(0,s.useState)(!1),[ce,q]=(0,s.useState)(""),[ne,pe]=(0,s.useState)(te?.title??""),re=(0,a.wW)(S),ie=typeof V=="function",Se=(0,s.useCallback)(async lt=>{const Me=await(0,v.ZL)(lt,W,z),We=D(Me,T);return(0,l.ff)("grafana_folder_picker_results_loaded",{results:We.length,searchTermLength:lt.length,enableCreateNew:!!U}),(b.contextSrv.hasAccess(y.AccessControlAction.DashboardsWrite,b.contextSrv.isEditor)||b.contextSrv.hasAccess(y.AccessControlAction.DashboardsCreate,b.contextSrv.isEditor))&&X?.toLowerCase().startsWith(lt.toLowerCase())&&k&&We.unshift({label:X,value:""}),w&&lt===""&&B!==""&&!We.find(st=>st.label===B)&&We.unshift({label:B,value:K}),U&&H?[...We,{value:C,label:E,title:lt}]:We},[w,K,B,W,X,k,z,T,U,H]),ye=(0,s.useMemo)(()=>i()(Se,300,{leading:!0}),[Se]),Ce=async()=>{const lt={label:B,value:void 0},Me={label:X,value:""},De=await Se("");let We=null;K!=null?We=De.find(qe=>qe.value===K)||null:w&&B?We=lt:K&&(We=De.find(qe=>qe.id===K)||null),!We&&!R&&(b.contextSrv.isEditor?We=Me:!!M?We=lt:We=De.length>0?De[0]:lt),!Z&&oe(We)};(0,s.useEffect)(()=>{te&&te.value!==K&&!Z&&te.value&&te.label&&O({uid:te.value,title:te.label})},[te,K]),(0,r.Z)(async()=>{if(A){const lt=await P({getFolder:v.Pb,folderUid:K,folderName:B});oe(lt)}await Ce()},[A,K,B]),(0,s.useEffect)(()=>{te&&te.id===C&&le(!0)},[te]);const de=(0,s.useCallback)((lt,Me)=>{if(lt?.value===C)oe({id:C,title:ce}),pe(ce);else{if(lt||(lt={value:"",label:X}),Me.action==="clear"&&V){V();return}oe(lt),O({uid:lt.value,title:lt.label})}},[O,V,X,ce]),we=(0,s.useCallback)(async lt=>{if(Q?.warningCondition(lt))return(0,l.ff)("grafana_folder_picker_folder_created",{status:"failed_condition"}),!1;const Me=await(0,v.L6)({title:lt});let De={value:"",label:"Not created"};return Me.uid?((0,l.ff)("grafana_folder_picker_folder_created",{status:"success"}),h.Z.emit(m.SI.alertSuccess,["Folder Created","OK"]),De={value:Me.uid,label:Me.title},oe(Me),de(De,{action:"create-option",option:De})):((0,l.ff)("grafana_folder_picker_folder_created",{status:"failed"}),h.Z.emit(m.SI.alertError,["Folder could not be created"])),De},[Q,de]),_e=(0,s.useCallback)(lt=>{const Me=!!H?.disallowValues;if(lt.key==="Enter"&&Me&&!H?.isAllowedValue(ne)){lt.preventDefault();return}switch(lt.key){case"Enter":{we(te?.title),le(!1);break}case"Escape":oe({value:"",label:X}),le(!1)}},[H?.disallowValues,H?.isAllowedValue,ne,we,te?.title,X]),Je=lt=>{const Me=lt.currentTarget.value;pe(Me),oe({id:void 0,title:Me})},Ue=()=>{oe({value:"",label:X}),le(!1)},$e=(lt,{action:Me})=>{Me==="input-change"&&q(De=>lt),Me==="menu-close"&&q(De=>lt)},Qe=()=>Q?.warningCondition(ne)?s.createElement(Q.warningComponent,null):null,tt=()=>Q?.warningCondition(ce)?s.createElement(Q.warningComponent,null):null;return Z?s.createElement(s.Fragment,null,s.createElement(Qe,null),s.createElement("div",{className:re.newFolder},"Press enter to create the new folder."),s.createElement(g.I,{width:30,autoFocus:!0,value:ne,onChange:Je,onKeyDown:_e,placeholder:"Press enter to confirm new folder.",onBlur:Ue})):s.createElement("div",{"data-testid":d.wl.components.FolderPicker.containerV2},s.createElement(tt,null),s.createElement(c.gY,{inputId:L,"aria-label":d.wl.components.FolderPicker.input,loadingMessage:(0,f.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:te,inputValue:ce,onInputChange:$e,value:te,allowCustomValue:U&&!H,loadOptions:ye,onChange:de,onCreateOption:we,isClearable:ie}))}function D(x,M){return(M?M(x):x).map(O=>({label:O.title,value:O.uid}))}async function P({folderName:x,folderUid:M,getFolder:R}){if(M==null)throw new Error("folderUid is not found.");return x?{label:x,value:M}:{label:(await R(M)).title,value:M}}const S=x=>({newFolder:(0,t.css)`
    color: ${x.colors.warning.main};
    font-size: ${x.typography.bodySmall.fontSize};
    padding-bottom: ${x.spacing(1)};
  `})},23159:(j,I,e)=>{"use strict";e.d(I,{c:()=>m});var t=e(89949),n=e.n(t),i=e(27702),s=e(73289),r=e(28580);class m extends i.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${o}`).then(l=>{const a=l.teams.map(g=>({value:g,label:g.name,imgUrl:g.avatarUrl}));return this.setState({isLoading:!1}),a})}render(){const{onSelected:o,className:l}=this.props,{isLoading:a}=this.state;return i.createElement("div",{className:"user-picker","data-testid":"teamPicker"},i.createElement(r.qb,{isLoading:a,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:o,className:l,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}},79173:(j,I,e)=>{"use strict";e.d(I,{f:()=>m});var t=e(89949),n=e.n(t),i=e(27702),s=e(73289),r=e(28580);class m extends i.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/org/users/lookup?query=${o}&limit=100`).then(l=>l.map(a=>({id:a.userId,value:a.userId,label:a.login,imgUrl:a.avatarUrl,login:a.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:o,onSelected:l,inputId:a}=this.props,{isLoading:g}=this.state;return i.createElement("div",{className:"user-picker","data-testid":"userPicker"},i.createElement(r.qb,{isClearable:!0,className:o,inputId:a,isLoading:g,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:l,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}},8311:(j,I,e)=>{"use strict";e.d(I,{e:()=>s});var t=e(27702),n=e(64714),i=e(73453);class s extends t.Component{constructor(m){super(m)}render(){const{label:m,removeIcon:d,count:o,onClick:l}=this.props,{color:a}=(0,n.Bx)(m),g={backgroundColor:a},c=o!==0&&t.createElement("span",{className:"tag-count-label"},`(${o})`);return t.createElement("span",{className:"label label-tag",style:g},d&&t.createElement(i.J,{onClick:l,name:"times"}),m," ",c)}}},1041:(j,I,e)=>{"use strict";e.d(I,{D:()=>h});var t=e(42844),n=e(27702),i=e(38581),s=e(95676),r=e(66310),m=e(28580),d=e(73453),o=e(65322),l=e(8311);const a=({data:b,className:v,label:y,isFocused:E,innerProps:C})=>{const u=(0,r.wW)(g);return n.createElement("div",{className:(0,t.cx)(u.option,E&&u.optionFocused),"aria-label":"Tag option",...C},n.createElement("div",{className:`tag-filter-option ${v||""}`},typeof y=="string"?n.createElement(l.e,{label:y,removeIcon:!1,count:b.count??0}):y))},g=b=>({option:(0,t.css)`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${b.colors.background.secondary};
      }
    `,optionFocused:(0,t.css)`
      background: ${b.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),c=(b,v)=>RegExp((0,s.GE)(v),"i").test(b.value),h=({allowCustomValue:b=!1,formatCreateLabel:v,hideValues:y,inputId:E,isClearable:C,onChange:u,placeholder:D,tagOptions:P,tags:S,width:x})=>{const M=(0,r.wW)(f),R=S.map(H=>({value:H,label:H,count:0})),[O,T]=(0,n.useState)(R),[U,L]=(0,n.useState)(!1),[V,w]=(0,n.useState)(S),[K,B]=(0,n.useState)(R),W=(0,n.useMemo)(()=>S.join(),[S]),_=(0,n.useCallback)(async()=>(await P()).map(Q=>S.includes(Q.term)?{value:Q.term,label:Q.term,count:0}:{value:Q.term,label:Q.term,count:Q.count}),[P,S]),k=(0,n.useCallback)(async()=>{L(!0);const H=await _();b&&K.forEach(Q=>H.push(Q)),T(H),L(!1)},[b,K,_]);(0,n.useEffect)(()=>{S.length>0&&O.length===0&&k()},[k,O.length,S.length]),(0,n.useEffect)(()=>{S!==V&&(w(S),k())},[k,V,S]);const A=H=>{H.forEach(Q=>Q.count=0),u((H||[]).map(Q=>Q.value)),b&&B(H.filter(Q=>!S.includes(Q)))},z={key:W,onFocus:k,isLoading:U,options:O,allowCreateWhileLoading:!0,allowCustomValue:b,formatCreateLabel:v,defaultOptions:!0,filterOption:c,getOptionLabel:H=>H.label,getOptionValue:H=>H.value,inputId:E,isMulti:!0,onChange:A,loadingMessage:(0,o.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,o.t)("tag-filter.no-tags","No tags found"),placeholder:D||(0,o.t)("tag-filter.placeholder","Filter by tag"),value:R,width:x,components:{Option:a,MultiValueLabel:()=>null,MultiValueRemove(H){const{data:Q}=H;return n.createElement(i.c.MultiValueRemove,{...H},n.createElement(l.e,{key:Q.label,label:Q.label,removeIcon:!0,count:Q.count}))},MultiValueContainer:y?()=>null:i.c.MultiValueContainer}};return n.createElement("div",{className:M.tagFilter},C&&S.length>0&&n.createElement("button",{className:M.clear,onClick:()=>A([])},"Clear tags"),n.createElement(m.NU,{...z,prefix:n.createElement(d.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};h.displayName="TagFilter";const f=b=>({tagFilter:(0,t.css)`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:(0,t.css)`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${b.colors.text.secondary};

    &:hover {
      color: ${b.colors.text.primary};
    }
  `})},37827:(j,I,e)=>{"use strict";e.d(I,{a:()=>l});var t=e(89949),n=e.n(t),i=e(27702),s=e(76305),r=e(99633),m=e(37424),d=e(74273);const o="grafana.dashboard.timepicker.history",l=b=>i.createElement(d.G,{storageKey:o,defaultValue:[]},(v,y)=>{const E=g(v),C=a(E);return i.createElement(m.Xc,{...b,history:C,onChange:u=>{c(u,E,y),b.onChange(u)}})});function a(b){return b.map(v=>s.convertRawToRange(v,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function g(b){return b.map(v=>{const y=typeof v.from=="string"?v.from:v.from.toISOString(),E=typeof v.to=="string"?v.to:v.to.toISOString();return{from:y,to:E}})}function c(b,v,y){if(!h(b))return;const E={from:typeof b.raw.from=="string"?b.raw.from:b.raw.from.toISOString(),to:typeof b.raw.to=="string"?b.raw.to:b.raw.to.toISOString()},C=f([E,...v]);y(C)}function h(b){return(0,r.v9)(b.raw.from)||(0,r.v9)(b.raw.to)}function f(b){return(0,t.uniqBy)(b,v=>v.from+v.to).slice(0,4)}},43801:(j,I,e)=>{"use strict";e.d(I,{K:()=>a});var t=e(27702),n=e(93666),i=e(29241),s=e(34072),r=e(71982),m=e(18869),d=e(70823),o=e(55879);const l=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class a extends t.Component{constructor(){super(...arguments),this.getValueColor=(c,h,f)=>{const b=this.props.frames[c].fields[h];if(b.display){const v=b.display(f);if(v.color)return v.color}return n.R},this.prepConfig=(c,h,f)=>{this.panelContext=this.context;const{eventBus:b,sync:v}=this.panelContext;return(0,o.Nj)({frame:c,getTimeRange:f,eventBus:b,sync:v,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:c.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=c=>{const{legend:h,legendItems:f}=this.props;return!c||!f||!h||h.showLegend===!1?null:t.createElement(s.AY.Legend,{placement:h.placement},t.createElement(r.l,{placement:h.placement,items:f,displayMode:h.displayMode,readonly:!0}))}}render(){return t.createElement(m.d,{...this.props,fields:{x:c=>c.type===i.fS.time,y:c=>c.type===i.fS.number||c.type===i.fS.boolean||c.type===i.fS.string||c.type===i.fS.enum},prepConfig:this.prepConfig,propsToDiff:l,renderLegend:this.renderLegend})}}a.contextType=d.bb},55879:(j,I,e)=>{"use strict";e.d(I,{KN:()=>V,iK:()=>oe,Y:()=>Z,$m:()=>X,Ur:()=>H,Nj:()=>B,AR:()=>z,SA:()=>Q});var t=e(93666),n=e(75578),i=e(21609),s=e(79248),r=e(84714),m=e(29241),d=e(5168),o=e(11024),l=e(77104),a=e(48962),g=e(66805),c=e(64167),h=e(19345),f=e(18869),b=e(39596),v=e(26453),y=e(48473),E=e(26712),C=e(96750),u=e(59479),D=e(94876);const{round:P,min:S,ceil:x}=Math,M=2;let R=6;const O=u.Gj;function T(le,ce,q,ne,pe){(0,u.Qm)(q,le,O,ce,(re,ie,Se)=>{let ye=ne*ie,Ce=ne*Se;pe(re,ye,Ce)})}function U(le){const{mode:ce,numSeries:q,isDiscrete:ne,hasMappedNull:pe,rowHeight:re=0,colWidth:ie=0,showValue:Se,mergeValues:ye=!1,theme:Ce,label:de,formatValue:we,alignValue:_e="left",getTimeRange:Je,getValueColor:Ue,getFieldConfig:$e,onHover:Qe,onLeave:tt}=le;let lt;const Me=Array(q).fill(null).map(()=>{let ve=document.createElement("div");return ve.classList.add("bar-mark"),ve.style.position="absolute",ve.style.background="rgba(255,255,255,0.2)",ve});let De;const We=ve=>{De=Array(q).fill(null).map(ze=>Array(ve).fill(null))},qe=`500 ${Math.round(12*devicePixelRatio)}px ${Ce.typography.fontFamily}`,st=Array(q).fill(null),dt=[ie,1/0],Tt=1-dt[0],Nt=(dt[1]??1/0)*E.Z.pxRatio,Bt=new Map,yt=new Map;function ft(ve){Bt.forEach((ze,Oe)=>{ve.fillStyle=Oe,ve.fill(ze)}),yt.forEach((ze,Oe)=>{ve.strokeStyle=Oe,ve.stroke(ze)}),Bt.clear(),yt.clear()}function ct(ve,ze,Oe,Fe,Ge,nt,Xe,ut,ht,wt,mn,vn,gn){if(Xe<1)return;const Sn=Ue(wt+1,vn),Cn=$e(wt),pn=L(Cn,Sn);if(De[wt][mn]={x:P(Ge-Oe),y:P(nt-Fe),w:Xe,h:ut,sidx:wt+1,didx:mn,fillColor:pn},gn){let nn=pn,Ct=Bt.get(nn);if(Ct==null&&Bt.set(nn,Ct=new Path2D),ze(Ct,Ge,nt,Xe,ut),ht){let bt=Sn,Ut=yt.get(bt);Ut==null&&yt.set(bt,Ut=new Path2D),ze(Ut,Ge+ht/2,nt+ht/2,Xe-ht,ut-ht)}}else ve.beginPath(),ze(ve,Ge,nt,Xe,ut),ve.fillStyle=pn,ve.fill(),ht&&(ve.beginPath(),ze(ve,Ge+ht/2,nt+ht/2,Xe-ht,ut-ht),ve.strokeStyle=Sn,ve.lineWidth=ht,ve.stroke())}const ge=(ve,ze,Oe,Fe)=>(E.Z.orient(ve,ze,(Ge,nt,Xe,ut,ht,wt,mn,vn,gn,Sn,Cn,pn,nn,Ct)=>{let bt=P((Ge.width||0)*E.Z.pxRatio),Ut=ne(ze),_t=Ut&&pe(ze);ve.ctx.save(),Ct(ve.ctx,ve.bbox.left,ve.bbox.top,ve.bbox.width,ve.bbox.height),ve.ctx.clip(),T(re,ze-1,q,Cn,(Gt,jt,sn)=>{if(ce===V.Changes)for(let St=0;St<Xe.length;St++){let mt=Xe[St];if(mt!=null||_t){let kt=Math.round(wt(nt[St],ut,Sn,vn)),it=St;for(;++it<Xe.length&&(Xe[it]===void 0||ye&&Xe[it]===mt););let pt=it===Xe.length?vn+Sn+bt:Math.round(wt(nt[it],ut,Sn,vn));ct(ve.ctx,Ct,vn,gn,kt,P(gn+jt),pt-kt,P(sn),bt,Gt,St,mt,Ut),St=it-1}}else if(ce===V.Samples){let St=wt(nt[1],ut,Sn,vn)-wt(nt[0],ut,Sn,vn),mt=St*Tt,kt=P(S(Nt,St-mt)-bt),it=kt/2;for(let pt=Oe;pt<=Fe;pt++){let It=Xe[pt];if(It!=null||_t){let Qt=wt(nt[pt],ut,Sn,vn);ct(ve.ctx,Ct,vn,gn,P(Qt-it),P(gn+jt),kt,P(sn),bt,Gt,pt,It,Ut)}}}}),Ut&&(ve.ctx.lineWidth=bt,ft(ve.ctx)),ve.ctx.restore()}),null),Be=we==null||Se===c.Jp.Never?!1:(ve,ze,Oe,Fe)=>(ve.ctx.save(),ve.ctx.rect(ve.bbox.left,ve.bbox.top,ve.bbox.width,ve.bbox.height),ve.ctx.clip(),ve.ctx.font=qe,ve.ctx.textAlign=ce===V.Changes?_e:"center",ve.ctx.textBaseline="middle",E.Z.orient(ve,ze,(Ge,nt,Xe,ut,ht,wt,mn,vn,gn,Sn,Cn)=>{let pn=P((Ge.width||0)*E.Z.pxRatio),Ct=ne(ze)&&pe(ze),bt=P(gn+Ve[ze-1]);for(let Ut=0;Ut<Xe.length;Ut++)if(Xe[Ut]!=null||Ct){const _t=De[ze-1][Ut];if(!_t||_t.x>=Sn)continue;let Gt=Math.floor(_t?.w/R);if(Se===c.Jp.Auto&&Gt<2)continue;let jt=we(ze,Xe[Ut]),sn=P(_t.x+vn+_t.w/2);ce===V.Changes&&(_e==="left"?sn=P(_t.x+vn+pn+M):_e==="right"&&(sn=P(_t.x+vn+_t.w-pn-M))),ve.ctx.fillStyle=Ce.colors.getContrastText(_t.fillColor,3),ve.ctx.fillText(jt.slice(0,Gt),sn,bt)}}),ve.ctx.restore(),!1),Le=ve=>{let ze=ve.over,Oe="";for(let Fe=32;Fe<=126;Fe++)Oe+=String.fromCharCode(Fe);R=Math.ceil(ve.ctx.measureText(Oe).width/Oe.length*E.Z.pxRatio),R+=2.5,ze.style.overflow="hidden",Me.forEach(Fe=>{ze.appendChild(Fe)})},he=ve=>{lt=lt||new D.lW(0,0,ve.bbox.width,ve.bbox.height),lt.clear(),We(ve.data[0].length),ve.series.forEach(ze=>{ze._paths=null})};function He(ve,ze){let Oe=Me[ve],Fe=E.Z.pxRatio;ze?(Oe.style.display="",Oe.style.left=P(ze.x/Fe)+"px",Oe.style.top=P(ze.y/Fe)+"px",Oe.style.width=P(ze.w/Fe)+"px",Oe.style.height=P(ze.h/Fe)+"px"):Oe.style.display="none",st[ve]=ze}let Pe;function Ie(ve,ze){let Oe;for(let Fe=0;Fe<q;Fe++){let Ge;if(ve>=0){let nt=Ve[Fe];lt.get(ve,nt,1,1,Xe=>{(0,D.Pn)(ve,nt,Xe.x,Xe.y,Xe.x+Xe.w,Xe.y+Xe.h)&&(Ge=Xe,Math.abs(ze-nt)<=Xe.h/2&&(Oe=Xe))})}Ge?Ge!==st[Fe]&&He(Fe,Ge):st[Fe]!=null&&He(Fe,null)}Oe?Oe!==Pe&&(Pe=Oe,Qe(Oe.sidx,Oe.didx,Oe)):Pe&&(Pe=void 0,tt())}function Te(ve,ze){let Oe;lt.get(ve,ze,1,1,Fe=>{(0,D.Pn)(ve,ze,Fe.x,Fe.y,Fe.x+Fe.w,Fe.y+Fe.h)&&(Oe=Fe)}),Oe?(He(0,Oe),Oe!==Pe&&(Pe=Oe,Qe(Oe.sidx,Oe.didx,Oe))):Pe&&(He(0,null),Pe=void 0,tt())}const Re=ce===V.Changes?Ie:Te,ue=ve=>{let ze=P(ve.cursor.left*E.Z.pxRatio),Oe=P(ve.cursor.top*E.Z.pxRatio);if(!lt.o.length&&lt.q==null)for(const Fe of De)for(const Ge of Fe)Ge&&lt.add(Ge);Re(ze,Oe)},xe={y:!1,x:ce===V.Changes,points:{show:!1}},Ve=Array(q).fill(0),Ne=Array(q).fill(0),fe=[0,1];return{cursor:xe,xSplits:ce===V.Samples?(ve,ze,Oe,Fe,Ge,nt)=>{let Xe=[],ut=ve.data[0][1]-ve.data[0][0],ht=x(Ge/ut);for(let wt=0;wt<ve.data[0].length;wt+=ht){let mn=ve.data[0][wt];mn>=Oe&&mn<=Fe&&Xe.push(mn)}return Xe}:null,xRange:ve=>{const ze=Je();let Oe=ze.from.valueOf(),Fe=ze.to.valueOf();if(ce===V.Samples){let Xe=(ve.data[0][1]-ve.data[0][0])/2;Oe<=ve.data[0][0]&&(Oe=ve.data[0][0]-Xe);let ut=ve.data[0].length-1;Fe>=ve.data[0][ut]&&(Fe=ve.data[0][ut]+Xe)}return[Oe,Fe]},ySplits:ve=>(T(re,null,q,ve.bbox.height,(ze,Oe,Fe)=>{Ve[ze]=P(Oe+Fe/2),Ne[ze]=ve.posToVal(Ve[ze]/E.Z.pxRatio,f.j)}),Ne),yValues:(ve,ze)=>ze.map((Oe,Fe)=>de(Fe+1)),yRange:fe,drawPaths:ge,drawPoints:Be,init:Le,drawClear:he,setCursor:ue}}function L(le,ce){if(ce[0]==="#"&&ce.length===9)return ce;const q=(le.fillOpacity??100)/100;return(0,C.alpha)(ce,q)}var V=(le=>(le.Changes="changes",le.Samples="samples",le))(V||{});const w={lineWidth:0,fillOpacity:80};function K(le){return le.ctrlKey||le.metaKey||le.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const B=({frame:le,theme:ce,timeZones:q,getTimeRange:ne,mode:pe,eventBus:re,sync:ie,rowHeight:Se,colWidth:ye,showValue:Ce,alignValue:de,mergeValues:we,getValueColor:_e,eventsScope:Je="__global_"})=>{const Ue=new h.U(q[0]),$e="time",Qe="x",tt=yt=>{const ft=yt.config?.color?.mode;return!(ft&&yt.display&&ft.startsWith("continuous-"))},lt=yt=>yt.config.mappings?.some(ft=>ft.type===g.Hi.SpecialValue&&ft.options.match==="null")||!1,Me=(yt,ft)=>{const ct=le.fields[yt];return ct.state?.origin?.fieldIndex!==void 0&&ct.state?.origin?.frameIndex!==void 0&&_e?_e(ct.state?.origin?.frameIndex,ct.state?.origin?.fieldIndex,ft):t.R},De={mode:pe,numSeries:le.fields.length-1,isDiscrete:yt=>tt(le.fields[yt]),hasMappedNull:yt=>lt(le.fields[yt]),mergeValues:we,rowHeight:Se,colWidth:ye,showValue:Ce,alignValue:de,theme:ce,label:yt=>(0,n.CZ)(le.fields[yt],le),getFieldConfig:yt=>le.fields[yt].config.custom,getValueColor:Me,getTimeRange:ne,formatValue:(yt,ft)=>(0,i.zc)(le.fields[yt].display(ft)),onHover:(yt,ft)=>{qe=yt,st=ft,We=!0},onLeave:()=>{qe=null,st=null,We=!0}};let We=!1,qe=null,st=null;const dt=U(De),Tt={point:{[$e]:null,[f.j]:null},data:le};Ue.addHook("init",dt.init),Ue.addHook("drawClear",dt.drawClear),Ue.addHook("setCursor",dt.setCursor);const Nt=(yt,ft,ct)=>{We&&(qe!=null&&(yt(qe),ft(st)),We=!1),ct(qe==null)};Ue.setTooltipInterpolator(Nt),Ue.setPrepData(yt=>(0,y.Bj)(yt[0],(0,y.i7)(yt[0]))),Ue.setCursor(dt.cursor),Ue.addScale({scaleKey:Qe,isTime:!0,orientation:c.wN.Horizontal,direction:c.bQ.Right,range:dt.xRange}),Ue.addScale({scaleKey:f.j,isTime:!1,orientation:c.wN.Vertical,direction:c.bQ.Up,range:dt.yRange}),Ue.addAxis({scaleKey:Qe,isTime:!0,splits:dt.xSplits,placement:c.LB.Bottom,timeZone:q[0],theme:ce,grid:{show:!0}}),Ue.addAxis({scaleKey:f.j,isTime:!1,placement:c.LB.Left,splits:dt.ySplits,values:dt.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:ce});let Bt=0;for(let yt=0;yt<le.fields.length;yt++){if(yt===0)continue;const ft=le.fields[yt],ct=ft.config,ge={...w,...ct.custom};ft.state.seriesIndex=Bt++,Ue.addSeries({scaleKey:f.j,pathBuilder:dt.drawPaths,pointsBuilder:dt.drawPoints,lineWidth:ge.lineWidth,fillOpacity:ge.fillOpacity,theme:ce,show:!ge.hideFrom?.viz,thresholds:ct.thresholds,dataFrameFieldIndex:ft.state?.origin})}if(ie&&ie()!==s.m.Off){let yt={};yt.sync={key:Je,filters:{pub:(ft,ct,ge,Be,Le,he,He)=>ie&&ie()===s.m.Off?!1:(Tt.rowIndex=He,ge<0&&Be<0?(Tt.point[$e]=null,Tt.point[f.j]=null,re.publish(new r.xH)):(Tt.point[$e]=ct.posToVal(ge,Qe),Tt.point.panelRelY=Be>0?Be/he:1,Tt.down=void 0,re.publish(new r.es(Tt))),!0)},scales:[Qe,null]},Ue.setSync(),Ue.setCursor(yt)}return Ue};function W(le){const ce=new Map;for(let q=0;q<le.fields.length;q++)ce.set(getFieldDisplayName(le.fields[q],le),q);return ce}function _(le){let ce=le[0],q;for(let ne=1;ne<le.length;ne++){let pe=le[ne];pe===null?ce=null:pe===ce?(q||(q=[...le]),q[ne]=void 0):pe!=null&&(ce=pe)}return q}function k(le){let ce=le.config.custom?.spanNulls;return ce?ce===!0?1/0:ce:-1}function A(le,ce){const q=le.config.thresholds;if(le.type!==m.fS.number||!q||!q.steps.length)return;const ne=H(le.config,ce);if(ne.length!==q.steps.length)return;const pe=new Map,re=new Map;for(let ye=0;ye<ne.length;ye++)pe.set(q.steps[ye],ne[ye].label),re.set(ne[ye].label,ne[ye].color);let ie=le.values;const Se=new Array(le.values.length);if(q.mode===d.H.Percentage){const{min:ye,max:Ce}=(0,o.xD)(le),de=Ce-ye;ie=ie.map(we=>we==null?we:(we-ye)/de*100)}for(let ye=0;ye<Se.length;ye++){const Ce=ie[ye];Ce==null?Se[ye]=Ce:Se[ye]=pe.get((0,l.m1)(Ce,q.steps))}return{...le,config:{...le.config,custom:{...le.config.custom,spanNulls:k(le)}},type:m.fS.string,values:Se,display:ye=>({text:String(ye),color:re.get(String(ye)),numeric:NaN})}}function z(le,ce,q,ne){if(!le?.length)return{warn:"No data in response"};let pe=!1;const re=[];for(let ie of le){let Se=!1,ye=!1,Ce=(0,a.Y3)(ie,ie.fields.findIndex(_e=>_e.type===m.fS.time)),de=(0,b.w)({frame:Ce,refFieldPseudoMin:q.from.valueOf(),refFieldPseudoMax:q.to.valueOf()});de!==ie&&(ye=!0);const we=[];for(let _e of(0,v.I)(de).fields)if(!_e.config.custom?.hideFrom?.viz)switch(_e.type){case m.fS.time:Se=!0,pe=!0,we.push(_e);break;case m.fS.enum:case m.fS.number:if(ce&&_e.config.color?.mode===t.S.Thresholds){const Je=A(_e,ne);if(Je){we.push(Je),ye=!0;continue}}case m.fS.boolean:case m.fS.string:_e={..._e,config:{..._e.config,custom:{..._e.config.custom,spanNulls:k(_e)}}},we.push(_e);break;default:ye=!0}Se&&we.length>1&&(pe=!0,ye?re.push({...Ce,fields:we}):re.push(Ce))}return pe?re.length?{frames:re}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function H(le,ce){const q=[],ne=le.thresholds;if(!ne||!ne.steps.length)return q;const pe=ne.steps,re=(0,i.Cf)(ne.mode===d.H.Percentage?"percent":le.unit??""),ie=Se=>(0,i.zc)(re(Se));for(let Se=0;Se<pe.length;Se++){let ye=pe[Se],Ce=ye.value,de="",we="";Ce===-1/0&&Se<pe.length-1?(Ce=pe[Se+1].value,de="< "):we="+",q.push({label:`${de}${ie(Ce)}${we}`,color:ce.visualization.getColorByName(ye.color),yAxis:1})}return q}function Q(le,ce,q){if(!(!le||ce.showLegend===!1))return X(te(le),q)}function X(le,ce){if(!le.length)return;const q=[],ne=le[0].config,pe=ne.color?.mode??t.S.Fixed,re=ne.thresholds;if(pe===t.S.Thresholds&&re?.steps&&re.steps.length>1)return H(ne,ce);if(pe.startsWith("continuous"))return;const ie=new Map;return le.forEach(Se=>{Se.config.custom?.hideFrom?.legend||Se.values.forEach(ye=>{let Ce=Se.display(ye);Ce.color&&ie.set(Ce.text,Ce.color)})}),ie.forEach((Se,ye)=>{ye.length>0&&q.push({label:ye,color:ce.visualization.getColorByName(Se??t.R),yAxis:1})}),q}function te(le){const ce=[];for(const q of le)for(const ne of q.fields)ne.type!==m.fS.time&&ce.push(ne);return ce}function oe(le,ce){let q,ne=ce+1;if(ne>=le.values.length)return null;const pe=le.values[ce];for(;q===void 0;){if(ne>=le.values.length)return null;const re=le.values[ne];re===void 0||re===pe?ne++:q=ne}return q}function Z(le){if(le<0||Number.isNaN(le))return"";let ce,q,ne,pe,re,ie,Se,ye;return Se=Math.floor(le/1e3),ie=Math.floor(Se/60),Se=Se%60,re=Math.floor(ie/60),ie=ie%60,pe=Math.floor(re/24),re=re%24,ce=Math.floor(pe/365),ce>0&&(pe=pe%365),q=Math.floor(pe/30),q>0&&(pe=pe%30),ne=Math.floor(pe/7),ne>0&&(pe=pe%7),ye=Math.round(le%1e3*1e3)/1e3,(ce>0?ce+"y "+(q>0?q+"mo ":"")+(ne>0?ne+"w ":"")+(pe>0?pe+"d ":""):q>0?q+"mo "+(ne>0?ne+"w ":"")+(pe>0?pe+"d ":""):ne>0?ne+"w "+(pe>0?pe+"d ":""):pe>0?pe+"d "+(re>0?re+"h ":""):re>0?re+"h "+(ie>0?ie+"m ":""):ie>0?ie+"m "+(Se>0?Se+"s ":""):Se>0?Se+"s "+(ye>0?ye+"ms ":""):ye>0?ye+"ms ":"0").trim()}},19059:(j,I,e)=>{"use strict";e.d(I,{a:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(45066),r=e(53901),m=e(73453);const d=({values:l,onChange:a,id:g})=>{const c=(0,i.wW)(o);return n.createElement("div",{className:c.wrapper},l.length?l.map((h,f)=>n.createElement("div",{className:c.pair,key:f},n.createElement(s.X,{id:`${g}-key-${f}`,placeholder:"Tag name",value:h.key,onChange:b=>{a(l.map((v,y)=>(y===f&&(v.key=String(b)),v)))}}),n.createElement(r.W,{"aria-label":"equals",className:c.operator},"as"),n.createElement(s.X,{id:`${g}-value-${f}`,placeholder:"New name (optional)",value:h.value||"",onChange:b=>{a(l.map((v,y)=>(y===f&&(v.value=String(b)),v)))}}),n.createElement("button",{onClick:()=>a([...l.slice(0,f),...l.slice(f+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(m.J,{name:"times"})),f===l.length-1?n.createElement("button",{onClick:()=>a([...l,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(m.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>a([...l,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(m.J,{name:"plus"})))},o=l=>({wrapper:(0,t.css)`
    display: flex;
    flex-direction: column;
    gap: ${l.spacing(.5)} 0;
  `,pair:(0,t.css)`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:(0,t.css)`
    color: ${l.v1.palette.orange};
    width: auto;
  `})},51778:(j,I,e)=>{"use strict";e.d(I,{Ny:()=>y,dw:()=>E,mH:()=>b,p1:()=>c,rr:()=>v});var t=e(42844),n=e(27702),i=e(19010),s=e(71107),r=e(48024),m=e(42074),d=e(1128),o=e(47449),l=e(53229),a=e(71654),g=e(19059);function c(C){if(C?.tracesToLogsV2)return C.tracesToLogsV2;if(!C?.tracesToLogs)return;const u={customQuery:!1};return u.datasourceUid=C.tracesToLogs.datasourceUid,u.tags=C.tracesToLogs.mapTagNamesEnabled?C.tracesToLogs.mappedTags:C.tracesToLogs.tags?.map(D=>({key:D})),u.filterByTraceID=C.tracesToLogs.filterByTraceID,u.filterBySpanID=C.tracesToLogs.filterBySpanID,u.spanStartTimeShift=C.tracesToLogs.spanStartTimeShift,u.spanEndTimeShift=C.tracesToLogs.spanEndTimeShift,u}function h({options:C,onOptionsChange:u}){const D=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource","googlecloud-logging-datasource"],P=(0,n.useMemo)(()=>c(C.jsonData)||{customQuery:!1},[C.jsonData]),{query:S="",tags:x,customQuery:M}=P,R=(0,n.useCallback)(O=>{u({...C,jsonData:{...C.jsonData,tracesToLogsV2:{...P,...O},tracesToLogs:void 0}})},[u,C,P]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement(s.Z,null,n.createElement(r._,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(l.q,{inputId:"trace-to-logs-data-source-picker",filter:O=>D.includes(O.type),current:P.datasourceUid,noDefault:!0,width:40,onChange:O=>R({datasourceUid:O.uid})}))),n.createElement(s.Z,null,n.createElement(a.w,{label:b("start"),tooltip:v("start"),value:P.spanStartTimeShift||"",onChange:O=>{R({spanStartTimeShift:O})},isInvalidError:y})),n.createElement(s.Z,null,n.createElement(a.w,{label:b("end"),tooltip:v("end"),value:P.spanEndTimeShift||"",onChange:O=>{R({spanEndTimeShift:O})},isInvalidError:y})),n.createElement(s.Z,null,n.createElement(r._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26},n.createElement(g.a,{values:x??[],onChange:O=>R({tags:O})}))),n.createElement(f,{disabled:M,type:"trace",id:"filterByTraceID",value:!!P.filterByTraceID,onChange:O=>R({filterByTraceID:O})}),n.createElement(f,{disabled:M,type:"span",id:"filterBySpanID",value:!!P.filterBySpanID,onChange:O=>R({filterBySpanID:O})}),n.createElement(s.Z,null,n.createElement(r._,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},n.createElement(m.x,{id:"customQuerySwitch",value:M,onChange:O=>R({customQuery:O.currentTarget.checked})}))),M&&n.createElement(r._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},n.createElement(d.I,{label:"Query",type:"text",allowFullScreen:!0,value:S,onChange:O=>R({query:O.currentTarget.value})})))}function f(C){return n.createElement(s.Z,null,n.createElement(r._,{disabled:C.disabled,label:`Filter by ${C.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${C.type} ID`},n.createElement(m.x,{id:C.id,value:C.value,onChange:u=>C.onChange(u.currentTarget.checked)})))}const b=C=>`Span ${C} time shift`,v=C=>`Shifts the ${C} time of the span. Default: 0 (Time units can be used here, for example: 5s, -1m, 3h)`,y="Invalid time shift. See tooltip for examples.",E=({options:C,onOptionsChange:u})=>n.createElement(i.K,{title:"Trace to logs",description:n.createElement(o.W,{description:"Navigate from a trace span to the selected data source's logs.",suffix:`${C.type}/#trace-to-logs`,feature:"trace to logs"}),isCollapsible:!0,isInitiallyOpen:!0},n.createElement(h,{options:C,onOptionsChange:u}))},99829:(j,I,e)=>{"use strict";e.d(I,{Z:()=>r});var t=e(42844),n=e(27702),i=e(86312),s=e(66310);const r=({text:d="PRO",className:o,experimentId:l,eventVariant:a="",...g})=>{const c=(0,s.wW)(m);return(0,n.useEffect)(()=>{l&&(0,i.SZ)(l,"test",a)},[l,a]),n.createElement("span",{className:(0,t.cx)(c.badge,o),...g},d)},m=d=>({badge:(0,t.css)`
      margin-left: ${d.spacing(1.25)};
      border-radius: ${d.shape.borderRadius(5)};
      background-color: ${d.colors.success.main};
      padding: ${d.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${d.typography.fontWeightMedium};
      font-size: ${d.typography.pxToRem(10)};
    `})},52115:(j,I,e)=>{"use strict";e.d(I,{TA:()=>l,Xz:()=>d,tM:()=>g});var t=e(42844),n=e(27702),i=e(86312),s=e(66310),r=e(73453),m=e(66670);const d=({featureName:f,className:b,children:v,text:y,featureId:E,eventVariant:C="",size:u="md",...D})=>{const P=(0,s.wW)(S=>o(S,u));return(0,n.useEffect)(()=>{(0,i.SZ)(`feature-highlights-${E}`,"test",C)},[C,E]),n.createElement("div",{className:(0,t.cx)(P.box,b),...D},n.createElement(r.J,{name:"rocket",className:P.icon}),n.createElement("div",{className:P.inner},n.createElement("p",{className:P.text},"You\u2019ve discovered a Pro feature! ",y||`Get the Grafana Pro plan to access ${f}.`),n.createElement(m.Qj,{variant:"secondary",size:u,className:P.button,href:"https://grafana.com/profile/org/subscription",target:"__blank",rel:"noopener noreferrer"},"Upgrade")))},o=(f,b)=>{const v=f.shape.borderRadius(2),y=b==="md"?"body":"bodySmall";return{box:(0,t.css)`
      display: flex;
      align-items: center;
      position: relative;
      border-radius: ${v};
      background: ${f.colors.success.transparent};
      padding: ${f.spacing(2)};
      color: ${f.colors.success.text};
      font-size: ${f.typography[y].fontSize};
      text-align: left;
      line-height: 16px;
      margin: ${f.spacing(0,"auto",3,"auto")};
      max-width: ${f.breakpoints.values.xxl}px;
      width: 100%;
    `,inner:(0,t.css)`
      display: flex;
      align-items: center;
      width: 100%;
      justify-content: space-between;
    `,text:(0,t.css)`
      margin: 0;
    `,button:(0,t.css)`
      background-color: ${f.colors.success.main};
      font-weight: ${f.typography.fontWeightLight};
      color: white;

      &:hover {
        background-color: ${f.colors.success.main};
      }

      &:focus-visible {
        box-shadow: none;
        color: ${f.colors.text.primary};
        outline: 2px solid ${f.colors.primary.main};
      }
    `,icon:(0,t.css)`
      margin: ${f.spacing(.5,1,.5,.5)};
    `}},l=({listItems:f,image:b,featureUrl:v,featureName:y,description:E,caption:C,action:u})=>{const D=(0,s.wW)(a);return n.createElement("div",{className:D.container},n.createElement("div",{className:D.content},n.createElement("h3",{className:D.title},"Get started with ",y),E&&n.createElement("h6",{className:D.description},E),n.createElement("ul",{className:D.list},f.map((P,S)=>n.createElement("li",{key:S},n.createElement(r.J,{name:"check",size:"xl",className:D.icon})," ",P))),u?.link&&n.createElement(m.Qj,{variant:"primary",href:u.link},u.text),u?.onClick&&n.createElement(m.zx,{variant:"primary",onClick:u.onClick},u.text),v&&n.createElement(m.Qj,{fill:"text",href:v,className:D.link,target:"_blank",rel:"noreferrer noopener"},"Learn more")),n.createElement("div",{className:D.media},n.createElement("img",{src:h(b),alt:"Feature screenshot"}),C&&n.createElement("p",{className:D.caption},C)))},a=f=>({container:(0,t.css)`
      display: flex;
      justify-content: space-between;
    `,content:(0,t.css)`
      width: 45%;
      margin-right: ${f.spacing(4)};
    `,media:(0,t.css)`
      width: 55%;

      img {
        width: 100%;
      }
    `,title:(0,t.css)`
      color: ${f.colors.text.maxContrast};
    `,description:(0,t.css)`
      color: ${f.colors.text.primary};
      font-weight: ${f.typography.fontWeightLight};
    `,list:(0,t.css)`
      list-style: none;
      margin: ${f.spacing(4,0,2,0)};

      li {
        display: flex;
        align-items: flex-start;
        color: ${f.colors.text.primary};
        padding: ${f.spacing(1,0)};
      }
    `,icon:(0,t.css)`
      color: ${f.colors.success.main};
      margin-right: ${f.spacing(1)};
    `,link:(0,t.css)`
      margin-left: ${f.spacing(2)};
    `,caption:(0,t.css)`
      font-weight: ${f.typography.fontWeightLight};
      margin: ${f.spacing(1,0,0)};
    `}),g=({featureName:f,description:b,featureUrl:v,image:y})=>{const E=(0,s.wW)(c);return n.createElement("div",{className:E.container},n.createElement("h3",{className:E.title},"Get started with ",f),b&&n.createElement("h6",{className:E.description},b),n.createElement(m.Qj,{fill:"text",href:v,target:"_blank",rel:"noreferrer noopener"},"Learn more"),n.createElement("div",{className:E.media},n.createElement("img",{src:h(y),alt:"Feature screenshot"})))},c=f=>({container:(0,t.css)`
      overflow: auto;
      height: 100%;
    `,title:(0,t.css)`
      color: ${f.colors.text.maxContrast};
    `,description:(0,t.css)`
      color: ${f.colors.text.primary};
      font-weight: ${f.typography.fontWeightLight};
    `,media:(0,t.css)`
      width: 100%;
      margin-top: ${f.spacing(2)};

      img {
        width: 100%;
      }
    `}),h=f=>f.startsWith("http")?f:"/public/img/enterprise/highlights/"+f},12969:(j,I,e)=>{"use strict";e.d(I,{B:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(13741),r=e(72625);const m=l=>({Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","d"],description:"Go to Dashboards"},{keys:["g","e"],description:"Go to Explore"},{keys:["g","p"],description:"Go to Profile"},{keys:[`${l} + k`],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:[`${l}+s`],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:[`${l} + o`],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"},{keys:["d","x"],description:"Toggle exemplars in all panel"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","\u2190"],description:"Move time range back"},{keys:["t","\u2192"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]}),d=({onDismiss:l})=>{const a=(0,i.wW)(o),g=(0,n.useMemo)(()=>(0,r.vl)(),[]),c=(0,n.useMemo)(()=>m(g),[g]);return n.createElement(s.u,{title:"Shortcuts",isOpen:!0,onDismiss:l,onClickBackdrop:l},n.createElement("div",{className:a.categories},Object.entries(c).map(([h,f],b)=>n.createElement("div",{className:a.shortcutCategory,key:b},n.createElement("table",{className:a.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:a.shortcutTableCategoryHeader,colSpan:2},h)),f.map((v,y)=>n.createElement("tr",{key:`${b}-${y}`},n.createElement("td",{className:a.shortcutTableKeys},v.keys.map((E,C)=>n.createElement("span",{className:a.shortcutTableKey,key:`${b}-${y}-${C}`},E))),n.createElement("td",{className:a.shortcutTableDescription},v.description)))))))))};function o(l){return{titleDescription:(0,t.css)`
      font-size: ${l.typography.bodySmall.fontSize};
      font-weight: ${l.typography.bodySmall.fontWeight};
      color: ${l.colors.text.disabled};
      padding-bottom: ${l.spacing(2)};
    `,categories:(0,t.css)`
      font-size: ${l.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:(0,t.css)`
      width: 50%;
      font-size: ${l.typography.bodySmall.fontSize};
    `,shortcutTable:(0,t.css)`
      margin-bottom: ${l.spacing(2)};
    `,shortcutTableCategoryHeader:(0,t.css)`
      font-weight: normal;
      font-size: ${l.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:(0,t.css)`
      text-align: left;
      color: ${l.colors.text.disabled};
      width: 99%;
      padding: ${l.spacing(1,2)};
    `,shortcutTableKeys:(0,t.css)`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${l.colors.text.primary};
    `,shortcutTableKey:(0,t.css)`
      display: inline-block;
      text-align: center;
      margin-right: ${l.spacing(.5)};
      padding: 3px 5px;
      font:
        11px Consolas,
        'Liberation Mono',
        Menlo,
        Courier,
        monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${l.colors.border.medium};
      border-radius: ${l.shape.borderRadius(3)};
      color: ${l.colors.text.primary};
      background-color: ${l.colors.background.secondary};
    `}}},12308:(j,I,e)=>{"use strict";e.d(I,{Oh:()=>d,config:()=>n.config,default:()=>s,iE:()=>r});var t=e(9232),n=e(34667);let i=n.config;const s=i,r=()=>i,m=o=>{i={...i,...o}},d=n.config.panels?.debug?.state===t.BV.alpha},97957:(j,I,e)=>{"use strict";e.d(I,{AV:()=>o,FL:()=>h,Hk:()=>f,K3:()=>t,OA:()=>s,QO:()=>a,b0:()=>d,cz:()=>i,gN:()=>c,hD:()=>n,kh:()=>m,yM:()=>r,zF:()=>l});const t=30,n=8,i=24,s="v",r="h",m=4,d=250,o=t*3,l="panel-copy",a=2,g=23763571993,c=40,h="VisualizationSelectPane.ListMode",f="WidgetSelectPane.ListMode"},26473:(j,I,e)=>{"use strict";e.d(I,{h:()=>n,p:()=>i});var t=e(27702);const n=t.createContext(void 0);function i(){const s=(0,t.useContext)(n);if(!s)throw new Error("No GrafanaContext found");return s}},73807:(j,I,e)=>{"use strict";e.d(I,{AT:()=>l,ZR:()=>g,iG:()=>c,t_:()=>a});var t=e(27702),n=e(66117),i=e(87241),s=e(18771),r=e(33877);const m={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},d={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},o={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},l=(h,f="",b)=>({...m,title:h,text:f,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),a=(h,f="",b,v)=>({...o,text:(0,i.i)(f),title:h,id:(0,n.Z)(),traceId:b,component:v,timestamp:Date.now(),showing:!0}),g=(h,f="",b)=>({...d,title:h,text:f,traceId:b,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function c(){const h=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(f,b="")=>{h((0,r.$l)(l(f,b)))},warning:(f,b="",v)=>{h((0,r.$l)(g(f,b,v)))},error:(f,b="",v)=>{h((0,r.$l)(a(f,b,v)))}}),[h])}},66574:(j,I,e)=>{"use strict";e.d(I,{Wz:()=>s.W,contextSrv:()=>i.contextSrv,h$:()=>t.Z,rv:()=>n.r});var t=e(5933),n=e(54788),i=e(91368),s=e(7999)},95116:(j,I,e)=>{"use strict";e.d(I,{H6:()=>v,ZP:()=>y});var t=e(89949),n=e(56812),i=e(19484),s=e(10864);const r=R=>{const O=(0,s.F)().getInstanceSettings(R.datasourceName);return{id:R.ts.toString(),createdAt:R.ts,datasourceName:R.datasourceName,datasourceUid:O?.uid||"",starred:R.starred,comment:R.comment,queries:R.queries}},m=R=>{if(!(0,s.F)().getInstanceSettings({uid:R.datasourceUid}))throw new Error("Datasource not found.");return{ts:R.createdAt,datasourceName:R.datasourceName,starred:R.starred,comment:R.comment,queries:R.queries}};var d=e(7990);function o(R,O,T,U,L){const V=g(R,T),w=c(V,U),K=L?a(w,L):w;return h(K,O)}const l=(R,O)=>{const T=new Date,U=new Date(T.setDate(T.getDate()-R));return O?U.setHours(24,0,0,0):U.setHours(0,0,0,0)};function a(R,O){const T=l(O[0],!0),U=l(O[1],!1);return R.filter(L=>L.createdAt<T&&L.createdAt>U)}function g(R,O){return O.length>0?R.filter(T=>O.includes(T.datasourceName)):R}function c(R,O){return R.filter(T=>T.comment.includes(O)?!0:T.queries.filter(L=>Object.values((0,t.omit)(L,["datasource","key","refId","hide","queryType"])).some(V=>V?.toString().includes(O))).length>0)}const h=(R,O)=>{let T;return O===d.A.Ascending&&(T=(U,L)=>U.createdAt<L.createdAt?-1:U.createdAt>L.createdAt?1:0),O===d.A.Descending&&(T=(U,L)=>U.createdAt<L.createdAt?1:U.createdAt>L.createdAt?-1:0),O===d.A.DatasourceZA&&(T=(U,L)=>U.datasourceName<L.datasourceName?-1:U.datasourceName>L.datasourceName?1:0),O===d.A.DatasourceAZ&&(T=(U,L)=>U.datasourceName<L.datasourceName?1:U.datasourceName>L.datasourceName?-1:0),R.sort(T)},f={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"},b="grafana.explore.richHistory",v=1e4;class y{async getRichHistory(O){const T=D().map(r),U=O.starred?T.filter(V=>V.starred===!0):T,L=o(U,O.sortOrder,O.datasourceFilters,O.search,[O.from,O.to]);return{richHistory:L,total:L.length}}async addToRichHistory(O){const T=Date.now(),U={id:T.toString(),createdAt:T,...O},L=m(U),V=C(D()),w=L.queries.map(k=>(0,t.omit)(k,["key","refId"])),K=V.length>0&&V[0].queries.map(k=>(0,t.omit)(k,["key","refId"]));if((0,t.isEqual)(w,K)){const k=new Error("Entry already exists");throw k.name=i.j.DuplicatedEntry,k}const{queriesToKeep:B,limitExceeded:W}=u(V),_=[L,...B];try{n.Z.setObject(b,_)}catch(k){if(k instanceof Error&&k.name==="QuotaExceededError")M(i.j.StorageFull,`Saving rich history failed: ${k.message}`);else throw k}return W?{warning:{type:i.V.LimitExceeded,message:`Query history reached the limit of ${v}. Old, not-starred items have been removed.`},richHistoryQuery:U}:{richHistoryQuery:U}}async deleteAll(){n.Z.delete(b)}async deleteRichHistory(O){const T=parseInt(O,10),L=n.Z.getObject(b,[]).filter(V=>V.ts!==T);n.Z.setObject(b,L)}async updateStarred(O,T){return E(O,U=>U.starred=T)}async updateComment(O,T){return E(O,U=>U.comment=T)}async getSettings(){return{activeDatasourceOnly:n.Z.getObject(f.activeDatasourceOnly,!1),retentionPeriod:n.Z.getObject(f.retentionPeriod,7),starredTabAsFirstTab:n.Z.getBool(f.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.Z.getObject(f.datasourceFilters,[]).map(O=>O.value)}}async updateSettings(O){n.Z.set(f.activeDatasourceOnly,O.activeDatasourceOnly),n.Z.set(f.retentionPeriod,O.retentionPeriod),n.Z.set(f.starredTabAsFirstTab,O.starredTabAsFirstTab),n.Z.setObject(f.datasourceFilters,(O.lastUsedDatasourceFilters||[]).map(T=>({value:T})))}}function E(R,O){const T=parseInt(R,10),U=n.Z.getObject(b,[]),L=(0,t.find)(U,{ts:T});if(!L)throw new Error("Rich history item not found.");return O(L),n.Z.setObject(b,U),r(L)}function C(R){const O=n.Z.getObject(f.retentionPeriod,7),T=l(O,!1);return R.filter(U=>U.ts>T||U.starred===!0)||[]}function u(R){let O=!1,T=R.length-1;for(;T>=0&&R.length>=v;)R[T].starred||(R.splice(T,1),O=!0),T--;return{queriesToKeep:R,limitExceeded:O}}function D(){const R=n.Z.getObject(b,[]);return P(R)}function P(R){return R.map(T=>{const U=T.queries.map((L,V)=>S(T,L,V));return{...T,queries:U}})}function S(R,O,T){const U="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof O=="object"?O:x(O)?JSON.parse(O):{expr:O,refId:U[T]}}function x(R){try{JSON.parse(R)}catch{return!1}return!0}function M(R,O){const T=new Error(O);throw T.name=R,T}},19484:(j,I,e)=>{"use strict";e.d(I,{V:()=>n,j:()=>t});var t=(i=>(i.StorageFull="StorageFull",i.DuplicatedEntry="DuplicatedEntry",i))(t||{}),n=(i=>(i.LimitExceeded="LimitExceeded",i))(n||{})},19889:(j,I,e)=>{"use strict";e.d(I,{b:()=>b,X:()=>v});var t=e(34667),n=e(66574),i=e(7990),s=e(95116),r=e(78209),m=e(73289),d=e(10864),o=e(97662);const l=y=>{const E=(0,d.F)().getInstanceSettings({uid:y.datasourceUid});return{id:y.uid,createdAt:y.createdAt*1e3,datasourceName:E?.name||"",datasourceUid:y.datasourceUid,starred:y.starred,comment:y.comment,queries:y.queries}},a=y=>({uid:y.id,createdAt:Math.floor(y.createdAt/1e3),datasourceUid:y.datasourceUid,starred:y.starred,comment:y.comment,queries:y.queries});class g{constructor(){this.preferenceService=new o.y("user")}async addToRichHistory(E){const{result:C}=await(0,m.i)().post("/api/query-history",{dataSourceUid:E.datasourceUid,queries:E.queries});return{richHistoryQuery:l(C)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(E){(0,m.i)().delete(`/api/query-history/${E}`)}async getRichHistory(E){const C=c(E);let u="query-history-get-all";E.starred&&(u="query-history-get-starred");const P=(await(0,r.n)((0,m.i)().fetch({method:"GET",url:`/api/query-history?${C}`,requestId:u}))).data,S=(P.result.queryHistory||[]).map(l),x=P.result.totalCount||0;return{richHistory:S,total:x}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(E,C){const u=await(0,m.i)().patch(`/api/query-history/${E}`,{comment:C});return l(u.result)}updateSettings(E){return this.preferenceService.patch({queryHistory:{homeTab:E.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(E,C){let u;return C?u=await(0,m.i)().post(`/api/query-history/star/${E}`):u=await(0,m.i)().delete(`/api/query-history/star/${E}`),l(u.result)}}function c(y){let E=`${y.datasourceFilters.map(C=>{const u=(0,d.F)().getInstanceSettings(C).uid;return`datasourceUid=${encodeURIComponent(u)}`}).join("&")}`;if(y.search&&(E=E+`&searchString=${y.search}`),y.sortOrder&&(E=E+`&sort=${y.sortOrder===i.A.Ascending?"time-asc":"time-desc"}`),!y.starred){const C=y.from===0?"now":`now-${y.from}d`,u=y.to===0?"now":`now-${y.to}d`;E=E+`&to=${C}`,E=E+`&from=${u}`}return E=E+"&limit=100",E=E+`&page=${y.page||1}`,y.starred&&(E=E+`&onlyStarred=${y.starred}`),E}const h=new s.ZP,f=new g,b=()=>t.config.queryHistoryEnabled?f:h,v=()=>t.config.queryHistoryEnabled?{availableFilters:[i.A.Descending,i.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.contextSrv.isSignedIn}:{availableFilters:[i.A.Descending,i.A.Ascending,i.A.DatasourceAZ,i.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},48105:(j,I,e)=>{"use strict";e.d(I,{q:()=>i});var t=e(18771),n=e(86809);const i=s=>{const r=(0,t.useSelector)(m=>m.navIndex);return(0,n.ht)(r,s)}},89033:(j,I,e)=>{"use strict";e.d(I,{K:()=>s});var t=e(27702),n=e(7662),i=e(26129);function s(){const{search:r}=(0,n.TH)(),m=(0,t.useMemo)(()=>(0,i.Ox)(r||""),[r]),d=(0,t.useCallback)((o,l)=>i.E1.partial(o,l),[]);return[m,d]}},16832:(j,I,e)=>{"use strict";e.d(I,{D_:()=>l,a2:()=>o});const t="en-US",n="fr-FR",i="es-ES",s="de-DE",r="zh-Hans",m="pseudo-LOCALE",d=null,o=[{code:t,name:"English",loader:()=>e.e(7424).then(e.t.bind(e,67424,19))},{code:n,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,66419,19))},{code:i,name:"Espa\xF1ol",loader:()=>e.e(4253).then(e.t.bind(e,4253,19))},{code:s,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:r,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],l=o.map(a=>a.code)},65322:(j,I,e)=>{"use strict";e.d(I,{$q:()=>f,cC:()=>g,t:()=>h,uC:()=>l});var t=e(62937),n=e(13795),i=e(27702),s=e(83399),r=e(92046),m=e(16832);const d=b=>b.split("-")[0].toLowerCase(),o={type:"backend",init(){},async read(b,v,y){let E=m.a2.find(u=>u.code===b);if(E||(E=m.a2.find(u=>d(u.code)===d(b))),!E)return y(new Error("No message loader available for "+b),null);const C=await E.loader();y(null,C)}};function l(b){const v={partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"};let y=t.ZP;if(b==="detect"){y=y.use(n.Z);const E={order:["navigator"],caches:[]};v.detection=E}else v.lng=m.D_.includes(b)?b:void 0;return y.use(o).use(s.Db).init(v)}function a(b){const v=VALID_LANGUAGES.includes(b)?b:void 0;return i18n.changeLanguage(v)}const g=b=>i.createElement(r.c,{...b}),c=t.ZP.t,h=(b,v,y)=>c(b,v,y),f=(b,v={})=>typeof b=="string"?f(new Date(b),v):new Intl.DateTimeFormat(t.ZP.language,v).format(b)},54788:(j,I,e)=>{"use strict";e.d(I,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},4021:(j,I,e)=>{"use strict";e.d(I,{$l:()=>o,Av:()=>f,F6:()=>g,Jk:()=>c,VW:()=>h,ad:()=>l,hS:()=>a,mE:()=>v,vo:()=>y});var t=e(34099),n=e(18771);const i=25,s="notifications",r=`${s}/lastRead`,m={byId:D(),lastRead:Number.parseInt(window.localStorage.getItem(r)??`${Date.now()}`,10)},d=(0,t.oM)({name:"appNotifications",initialState:m,reducers:{notifyApp:(S,{payload:x})=>{Object.values(S.byId).some(M=>E(x,M)&&M.showing)||(S.byId[x.id]=x,P(S.byId))},hideAppNotification:(S,{payload:x})=>{x in S.byId&&(S.byId[x].showing=!1,P(S.byId))},clearNotification:(S,{payload:x})=>{delete S.byId[x],P(S.byId)},clearAllNotifications:S=>{S.byId={},P(S.byId)},readAllNotifications:(S,{payload:x})=>{S.lastRead=x}}}),{notifyApp:o,hideAppNotification:l,clearNotification:a,clearAllNotifications:g,readAllNotifications:c}=d.actions,h=d.reducer,f=S=>S.lastRead,b=S=>Object.values(S.byId).sort((x,M)=>M.timestamp-x.timestamp),v=S=>b(S).filter(C),y=S=>Object.values(S.byId).filter(x=>x.showing);function E(S,x){return S.icon===x.icon&&S.severity===x.severity&&S.text===x.text&&S.title===x.title}function C(S){return S.severity===n.AppNotificationSeverity.Warning||S.severity===n.AppNotificationSeverity.Error}function u(S){return typeof S=="object"&&S!==null&&"id"in S&&"icon"in S&&"title"in S&&"text"in S}function D(){const S=window.localStorage.getItem(s);if(!S)return{};const x=JSON.parse(S);return Object.values(x).every(M=>u(M))?x:{}}function P(S){const x=Object.values(S).filter(C).sort((M,R)=>R.timestamp-M.timestamp).slice(0,i).reduce((M,R)=>(M[R.id]={id:R.id,severity:R.severity,icon:R.icon,title:R.title,text:R.text,traceId:R.traceId,timestamp:R.timestamp,showing:R.showing},M),{});try{window.localStorage.setItem(s,JSON.stringify(x))}catch(M){console.error("Unable to persist notifications to local storage"),console.error(M)}}},78467:(j,I,e)=>{"use strict";e.d(I,{Lk:()=>l,OQ:()=>o,V4:()=>g,gd:()=>a});var t=e(34099),n=e(34667),i=e(51391);const s=n.config.bootData?.navTree??[];function r(c){return c.map(h=>{const f=h.children&&r(h.children);return{...h,children:f,text:(0,i.Y)(h.id)??h.text,subTitle:(0,i.L)(h.id)??h.subTitle,emptyMessage:(0,i.Y)(h.emptyMessageId)}})}const m="starred/",d=(0,t.oM)({name:"navBarTree",initialState:()=>r(n.config.bootData?.navTree??[]),reducers:{setStarred:(c,h)=>{const f=c.find(C=>C.id==="starred"),{id:b,title:v,url:y,isStarred:E}=h.payload;if(f)if(E){f.children||(f.children=[]);const C={id:m+b,text:v,url:y};f.children.push(C),f.children.sort((u,D)=>u.text.localeCompare(D.text))}else{const C=f.children?.findIndex(u=>u.id===m+b)??-1;C>-1&&f?.children?.splice(C,1)}},updateDashboardName:(c,h)=>{const{id:f,title:b,url:v}=h.payload,y=c.find(E=>E.id==="starred");if(y){const E=y.children?.find(C=>C.id===f);E&&(E.text=b,E.url=v,y.children?.sort((C,u)=>C.text.localeCompare(u.text)))}},removePluginFromNavTree:(c,h)=>{const f="plugin-page-"+h.payload.pluginID,b=c.findIndex(v=>v.id===f);b>-1&&c.splice(b,1)}}}),{setStarred:o,removePluginFromNavTree:l,updateDashboardName:a}=d.actions,g=d.reducer},34139:(j,I,e)=>{"use strict";e.d(I,{Cu:()=>d,G4:()=>f,H7:()=>c,Qz:()=>m,RL:()=>g});var t=e(34099),n=e(89949),i=e.n(n),s=e(12308),r=e(51391);const m="home";function d(){const b={},v=(0,n.cloneDeep)(s.default.bootData.navTree),y=v.find(C=>C.id===m),E=v.filter(C=>C.id!==m);return y&&o(b,[y]),o(b,E,b[m]),b}function o(b,v,y){const E=[];for(const C of v){const u={...C,text:(0,r.Y)(C.id)??C.text,subTitle:(0,r.L)(C.id)??C.subTitle,emptyMessage:(0,r.Y)(C.emptyMessageId),parentItem:y};u.id&&(b[u.id]=u),u.children&&o(b,u.children,u),E.push(u)}y&&(y.children=E),b["not-found"]={...l("Page not found","404 Error").node},b.error={...l("Page error","An unexpected error").node}}function l(b,v){const y={text:b,subTitle:v,icon:"exclamation-triangle"};return{node:y,main:y}}const a={},g=(0,t.PH)("navIndex/updateNavIndex"),c=(0,t.PH)("navIndex/updateConfigurationSubtitle"),h=(b,v)=>({...b,parentItem:{...b.parentItem,text:b.parentItem?.text??"",subTitle:v}}),f=(b=a,v)=>{if(g.match(v)){let E=function(D){if(D.children)for(const P of D.children)C[P.id]={...P,parentItem:D};D.parentItem&&E(D.parentItem)};var y=E;const C={},u=v.payload;return E(u),{...b,...C}}else if(c.match(v)){const E=`Organization: ${v.payload}`;return{...b,cfg:{...b.cfg,subTitle:E},datasources:h(b.datasources,E),correlations:h(b.correlations,E),users:h(b.users,E),teams:h(b.teams,E),plugins:h(b.plugins,E),"org-settings":h(b["org-settings"],E),apikeys:h(b.apikeys,E)}}return b}},86809:(j,I,e)=>{"use strict";e.d(I,{ht:()=>r,vw:()=>m});var t=e(34667),n=e(40127),i=e(34139);const s=()=>{const l={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:l,main:l}},r=(l,a,g,c=!1)=>{if(l[a]){const h=l[a],f=c?h:m(h),b=d(f,a);return{node:h,main:b}}return g||s()};function m(l){return t.config.featureToggles.nestedFolders&&l.id===n.y3?l:l.parentItem&&l.parentItem.id!==i.Qz?m(l.parentItem):l}function d(l,a){return l.id===a?{...l,active:!0}:l.children&&l.children.length>0?{...l,children:l.children.map(g=>d(g,a))}:l}const o=l=>`${l.main.text}${l.node.text?": "+l.node.text:""}`},97662:(j,I,e)=>{"use strict";e.d(I,{y:()=>n});var t=e(45937);class n{constructor(s){this.resourceUri=s}update(s){return t.ae.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.ae.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.ae.get(`/api/${this.resourceUri}/preferences`)}}},45937:(j,I,e)=>{"use strict";e.d(I,{y$:()=>le,ae:()=>ce,i:()=>q});var t=e(69966),n=e(78209),i=e(48592),s=e(19973),r=e(91826),m=e(91053),d=e(32364),o=e(39343),l=e(22479),a=e(76970),g=e(19985),c=e(56469),h=e(24321),f=e(56361),b=e(23403),v=e(90581),y=e(32900),E=e(66117),C=e(3935),u=e(68246),D=e(34667),P=e(5933),S=e(12308),x=e(59281),M=e(42844),R=e(27702),O=e(66310),T=e(52995),U=e(86064),L=e(66670),V=e(80402),w=e(32173);const K=pe=>{const re=(0,O.l4)(),ie=B(re),Se=(0,w.J)(re),ye=!!pe.maxConcurrentSessions,Ce=()=>{window.location.reload()};return R.createElement(T.h_,null,R.createElement("div",{className:Se.modal},R.createElement(U.v,{title:"You have been automatically signed out",severity:"warning",className:ie.infobox},R.createElement("div",{className:ie.text},R.createElement("p",null,"Your session token was automatically revoked because you have reached",R.createElement("strong",null,` the maximum number of ${ye?pe.maxConcurrentSessions:""} concurrent sessions `),"for your account."),R.createElement("p",null,R.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),R.createElement(L.zx,{size:"md",variant:"primary",onClick:Ce},"Sign in"))),R.createElement("div",{className:(0,M.cx)(Se.modalBackdrop,ie.backdrop)}))},B=(0,V.B)(pe=>({infobox:(0,M.css)`
      margin-bottom: 0;
    `,text:(0,M.css)`
      margin: ${pe.spacing(1,0,2)};
    `,backdrop:(0,M.css)`
      background-color: ${pe.colors.background.canvas};
      opacity: 0.8;
    `}));var W=e(43620),_=e(26631),k=e(76897),A=(pe=>(pe[pe.Pending=0]="Pending",pe[pe.InProgress=1]="InProgress",pe[pe.Done=2]="Done",pe))(A||{});class z{constructor(re=!1){this.state={},this.queue=new t.x,this.updates=new t.x,this.add=(ie,Se)=>this.queue.next({id:ie,options:Se,state:0}),this.setInProgress=ie=>this.queue.next({id:ie,state:1}),this.setDone=ie=>this.queue.next({id:ie,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=ie=>{const Se=Object.keys(ie).filter(Ce=>ie[Ce].state===1).length;return{noOfPending:Object.keys(ie).filter(Ce=>ie[Ce].state===0).length,noOfInProgress:Se,state:ie}},this.publishUpdate=(ie,Se)=>{this.printState(ie,Se),this.updates.next(ie)},this.printState=(ie,Se)=>{if(!Se)return;const ye=Object.keys(ie.state).reduce((Ce,de)=>{const we={id:de,state:ie.state[de].state};return Ce.push(we),Ce},[]);console.log("FetchQueue noOfStarted",ie.noOfInProgress),console.log("FetchQueue noOfNotStarted",ie.noOfPending),console.log("FetchQueue state",ye)},this.queue.subscribe(ie=>{const{id:Se,state:ye,options:Ce}=ie;if(this.state[Se]||(this.state[Se]={state:0,options:{url:""}}),ye===2){delete this.state[Se];const we=this.getUpdate(this.state);this.publishUpdate(we,re);return}this.state[Se].state=ye,Ce&&(this.state[Se].options=Ce);const de=this.getUpdate(this.state);this.publishUpdate(de,re)})}}var H=e(9045);class Q{constructor(re,ie,Se){const ye=Se?.http2Enabled?1e3:5;re.getUpdates().pipe((0,f.h)(({noOfPending:Ce})=>Ce>0),(0,H.b)(({state:Ce,noOfInProgress:de})=>{const we=Object.keys(Ce).filter($e=>Ce[$e].state===A.Pending&&!(0,k.mu)(Ce[$e].options.url)).reduce(($e,Qe)=>{const tt={id:Qe,options:Ce[Qe].options};return $e.push(tt),$e},[]),_e=Object.keys(Ce).filter($e=>Ce[$e].state===A.Pending&&(0,k.mu)(Ce[$e].options.url)).reduce(($e,Qe)=>{const tt={id:Qe,options:Ce[Qe].options};return $e.push(tt),$e},[]),Je=Math.max(ye-de-we.length,0),Ue=_e.slice(0,Je);return we.concat(Ue)})).subscribe(({id:Ce,options:de})=>{ie.add(Ce,de)})}}class X{constructor(re,ie){this.queue=new t.x,this.responses=new t.x,this.add=(Se,ye)=>{this.queue.next({id:Se,options:ye})},this.getResponses=Se=>this.responses.asObservable().pipe((0,f.h)(ye=>ye.id===Se)),this.queue.subscribe(Se=>{const{id:ye,options:Ce}=Se;re.setInProgress(ye),this.responses.next({id:ye,observable:ie(Ce)})})}}var te=e(91368);const oe="cancel_all_requests_request_id",Z="grafana-trace-id";class le{constructor(re){this.inFlightRequests=new t.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new t.x,this._tokenRotationInProgress=null,this.dependencies={fromFetch:d.U,appEvents:P.Z,contextSrv:te.contextSrv,logout:()=>{te.contextSrv.setLoggedOut()}},re&&(this.dependencies={...this.dependencies,...re}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new z,this.responseQueue=new X(this.fetchQueue,this.internalFetch),new Q(this.fetchQueue,this.responseQueue,(0,S.iE)())}async request(re){return await(0,n.n)(this.fetch(re).pipe((0,o.U)(ie=>ie.data)))}fetch(re){const ie=(0,E.Z)(),Se=this.fetchQueue;return new i.y(ye=>{const Ce=new s.w0;return Ce.add(this.responseQueue.getResponses(ie).subscribe(de=>{Ce.add(de.observable.subscribe(ye))})),this.fetchQueue.add(ie,re),function(){Se.setDone(ie),Ce.unsubscribe()}})}internalFetch(re){re.requestId&&this.inFlightRequests.next(re.requestId),re=this.parseRequestOptions(re);const ie=(0,x.v)();return ie!==null&&ie!==""&&(re.headers||(re.headers={}),D.config.jwtUrlLogin&&D.config.jwtHeaderName&&(re.headers[D.config.jwtHeaderName]=`${ie}`)),this.getFromFetchStream(re).pipe(this.handleStreamResponse(re),this.handleStreamError(re),this.handleStreamCancellation(re))}resolveCancelerIfExists(re){this.inFlightRequests.next(re)}cancelAllInFlightRequests(){this.inFlightRequests.next(oe)}async datasourceRequest(re){return(0,n.n)(this.fetch(re))}parseRequestOptions(re){const ie=this.dependencies.contextSrv.user?.orgId;return re.retry=re.retry??0,(0,k.R8)(re.url)&&(ie&&(re.headers=re.headers??{},re.headers["X-Grafana-Org-Id"]=ie),re.url.startsWith("/")&&(re.url=re.url.substring(1)),re.headers?.Authorization&&(re.headers["X-DS-Authorization"]=re.headers.Authorization,delete re.headers.Authorization),this.noBackendCache&&(re.headers=re.headers??{},re.headers["X-Grafana-NoCache"]="true")),re.hideFromInspector===void 0&&(re.hideFromInspector=(0,k.R8)(re.url)&&!(0,k.mu)(re.url)),re}getFromFetchStream(re){const ie=(0,_.Xv)(re),Se=(0,_.nS)(re);return this.dependencies.fromFetch(ie,Se).pipe((0,l.z)(async ye=>{const{status:Ce,statusText:de,ok:we,headers:_e,url:Je,type:Ue,redirected:$e}=ye,Qe=re.responseType??((0,_.rZ)(_e)?"json":void 0),tt=await(0,_.aO)(ye,Qe);return{status:Ce,statusText:de,ok:we,data:tt,headers:_e,url:Je,type:Ue,redirected:$e,config:re,traceId:ye.headers.get(Z)??void 0}}))}showApplicationErrorAlert(re){}showSuccessAlert(re){const{config:ie}=re;if(ie.showSuccessAlert===!1||ie.showSuccessAlert===void 0&&(ie.method==="GET"||(0,k.mu)(ie.url)||!(0,k.R8)(ie.url)))return;const Se=re.data;Se?.message&&this.dependencies.appEvents.emit(C.SI.alertSuccess,[Se.message])}showErrorAlert(re,ie){if(re.showErrorAlert===!1||re.showErrorAlert===void 0&&((0,k.mu)(re.url)||!(0,k.R8)(re.url)))return;let Se="",ye=ie.data.message;ye==="Unexpected error"&&ie.message&&(ye=ie.message),ye.length>80&&(Se=ye,ye="Error"),ie.status===422&&(Se=ie.data.message,ye="Validation failed"),this.dependencies.appEvents.emit(ie.status<500?C.SI.alertWarning:C.SI.alertError,[ye,Se,ie.data.traceID])}processRequestError(re,ie){return ie.data=ie.data??{message:"Unexpected error"},typeof ie.data=="string"&&(ie.data={message:ie.data,error:ie.statusText,response:ie.data}),ie.data&&!ie.data.message&&typeof ie.data.error=="string"&&(ie.data.message=ie.data.error),ie.data.message&&setTimeout(()=>{ie.isHandled||this.showErrorAlert(re,ie)},50),this.inspectorStream.next(ie),ie}handleStreamResponse(re){return ie=>ie.pipe((0,o.U)(Se=>{if(!Se.ok){const{status:ye,statusText:Ce,data:de}=Se;throw{status:ye,statusText:Ce,data:de,config:re,traceId:Se.headers.get(Z)??void 0}}return Se}),(0,a.b)(Se=>{this.showSuccessAlert(Se),this.inspectorStream.next(Se)}))}handleStreamError(re){const{isSignedIn:ie}=this.dependencies.contextSrv.user;return Se=>Se.pipe((0,g.a)(ye=>ye.pipe((0,l.z)((Ce,de)=>{const we=de===0&&re.retry===0;if(Ce.status===401&&(0,k.R8)(re.url)&&we&&ie){if(Ce.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new W.Dn({component:K,props:{maxConcurrentSessions:Ce.data?.error?.maxConcurrentSessions}})),(0,r._)(()=>Ce);let _e=D.config.featureToggles.clientTokenRotation?this.rotateToken():this.loginPing();return(0,m.D)(_e).pipe((0,c.K)(Je=>(Je.status===401&&this.dependencies.logout(),(0,r._)(Je))))}return(0,r._)(Ce)}))),(0,c.K)(ye=>(0,r._)(()=>this.processRequestError(re,ye))))}handleStreamCancellation(re){return ie=>ie.pipe((0,h.R)(this.inFlightRequests.pipe((0,f.h)(Se=>{let ye=!1;return re&&re.requestId&&re.requestId===Se&&(ye=!0),Se===oe&&(ye=!0),ye}))),(0,b.T)(()=>({type:u.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:re})))}getInspectorStream(){return this.inspectorStream}async get(re,ie,Se,ye){return this.request({...ye,method:"GET",url:re,params:ie,requestId:Se})}async delete(re,ie,Se){return this.request({...Se,method:"DELETE",url:re,data:ie})}async post(re,ie,Se){return this.request({...Se,method:"POST",url:re,data:ie})}async patch(re,ie,Se){return this.request({...Se,method:"PATCH",url:re,data:ie})}async put(re,ie,Se){return this.request({...Se,method:"PUT",url:re,data:ie})}withNoBackendCache(re){return this.noBackendCache=!0,re().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,v.x)(()=>{this._tokenRotationInProgress=null}),(0,y.B)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(re){return this.get("/api/search",re)}getDashboardByUid(re){return this.get(`/api/dashboards/uid/${re}`)}validateDashboard(re){const ie=JSON.stringify(re,ne,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:ie},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(re){return this.get(`/api/public/dashboards/${re}`)}getFolderByUid(re,ie={}){const Se=new URLSearchParams;return ie.withAccessControl&&Se.set("accesscontrol","true"),this.get(`/api/folders/${re}?${Se.toString()}`)}}const ce=new le,q=()=>ce;function ne(pe,re){if(!(typeof re=="number"&&!Number.isFinite(re)))return re}},91368:(j,I,e)=>{"use strict";e.d(I,{Wg:()=>o,contextSrv:()=>g});var t=e(89949),n=e.n(t),i=e(76305),s=e(73289),r=e(80978),m=e(18771),d=e(12308);const o="auto";class l{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},d.default.bootData.user&&(0,t.extend)(this,d.default.bootData.user)}}class a{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,d.default.bootData||(d.default.bootData={user:{},settings:{},navTree:[]}),this.user=new l,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=d.default.minRefreshInterval,this.canScheduleRotation()&&this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,s.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(f){console.error(f)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(f){return f==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===f}accessControlEnabled(){return d.default.rbacEnabled}licensedAccessControlEnabled(){return(0,r.v)("accesscontrol")&&d.default.rbacEnabled}hasPermissionInMetadata(f,b){return this.accessControlEnabled()?!!b.accessControl?.[f]:!0}hasPermission(f){return this.accessControlEnabled()?!!this.user.permissions?.[f]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(f){return!d.default.minRefreshInterval||f===o?!0:i.intervalToMs(f)>=i.intervalToMs(d.default.minRefreshInterval)}getValidInterval(f){return this.isAllowedInterval(f)?f:d.default.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(m.AccessControlAction.DataSourcesExplore)&&d.default.exploreEnabled:(this.isEditor||d.default.viewersCanEdit)&&d.default.exploreEnabled}hasAccess(f,b){return this.accessControlEnabled()?this.hasPermission(f):b}hasAccessInMetadata(f,b,v){return this.accessControlEnabled()?this.hasPermissionInMetadata(f,b):v}evaluatePermission(f,b){return this.accessControlEnabled()?b.some(v=>this.hasPermission(v))?[]:["Reject"]:f()}scheduleTokenRotationJob(){if(this.canScheduleRotation()){let f=this.getSessionExpiry();if(f===0){this.rotateToken().then();return}let v=(f-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if(this.getSessionExpiry()>f){this.scheduleTokenRotationJob();return}this.rotateToken().then()},v)}}canScheduleRotation(){if(!this.isSignedIn||!d.default.featureToggles.clientTokenRotation)return!1;const f=new URLSearchParams(window.location.search);return!(f.get("render")||f.get("auth_token"))}cancelTokenRotationJob(){d.default.featureToggles.clientTokenRotation&&this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch(d.default.appSubUrl+"/api/user/auth-tokens/rotate",{method:"POST"}).then(f=>{if(f.status===200){this.scheduleTokenRotationJob();return}if(f.status===401){this.setLoggedOut();return}}).catch(f=>{console.error(f)})}getSessionExpiry(){const f=document.cookie.split("; ").find(v=>v.startsWith("grafana_session_expiry="));if(!f)return 0;let b=f.split("=").at(1);return b?parseInt(b,10):0}}let g=new a;const c=h=>{throw new Error("contextSrv can be only overridden in test environment")}},6872:(j,I,e)=>{"use strict";e.d(I,{Z:()=>o});var t=e(89949),n=e.n(t),i=e(73289),s=e(12308),r=e(56812);class m{constructor(){}addDashboardImpression(a){const g=this.impressionKey();let c=[];r.Z.exists(g)&&(c=JSON.parse(r.Z.get(g)),(0,t.isArray)(c)||(c=[])),c=c.filter(h=>a!==h),c.unshift(a),c.length>50&&c.pop(),r.Z.set(g,JSON.stringify(c))}async convertToUIDs(){let a=this.getImpressions();const g=(0,t.filter)(a,h=>(0,t.isNumber)(h));if(!g.length)return;const c=await(0,i.i)().get(`/api/dashboards/ids/${g.join(",")}`);r.Z.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(a,h=>(0,t.isString)(h)),...c]))}getImpressions(){const a=r.Z.get(this.impressionKey())||"[]";return JSON.parse(a)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),g=>(0,t.isString)(g))}impressionKey(){return"dashboard_impressions-"+s.default.bootData.user.orgId}}const o=new m},70828:(j,I,e)=>{"use strict";e.d(I,{L:()=>d,X:()=>o});var t=e(11391),n=e(32713),i=e(5933),s=e(12308),r=e(66574),m=e(97662);async function d(l,a){const g=s.config.theme2,c=(0,t.j)(l);if(i.Z.publish(new n.hD(c)),g.colors.mode!==c.colors.mode){const b=document.createElement("link");b.rel="stylesheet",b.href=s.config.bootData.themePaths[c.colors.mode],b.onload=()=>{const v=document.getElementsByTagName("link");for(let y=0;y<v.length;y++){const E=v[y];E.href&&E.href.includes(`build/grafana.${g.colors.mode}`)&&E.remove()}},document.head.insertBefore(b,document.head.firstChild)}if(a||!r.contextSrv.isSignedIn)return;const h=new m.y("user"),f=await h.load();await h.update({...f,theme:c.colors.mode})}async function o(l){const a=s.config.theme2;d(a.isDark?"light":"dark",l)}},56812:(j,I,e)=>{"use strict";e.d(I,{Z:()=>i});class t{get(r){return window.localStorage[r]}set(r,m){window.localStorage[r]=m}getBool(r,m){return m!==void 0&&!this.exists(r)?m:window.localStorage[r]==="true"}getObject(r,m){let d=m;if(this.exists(r)){const o=window.localStorage[r];try{d=JSON.parse(o)}catch(l){console.error(`Error parsing store object: ${r}. Returning default: ${m}. [${l}]`)}}return d}setObject(r,m){let d;try{d=JSON.stringify(m)}catch(o){throw new Error(`Could not stringify object: ${r}. [${o}]`)}try{this.set(r,d)}catch(o){const l=new Error(`Could not save item in localStorage: ${r}. [${o}]`);throw o instanceof Error&&(l.name=o.name),l}return!0}exists(r){return window.localStorage[r]!==void 0}delete(r){window.localStorage.removeItem(r)}}const i=new t},7999:(j,I,e)=>{"use strict";e.d(I,{W:()=>o,Z:()=>l});var t=e(89949),n=e.n(t),i=e(95676),s=e(21609);function r(a,g){if(!a)return!1;if(a[0]==="/"){const c=(0,i.jO)(a);return g.match(c)!=null}return a===g}function m(a){return a===0?.001:a/10}function d(a){return a?{colors:[{opacity:0},{opacity:a/10}]}:null}function o(a,g,c){for(let h=0;h<a.length;h++){const f=a[h],b=g.yaxes,v=f.yaxis||1,y=b[v-1],E=(0,s.Cf)(y.format);(0,t.isNumber)(g.decimals)?f.updateLegendValues(E,g.decimals):(0,t.isNumber)(y.decimals)?f.updateLegendValues(E,y.decimals+1):f.updateLegendValues(E,null)}}class l{constructor(g){this.datapoints=g.datapoints,this.label=g.alias,this.id=g.alias,this.alias=g.alias,this.aliasEscaped=(0,t.escape)(g.alias),this.color=g.color,this.bars={fillColor:g.color},this.valueFormater=(0,s.Cf)("none"),this.stats={},this.legend=!0,this.unit=g.unit,this.dataFrameIndex=g.dataFrameIndex,this.fieldIndex=g.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(g){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let c=0;c<g.length;c++){const h=g[c];r(h.alias,this.alias)&&(h.lines!==void 0&&(this.lines.show=h.lines),h.dashes!==void 0&&(this.dashes.show=h.dashes,this.lines.lineWidth=0),h.points!==void 0&&(this.points.show=h.points),h.bars!==void 0&&(this.bars.show=h.bars),h.fill!==void 0&&(this.lines.fill=m(h.fill)),h.fillGradient!==void 0&&(this.lines.fillColor=d(h.fillGradient)),h.stack!==void 0&&(this.stack=h.stack),h.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:h.linewidth,this.dashes.lineWidth=h.linewidth),h.dashLength!==void 0&&(this.dashes.dashLength[0]=h.dashLength),h.spaceLength!==void 0&&(this.dashes.dashLength[1]=h.spaceLength),h.nullPointMode!==void 0&&(this.nullPointMode=h.nullPointMode),h.pointradius!==void 0&&(this.points.radius=h.pointradius),h.steppedLine!==void 0&&(this.lines.steps=h.steppedLine),h.zindex!==void 0&&(this.zindex=h.zindex),h.fillBelowTo!==void 0&&(this.fillBelowTo=h.fillBelowTo),h.color!==void 0&&this.setColor(h.color),h.transform!==void 0&&(this.transform=h.transform),h.legend!==void 0&&(this.legend=h.legend),h.hideTooltip!==void 0&&(this.hideTooltip=h.hideTooltip),h.yaxis!==void 0&&(this.yaxis=h.yaxis),h.hiddenSeries!==void 0&&(this.hiddenSeries=h.hiddenSeries))}}getFlotPairs(g){const c=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const h=g==="connected",f=g==="null as zero";let b,v,y=0,E,C=0,u=!0;for(let D=0;D<this.datapoints.length;D++){if(v=this.datapoints[D][0],b=this.datapoints[D][1],E!==void 0){const P=b-E;P<this.stats.timeStep&&(this.stats.timeStep=P)}if(E=b,v===null){if(h)continue;f&&(v=0)}v!==null&&((0,t.isNumber)(v)&&(this.stats.total+=v,this.allIsNull=!1,y++),v>this.stats.max&&(this.stats.max=v),v<this.stats.min&&(this.stats.min=v),this.stats.first===null?this.stats.first=v:C>v?(u=!1,D===this.datapoints.length-1&&(this.stats.delta+=v)):(u?this.stats.delta+=v-C:this.stats.delta+=v,u=!0),C=v,v<this.stats.logmin&&v>0&&(this.stats.logmin=v),v!==0&&(this.allIsZero=!1)),c.push([b,v])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),c.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/y,this.stats.current=c[c.length-1][1],this.stats.current===null&&c.length>1&&(this.stats.current=c[c.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=c.length,c}updateLegendValues(g,c){this.valueFormater=g,this.decimals=c}formatValue(g){return(0,t.isFinite)(g)||(g=null),(0,s.zc)(this.valueFormater(g,this.decimals))}isMsResolutionNeeded(){for(let g=0;g<this.datapoints.length;g++)if(this.datapoints[g][1]!==null&&this.datapoints[g][1]!==void 0){const c=this.datapoints[g][1].toString();if(c.length===13&&c%1e3!==0)return!0}return!1}hideFromLegend(g){return!!(g.hideEmpty&&this.allIsNull||!this.legend||g.hideZero&&this.allIsZero)}setColor(g){this.color=g,this.bars.fillColor=g}}},94547:(j,I,e)=>{"use strict";e.d(I,{E:()=>l,f:()=>o});var t=e(27702),n=e(57704),i=e(32713),s=e(34667),r=e(66310),m=e(66574),d=e(42869);const o=({children:a,value:g})=>{const[c,h]=(0,t.useState)(g);return(0,t.useEffect)(()=>{const f=m.h$.subscribe(i.hD,b=>{s.config.theme2=b.payload,h(b.payload)});return()=>f.unsubscribe()},[]),t.createElement(r.Ni.Provider,{value:c},t.createElement(n.y,{baseColor:c.colors.background.secondary,highlightColor:c.colors.emphasize(c.colors.background.secondary),borderRadius:c.shape.borderRadius()},a))},l=(a,g)=>function(h){return t.createElement(o,{value:g},t.createElement(a,{...h}))}},42575:(j,I,e)=>{"use strict";e.d(I,{q:()=>t});class t extends window.Worker{constructor(i,s){const r=i.toString(),m=r.split("/");m.pop();const d=`${m.join("/")}/`,o=`importScripts('${r}');`,l=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${d}'; ${o}`],{type:"application/javascript"}));super(l,s),URL.revokeObjectURL(l)}}},92317:(j,I,e)=>{"use strict";e.d(I,{y:()=>n});var t=e(12308);function n(i={}){return t.default.rbacEnabled?{...i,accesscontrol:!0}:i}},58198:(j,I,e)=>{"use strict";e.d(I,{A:()=>t});function t(i){return i.map(n).sort((s,r)=>r.sortRank-s.sortRank||s.name.localeCompare(r.name))}function n(i){const s=i;return s.sortRank=0,s.userId>0?(s.name=s.userLogin,s.sortRank=10):s.teamId>0?(s.name=s.team,s.sortRank=20):s.role&&(s.icon="fa fa-fw fa-street-view",s.name=s.role,s.sortRank=30,s.role==="Editor"&&(s.sortRank+=1)),s.inherited&&(s.sortRank+=100),s}},69513:(j,I,e)=>{"use strict";e.d(I,{R:()=>t});const t=(n,i,s)=>(n.splice(s,0,n.splice(i,1)[0]),n)},72625:(j,I,e)=>{"use strict";e.d(I,{vl:()=>i});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,r=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,m=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,d=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),o=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||r&&(o&&parseFloat(o[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||m&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(d&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function i(){return n()?"cmd":"ctrl"}},2567:(j,I,e)=>{"use strict";e.d(I,{kJ:()=>i});class t{_linkTo(d,o){o<=0&&d.inputEdges.push(this),o>=0&&d.outputEdges.push(this),d.edges.push(this)}link(d,o){if(!d)throw Error("inputNode is required");if(!o)throw Error("outputNode is required");return this.unlink(),this.inputNode=d,this.outputNode=o,this._linkTo(d,1),this._linkTo(o,-1),this}unlink(){let d;const o=this.inputNode,l=this.outputNode;o&&l&&(d=o.edges.indexOf(this),d>-1&&o.edges.splice(d,1),d=l.edges.indexOf(this),d>-1&&l.edges.splice(d,1),d=o.outputEdges.indexOf(this),d>-1&&o.outputEdges.splice(d,1),d=l.inputEdges.indexOf(this),d>-1&&l.inputEdges.splice(d,1))}}class n{constructor(d){this.name=d,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(d){return d?typeof d=="object"?this.inputEdges.find(o=>o.inputNode?.name===d.name):this.inputEdges.find(o=>o.inputNode?.name===d):null}getEdgeTo(d){return d?typeof d=="object"?this.outputEdges.find(o=>o.outputNode?.name===d.name):this.outputEdges.find(o=>o.outputNode?.name===d):null}getOptimizedInputEdges(){const d=[];return this.inputEdges.forEach(o=>{o.inputNode?.inputEdges.map(a=>a.inputNode)?.forEach(a=>{const g=a?.getEdgeTo(this.name);g&&d.push(g)})}),this.inputEdges.filter(o=>d.indexOf(o)===-1)}}class i{constructor(){this.nodes={}}createNode(d){const o=new n(d);return this.nodes[d]=o,o}createNodes(d){const o=[];return d.forEach(l=>{o.push(this.createNode(l))}),o}link(d,o){let l=[],a=[];const g=[],c=[];d instanceof Array?l=d:l=[d],o instanceof Array?a=o:a=[o];for(let f=0;f<l.length;f++){const b=l[f];if(typeof b=="string"){const v=this.getNode(b);if(!v)throw Error(`cannot link input node named ${b} since it doesn't exist in graph`);g.push(v)}else g.push(b)}for(let f=0;f<a.length;f++){const b=a[f];if(typeof b=="string"){const v=this.getNode(b);if(!v)throw Error(`cannot link output node named ${b} since it doesn't exist in graph`);c.push(v)}else c.push(b)}const h=[];return g.forEach(f=>{c.forEach(b=>{h.push(this.createEdge().link(f,b))})}),h}descendants(d){if(!d.length)return new Set;const o=new Set(r(d)?d.map(l=>this.nodes[l]).filter(l=>l!==void 0):d);return this.descendantsRecursive(o)}descendantsRecursive(d,o=new Set){for(const l of d){const a=new Set;for(const{inputNode:g}of l.inputEdges)g&&!o.has(g)&&(o.add(g),a.add(g));this.descendantsRecursive(a,o)}return o}createEdge(){return new t}getNode(d){return this.nodes[d]}}const s=m=>{Object.keys(m.nodes).forEach(d=>{const o=m.nodes[d];let l=o.outputEdges.map(g=>g.outputNode?.name).join(", ");l||(l="<none>");let a=o.inputEdges.map(g=>g.inputNode?.name).join(", ");a||(a="<none>"),console.log(`${o.name}:
 - links to:   ${l}
 - links from: ${a}`)})};function r(m){return m.length>0&&typeof m[0]=="string"}},87241:(j,I,e)=>{"use strict";e.d(I,{i:()=>n});var t=e(73289);function n(i){if(typeof i=="string")return i;if(i){if(i instanceof Error)return i.message;if((0,t.kW)(i)){if(i.data&&i.data.message)return i.data.message;if(i.statusText)return i.statusText}}return JSON.stringify(i)}},89024:(j,I,e)=>{"use strict";e.d(I,{$$:()=>W,ET:()=>D,F3:()=>A,H6:()=>S,OQ:()=>_,Oy:()=>k,RZ:()=>z,Xh:()=>O,Xk:()=>U,Z8:()=>V,Zf:()=>x,_Q:()=>B,as:()=>R,fR:()=>L,n9:()=>Q,uC:()=>M,y_:()=>u,z0:()=>P,z_:()=>K});var t=e(34099),n=e(89949),i=e.n(n),s=e(66117),r=e(64167),m=e(78968),d=e(62247),o=e(8508),l=e(76305),a=e(10864),g=e(26862),c=e(56812),h=e(65946),f=e(12308),b=e(76897);const v={dedupStrategy:r.Y4.none},y=100,E="grafana.explore.datasource",C=X=>`${E}.${X}`,u=X=>c.Z.getObject(C(X)),D=(X,te)=>c.Z.setObject(C(X),te);function P(){return(0,t.x0)(3)}async function S(X){const{panel:te,datasourceSrv:oe,timeSrv:Z}=X;let le=await oe.get(te.datasource),ce=te.targets.map(ne=>(0,n.omit)(ne,"legendFormat")).filter(ne=>ne.datasource?.uid!==h.Yq),q;if(le){let pe={range:Z.timeRangeForUrl()};if(le.interpolateVariablesInQueries){const ie=te.scopedVars||{};pe={...pe,datasource:le.uid,queries:le.interpolateVariablesInQueries(ce,ie)}}else pe={...pe,datasource:le.uid,queries:ce};const re=JSON.stringify({[P()]:pe});q=m.Cj.renderUrl("/explore",{panes:re,schemaVersion:1})}return q}function x(X,te,oe,Z,le,ce){const q=te.reduce((Se,ye)=>(Se+=ye.key,Se),""),{interval:ne,intervalMs:pe}=H(Z,oe.minInterval,oe.maxDataPoints),re=`${q}`,ie={app:d.zj.Explore,timezone:ce||o.Ys,startTime:Date.now(),interval:ne,intervalMs:pe,panelId:re,targets:te,range:Z,requestId:"explore_"+X,rangeRaw:Z.raw,scopedVars:{__interval:{text:ne,value:ne},__interval_ms:{text:pe,value:pe}},maxDataPoints:oe.maxDataPoints,liveStreaming:oe.liveStreaming};return{queries:te,request:ie,scanning:le,id:T(),done:!1}}const M=({key:X,...te})=>te,R=X=>{if(X)try{return JSON.parse(X)}catch(te){console.error(te)}},O=(X,te)=>{if(X==null)return"";try{return JSON.stringify(X,null,te)}catch(oe){console.error(oe)}return""};function T(X=0){return`Q-${(0,s.Z)()}-${X}`}async function U(X,te=0,oe){let Z,le,ce;return oe?le=oe:X.length>0&&X[X.length-1].datasource?le=X[X.length-1].datasource:(Z=await(0,a.F)().get(),ce=Z.getDefaultQuery?.(d.zj.Explore),le=Z.getRef()),Z||(Z=await(0,a.F)().get(le),ce=Z.getDefaultQuery?.(d.zj.Explore)),{...ce,refId:(0,b.Hs)(X),key:T(te),datasource:le}}const L=(X,te,oe=0)=>{const Z=T(oe),le=X.refId||(0,b.Hs)(te);return{...X,refId:le,key:Z}};async function V(X,te){if(X&&typeof X=="object"&&X.length>0){const oe=[];for(let Z=0;Z<X.length;Z++){const le=X[Z],ce=T(Z);let q=le.refId;q||(q=(0,b.Hs)(oe));let ne=!0;if(le.datasource)try{await(0,a.F)().get(le.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),ne=!1}ne&&oe.push({...le,refId:q,key:ce})}return oe}try{const oe=te??(await(0,a.F)().get()).getRef();return[await U(X??[],void 0,oe)]}catch{return[]}}const w=["refId","key","context","datasource"];function K(X){return X&&X.some(te=>Object.keys(te).filter(Z=>w.indexOf(Z)===-1).map(Z=>te[Z]).filter(Z=>Z).length>0)}function B(X,te,oe){const Z=Date.now();let le=X;oe.forEach(q=>{le=[{query:q,ts:Z},...le]}),le.length>y&&(le=le.slice(0,y));const ce=`grafana.explore.history.${te}`;try{return c.Z.setObject(ce,le),le}catch(q){return console.error(q),X}}const W=X=>X.reduce((oe,Z,le)=>{const ce=Z.datasource?.uid||Z.key;return oe.concat(`${ce}-${le}`)},[]),_=(X,te,oe)=>{let Z=l.convertRawToRange(te,X,oe);return Z.to.isBefore(Z.from)&&(Z=l.convertRawToRange({from:Z.raw.to,to:Z.raw.from},X,oe)),Z},k=X=>g.dP.isLive(X)?r.UV.Ascending:r.UV.Descending,A=X=>{let oe=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${f.config.appSubUrl}`;return oe.endsWith("/")&&(oe=oe.slice(0,-1)),`${oe}${X}`},z=X=>{X&&X.unsubscribe()};function H(X,te,oe){return oe?l.calculateInterval(X,oe,te):{interval:"1s",intervalMs:1e3}}const Q=X=>{const te=document.createElement("textarea");te.value=X,document.body.appendChild(te),te.select(),document.execCommand("copy"),document.body.removeChild(te)}},26631:(j,I,e)=>{"use strict";e.d(I,{Xv:()=>v,aO:()=>f,nS:()=>s,rZ:()=>c,tW:()=>b});var t=e(89949),n=e.n(t),i=e(58939);const s=E=>{const C=E.method,u=g(E),D=c(u),P=h(E,D),S=y(E);return{method:C,headers:u,body:P,credentials:S}},r={canParse:()=>!0,parse:E=>(E.get("accept")||E.set("accept","application/json, text/plain, */*"),E)},m=E=>({canParse:C=>(C?.method?C?.method.toLowerCase():"")===E,parse:C=>(C.get("content-type")||C.set("content-type","application/json"),C)}),d=m("post"),o=m("put"),l=m("patch"),a=[d,o,l,r],g=E=>{const C=E?.headers?new Headers(E.headers):new Headers;return a.filter(P=>P.canParse(E)).reduce((P,S)=>S.parse(P),C)},c=E=>{if(!E)return!1;const C=E.get("content-type");return!!(C&&C.toLowerCase()==="application/json")},h=(E,C)=>E&&(!E.data||typeof E.data=="string"||E.data instanceof Blob?E.data:C?JSON.stringify(E.data):new URLSearchParams(E.data));async function f(E,C){if(C)switch(C){case"arraybuffer":return E.arrayBuffer();case"blob":return E.blob();case"json":return E.headers.get("Content-Length")==="0"?(console.warn(`${E.url} returned an invalid JSON`),{}):await E.json();case"text":return E.text()}const u=await E.text();try{return JSON.parse(u)}catch{}return u}function b(E){return Object.keys(E).map(C=>{const u=E[C];return Array.isArray(u)?u.map(D=>`${encodeURIComponent(C)}=${encodeURIComponent(D)}`).join("&"):`${encodeURIComponent(C)}=${encodeURIComponent(u)}`}).join("&")}const v=E=>{const C=(0,t.omitBy)(E.params,D=>D===void 0||D&&D.length===0),u=b(C);return E.params&&u.length?`${E.url}?${u}`:E.url},y=E=>E&&(E.credentials?E.credentials:E.withCredentials?((0,i.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},44380:(j,I,e)=>{"use strict";e.r(I),e.d(I,{default:()=>t});function t(n,i){i=i||{};const s=i.delimiter||".";let r=i.maxDepth||3,m=1;const d={};function o(l,a){Object.keys(l).forEach(g=>{const c=l[g],h=i?.safe&&Array.isArray(c),b=Object.prototype.toString.call(c)==="[object Object]",v=a?a+s+g:g;if(i?.maxDepth||(r=m+1),!h&&b&&Object.keys(c).length&&m<r)return++m,o(c,v);d[v]=c})}return o(n,null),d}},13216:(j,I,e)=>{"use strict";e.d(I,{Z:()=>d});var t=e(58939),n=e(95676),i=e(76305),s=e(21609);const m={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:o=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(o)),roundInterval:o=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),i.roundInterval(o)),secondsToHms:o=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),i.secondsToHms(o)),secondsToHhmmss:o=>{const l=[],a=Math.floor(o/3600),g=Math.floor(o%3600/60),c=Math.floor(o%3600%60);return a>9?l.push(""+a):l.push("0"+a),g>9?l.push(""+g):l.push("0"+g),c>9?l.push(""+c):l.push("0"+c),l.join(":")},toPercent:(o,l)=>Math.floor(o/l*1e4)/100+"%",addSlashes:o=>o.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:o=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),i.describeInterval(o)),intervalToSeconds:o=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),i.intervalToSeconds(o)),intervalToMs:o=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),i.intervalToMs(o)),calculateInterval:(o,l,a)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),i.calculateInterval(o,l,a)),queryColorDot:(o,l)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+o,"font-size:"+l+"px"].join(";")+'"></div>',slugifyForUrl:o=>o.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:o=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(o)),toFixed:(o,l)=>{if(o===null)return"";const a=l?Math.pow(10,Math.max(0,l)):1,g=String(Math.round(o*a)/a);if(g.indexOf("e")!==-1||o===0)return g;if(l!=null){const c=g.indexOf("."),h=c===-1?0:g.length-c-1;if(h<l)return(h?g:g+".")+String(a).slice(1,l-h+1)}return g},toFixedScaled:(o,l,a,g,c)=>a===null?m.toFixed(o,l)+c:m.toFixed(o,a+g)+c,roundValue:(o,l)=>{if(o===null)return null;const a=Math.pow(10,l),g=(a*o).toFixed(l);return Math.round(parseFloat(g))/a},getUnitFormats:s.QW};typeof Proxy<"u"?m.valueFormats=new Proxy(m.valueFormats,{get(o,l,a){if(typeof l!="string")throw{message:`Value format ${String(l)} is not a string`};const g=(0,s.Cf)(l);return g?(c,h,f,b)=>(0,s.zc)(g(c,h,f,b?"utc":"browser")):Reflect.get(o,l,a)}}):m.valueFormats=(0,s.Td)();const d=m},76897:(j,I,e)=>{"use strict";e.d(I,{DI:()=>i,Hs:()=>t,R8:()=>r,mu:()=>s,sB:()=>d,vH:()=>n});const t=o=>{for(let l=0;;l++){const a=m(l);if(!o.some(g=>g.refId===a))return a}};function n(o){const l=["refId","hide","key","queryType","datasource"];for(const a in o)if(a!=="label"&&!l.includes(a))return!1;return!0}function i(o,l,a){const g=l||{};return g.refId=t(o),g.hide=!1,!g.datasource&&a&&(g.datasource=a),[...o,g]}function s(o){return o.indexOf("api/datasources/proxy")!==-1||o.indexOf("api/ds/query")!==-1}function r(o){return!o.match(/^http/)}function m(o){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return o<l.length?l[o]:m(Math.floor(o/l.length)-1)+l[o%l.length]}function d(o){return o||void 0}},87715:(j,I,e)=>{"use strict";e.d(I,{As:()=>g.A,DR:()=>O,HK:()=>v,OH:()=>M,VI:()=>y,au:()=>c,bQ:()=>D,di:()=>b,gt:()=>E,k4:()=>R,kg:()=>f,t2:()=>u,ub:()=>h,y9:()=>C});var t=e(89949),n=e.n(t),i=e(78968),s=e(60956),r=e(10864),m=e(33877),d=e(73807),o=e(84749),l=e(19484),a=e(19889),g=e(7990);async function c(U,L,V,w,K,B,W){const _=V&&V.filter(k=>T(k));if(_.length>0){let k=!1,A=!1,z;try{z=(await(0,a.b)().addToRichHistory({datasourceUid:U,datasourceName:L??"",queries:_,starred:w,comment:K??""})).warning}catch(H){return H instanceof Error&&(H.name===l.j.StorageFull?(k=!0,B&&(0,o.WI)((0,m.$l)((0,d.t_)(H.message)))):H.name!==l.j.DuplicatedEntry&&(0,o.WI)((0,m.$l)((0,d.t_)("Rich History update failed",H.message)))),{richHistoryStorageFull:k,limitExceeded:A}}return z&&z.type===l.V.LimitExceeded&&(A=!0,W&&(0,o.WI)((0,m.$l)((0,d.ZR)(z.message)))),{richHistoryStorageFull:k,limitExceeded:A}}return{}}async function h(U){return await(0,a.b)().getRichHistory(U)}async function f(U){await(0,a.b)().updateSettings(U)}async function b(){return await(0,a.b)().getSettings()}async function v(){return(0,a.b)().deleteAll()}async function y(U,L){try{return await(0,a.b)().updateStarred(U,L)}catch(V){V instanceof Error&&(0,o.WI)((0,m.$l)((0,d.t_)("Saving rich history failed",V.message)));return}}async function E(U,L){try{return await(0,a.b)().updateComment(U,L)}catch(V){V instanceof Error&&(0,o.WI)((0,m.$l)((0,d.t_)("Saving rich history failed",V.message)));return}}async function C(U){try{return await(0,a.b)().deleteRichHistory(U),U}catch(L){L instanceof Error&&(0,o.WI)((0,m.$l)((0,d.t_)("Saving rich history failed",L.message)));return}}const u=U=>{const L={range:{from:"now-1h",to:"now"},datasource:U.datasourceName,queries:U.queries},V=(0,i.S)(L),w=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return i.Cj.renderUrl(`${w}/explore`,{left:V})},D=U=>{let L;switch(U){case 0:L="today";break;case 1:L="yesterday";break;case 7:L="a week ago";break;case 14:L="two weeks ago";break;default:L=`${U} days ago`}return L};function P(U){return(0,s.dq)(U,{format:"MMMM D"})}function S(U){const L=(0,t.omit)(U,["key","refId","datasource"]);return JSON.stringify(L)}function x(U,L){let V="";return L===g.A.DatasourceAZ||L===g.A.DatasourceZA?V=U.datasourceName:V=P(U.createdAt),V}function M(U,L){return L?.getQueryDisplayText?L.getQueryDisplayText(U):S(U)}function R(U,L){let V={};return U.forEach(w=>{let K=x(w,L);K in V?V[K]=[...V[K],w]:V[K]=[w]}),V}function O(){return(0,r.F)().getList({mixed:!0}).map(U=>({name:U.name,uid:U.uid}))}function T(U){const L=(0,t.omit)(U,["key","refId","datasource"]);return Object.keys(L).length>0}},7990:(j,I,e)=>{"use strict";e.d(I,{A:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},82146:(j,I,e)=>{"use strict";e.d(I,{D:()=>a,L:()=>g});var t=e(82152),n=e(34667),i=e(73289),s=e(33877),r=e(73807),m=e(84749),d=e(89024);function o(){return`${window.location.protocol}//${window.location.host}${n.config.appSubUrl}`}function l(c){let h=c.replace(o(),"");return h.startsWith("/")?h.substring(1,h.length):h}const a=(0,t.Z)(async function(c){try{return(await(0,i.i)().post("/api/short-urls",{path:l(c)})).url}catch(h){console.error("Error when creating shortened link: ",h),(0,m.WI)((0,s.$l)((0,r.t_)("Error generating shortened link")))}}),g=async c=>{const h=await a(c);h?((0,d.n9)(h),(0,m.WI)((0,s.$l)((0,r.AT)("Shortened link copied to clipboard")))):(0,m.WI)((0,s.$l)((0,r.t_)("Error generating shortened link")))}},86628:(j,I,e)=>{"use strict";e.r(I),e.d(I,{getFlotRange:()=>s,getFlotTickDecimals:()=>r,getFlotTickSize:()=>i,getPrecision:()=>o,getScaledDecimals:()=>n,getStringPrecision:()=>l,grafanaTimeFormat:()=>m,logp:()=>d,tickStep:()=>t});function t(a,g,c){const h=Math.sqrt(50),f=Math.sqrt(10),b=Math.sqrt(2),v=Math.abs(g-a)/Math.max(0,c);let y=Math.pow(10,Math.floor(Math.log(v)/Math.LN10));const E=v/y;return E>=h?y*=10:E>=f?y*=5:E>=b&&(y*=2),g<a?-y:y}function n(a,g){return a-Math.floor(Math.log(g)/Math.LN10)}function i(a,g,c,h){const f=(g-a)/c;let b=-Math.floor(Math.log(f)/Math.LN10);const v=h,y=Math.pow(10,-b),E=f/y;let C;return E<1.5?C=1:E<3?(C=2,E>2.25&&(v==null||b+1<=v)&&(C=2.5,++b)):E<7.5?C=5:C=10,C*=y,C}function s(a,g,c,h){let b=+(a??c),v=+(g??h);const y=v-b;if(y===0){const C=Math.abs(v===0?1:v*.25);a===null&&(b-=C),(g==null||a!=null)&&(v+=C)}else a==null&&(b-=y*.02,b<0&&c!=null&&c>=0&&(b=0)),g==null&&(v+=y*.02,v>0&&h!=null&&h<=0&&(v=0));return{min:b,max:v}}function r(a,g,c,h){const{min:f,max:b}=s(c.min,c.max,a,g),v=.3*Math.sqrt(h),y=(b-f)/v,E=-Math.floor(Math.log(y)/Math.LN10),C=Math.pow(10,-E),u=y/C;let D;u<1.5?D=1:u<3?(D=2,u>2.25&&(D=2.5)):u<7.5?D=5:D=10,D*=C;const P=Math.max(0,-Math.floor(Math.log(y)/Math.LN10)+1),S=P-Math.floor(Math.log(D)/Math.LN10);return{tickDecimals:P,scaledDecimals:S}}function m(a,g,c){if(g&&c&&a){const h=c-g,f=h/a/1e3,b=864e5,v=31536e6;return f<=45?"HH:mm:ss":f<=7200||h<=b?"HH:mm":f<=8e4?"MM/DD HH:mm":f<=2419200||h<=v?"MM/DD":"YYYY-MM"}return"HH:mm"}function d(a,g){return Math.log(a)/Math.log(g)}function o(a){const g=a.toString();return l(g)}function l(a){if(isNaN(a))return 0;const g=a.indexOf(".");return g===-1?0:a.length-g-1}},15476:(j,I,e)=>{"use strict";e.d(I,{e:()=>n,h:()=>i});var t=e(99633);const n=(s,r)=>{const m={from:(0,t.zh)(r.from),to:(0,t.zh)(r.to)},d=(m.to.valueOf()-m.from.valueOf())/2;let o,l;return s===-1?(o=m.to.valueOf()-d,l=m.from.valueOf()-d):s===1?(o=m.to.valueOf()+d,l=m.from.valueOf()+d,o>Date.now()&&m.to.valueOf()<Date.now()&&(o=Date.now(),l=m.from.valueOf())):(o=m.to.valueOf(),l=m.from.valueOf()),{from:l,to:o}},i=(s,r)=>{const m=s.to.valueOf()-s.from.valueOf(),d=s.to.valueOf()-m/2,o=m===0?3e4:m*r,l=d+o/2;return{from:d-o/2,to:l}}},78526:(j,I,e)=>{"use strict";e.d(I,{q7:()=>n});var t=e(99633);function n(r,m){if(!(r.fromDayOfWeek||r.from)&&!(r.toDayOfWeek||r.to))return[];const d={...r};d.from&&!d.to&&(d.to=d.from),!d.from&&d.to&&(d.from=d.to);const o={from:i(d.from),to:i(d.to)};if(!d.fromDayOfWeek&&d.toDayOfWeek&&(d.fromDayOfWeek=d.toDayOfWeek),!d.toDayOfWeek&&d.fromDayOfWeek&&(d.toDayOfWeek=d.fromDayOfWeek),d.fromDayOfWeek&&(o.from.dayOfWeek=Number(d.fromDayOfWeek)),d.toDayOfWeek&&(o.to.dayOfWeek=Number(d.toDayOfWeek)),o.from.dayOfWeek&&o.from.h==null&&o.from.m==null&&(o.from.h=0,o.from.m=0,o.from.s=0),o.to.dayOfWeek&&o.to.h==null&&o.to.m==null&&(o.to.h=23,o.to.m=59,o.to.s=59),!o.from||!o.to)return[];o.from.h==null&&(o.from.h=0),o.to.h==null&&(o.to.h=23);const l=[],a=(0,t.CQ)(m.from).utc();for(a.set("hour",0),a.set("minute",0),a.set("second",0),a.set("millisecond",0),a.add(o.from.h,"hours"),a.add(o.from.m,"minutes"),a.add(o.from.s,"seconds");a.unix()<=m.to.unix();){for(;o.from.dayOfWeek&&o.from.dayOfWeek!==a.isoWeekday();)a.add(24,"hours");if(a.unix()>m.to.unix())break;const g=(0,t.CQ)(a).utc();if(g.hour)if(o.from.h<=o.to.h)g.add(o.to.h-o.from.h,"hours");else if(o.from.h>o.to.h)for(;g.hour()!==o.to.h;)g.add(1,"hours");else for(g.add(24-o.from.h,"hours");g.hour()!==o.to.h;)g.add(1,"hours");for(g.set("minute",o.to.m??0),g.set("second",o.to.s??0);o.to.dayOfWeek&&o.to.dayOfWeek!==g.isoWeekday();)g.add(24,"hours");a.unix()<m.from.unix()&&g.unix()<m.from.unix()||a.unix()>m.to.unix()&&g.unix()>m.to.unix()||l.push({from:a.valueOf(),to:g.valueOf()}),a.add(24,"hours")}return l}function i(r){const m={};if(!r?.length)return m;const d=r.split(":");return d?.length&&(m.h=Math.min(23,Math.max(0,Number(d[0]))),d.length>1&&(m.m=Math.min(60,Math.max(0,Number(d[1]))),d.length>2&&(m.s=Math.min(60,Math.max(0,Number(d[2])))))),m}function s(r){if(!r||r.h==null&&r.m==null&&r.s==null)return"";let m=String(r.h??0).padStart(2,"0")+":"+String(r.m??0).padStart(2,"0");return r.s!=null&&(m+=String(r.s??0).padStart(2,"0")),m}},43500:(j,I,e)=>{"use strict";e.d(I,{et:()=>s,fy:()=>m,nO:()=>r,np:()=>o});var t=e(72164),n=e(12503),i=e(29241);function s(l){return l.sort((g,c)=>g[0]-c[0]),l.reduce((g,c)=>{if(!g.length)return[c];const h=g.slice(-1)[0],[f,b]=h,[v,y]=c;return y<b?g:v>b?[...g,c]:[...g.slice(0,-1),[f,y]]},[]).reduce((g,c)=>g+(c[1]-c[0]),0)}function r(l){const a={};let g;for(let c=0;g=l(c),!!g;c++){a[g.id]?a[g.id].span=g.span:a[g.id]={span:g.span,children:[]};for(const h of g.parentIds)h&&(a[h]?a[h].children.push(g.id):a[h]={span:void 0,children:[g.id]})}return a}function m(l,a,g){return{main:`${d(l)}ms (${d(l/a*100)}%)`,secondary:`${d(g)}ms (${d(g/l*100)}%)`}}function d(l){return parseFloat(l.toFixed(2))}function o(){const l=new t.v({fields:[{name:n.z.id,type:i.fS.string},{name:n.z.title,type:i.fS.string},{name:n.z.subTitle,type:i.fS.string},{name:n.z.mainStat,type:i.fS.string,config:{displayName:"Total time (% of trace)"}},{name:n.z.secondaryStat,type:i.fS.string,config:{displayName:"Self time (% of total)"}},{name:n.z.color,type:i.fS.number,config:{color:{mode:"continuous-GrYlRd"},displayName:"Self time / Trace duration"}}],meta:{preferredVisualisationType:"nodeGraph"}}),a=new t.v({fields:[{name:n.z.id,type:i.fS.string},{name:n.z.target,type:i.fS.string},{name:n.z.source,type:i.fS.string}],meta:{preferredVisualisationType:"nodeGraph"}});return[l,a]}},59281:(j,I,e)=>{"use strict";e.d(I,{v:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},25211:(j,I,e)=>{"use strict";e.r(I),e.d(I,{addExtensionReducers:()=>Lm,init:()=>Ag});var t=e(80978),n=e(34667),i=e(86312),s=e(66574),r=e(90131),m=e(11504),d=e(3008),o=e(18771),l=e(41725),a=e(27702),g=e(28580),c=e(73453);const h="licensedRole",f=[{value:"server_admin",label:"Server admin"},{value:"admin_editor",label:"Admin/editor"},{value:"viewer",label:"Viewer"}],b=({filters:p,onChange:N,className:F})=>a.createElement(g.NU,{value:p.find(G=>G.name===h)?.value,options:f,onChange:G=>{N({name:h,value:G})},prefix:a.createElement(c.J,{name:"filter"}),width:64,placeholder:"Filter by licensed role",menuShouldPortal:!0,className:F}),v=()=>{(0,l.SO)(b)};var y=e(73289),E=e(12352),C=e(39501),u=e(5439);Array.from(Array(31),(p,N)=>{const F=(N+1).toString();return{value:F,label:F}}).unshift({value:"last",label:"Last"});const P=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];var S=(p=>(p.Monthly="monthly",p.Weekly="weekly",p.Daily="daily",p.Hourly="hourly",p.Never="never",p.Custom="custom",p.Once="once",p))(S||{}),x=(p=>(p.Hours="hours",p.Days="days",p.Weeks="weeks",p.Months="months",p))(x||{}),M=(p=>(p.Default="",p.SentBy="sent-by",p.None="none",p))(M||{}),R=(p=>(p.Paused="paused",p.Scheduled="scheduled",p.Expired="expired",p.Draft="draft",p.Never="not scheduled",p))(R||{});const O=[{value:"landscape",label:"Landscape",icon:"gf-landscape"},{value:"portrait",label:"Portrait",icon:"gf-portrait"}],T=[{value:"grid",label:"Grid",icon:"gf-grid"},{value:"simple",label:"Simple",icon:"gf-layout-simple"}];var U=(p=>(p.SelectDashboard="select-dashboard",p.FormatReport="format-report",p.Schedule="schedule",p.Share="share",p.Confirm="confirm",p))(U||{}),L=(p=>(p.Stats="stats",p.Users="users",p.PublicDashboards="public-dashboards",p))(L||{}),V=e(65015),w=(p=>(p.ReportingCreate="reports:create",p.ReportingWrite="reports:write",p.ReportingDelete="reports:delete",p.ReportingRead="reports:read",p.ReportingSend="reports:send",p.ReportingSettingsWrite="reports.settings:write",p.ReportingSettingsRead="reports.settings:read",p.DataSourcesPermissionsRead="datasources.permissions:read",p.DataSourcesPermissionsWrite="datasources.permissions:write",p.DataSourcesCachingWrite="datasources.caching:write",p.LicensingRead="licensing:read",p.LicensingWrite="licensing:write",p.LicensingReportsRead="licensing.reports:read",p.DashboardsInsightsRead="dashboards.insights:read",p))(w||{}),K=e(51707),B=(p=>(p.General="general",p.KeyCert="key-cert",p.ConnectToIdP="connect-to-idp",p.AssertionMapping="assertion-mapping",p.SaveAndTest="save-and-test",p))(B||{}),W=e(42844),_=e(46089),k=e(27173),A=e(66310),z=e(80011),H=e(16310),Q=e(22209),X=e(42074),te=e(1128),oe=e(48024);const Z=({value:p,label:N,placeholder:F,width:G,id:J,onChange:se})=>{const me=(0,A.wW)(le),be=Ae=>{const Ke=Ae.currentTarget.value;se(Ke)};return a.createElement("div",{className:me.assertionEditorRow},a.createElement(oe._,{label:N,labelWidth:16,htmlFor:J},a.createElement(te.I,{width:G||30,id:J,value:p||"",onChange:be,placeholder:F})))},le=p=>({assertionEditorRow:(0,W.css)`
      display: flex;
      margin-bottom: ${p.spacing(1)};
    `,inputLabel:(0,W.css)`
      color: ${p.components.input.text};
      background: ${p.components.input.background};
    `});var ce=e(7662),q=e(5229),ne=e(12375),pe=e(25357),re=e(63439),ie=e(4242);function Se(p){return{error:p.authConfig.updateError,warning:p.authConfig.warning}}const ye={resetError:ie.q$,resetWarning:ie.gG},we=(0,k.connect)(Se,ye)(({error:p,warning:N,resetError:F,resetWarning:G})=>a.createElement("div",null,p&&a.createElement(re.b,{title:p.message,onRemove:()=>F()},p.errors?.map((J,se)=>a.createElement("div",{key:se},J))),N&&a.createElement(re.b,{title:N.message,onRemove:()=>G(),severity:"warning"},N.errors?.map((J,se)=>a.createElement("div",{key:se},J)))));var _e=e(13741),Je=e(66670);const Ue=({confirmRedirect:p,onDiscard:N,onLocationChange:F})=>{const[G,J]=(0,a.useState)(!1),[se,me]=(0,a.useState)(null),[be,Ae]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const ot=rt=>{p&&(rt.preventDefault(),rt.returnValue="")};return window.addEventListener("beforeunload",ot),()=>{window.removeEventListener("beforeunload",ot)}},[p]);const Ke=ot=>{const rt=F?.(ot);let gt=p&&!be;return rt!==void 0&&(gt=gt&&rt),gt?(J(!0),me(ot),!1):(rt&&N(),!0)},Ye=()=>{J(!1),me(null)},Ze=()=>{J(!1),Ae(!0),N()};return a.createElement(a.Fragment,null,a.createElement(ce.NL,{when:!0,message:Ke}),se&&be&&a.createElement(ce.l_,{to:se}),a.createElement($e,{isOpen:G,onDiscard:Ze,onBackToForm:Ye}))},$e=({onDiscard:p,onBackToForm:N,isOpen:F})=>a.createElement(_e.u,{isOpen:F,title:"Leave page?",onDismiss:N,icon:"exclamation-triangle",className:(0,W.css)`
        width: 500px;
      `},a.createElement("h5",null,"Changes that you made may not be saved."),a.createElement(_e.u.ButtonRow,null,a.createElement(Je.zx,{variant:"secondary",onClick:N,fill:"outline"},"Continue editing"),a.createElement(Je.zx,{variant:"destructive",onClick:p},"Discard unsaved changes")));var Qe=e(9848);function tt({validationResults:p,onStepChange:N,visitedSteps:F=[],getNextUrl:G,steps:J,activeStep:se=J[0].id}){const me=(0,A.wW)(lt),be=J[J.length-1];return a.createElement("ol",{className:me.container},J.map(Ae=>{const Ke=Ae.id===be.id,Ye=Ae.id===se,Ze=F.includes(Ae.id)||se===be.id,ot=!Ke&&!p[Ae.id].valid,rt=!Ye&&!Ke&&Ze,gt=rt&&!ot,Pt=rt&&ot,vt=(0,W.cx)(me.item,{[me.active]:Ye,[me.successItem]:gt,[me.warnItem]:Pt});return a.createElement("li",{key:Ae.id,className:vt},gt&&a.createElement(c.J,{name:"check",size:"xl",className:me.successItem}),Pt&&a.createElement(c.J,{name:"exclamation-triangle",className:me.warnItem}),a.createElement(Qe.r,{onClick:Ye?void 0:()=>N(Ae.id),href:G(Ae.id),className:me.link},Ae.name),!Ke&&a.createElement("div",{className:me.divider},"\u2014"))}))}const lt=p=>({container:(0,W.css)`
      counter-reset: item;
      list-style-type: none;
      width: 100%;
      position: relative;
      display: flex;
      justify-content: center;
      border: 1px solid ${p.colors.border.weak};
      margin: ${p.spacing(4,0)};
    `,item:(0,W.css)`
      color: ${p.colors.text.secondary};
      display: flex;
      align-items: center;
    `,successItem:(0,W.css)`
      a {
        &::before {
          content: '';
        }
      }

      svg {
        color: ${p.colors.success.text};
        margin: ${p.spacing(0,.5,0,-1)};
      }
    `,warnItem:(0,W.css)`
      a::before {
        content: '';
      }
      svg {
        color: ${p.colors.warning.text};
        margin: ${p.spacing(0,1,.5,-.5)};
      }
    `,link:(0,W.css)`
      color: inherit;
      &:hover {
        color: ${p.colors.text.link};
      }

      &::before {
        content: counter(item) '  ';
        counter-increment: item;
      }
    `,active:(0,W.css)`
      font-weight: 500;
      color: ${p.colors.text.maxContrast};

      &::before {
        font-weight: 500;
      }
    `,divider:(0,W.css)`
      padding: ${p.spacing(2)};
    `}),Me=({error:p,onReset:N})=>a.createElement("div",null,p&&a.createElement(re.b,{title:p.message,onRemove:N,severity:"warning"},p.errors?.map((F,G)=>a.createElement("div",{key:G},F))));var De=e(26129),We=e(89949);const qe="/admin/authentication/saml",st=n.config.appUrl+"saml/metadata",dt=n.config.appUrl+"saml/acs",Tt=n.config.appUrl+"saml/slo";function Nt(p){return{enabled:Bt(p.enabled),allowSignUp:Bt(p.allow_sign_up),autoLogin:Bt(p.auto_login),singleLogout:Bt(p.single_logout),allowIdpInitiated:Bt(p.allow_idp_initiated),skipOrgRoleSync:Bt(p.skip_org_role_sync),name:yt(p.name),privateKey:yt(p.private_key),privateKeyPath:yt(p.private_key_path),certificate:yt(p.certificate),certificatePath:yt(p.certificate_path),signatureAlgorithm:yt(p.signature_algorithm),idpMetadata:yt(p.idp_metadata),idpMetadataPath:yt(p.idp_metadata_path),idpMetadataUrl:yt(p.idp_metadata_url),maxIssueDelay:yt(p.max_issue_delay),metadataValidDuration:yt(p.metadata_valid_duration),relayState:yt(p.relay_state),assertionAttributeName:yt(p.assertion_attribute_name),assertionAttributeLogin:yt(p.assertion_attribute_login),assertionAttributeEmail:yt(p.assertion_attribute_email),assertionAttributeGroups:yt(p.assertion_attribute_groups),assertionAttributeRole:yt(p.assertion_attribute_role),assertionAttributeOrg:yt(p.assertion_attribute_org),allowedOrganizations:yt(p.allowed_organizations),orgMapping:yt(p.org_mapping),roleValuesEditor:yt(p.role_values_editor),roleValuesAdmin:yt(p.role_values_admin),roleValuesGrafanaAdmin:yt(p.role_values_grafana_admin),nameIdFormat:yt(p.name_id_format)}}function Bt(p){return p==="true"}function yt(p){return p||""}function ft(p){return p?"true":"false"}function ct(p){return{enabled:ft(p.enabled),allow_sign_up:ft(p.allowSignUp),auto_login:ft(p.autoLogin),single_logout:ft(p.singleLogout),allow_idp_initiated:ft(p.allowIdpInitiated),skip_org_role_sync:ft(p.skipOrgRoleSync),name:yt(p.name),private_key:yt(p.privateKey),private_key_path:yt(p.privateKeyPath),certificate:yt(p.certificate),certificate_path:yt(p.certificatePath),signature_algorithm:yt(p.signatureAlgorithm),idp_metadata:yt(p.idpMetadata),idp_metadata_path:yt(p.idpMetadataPath),idp_metadata_url:yt(p.idpMetadataUrl),max_issue_delay:yt(p.maxIssueDelay),metadata_valid_duration:yt(p.metadataValidDuration),relay_state:yt(p.relayState),assertion_attribute_name:yt(p.assertionAttributeName),assertion_attribute_login:yt(p.assertionAttributeLogin),assertion_attribute_email:yt(p.assertionAttributeEmail),assertion_attribute_groups:yt(p.assertionAttributeGroups),assertion_attribute_role:yt(p.assertionAttributeRole),assertion_attribute_org:yt(p.assertionAttributeOrg),allowed_organizations:yt(p.allowedOrganizations),org_mapping:yt(p.orgMapping),role_values_editor:yt(p.roleValuesEditor),role_values_admin:yt(p.roleValuesAdmin),role_values_grafana_admin:yt(p.roleValuesGrafanaAdmin),name_id_format:yt(p.nameIdFormat)}}function ge(p){const{keyCertValueType:N,metadataValueType:F,signRequests:G}=p,{certificate_path:J,private_key_path:se,certificate:me,private_key:be,idp_metadata_url:Ae,idp_metadata_path:Ke,idp_metadata:Ye,...Ze}=ct(p),ot={updates:{"auth.saml":Ze},removals:{"auth.saml":[]}};return N==="path"?(se&&!Te(se)&&(ot.updates["auth.saml"].private_key_path=se,ot.updates["auth.saml"].private_key=""),J&&!Te(J)&&(ot.updates["auth.saml"].certificate_path=J,ot.updates["auth.saml"].certificate="")):N==="base64"&&(be&&!Te(be)&&(ot.updates["auth.saml"].private_key=be,ot.updates["auth.saml"].private_key_path=""),me&&!Te(me)&&(ot.updates["auth.saml"].certificate=me,ot.updates["auth.saml"].certificate_path="")),G||(ot.updates["auth.saml"].signature_algorithm=""),F==="url"?(ot.updates["auth.saml"].idp_metadata_url=Ae,ot.updates["auth.saml"].idp_metadata_path="",ot.updates["auth.saml"].idp_metadata=""):F==="path"?(ot.updates["auth.saml"].idp_metadata_path=Ke,ot.updates["auth.saml"].idp_metadata_url="",ot.updates["auth.saml"].idp_metadata=""):F==="base64"&&(ot.updates["auth.saml"].idp_metadata=Ye,ot.updates["auth.saml"].idp_metadata_url="",ot.updates["auth.saml"].idp_metadata_path=""),ot}function Be(p,N){const F={};return Object.keys(p).forEach(G=>{p[G]!==N[G]&&(F[G]=p[G])}),F}function Le(p){const N=p?.split(/[,\s]/),F=[];return N?.forEach(G=>{const J=G.split(":");if(J.length===3){const se=He(J[2]);se&&F.push({externalOrg:J[0],orgId:J[1],role:se})}}),F}function he(p){return p.map(F=>`${F.externalOrg}:${F.orgId}:${F.role}`).join(",")}function He(p){return p==="Admin"||p==="Editor"||p==="Viewer"?p:null}const Pe={enabled:"false",skip_org_role_sync:"false"};function Ie(p){return(0,We.isEqual)(p,Pe)}function Te(p){return p?/^\*+$/.test(p):!1}function Re(p,N,F){switch(p){case"privateKey":return N[p]===F.private_key&&!!F.private_key;case"privateKeyPath":return N[p]===F.private_key_path&&!!F.private_key_path;case"certificate":return N[p]===F.certificate&&!!F.certificate;case"certificatePath":return N[p]===F.certificate_path&&!!F.certificate_path;default:return!1}}function ue(p){return p.idpMetadataPath?"path":p.idpMetadata?"base64":"url"}const xe=p=>`${qe}/${p||""}`;function Ve(p){const N=p["auth.saml"];for(const[F,G]of Object.entries(N)){const J=G.system;if(J&&!Ne(F,J))return!0}return!1}function Ne(p,N){return Pe[p]===N}const fe=p=>{if(!p)return xt[0];const N=xt.findIndex(F=>F.id===p);return N===xt.length-1?xt[N]:xt[N+1]},ve=p=>{if(!p||p===xt[0].id)return;const N=xt.findIndex(F=>F.id===p);return xt[N-1]},ze=p=>{const N=ve(p);N&&N.id!==p&&De.E1.push(xe(N.id))},Oe=(0,a.forwardRef)(({activeStep:p,disabled:N},F)=>{const G=(0,A.wW)(Fe),J=(0,a.useRef)(null),se=ve(p),me=fe(p),be=me.id===p;(0,a.useImperativeHandle)(F,()=>({click:()=>{J.current?.click()}}));const Ae=()=>{J.current?.click(),ze(p)};return a.createElement("div",{className:G.buttonRow},a.createElement("div",{className:G.buttonRowInner},a.createElement("div",null,se&&a.createElement(Je.zx,{variant:"secondary",onClick:Ae},"Previous: ",se.name),!be&&a.createElement(Je.zx,{ref:J,disabled:N,type:"submit"},"Next: ",me.name))))});Oe.displayName="ButtonRow";const Fe=p=>({buttonRow:(0,W.css)`
      display: flex;
      padding: ${p.spacing(2,0,.5,0)};
      border-top: 1px solid ${p.colors.border.weak};
      width: 100%;
      background-color: ${p.colors.background.primary};
      button {
        &:first-of-type {
          margin-right: ${p.spacing(2)};
        }
        &:last-of-type {
          margin-right: 0;
        }
      }
    `,buttonRowInner:(0,W.css)`
      display: flex;
      justify-content: space-between;
      width: 100%;
    `}),Ge=({enabled:p,configFoundInIniFile:N,isNewConfig:F,onSave:G,onSaveAndEnable:J,onDisable:se,onRemove:me})=>{const be=(0,A.wW)(nt);let Ae={text:"Disabled",color:"red",icon:"times"};return p?Ae={text:"Enabled",color:"green",icon:"check"}:F||(Ae={text:"Not enabled",color:"blue"}),a.createElement(a.Fragment,null,a.createElement("div",{className:be.actionBarContainer},a.createElement("div",{className:be.protocolContainer},a.createElement("span",{className:be.protocolLabel},"Protocol"),a.createElement("span",null,"SAML 2.0")),!F&&a.createElement("div",{className:be.statusContainer},a.createElement("span",{className:be.statusLabel},"Status"),a.createElement(pe.C,{...Ae,className:be.statusBadge})),!p&&a.createElement(a.Fragment,null,a.createElement(Je.zx,{variant:"secondary",onClick:G},"Save"),a.createElement(Je.zx,{variant:"primary",onClick:J},"Save and enable")),p&&a.createElement(a.Fragment,null,a.createElement(Je.zx,{variant:"primary",onClick:G},"Save and apply"),a.createElement(z.u,{content:"Disable will disable Grafana to not use SAML auth.",placement:"top"},a.createElement(Je.zx,{variant:"destructive",fill:"outline",onClick:se},"Disable"))),!F&&a.createElement(z.u,{content:"Discarding will remove all of the configuration, made in the UI.",placement:"top"},a.createElement(Je.zx,{variant:"destructive",onClick:me},"Discard"))),N&&a.createElement("div",{className:be.iniFileLabel},a.createElement("span",{className:be.initext},a.createElement(z.u,{content:"Note: Settings enabled in the .ini configuration file may be overwritten by the current settings."},a.createElement(c.J,{name:"adjust-circle"})),"Configuration found in .ini file")))},nt=p=>({actionBarContainer:(0,W.css)`
      display: flex;
      flexdirection: row;
      gap: ${p.spacing(1)};
      align-items: center;
      justify-content: flex-end;
    `,iniFileLabel:(0,W.css)`
      display: flex;
      color: ${p.colors.text.primary};
      justify-content: flex-end;
    `,tooltipContainer:(0,W.css)`
      padding: ${p.spacing(0,1)};
    `,statusContainer:(0,W.css)`
      display: flex;
      flex-direction: column;
      font-size: ${p.typography.bodySmall.fontSize};
      border-left: 1px solid ${p.colors.border.medium};
      padding: ${p.spacing(0,2)};
    `,statusBadge:(0,W.css)`
      span {
        font-size: ${p.typography.size.xs};
      }
    `,statusLabel:(0,W.css)`
      color: ${p.colors.text.secondary};
    `,protocolContainer:(0,W.css)`
      display: flex;
      flex-direction: column;
      font-size: ${p.typography.bodySmall.fontSize};
      padding-right: ${p.spacing(1)};
    `,protocolLabel:(0,W.css)`
      color: ${p.colors.text.secondary};
    `,initext:(0,W.css)`
      font-size: ${p.typography.bodySmall.fontSize};
      color: ${p.colors.text.secondary};
      padding: ${p.spacing(1)} 0; // Add some padding
      max-width: 90%; // Add a max-width to prevent text from stretching too wide
    `});var Xe=e(91281),ut=e(70036);function ht(p,N,F){nn(F,p(N))}function wt(p){const N={valid:!0,errors:[]};return ht(gn,p,N),ht(Sn,p,N),ht(Cn,p,N),ht(pn,p,N),N}function mn(p,N){switch(N){case SAMLStepKey.General:return!gn(p).valid;case SAMLStepKey.KeyCert:return!Sn(p).valid;case SAMLStepKey.ConnectToIdP:return!Cn(p).valid;case SAMLStepKey.AssertionMapping:return!pn(p).valid;default:return!1}}function vn(p){const N={};return xt.forEach(({id:F})=>{switch(F){case B.General:N[F]=gn(p);return;case B.KeyCert:N[F]=Sn(p);return;case B.ConnectToIdP:N[F]=Cn(p);return;case B.AssertionMapping:N[F]=pn(p);return}}),N}function gn(p){const N={valid:!0,errors:[]},{allowIdpInitiated:F,relayState:G}=p;return F===!0&&!G&&Ct(N,"Relay state should be configured"),G&&G.length>80&&Ct(N,"Relay state should be 80 characters or less"),N}function Sn(p){const N={valid:!0,errors:[]},{privateKey:F,privateKeyPath:G,certificate:J,certificatePath:se}=p;return!F&&!G&&Ct(N,"Private key should be configured"),!J&&!se&&Ct(N,"Certificate key should be configured"),F&&!F.startsWith("***")&&!Ut(F)&&Ct(N,"Not valid PEM private key"),J&&!J.startsWith("***")&&!Gt(J)&&Ct(N,"Not valid PEM certificate"),N}function Cn(p){const N={valid:!0,errors:[]},{idpMetadataUrl:F,idpMetadataPath:G,idpMetadata:J,metadataValueType:se}=p;return(se==="base64"&&!J||se==="url"&&!F||se==="path"&&!G||!F&&!G&&!J)&&Ct(N,"IdP metadata should be configured"),N}function pn(p){return{valid:!0,errors:[]}}function nn(p,N){N.valid||(p.valid=!1,p.errors?.push(...N.errors))}function Ct(p,N){p.valid=!1,p.errors?.push(N)}function bt(p){return/^([0-9]*(\.[0-9]*)?[smh]+)+$/.test(p)}function Ut(p){try{const N=atob(p);return _t(N)}catch{return!1}}function _t(p){try{const N=ut.pem.decode(p);return!(N.length>1||N[0].type!=="PRIVATE KEY")}catch{return!1}}function Gt(p){try{const N=atob(p);return jt(N)}catch{return!1}}function jt(p){try{const N=ut.pki.certificateFromPem(p),F=new Date;return!(N.validity.notBefore>F||N.validity.notAfter<F)}catch{return!1}}var sn=e(34099);const St={assertionAttributeName:"displayName",assertionAttributeLogin:"mail",assertionAttributeEmail:"mail"},mt={storedSamlSettings:{},samlSettings:{},samlStep:1,activeStep:B.General,signRequests:!1,keyCertValueType:"base64",keyConfigured:!1,certConfigured:!1,metadataValueType:"url",configChanged:!1,showSavedBadge:!1,visitedSteps:[],isUpdated:!1,isLoading:!1,configFoundInIniFile:!1},kt=(0,sn.oM)({name:"samlConfig",initialState:mt,reducers:{settingsLoaded:(p,N)=>({...p,samlSettings:N.payload,configChanged:!1,isLoading:!1}),setStoredSAMLSettings:(p,N)=>({...p,storedSamlSettings:N.payload}),setConfigFoundInIniFile:(p,N)=>({...p,configFoundInIniFile:N.payload}),settingsUpdated:(p,N)=>({...p,samlSettings:N.payload,configChanged:!0}),settingsLoadingBegin:p=>({...p,isLoading:!0}),settingsLoadingEnd:p=>({...p,isLoading:!1}),samlStepChanged:(p,N)=>({...p,samlStep:N.payload}),setSignRequests:(p,N)=>({...p,signRequests:N.payload}),setKeyCertValueType:(p,N)=>({...p,keyCertValueType:N.payload}),setKeyConfigured:(p,N)=>({...p,keyConfigured:N.payload}),setCertConfigured:(p,N)=>({...p,certConfigured:N.payload}),setMetadataValueType:(p,N)=>({...p,metadataValueType:N.payload}),settingsChanged:(p,N)=>({...p,configChanged:N.payload}),setError:(p,N)=>({...p,error:N.payload}),resetError:p=>({...p,error:void 0}),setShowSavedBadge:(p,N)=>({...p,showSavedBadge:N.payload}),addVisitedStep:(p,N)=>({...p,visitedSteps:[...p.visitedSteps,...N.payload]}),clearSAMLState:p=>({...p,isUpdated:!1,visitedSteps:[]})}}),{settingsLoaded:it,settingsUpdated:pt,samlStepChanged:It,setStoredSAMLSettings:Qt,setSignRequests:rn,setKeyCertValueType:un,setKeyConfigured:xn,setCertConfigured:Kn,setMetadataValueType:_n,settingsChanged:Ma,setShowSavedBadge:la,setConfigFoundInIniFile:aa,addVisitedStep:ba,clearSAMLState:ga,settingsLoadingBegin:Ca,settingsLoadingEnd:Ha,setError:ka,resetError:ma}=kt.actions,Rt={samlConfig:kt.reducer},Mt=5e3;function $t(){return async p=>{if(s.contextSrv.hasPermission(o.AccessControlAction.SettingsRead))try{p(Ca());const F=(await(0,y.i)().get("/api/admin/settings"))["auth.saml"]||{},G=Nt(F);try{const J=await Pn();p(aa(Ve(J)))}catch(J){console.error("Failed to load verbose settings:",J)}p(Qt(F)),p(rn(!!G.signatureAlgorithm)),p(un(G.privateKeyPath?"path":"base64")),p(xn(!!G.privateKeyPath||!!G.privateKey)),p(Kn(!!G.certificatePath||!!G.certificate)),p(_n(ue(G))),p(it(G))}catch{p(Ha())}}}async function Pn(){return s.contextSrv.hasPermission(o.AccessControlAction.SettingsRead)?(0,y.i)().get("/api/admin/settings-verbose"):{}}function tn(p,N){return async F=>{F(ma());const G=wt(p);if(!G.valid){F(ka({message:"Cannot save settings",errors:G.errors}));return}const J=ge(p);if(J.updates){const me=Be(J.updates["auth.saml"],N);J.updates["auth.saml"]=me}await F((0,Xe.zQ)(J))&&(F(Da()),F($t()))}}function Un(p){return async N=>{await N((0,Xe.zQ)(p))&&(N(Da()),N($t()))}}function $n(){return async p=>{p(Un({removals:{"auth.saml":["enabled","name","single_logout","allow_sign_up","auto_login","certificate","certificate_path","private_key","private_key_path","signature_algorithm","idp_metadata","idp_metadata_path","idp_metadata_url","max_issue_delay","metadata_valid_duration","allow_idp_initiated","relay_state","assertion_attribute_name","assertion_attribute_login","assertion_attribute_email","assertion_attribute_groups","assertion_attribute_role","assertion_attribute_org","allowed_organizations","org_mapping","role_values_editor","role_values_admin","role_values_grafana_admin","name_id_format","skip_org_role_sync"]}}))}}function kn(){return async p=>{p(Un({updates:{"auth.saml":{enabled:"true"}}}))}}function Fn(){return async p=>{p(Un({updates:{"auth.saml":{enabled:"false"}}}))}}function Da(){return async p=>{p(la(!0)),setTimeout(()=>{p(la(!1))},Mt)}}const Ta=p=>{const{samlSettings:N,configFoundInIniFile:F,storedSamlSettings:G,isUpdated:J,visitedSteps:se,keyCertValueType:me,keyConfigured:be,certConfigured:Ae,signRequests:Ke,metadataValueType:Ye,showSavedBadge:Ze,error:ot}=p.samlConfig;return{isUpdated:J,samlSettings:N,configFoundInIniFile:F,storedSamlSettings:G,visitedSteps:se,keyCertValueType:me,keyConfigured:be,certConfigured:Ae,signRequests:Ke,metadataValueType:Ye,showSavedBadge:Ze,error:ot}},ca={addVisitedStep:ba,clearSAMLState:ga,saveSAMLSettings:tn,enableSAML:kn,disableSAML:Fn,resetSAMLSettings:$n,setError:ka,resetError:ma},Sa=(0,k.connect)(Ta,ca),Yt=({samlSettings:p,storedSamlSettings:N,keyCertValueType:F,metadataValueType:G,signRequests:J,activeStep:se,addVisitedStep:me,children:be,clearSAMLState:Ae,confirmRedirect:Ke,keyConfigured:Ye,certConfigured:Ze,isUpdated:ot,error:rt,resetError:gt,visitedSteps:Pt,showSavedBadge:vt,label:Dt,className:Vt,getFormData:en,onSubmit:zt,saveSAMLSettings:an,enableSAML:Jt,configFoundInIniFile:ln,disableSAML:yn,resetSAMLSettings:En})=>{const In=(0,A.wW)(Kt),Wn=fe(se),On=(0,ce.k6)(),Xn=(0,a.useRef)(null),[jn,Ln]=(0,a.useState)(Ke||ot);(0,a.useEffect)(()=>{(Ba=>{Ba===xt[xt.length-1].id?me(xt.map(ls=>ls.id)):me([Ba])})(se)},[se,me]),(0,a.useEffect)(()=>{Ln(Ke||ot)},[Ke,ot]);const na=wa=>{wa.preventDefault();const Ba=xe(Wn.id);zt(),On.push(Ba)},ia=()=>{let wa={...p,keyCertValueType:F,signRequests:J,metadataValueType:G,keyConfigured:Ye,certConfigured:Ze};if(en){const Ba=en();wa={...wa,...Ba}}return wa},$a=async wa=>{const Ba=ia();wa&&(Ba.enabled=!0),an(Ba,N),(0,i.ff)("authentication_saml_saved",{enabled:Ba.enabled}),Ln(!1),Ae()},Va=()=>{(0,i.ff)("authentication_saml_enabled"),Jt()},ya=()=>{(0,i.ff)("authentication_saml_disabled"),yn()},_a=()=>{Ae(),(0,i.ff)("authentication_saml_abandoned")},fa=()=>{(0,i.ff)("authentication_saml_removed"),En()},ea=wa=>!xt.map(ls=>xe(ls.id)).includes(wa.pathname),ha=()=>{const wa=xt[xt.length-1].id;se!==wa&&Xn.current?.click()},Ra=vn(ia());return a.createElement("form",{onSubmit:na,className:In.container},a.createElement(Ge,{enabled:p.enabled,configFoundInIniFile:ln,isNewConfig:Ie(N),onSave:()=>$a(),onSaveAndEnable:()=>$a(!0),onEnable:Va,onDisable:ya,onRemove:fa}),a.createElement(Ue,{confirmRedirect:jn,onDiscard:_a,onLocationChange:ea}),a.createElement("div",{className:In.inner},a.createElement(tt,{steps:xt,activeStep:se,visitedSteps:Pt,onStepChange:ha,getNextUrl:xe,validationResults:Ra}),a.createElement(we,null),a.createElement(Me,{error:rt,onReset:gt}),a.createElement("div",{className:(0,W.cx)(In.content,Vt)},a.createElement(q.C,{label:a.createElement("div",{className:In.header},Dt&&a.createElement(ne.D,null,Dt),a.createElement("div",null,vt&&a.createElement(pe.C,{text:"Saved",color:"green",icon:"check"})))},be),a.createElement(Oe,{ref:Xn,activeStep:se}))))},Kt=p=>({container:(0,W.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      align-content: center;
    `,header:(0,W.css)`
      display: flex;
      justify-content: space-between;
    `,inner:(0,W.css)`
      display: flex;
      justify-content: flex-start;
      flex-direction: column;
      flex: 1 0 auto;
    `,content:(0,W.css)`
      padding-bottom: ${p.spacing(3)};
    `}),hn=Sa(Yt),Mn=[{label:"Default",value:""},{label:"Unspecified",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"},{label:"Email address",value:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"},{label:"Persistent",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"},{label:"Transient",value:"urn:oasis:names:tc:SAML:2.0:nameid-format:transient"}];function Hn(p){return{samlSettings:p.samlConfig.samlSettings}}const Jn={settingsUpdated:pt},Qn=(0,k.connect)(Hn,Jn),va=({samlSettings:p,settingsUpdated:N})=>{const F=(0,A.wW)(Ga),{assertionAttributeName:G,assertionAttributeLogin:J,assertionAttributeEmail:se,assertionAttributeRole:me,assertionAttributeGroups:be,assertionAttributeOrg:Ae,roleValuesEditor:Ke,roleValuesAdmin:Ye,roleValuesGrafanaAdmin:Ze,orgMapping:ot,allowedOrganizations:rt,nameIdFormat:gt,skipOrgRoleSync:Pt}=p,{handleSubmit:vt,control:Dt,register:Vt,getValues:en,formState:{isDirty:zt}}=(0,_.cI)({defaultValues:{assertionAttributeName:G,assertionAttributeLogin:J,assertionAttributeEmail:se,assertionAttributeRole:me,assertionAttributeGroups:be,assertionAttributeOrg:Ae,roleValuesEditor:Ke,roleValuesAdmin:Ye,roleValuesGrafanaAdmin:Ze,orgMapping:ot,allowedOrganizations:rt,nameIdFormat:gt||"",skipOrgRoleSync:Pt}}),an=({...Wn})=>{zt&&N({...p,...Wn})},{orgRole:Jt,isGrafanaAdmin:ln}=s.contextSrv.user,yn=ln,En=Jt==="Admin"||yn,In=Jt==="Editor"||En;return a.createElement(hn,{activeStep:B.AssertionMapping,onSubmit:vt(an),confirmRedirect:zt,getFormData:en,className:F.wrapper,label:"User mapping"},a.createElement("div",{className:F.description},"Map SAML assertion attributes to the Grafana user attributes. Assertion attributes support template mappings. Team sync is available if groups attribute is configured."),a.createElement("div",{className:F.mappingContainer},a.createElement("div",{className:F.mappingSection},a.createElement("div",{className:F.mappingHeader},"Assertion attributes mappings",a.createElement(z.u,{content:"Assertion attributes mapping in Grafana takes user information from a SAML response and uses it to create or update a user in its database. It reads attributes\u2014key/value pairs\u2014within the assertion, such as Name, Login handle, and email. Configurations allow for key selection modification.",placement:"top"},a.createElement(c.J,{name:"info-circle",className:F.icon}))),a.createElement(H.g,{name:"assertionAttributeName",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Name attribute",id:"assertionAttributeName",placeholder:"displayName"})}),a.createElement(H.g,{name:"assertionAttributeLogin",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Login attribute",placeholder:"mail",id:"assertionAttributeLogin"})}),a.createElement(H.g,{name:"assertionAttributeEmail",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Email attribute",placeholder:"mail",id:"assertionAttributeEmail"})}),a.createElement(H.g,{name:"assertionAttributeGroups",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Groups attribute",id:"assertionAttributeGroups"})}),a.createElement(H.g,{name:"assertionAttributeRole",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Role attribute",id:"assertionAttributeRole"})}),En&&a.createElement(H.g,{name:"assertionAttributeOrg",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Org attribute",id:"assertionAttributeOrg"})})),a.createElement("div",{className:F.mappingSection},In&&a.createElement(a.Fragment,null,a.createElement("div",{className:F.mappingHeader},"Role mapping",a.createElement(z.u,{content:"Role mapping syncs user roles from your identity provider to Grafana by configuring role attributes for Editor, Admin, and Grafana Admin roles.",placement:"top"},a.createElement(c.J,{name:"info-circle",className:F.icon}))),a.createElement(H.g,{name:"roleValuesEditor",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Editor",width:60,id:"roleValuesEditor"})})),En&&a.createElement(H.g,{name:"roleValuesAdmin",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Admin",width:60,id:"roleValuesAdmin"})}),yn&&a.createElement(H.g,{name:"roleValuesGrafanaAdmin",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Grafana Admin",width:60,id:"roleValuesGrafanaAdmin"})}),a.createElement(Q.g,{label:"Skip organization role sync",description:"Prevent synchronizing for SAML users organization roles from your IdP."},a.createElement(X.r,{...Vt("skipOrgRoleSync"),defaultChecked:Pt,id:"skipOrgRoleSync"}))),yn&&a.createElement("div",{className:F.mappingSection},a.createElement("div",{className:F.mappingHeader},"Org mapping",a.createElement(z.u,{content:"Organization mapping allows you to assign users to particular organization in Grafana depending on attribute value obtained from identity provider. Use the configuration to assign users from your organization to the Grafana organization.",placement:"top"},a.createElement(c.J,{name:"info-circle",className:F.icon}))),a.createElement(H.g,{name:"orgMapping",control:Dt,render:({field:{ref:Wn,...On}})=>a.createElement(Z,{...On,label:"Org mapping",width:60,id:"orgMapping"})}))),a.createElement(Q.g,{label:"Allowed organizations",description:"List of comma- or space-separated SAML organization names. User should be a member of at least one organization to log in."},a.createElement(te.I,{...Vt("allowedOrganizations"),id:"allowedOrganizations",width:60})),a.createElement(Q.g,{label:"Name identifier format",description:"Name identifier formats control how the users at identity provider are mapped to users in Grafana"},a.createElement(H.g,{name:"nameIdFormat",control:Dt,render:({field:{ref:Wn,onChange:On,...Xn}})=>a.createElement(g.Ph,{...Xn,onChange:jn=>{On(jn.value)},width:30,options:Mn,"aria-label":"nameIdFormat"})})))},Ga=p=>({wrapper:(0,W.css)`
      width: 100%;
    `,description:(0,W.css)`
      color: ${p.colors.text.secondary};
      margin-bottom: ${p.spacing(2)};
      font-size: ${p.typography.bodySmall.fontSize};
      width: ${p.spacing(80)};
    `,mappingContainer:(0,W.css)`
      background: ${p.colors.background.secondary};
      padding: ${p.spacing(2)};
      margin-bottom: ${p.spacing(4)};
    `,mappingSection:(0,W.css)`
      margin-bottom: ${p.spacing(2)};
    `,mappingHeader:(0,W.css)`
      display: flex;
      margin-bottom: ${p.spacing(2)};
    `,assertionEditorRow:(0,W.css)`
      display: flex;
      margin-bottom: ${p.spacing(1)};
    `,icon:(0,W.css)`
      fill: ${p.colors.secondary.text};
      margin-top: ${p.spacing(.5)};
      margin-left: ${p.spacing(.5)};
    `}),La=Qn(va);var Ia=e(71585),Ka=e(40705),qa=e(60105),hs=e(2576);function $s(p){return{samlSettings:p.samlConfig.samlSettings,metadataValueType:p.samlConfig.metadataValueType}}const zs={settingsUpdated:pt,setMetadataValueType:_n},Ns=(0,k.connect)($s,zs),Xs=[{label:"URL for metadata",value:"url"},{label:"Base64-encoded content",value:"base64"},{label:"Path to file",value:"path"}],ys=({samlSettings:p,metadataValueType:N,settingsUpdated:F,setMetadataValueType:G})=>{const J=(0,A.wW)(ua),{idpMetadataUrl:se,idpMetadataPath:me,idpMetadata:be,singleLogout:Ae}=p,{handleSubmit:Ke,control:Ye,register:Ze,watch:ot,getValues:rt,setValue:gt,formState:{errors:Pt,isDirty:vt}}=(0,_.cI)({mode:"onBlur",defaultValues:{idpMetadataUrl:se,idpMetadataPath:me,idpMetadata:be,metadataValueType:N||"url"}}),Dt=ot("metadataValueType"),Vt=({metadataValueType:zt,...an})=>{vt&&(F({...p,...an}),G(zt))},en=async zt=>{if(zt?.currentTarget?.files?.length){const Jt=await zt.currentTarget.files[0].text(),ln=btoa(Jt);gt("idpMetadata",ln,{shouldDirty:!0})}};return a.createElement(hn,{activeStep:B.ConnectToIdP,onSubmit:Ke(Vt),confirmRedirect:vt,getFormData:rt,className:J.wrapper,label:"Connect Grafana with Identity Provider"},a.createElement("div",{className:J.externalBorder},a.createElement("div",{className:J.doubleSideContainer},a.createElement("div",{className:J.internalContainer},a.createElement("div",{className:J.internalContainerHeader},a.createElement("div",{className:J.stepNumber},"1"),a.createElement("h4",null,"Configure IdP using Grafana metadata")),a.createElement("div",{className:J.internalContainerBody},a.createElement("div",{className:J.description},"To configure your identity provider (IdP) you will need the Grafana metadata URL. All below endpoints must be reachable by your Identity Provider (IdP)."),a.createElement(Q.g,{label:"Metadata URL",description:"SP metadata URL / SP Entity ID"},a.createElement("div",{className:J.inputWithCopyToClipboard},a.createElement(te.I,{width:50,id:"spMetadata",value:st,disabled:!0}),a.createElement(Ia.m,{className:J.copyToClipboardButton,variant:"primary",size:"md",icon:"copy",getText:()=>st},"Copy"))),a.createElement(Q.g,{label:"Assertion Consumer Service URL",description:"Assertion consumer service POST binding URL"},a.createElement("div",{className:J.inputWithCopyToClipboard},a.createElement(te.I,{width:50,id:"spACS",value:dt,disabled:!0}),a.createElement(Ia.m,{className:J.copyToClipboardButton,variant:"primary",size:"md",icon:"copy",getText:()=>dt},"Copy"))),Ae&&a.createElement(Q.g,{label:"SLO URL",description:"Logout service redirect binding URL / Logout service POST binding URL"},a.createElement("div",{className:J.inputWithCopyToClipboard},a.createElement(te.I,{width:50,id:"spSLO",value:Tt,disabled:!0}),a.createElement(Ia.m,{className:J.copyToClipboardButton,variant:"primary",size:"md",icon:"copy",getText:()=>Tt},"Copy"))))),a.createElement("div",{className:J.internalContainer},a.createElement("div",{className:J.internalContainerHeader},a.createElement("div",{className:J.stepNumber},"2"),a.createElement("h4",null,"Finish configuring Grafana using IdP data")),a.createElement("div",{className:J.internalContainerBody},a.createElement("div",{className:J.description},"Visit your IdP's configuration panel, add new app and use metadata from step one to connect with Grafana. You will need to copy your IdP's metadata and provide it below. Test connection and copy assertion labels/values."),a.createElement(Q.g,{label:"IdP's metadata ",description:"Must be the same as set-up or required by IdP."},a.createElement(H.g,{name:"metadataValueType",control:Ye,render:({field:{ref:zt,...an}})=>a.createElement(Ka.S,{...an,options:Xs})})),Dt==="url"&&a.createElement(Q.g,{label:"Metadata URL",description:"URL for IdP metadata",invalid:!!Pt.idpMetadataUrl,error:Pt.idpMetadataUrl?.message},a.createElement(te.I,{...Ze("idpMetadataUrl",{validate:zt=>Dt==="url"&&!!zt||"Required"}),id:"metadataUrl",width:60})),Dt==="base64"&&a.createElement(a.Fragment,null,a.createElement(Q.g,{label:"Base64-encoded IdP metadata",invalid:!!Pt.idpMetadata,error:Pt.idpMetadata?.message},a.createElement(H.g,{name:"idpMetadata",control:Ye,rules:{validate:zt=>Dt==="base64"&&!!zt||"Required"},render:({field:{ref:zt,...an}})=>a.createElement(qa.K,{...an,id:"metadataBase64",width:60})})),a.createElement(hs.p,{showFileName:!1,onFileUpload:en,className:J.uploadButton})),Dt==="path"&&a.createElement(Q.g,{label:"Path to IdP metadata file",invalid:!!Pt.idpMetadataPath,error:Pt.idpMetadataPath?.message},a.createElement(te.I,{...Ze("idpMetadataPath",{validate:zt=>Dt==="path"&&!!zt||"Required"}),id:"metadataPath",width:60})),a.createElement("div",{className:J.description},"If you want to test the connection from your IdP's panel make sure to allow IdP initiated login and provide the relay state information.")))),a.createElement("div",{className:J.internalContainerHeader},a.createElement("div",{className:J.stepNumber},"3"),a.createElement("h4",null,"Configure assertions, group, group and org mappings in the next step."))))},ua=p=>({wrapper:(0,W.css)`
      width: 100%;
    `,description:(0,W.css)`
      color: ${p.colors.text.secondary};
      margin-bottom: ${p.spacing(2)};
      font-size: ${p.typography.bodySmall.fontSize};
    `,externalBorder:(0,W.css)`
      border-radius: ${p.shape.borderRadius(1)};
      border: 1px solid ${p.colors.border.medium};
    `,doubleSideContainer:(0,W.css)`
      display: flex;
      flex-direction: row;
      justify-content: space-around;
    `,internalContainer:(0,W.css)`
      flex: 1 1 0;
      border-bottom: 1px solid ${p.colors.border.medium};
      &:first-child {
        border-right: 1px solid ${p.colors.border.medium};
      }
    `,internalContainerHeader:(0,W.css)`
      display: flex;
      justify-content: center;
      border-bottom: 1px solid ${p.colors.border.medium};
      padding: ${p.spacing(2)};
      text-align: center;
      h4 {
        margin-bottom: 0;
      }
    `,internalContainerBody:(0,W.css)`
      padding: ${p.spacing(2)};
    `,stepNumber:(0,W.css)`
      border: 1px solid ${p.colors.background.secondary};
      border-radius: ${p.shape.borderRadius(4)};
      background: ${p.colors.background.secondary};
      color: ${p.colors.text.secondary};
      width: ${p.spacing(3)};
      height: ${p.spacing(3)};
      margin-right: ${p.spacing(1)};
      font-weight: ${p.typography.fontWeightBold};
    `,copyToClipboardButton:(0,W.css)`
      border-top-left-radius: 0px;
      border-bottom-left-radius: 0px;
    `,inputWithCopyToClipboard:(0,W.css)`
      padding: 0;
      display: flex;
    `,uploadButton:(0,W.css)`
      margin-bottom: ${p.spacing(2)};
    `}),ja=Ns(ys);var Pa=e(64022);const Ya=p=>{const{samlSettings:N}=p.samlConfig;return{samlSettings:N}},_s={settingsUpdated:pt},cn=(0,k.connect)(Ya,_s)(({samlSettings:p,settingsUpdated:N})=>{const{allowSignUp:F,name:G,autoLogin:J,singleLogout:se,allowIdpInitiated:me,relayState:be,maxIssueDelay:Ae,metadataValidDuration:Ke}=p||{},{handleSubmit:Ye,register:Ze,watch:ot,getValues:rt,formState:{isDirty:gt,errors:Pt}}=(0,_.cI)({mode:"onBlur",defaultValues:{allowSignUp:F,name:G,autoLogin:J,singleLogout:se,allowIdpInitiated:me,relayState:be,maxIssueDelay:Ae,metadataValidDuration:Ke}}),vt=ot("allowIdpInitiated"),Dt=zt=>{gt&&N({...p,...zt})},Vt=zt=>!zt||bt(zt)?!0:"Not a valid duration",en=zt=>vt&&zt?zt.length>80?"Relay state needs to be 80 characters or less":!0:"Relay state is required";return a.createElement(hn,{activeStep:B.General,onSubmit:Ye(Dt),confirmRedirect:gt,getFormData:rt,label:"General settings"},a.createElement(Pa.Lh,null,a.createElement(Q.g,{label:"Display name for this SAML 2.0 integration",description:"Helpful if you use more than one SSO IdP provider or protocol."},a.createElement(te.I,{...Ze("name"),id:"displayName",placeholder:"SAML"}))),a.createElement(Q.g,{label:"Allow signup",description:"Whether to allow new Grafana user creation through SAML login. If not enabled, then only existing Grafana users can log in with SAML."},a.createElement(X.r,{...Ze("allowSignUp"),defaultChecked:F,id:"allowSignup"})),a.createElement(Q.g,{label:"Auto login",description:"Attempt to log in with SAML automatically, skipping the login screen."},a.createElement(X.r,{...Ze("autoLogin"),defaultChecked:J,id:"autoLogin"})),a.createElement(Q.g,{label:"Single logout",description:"Allows users to log out from IdP session and applications associated with the current IdP session established via SAML."},a.createElement(X.r,{...Ze("singleLogout"),defaultChecked:se,id:"singleLogout"})),a.createElement(Q.g,{label:"Identity provider initiated login",description:"Allows users to log in into Grafana directly from identity provider."},a.createElement(X.r,{...Ze("allowIdpInitiated"),defaultChecked:me,id:"allowIdpInitiated"})),vt&&a.createElement(Q.g,{label:"Relay state",description:"Required. Should match relay state configured in IdP and trailing space is required.",required:vt,invalid:vt&&!!Pt.relayState,error:Pt.relayState?.message},a.createElement(te.I,{...Ze("relayState",{validate:en}),width:60,id:"relayState",defaultValue:be})),a.createElement(Q.g,{label:"Max issue delay",description:"Duration, since the IdP issued a response and Grafana is allowed to process it.",invalid:!!Pt.maxIssueDelay,error:Pt.maxIssueDelay?.message},a.createElement(te.I,{...Ze("maxIssueDelay",{validate:Vt}),width:24,id:"max_issue_delay",defaultValue:Ae,placeholder:"90s"})),a.createElement(Q.g,{label:"Metadata valid duration",description:"Duration, for how long Grafana metadata is valid.",invalid:!!Pt.metadataValidDuration,error:Pt.metadataValidDuration?.message},a.createElement(te.I,{...Ze("metadataValidDuration",{validate:Vt}),defaultValue:Ke,width:24,id:"metadataValidDuration",placeholder:"48h"})))}),os=({isConfigured:p,onReset:N,...F})=>{const G=(0,A.wW)(qs);return a.createElement("div",{className:G.inputWithReset},p&&a.createElement(te.I,{...F,value:"configured",disabled:!0}),!p&&a.createElement(te.I,{...F}),p&&a.createElement(Je.zx,{className:G.resetButton,variant:"primary",size:"md",onClick:N},"Reset"))},qs=p=>({resetButton:(0,W.css)`
      border-top-left-radius: 0px;
      border-bottom-left-radius: 0px;
    `,inputWithReset:(0,W.css)`
      padding: 0;
      display: flex;
    `}),Dr=({isConfigured:p,onReset:N,onFileUpload:F,...G})=>{const J=(0,A.wW)(dr);return a.createElement("div",{className:J.inputWithReset},a.createElement("div",{className:J.textAreaInput},p&&a.createElement(qa.K,{...G,value:"configured",disabled:!0}),!p&&a.createElement(qa.K,{...G})),p&&a.createElement(Je.zx,{className:J.fileUploadButton,variant:"primary",size:"md",onClick:N},"Reset"),!p&&a.createElement(hs.p,{className:J.fileUploadButton,showFileName:!1,onFileUpload:F}))},dr=p=>({resetButton:(0,W.css)`
      border-top-left-radius: 0px;
      border-bottom-left-radius: 0px;
    `,fileUploadButton:(0,W.css)`
      margin-left: ${p.spacing(1)};
    `,inputWithReset:(0,W.css)`
      padding: 0;
      display: flex;
    `,textAreaInput:(0,W.css)`
      width: ${p.spacing(60)};
    `});function Fr(p){const{samlSettings:N,storedSamlSettings:F,signRequests:G,keyCertValueType:J,keyConfigured:se,certConfigured:me}=p.samlConfig;return{samlSettings:N,storedSettings:F,signRequests:G,keyCertValueType:J,keyConfigured:se,certConfigured:me}}const As={settingsUpdated:pt,setSignRequests:rn,setKeyCertValueType:un,setKeyConfigured:xn,setCertConfigured:Kn},Qs=(0,k.connect)(Fr,As),Ls=[{label:"Base64-encoded content",value:"base64"},{label:"Path to file",value:"path"}],ws=[{label:"RSA-SHA256 (default)",value:"rsa-sha256"},{label:"RSA-SHA512",value:"rsa-sha512"},{label:"RSA-SHA1",value:"rsa-sha1"}],Sr=Qs(({samlSettings:p,storedSettings:N,signRequests:F,keyCertValueType:G,keyConfigured:J,certConfigured:se,setKeyCertValueType:me,setSignRequests:be,setKeyConfigured:Ae,setCertConfigured:Ke,settingsUpdated:Ye})=>{const{privateKey:Ze,privateKeyPath:ot,certificate:rt,certificatePath:gt,signatureAlgorithm:Pt}=p||{},{handleSubmit:vt,control:Dt,register:Vt,watch:en,getValues:zt,setValue:an,formState:{errors:Jt,isDirty:ln}}=(0,_.cI)({mode:"onBlur",defaultValues:{privateKey:Ze||"",privateKeyPath:ot||"",certificate:rt||"",certificatePath:gt||"",signatureAlgorithm:Pt||"rsa-sha256",keyCertValueType:G,signRequests:F}}),yn=en("signRequests"),En=en("keyCertValueType"),In=zt(),Wn=J&&Re("privateKey",In,N),On=J&&Re("privateKeyPath",In,N),Xn=se&&Re("certificate",In,N),jn=se&&Re("certificatePath",In,N),Ln=ya=>{if(ln){const{signRequests:_a,keyCertValueType:fa,certConfigured:ea,keyConfigured:ha,...Ra}=ya;Ye({...p,...Ra}),be(_a),me(fa)}},na=()=>{const{...ya}=zt();return{...ya,keyConfigured:J,certConfigured:se}},ia=ya=>()=>{an(ya,"",{shouldDirty:!0}),["privateKey","privateKeyPath"].includes(ya)?Ae(!1):Ke(!1)},$a=ya=>async _a=>{if(_a?.currentTarget?.files?.length){const ea=await _a.currentTarget.files[0].text(),ha=btoa(ea);an(ya,ha,{shouldDirty:!0})}},Va=(ya,_a,fa)=>_a?!0:G==="base64"&&fa==="privateKey"&&ya&&!Ut(ya)?"Not valid PEM key":G==="base64"&&fa==="certificate"&&ya&&!Gt(ya)?"Not valid PEM certificate":!0;return a.createElement(hn,{activeStep:B.KeyCert,onSubmit:vt(Ln),confirmRedirect:ln,getFormData:na,label:"Key and certificate"},a.createElement(Q.g,{label:"Signing and encryption key and certificate (required)",description:`Certificate and private key required to exchange information between the Grafana and the IdP.
          The private key needs to be issued in a PKCS#8 format. Certificate should be valid X.509 certificate.`},a.createElement(H.g,{name:"keyCertValueType",control:Dt,render:({field:{ref:ya,..._a}})=>a.createElement(Ka.S,{..._a,options:Ls})})),En==="base64"&&a.createElement(a.Fragment,null,a.createElement(Q.g,{label:"Private key",htmlFor:"privateKey",description:"Base64-encoded private key",invalid:!!Jt.privateKey,error:Jt.privateKey?.message},a.createElement(H.g,{name:"privateKey",control:Dt,rules:{validate:ya=>Va(ya,J,"privateKey")},render:({field:{ref:ya,..._a}})=>a.createElement(Dr,{..._a,id:"privateKey",required:!0,isConfigured:Wn,onReset:ia("privateKey"),onFileUpload:$a("privateKey")})})),a.createElement(Q.g,{label:"Certificate",htmlFor:"certificate",description:"Base64-encoded Grafana X.509 certificate",invalid:!!Jt.certificate,error:Jt.certificate?.message},a.createElement(H.g,{name:"certificate",control:Dt,rules:{validate:ya=>Va(ya,se,"certificate")},render:({field:{ref:ya,..._a}})=>a.createElement(Dr,{..._a,id:"certificate",required:!0,isConfigured:Xn,onReset:ia("certificate"),onFileUpload:$a("certificate")})}))),En==="path"&&a.createElement(a.Fragment,null,a.createElement(Q.g,{label:"Private key",description:"Path to the Grafana private key",invalid:!!Jt.privateKey,error:Jt.privateKey?.message},a.createElement(H.g,{name:"privateKeyPath",control:Dt,render:({field:{ref:ya,..._a}})=>a.createElement(os,{..._a,width:60,id:"privateKeyPath",isConfigured:On,onReset:ia("privateKeyPath")})})),a.createElement(Q.g,{label:"Certificate",description:"Path to the Grafana X.509 certificate",invalid:!!Jt.certificate,error:Jt.certificate?.message},a.createElement(H.g,{name:"certificatePath",control:Dt,render:({field:{ref:ya,..._a}})=>a.createElement(os,{..._a,width:60,id:"certificatePath",isConfigured:jn,onReset:ia("certificatePath")})}))),a.createElement(Q.g,{label:"Sign requests",description:"Sign outgoing requests to IdP"},a.createElement(X.r,{...Vt("signRequests"),id:"signRequests"})),yn&&a.createElement(Q.g,{label:"Signature algorithm",description:"Signature algorithm used for signing requests to the IdP. Must be the same as set-up or required by IdP."},a.createElement(H.g,{name:"signatureAlgorithm",control:Dt,render:({field:{ref:ya,..._a}})=>a.createElement(Ka.S,{..._a,options:ws})})))});function Lt(p){const{samlSettings:N,storedSamlSettings:F,keyCertValueType:G,metadataValueType:J,signRequests:se,keyConfigured:me,certConfigured:be}=p.samlConfig;return{samlSettings:N,storedSamlSettings:F,keyCertValueType:G,metadataValueType:J,signRequests:se,keyConfigured:me,certConfigured:be}}const Ot={settingsUpdated:pt,saveSAMLSettings:tn},on=(0,k.connect)(Lt,Ot),Xt=({samlSettings:p,storedSamlSettings:N,keyCertValueType:F,metadataValueType:G,signRequests:J,keyConfigured:se,certConfigured:me,settingsUpdated:be,saveSAMLSettings:Ae})=>{const Ke=(0,A.wW)(Dn),{handleSubmit:Ye,getValues:Ze,formState:{isDirty:ot}}=(0,_.cI)(),rt=({enabled:Pt})=>{ot&&be({...p,enabled:Pt})},gt=async()=>{let Pt={...p,keyCertValueType:F,keyConfigured:se,certConfigured:me,signRequests:J,metadataValueType:G,enabled:!0};Ae(Pt,N),(0,i.ff)("authentication_saml_saved"),ga()};return a.createElement(hn,{activeStep:B.SaveAndTest,onSubmit:Ye(rt),confirmRedirect:ot,getFormData:Ze,label:"Test and enable"},a.createElement("div",{className:Ke.description},a.createElement("span",null,"If you are ready to apply your SAML configuration use the \u201CSave and enable\u201D button. You will be able to disable the configuration.")),a.createElement(Pa.Lh,null,a.createElement(Je.zx,{variant:"primary",onClick:gt},"Save and enable")))},Dn=p=>({description:(0,W.css)`
      margin-bottom: ${p.spacing(2)};
      color: ${p.colors.text.primary};
      font-size: ${p.typography.body.fontSize};
    `}),wn=on(Xt);function Bn(){const p={id:"saml",type:"SAML",protocol:"SAML 2.0",displayName:"SAML",configPath:"saml/general"};(0,E.registerAuthProvider)(p,Tn);const N={id:"ldap",type:"LDAP",protocol:"LDAP",displayName:"LDAP",configPath:"ldap"};(0,E.registerAuthProvider)(N,Gn)}async function Gn(){if(s.contextSrv.hasPermission(o.AccessControlAction.SettingsRead)){const N=(await(0,y.i)().get("/api/admin/settings"))["auth.ldap"]||{};return{configured:N.enabled==="true",enabled:N.enabled==="true",configFoundInIniFile:N.enabled==="true",hide:N.enabled!=="true"}}return{configured:!1,enabled:!1}}async function Tn(){if(s.contextSrv.hasPermission(o.AccessControlAction.SettingsRead)){const p=await(0,y.i)().get("/api/admin/settings"),N=await(0,y.i)().get("/api/admin/settings-verbose"),F=p["auth.saml"]||{};return Ie(F)?{configured:!1,enabled:!1}:{configured:!0,enabled:F.enabled==="true",configFoundInIniFile:Ve(N)}}return{configured:!1,enabled:!1}}const xt=[{id:B.General,name:"General settings",component:cn},{id:B.KeyCert,name:"Key and certificate",component:Sr},{id:B.ConnectToIdP,name:"Connect Grafana with Identity Provider",component:ja},{id:B.AssertionMapping,name:"User mapping",component:La},{id:B.SaveAndTest,name:"Test and enable",component:wn}];var Nn=e(44644),Fa=e(67704);function us(p,N){const{isLoading:F,samlSettings:G}=p.samlConfig,{step:J}=N.match.params;return{isLoading:F,samlSettings:G,activeStep:J}}const Ts={loadSAMLSettings:$t},vs=(0,k.connect)(us,Ts),Ws={text:"Setup SAML single sign on",subTitle:`This guided application will guide you through the configuration
  process of SAML. You will need to follow steps and visit your Identity
  Provider's application to connect it with Grafana (The Service provider).
  This guided application will help you keep track of your progress.`,icon:"shield",id:"SAML"},Mr=vs(({isLoading:p,samlSettings:N,activeStep:F,loadSAMLSettings:G})=>{(0,a.useEffect)(()=>{G()},[G]);const J=(0,a.useCallback)(()=>{const se=xt.find(({id:me})=>me===F)?.component;return se?a.createElement(se,null):null},[F]);return a.createElement(Nn.T,{navId:"authentication",pageNav:Ws},a.createElement(Nn.T.Contents,null,p||(0,We.isEmpty)(N)?a.createElement(Fa.a,null):J()))});var Za=e(71949),Ps=e(67437),ur=e(26473),Xa=e(96509);class Es extends Xa.R{}Es.type="page-banner-display";var er=(p=>(p[p.info=0]="info",p[p.warning=1]="warning",p[p.error=2]="error",p))(er||{});function Mo(){const[p,N]=(0,a.useState)(),F=Kr(p?.severity),G=(0,A.wW)(Ae=>vr(Ae,F)),{chrome:J}=(0,ur.p)(),se=J.useState();(0,a.useEffect)(function(){const Ae=s.h$.subscribe(Es,Ke=>{se.chromeless||N(Ke.payload)});return function(){Ae.unsubscribe()}},[se.chromeless]);const me=(0,a.useCallback)(()=>{N(void 0),p?.onClose&&p.onClose()},[p]);if(!p)return null;const be=p.body;return a.createElement("div",{className:G.banner},a.createElement("div",{className:G.icon},a.createElement(c.J,{size:"xl",name:F.icon})),a.createElement("div",{className:G.content},a.createElement(be,{severity:p.severity??er.info})),p?.onClose&&a.createElement("div",{className:G.icon},a.createElement(Ps.h,{size:"xl",name:"times",onClick:me,className:G.close,"aria-label":"Close banner",tooltip:"Close"})))}function Kr(p){const N=(0,A.l4)();return(0,a.useMemo)(()=>{switch(p){case er.error:return{icon:"exclamation-circle",background:N.colors.error.main,text:N.colors.error.contrastText};case er.warning:return{icon:"exclamation-triangle",background:N.colors.warning.main,text:N.colors.warning.contrastText};case er.info:default:return{icon:"info-circle",background:N.colors.info.main,text:N.colors.info.contrastText}}},[N,p])}function vr(p,N){return{banner:(0,W.css)`
      flex-grow: 0;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      background-color: ${N.background};
      border-radius: 2px;
      height: 52px;
    `,icon:(0,W.css)`
      padding: ${p.spacing(0,2)};
      color: ${N.text};
      display: flex;
    `,content:(0,W.css)`
      flex-grow: 1;
      display: flex;
      align-items: center;
      color: ${N.text};
    `,close:(0,W.css)`
      color: ${N.text};
    `}}function $r(){(0,Za.nH)(Mo)}var je=e(86809),Zt=e(28706),Ht=e(52115),fn=e(41715),bn=e(58473),An=e(66970);const Vn=p=>{const{enableDataSourceCache:N,dataSource:F,pageId:G}=p,J=s.contextSrv.hasPermissionInMetadata(w.DataSourcesCachingWrite,F);return a.createElement(An.Z,{title:"Caching is not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"database",onClick:()=>{N(G)},proTip:"Enabling caching can reduce the amount of redundant requests sent to the data source.",proTipLink:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",proTipLinkTitle:"Learn more",buttonDisabled:!J})};var qn=e(3613);const Yn=p=>{const{cleanCache:N,dataSource:F,pageId:G}=p,[J,se]=(0,a.useState)(!1),me=Ke=>()=>{se(Ke)},be=()=>{N(G),se(!1)},Ae=s.contextSrv.hasPermissionInMetadata(w.DataSourcesCachingWrite,F);return a.createElement("div",null,a.createElement(Je.zx,{variant:"destructive",onClick:me(!0),disabled:!Ae},"Clear cache"),a.createElement(qn.s,{isOpen:J,title:"Clear cache",body:"Warning: This action impacts all cache-enabled data sources. If you are using Memcached, the system clears all data from the Memcached instance. Do you want to continue?",confirmText:"Clear cache",onConfirm:be,onDismiss:me(!1)}))};var ta=e(79978);const pa=p=>{const{disableDataSourceCache:N,dataSource:F,pageId:G}=p,J=s.contextSrv.hasPermissionInMetadata(w.DataSourcesCachingWrite,F);return a.createElement(Je.zx,{variant:"destructive",onClick:()=>N(G),disabled:!J},"Disable")},ms=p=>{const{updateDataSourceCache:N,pageId:F,useDefaultTTL:G,setUseDefaultTTL:J,defaultTTLMs:se,ttlQueriesMs:me,setTtlQueriesMs:be,ttlResourcesMs:Ae,setTtlResourcesMs:Ke,loading:Ye,enabled:Ze,dataSource:ot,dataSourceID:rt,dataSourceUID:gt}=p,Pt=s.contextSrv.hasPermissionInMetadata(w.DataSourcesCachingWrite,ot);return a.createElement("div",null,a.createElement(Q.g,{description:`Enable this to use the default TTL set in Grafana's configuration (${se} ms)`,label:"Use default TTL",disabled:Ye||!Pt},a.createElement(X.r,{value:G,onChange:()=>{J(!G)}})),a.createElement(Q.g,{description:"The time-to-live for a query cache item in milliseconds. Example: 5000",label:"Query TTL",disabled:Ye||G||!Pt},a.createElement(te.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(G?se:me)||0,onChange:vt=>{be(vt.currentTarget.valueAsNumber)}})),a.createElement(Q.g,{description:"The time-to-live for resources cache items in milliseconds. Example: 5000",label:a.createElement(ta._,null,a.createElement("span",null,"Resource TTL"),a.createElement(z.u,{content:a.createElement("div",null,"Resources are dynamic values that Grafana data source plugins retrieve from data sources for use in the query editor. Examples are Splunk namespaces, Prometheus labels, and CloudWatch metric names. Since these values update less frequently, you might prefer a longer cache TTL for Resources than queries. See the ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/"},"docs")," ","for more info.")},a.createElement(c.J,{name:"question-circle"}))),disabled:Ye||G||!Pt},a.createElement(te.I,{type:"number",className:"max-width-10",placeholder:"1000",min:0,value:(G?se:Ae)||0,onChange:vt=>{Ke(vt.currentTarget.valueAsNumber)}})),a.createElement(Pa.Lh,{spacing:"md",align:"flex-start",justify:"flex-start"},a.createElement(pa,{...p}),a.createElement(Je.zx,{disabled:Ye||!Pt,onClick:()=>N(F,{dataSourceID:rt,dataSourceUID:gt,enabled:Ze,defaultTTLMs:se,ttlQueriesMs:me,ttlResourcesMs:Ae,useDefaultTTL:G})},"Save")))};var Na=e(45937),Ea=(p=>(p.LoadDataSourceCache="LOAD_DATA_SOURCE_CACHE",p))(Ea||{});const Oa=p=>({type:"LOAD_DATA_SOURCE_CACHE",payload:p});function za(p){return async N=>{const F=await(0,Na.i)().post(`/api/datasources/${p}/cache/enable`,{});N(Oa(F))}}function es(p){return async N=>{const F=await(0,Na.i)().post(`/api/datasources/${p}/cache/disable`,{});N(Oa(F))}}function tr(p,N){return async F=>{const G=await(0,Na.i)().post(`/api/datasources/${p}/cache`,N);F(Oa(G))}}function nr(p){return async N=>{const F=await(0,Na.i)().get(`/api/datasources/${p}/cache`);N(Oa(F))}}function gi(p){return async N=>{const F=await(0,Na.i)().post(`/api/datasources/${p}/cache/clean`,{});N(Oa(F))}}function To(p,N){return{...p.dataSourceCache,pageId:N.uid,dataSource:p.dataSources.dataSource}}const go={disableDataSourceCache:es,updateDataSourceCache:tr,enableDataSourceCache:za,loadDataSourceCache:nr,loadDataSource:bn.gv,cleanCache:gi,loadDataSourceMeta:bn.b2},tc=(0,k.connect)(To,go),jd=p=>{const[N,F]=(0,a.useState)(p.enabled),[G,J]=(0,a.useState)(!0),[se,me]=(0,a.useState)(p.useDefaultTTL),[be,Ae]=(0,a.useState)(p.ttlQueriesMs),[Ke,Ye]=(0,a.useState)(p.ttlResourcesMs),{pageId:Ze,dataSource:ot,loadDataSource:rt,loadDataSourceCache:gt,loadDataSourceMeta:Pt,enableDataSourceCache:vt}=p;(0,a.useEffect)(()=>{F(p.enabled),me(p.useDefaultTTL),Ae(p.ttlQueriesMs),Ye(p.ttlResourcesMs),J(!1)},[p.useDefaultTTL,p.ttlQueriesMs,p.ttlResourcesMs,p.enabled]),(0,a.useEffect)(()=>{rt(Ze).then(Pt),gt(Ze)},[gt,rt,Pt,Ze]);const Dt=s.contextSrv.hasPermissionInMetadata(w.DataSourcesCachingWrite,ot),Vt=N?ms({...p,loading:G,useDefaultTTL:se,setUseDefaultTTL:me,ttlQueriesMs:be,setTtlQueriesMs:Ae,ttlResourcesMs:Ke,setTtlResourcesMs:Ye}):(0,fn.d5)()?a.createElement(nc,{action:Dt?{text:"Enable caching",onClick:()=>{vt(Ze)}}:void 0}):Vn(p);return a.createElement(a.Fragment,null,(0,fn.d5)()&&a.createElement(Ht.Xz,{featureId:"query-caching",eventVariant:"trial",featureName:"query caching",text:"Enable query caching for free during your trial of Grafana Pro."}),a.createElement("div",{className:"page-action-bar"},N&&!(0,fn.d5)()&&a.createElement("h3",{className:"page-sub-heading"},"Caching"),a.createElement("div",{className:"page-action-bar__spacer"}),a.createElement(Pa.Lh,{spacing:"md",align:"flex-end",justify:"flex-end"},N&&a.createElement(Yn,{...p}))),Vt)},nc=({action:p})=>{const N=(0,A.l4)();return a.createElement(Ht.TA,{action:p,listItems:["Load dashboards in less than a second from the cache, even when they include big queries and lots of users are looking at once","Save money and avoid rate limiting by reducing the number of API calls you make to data sources like Splunk, CloudWatch and Github","Author dashboards more smoothly by caching the data used to construct queries, like fields in ServiceNow or metrics available from Datadog"],image:`query-caching-${N.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/query-caching",featureName:"query caching",description:"With query caching, you can load dashboards faster and reduce costly queries to data sources by temporarily storing query results in memory, Redis, or Memcached."})},po=tc(jd),ac=()=>{const{uid:p}=(0,ce.UO)(),N=(0,Zt.xG)("cache"),F=(0,o.useSelector)(J=>J.navIndex),G=(0,je.ht)(F,`datasource-cache-${p}`,N);return a.createElement(Nn.T,{navId:"datasources",pageNav:G.main},a.createElement(Nn.T.Contents,null,a.createElement(po,{uid:p})))};var Oo=e(9906);const ho=({uid:p})=>((0,Oo.E)(p),a.createElement(a.Fragment,null,a.createElement(Ht.Xz,{featureName:"query caching",featureId:"query-caching"}),a.createElement(nc,null))),Vr=()=>{const{uid:p}=(0,ce.UO)(),N=(0,Oo.xG)("cache"),F=(0,o.useSelector)(J=>J.navIndex),G=(0,je.ht)(F,`datasource-cache-${p}`,N);return a.createElement(Nn.T,{navId:"datasources",pageNav:G.main},a.createElement(Nn.T.Contents,null,a.createElement(ho,{uid:p})))},_i={enabled:!1,dataSourceID:0,dataSourceUID:"",ttlQueriesMs:0,ttlResourcesMs:0,defaultTTLMs:0,useDefaultTTL:!0},ko={dataSourceCache:(p=_i,N)=>{switch(N.type){case Ea.LoadDataSourceCache:return{...N.payload}}return p}};var Ar=e(65808);const Qd=()=>{const{uid:p}=(0,ce.UO)(),{navId:N,pageNav:F}=(0,Ar.M)("cache");return a.createElement(Nn.T,{navId:N,pageNav:F},a.createElement(Nn.T.Contents,null,a.createElement(po,{uid:p})))},sc=()=>{const{uid:p}=(0,ce.UO)(),{navId:N,pageNav:F}=(0,Ar.M)("cache");return a.createElement(Nn.T,{navId:N,pageNav:F},a.createElement(Nn.T.Contents,null,a.createElement(ho,{uid:p})))};var zr=e(55925),Ua=e(99633),vo=e(21066),ks=e(29241),ar=e(64167),pi=e(41115),rc=e(727),hi=e(86064),ki=e(61965),ns=e(32053),Hi=e(56715),Fs=e(53933),oc=e(66656),Eo=e(93666),Ho=e(93998),Gi=e(65347),ic=e(75578),Io=e(5354);const ji=(p,N,F,G,J,se)=>{const me=[],be=(0,ki.U)({field:{config:{unit:se?.defaults?.unit,decimals:J.decimals}},theme:n.config.theme2,timeZone:N});let Ae=-1;for(const Ke of p){const{timeField:Ye}=(0,ns.sV)(Ke);if(Ye)for(const Ze of Ke.fields){if(Ze.type!==ks.fS.number)continue;Ae++;const ot=(0,Hi.k)({xField:Ye,yField:Ze,nullValueMode:Fs.Gl.Null});if(ot.length>0){const rt=(0,oc.Kx)({field:Ze,reducers:J.stats||[]});let gt=[];J.stats&&(gt=J.stats.map(Vt=>({...be(rt[Vt]),title:Vt})));let Pt;F[Ze.name]&&F[Ze.name].color?Pt={mode:Eo.S.Fixed,fixedColor:F[Ze.name].color}:Ze.config&&Ze.config.color?Pt=Ze.config.color:Pt={mode:Eo.S.Fixed,fixedColor:Io.O9[me.length%Io.O9.length]},Ze.config=se?{...Ze.config,unit:se.defaults.unit,decimals:se.defaults.decimals,color:Pt}:{...Ze.config,color:Pt},Ze.display=(0,ki.U)({field:Ze,timeZone:N,theme:n.config.theme2});const vt=(0,Ho.e)(Ye),Dt=(0,Ho.f)(Ye);Ye.display=(0,ki.U)({timeZone:N,field:{...Ye,type:Ye.type,config:{unit:Gi.U6.getTimeFieldUnit(Dt)}},theme:n.config.theme2}),me.push({label:(0,ic.CZ)(Ze,Ke,p),data:ot,color:Ze.config.color?.fixedColor,info:gt,isVisible:!0,yAxis:{index:F[Ze.name]&&F[Ze.name].yAxis||1},seriesIndex:Ae,timeField:{...Ye},valueField:{...Ze},timeStep:vt})}}}return me},yo="YYYY-MM-DD",_r=async(p,N)=>await(0,y.i)().get(`/api/usage/dashboard/${p}/views/recent?limit=${N}`),Qi=async(p,N)=>await(0,y.i)().get(`/api/usage/dashboard/${p}/views?limit=${N}`),Ro=p=>{const N=[];for(let F in p)N.push(p[F]);return N.sort((F,G)=>(0,Ua.CQ)(F.day,yo).valueOf()-(0,Ua.CQ)(G.day,yo).valueOf()),N},bo=async(p,N)=>{const F=await(0,y.i)().get(`/api/usage/dashboard/${p}/daily`,{days:N});return Ro(F)},Go=async(p,N)=>{const F=await(0,y.i)().get(`/api/usage/dashboard/${p}/public/daily`,{days:N});return Ro(F)},Yd=async(p,N,F)=>{const G=await(0,y.i)().get(`/api/usage/datasource/${p}/daily`,{from:N,to:F});return Ro(G)},vi=async p=>await(0,y.i)().get(`/api/usage/dashboard/${p}/info`);var Ao=e(80402);const jo=(0,Ao.B)(p=>{const N=p.colors.background.secondary;return{tabContent:(0,W.css)`
      height: 100%;
    `,tabsBar:(0,W.css)`
      padding-left: ${p.spacing(2)};
      margin: ${p.spacing(3,-1,-3,-3)};
    `,graphContainer:(0,W.css)`
      margin-top: ${p.spacing(2)};
      background-color: ${N};
    `,panelContent:(0,W.css)`
      contain: none;
    `,userBoxesContainer:(0,W.css)`
      display: flex;
      margin-top: ${p.spacing(3)};

      > div + div {
        margin-left: ${p.spacing(2)};
      }
    `,userBox:(0,W.css)`
      padding: ${p.spacing(2)};
      flex: 1;
      text-align: center;
      background-color: ${N};
      border-radius: 3px;

      button,
      img {
        margin: ${p.spacing(0,0,1,0)};
      }
    `,userName:(0,W.css)`
      font-weight: ${p.typography.fontWeightBold};
    `,tableContainer:(0,W.css)`
      margin-top: ${p.spacing(3)};
      background-color: ${N};
      padding-bottom: ${p.spacing(1)};
      border-radius: 3px;

      [role='cell']:first-child > div {
        padding: 4px;
      }
      [role='columnheader']:first-child {
        height: 33px;
      }
      [role='row']:not(:only-child):nth-child(odd) {
        background-color: ${p.colors.background.primary};
      }
    `,tableHeader:(0,W.css)`
      padding: ${p.spacing(0,2,.5,2)};
      display: flex;
      justify-content: space-between;
      align-items: center;

      h4 {
        margin-bottom: 0px;
        padding: ${p.spacing(3,0)};
      }
    `,userIcon:(0,W.css)`
      margin: 0 0;
      width: 26px;
      height: 26px;
      line-height: 20px;

      & > * {
        width: 26px;
        height: 26px;
        line-height: 20px;
      }
    `}}),lc=(p,N)=>({dataSourceUid:N.uid}),Zd={loadDataSource:bn.gv,loadDataSourceMeta:bn.b2},Jd=(0,k.connect)(lc,Zd);class fs extends a.PureComponent{constructor(N){super(N),this.state={dailySummaries:[],from:"",to:""}}async componentDidMount(){const{dataSourceUid:N,loadDataSource:F,loadDataSourceMeta:G}=this.props;if(F(N).then(G),(0,t.v)("analytics")){let J=(0,Ua.CQ)().subtract(30,"days").format(yo),se=(0,Ua.CQ)().format(yo);const me=await Yd(N,J,se);this.setState({dailySummaries:me,from:J,to:se})}}buildTimeRange(){const{from:N,to:F}=this.state,G=(0,Ua.CQ)(N),J=(0,Ua.CQ)(F).add(24,"hours");return{from:G,to:J,raw:{from:N,to:F}}}convertDailySummariesToDataFrame(N,F,G){const J=new vo.G([]),se=new vo.G([]);return N.forEach(me=>{J.buffer.push((0,Ua.CQ)(me.day,yo).valueOf());let be=me[F];F==="loadDuration"&&(be=me.queries?me.loadDuration/(me.queries*1e6):0),se.buffer.push(be)}),{name:F,fields:[{name:"Time",type:ks.fS.time,config:{},values:J},{name:F,type:G,config:{},values:se}],length:N.length}}renderChart(N,F){const{dailySummaries:G}=this.state,{color:J,fieldType:se,showBars:me,showLines:be,timeRange:Ae,title:Ke,valueField:Ye,width:Ze}=N;let ot=this.convertDailySummariesToDataFrame(G,Ye,se);const rt={[Ye]:{color:J}},gt=ji([ot],"browser",rt,{showBars:me,showLines:be,showPoints:!1},{placement:"bottom",displayMode:ar.jK.List,showLegend:!1});return a.createElement("div",{className:(0,W.cx)(F.graphContainer,"panel-container"),"aria-label":"Graph container",key:N.valueField},a.createElement("div",{className:"panel-title"},Ke),a.createElement("div",{className:(0,W.cx)("panel-content",F.panelContent)},a.createElement(pi.k,{height:150,width:Ze,timeRange:Ae,showBars:me,showLines:be,showPoints:!1,series:gt,timeZone:"browser"},a.createElement(rc.I,{mode:ar.f3.Multi}))))}renderContent(){const{theme:N}=this.props,F=jo(N),{dailySummaries:G}=this.state,J=this.buildTimeRange();return G?.length>0?a.createElement(zr.Z,{disableHeight:!0},({width:se})=>{const me=[{title:"Queries last 30 days",valueField:"queries",fieldType:ks.fS.number,width:se,timeRange:J,color:"",showBars:!0,showLines:!1},{title:"Errors last 30 days",valueField:"errors",fieldType:ks.fS.number,width:se,timeRange:J,color:N.colors.error.border,showBars:!0,showLines:!1},{title:"Average load duration last 30 days (ms)",valueField:"loadDuration",fieldType:ks.fS.number,width:se,timeRange:J,color:N.colors.primary.border,showBars:!0,showLines:!1}];return a.createElement("main",{style:{width:se}},me.map(be=>this.renderChart(be,F)))}):a.createElement("span",null,"No available data for this data source.")}render(){return(0,t.v)("analytics.writers")&&!(0,t.v)("analytics")?a.createElement(hi.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration"},a.createElement("span",null,"Data source insights are not available with an expired license. Data will continue to be collected but you need to update your license to see this page.")):a.createElement(a.Fragment,null,(0,fn.d5)()&&a.createElement(Ht.Xz,{featureId:"data-source-insights",eventVariant:"trial",featureName:"data source usage insights",text:"Enable data source usage insights for free during your trial of Grafana Pro."}),this.renderContent())}}const cc=Jd((0,A.HE)(fs)),Xd=()=>{const{uid:p}=(0,ce.UO)(),{navId:N,pageNav:F}=(0,Ar.M)("insights");return a.createElement(Nn.T,{navId:N,pageNav:F},a.createElement(Nn.T.Contents,null,a.createElement(cc,{uid:p})))},Yi=({uid:p})=>{(0,Oo.E)(p);const N=(0,A.l4)();return a.createElement(a.Fragment,null,a.createElement(Ht.Xz,{featureName:"data source usage insights",featureId:"data-source-insights"}),a.createElement(Ht.TA,{listItems:["Demonstrate and improve the value of your observability service by keeping track of user engagement","Keep Grafana performant by identifying and fixing slow, error-prone data sources","Clean up your instance by finding and removing unused data sources","Review individual data source usage insights at a glance in the UI, sort search results by usage and errors, or dig into detailed usage logs"],image:`datasource-insights-${N.isLight?"light":"dark"}.png`,featureName:"data source usage insights",description:"Usage Insights provide detailed information about data source usage, like the number of views, queries, and errors users have experienced. You can use this to improve users\u2019 experience and troubleshoot issues",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights"}))},dc=()=>{const{uid:p}=(0,ce.UO)(),{navId:N,pageNav:F}=(0,Ar.M)("insights");return a.createElement(Nn.T,{navId:N,pageNav:F},a.createElement(Nn.T.Contents,null,a.createElement(Yi,{uid:p})))};var Zi=e(88203),Er=e(23839),uc=e(35952),qd=e(23159),mr=e(79173);class Ji extends a.PureComponent{constructor(){super(...arguments),this.state=this.cleanState(),this.onTeamSelected=N=>{const F=N?.value;this.setState({teamId:F?F.id:0})},this.onUserSelected=N=>{this.setState({userId:N?N.id:0})},this.onPermissionChanged=N=>{this.setState({permission:N.value})},this.onTypeChanged=N=>{this.setState({type:N.value,userId:0,teamId:0})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.cleanState())}}cleanState(){return{userId:0,teamId:0,type:o.AclTarget.Team,permission:o.DataSourcePermissionLevel.Query}}isValid(){switch(this.state.type){case o.AclTarget.Team:return this.state.teamId>0;case o.AclTarget.User:return this.state.userId>0}return!0}render(){const{onCancel:N}=this.props,{type:F}=this.state,G="width-20",J=[{value:o.AclTarget.Team,label:"Team"},{value:o.AclTarget.User,label:"User"}];return a.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},a.createElement(uc.P,{onClick:N}),a.createElement("h5",null,"Add Permission For"),a.createElement(Er.l,{name:"addPermission",maxWidth:"none",onSubmit:this.onSubmit},()=>a.createElement(Pa.Lh,null,a.createElement(g.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:F,options:J,onChange:this.onTypeChanged,menuShouldPortal:!0}),F===o.AclTarget.User&&a.createElement(mr.f,{onSelected:this.onUserSelected,className:G}),F===o.AclTarget.Team&&a.createElement(qd.c,{onSelected:this.onTeamSelected,className:G}),a.createElement(g.Ph,{isSearchable:!1,options:o.dataSourceAclLevels,onChange:this.onPermissionChanged,value:o.dataSourceAclLevels.find(se=>se.value===this.state.permission),width:25,menuShouldPortal:!0}),a.createElement(Je.zx,{type:"submit",disabled:!this.isValid()},"Save"))))}}var Ei=e(82367),Qo=e(43533);const{Select:mc}=Ei.LegacyForms,yi={id:-1,datasourceId:-1,updated:"",created:"",permissionName:"Admin",builtInRole:"Admin",permission:Qo.zV.Admin},Xi={label:"Admin",description:"",value:Qo.zV.Admin},Po=({items:p,onRemoveItem:N})=>{const F=p.filter(se=>se.userId!==void 0),G=p.filter(se=>se.teamId!==void 0),J=[yi];return a.createElement("div",null,a.createElement(qi,{title:"Roles",items:J,onRemove:N}),a.createElement(qi,{title:"Users",items:F,onRemove:N}),a.createElement(qi,{title:"Teams",items:G,onRemove:N}))},qi=({title:p,items:N,onRemove:F})=>N.length===0?null:a.createElement("div",null,a.createElement("h5",null,p),a.createElement("table",{className:"filter-table gf-form-group"},a.createElement("tbody",null,N.map((G,J)=>a.createElement(fc,{key:`${J}-${G.id}`,item:G,onRemove:F}))))),fc=({item:p,onRemove:N})=>{const F=()=>p.teamId?a.createElement("img",{className:"filter-table__avatar",src:p.teamAvatarUrl,alt:`Avatar for team ${p.teamId}`}):p.userId?a.createElement("img",{className:"filter-table__avatar",src:p.userAvatarUrl,alt:`Avatar for user ${p.userId}`}):a.createElement(c.J,{size:"xl",name:"shield"}),G=()=>p.userId?a.createElement("span",{key:"name"},p.userLogin," "):p.teamId?a.createElement("span",{key:"name"},p.team," "):p.builtInRole?a.createElement("span",{key:"name"},p.builtInRole," "):a.createElement("span",{key:"name"}),J=[...Qo.nl,Xi];return a.createElement("tr",null,a.createElement("td",{style:{width:"1%"}},F()),a.createElement("td",{style:{width:"90%"}},G()),a.createElement("td",null),a.createElement("td",{className:"query-keyword"},"Can"),a.createElement("td",null,a.createElement("div",{className:"gf-form"},a.createElement(mc,{isDisabled:!0,onChange:()=>{},options:J,value:J.find(se=>se.value===p.permission)}))),a.createElement("td",null,p.builtInRole?a.createElement("button",{className:"btn btn-inverse btn-small"},a.createElement(c.J,{name:"lock",size:"sm"})):a.createElement("button",{className:"btn btn-danger btn-small",onClick:()=>N(p)},a.createElement(c.J,{name:"times",size:"sm"}))))},eu=({uid:p})=>((0,Oo.E)(p),a.createElement(a.Fragment,null,a.createElement(Ht.Xz,{featureName:"data source permissions",featureId:"data-source-permissions"}),a.createElement(gc,null))),gc=({action:p})=>{const N=(0,A.l4)();return a.createElement(Ht.TA,{action:p,featureName:"data source permissions",description:"With data source permissions, you can protect sensitive data by limiting access to this data source to specific users, teams, and roles.",listItems:["Protect sensitive data, like security logs, production databases, and personally-identifiable information","Clean up users\u2019 experience by hiding data sources they don\u2019t need to use","Share Grafana access more freely, knowing that users will not unwittingly see sensitive data"],image:`ds-permissions-${N.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/datasource_permissions"})},sr=eu;var el=(p=>(p.LoadDataSourcePermissions="LOAD_DATA_SOURCE_PERMISSIONS",p))(el||{});const no=p=>({type:"LOAD_DATA_SOURCE_PERMISSIONS",payload:p});function is(p){return async N=>{const F=await(0,Na.i)().get(`/api/datasources/${p}/permissions`);N(no(F))}}function pc(p){return async N=>{await(0,Na.i)().post(`/api/datasources/${p}/enable-permissions`,{}),N(is(p))}}function tu(p){return async N=>{await(0,Na.i)().post(`/api/datasources/${p}/disable-permissions`,{}),N(is(p))}}function hc(p,N){return async F=>{await(0,Na.i)().post(`/api/datasources/${p}/permissions`,N),F(is(p))}}function tl(p,N){return async F=>{await(0,Na.i)().delete(`/api/datasources/${p}/permissions/${N}`),F(is(p))}}function rr(p,N){const{uid:F}=N;return{uid:F,enabled:p.dataSourcePermission.enabled,isDefault:p.dataSources.dataSource.isDefault,permissions:p.dataSourcePermission.permissions}}const bi={addDataSourcePermission:hc,enableDataSourcePermissions:pc,disableDataSourcePermissions:tu,loadDataSourcePermissions:is,loadDataSource:bn.gv,loadDataSourceMeta:bn.b2,removeDataSourcePermission:tl},Lr=(0,k.connect)(rr,bi);class nu extends a.PureComponent{constructor(){super(...arguments),this.state={datasourceId:0,isAdding:!1},this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onEnablePermissions=()=>{const{enableDataSourcePermissions:N}=this.props;N(this.state.datasourceId)},this.onDisablePermissions=()=>{const{disableDataSourcePermissions:N}=this.props;N(this.state.datasourceId)},this.onAddPermission=N=>{const{addDataSourcePermission:F}=this.props,G={permission:N.permission};N.type===o.AclTarget.Team?F(this.state.datasourceId,Object.assign(G,{teamId:N.teamId})):N.type===o.AclTarget.User&&F(this.state.datasourceId,Object.assign(G,{userId:N.userId}))},this.onRemovePermission=N=>{this.props.removeDataSourcePermission(N.datasourceId,N.id)},this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.isEnabled=()=>this.props.enabled,this.renderActions=()=>{const N=[],{isAdding:F}=this.state;return this.isEnabled()&&(N.push(a.createElement(Je.zx,{variant:"primary",key:"add-permission",onClick:this.onOpenAddPermissions,disabled:F},"Add a permission")),N.push(a.createElement(Je.zx,{variant:"destructive",key:"disable-permissions",onClick:this.onDisablePermissions},"Disable permissions"))),N}}componentDidMount(){this.fetchDataSource().then(N=>{this.props.loadDataSourceMeta(N),this.setState({datasourceId:N.id}),this.fetchDataSourcePermissions(N.id)})}async fetchDataSource(){const{uid:N,loadDataSource:F}=this.props;return F(N)}async fetchDataSourcePermissions(N){const{loadDataSourcePermissions:F}=this.props;return F(N)}render(){const{permissions:N,isDefault:F}=this.props,{isAdding:G}=this.state;return a.createElement(a.Fragment,null,(0,fn.d5)()&&a.createElement(Ht.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}),a.createElement("div",{className:"page-action-bar"},a.createElement("h3",{className:"page-sub-heading"},"Permissions"),a.createElement("div",{className:"page-action-bar__spacer"}),this.renderActions()),F&&!this.isEnabled()&&a.createElement(re.b,{title:"Warning!"},"Enabling permissions on the default data source makes it unavailable for users not listed in the permissions."),this.isEnabled()?a.createElement("div",null,a.createElement(Zi.s,{in:G},a.createElement(Ji,{onAddPermission:J=>this.onAddPermission(J),onCancel:this.onCancelAddPermission})),a.createElement(Po,{items:N,onRemoveItem:this.onRemovePermission})):(0,fn.d5)()?a.createElement(gc,{action:{onClick:this.onEnablePermissions,text:"Enable permissions"}}):a.createElement(An.Z,{title:"Permissions not enabled for this data source.",buttonTitle:"Enable",buttonIcon:"unlock",onClick:this.onEnablePermissions,proTip:"Only admins will be able to query the data source after you enable permissions.",proTipLink:"https://docs.grafana.org/permissions/datasource_permissions/",proTipLinkTitle:"Learn more"}))}}const vc=Lr(nu),Pi=()=>{const{uid:p}=(0,ce.UO)(),{navId:N,pageNav:F}=(0,Ar.M)("permissions");return a.createElement(Nn.T,{navId:N,pageNav:F},a.createElement(Nn.T.Contents,null,a.createElement(vc,{uid:p})))};var Ec=e(1541);function yc(p,N){const{uid:F}=N;return{resourceId:F}}const bc={loadDataSource:bn.gv,loadDataSourceMeta:bn.b2},Pc=(0,k.connect)(yc,bc)(({resourceId:p,loadDataSource:N,loadDataSourceMeta:F})=>{(0,a.useEffect)(()=>{N(p)},[p,N]);const G=s.contextSrv.hasPermission(w.DataSourcesPermissionsWrite);return(0,a.useEffect)(()=>{N(p).then(F)},[N,F,p]),a.createElement(a.Fragment,null,(0,fn.d5)()&&a.createElement(Ht.Xz,{featureId:"data-source-permissions",eventVariant:"trial",featureName:"data source permissions",text:"Enable data source permissions for free during your trial of Grafana Pro."}),a.createElement(Ec.P,{resource:"datasources",resourceId:p,canSetPermissions:G}))}),kr=()=>{const{uid:p}=(0,ce.UO)(),{navId:N,pageNav:F}=(0,Ar.M)("permissions");return a.createElement(Nn.T,{navId:N,pageNav:F},a.createElement(Nn.T.Contents,null,a.createElement(Pc,{uid:p})))},nl=()=>{const{uid:p}=(0,ce.UO)(),{navId:N,pageNav:F}=(0,Ar.M)("permissions");return a.createElement(Nn.T,{navId:N,pageNav:F},a.createElement(Nn.T.Contents,null,a.createElement(sr,{uid:p})))};var Hs=e(91368),Cc=e(56812);const Lo=({title:p,subTitle:N,severity:F,onButtonClick:G,buttonText:J})=>{const se=(0,A.yK)(xc);return a.createElement("div",{className:se.container},a.createElement("div",{className:"page-container"},a.createElement(re.b,{title:p,severity:F,buttonContent:J,onRemove:G},N)))},Ci=({isLicensingReader:p,children:N})=>p?a.createElement("a",{href:"/admin/licensing"},N):a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",target:"_blank",rel:"noreferrer noopener"},N),su=({isLicensingReader:p})=>a.createElement(Lo,{title:"Your Grafana Enterprise license has expired",subTitle:a.createElement(a.Fragment,null,a.createElement(Ci,{isLicensingReader:p},"Some features")," have been disabled."),severity:"error"}),Dc=({isLicensingReader:p})=>a.createElement(Lo,{title:"Your Grafana Enterprise license is invalid",subTitle:a.createElement(a.Fragment,null,a.createElement(Ci,{isLicensingReader:p},"Some features")," have been disabled."),severity:"error"}),al=({days:p,onCloseWarning:N,isLicensingReader:F})=>a.createElement(Lo,{onButtonClick:N,title:"Your Grafana Enterprise license will expire soon",subTitle:a.createElement(a.Fragment,null,p," days remaining, after which"," ",a.createElement(Ci,{isLicensingReader:F},"Enterprise features will be disabled.")),severity:"info",buttonText:"Dismiss"}),ru=({days:p,onCloseWarning:N,isLicensingReader:F})=>a.createElement(Lo,{onButtonClick:N,title:"Your Grafana Enterprise token needs to be renewed",subTitle:a.createElement(a.Fragment,null,"Your license token has ",p," days remaining, after which"," ",a.createElement(Ci,{isLicensingReader:F},"Enterprise features will be disabled.")),severity:"info",buttonText:"Dismiss"}),Sc=({activeUsers:p,maxUsers:N,slug:F,onRefreshWarning:G})=>a.createElement(Lo,{onButtonClick:G,title:"You have exceeded the included number of active users",subTitle:a.createElement(a.Fragment,null,"Your Grafana Enterprise license includes ",N," active users; you currently have ",p," active users. Please"," ",F?a.createElement("a",{href:"https://grafana.com/orgs/"+F+"/licenses",target:"_blank",rel:"noreferrer noopener"},"upgrade your license."):"upgrade your license."),severity:"error",buttonText:"Refresh"}),xc=p=>({container:(0,W.css)`
      position: absolute;
      bottom: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      z-index: 3;
    `}),Mc=80,Tc=100,Nm=0,Co=1,Sf=2,xf=3,Oc=4,sl=5,fr=6,Hr=5,Gr=3600,ao="grafana.licence.warning.dismissUntil",rl="users",Tr="AWS/Marketplace",so=async()=>(0,Na.i)().get("/api/licensing/token"),ol=async p=>(0,Na.i)().post("/api/licensing/token",{token:p}),Yo=async()=>(0,Na.i)().post("/api/licensing/token/renew",{}),il=async()=>(0,Na.i)().get("/api/licensing/refresh-stats");function Ic(){(0,Za.b4)(ou)}function ou(){const[p,N]=(0,a.useState)(!1),[F,G]=(0,a.useState)(n.config.licensing),J=Cc.Z.get(ao),se=J&&J>(0,Ua.CQ)().valueOf(),me=Hs.contextSrv.hasAccess(w.LicensingRead,Hs.contextSrv.hasRole(o.OrgRole.Admin)),be=Hs.contextSrv.hasAccess(w.LicensingRead,Hs.contextSrv.isGrafanaAdmin),Ae=me&&lu()&&!se,Ke=me&&cu()&&!se,Ye=Rc();let Ze=!1,ot=0,rt=0;if(F.limitBy===rl){const vt=du(F.includedUsers,F.activeUsers);Ze=Ye&&vt&&(me||be),ot=F.activeUsers,rt=F.includedUsers}if(ll()||mu())return null;const gt=()=>{const vt=(0,Ua.CQ)().add(Hr,"d").valueOf();Cc.Z.set(ao,vt),N(!0)},Pt=async()=>{const vt=await il().catch(Dt=>null);if(vt){const Dt={...F,activeUsers:vt.active_users};n.config.licensing=Dt,G(Dt)}};if(p)return null;if(iu())return a.createElement(Dc,{isLicensingReader:be});if(Zo())return a.createElement(su,{isLicensingReader:be});if(Ze)return a.createElement(Sc,{activeUsers:ot,maxUsers:rt,slug:F.slug,onRefreshWarning:me?Pt:void 0});if(Ae){const vt=Um();return setTimeout(gt,1e3*Gr),a.createElement(al,{days:vt,onCloseWarning:gt,isLicensingReader:be})}else if(Ke){const vt=Jo();return setTimeout(gt,1e3*Gr),a.createElement(ru,{days:vt,onCloseWarning:gt,isLicensingReader:be})}return null}function iu(){const{expiry:p,hasLicense:N}=n.config.licenseInfo;return N&&!p}function lu(){const{licenseExpiry:p,licenseExpiryWarnDays:N=30}=n.config.licensing;return p>0&&(0,Ua.CQ)(p*1e3)<(0,Ua.CQ)().add(N,"d")}function Um(){const{licenseExpiry:p}=n.config.licensing;return Math.ceil((p-(0,Ua.CQ)().unix())/3600/24)}function Zo(){const{licenseExpiry:p}=n.config.licensing;return p>0&&(0,Ua.CQ)(p*1e3)<(0,Ua.CQ)()}function cu(){const{tokenExpiry:p,tokenExpiryWarnDays:N=3}=n.config.licensing;return p>0&&(0,Ua.CQ)(p*1e3)<(0,Ua.CQ)().add(N,"d")}function Jo(){const{tokenExpiry:p}=n.config.licensing;return Math.ceil((p-(0,Ua.CQ)().unix())/3600/24)}function du(p,N){return p===void 0||N===void 0?!1:p!==-1&&N>p}function Rc(){return!n.config.licensing.usageBilling}function uu(){const p=/\/d-solo\//,N=window.location.pathname;return p.test(N)}function ll(){return uu()}function mu(){const p=/\/admin\/licensing$/,N=window.location.pathname;return p.test(N)}var cl=e(68555),Do=e(60956),Ac=e(27951);const Lc=({orgSlug:p,licenseId:N})=>{let F="https://grafana.com/contact";return p&&N&&(F=`https://grafana.com/orgs/${p}/tickets?support=licensing&licenseId=${N}`),a.createElement(Je.Qj,{href:F,target:"_blank",rel:"noopener noreferrer"},"Contact customer support")};var Bc=e(90527);const yr=({title:p,children:N,footer:F,state:G,status:J,className:se})=>{const me=(0,A.l4)(),be=Di(me,G);return a.createElement(Bc._,{className:(0,W.cx)(be.container,se),disableHover:!0},a.createElement("div",{className:be.inner},(p||J)&&a.createElement("div",{className:be.row},p&&a.createElement("h3",{className:be.title},p),J&&a.createElement(gr,{state:G,status:J})),a.createElement("div",{className:be.content},N),F&&a.createElement("div",{className:be.footer},F)))},Di=(0,Ao.B)((p,N)=>({container:(0,W.css)`
      padding: ${p.spacing(2)};
      margin-bottom: 0;
      ${N&&`border: 1px solid ${p.colors[N].border}`};
    `,inner:(0,W.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,title:(0,W.css)`
      font-size: ${p.typography.h3.fontSize};
      color: ${p.colors.text.secondary};
      margin-bottom: 0;
    `,row:(0,W.css)`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${p.spacing(2)};
      align-items: center;
    `,content:(0,W.css)`
      display: flex;
      flex-direction: column;
      flex: 1 0 auto;
      width: 100%;
    `,footer:(0,W.css)`
      display: flex;
      flex-direction: column;
      align-items: self-start;
      margin-top: ${p.spacing(2)};
    `})),gr=({state:p,status:N})=>{const F=new Map([["warning","bell"],["error","exclamation-triangle"]]),G=(0,A.l4)(),J=Os(G,p);return p&&F.has(p)?a.createElement("div",{role:"alert",className:J.container},a.createElement(c.J,{name:F.get(p)}),N):null},Os=(p,N)=>({container:(0,W.css)`
      background-color: ${p.colors.background.primary};
      color: ${N&&p.colors[N].text};
      padding: ${p.spacing(.5)} ${p.spacing(1)};

      svg {
        margin-right: ${p.spacing(1)};
      }
    `}),Mf=({state:p,title:N,orgSlug:F,licenseId:G})=>{const J=(0,A.wW)(fu);return p?a.createElement(re.b,{title:N,severity:p,className:J.container},a.createElement(Lc,{orgSlug:F,licenseId:G})):null},fu=p=>({container:(0,W.css)`
      background: ${p.colors.secondary.main};
      margin-bottom: ${p.spacing(3)};
    `}),dl=({content:p,state:N})=>{const F=(0,A.l4)(),G=xs(F,N);return a.createElement(a.Fragment,null,p.map(J=>J?a.createElement("div",{key:J.name,className:G.row},a.createElement("span",null,J.name,J.tooltip&&a.createElement(z.u,{placement:"top",content:J.tooltip,theme:"info"},a.createElement(c.J,{name:"info-circle",size:"sm"}))),a.createElement("span",{className:J.highlight?G.highlight:""},J.value)):null))},xs=(p,N)=>({row:(0,W.css)`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${p.spacing(2)};
      align-items: center;
      svg {
        margin-left: ${p.spacing(.5)};
        cursor: pointer;
      }
    `,highlight:(0,W.css)`
      background-color: ${p.colors.background.primary};
      color: ${N&&p.colors[N].text};
      padding: ${p.spacing(.5)} ${p.spacing(1)};
      margin-right: -${p.spacing(1)};

      svg {
        margin-right: ${p.spacing(1)};
      }
    `}),Ks=({isUploading:p,title:N,onFileUpload:F,isDisabled:G,licensedUrl:J})=>{const se=wm();return a.createElement(a.Fragment,null,N&&a.createElement("h2",{className:se.title},N),p?a.createElement(Je.zx,{disabled:!0},"Uploading\u2026"):G?a.createElement(Je.zx,{disabled:!0},"Upload a new token"):a.createElement(hs.p,{onFileUpload:F,accept:".jwt"},"Upload a new token"),J&&a.createElement("p",{className:se.instanceUrl},"Instance URL: ",a.createElement("code",null,J)))},wm=(0,Ao.B)(()=>({title:(0,W.css)`
      margin-top: 30px;
      margin-bottom: 20px;
    `,instanceUrl:(0,W.css)`
      margin-top: 10px;
    `})),Nc=(p,N)=>(N?`${N} of `:"")+(p>0?p:"unlimited"),Uc=p=>(0,Ua.CQ)(p.exp*1e3)<(0,Ua.CQ)(),gu=p=>(0,Ua.CQ)(p.exp*1e3)<(0,Ua.CQ)().add(n.config.licensing.tokenExpiryWarnDays,"d"),wc=p=>Math.ceil((p.exp-(0,Ua.CQ)().unix())/3600/24),Bo=p=>p?Uc(p)?{state:"error",status:"Expired",title:"Token expired",message:"Contact support to renew your token, or visit the Cloud portal to learn more."}:gu(p)?{state:"warning",status:` Expiring in ${wc(p)} day(s)`,title:"Token expires soon",message:`Your token expires in ${wc(p)} day(s). Contact support to renew your token.`}:{state:"",status:"",title:"",message:""}:{state:"",status:"",title:"",message:""},pu=p=>p.trial_exp&&(0,Ua.CQ)(p.trial_exp*1e3)<(0,Ua.CQ)(),Wc=p=>p.trial_exp?Math.ceil((p.trial_exp-(0,Ua.CQ)().unix())/3600/24):0,hu=p=>!p||!p.trial||!p.trial_exp?{state:"",status:"",title:"",message:""}:pu(p)?{state:"error",status:"Expired",title:"Trial expired",message:"Your trial period has expired, please contact sales to purchase a license."}:{state:"info",status:` Trial expiring in ${Wc(p)} day(s)`,title:"Trial active",message:`Your trial expires in ${Wc(p)} day(s), please contact sales to purchase a license.`},Fc=(p,N=0)=>100*N/p,Cs=(p,N)=>{let F="",G="",J="",se="";if(!p)return{state:F,status:G,title:J,message:se};if(p.limit_by===rl){const me=N?.active_users,be=p.included_users;let Ae=0;typeof me=="number"&&(Ae=Fc(be,me)),Ae>Tc?(F="error",G="Quota exceeded: active users",J="User limit exceeded",se=`There are more than ${be} active users using Grafana.`,se+=" Contact support to increase the quotas."):Ae>=Mc&&(F="warning",Ae>=Tc?(G="Limit reached",J="User utilization limit reached",se=`You are at your limit of ${be} active users.`):(G="Reaching limit",J="User utilization reaching limit",se=`There are ${me} active users.`,se+=` You are approaching your limit of ${be} active users.`),G+=": active users",se+=" Contact support to increase the quotas.")}return{state:F,status:G,title:J,message:se}},Is=({token:p,stats:N,tokenRenewed:F,tokenUpdated:G,isLoading:J,licensedUrl:se})=>{const[me,be]=(0,a.useState)(!1),[Ae,Ke]=(0,a.useState)(!1),Ye=Bo(p).state,Ze=Cs(p,N).state,ot=Hs.contextSrv.hasAccess(w.LicensingWrite,Hs.contextSrv.isGrafanaAdmin),rt=(0,A.wW)(Kc),gt=Dt=>{const Vt=Dt.currentTarget?.files?.[0];if(Vt){De.E1.partial({tokenUpdated:null,tokenRenewed:null});const en=new FileReader,zt=()=>async an=>{be(!0);try{await ol(an.target.result),De.E1.partial({tokenUpdated:!0}),setTimeout(()=>{location.reload()},1e3)}catch(Jt){throw be(!1),Jt}};en.onload=zt(),en.readAsText(Vt)}},Pt=async()=>{De.E1.partial({tokenUpdated:null,tokenRenewed:null}),Ke(!0);try{await Yo(),De.E1.partial({tokenRenewed:!0}),setTimeout(()=>{location.reload()},1e3)}catch(Dt){throw Ke(!1),Dt}};if(!Hs.contextSrv.hasAccess(w.LicensingRead,Hs.contextSrv.isGrafanaAdmin))return null;if(J)return a.createElement(Fa.a,{text:"Loading licensing info..."});let vt="You are running Grafana Enterprise without a license. The Enterprise features are disabled.";return p&&![Co,sl].includes(p.status)&&(vt="There is a problem with your Enterprise license token. The Enterprise features are disabled."),!p||![Co,sl].includes(p.status)?a.createElement(a.Fragment,null,a.createElement(Ac.UpgradeInfo,{editionNotice:vt}),a.createElement("div",{className:rt.uploadWrapper},a.createElement(Ks,{title:"Have a license?",onFileUpload:gt,isUploading:me,isDisabled:!ot,licensedUrl:se}))):a.createElement("div",null,a.createElement("h2",{className:rt.title},"License details"),a.createElement(ul,{...Cs(p,N),orgSlug:p.slug,licenseId:p.lid}),a.createElement(ul,{...Bo(p),orgSlug:p.slug,licenseId:p.lid}),a.createElement(ul,{...hu(p),orgSlug:p.slug,licenseId:p.lid}),G&&a.createElement(re.b,{title:"License token uploaded. Restart Grafana for the changes to take effect.",severity:"success",onRemove:()=>De.E1.partial({tokenUpdated:null})}),F&&a.createElement(re.b,{title:"License token renewed.",severity:"success",onRemove:()=>De.E1.partial({tokenRenewed:null})}),a.createElement("div",{className:rt.row},a.createElement(yr,{title:"License",className:rt.licenseCard,footer:a.createElement(Je.Qj,{variant:"secondary",href:p.details_url||`${p.iss}/licenses/${p.lid}`,"aria-label":"View details about your license in Grafana Cloud",target:"_blank",rel:"noopener noreferrer"},"License details")},a.createElement(dl,{content:[{name:p.prod?.length<=1?"Product":"Products",value:p.prod?.length<=1?p.prod[0]||"None":a.createElement("ul",null,p.prod?.map(Dt=>a.createElement("li",{key:Dt},Dt)))},p.iss===Tr&&p.account?{name:"AWS Account",value:p.account}:{name:"Company",value:p.company},{name:"License ID",value:p.lid},p.iss===Tr?null:{name:"URL",value:p.sub,tooltip:"License URL is the root URL of your Grafana instance. The license will not work on an instance of Grafana with a different root URL."},{name:"Purchase date",value:(0,Do.dq)(p.nbf*1e3)},p.iss===Tr?null:{name:"License expires",value:(0,Do.dq)(p.lexp*1e3),highlight:!!Bo(p)?.state,tooltip:"The license expiration date is the date when the current license is no longer active. As the license expiration date approaches, Grafana Enterprise displays a banner."},p.iss===Tr?null:{name:"Usage billing",value:p.usage_billing?"On":"Off",tooltip:"You can request Grafana Labs to turn on usage billing to allow an unlimited number of active users. When usage billing is enabled, Grafana does not enforce active user limits or display warning banners. Instead, you are charged for active users above the limit, according to your customer contract."}]})),a.createElement(yr,{...Bo(p),title:"Token",footer:a.createElement("div",{className:rt.row},p.iss!==Tr&&a.createElement(Ks,{onFileUpload:gt,isUploading:me,isDisabled:!ot}),Ae?a.createElement("span",null," (Renewing...)"):a.createElement(Je.zx,{variant:"secondary",onClick:Pt,disabled:!ot},"Renew token"))},a.createElement(a.Fragment,null,Ye&&a.createElement(Mf,{title:"Contact support to renew your token, or visit the Cloud portal to learn more.",state:Ye,orgSlug:p.slug,licenseId:p.lid}),a.createElement("div",{className:rt.message},a.createElement(c.J,{name:"document-info"}),"Read about"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-expiration/",target:"_blank",rel:"noreferrer noopener"},"license expiration")," ","and"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/activate-license/",target:"_blank",rel:"noreferrer noopener"},"license activation"),"."),a.createElement(dl,{content:[{name:"Token ID",value:p.jti},{name:"Token issued",value:(0,Do.dq)(p.iat*1e3)},{name:"Token expires",value:(0,Do.dq)(p.exp*1e3),highlight:!!Bo(p)?.state,tooltip:"Grafana automatically updates the token before it expires. If your token is not updating, contact support."}],state:Ye}))),a.createElement(yr,{...Cs(p,N),title:"Utilization",footer:a.createElement("small",{className:rt.footerText},"Utilization of licenced users is determined based on signed-in users' activity in the past 30 days.")},a.createElement(a.Fragment,null,a.createElement("div",{className:rt.message},a.createElement(c.J,{name:"document-info"}),"Read about"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#active-users-limit",target:"_blank",rel:"noreferrer noopener"},"active user limits")," ","and"," ",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/#concurrent-sessions-limit",target:"_blank",rel:"noreferrer noopener"},"concurrent session limits"),"."),p.limit_by===rl&&a.createElement(dl,{content:[{name:"Users",value:Nc(p.included_users,N?.active_users),highlight:Fc(p.included_users,N?.active_users)>=Mc}],state:Ze})))))},Kc=p=>({title:(0,W.css)`
      margin: ${p.spacing(4)} 0;
    `,infoText:(0,W.css)`
      font-size: ${p.typography.size.sm};
    `,uploadWrapper:(0,W.css)`
      margin-left: 79px;
    `,row:(0,W.css)`
      display: flex;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
      gap: ${p.spacing(2)};

      & > div {
        flex: 1 1 340px;
      }
    `,footerText:(0,W.css)`
      margin-bottom: ${p.spacing(2)};
    `,licenseCard:(0,W.css)`
      background: url('/public/img/licensing/card-bg-${p.isLight?"light":"dark"}.svg') center no-repeat;
      background-size: cover;
    `,message:(0,W.css)`
      height: 70px;
      a {
        color: ${p.colors.text.link};

        &:hover {
          text-decoration: underline;
        }
      }

      svg {
        margin-right: ${p.spacing(.5)};
      }
    `}),ul=({state:p,message:N,title:F,orgSlug:G,licenseId:J})=>{const se=(0,A.wW)($c);return p?a.createElement(re.b,{title:F,severity:p||void 0},a.createElement("div",{className:se.container},a.createElement("div",null,a.createElement("p",null,N),a.createElement("a",{className:se.link,href:"https://grafana.com/docs/grafana/latest/enterprise/license/license-restrictions/",target:"_blank",rel:"noopener noreferrer"},"Learn about Enterprise licenses")),a.createElement(Lc,{orgSlug:G,licenseId:J}))):null},$c=p=>({container:(0,W.css)`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      width: 100%;
    `,link:(0,W.css)`
      font-size: ${p.typography.bodySmall.fontSize};
      text-decoration: underline;
      color: ${p.colors.text.secondary};

      &:hover {
        color: ${p.colors.text.primary};
      }
    `}),ml=p=>({navModel:(0,je.ht)(p.navIndex,"licensing")}),Vc=(0,k.connect)(ml,{})(({navModel:p,queryParams:N})=>{const[F,G]=(0,a.useState)(null),[J,se]=(0,a.useState)(null),[me,be]=(0,a.useState)(!1),{tokenUpdated:Ae,tokenRenewed:Ke}=N;return(0,a.useEffect)(()=>Hs.contextSrv.hasAccess(w.LicensingRead,Hs.contextSrv.isGrafanaAdmin)?(be(!0),(async()=>{const Ze=await so().catch(()=>null),ot=await il().catch(()=>null);G(Ze),se(ot),be(!1)})(),Ic):void 0,[]),a.createElement(Nn.T,{navModel:p},a.createElement(Nn.T.Contents,null,a.createElement(cl.ServerStats,null),a.createElement(Is,{token:F,stats:J,tokenUpdated:Ae,tokenRenewed:Ke,isLoading:me,licensedUrl:n.config.licenseInfo?.appUrl})))});var zc=e(77948),Br=e(12308),vu=e(30973),_c=e(14574),Si=e(80101),No=(p=>(p.Test="test",p.Control="control",p))(No||{});const xi=p=>"feature-highlights"+(p?`-${p}`:""),kc={isDrawerOpen:!1,drawerTab:L.Stats},Bs=(0,sn.oM)({name:"metaAnalytics",initialState:kc,reducers:{setDrawerOpen:(p,N)=>({...p,isDrawerOpen:N.payload}),setDrawerTab:(p,N)=>({...p,drawerTab:N.payload})}}),{setDrawerOpen:Xo,setDrawerTab:fl}=Bs.actions,Gs={metaAnalytics:Bs.reducer};var Mi=e(15372),yu=e(54281),Hc=e(4432),gl=e(21783);class pl extends a.PureComponent{convertSummariesToDataFrame(N,F,G,J){const se=new vo.G([]),me=new vo.G([]);return N.forEach(be=>{se.buffer.push((0,Ua.CQ)(be.day,yo).valueOf()),me.buffer.push(be[F])}),{fields:[{name:"Time",type:ks.fS.time,config:{},values:se},{name:F,type:G,config:{displayName:J??F},values:me}],length:N.length}}buildTimeRange(){const{dailySummaries:N}=this.props,F=(0,Ua.CQ)(N[0].day),G=(0,Ua.CQ)(N[N.length-1].day).add(12,"hours");return{from:F,to:G,raw:{from:F,to:G}}}renderChart(N){const{dailySummaries:F,theme:G}=this.props,{showBars:J,showLines:se,timeRange:me,title:be,width:Ae,fields:Ke,isStacked:Ye=!1}=N,Ze=jo(G),ot=Ke.map(Pt=>this.convertSummariesToDataFrame(F,Pt.name,Pt.type,Pt.label)),rt=Ke.reduce((Pt,vt)=>({...Pt,[vt.name]:{color:vt.color??""}}),{}),gt=ji(ot,"browser",rt,{showBars:J,showLines:se,showPoints:!1},{placement:"bottom",displayMode:ar.jK.List,showLegend:!1});return a.createElement("div",{className:(0,W.cx)(Ze.graphContainer,"panel-container"),"aria-label":"Graph container"},a.createElement("div",{className:"panel-title"},be),a.createElement("div",{className:(0,W.cx)("panel-content",Ze.panelContent)},a.createElement(gl.U,{height:150,width:Ae,timeRange:me,showBars:J,showLines:se,showPoints:!1,series:gt,isStacked:Ye,timeZone:"browser",legendVisibility:gt.length>1,onToggleSort:()=>{},legendDisplayMode:ar.jK.List,placement:"bottom"},a.createElement(rc.I,{mode:ar.f3.Multi}))))}}class bu extends pl{render(){const{dailySummaries:N,theme:F}=this.props;if(N&&N.length>0){const G=this.buildTimeRange();return a.createElement(zr.Z,{disableHeight:!0},({width:J})=>J===0?null:a.createElement("main",{style:{width:J}},this.renderChart({title:"Daily query count",fields:[{name:"queries",type:ks.fS.number},{name:"cachedQueries",type:ks.fS.number,label:"cached queries"}],width:J,timeRange:G,showBars:!1,showLines:!0}),this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:ks.fS.number}],width:J,timeRange:G,showBars:!0,showLines:!1}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:ks.fS.number,color:F.colors.error.border}],width:J,timeRange:G,showBars:!1,showLines:!0})))}return a.createElement("span",null,"No data.")}}const hl={setDrawerOpen:Xo},qo=(0,A.HE)((0,k.connect)(null,hl)(bu));class oa extends pl{render(){const{dailySummaries:N,theme:F}=this.props;if(N&&N.length>0){const G=this.buildTimeRange();return a.createElement(zr.Z,{disableHeight:!0},({width:J})=>J===0?null:a.createElement("main",{style:{width:J}},this.renderChart({title:"Daily query count",fields:[{name:"queries",type:ks.fS.number},{name:"cachedQueries",type:ks.fS.number,label:"cached queries"}],width:J,timeRange:G,showBars:!1,showLines:!0}),this.renderChart({title:"Errors last 30 days",fields:[{name:"errors",type:ks.fS.number,color:F.colors.error.border}],width:J,timeRange:G,showBars:!1,showLines:!0})))}return a.createElement("span",null,"No data.")}}const Gc=(0,A.HE)(oa);var vl=e(21708),pr=e(30678),Qr=e(95066);class js extends pl{constructor(N){super(N),this.onOpenVersionHistory=()=>{const{setDrawerOpen:F}=this.props;F(!1),De.E1.partial({editview:"versions"})},this.state={dashboardUsersInfo:null}}async componentDidMount(){const{dashboard:N}=this.props;try{const F=await vi(N.id);this.setState({dashboardUsersInfo:F})}catch(F){console.log("Error getting dashboard users info",F)}}formatDate(N){const F=N.diff((0,Ua.CQ)().startOf("day"),"days",!0);if(F<-6)return N.format("YYYY-MM-DD");if(F<-1)return N.locale("en").format("dddd");if(F<0)return"Yesterday";{const G=N.diff((0,Ua.CQ)(),"minutes",!0);return G<-60?"Today":G<-15?"Last hour":"Currently viewing"}}renderUserBox(N,F,G){return a.createElement("div",{className:G.userBox,"aria-label":"User information box"},a.createElement("h6",{"aria-label":"User box title"},N),a.createElement(pr.t,{userView:F,showTooltip:!1}),a.createElement("div",{className:G.userName},F.user.name),a.createElement("div",null,(0,Ua.CQ)(F.lastActiveAt).format("YYYY-MM-DD")))}renderViewsChart(){const N=this.buildTimeRange();return a.createElement(zr.Z,{disableHeight:!0},({width:F})=>F===0?null:a.createElement("main",{style:{width:F}},this.renderChart({title:"Views last 30 days",fields:[{name:"views",type:ks.fS.number}],width:F,timeRange:N,showBars:!0,showLines:!1})))}convertUserViewsToDataFrame(N,F){const{userViews:G}=this.props;if(G&&G.length>0){const J=new vo.G([]),se=new vo.G([]),me=new vo.G([]);G.forEach(Ye=>{J.buffer.push(this.formatDate((0,Ua.CQ)(Ye.lastActiveAt))),se.buffer.push(Ye.user.name),me.buffer.push(a.createElement(pr.t,{className:N.userIcon,userView:Ye,showTooltip:!1}))});const be={displayName:" ",filterable:!1,custom:{width:50,align:"center",minWidth:50,cellOptions:{type:ar.h2.ColorText},inspect:!1}},Ae=[{fields:[{name:" ",type:ks.fS.other,config:be,values:me},{name:"User",type:ks.fS.string,config:{},values:se},{name:"When",type:ks.fS.string,config:{},values:J}],length:G.length}],Ke=(0,vl.SM)({data:Ae,theme:F,replaceVariables:Ye=>Ye,fieldConfig:{}});return Ke.length>0?Ke[0]:null}else return null}render(){const{dailySummaries:N,dashboard:F,theme:G,userViews:J}=this.props,{dashboardUsersInfo:se}=this.state,me=jo(G),be=this.convertUserViewsToDataFrame(me,G);return a.createElement("div",null,N&&N.length>0&&this.renderViewsChart(),a.createElement("div",{className:me.userBoxesContainer},se?.creator&&this.renderUserBox("Created",se.creator,me),se?.lastEditor&&this.renderUserBox("Last edited",se.lastEditor,me),J?.length>0&&this.renderUserBox("Last viewed",J[0],me)),J?.length>0&&a.createElement("div",{className:me.tableContainer},a.createElement("div",{className:me.tableHeader},a.createElement("h4",null,"Last 30 dashboard viewers"),F.meta.showSettings&&a.createElement(Je.zx,{icon:"history",variant:"secondary",onClick:this.onOpenVersionHistory,"aria-label":"Version history button"},"Dashboard version history")),a.createElement(zr.Z,{disableHeight:!0},({width:Ae})=>{if(Ae===0)return null;const Ke=35*(be.length+1);return a.createElement("main",{style:{width:Ae}},a.createElement(Qr.i,{data:be,height:Ke,width:Ae,"aria-label":"Recent users table"}))})))}}const jc={setDrawerOpen:Xo},El=(0,A.HE)((0,k.connect)(null,jc)(js)),ss=30;class ei extends a.PureComponent{constructor(N){super(N),this.onSelectTab=F=>{this.props.setDrawerTab(F.value||L.Stats)},this.state={dailySummaries:[],publicDailySummaries:[],userViews:[]}}async componentDidMount(){const{dashboard:N}=this.props,F=[];for(let G=0;G<30;G++)F.push((0,Ua.CQ)(Date.now()).subtract(G,"days").format(yo));if(N?.id&&N.meta.url){const G=await bo(N.id,F),J=await Qi(N.id,ss);let se=[];(0,Br.iE)().featureToggles.publicDashboards&&(se=await Go(N.id,F)),this.setState({dailySummaries:G,userViews:J,publicDailySummaries:se})}}renderHeader(N){const F=[{label:"Stats",value:L.Stats},{label:"Users and activity",value:L.Users}];return(0,Br.iE)().featureToggles.publicDashboards&&F.push({label:"Public dashboards",value:L.PublicDashboards}),a.createElement(Mi.J,{className:N.tabsBar},F.map((G,J)=>a.createElement(yu.O,{key:`${G.value}-${J}`,label:G.label,active:G.value===this.props.drawerTab,onChangeTab:()=>this.onSelectTab(G)})))}render(){const{dailySummaries:N,publicDailySummaries:F,userViews:G}=this.state,{dashboard:J,drawerTab:se,setDrawerOpen:me,theme:be}=this.props,Ae=jo(be);return a.createElement(_c.d,{scrollableContent:!0,title:`${J.title} - analytics`,size:"md",onClose:()=>me(!1),subtitle:this.renderHeader(Ae),expandable:!0},a.createElement(Hc.I,{className:Ae.tabContent},(0,fn.d5)()&&a.createElement(Ht.Xz,{featureId:"dashboard-insights",eventVariant:"trial",featureName:"dashboard usage insights",text:"Get full access to usage insights for free during your trial of Grafana Pro."}),se===L.Stats&&a.createElement(Gc,{dashboard:J,dailySummaries:N}),se===L.Users&&a.createElement(El,{dashboard:J,dailySummaries:N,userViews:G}),(0,Br.iE)().featureToggles.publicDashboards&&se===L.PublicDashboards&&a.createElement(qo,{dashboard:J,dailySummaries:F})))}}function Pu(p){return{drawerTab:p.metaAnalytics.drawerTab}}const Cu={setDrawerOpen:Xo,setDrawerTab:fl},Du=(0,A.HE)((0,k.connect)(Pu,Cu)(ei)),Qc=({onClick:p,isHighlighted:N})=>a.createElement(vu.h,{icon:"info-circle",tooltip:"Dashboard insights",onClick:p,isHighlighted:N}),Su=({dashboard:p,isDrawerOpen:N,setDrawerOpen:F})=>{const G=p?.id&&p.meta.url,J=(0,fn.d5)();return(0,a.useEffect)(()=>{G&&J&&(0,i.SZ)(xi("dashboard-insights-dot"),No.Test,"trial")},[G,J]),G&&a.createElement(a.Fragment,null,a.createElement(Qc,{onClick:()=>{F(!0)},isHighlighted:J}),N&&a.createElement(Du,{dashboard:p}))};function Yc(p){return{isDrawerOpen:p.metaAnalytics.isDrawerOpen}}const Zc={setDrawerOpen:Xo},Jc=({dashboard:p})=>{const N=p?.id&&p.meta.url,[F,G]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{N&&(0,i.SZ)(xi("dashboard-insights-dot"),No.Test,"")},[N]),N&&a.createElement(a.Fragment,null,a.createElement(Qc,{isHighlighted:!0,onClick:()=>{G(!0)}}),F&&a.createElement(qc,{dashboard:p,onClose:()=>G(!1)}))},Xc=()=>{(0,t.v)("analytics")?s.contextSrv.hasPermission(w.DashboardsInsightsRead)&&(0,Si.hf)({show:()=>!0,component:(0,k.connect)(Yc,Zc)(Su),index:-1}):n.config.featureToggles.featureHighlights&&(0,Si.hf)({show:()=>!0,component:Jc,index:-1})},qc=({onClose:p,dashboard:N})=>{const F=(0,A.l4)();return a.createElement(_c.d,{onClose:p,title:`${N?.title} - analytics`,width:"50%"},a.createElement(Ht.Xz,{featureName:"dashboard usage insights",featureId:"dashboard-insights"}),a.createElement(Ht.tM,{featureName:"dashboard usage insights",image:`usage-insights-${F.isLight?"light":"dark"}.png`,featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/usage-insights/dashboard-datasource-insights",description:"Usage Insights provide detailed information about dashboard usage, like the number of views, queries, and errors users have experienced. You can use this to improve users\u2019 experience and troubleshoot issues."}))};class ti{constructor(N){this.options=N,this.buffer=[],this.supportedEvents=[zc.ee.MetaAnalytics],this.addEvent=F=>{this.buffer.push(F)},this.flush=()=>{if(this.buffer.length===0)return;const F=[];for(const G of this.buffer)F.push({type:G.type,...G.payload,meta:G.meta});this.buffer=[],this.options.url&&(0,y.i)().fetch({method:"POST",url:this.options.url,showSuccessAlert:!1,showErrorAlert:!1,data:F}).toPromise()}}}const xu=({users:p,onClick:N,limit:F=4})=>{const G=(0,A.wW)(Mu);if(!p.length)return null;F=F>0?F:4;const J=p.length>F,se=p.length-F,me=se>99;return a.createElement("div",{className:G.container,"aria-label":"Users indicator container"},J&&a.createElement(pr.t,{onClick:N,userView:{user:{name:"Extra users"},lastActiveAt:""},showTooltip:!1},me?"...":`+${se}`),p.slice(0,J?F:F+1).reverse().map(be=>a.createElement(pr.t,{key:be.user.name,userView:be})))},Mu=p=>({container:(0,W.css)({display:"flex",justifyContent:"center",flexDirection:"row-reverse",marginLeft:p.spacing(1),"& > button":{marginLeft:p.spacing(-1)}}),dots:(0,W.css)({marginBottom:"3px"})});function Tu(p){return N=>{N(Xo(!0)),N(fl(p))}}const Ou={openDrawer:Tu},Iu=(0,k.connect)(null,Ou),yl=4,ed=6e4;function bl(p,N){const F=Hs.contextSrv.user;_r(p,yl+10).then(G=>{const J=G.filter(se=>se.user.id!==F.id);N(se=>(0,We.isEqual)(J,se)?se:J)})}const td=({dashboard:p,openDrawer:N})=>{const F=p?.id,[G,J]=(0,a.useState)([]);return(0,a.useEffect)(()=>{if(!F||!p?.meta.url)return;bl(F,J);const se=setInterval(()=>bl(F,J),ed);return()=>{clearInterval(se)}},[F,p]),a.createElement(xu,{users:G,limit:yl,onClick:()=>N(L.Users)})},nd=()=>{Hs.contextSrv.hasPermission(w.DashboardsInsightsRead)&&(0,Si.NN)({show:()=>!0,component:Iu(td),index:"end"})};function ad(){if((0,Br.iE)().isPublicDashboardView){const N=window.location.pathname.split("/");return N[N.length-1]}return""}const Ys=()=>{(0,t.v)("analytics")?((0,zc.e6)(new ti({url:bs()})),Hs.contextSrv.user.isSignedIn&&(nd(),Xc())):n.config.featureToggles.featureHighlights&&Xc()},bs=()=>(0,Br.iE)().isPublicDashboardView?`api/public/ma/events/${ad()}`:"api/ma/events",Pl=()=>{const{uid:p}=(0,ce.UO)(),N=(0,Zt.xG)("insights"),F=(0,o.useSelector)(J=>J.navIndex),G=(0,je.ht)(F,`datasource-insights-${p}`,N);return a.createElement(Nn.T,{navId:"datasources",pageNav:G.main},a.createElement(Nn.T.Contents,null,a.createElement(cc,{uid:p})))},sd=()=>{const{uid:p}=(0,ce.UO)(),N=(0,Oo.xG)("insights"),F=(0,o.useSelector)(J=>J.navIndex),G=(0,je.ht)(F,`datasource-insights-${p}`,N);return a.createElement(Nn.T,{navId:"datasources",pageNav:G.main},a.createElement(Nn.T.Contents,null,a.createElement(Yi,{uid:p})))},lr=()=>{const{uid:p}=(0,ce.UO)(),N=(0,Zt.xG)("permissions"),F=(0,o.useSelector)(J=>J.navIndex),G=(0,je.ht)(F,`datasource-permissions-${p}`,N);return a.createElement(Nn.T,{navId:"datasources",pageNav:G.main},a.createElement(Nn.T.Contents,null,a.createElement(Pc,{uid:p})))},ni=()=>{const{uid:p}=(0,ce.UO)(),N=(0,Zt.xG)("permissions"),F=(0,o.useSelector)(J=>J.navIndex),G=(0,je.ht)(F,`datasource-permissions-${p}`,N);return a.createElement(Nn.T,{navId:"datasources",pageNav:G.main},a.createElement(Nn.T.Contents,null,a.createElement(vc,{uid:p})))},od=()=>{const{uid:p}=(0,ce.UO)(),N=(0,Oo.xG)("permissions"),F=(0,o.useSelector)(J=>J.navIndex),G=(0,je.ht)(F,`datasource-permissions-${p}`,N);return a.createElement(Nn.T,{navId:"datasources",pageNav:G.main},a.createElement(Nn.T.Contents,null,a.createElement(sr,{uid:p})))},id={permissions:[],enabled:!1,datasourceId:0},ld={dataSourcePermission:(p=id,N)=>{switch(N.type){case el.LoadDataSourcePermissions:return{enabled:N.payload.enabled,permissions:N.payload.permissions,datasourceId:N.payload.datasourceId}}return p}};var Cl=e(74639),Ds=e(62108),Ms=e(8874),cs=e(51727),Yr=e(89033),ro=e(33877),or=e(73807),Dl=e(39705);const cd=Dl.Rh.injectEndpoints({endpoints:p=>({requestAccess:p.mutation({query:N=>({url:"/public/dashboards/share/request-access",method:"POST",data:N})}),addRecipient:p.mutation({query:({recipient:N,uid:F})=>({url:`/public-dashboards/${F}/share/recipients`,method:"POST",data:{recipient:N}}),async onQueryStarted(N,{dispatch:F,queryFulfilled:G}){await G,F((0,ro.$l)((0,or.AT)("Invite sent!")))},invalidatesTags:(N,F,{dashboardUid:G})=>[{type:"PublicDashboard",id:G}]}),deleteRecipient:p.mutation({query:({uid:N,recipientUid:F})=>({url:`/public-dashboards/${N}/share/recipients/${F}`,method:"DELETE"}),async onQueryStarted(N,{dispatch:F,queryFulfilled:G}){await G,F((0,ro.$l)((0,or.AT)("User revoked")))},invalidatesTags:(N,F,{dashboardUid:G})=>[{type:"PublicDashboard",id:G},"UsersWithActiveSessions","ActiveUserDashboards"]}),reshareAccessToRecipient:p.mutation({query:({uid:N,recipientUid:F})=>({url:`/public-dashboards/${N}/share/recipients/${F}`,method:"PATCH"}),async onQueryStarted(N,{dispatch:F,queryFulfilled:G}){await G,F((0,ro.$l)((0,or.AT)("Invite resent!")))}}),getActiveUsers:p.query({query:()=>({url:"/public-dashboards/share/users?status=active"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:p.query({query:N=>({url:`/public-dashboards/share/users/${N}/dashboards?status=active`}),providesTags:(N,F,G)=>[{type:"ActiveUserDashboards",id:G}]})}),overrideExisting:!0}),{useRequestAccessMutation:Au,useGetActiveUserDashboardsQuery:Lu,useGetActiveUsersQuery:Fm}=cd,Bu=null;var dd=(p=>(p.INTERNAL_SERVER_ERROR="publicdashboards.internalServerError",p.NOT_FOUND_MAGIC_LINK="publicdashboards.magicLinkNotFound",p.EXPIRED_MAGIC_LINK="publicdashboards.magicLinkExpired",p.INVALID_SESSION="publicdashboards.invalidSession",p.EXPIRED_SESSION="publicdashboards.sessionExpired",p))(dd||{});const Sl={title:"Request access",description:"You'll receive an email with a one-time link."},ud="Something went wrong",xl="To request access to the dashboard again, enter your email. You'll receive an email with a one-time link.",br={["publicdashboards.internalServerError"]:ud,["publicdashboards.magicLinkNotFound"]:"This link has expired or already been used",["publicdashboards.magicLinkExpired"]:"This magic link has expired",["publicdashboards.invalidSession"]:"You no longer have access",["publicdashboards.sessionExpired"]:"Your access has expired"},Nu=p=>p?{title:br[String(p)]||ud,description:xl}:Sl,Ml=(0,W.css)`
  justify-content: center;
  width: 100%;
`,md=Cl.wl.pages.RequestViewAccess,Uu=()=>{const p=(0,A.wW)(wu),{accessToken:N}=(0,ce.UO)(),[{error:F}]=(0,Yr.K)(),[G,{isLoading:J,isSuccess:se}]=Au(),{register:me,handleSubmit:be,formState:{errors:Ae},reset:Ke}=(0,_.cI)({mode:"onSubmit"}),Ye=Nu(F?String(F):void 0),Ze=async ot=>{await G({accessToken:N,email:ot.email}).unwrap(),Ke()};return a.createElement(Ms.dd,{branding:{loginTitle:Ye.title,loginSubtitle:Ye.description,hideFooter:!0}},a.createElement(Ms.$s,null,a.createElement("form",{className:Ml,onSubmit:be(Ze)},a.createElement(Q.g,{label:"Email",error:Ae?.email?.message,invalid:!!Ae.email},a.createElement(te.I,{"data-testid":md.recipientInput,placeholder:"email",autoCapitalize:"none",...me("email",{required:"Email is required",pattern:{value:cs.C2,message:"Invalid email"}})})),a.createElement(Je.zx,{"data-testid":md.submitButton,disabled:se,type:"submit",className:Ml},se?"Access requested":"Request access"," ",J&&a.createElement(Ds.$,{className:p.loadingSpinner})))))},wu=p=>({loadingSpinner:(0,W.css)`
    margin-left: ${p.spacing(1)};
  `}),Wu=Uu;var Uo=e(42751),Or=e(31058),Tl=e(84749),wo=e(3935),oo=e(10864),Zr=e(83967),Ol=e(5933),io=e(32159),fd=e(94372),Ti=e(71107),Fu=e(60644);const gd=p=>{const{onChange:N,value:F}=p,G=(0,A.wW)(Ku);return a.createElement(Ti.Z,{className:G.filter},a.createElement(Fu.c,{width:"auto"},"Filter by data source"),a.createElement(oe._,null,a.createElement(fd.q,{width:30,placeholder:"Select a data source",onChange:J=>{N({name:J.name,id:J.id,uid:J.uid})},noDefault:!0,current:F})),a.createElement(oe._,null,a.createElement(Je.zx,{className:G.button,icon:"trash-alt",variant:"secondary",onClick:()=>{N(void 0)}})))},Ku=p=>({filter:(0,W.css)`
      margin-bottom: ${n.config.theme.spacing.md};
    `,button:(0,W.css)`
      color: ${p.colors.text.secondary};
    `});var ai=e(76305);const pd=({recordedQuery:p,buttons:N})=>{const F=(0,A.wW)($u),G=(0,oo.F)()?.getInstanceSettings(p.queries[0]?.datasource);return a.createElement("div",{className:F.alert},G?.meta&&a.createElement("img",{className:F.media,src:G.meta.info.logos.small,alt:"Query logo"}),a.createElement("div",{className:F.body},a.createElement("div",{className:F.info},a.createElement("div",null,a.createElement("h2",{className:F.heading},p.name),a.createElement("p",{className:F.description},Oi(p))),a.createElement("div",{className:F.buttonWrapper},N.map((J,se)=>a.createElement("div",{key:`button-${se}`,className:F.button},J))))))},Oi=p=>{const N=[`Interval: ${(0,ai.secondsToHms)(p.interval)}`,`Range: Last ${(0,ai.secondsToHms)(p.range)}`],F=(0,oo.F)()?.getInstanceSettings(p.queries[0]?.datasource);return F!==void 0&&N.unshift(F.name),p.description!==""&&N.push(`${p.description}`),N.join(" | ")},$u=p=>{const N=p.shape.borderRadius();return{info:(0,W.css)`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,heading:(0,W.css)`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      margin-bottom: 0;
      font-size: ${p.typography.size.md};
      letter-spacing: inherit;
      line-height: ${p.typography.body.lineHeight};
      color: ${p.colors.text.primary};
      font-weight: ${p.typography.fontWeightMedium};
    `,description:(0,W.css)`
      width: 100%;
      margin: ${p.spacing(1,0,0)};
      color: ${p.colors.text.secondary};
      line-height: ${p.typography.body.lineHeight};
    `,alert:(0,W.css)`
      flex-grow: 1;
      position: relative;
      border-radius: ${N};
      display: flex;
      flex-direction: row;
      align-items: center;
      background: ${p.colors.background.secondary};
      box-shadow: ${p.shadows.z1};
      margin-bottom: ${p.spacing(1)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${p.colors.background.primary};
        z-index: -1;
      }
    `,body:(0,W.css)`
      color: ${p.colors.text.secondary};
      padding: ${p.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:(0,W.css)`
      color: ${p.colors.text.secondary};
      padding-top: ${p.spacing(1)};
      margin-left: 26px;
    `,media:(0,W.css)`
      margin-left: ${p.spacing(2)};
      width: 40px;
    `,buttonWrapper:(0,W.css)`
      padding: ${p.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
      margin-right: ${p.spacing()};
    `,button:(0,W.css)`
      margin-left: ${p.spacing()};
    `}};var Ii=e(78209);const Il={recordedQueries:[],isLoading:!1,errorRecordedQueryTestResponse:""},Jr=(0,sn.oM)({name:"recorded-queries",initialState:Il,reducers:{loadRecordedQueries:p=>({...p,isLoading:!0}),endLoadRecordedQueries:p=>({...p,isLoading:!1}),loadedRecordedQueries:(p,N)=>{const F=N.payload;return{...p,recordedQueries:F}},updateRecordedQueries:(p,N)=>{const F=N.payload,G=p.recordedQueries.map(J=>J.id===F.id?F:J);return{...p,recordedQueries:G}},deleteRecordedQueries:(p,N)=>{const F=N.payload,G=p.recordedQueries.filter(J=>J.id!==F.id);return{...p,recordedQueries:G}},setPrometheusWriteTarget:(p,N)=>{const F=N.payload;return{...p,prometheusWriteTarget:F}}}}),{loadRecordedQueries:Ir,endLoadRecordedQueries:Vu,loadedRecordedQueries:zu,updateRecordedQueries:_u,deleteRecordedQueries:Ri,setPrometheusWriteTarget:Rl}=Jr.actions,ku={recordedQueries:Jr.reducer},So="api/recording-rules";function vd(){return async p=>{p(Ir());try{const N=await(0,y.i)().get(So);p(zu(N))}finally{p(Vu())}}}function si(p){return async N=>{await(0,y.i)().put(So,p),N(_u(p))}}function Wo(p){return async N=>{await(0,y.i)().delete(`${So}/${p.id}`),N(Ri(p))}}function Hu(p){return(0,Ii.n)((0,y.i)().fetch({method:"POST",url:So,data:p,showErrorAlert:!1}))}function Gu(p){return(0,Ii.n)((0,y.i)().fetch({method:"POST",url:`${So}/test`,data:p,showSuccessAlert:!1,showErrorAlert:!1}))}function Al(){return async p=>{try{const N=await(0,Ii.n)((0,y.i)().fetch({method:"GET",url:`${So}/writer`,showSuccessAlert:!1,showErrorAlert:!1}));p(Rl(N.data))}catch(N){console.error(N)}}}function ju(p){return(0,Ii.n)((0,y.i)().fetch({method:"POST",url:`${So}/writer`,data:p,showSuccessAlert:!1,showErrorAlert:!1}))}const Ed=p=>p.recordedQueries,Ll=p=>p.prometheusWriteTarget,Qu=p=>({expr:`${p.prom_name}{id="${p.id}", name="${p.name}"}`,legendFormat:"",interval:"",exemplar:!0,datasource:p.dest_data_source_uid});function Bl(p){return{recordedQueries:Ed(p.recordedQueries)}}const Yu={getRecordedQueriesAsync:vd},Nl=(0,k.connect)(Bl,Yu),Ai=({onAddQuery:p,getRecordedQueriesAsync:N,recordedQueries:F,onChangeDataSource:G,filterValue:J})=>{const[se,me]=(0,a.useState)(!1),[be,Ae]=(0,a.useState)(J),[Ke,Ye]=(0,a.useState)([]),Ze=(0,A.wW)(lo);(0,a.useEffect)(()=>{N()},[se,N]);const ot=(Dt,Vt)=>{Ye(Vt?Ke.concat(Dt):Ke.filter(en=>!(0,We.isEqual)(en,Dt)))},rt=()=>{(0,i.ff)("cloud_user_clicked_add_selected_recorded_queries",{recorded_queries_selected:Ke.map(Vt=>Vt.name)});const Dt=(0,oo.F)().getInstanceSettings(io.D);G?.(Dt),Ke.map(Qu).forEach(Vt=>{p?.(Vt)}),me(!1),Ye([]),Ol.Z.emit(wo.SI.alertSuccess,["Selected recorded queries added to the editor. The data source has been changed to mixed."])},gt=Pr(F,be).map(Dt=>a.createElement(Nr,{key:Dt.id,onQueryToggle:ot,recordedQuery:Dt})),Pt=()=>{me(!1),Ye([])},vt=()=>{(0,i.ff)("cloud_user_clicked_add_recorded_query_button"),me(!0)};return a.createElement(a.Fragment,null,a.createElement(Je.zx,{icon:"plus",onClick:vt,variant:"secondary",className:Ze.openButton},"Recorded query"),a.createElement(_e.u,{isOpen:se,title:"Add recorded query",onDismiss:Pt,className:Ze.modal},a.createElement(gd,{value:be?.name,onChange:Ae}),a.createElement(re.b,{title:"",severity:"info"},"To create a new Recorded Query, return to the query editor and use the "," ",a.createElement(c.J,{name:"record-audio"})," "," icon in the series bar."),gt.length>0?gt:be&&a.createElement("div",{className:Ze.noQueries},"No recorded queries available for ",be?.name),a.createElement("div",{className:Ze.modalButtons},a.createElement(Je.zx,{variant:"secondary",className:Ze.modalButton,onClick:Pt},"Cancel"),a.createElement(Je.zx,{variant:"primary",className:Ze.modalButton,onClick:rt,disabled:Ke.length===0},"Add"))))},Nr=({onQueryToggle:p,recordedQuery:N})=>{const[F,G]=(0,a.useState)(!1);return a.createElement(pd,{recordedQuery:N,buttons:[a.createElement(Zr.X,{name:N.id,value:F,key:`${N.id}-checked`,onChange:()=>{p(N,!F),G(!F)}})]})},Pr=(p,N)=>{const F=(0,oo.F)();return p.filter(G=>G.active).filter(G=>!N||G.queries[0].datasource.uid===N.uid).sort((G,J)=>{const se=F?.getInstanceSettings(G.queries[0]?.datasource),me=F?.getInstanceSettings(J.queries[0]?.datasource),be=se?.meta.name.localeCompare(me?.meta.name??"");if(be!==void 0&&be!==0)return be;const Ae=se?.name.localeCompare(me?.name??"");return Ae!==void 0&&Ae!==0?Ae:G.name.localeCompare(J.name)})},lo=p=>({modalButtons:(0,W.css)`
      display: flex;
      justify-content: end;
    `,openButton:(0,W.css)`
      margin-left: -8px;
    `,modalButton:(0,W.css)`
      margin-left: ${p.spacing(1)};
    `,modal:(0,W.css)`
      width: 750px;
    `,noQueries:(0,W.css)`
      margin-left: ${p.spacing(1)};
      margin-bottom: ${p.spacing(3)};
    `}),Km=Nl(Ai);var $m=e(8508),Ul=e(59421),wl=e(2184),Zu=e(32173),yd=e(984),Wl=e(41355),Li=e(5399),Fo=e(51824),Bi=e(6230);const Fl=[{label:"30 seconds",value:30},{label:"1 minute",value:60},{label:"5 minutes",value:300},{label:"30 minutes",value:1800},{label:"1 hour",value:3600},{label:"12 hours",value:43200},{label:"24 hours",value:86400},{label:"1 week",value:604800},{label:"1 month",value:2592e3}],Ju=({label:p,description:N,value:F,onChange:G})=>a.createElement("div",null,a.createElement(Q.g,{label:p,description:N,required:!0},a.createElement(g.Ph,{options:Fl,onChange:J=>{G(J.value)},value:F,"aria-label":`${p}-select`,menuShouldPortal:!0})));function Xu(p){return{variables:(0,Fo.ng)(p)}}const bd=(0,k.connect)(Xu),Ni=({href:p,trackingSource:N})=>{const F=(0,A.wW)(Pd);return a.createElement("a",{href:p,className:F.docsLink,target:"_blank",rel:"noreferrer",onClick:()=>(0,i.ff)("cloud_user_clicked_create_recorded_query_modal_documentation_icon",{source:N})},a.createElement(c.J,{name:"info-circle"}))},Kl=({query:p,queries:N,dataSource:F,variables:G})=>{const[J,se]=(0,a.useState)(!1),[me,be]=(0,a.useState)(),[Ae,Ke]=(0,a.useState)("info"),[Ye,Ze]=(0,a.useState)(""),ot=(0,A.wW)(Zu.J),rt=(0,A.wW)(Pd);(0,a.useEffect)(()=>{(async()=>{s.contextSrv.hasAccess(w.LicensingRead,s.contextSrv.isGrafanaAdmin)&&be(await so().catch(()=>{}))})()},[]);const gt=()=>{Ze(""),Ke("info"),se(!1)},Pt=async ln=>{try{return await Vt(ln,en)}catch(yn){Ke("error"),(0,y.kW)(yn)&&Ze(yn.data.message);return}},vt=async ln=>{const yn=await Pt(ln);yn&&Hu(yn).then(()=>{Ke("success"),Ze("Your new recorded query is recording successfully!"),(0,i.ff)("cloud_user_created_recorded_query")}).catch(En=>{Ke("error"),Ze(`Result: ${En.data.message}`)})},Dt=async ln=>{const yn=await Pt(ln);yn&&Gu(yn).then(En=>{Ke("info"),Ze(`Result: ${En.data.message}`)}).catch(En=>{Ke("error"),Ze(En.data.message)})},Vt=async(ln,yn)=>{const En={target_ref_id:p?p.refId:"",name:ln.name,description:ln.description,interval:ln.interval,range:ln.range,count:ln.isCount,active:!0},In=N?.map(async Wn=>{const On=Wn.datasource||F?.name,Xn=await(0,oo.F)().get(On),Ln=Xn.interpolateVariablesInQueries?Xn.interpolateVariablesInQueries([Wn],{...yn})[0]:Wn;return Ln.datasourceId=Xn?Xn.id:-1,Ln.datasource===void 0&&(Wn.datasource!==void 0&&Wn.datasource!==null?Ln.datasource=Wn.datasource:Xn&&(Ln.datasource={uid:Xn.uid,type:Xn.type})),Ln});return En.queries=In?await Promise.all(In):[],En},en=G?.filter(ln=>ln.hide!==Bi.bU.hideVariable),zt=a.createElement("h2",{className:ot.modalHeaderTitle},"Create recorded query",a.createElement(Ni,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"modal-title"})),an=Ae!=="success"?a.createElement("div",{"aria-label":"Test the recorded query"},a.createElement(c.J,{name:"sync"})):void 0,Jt=Ae==="success"?a.createElement(Je.zx,{type:"button",variant:"primary",onClick:gt,"aria-label":"Close recording query button"},"Close"):a.createElement(Je.zx,{type:"button",variant:"secondary",onClick:gt,fill:"outline","aria-label":"Cancel recording query button"},"Cancel");return a.createElement(a.Fragment,null,a.createElement(yd.y,{title:"Create recorded query",icon:"record-audio",onClick:()=>{se(!0),(0,i.ff)("cloud_user_clicked_create_recorded_query_icon")}}),a.createElement(_e.u,{isOpen:J,title:zt,onDismiss:gt,className:rt.modal},a.createElement(Er.l,{onSubmit:vt,validateOn:"all"},({register:ln,errors:yn,control:En,getValues:In})=>a.createElement(a.Fragment,null,a.createElement(Q.g,{label:"Name",description:"Give this query a name",invalid:!!yn.name,error:yn.name?.message,required:!0},a.createElement(te.I,{...ln("name",{required:{value:!0,message:"Name is required"}}),id:"add-recorded-query-name",autoFocus:!0})),a.createElement(Q.g,{label:"Description",description:"Provide a description for this query"},a.createElement(te.I,{...ln("description"),id:"add-recorded-query-desc"})),a.createElement("div",{className:rt.timeSelect},a.createElement(H.g,{name:"interval",control:En,defaultValue:Fl[0].value,render:({field:{ref:Wn,value:On,onChange:Xn,...jn}})=>a.createElement(Ju,{label:"Interval",description:"Decide how often to record this query",value:On,onChange:Xn})})),a.createElement("div",{className:rt.timeSelect},a.createElement(H.g,{name:"range",control:En,defaultValue:(0,$m.Rr)().from,render:({field:{ref:Wn,value:On,onChange:Xn,...jn}})=>{const Ln=a.createElement(a.Fragment,null,"Select this query's relative time range",a.createElement(Ni,{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/#time-units-and-relative-ranges",trackingSource:"time-range"})),na=a.createElement(ta._,{description:Ln},"Relative Time Range *");return a.createElement(Q.g,{label:na,invalid:!!yn.range,error:yn.name?.message,required:!0},a.createElement(wl.x,{timeRange:{from:On,to:0},onChange:ia=>Xn(ia.from)}))}})),en?.length>0?a.createElement(Q.g,{label:"Template variables",description:"Select a value for each template variable"},a.createElement(a.Fragment,null,en.map(Wn=>{const{picker:On,setValue:Xn}=Wl.z.get(Wn.type);return a.createElement(oe._,{label:Wn.name,key:Wn.name,labelWidth:16},a.createElement(On,{onVariableChange:jn=>{(0,Li.eL)(jn)&&!(0,Ul.Q)(jn.current)&&Xn(jn,jn.current)},variable:Wn,readOnly:!1}))}))):null,a.createElement(Q.g,{label:"Count query results",description:a.createElement(a.Fragment,null,"Count the rows returned from this query",a.createElement(Ni,{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#create-a-recorded-query",trackingSource:"count-field"}))},a.createElement(X.r,{...ln("isCount"),id:"add-recorded-query-count"})),a.createElement(re.b,{className:rt.testQuery,severity:Ae,title:Ae==="success"?Ye:"Test this recorded query",buttonContent:an,onRemove:Ae!=="success"?()=>Dt(In()):void 0},a.createElement(a.Fragment,null,Ae!=="success"&&Ye),Ye==="An unknown issue is preventing the system from processing your query."&&qu(me)),a.createElement(_e.u.ButtonRow,null,Jt,Ae!=="success"&&a.createElement(Je.zx,{type:"submit","aria-label":"Start recording query button"},"Start recording query"))))))},qu=p=>{let N="https://grafana.com/contact";return p&&p.slug&&p.lid&&(N=`https://grafana.com/orgs/${p.slug}/tickets?support=licensing&licenseId=${p.lid}`),a.createElement(a.Fragment,null,"To submit a support ticket to Grafana Labs, complete the ",a.createElement("a",{href:N},"Contact Grafana Labs"))},Pd=p=>({modal:(0,W.css)`
      width: 550px;
    `,testQuery:(0,W.css)`
      margin-top: ${p.spacing(3)};
    `,timeSelect:(0,W.css)`
      width: 50%;
    `,docsLink:(0,W.css)`
      margin-left: ${p.spacing(.5)};
    `}),em=bd(Kl),Cd=()=>{const N=Tl.h.getState().recordedQueries.prometheusWriteTarget;return!!N?.data_source_uid&&!!N?.remote_write_path};function tm(){(0,t.v)("recordedqueries")&&n.config?.recordedQueries?.enabled&&((0,Tl.WI)(Al()),Or.f.addExtraRenderAction(N=>Cd()&&(N.dataSource?.meta.backend||(0,Uo.Pr)(N.dataSource))?a.createElement(em,{...N}):null),Or.S.addExtraRenderAction(N=>Cd()?a.createElement(Km,{...N}):null))}var Dd=e(95685),nm=e(60801);const am=()=>{const p=(0,A.wW)($l);return a.createElement(nm._,{className:p.cta,message:"No recorded queries defined",footer:a.createElement("span",{key:"proTipFooter"},a.createElement(c.J,{name:"rocket"}),"ProTip: ","You can record queries from the query editor."),callToActionElement:a.createElement(a.Fragment,null)})},$l=p=>({cta:(0,W.css)`
      text-align: center;
    `});function Vl(p){return{navModel:(0,je.ht)(p.navIndex,"recordedQueries"),recordedQueries:Ed(p.recordedQueries),isLoading:p.recordedQueries.isLoading}}const Sd={getRecordedQueriesAsync:vd,updateRecordedQuery:si,deleteRecordedQuery:Wo},xd=(0,k.connect)(Vl,Sd),Md=({navModel:p,isLoading:N,recordedQueries:F,getRecordedQueriesAsync:G,updateRecordedQuery:J,deleteRecordedQuery:se})=>{(0,a.useEffect)(()=>{G()},[G]);const me=(0,A.wW)(ri),[be,Ae]=(0,a.useState)(),Ke=F.map(Ze=>{const ot=[a.createElement(Je.zx,{key:"toggle-recorded-query-active",onClick:async()=>{await J({...Ze,active:!Ze.active})},variant:Ze.active?"secondary":"primary"},Ze.active?"Pause recording":"Resume recording"),a.createElement(Je.zx,{key:"delete-recorded-query","aria-label":"Delete recorded query",onClick:()=>Ae(Ze),variant:"destructive"},"Delete")];return a.createElement(pd,{key:Ze.id,recordedQuery:Ze,buttons:ot})}),Ye=()=>N?a.createElement(Dd.Z,null):Ke.length===0?a.createElement(am,null):Ke;return a.createElement(Nn.T,{navModel:p},a.createElement(Nn.T.Contents,null,a.createElement("div",{className:me.header},a.createElement(Je.Qj,{icon:"cog",href:"/recorded-queries/write-target"},"Edit remote write target")),Ye(),be&&a.createElement(qn.s,{isOpen:!0,icon:"trash-alt",title:"Delete",body:a.createElement("div",null,"Are you sure you want to delete '",be.name,"'?"),confirmText:"Delete",onDismiss:()=>Ae(void 0),onConfirm:async()=>{await se(be),Ae(void 0)}})))},ri=p=>({header:(0,W.css)`
      display: flex;
      justify-content: flex-end;
      margin-bottom: ${p.spacing(1)};
    `,title:(0,W.css)`
      margin-bottom: 0;
      width: 100%;
    `}),sm=xd(Md);function Td(p){return{navModel:(0,je.ht)(p.navIndex,"recordedQueries"),prometheusWriteTarget:Ll(p.recordedQueries)}}const rm={getPrometheusWriteTarget:Al},Ko=(0,k.connect)(Td,rm),Od=({navModel:p,prometheusWriteTarget:N,getPrometheusWriteTarget:F})=>{const[G,J]=(0,a.useState)(),[se,me]=(0,a.useState)(N?.remote_write_path),be=(0,A.wW)(zl);(0,a.useEffect)(()=>{F()},[F]),(0,a.useEffect)(()=>{(async()=>{if(N){const Ze=await(0,oo.F)().getInstanceSettings(N.data_source_uid);J(Ze)}})()},[N]);const Ae=Ye=>{Id(G?.uid,Ye.remote_write_path)},Ke=a.createElement("span",null,"Select the data source where metrics will be written",a.createElement("a",{href:"https://grafana.com/docs/grafana/latest/enterprise/recorded-queries/#remote-write-target",className:be.docsLink,target:"_blank",rel:"noreferrer"},a.createElement(c.J,{name:"info-circle"})));return a.createElement(Nn.T,{navModel:p},a.createElement(Nn.T.Contents,null,a.createElement(Er.l,{key:N?.data_source_uid,defaultValues:N,onSubmit:Ae},({register:Ye})=>a.createElement(a.Fragment,null,a.createElement(Q.g,{label:Ke},a.createElement(fd.q,{onChange:J,current:G?.name,placeholder:"Select a data source",type:"prometheus",noDefault:!0,alerting:!0,"aria-label":"Write target config select data source"})),a.createElement(Q.g,{label:"Remote write path"},a.createElement(te.I,{...Ye("remote_write_path"),onChange:Ze=>me(Ze.currentTarget.value),placeholder:"/api/v1/write","aria-label":"Write target config remote write path"})),a.createElement(Je.zx,{disabled:!se||!G,type:"submit","aria-label":"Write target config save"},"Save")))))};function Id(p,N){ju({data_source_uid:p,remote_write_path:N}).then(()=>{Ol.Z.emit(wo.SI.alertSuccess,["Prometheus remote write target created"])}).catch(F=>{Ol.Z.emit(wo.SI.alertError,[F.data.message])})}const zl=p=>({docsLink:(0,W.css)`
      margin-left: ${p.spacing(1)};
    `}),Rd=Ko(Od);var Ui=e(99829),_l=e(19067),oi=e(78968),kl=e(26858),Ad=e(75627);const om=({dashboard:p,onDismiss:N})=>{(0,a.useEffect)(()=>{(0,i.ff)("grafana_dashboards_report_share_viewed")},[]);const F=(0,A.wW)(im),G=()=>{const se=oi.Cj.toUrlParams((0,Ad.c)()),me=oi.Cj.toUrlParams((0,kl.$t)().timeRangeForUrl());return`?${se}&${me}&db-uid=${p.uid}&db-id=${p.id}&db-name=${p.title}`};return(0,t.v)("reports.creation")?a.createElement(a.Fragment,null,(0,fn.d5)()&&a.createElement("div",{className:F.highlight},a.createElement(Ht.Xz,{featureId:"reporting-tab",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."}),a.createElement("h3",null,"Get started with reporting"),a.createElement("h6",null,"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule.")),a.createElement(Je.Qj,{href:`reports/new/${G()}`,onClick:N,className:F.button},"Create report using this dashboard"),(0,fn.d5)()&&a.createElement(Je.Qj,{fill:"text",href:"https://grafana.com/docs/grafana/latest/enterprise/reporting"},"Learn more")):a.createElement("div",{className:F.container},a.createElement(Ht.Xz,{featureName:"reporting",featureId:"reporting-tab"}),a.createElement(Ht.tM,{image:"reporting-email.png",featureName:"reporting",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule."}))},im=p=>({container:(0,W.css)`
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    `,button:(0,W.css)`
      margin-right: ${p.spacing(2)};
    `,highlight:(0,W.css)`
      margin-bottom: ${p.spacing(3)};

      h6 {
        font-weight: ${p.typography.fontWeightLight};
      }
    `});var $o=e(28981);const Hl="/public/img/grafana_icon.svg",Gl="https://grafana.com/static/assets/img/grafana_logo_lockup_ltbg.png",Cr="/reports",lm="api/reports/images/",wi=2,Wi={1:{label:"Zoom in",style:{transform:"translateX(-10%)"}},2:{label:"Standard"},3:{label:"Zoom out",style:{width:"100%",left:"91%"}}};var cm=e(73170),Ld=e(4684);const jl=(p,N={hour:0,minute:0},F)=>{const G=`${N.hour}:${N.minute}:00`,J=typeof p=="string"?Xr(p):p,se=new Date(`${(0,Ua.CQ)(J).format("YYYY/MM/DD")} ${G}`),me=(0,Do.dq)(se.getTime(),{timeZone:F,format:"Z"});return dm((0,Ua.CQ)(se).format())+me},dm=p=>p.includes("Z")?p.replace("Z",""):p.slice(0,-6),Xr=p=>p?(0,Ua.CQ)(p.split("T")[0]).toDate():"",Fi=p=>String(p).length===1?`0${p}`:String(p),ii=p=>{if(!p)return{hour:0,minute:0};const N=p.match(/T(\d+):(\d+)/);if(N){const[,F,G]=N;return{hour:parseInt(F,10),minute:parseInt(G,10)}}return{hour:0,minute:0}},um=p=>p?dateTime(p).isBefore(dateTime()):!1,Bd=p=>{if(!p)return{time:void 0,date:void 0};const{hour:N,minute:F}=ii(p);return{date:(0,Do.dq)(p,{format:"MMMM DD, YYYY"}),time:`${Fi(N)}:${Fi(F)}`}},Nd=p=>{if(!p.from||!p.to)return"Dashboard time range";const N=parseInt(p.from,10),F=parseInt(p.to,10);return!isNaN(N)&&!isNaN(F)?(0,ai.describeTimeRange)({from:(0,Ua.CQ)(N),to:(0,Ua.CQ)(F)}):(0,ai.describeTimeRange)(p)},Ud=p=>!p||!p.from||!p.to,li=p=>p?.length?Object.fromEntries(p.map(N=>{const{getValueForUrl:F}=Wl.z.get(N.type),G=F(N);return[N.name,Array.isArray(G)?G.join(","):G]})):{},mm=(p,N)=>!N||!Object.keys(N).length?p:p.map(F=>{const G=N[F.name];if(!G||!(0,Li.eL)(F))return F;const J=G.split(","),se=J.map(me=>F.options.find(be=>be.value===me)||{text:me,value:me}).filter(Boolean);return{...F,current:{...F.current,text:se.map(me=>me?.text),value:se.map(me=>me?.value)},options:F.options.map(me=>({...me,selected:typeof me.value=="string"&&J.includes(me.value)}))}}),wd=()=>{const p="var-",N=new URLSearchParams(window.location.search),F={};for(const[G,J]of N.entries())if(G.startsWith(p)){const se=G.replace(p,"");F[se]=[...F[se]||[],J]}return Object.fromEntries(Object.entries(F).map(([G,J])=>[G,J.join(",")]))},Wd=p=>p.some(N=>(0,Li.Xh)(N)&&N.refresh===Bi.Bd.onTimeRangeChanged);var Fd=e(81587);const Ql=()=>{if(!window.Intl)return"";const p=window.Intl.DateTimeFormat();if(!p.resolvedOptions)return"";const N=p.resolvedOptions();return N.timeZone?N.timeZone:""},Ki={from:(0,Ua.CQ)(null),to:(0,Ua.CQ)(null),raw:{from:"",to:""}},ci={id:0,name:"",recipients:"",replyTo:"",message:`Hi, 
Please find attached a PDF status report. If you have any questions, feel free to contact me!
Best,`,dashboardId:void 0,dashboardName:"",dashboards:[{dashboard:void 0,timeRange:Ki.raw}],schedule:{frequency:S.Weekly,timeZone:Ql()},formats:["pdf"],scaleFactor:wi,options:{orientation:"landscape",layout:"grid",timeRange:Ki.raw},enableDashboardUrl:!0,state:R.Scheduled},$i={reports:[],report:ci,hasFetchedList:!1,hasFetchedSingle:!1,searchQuery:"",reportCount:0,isLoading:!0,isUpdated:!1,visitedSteps:[],settings:{branding:{reportLogoUrl:"",emailLogoUrl:"",emailFooterMode:M.SentBy,emailFooterText:"",emailFooterLink:""}}},Kd=(0,sn.oM)({name:"reports",initialState:$i,reducers:{reportsLoaded:(p,N)=>({...p,reports:N.payload,reportCount:N.payload.length,hasFetchedList:!0}),reportLoaded:(p,N)=>({...p,report:N.payload,hasFetchedSingle:!0,isLoading:!1}),updateReportProp:(p,N)=>({...p,isUpdated:!0,report:N.payload}),clearReportState:p=>({...p,isUpdated:!1,visitedSteps:[],report:ci}),reportLoadingBegin:p=>({...p,isLoading:!0}),reportLoadingEnd:p=>({...p,isLoading:!1}),testEmailSendBegin:p=>({...p,testEmailIsSending:!0}),testEmailSendEnd:p=>({...p,testEmailIsSending:!1}),setLastUid:(p,N)=>({...p,lastUid:(0,Fd.mn)(N.payload)}),addVisitedStep:(p,N)=>({...p,visitedSteps:[...p.visitedSteps,...N.payload]})}}),{clearReportState:di,reportLoaded:fm,reportsLoaded:Vi,updateReportProp:qr,reportLoadingBegin:gm,reportLoadingEnd:ee,testEmailSendBegin:Y,testEmailSendEnd:ae,setLastUid:Ee,addVisitedStep:ke}=Kd.actions,at={reports:Kd.reducer},Et="api/reports";function Wt(){return async p=>{const N=await(0,y.i)().get(Et);p(Vi(N))}}function Ft(p,N,F){return async G=>{const J=await Na.ae.getDashboardByUid(p),se=new cm.f(J.dashboard,J.meta);if(Wd(se.templating.list)){const be=Ud(F)?se?.time:F;(0,kl.$t)().setTime(be)}const me=mm(se.templating.list,N);await G((0,Ld.LX)(J.dashboard.uid,{...se,templating:{list:me}})),G(Ee(p))}}function qt(p){return async N=>{N(gm());try{const F=await(0,y.i)().get(`${Et}/${p}`);F.dashboards||(F.dashboards=[{dashboard:{uid:F.dashboardUid,id:F.dashboardId,name:F.dashboardName},reportVariables:F.templateVars,timeRange:F.options.timeRange}]);for(const G of F.dashboards)G.dashboard.uid&&await N(Ft(G.dashboard.uid,G.reportVariables,G.timeRange));N(fm(F))}catch{N(ee())}}}function dn(p){return N=>(N(Y()),(0,y.i)().post(`${Et}/test-email/`,p).finally(()=>N(ae())))}function Rn(p){return async N=>{await(0,y.i)().delete(`${Et}/${p}`),N(Wt())}}function zn(p){return async()=>{try{await(0,y.i)().post(Et,p)}catch(N){throw N}}}function sa(p,N){return async F=>{const G=["hour","minute","day"];p={...p,schedule:Object.fromEntries(Object.entries(p.schedule).filter(([J,se])=>!G.includes(J)))},await(0,y.i)().put(`${Et}/${p.id}`,p),N&&F(Wt())}}const xa=p=>(0,We.upperFirst)(p.map(N=>{switch(N){case"csv":case"pdf":return N.toUpperCase();case"image":return"embedded image"}}).join(", ")),Qa=(p={})=>{const{time:N,startDate:F,endDate:G,endTime:J,timeZone:se,frequency:me,dayOfMonth:be,workdaysOnly:Ae,intervalFrequency:Ke,intervalAmount:Ye,sendTime:Ze}=p,ot=!N&&F?ii(String(F)):N,rt=F&&Ze!=="now"?jl(F,ot,se):"",gt=G&&![S.Once,S.Never].includes(me)?jl(G,J,se):"",Pt={frequency:me,timeZone:se,workdaysOnly:Ae,intervalFrequency:Ke,intervalAmount:Ye?parseInt(Ye,10):0,startDate:rt,endDate:gt,dayOfMonth:be?"last":""};return Object.fromEntries(Object.entries(Pt).filter(([vt,Dt])=>Dt))};function Zs(p){const N=["th","st","nd","rd"],F=p%100;return p+(N[(F-20)%10]||N[F]||N[0])}const Ss=(p,N=x.Hours)=>p===S.Custom&&N===x.Hours,gs=(p,N=x.Hours)=>[S.Hourly,S.Daily].includes(p)||Ss(p,N);function Rr({startDate:p,endDate:N,intervalFrequency:F=x.Hours,intervalAmount:G=2,frequency:J,dayOfMonth:se,timeZone:me,workdaysOnly:be}){if(!p)return"";const Ae="en-US",{hour:Ke,minute:Ye}=ii(p),Ze=Fi(Ye),ot=Fi(Ke),rt=(0,Ua.CQ)(Xr(p)).locale(Ae).format("dddd"),gt=se==="last"?"last":Zs(Xr(p).getDate());let Pt,vt;const Dt=(0,$o.k)(Date.now(),me),Vt=`at ${ot}:${Ze}${Dt?` ${Dt}`:""}`,en=be&&gs(J,F)?", Monday to Friday":"";if(N){const zt=(0,Ua.CQ)(Xr(p)).locale(Ae).format("LL"),an=(0,Ua.CQ)(Xr(N)).locale(Ae).format("LL");an!==zt?Pt=`${zt} - ${an}`:Pt=zt}switch(J){case S.Monthly:vt=`Monthly on the ${gt} day ${Vt}`;break;case S.Weekly:vt=`Every ${rt} ${Vt}`;break;case S.Daily:vt=`Daily ${Vt}`;break;case S.Hourly:vt=`Hourly at minute ${Ze}`;break;case S.Custom:vt=`Every ${G} ${F}`;break;case S.Once:vt=`Once on ${(0,Ua.CQ)(Xr(p)).locale(Ae).format("LL")}`;break;case S.Never:vt="Never";break;default:vt=""}return Pt&&vt?`${vt}, ${Pt}${en}`:(J===S.Custom&&(vt+=`, ${F===x.Hours?`from ${ot}:${Ze}${Dt?` ${Dt}`:""}`:`from ${(0,Ua.CQ)(Xr(p)).locale(Ae).format("LL")}`}`),vt+en)}const ui=new Map([[S.Monthly,"month"],[S.Daily,"day"],[S.Weekly,"week"],[S.Hourly,"hour"]]),Yl=p=>{const{frequency:N,intervalFrequency:F=x.Hours,intervalAmount:G="2"}=p;if(N===S.Never)return"The report will not be sent.";const J=p.workdaysOnly?", Monday to Friday.":".",se=[];if(!p.startDate){se.push("The report will be sent immediately after it is saved");const be=N===S.Custom?`${G} ${F}`:ui.get(N);return be&&se.push(`and will be sent every ${be}`),se.join(" ")+J}const me=Rr(Qa(p));return me&&se.push(`The report will be sent: ${me}.`),se.join(" ")},pm=p=>{const N=$i.report.schedule;return Object.keys(N).length!==Object.keys(p).length?!0:Object.entries(N).some(([F,G])=>G!==p[F])},Vm=()=>{if(!window.location.search)return null;const p=new URLSearchParams(window.location.search);return{timeRange:{to:p.get("to")||"",from:p.get("from")||""},dashboard:{uid:p.get("db-uid"),id:p.get("db-id"),name:p.get("db-name")},variables:wd()}},Tf=p=>{if(p.id)return p;const N=Vm();if(!N)return p;const{timeRange:F,dashboard:G,variables:J}=N;let se=[...$i.report.dashboards];return F?.from&&F?.to&&(se[0]={...se[0],timeRange:F}),G.name&&G.id&&G.uid&&(se[0]={...se[0],dashboard:{uid:G.uid,id:Number(G.id),name:G.name}}),J&&Object.keys(J).length&&(se[0]={...se[0],reportVariables:J}),{...p,dashboards:se}},Of=()=>{const p=new URLSearchParams(window.location.search),N=p.get("to"),F=p.get("from");return F&&N?{from:F,to:N}:null},Zl=(p,N)=>`${Cr}/${p}${N?"/"+N:""}`,hm=p=>N=>`${Cr}/${N}${p?"/"+p:""}`,If=p=>Array.isArray(p)?p?.length:!0,zm=p=>{const N=[{step:U.SelectDashboard,fields:["dashboards"]},{step:U.FormatReport,fields:["formats"]},{step:U.Share,fields:["name","recipients"]}],F=!p.dashboards?.[0]?.dashboard?.uid;return ir.reduce((G,J)=>{if(G[J.id]={valid:!0},J.id===U.SelectDashboard)return G[U.SelectDashboard].valid=!F,G;{const se=N.find(me=>me.step===J.id)?.fields;return se&&(G[J.id].valid=se.every(me=>p[me]&&If(p[me]))),G}},{})},Jl=(p,N)=>{const F=zm(p);return N?!F[N].valid:Object.values(F).some(G=>!G.valid)},vm=({uid:p,name:N,className:F})=>{const G=(0,A.wW)(Rf);return p?a.createElement("a",{href:`${n.config.appUrl}d/${p}`,className:(0,W.cx)(G.link,F),target:"_blank",rel:"noreferrer"},N||"View dashboard"):null},Rf=p=>({link:(0,W.css)`
      display: inline-block;
      color: ${p.colors.text.link};
      margin-top: ${p.spacing(1)};
      font-size: ${p.typography.bodySmall.fontSize};

      :hover {
        text-decoration: underline;
      }
    `}),Xl=p=>{if(!p)return ir[0];const N=ir.findIndex(F=>F.id===p);return N===ir.length-1?ir[N]:ir[N+1]},_m=p=>{if(!p||p===ir[0].id)return;const N=ir.findIndex(F=>F.id===p);return ir[N-1]},Af=(p,N)=>{const F=_m(p);F&&F.id!==p&&De.E1.push(Zl(F.id,N))},Em=(0,a.forwardRef)(({activeStep:p,disabled:N,reportId:F},G)=>{const J=(0,A.wW)(Lf),se=(0,a.useRef)(null),me=_m(p),be=Xl(p),Ae=be.id===p;return(0,a.useImperativeHandle)(G,()=>({click:()=>{se.current?.click()}})),a.createElement("div",{className:J.buttonRow},a.createElement("div",{className:J.buttonRowInner},a.createElement("div",null,me&&a.createElement(Je.zx,{variant:"secondary",onClick:()=>Af(p,F)},"Previous: ",me.name),!Ae&&a.createElement(Je.zx,{ref:se,disabled:N,type:"submit"},`Next: ${be.name}`))))});Em.displayName="ButtonRow";const Lf=p=>({buttonRow:(0,W.css)`
      display: flex;
      padding: ${p.spacing(2,0,.5,0)};
      border-top: 1px solid ${p.colors.border.weak};
      width: 100%;
      background-color: ${p.colors.background.primary};
      button {
        &:first-of-type {
          margin-right: ${p.spacing(2)};
        }
        &:last-of-type {
          margin-right: 0;
        }
      }
    `,buttonRowInner:(0,W.css)`
      display: flex;
      justify-content: space-between;
      width: 100%;
    `}),ym=p=>p?p.frequency===S.Never?"Save and exit":p.startDate?"Schedule send":"Send now":"Save report",km=p=>{const N=p.state,F=p.schedule.frequency===S.Never,G=F||[R.Draft,R.Expired,R.Paused].includes(N),J=F||[R.Expired].includes(N);return{isNever:F,showPlay:G,disableEdit:J,reportState:N}},Hm=p=>{let N=R.Scheduled;return p===R.Expired?N=p:p!==R.Paused&&(N=R.Paused),N},Bf=p=>{const{report:N}=p.reports;return{report:N}},Nf={loadReport:qt,deleteReport:Rn,updateReport:sa},Gm=(0,k.connect)(Bf,Nf),Uf=({report:p,loadReport:N,deleteReport:F,updateReport:G,disabled:J})=>{const se=(0,A.wW)(wf),[me,be]=(0,a.useState)(!1),Ae=Hs.contextSrv.hasPermission(w.ReportingDelete),Ke=Hs.contextSrv.hasPermission(w.ReportingWrite),{showPlay:Ye,disableEdit:Ze,reportState:ot}=km(p),rt=async()=>{const Pt=Hm(ot);await G({...p,state:Pt}),p.id&&N(p.id)},gt=()=>{F(p.id),be(!1),De.E1.push(Cr)};return a.createElement("div",{className:se.editActions},a.createElement(Je.Qj,{href:Zl(U.SelectDashboard,p.id),type:"button",disabled:!Ke},"Edit report"),a.createElement(Je.zx,{type:"button",variant:"secondary",disabled:Ze||!Ke||J,onClick:rt},Ye?ot===R.Draft?ym(p.schedule):"Resume":"Pause"),a.createElement(Ps.h,{variant:"destructive","aria-label":"Delete report",tooltip:"Delete",name:"trash-alt",disabled:!Ae,onClick:()=>be(!0)}),a.createElement(qn.s,{isOpen:me,title:"Delete report",body:"Are you sure you want to delete this report?",confirmText:"Delete",onConfirm:gt,onDismiss:()=>be(!1)}))},wf=p=>({editActions:(0,W.css)`
      display: flex;
      align-items: center;
      justify-content: flex-end;
      width: 100%;
      margin-bottom: ${p.spacing(3)};

      button,
      a {
        margin-left: ${p.spacing(2)};
      }
    `}),Wf=Gm(Uf),jm=(0,a.forwardRef)(({saveDraft:p,children:N,existingReport:F,disabled:G,activeStep:J,onDiscard:se,schedule:me},be)=>{const Ae=(0,A.wW)(Ff),Ke=Xl(J),Ye=(0,a.useRef)(null),Ze=Ke.id===J,ot=F?"Update report":ym(me);return(0,a.useImperativeHandle)(be,()=>({click:()=>{Ye.current?.click()}})),a.createElement("div",{className:Ae.container},Ze&&a.createElement(Je.zx,{ref:Ye,disabled:G,type:"submit"},ot),a.createElement(Je.zx,{variant:"secondary",onClick:p},"Save as draft"),N,a.createElement(Je.zx,{variant:"destructive",fill:"outline",onClick:se},"Discard"))});jm.displayName="PageActions";const Ff=p=>({container:(0,W.css)`
      display: flex;
      justify-content: flex-end;
      width: 100%;

      & > button,
      & > a {
        margin-right: ${p.spacing(3)};
      }
    `}),Kf=p=>{const{report:N,isUpdated:F,visitedSteps:G}=p.reports;return{existingReport:!!N.id,isUpdated:F,report:N,visitedSteps:G}},$f={addVisitedStep:ke,clearReportState:di,createReport:zn,updateReport:sa},Vf=(0,k.connect)(Kf,$f),zf=({activeStep:p,addVisitedStep:N,children:F,clearReportState:G,confirmRedirect:J,createReport:se,disabled:me,editMode:be,existingReport:Ae,getFormData:Ke,isUpdated:Ye,onSubmit:Ze,report:ot,reportId:rt,updateReport:gt,visitedSteps:Pt,pageActions:vt})=>{const Dt=(0,A.wW)(_f),Vt=Xl(p),en=(0,ce.k6)(),zt=(0,a.useRef)(null),[an,Jt]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(Ln=>{Ln===ir[ir.length-1].id?N(ir.map(na=>na.id)):N([Ln])})(p)},[p,N]),(0,a.useEffect)(()=>{an&&en.push(Cr)},[an,en]);const ln=jn=>{jn.preventDefault();const Ln=Zl(Vt.id,rt);Ze(),en.push(Ln)},yn=async()=>{if(Ke){const Ln=Ke();ot={...ot,...Ln}}Jt(!0),await(ot.id?gt:se)({...ot,state:R.Draft}),(0,i.ff)("reports_draft_saved"),G()},En=()=>{G(),(0,i.ff)("reports_report_abandoned",{namePopulated:!!ot.name,recipientsPopulated:!!ot.recipients,replyToPopulated:!!ot.replyTo,numberOfDashboardsSelected:ot.dashboards.length,scheduleCustomized:pm(ot.schedule)})},In=jn=>!ir.map(na=>Zl(na.id,rt)).includes(jn.pathname),Wn=()=>{const jn=ir[ir.length-1].id;p!==jn&&zt.current?.click()},On=()=>{en.push(Cr)},Xn=(0,a.useMemo)(()=>zm(ot),[ot]);return a.createElement("form",{onSubmit:ln,className:Dt.container},be?a.createElement(Wf,{disabled:me}):a.createElement(jm,{saveDraft:yn,existingReport:Ae,ref:zt,activeStep:p,disabled:me,onDiscard:On,schedule:ot.schedule},vt),a.createElement(Ue,{confirmRedirect:!an&&!!(J||Ye),onDiscard:En,onLocationChange:In}),a.createElement("div",{className:Dt.inner},!be&&a.createElement(tt,{activeStep:p,onStepChange:Wn,getNextUrl:hm(rt),visitedSteps:Pt,steps:ir,validationResults:Xn}),a.createElement("div",{className:Dt.content},F,!be&&a.createElement(Em,{ref:zt,activeStep:p,disabled:me,reportId:rt}))))},_f=p=>({container:(0,W.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      align-content: center;
    `,inner:(0,W.css)`
      display: flex;
      justify-content: flex-start;
      flex-direction: column;
      flex: 1 0 auto;
    `,content:(0,W.css)`
      padding-bottom: ${p.spacing(3)};
      width: min(70%, 800px);
    `}),Vo=Vf(zf),kf=p=>{const{report:N,isUpdated:F}=p.reports;return{report:N,isUpdated:F}},Qm={createReport:zn,updateReport:sa,clearReportState:di},Hf=(0,k.connect)(kf,Qm)(({report:p,createReport:N,updateReport:F,clearReportState:G,isUpdated:J,reportId:se})=>{const{formats:me,options:be,schedule:Ae,dashboards:Ke}=p,{handleSubmit:Ye,formState:{isSubmitSuccessful:Ze}}=(0,_.cI)(),ot=(0,A.wW)(Ym),rt=!!se&&!J,gt=Jl(p),{time:Pt,date:vt}=Bd(Ae.startDate),{time:Dt,date:Vt}=Bd(Ae.endDate);(0,a.useEffect)(()=>{Ze&&De.E1.push(Cr)},[Ze]);const en=async()=>{const ln=p.id?F:N;if(p.state===R.Draft){const yn=p.schedule.frequency===S.Never?R.Never:R.Scheduled;p={...p,state:yn}}await ln(p),(0,i.ff)("reports_report_submitted",{replyToPopulated:!!p.replyTo,includesDashboardLink:p.enableDashboardUrl,numberOfDashboardsSelected:p.dashboards.length,templateVariablesSelected:p.dashboards.some(yn=>!!yn.reportVariables),orientation:p.options.orientation,layout:p.options.layout,frequency:p.schedule.frequency,sendTime:p.schedule.startDate?"later":"now",endDate:!!p.schedule.endDate}),G()},{orientation:zt,layout:an}=$i.report.options,Jt=[{title:"Select dashboard",id:U.SelectDashboard,items:(Ke||[]).flatMap((ln,yn,En)=>[{title:`Source dashboard${yn===0?"*":""}`,value:ln.dashboard?.uid?a.createElement(vm,{name:ln.dashboard.name,uid:ln.dashboard?.uid,className:ot.dashboardLink}):"",id:"name",required:!0},{title:"Template variables",value:a.createElement(Zm,{variables:ln.reportVariables,className:ot.title})},{title:"Time range",value:Nd(ln.timeRange)},...En.length>1&&yn!==En.length-1?[{title:"",value:""}]:[]])},{title:"Format report",id:U.FormatReport,items:[{title:"Preferred format*",value:xa(me),id:"formats",required:!0},...me.includes("pdf")?[{title:"PDF orientation",value:(0,We.capitalize)(be.orientation||zt)},{title:"PDF layout",value:(0,We.capitalize)(be.layout||an)},{title:"Scale factor",value:Wi[p.scaleFactor||wi].label}]:[]]},{title:"Schedule",id:U.Schedule,items:[{title:"Recurrence",value:(0,We.capitalize)(Ae.frequency)},...Ae.frequency===S.Custom?[{title:"Repeat every",value:`${Ae.intervalAmount} ${Ae.intervalFrequency}`}]:[],...Ae.frequency!==S.Never?[{title:"Start date",value:vt||"Now"},{title:"Start time",value:Pt||"Now"},{title:"End date",value:Vt},{title:"End time",value:Dt},{title:"Time zone",value:Ae.timeZone?(0,$o.k)(Date.now(),Ae.timeZone):""}]:[],...gs(Ae.frequency,Ae.intervalFrequency)?[{title:"Send Monday to Friday only",value:Ae.workdaysOnly?a.createElement(c.J,{name:"check",size:"xl"}):a.createElement(c.J,{name:"minus",size:"xl"})}]:[],{value:Yl(p.schedule),title:""}]},{title:"Share",id:U.Share,items:[{title:"Report name*",value:p.name,id:"name",required:!0},{title:"Recipients*",value:p.recipients,id:"recipients",required:!0},{title:"Reply-to-email",value:p.replyTo||"none"},{title:"Message",value:p.message||"none"},{title:"Dashboard link",value:p.enableDashboardUrl?a.createElement(c.J,{name:"check",size:"xl"}):a.createElement(c.J,{name:"minus",size:"xl"})}]}];return a.createElement(Vo,{activeStep:U.Confirm,confirmRedirect:!Ze&&J,disabled:gt,editMode:rt,onSubmit:Ye(en),reportId:se},a.createElement(q.C,{label:rt?"":"5. Confirm"},Jt.map(ln=>{const yn=Jl(p,ln.id);return a.createElement("div",{className:ot.section,key:ln.title},a.createElement("div",{className:ot.sectionHeader},a.createElement("h5",{className:ot.sectionTitle},ln.title),a.createElement(Je.Qj,{variant:yn?"primary":"secondary",fill:"text",href:Zl(ln.id,se),size:"sm"},"Edit")),ln.items.filter(En=>En.value!==void 0).map((En,In)=>{const Wn=!!En.required&&(!En.value||Array.isArray(En.value)&&!En.value.length);return En.title?a.createElement("div",{className:ot.row,key:In},a.createElement("div",{className:(0,W.cx)(ot.title,Wn&&ot.warning)},En.title,":"),a.createElement("div",{className:(0,W.cx)(ot.value,En.value==="none"&&!Wn?ot.textMuted:"")},Wn?a.createElement(c.J,{name:"exclamation-triangle",className:ot.warning}):En.value)):a.createElement("div",{className:(0,W.cx)(ot.row,ot.textMuted),key:In},En.value)}))})))}),Ym=p=>({section:(0,W.css)`
      width: 100%;
      padding: ${p.spacing(3,0)};
      margin-bottom: ${p.spacing(3)};
    `,sectionHeader:(0,W.css)`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${p.spacing(1)};
      border: 1px solid ${p.colors.border.weak};
    `,sectionTitle:(0,W.css)`
      margin: 0;
    `,row:(0,W.css)`
      border: 1px solid ${p.colors.border.weak};
      border-top: none;
      display: flex;
      width: 100%;
      padding: ${p.spacing(1)};
    `,warning:(0,W.css)`
      color: ${p.colors.warning.text};
    `,title:(0,W.css)`
      width: 30%;
      color: ${p.colors.text.secondary};
    `,textMuted:(0,W.css)`
      color: ${p.colors.text.secondary};
    `,value:(0,W.css)`
      width: 70%;
      word-break: break-word;
    `,dashboardLink:(0,W.css)`
      color: ${p.colors.text.primary};
      font-size: ${p.typography.body.fontSize};
      margin-top: 0;
    `}),Zm=({variables:p,className:N})=>{const F=(0,A.wW)(Ym);return!p||!Object.keys(p).length?a.createElement("span",{className:F.textMuted},"none"):a.createElement(a.Fragment,null,Object.entries(p).map(([G,J])=>a.createElement("span",{key:G},a.createElement("span",{className:N},G),": ",J,";"," ")))};var $d=e(39540),co=e(1726);const Gf=p=>co.isValid(p.from)&&co.isValid(p.to),bm=p=>!p||!Gf(p)?{from:"",to:""}:{to:p.to.valueOf().toString(),from:p.from.valueOf().toString()},jf=p=>{const N=Jm(p.from),F=Jm(p.to);return Gf({from:N,to:F})?{from:N,to:F,raw:{from:N,to:F}}:Ki},Jm=p=>{const N=parseInt(p,10);return isNaN(N)?p:(0,Ua.zh)(N)},Pm=p=>p?.length?!p.some(N=>!!N.dashboard?.uid):!0,eo=s.contextSrv.hasPermission(w.ReportingWrite)||s.contextSrv.hasPermission(w.ReportingCreate),Xm=()=>{const p=n.config.rendererVersion;if(p==="")return null;const F=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.exec(p);let G="";if(F&&F.length>1&&(G=F[1]),G==="")return 1;let J=parseInt(G,10);return isNaN(J)&&(J=1),J},Cm=p=>{const{report:N}=p.reports;return{report:N}},Qf={updateReportProp:qr},qm=(0,k.connect)(Cm,Qf),ef=new Map([["grid","Display the panels in their positions on the dashboard."],["simple","Display one panel per row."]]),Yf=new Map([["pdf","Attach the report as a PDF"],["image","Embed a dashboard image in the email"],["csv","Attach a CSV file of table panel data"]]),Zf=({report:p,updateReportProp:N,reportId:F})=>{const{dashboards:G,formats:J,options:se,name:me,scaleFactor:be=wi}=p||{},{handleSubmit:Ae,control:Ke,register:Ye,watch:Ze,getValues:ot,formState:{isDirty:rt}}=(0,_.cI)({defaultValues:{formats:J,scaleFactor:be,options:{layout:se.layout,orientation:se.orientation}}}),gt=Ze("options.layout"),Pt=Ze("options.orientation"),vt=Ze("formats"),Dt=Ze("scaleFactor"),Vt=Xm(),en=(0,t.v)("reports.email")&&!Pm(p.dashboards),zt=({formats:ln,options:yn,scaleFactor:En})=>{rt&&N({...p,options:{...p.options,...yn},formats:ln,scaleFactor:En})},an=()=>{const{formats:ln,options:yn,scaleFactor:En}=ot();return{options:{...p.options,...yn},formats:ln,scaleFactor:En}},Jt=()=>{if(Pm(G))return;const ln={title:me,scaleFactor:Dt};return Pt&&(ln.orientation=Pt),gt&&(ln.layout=gt),ln.dashboards=JSON.stringify(G.map(yn=>{const{from:En,to:In}=jf(yn.timeRange).raw;return{dashboard:{uid:yn.dashboard?.uid},timeRange:{from:En.valueOf().toString(),to:In.valueOf().toString()},reportVariables:yn.reportVariables}})),oi.Cj.appendQueryToUrl("api/reports/render/pdfs/",oi.Cj.toUrlParams(ln))};return a.createElement(Vo,{activeStep:U.FormatReport,onSubmit:Ae(zt),confirmRedirect:rt,getFormData:an,reportId:F,pageActions:[a.createElement(Je.Qj,{onClick:()=>en&&(0,i.ff)("reports_preview_pdf"),icon:"external-link-alt",href:Jt(),size:"xs",target:"_blank",rel:"noreferrer noopener",variant:"secondary",disabled:!en,key:"preview"},"Preview PDF")]},a.createElement(q.C,{label:"2. Format report",disabled:!eo},a.createElement(q.C,null,a.createElement(Pa.wc,null,[...Yf].map(([ln,yn])=>{const{onChange:En,...In}=Ye("formats");return a.createElement(Zr.X,{...In,key:ln,htmlValue:ln,label:yn,onChange:Wn=>{ln==="csv"&&Wn.currentTarget.checked&&Vt!==null&&Vt<3&&s.h$.emit(wo.SI.alertError,["To export CSV files, you must update the Grafana Image Renderer plugin."]),En(Wn)}})}))),vt.includes("pdf")&&a.createElement(q.C,{label:"Style the PDF"},a.createElement(Q.g,{label:"Orientation"},a.createElement(H.g,{name:"options.orientation",control:Ke,render:({field:{ref:ln,...yn}})=>a.createElement(Ka.S,{...yn,options:O,size:"md"})})),a.createElement(Q.g,{label:"Layout",description:ef.get(gt)},a.createElement(H.g,{name:"options.layout",control:Ke,render:({field:{ref:ln,...yn}})=>a.createElement(Ka.S,{...yn,options:T,size:"md"})})),a.createElement(Q.g,{label:"Zoom",description:"Zoom in to enlarge text, or zoom out to see more data (like table columns) per panel.",className:tf},a.createElement(H.g,{name:"scaleFactor",control:Ke,render:({field:{ref:ln,value:yn,...En}})=>a.createElement($d.i,{...En,value:Number(yn),min:1,max:3,step:1,marks:Wi,included:!1})})))))},tf=(0,W.css)`
  max-width: 350px;
  // Hide Slider input
  input {
    display: none;
  }
`,Jf=qm(Zf);var nf=e(37691),Dm=e(19820),Xf=e(15672);const qf=p=>{const{report:N}=p.reports;return{report:N}},af={updateReportProp:qr},eg=(0,k.connect)(qf,af),tg=[{label:"Once",value:S.Once},{label:"Hourly",value:S.Hourly},{label:"Daily",value:S.Daily},{label:"Weekly",value:S.Weekly},{label:"Monthly",value:S.Monthly},{label:"Custom",value:S.Custom},{label:"Never",value:S.Never}],ng=[{label:"hours",value:x.Hours},{label:"days",value:x.Days},{label:"weeks",value:x.Weeks},{label:"months",value:x.Months}],sf=p=>p==="now"&&[29,30,31].includes((0,Ua.CQ)().toDate().getDate()),Ng=eg(({report:p,updateReportProp:N,reportId:F})=>{const{handleSubmit:G,control:J,watch:se,register:me,setValue:be,getValues:Ae,formState:{isDirty:Ke}}=(0,_.cI)(),{frequency:Ye,timeZone:Ze,startDate:ot,endDate:rt,dayOfMonth:gt,intervalAmount:Pt,intervalFrequency:vt}=p.schedule,Dt=Ye===S.Never?"":ot,Vt=Dt?"later":"now",en={startDate:Dt,sendTime:Vt,intervalFrequency:x.Hours,intervalAmount:"2",...p.schedule},zt=se("schedule",en)||{},{frequency:an,startDate:Jt,endDate:ln,intervalFrequency:yn=x.Hours,dayOfMonth:En,sendTime:In=Vt,workdaysOnly:Wn}=zt,On=(0,A.wW)(Ug),Xn=new Date(Jt).getDate(),jn=na=>{if(Ke){const ia=Qa(na.schedule);N({...p,schedule:ia})}},Ln=()=>({schedule:Qa(Ae().schedule)});return a.createElement(Vo,{activeStep:U.Schedule,onSubmit:G(jn),confirmRedirect:Ke,getFormData:Ln,reportId:F},a.createElement(q.C,{label:"3. Schedule"},a.createElement(Q.g,{label:"Frequency"},a.createElement(H.g,{defaultValue:Ye,name:"schedule.frequency",render:({field:{ref:na,onChange:ia,...$a}})=>a.createElement(Ka.S,{...$a,fullWidth:!0,options:tg,disabled:!eo,onChange:Va=>{gs(Va,yn)||be("schedule.workdaysOnly",!1),ia(Va)}}),control:J})),an!==S.Never&&a.createElement(Q.g,{label:"Time"},a.createElement(H.g,{control:J,name:"schedule.sendTime",defaultValue:Vt,render:({field:{ref:na,onChange:ia,...$a}})=>a.createElement(Ka.S,{...$a,onChange:Va=>{Va!=="now"&&!Jt?be("schedule.startDate",(0,Ua.CQ)().toDate()):Va==="now"&&be("schedule.startDate",""),ia(Va)},options:[{label:"Send now",value:"now"},{label:"Send later",value:"later"}]})})),a.createElement(a.Fragment,null,an===S.Custom&&a.createElement(Pa.Lh,null,a.createElement(Q.g,{label:"Repeat every"},a.createElement(te.I,{type:"number",min:"2",...me("schedule.intervalAmount"),placeholder:"e.g. 2",defaultValue:Pt||2,id:"repeat-frequency"})),a.createElement(Q.g,{label:" "},a.createElement(H.g,{control:J,defaultValue:ng.find(na=>na.value===vt)?.value||x.Hours,render:({field:{ref:na,onChange:ia,...$a}})=>a.createElement(g.Ph,{...$a,onChange:Va=>ia(Va.value),options:ng,width:16,placeholder:"hours","aria-label":"Custom frequency"}),name:"schedule.intervalFrequency"}))),an===S.Monthly&&(sf(In)||In==="later")&&a.createElement(Q.g,null,a.createElement(H.g,{control:J,defaultValue:gt==="last",render:({field:{onChange:na,...ia}})=>a.createElement(Zr.X,{...ia,label:"Send on the last day of month",onChange:$a=>{be("schedule.startDate",(0,Ua.CQ)().endOf("month").toDate()),na($a)}}),name:"schedule.dayOfMonth"}))),a.createElement("div",{className:In!=="now"&&an!==S.Never?"":On.hidden},a.createElement(Pa.Lh,{width:"100%"},a.createElement(Q.g,{label:"Start date"},a.createElement(H.g,{name:"schedule.startDate",control:J,defaultValue:Xr(Dt),render:({field:{ref:na,...ia}})=>a.createElement(nf.d,{...ia,width:16,placeholder:"Select date","aria-label":"Report schedule start date",closeOnSelect:!0})})),a.createElement(Q.g,{label:"Start time"},a.createElement(H.g,{name:"schedule.time",render:({field:{onChange:na,ref:ia,value:$a,...Va}})=>a.createElement(Dm.y,{...Va,value:$a,minuteStep:10,disabled:!eo,onChange:ya=>{ya.isValid()&&na({hour:ya.hour?.(),minute:ya.minute?.()})}}),defaultValue:ii(ot),control:J})),a.createElement(a.Fragment,null,a.createElement(Q.g,{label:"Time zone"},a.createElement(H.g,{name:"schedule.timeZone",render:({field:{ref:na,...ia}})=>a.createElement(Xf.O,{...ia,width:30,disabled:!eo}),defaultValue:Ze||Ql(),control:J}))))),an===S.Monthly&&!En&&([29,30,31].includes(Xn)||sf(In))&&a.createElement("small",{className:On.warningText},"Note: some months do not have a"," ",Zs(sf(In)?(0,Ua.CQ)().toDate().getDate():Xn)," day and reports will not be sent on those months. Choose an earlier date or"," ",a.createElement("strong",null,'"Send on the last day of month"')," to send a report at the end of each month."),![S.Once,S.Never].includes(an)&&a.createElement(Pa.Lh,{width:"100%"},a.createElement(Q.g,{label:"End date"},a.createElement(H.g,{name:"schedule.endDate",control:J,defaultValue:Xr(rt),render:({field:{ref:na,...ia}})=>a.createElement(nf.d,{...ia,width:16,placeholder:"Does not end","aria-label":"Report schedule end date",minDate:new Date(Jt),closeOnSelect:!0})})),ln&&(an===S.Hourly||Ss(an,yn))&&a.createElement(Q.g,{label:"End time"},a.createElement(H.g,{name:"schedule.endTime",render:({field:{onChange:na,ref:ia,value:$a,...Va}})=>a.createElement(Dm.y,{...Va,value:$a,minuteStep:10,disabled:!eo,onChange:ya=>{ya?.isValid()&&na({hour:ya.hour?.(),minute:ya.minute?.()})}}),defaultValue:ii(rt),control:J}))),gs(an,yn)&&a.createElement(Q.g,null,a.createElement(Zr.X,{...me("schedule.workdaysOnly"),label:"Send Monday to Friday only",defaultChecked:Wn})),a.createElement("div",{className:On.schedulePreview},a.createElement(c.J,{name:"calendar-alt"}),Yl({...en,...zt}))))}),Ug=p=>({warningText:(0,W.css)`
      color: ${p.colors.warning.main};
      display: block;
      margin: -${p.spacing(1)} 0 ${p.spacing(3)} 0;
    `,hidden:(0,W.css)`
      display: none;
    `,schedulePreview:(0,W.css)`
      display: flex;
      align-items: center;

      svg {
        margin-right: ${p.spacing(1)};
      }
    `});var wg=e(95059),Wg=e(56027),Fg=e.n(Wg);const Kg=({onChange:p,value:N,width:F,isClearable:G=!1,invalid:J,disabled:se,id:me,optionLabel:be="label",excludedDashboards:Ae})=>{const Ke=Fg()(ot=>$g(ot||"",be,Ae),300),Ye=N?{value:N,[be]:N[be]}:void 0,Ze=ot=>{p(ot?.value)};return a.createElement(g.qb,{inputId:me,width:F,isClearable:G,defaultOptions:!0,loadOptions:Ke,onChange:Ze,placeholder:"Select dashboard",noOptionsMessage:"No dashboards found",value:Ye,invalid:J,disabled:se,getOptionLabel:ot=>ot[be]})};async function $g(p,N,F){const J=(await Na.ae.search({type:"dash-db",query:p,limit:100})).map(({id:se,uid:me="",title:be,folderTitle:Ae})=>{const Ke={id:se,uid:me,[N]:`${Ae??"General"}/${be}`};return{value:Ke,[N]:Ke[N]}});return F?J.filter(({value:se})=>!F.includes(se.uid)):J}const Vg=p=>{const{report:N}=p.reports;return{report:N,templating:p.templating.keys}},zg={updateReportProp:qr,initVariables:Ft,cleanUpVariables:Ld.kG},_g=(0,k.connect)(Vg,zg),rf={dashboard:void 0,timeRange:{from:"",to:""},reportVariables:{}},kg=({report:p,reportId:N,updateReportProp:F,initVariables:G,cleanUpVariables:J})=>{const{handleSubmit:se,control:me,formState:{isDirty:be},setValue:Ae,getValues:Ke,watch:Ye}=(0,_.cI)({defaultValues:{dashboards:Tf(p).dashboards||[rf]}}),{fields:Ze,append:ot,remove:rt}=(0,_.Dq)({control:me,name:"dashboards",keyName:"fieldId"}),gt=Ye("dashboards"),Pt=(0,A.wW)(jg);(0,a.useEffect)(()=>{const zt=Vm();if(zt){const{dashboard:an,variables:Jt,timeRange:ln}=zt;Jt&&an.uid&&G(an.uid,Jt,ln),an.uid&&Ae("dashboards.0.dashboard",{...an,id:parseInt(an.id,10)},{shouldDirty:!0})}},[G,p,Ae]);const vt=zt=>(an,Jt)=>{Ae(`dashboards.${zt}.timeRange`,{from:"",to:""});const ln=Ke().dashboards?.map(({dashboard:En})=>En);if(!an){if(!Jt)return;ln.some(In=>In?.uid===Jt)||J(Jt);return}const yn=ln.filter(En=>En?.uid===an.uid).length>1;if(an.uid&&!yn){const En=p.dashboards?.[zt],In=an.id===En?.dashboard?.id?En?.reportVariables:void 0;G(an.uid,In)}},Dt=zt=>{const an=Vt(zt.dashboards);be&&F({...p,dashboards:an})},Vt=zt=>{const an=zt?.filter(({dashboard:Jt})=>Jt?.uid).map(({dashboard:Jt,timeRange:ln})=>{const yn=Jt?.uid;return{dashboard:yn?{uid:yn,id:Jt?.id,name:Jt?.name}:void 0,timeRange:bm(ln?.raw),reportVariables:yn?li((0,Fo.gt)(yn).filter(En=>En.hide!==Bi.bU.hideVariable)):void 0}});return an?.length?an:[rf]},en=()=>({dashboards:Vt(Ke().dashboards)});return a.createElement(Vo,{activeStep:U.SelectDashboard,onSubmit:se(Dt),confirmRedirect:be,getFormData:en,reportId:N},a.createElement(q.C,{label:"1. Select dashboard"},a.createElement(a.Fragment,null,Ze.map((zt,an)=>{const Jt=gt[an].dashboard?.uid||"",ln=gt[an]?.reportVariables,yn=Jt?(0,Fo.gt)(Jt):[],En=In=>{Wd(yn)&&G(Jt,ln,In)};return a.createElement("div",{key:zt.fieldId,className:(0,W.cx)(Pt.section,gt.length>1&&Pt.sectionBorder)},a.createElement(Hg,{field:zt,dashboardUid:Jt,onDashboardChange:vt(an),variables:yn,control:me,index:an,setValue:Ae,selectedDashboards:gt,onTimeRangeChange:En}),Ze.length>1&&a.createElement(Je.zx,{className:Pt.removeBtn,variant:"secondary",fill:"outline",icon:"trash-alt",onClick:()=>rt(an)},"Remove dashboard"))}),a.createElement(Je.zx,{type:"button",variant:"secondary",onClick:()=>ot(rf)},"+ Add another dashboard"))))},Hg=({field:p,index:N,onDashboardChange:F,variables:G,control:J,dashboardUid:se,setValue:me,onTimeRangeChange:be,selectedDashboards:Ae=[]})=>{const Ke=jf(p.timeRange),Ye=G.filter(Pt=>Pt.hide!==Bi.bU.hideVariable),Ze=se!==void 0&&!!Ye.length,ot=Ae.filter(({dashboard:Pt})=>Pt?.uid===se).length>1,rt=Ae.findIndex(({dashboard:Pt})=>Pt?.uid===se),gt=ot&&rt!==N;return a.createElement(a.Fragment,null,a.createElement(Q.g,{label:"Source dashboard",required:!0},a.createElement(a.Fragment,null,a.createElement(H.g,{name:`dashboards.${N}.dashboard`,control:J,render:({field:{onChange:Pt,ref:vt,...Dt}})=>a.createElement(Kg,{...Dt,"aria-label":"Source dashboard",isClearable:!0,optionLabel:"name",disabled:!eo,onChange:Vt=>{Pt(Vt||null),F(Vt,se)}})}),a.createElement(vm,{uid:se}))),Ze&&a.createElement(Q.g,{label:"Template variables",description:gt&&`When adding the same dashboard multiple times in one report, template variables that you selected first
are applied to all instances of that dashboard in the report.`},gt?a.createElement(a.Fragment,null):a.createElement(a.Fragment,null,Ye.map(Pt=>{const{picker:vt,setValue:Dt}=Wl.z.get(Pt.type);return a.createElement(oe._,{label:Pt.name,key:Pt.name,labelWidth:16,disabled:!eo},a.createElement(vt,{variable:Pt,readOnly:!1,onVariableChange:Vt=>{(0,Li.eL)(Vt)&&!(0,Ul.Q)(Vt.current)&&(Dt(Vt,Vt.current),me(`dashboards.${N}.reportVariables`,li([Vt]),{shouldDirty:!0}))}}))}))),a.createElement(Q.g,{label:"Time range",description:"Generate report with the data from specified time range. If custom time range is empty the time range from the report's dashboard is used.",disabled:!eo},a.createElement(H.g,{control:J,name:`dashboards.${N}.timeRange`,defaultValue:Ke,render:({field:{ref:Pt,value:vt,onChange:Dt,...Vt}})=>a.createElement(wg.K,{value:vt||Ke,onChange:en=>{Dt(en),be(en.raw)},...Vt,clearable:!0})})))},Gg=_g(kg),jg=p=>({removeBtn:(0,W.css)`
      margin-bottom: ${p.spacing(2)};
    `,section:(0,W.css)`
      padding-bottom: ${p.spacing(2)};
    `,sectionBorder:(0,W.css)`
      &:not(:last-of-type) {
        border-bottom: 1px solid ${p.colors.border.weak};
        margin-bottom: ${p.spacing(3)};
      }
    `,infoText:(0,W.css)`
      color: ${p.colors.text.secondary};
      font-size: ${p.typography.size.sm};
      font-weight: ${p.typography.fontWeightRegular};
    `});var Qg=e(60729),Yg=e(72699);const of=p=>p?/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(p):!1,lf=/[,;\n]/,cf=(p,N=lf)=>p?p.split(N).filter(Boolean).every(F=>of(F)):!0,Zg=(p="",N=["png","jpg","gif"])=>{if(!p)return!0;const F=p.split(".");return N.includes(F[F.length-1])},Jg=({onDismiss:p,onSendTestEmail:N,emails:F})=>{const G=(0,A.Fg)(),J=Xg(G),[se,me]=(0,a.useState)(""),[be,Ae]=(0,a.useState)(""),[Ke,Ye]=(0,a.useState)(!1),[Ze,ot]=(0,a.useState)(!1),rt=Vt=>{const{checked:en}=Vt.target;ot(en),en?(me(F),Pt(F)):(vt(),me(""))},gt=Vt=>{me(Vt.currentTarget.value),Ye(!1)},Pt=Vt=>cf(Vt)?(vt(),!0):(Ye(!0),Ae("Invalid email"),!1),vt=()=>{Ye(!1),Ae("")},Dt=()=>{Pt(se),Pt(se)&&(N(se,Ze),p())};return a.createElement(_e.u,{className:J.modal,isOpen:!0,title:"Send test email",icon:"share-alt",onDismiss:p},a.createElement(a.Fragment,null,a.createElement("div",{className:J.content},a.createElement(Q.g,{label:"Email",disabled:Ze,invalid:Ke,error:be},a.createElement(te.I,{disabled:Ze,name:"email",placeholder:"your.address@company.com",type:"email",value:se,onChange:gt})),a.createElement(Zr.X,{value:Ze,label:"Use emails from report",onChange:rt})),a.createElement(_e.u.ButtonRow,null,a.createElement(Je.zx,{variant:"secondary",onClick:p,fill:"outline"},"Cancel"),a.createElement(Je.zx,{variant:"primary",onClick:Dt},"Send"))))},Xg=(0,Ao.B)(p=>({modal:(0,W.css)`
      width: 500px;
    `,content:(0,W.css)`
      margin-bottom: ${p.spacing.lg};
    `})),qg=p=>{const{testEmailIsSending:N,report:F}=p.reports;return{report:F,testEmailIsSending:N}},ep={updateReportProp:qr,sendTestEmail:dn},ag=(0,k.connect)(qg,ep),Vd=({report:p,reportId:N,updateReportProp:F,sendTestEmail:G,testEmailIsSending:J})=>{const{message:se,name:me,recipients:be,replyTo:Ae,enableDashboardUrl:Ke,dashboards:Ye}=p,{handleSubmit:Ze,control:ot,register:rt,setError:gt,clearErrors:Pt,watch:vt,getValues:Dt,formState:{errors:Vt,isDirty:en}}=(0,_.cI)({mode:"onBlur"}),zt=(0,A.wW)(df),an=s.contextSrv.hasPermission(w.ReportingSend),Jt=vt("name",me),ln=vt("recipients",be),yn=!an||!(0,t.v)("reports.email")||!Jt||!ln||Pm(Ye),En=(On,Xn)=>{const jn={...p,...Dt()},Ln=Xn?jn.recipients:On;return G({...jn,recipients:Ln})},In=On=>{if(en){const{name:Xn}=On;F({...p,...On,name:Xn.trim()})}},Wn=()=>{const On=Dt(),{name:Xn}=On;return{...On,name:Xn.trim()}};return a.createElement(Vo,{activeStep:U.Share,onSubmit:Ze(In),confirmRedirect:en,getFormData:Wn,reportId:N,pageActions:[a.createElement(Qg.JY,{key:"send-test-email"},({showModal:On,hideModal:Xn})=>a.createElement(Je.zx,{disabled:yn,size:"xs",variant:"secondary",onClick:jn=>{jn.preventDefault(),On(Jg,{onDismiss:Xn,onSendTestEmail:En,emails:ln})}},"Send test email"))]},J&&a.createElement("div",{className:"page-alert-list"},a.createElement(re.b,{title:"Sending test email...",severity:"info",elevated:!0})),a.createElement(q.C,{label:"4. Share",disabled:!eo},a.createElement(Q.g,{label:"Report name",required:!0,invalid:!!Vt.name,error:"Name is required"},a.createElement(te.I,{...rt("name"),type:"text",id:"name",defaultValue:me,placeholder:"System status report"})),a.createElement(Q.g,{className:zt.field,label:"Recipients",required:!0,invalid:!!Vt.recipients,error:Vt.recipients?.message,description:"Separate multiple emails with a comma or semicolon."},a.createElement(H.g,{name:"recipients",control:ot,defaultValue:be,render:({field:{ref:On,value:Xn,onChange:jn,...Ln}})=>a.createElement(Yg.B,{...Ln,disabled:!eo,invalid:!!Vt.recipients,onChange:na=>{const ia=na.join(";").split(lf).filter(Boolean).map(Va=>Va.trim()),$a=ia.filter(Va=>!of(Va));$a.length?gt("recipients",{type:"manual",message:`Invalid email${$a.length>1?"s":""}: ${$a.join("; ")}`}):Pt("recipients"),jn(ia.filter(Va=>of(Va)).join(";"))},placeholder:"Type in the recipients email addresses and press Enter",tags:Xn?Xn.split(lf):[],className:zt.tagsInput,addOnBlur:!0}),rules:{validate:On=>cf(On)||"Invalid email"}})),a.createElement(Q.g,{invalid:!!Vt.replyTo,error:Vt.replyTo?.message,className:zt.field,label:"Reply-to email address",description:"The address that will appear in the Reply to field of the email"},a.createElement(te.I,{...rt("replyTo",{validate:On=>cf(On)||"Invalid email"}),id:"replyTo",placeholder:"your.address@company.com - optional",type:"email",defaultValue:Ae})),a.createElement(Q.g,{className:zt.field,label:"Message"},a.createElement(qa.K,{...rt("message"),id:"message",placeholder:se,rows:10,defaultValue:se})),a.createElement(Q.g,{className:zt.field},a.createElement(Zr.X,{...rt("enableDashboardUrl"),defaultChecked:Ke,label:"Include a dashboard link"}))))},df=p=>({field:(0,W.css)`
      &:not(:last-of-type) {
        margin-bottom: ${p.spacing(3)};
      }
    `,tagsInput:(0,W.css)`
      li {
        margin-bottom: ${p.spacing(1)};
        background-color: ${p.colors.background.secondary} !important;
        border-color: ${p.components.input.borderColor} !important;
        color: ${p.colors.text.primary};
      }
    `}),sg=ag(Vd);var rg=e(64067);const Sm=(p=window.location.origin)=>{let N=p+n.config.appSubUrl;return N.endsWith("/")&&N.slice(0,-1),N},zd="Please contact your Grafana administrator to install the plugin.",xm=()=>a.createElement(a.Fragment,null,a.createElement(a.Fragment,null,"To generate PDF reports, you must install the "),a.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana Image Renderer"),a.createElement(a.Fragment,null," plugin.")),_d=({variant:p="info"})=>a.createElement(re.b,{title:"Image renderer plugin not installed",severity:p},a.createElement(xm,null)," ",a.createElement("br",null),zd),og=()=>a.createElement(a.Fragment,null,a.createElement(a.Fragment,null,"To generate CSV files, you must update the "),a.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana Image Renderer"),a.createElement(a.Fragment,null," plugin.")),ig=()=>a.createElement(re.b,{title:"You are using an old version of the image renderer plugin",severity:"warning"},a.createElement(og,null)," ",a.createElement("br",null),zd),Mm=({message:p})=>a.createElement(hi.v,{title:"Feature not available with an expired license",url:"https://grafana.com/docs/grafana/latest/enterprise/license-expiration/",urlTitle:"Read more on license expiration"},a.createElement("span",null,p)),zo=({dashboard:p,onDismiss:N})=>{(0,a.useEffect)(()=>{(0,i.ff)("grafana_dashboards_pdf_share_viewed")},[]);const[F,G]=(0,a.useState)("landscape"),[J,se]=(0,a.useState)("grid"),[me,be]=(0,a.useState)(wi),Ae=()=>{let Ze=`${Sm()}/api/reports/render/pdfs`;const ot={orientation:F,layout:J,scaleFactor:me},rt=(0,Fo.gt)(p.uid),gt={dashboard:{uid:p.uid}};rt.length&&(gt.reportVariables=li(rt));const Pt=Of();return Pt&&(gt.timeRange=Pt),ot.dashboards=JSON.stringify([gt]),Ze=oi.Cj.appendQueryToUrl(Ze,oi.Cj.toUrlParams(ot)),Ze},Ke=Ze=>{G(Ze)},Ye=Ze=>{se(Ze)};return n.config.rendererAvailable?(0,t.v)("reports.pdf")?p.isSnapshot()?a.createElement("p",{className:"share-modal-info-text"},"Sharing a PDF from a snapshot is not supported."):a.createElement(rg.Q,{icon:"file-alt"},a.createElement("p",{className:"share-modal-info-text"},"Save the dashboard as a PDF document."),a.createElement(Q.g,{label:"Orientation"},a.createElement(Ka.S,{options:O,value:F,onChange:Ke})),a.createElement(Q.g,{label:"Layout"},a.createElement(Ka.S,{options:T,value:J,onChange:Ye})),a.createElement(Q.g,{label:"Zoom",description:"Increase the number of rows and columns in table panels.",className:(0,W.css)`
          max-width: 350px;
          // Hide Slider input
          input {
            display: none;
          }
        `},a.createElement($d.i,{value:me,min:1,max:3,step:1,marks:Wi,onChange:be,included:!1})),a.createElement(_e.u.ButtonRow,null,a.createElement(Je.zx,{variant:"secondary",onClick:N},"Cancel"),a.createElement(Je.Qj,{variant:"primary",href:Ae(),target:"_blank",rel:"noreferrer noopener"},"Save as PDF"))):a.createElement(Mm,{message:`Rendering a dashboard as a PDF document is not available with your current license.
            To enable this feature, update your license.`}):a.createElement(_d,null)},Tm=Br.config.featureToggles.featureHighlights,uf={label:"PDF",value:"pdf",component:zo},mf={label:"Report",value:"report",tabSuffix:Tm&&!(0,t.v)("reports.creation")||(0,fn.d5)()?()=>(0,Ui.Z)({experimentId:xi("reporting-tab-badge")}):void 0,component:om};function tp(){Br.config.reporting?.enabled&&((0,t.v)("reports.creation")?((0,_l.addDashboardShareTab)(uf),Hs.contextSrv.hasAccess(w.ReportingCreate,Hs.contextSrv.hasRole("Admin"))&&(0,_l.addDashboardShareTab)(mf)):Tm&&(0,_l.addDashboardShareTab)(mf))}const ir=[{id:U.SelectDashboard,name:"Select dashboard",component:Gg},{id:U.FormatReport,name:"Format report",component:Jf},{id:U.Schedule,name:"Schedule",component:Ng},{id:U.Share,name:"Share",component:sg},{id:U.Confirm,name:"Confirm",component:Hf}];var uo=e(49086),Om=e(92827),to=e(30084),mo=e(54195);const lg=p=>({dashboard:p.dashboard.getModel()}),kd={initDashboard:mo.mV},cg=(0,k.connect)(lg,kd);class ff extends a.Component{constructor(){super(...arguments),this.state={panel:null,notFound:!1}}componentDidMount(){const{match:N,route:F}=this.props;this.props.initDashboard({urlSlug:N.params.slug,urlUid:N.params.uid,urlType:N.params.type,routeName:F.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){return parseInt(this.props.queryParams.panelId??"0",10)}componentDidUpdate(N){const{dashboard:F}=this.props;if(F&&(!N.dashboard||N.dashboard.uid!==F.uid)){const G=F.getPanelByUrlId(this.props.queryParams.panelId);if(!G){this.setState({notFound:!0});return}this.setState({panel:G}),G.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:J=>this.onDataUpdate(J)})}}onDataUpdate(N){const{panel:F}=this.state;if(!N||N.state!==Fs.Gu.Done)return;const{dashboard:G}=this.props,J=N.series,se=this.props.queryParams.timezone||G?.timezone;let me={defaults:{},overrides:[]};const be=(0,vl.SM)({data:J,theme:n.config.theme2,fieldConfig:F?.fieldConfig||me,replaceVariables:Ze=>Ze,timeZone:se}),Ae=(0,Om.MJ)([be[0]],{}),Ke=new Blob([String.fromCharCode(65279),Ae],{type:"text/csv;charset=utf-8"}),Ye=`${F?.getDisplayTitle()}-data-${(0,Do.dq)(new Date)}.csv`;(0,uo.saveAs)(Ke,Ye)}render(){return a.createElement(to.SoloPanel,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}ff.contextType=ur.h;const dg=cg(ff),ug=({report:p,editMode:N})=>{const{name:F,dashboardName:G=""}=p;return{text:!p.id&&!N?"New report":F||G}},mg=({children:p,editMode:N,isLoading:F,className:G,report:J,...se})=>{(0,a.useEffect)(()=>{document.title=`Reporting: ${N?"Edit report":"New report"}`},[N]);const me=ug({report:J,editMode:N});return a.createElement(Nn.T,{navId:"reports-list",pageNav:me},a.createElement(Nn.T.Contents,null,a.createElement("div",{...se},F?a.createElement(Dd.Z,null):n.config.rendererAvailable?p:a.createElement(_d,{variant:"error"}))))},fg=(p,N)=>{const{report:F,isLoading:G}=p.reports,{id:J,step:se}=N.match.params;return{activeStep:se,existingReport:!!F.id,isLoading:!!(J&&G),report:F,reportId:J}},gg={loadReport:qt},gf=(0,k.connect)(fg,gg)(({existingReport:p,isLoading:N,loadReport:F,report:G,reportId:J,activeStep:se=U.SelectDashboard})=>{(0,a.useEffect)(()=>{J&&F(parseInt(J,10))},[J,F]);const me=(0,a.useCallback)(()=>{const be=ir.find(({id:Ae})=>Ae===se)?.component;return be?a.createElement(be,{reportId:J}):null},[se,J]);return a.createElement(mg,{isLoading:N,editMode:p,report:G},N?a.createElement(Fa.a,null):me())});var ql=e(55205);const pf=(p,N)=>{const F=["name","recipients"],G=J=>J.dashboards.some(({dashboard:se})=>se?.name.toLowerCase().includes(N.toLowerCase()));return p.filter(J=>F.some(se=>J[se]?.toLowerCase().includes(N.toLowerCase()))||G(J))},pg=p=>new Map([[R.Scheduled,p.colors.success.text],[R.Expired,p.colors.warning.text],[R.Draft,p.colors.text.primary],[R.Never,p.colors.text.primary],[R.Paused,p.colors.text.disabled]]),hf=({deleteReport:p,updateReport:N,reports:F,filter:G})=>{const J=(0,A.l4)(),se=(0,A.wW)(hg),me=Ke=>{const Ye=Hm(Ke.state);N({...Ke,state:Ye},!0)},be=s.contextSrv.hasPermission(w.ReportingWrite),Ae=s.contextSrv.hasPermission(w.ReportingDelete);return a.createElement("div",null,pf(F,G).map(Ke=>{const Ye=Ke.recipients.split(";"),Ze=Ye.length,ot=Rr(Ke.schedule),{isNever:rt,showPlay:gt,disableEdit:Pt,reportState:vt}=km(Ke),Dt=pg(J).get(Ke.state);return a.createElement(Bc._,{key:Ke.id,href:`reports/confirm/${Ke.id}`,className:se.container},a.createElement("div",{className:se.info},a.createElement("span",{className:se.title},Ke.name),a.createElement("span",{className:se.dashboards},[...new Set(Ke.dashboards.map(({dashboard:Vt})=>Vt?.name))].join(", "))),a.createElement("div",{className:se.recipients},a.createElement(z.u,{content:Ye.join(", "),placement:"top"},a.createElement("div",null,`${Ze} recipient${Ze>1?"s":""}`))),a.createElement("div",{className:se.schedule},a.createElement("span",{className:(0,W.cx)(se.scheduleStatus,(0,W.css)`
                    color: ${Dt};
                  `)},vt.toUpperCase()),!rt&&a.createElement("span",{className:se.text},ot)),a.createElement("div",{className:se.buttonWrapper},a.createElement(z.u,{content:`${gt?vt===R.Draft?ym(Ke.schedule):"Resume":"Pause"} report`,placement:"top"},a.createElement(Je.zx,{type:"button",variant:"secondary",fill:"text",icon:gt?"play":"pause",size:"md",onClick:Vt=>{Vt.preventDefault(),me(Ke)},disabled:Pt||!be||Jl(Ke)})),a.createElement(ql.p,{confirmText:"Delete",confirmVariant:"destructive",size:"md",disabled:!Ae,onConfirm:()=>p(Ke)},a.createElement(Je.zx,{type:"button",className:se.deleteButton,"aria-label":`Delete report ${Ke.name}`,variant:"secondary",icon:"trash-alt",size:"md",fill:"text"}))))}))},hg=p=>({container:(0,W.css)`
    & > a {
        align-items: center;
      },
    `,info:(0,W.css)`
      display: flex;
      flex-direction: column;
      width: 30%;
    `,title:(0,W.css)`
      font-size: ${p.typography.h5.fontSize};
      font-weight: ${p.typography.fontWeightBold};
    `,dashboards:(0,W.css)`
      font-size: ${p.typography.bodySmall.fontSize};
      color: ${p.colors.text.secondary};
    `,recipients:(0,W.css)`
      display: flex;
      width: 25%;
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      },
    `,schedule:(0,W.css)`
      display: flex;
      flex-direction: column;
      width: 40%;
    `,scheduleStatus:(0,W.css)`
      text-transform: uppercase;
    `,buttonWrapper:(0,W.css)`
      display: flex;
      align-items: center;
      width: 5%;
      & > button {
        &[disabled] {
          pointer-events: all;
        },
      },
    `,deleteButton:(0,W.css)`
      &:hover {
        color: ${p.colors.error.text};
    `,text:(0,W.css)`
      color: ${p.colors.text.secondary};
    `}),vg=()=>{const p=(0,A.wW)(Eg);return a.createElement(Nn.T,{navId:"reports",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties."},a.createElement("div",{className:p.box},a.createElement(Ht.Xz,{featureName:"reporting",featureId:"reporting"})),a.createElement(Nn.T.Contents,{className:p.contents},a.createElement(vf,null)),a.createElement("div",{className:p.spacer}))},vf=({action:p})=>a.createElement(Ht.TA,{featureName:"reporting",description:"Reporting allows you to automatically generate PDFs from any of your dashboards and have Grafana email them to interested parties on a schedule.",listItems:["Customize your exact layout and orientation","Personalize with your unique branding","Specify permissions for users across your company","Choose to send a report at custom intervals"],featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/reporting/",image:"reporting-email.png",caption:"Create reports to share your SLO performance, business metrics, cost and utilization metrics or anything else you can express in a Grafana dashboard.",action:p}),Eg=p=>({contents:(0,W.css)`
      &.page-body {
        flex: 0;
      }
    `,spacer:(0,W.css)`
      flex: 1;
    `,box:(0,W.css)`
      ${p.breakpoints.up("sm")} {
        padding: ${p.spacing(0,1)};
      }

      ${p.breakpoints.up("md")} {
        padding: ${p.spacing(0,2)};
      }
    `}),Ur=vg;function sp(p){return{reports:p.reports.reports,hasFetched:p.reports.hasFetchedList,searchQuery:p.reports.searchQuery,reportCount:p.reports.reportCount}}const yg={getReports:Wt,deleteReport:Rn,updateReport:sa},Im=(0,k.connect)(sp,yg)(({getReports:p,deleteReport:N,updateReport:F,reports:G,reportCount:J,hasFetched:se})=>{const[me,be]=(0,a.useState)("");(0,a.useEffect)(()=>{p()},[p]);const Ae=Ye=>{N(Ye.id)},Ke=()=>{const{rendererAvailable:Ye}=n.config,Ze=Xm(),ot=s.contextSrv.hasPermission(w.ReportingCreate),rt=Ye&&ot;return(0,t.v)("reports.creation")?a.createElement(a.Fragment,null,!Ye&&a.createElement(_d,{variant:"error"}),Ye&&Ze!==null&&Ze<3&&a.createElement(ig,null),(0,fn.d5)()&&a.createElement(Ht.Xz,{featureId:"reporting",eventVariant:"trial",featureName:"reporting",text:"Create unlimited reports during your trial of Grafana Pro."}),J>0?a.createElement(a.Fragment,null,a.createElement("div",{className:"page-action-bar"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement(te.I,{placeholder:"Search reports by report name, dashboard name or recipients",prefix:a.createElement(c.J,{name:"search"}),width:56,onChange:gt=>be(gt.target.value)}),a.createElement("div",{className:"page-action-bar__spacer"}),a.createElement(Je.Qj,{variant:"primary",href:"reports/new",disabled:!rt,icon:"plus"},"Create a new report"))),a.createElement(hf,{reports:G,deleteReport:Ae,updateReport:F,filter:me})):Ye&&((0,fn.d5)()?a.createElement(vf,{action:{text:"Create report",link:"reports/new"}}):a.createElement(An.Z,{title:"You haven't created any reports yet.",buttonIcon:"envelope",buttonLink:"reports/new",buttonTitle:"Create a new report",buttonDisabled:!rt,proTip:"",proTipLink:"",proTipLinkTitle:"",proTipTarget:"_blank"}))):a.createElement(a.Fragment,null,a.createElement(Mm,{message:`Creating new reports is not available with an expired license.
              Existing reports continue to be processed but you need to update your license to create a new one.`}),J>0&&a.createElement(hf,{reports:G,deleteReport:Ae,updateReport:F,filter:me}))};return a.createElement(Nn.T,{navId:"reports-list",subTitle:"Manage automatically generated PDF reports from any dashboards and have Grafana email them to interested parties."},a.createElement(Nn.T.Contents,{isLoading:!se},Ke()))});var bg=e(25111),Pg=e(79399),Cg=e(35845),Dg=e(56887);const Rm=p=>p?Am(p)?"file":p.startsWith("http")||p.startsWith("data:")?"url":p.startsWith("#")||p.startsWith("rgb(")||p.startsWith("rgba(")?"color":"file":"url",Am=p=>p instanceof File,Ef=p=>Am(p)?URL.createObjectURL(p):Rm(p)==="file"?`${lm}${p}`:p,Sg=p=>!p||p instanceof File?!0:typeof p=="string"&&p.startsWith("http"),xg=[{label:"Paste URL",value:"url"},{label:"Upload file",value:"file"},{label:"Custom color",value:"color"}];function yf({name:p,disabled:N,allowedTypes:F=["url","file"]}){const{control:G,register:J,getValues:se,setValue:me,watch:be,formState:{errors:Ae}}=(0,_.Gc)(),[Ke]=(0,a.useState)(se()[p]),Ye=be(p,Ke),[Ze,ot]=(0,a.useState)(Rm(se()[p])),rt=(0,A.wW)(Mg);return a.createElement("div",{"data-testid":`resource-picker-${p}`},a.createElement(Ka.S,{options:xg.filter(gt=>F.includes(gt.value)),onChange:gt=>{ot(gt),Rm(Ke)===gt?me(p,Ke):me(p,"")},disabled:N,className:rt.buttonGroup,value:Ze}),Ze==="file"&&a.createElement(_.Qr,{control:G,name:p,render:({field:{onChange:gt,ref:Pt,...vt}})=>a.createElement("div",{className:(0,W.cx)(rt.dropzone,N&&rt.disabled)},a.createElement(Pg.Yo,{...vt,readAs:"readAsBinaryString",onFileRemove:N?void 0:()=>me(p,""),options:{disabled:N,multiple:!1,accept:{"image/*":[".jpeg",".jpg",".png"]},onDrop:Dt=>{gt(Dt[0])}}}),!Am(Ye)&&Ye!==""&&a.createElement(Cg.K,{removeFile:N?void 0:()=>me(p,""),file:{file:new File([Ye],Ye),error:null,id:""}}))}),Ze==="url"&&a.createElement(Q.g,{invalid:!!Ae[p],error:Ae[p]?.message,label:"",className:rt.customField},a.createElement(te.I,{...J(p,{validate:gt=>Sg(gt)||"Invalid URL"}),id:p,placeholder:"https://your.site/image.png",disabled:N})),Ze==="color"&&a.createElement(_.Qr,{control:G,name:p,render:({field:gt})=>a.createElement("div",{className:rt.pickerContainer},a.createElement(Dg.T,{...gt,id:p,placeholder:"Select color",disabled:N}))}))}const Mg=p=>({pickerContainer:(0,W.css)`
      display: flex;
      position: relative;
    `,dropzone:(0,W.css)`
      & > div {
        & > small:first-of-type {
          display: none;
        }
      }
      // FileListItem
      & > div:nth-of-type(2) {
        & > span {
          & > span:nth-of-type(2) {
            display: none;
          }
        }
      }
    `,colorValue:(0,W.css)`
      margin-left: ${p.spacing(1)};
    `,buttonGroup:(0,W.css)`
      margin-bottom: ${p.spacing(2)};
    `,disabled:(0,W.css)`
      div {
        cursor: not-allowed;
      }
    `,customField:(0,W.css)`
      margin-top: -${p.spacing(2)};
    `}),bf=p=>p.startsWith("http")?Zg(p):!0,Tg=({url:p,altText:N,width:F="200px"})=>{const G=(0,A.yK)(op);return p?a.createElement("div",{className:(0,W.cx)(G.wrapper,(0,W.css)`
          width: ${F};
        `)},bf(p)?a.createElement("img",{src:p,className:G.img,alt:N}):"Invalid image"):null},op=p=>({wrapper:(0,W.css)`
      padding: ${p.spacing.sm};
      border: 1px solid ${p.colors.border3};
      border-radius: ${p.border.radius.sm};
      margin-bottom: ${p.spacing.md};
    `,img:(0,W.css)`
      width: 100%;
    `}),ip=[{label:"Sent By",value:M.SentBy},{label:"None",value:M.None}],lp=()=>{const{register:p,control:N,watch:F,formState:{errors:G}}=(0,_.Gc)(),J=F("reportLogoUrl")||Hl,se=F("emailLogoUrl")||Gl,me=F("emailFooterMode"),be=s.contextSrv.hasPermission(w.ReportingSettingsWrite);return a.createElement(a.Fragment,null,a.createElement(q.C,{label:"Report branding",disabled:!be},a.createElement(Q.g,{htmlFor:"reportLogoUrl",label:"Company logo URL",description:"The logo will be displayed in the document footer. Supported formats: png, jpg, gif.",invalid:!!G.branding?.reportLogoUrl,error:G.branding?.reportLogoUrl?.message},a.createElement(yf,{name:"reportLogoUrl"})),a.createElement(Tg,{url:J===Hl?Hl:Ef(J),width:"60px",altText:"Company logo preview"})),a.createElement(q.C,{label:"Email branding",disabled:!be},a.createElement(Q.g,{htmlFor:"emailLogoUrl",label:"Company logo URL",description:"The logo will be displayed in the email header. Supported formats: png, jpg, gif.",invalid:!!G.branding?.emailLogoUrl,error:G.branding?.emailLogoUrl?.message},a.createElement(yf,{name:"emailLogoUrl"})),a.createElement(Tg,{url:se===Gl?Gl:Ef(se),altText:"Company logo preview"}),a.createElement(Q.g,{label:"Email footer"},a.createElement(H.g,{name:"emailFooterMode",render:({field:{ref:Ae,...Ke}})=>a.createElement(Ka.S,{...Ke,options:ip}),control:N})),me===M.SentBy&&a.createElement(a.Fragment,null,a.createElement(Q.g,{label:"Footer link text"},a.createElement(te.I,{...p("emailFooterText"),id:"emailFooterText",placeholder:"Grafana",type:"text"})),a.createElement(Q.g,{label:"Footer link URL"},a.createElement(te.I,{...p("emailFooterLink"),id:"emailFooterLink",placeholder:"https://your.site",type:"url"})))))},cp=()=>{const{value:p,loading:N,error:F}=(0,bg.Z)(async()=>{const Ae=await(0,y.i)().get("/api/reports/settings");return J(Ae.branding),Ae}),{handleSubmit:G,reset:J,...se}=(0,_.cI)({mode:"onBlur",defaultValues:p?.branding}),me=Ae=>{const Ke=new FormData;for(const[Ye,Ze]of Object.entries(Ae))Ze instanceof File&&(Ae={...Ae,[Ye]:Ze.name},Ke.append("files",Ze));return Ke.append("config",JSON.stringify({branding:Ae})),fetch("/api/reports/settings",{method:"POST",body:Ke}).then(Ye=>{Ye.ok?(s.h$.emit(wo.SI.alertSuccess,["Successfully saved configuration"]),De.E1.push("/reports")):s.h$.emit(wo.SI.alertError,["Error saving configuration",Ye.statusText])})};if(F)return a.createElement(Nn.T,{navId:"reports-settings",subTitle:"Manage report template settings."},a.createElement(re.b,{title:"Error loading settings",severity:"error"}));const be=s.contextSrv.hasPermission(w.ReportingSettingsWrite);return a.createElement(Nn.T,{navId:"reports-settings",subTitle:"Manage report template settings."},a.createElement(Nn.T.Contents,{isLoading:N},n.config.rendererAvailable?a.createElement(_.RV,{...se,reset:J,handleSubmit:G},a.createElement("form",{onSubmit:G(me),style:{maxWidth:"500px"}},a.createElement(lp,null),a.createElement(Je.zx,{type:"submit",size:"md",variant:"primary",disabled:!be},"Save"))):a.createElement(_d,{variant:"error"})))};var dp=e(97289),wr=e(76404),up=e(40387),ec=e(65468);function rs(){const p=n.config.whitelabeling;if(!p)return;wr.c.LoginTitle="Welcome to Grafana Enterprise",p.links.length>0&&(0,up.Dv)(()=>p.links.map(F=>({...F,target:"_blank"})));const N=p.publicDashboardFooter;if((N?.hide||N?.text||N?.link||N?.logo)&&(0,ec.Jc)(()=>p.publicDashboardFooter),p.appTitle&&(wr.c.AppTitle=p.appTitle),p.loginLogo&&(wr.c.LoginLogo=F=>a.createElement("img",{className:(0,W.cx)(F.className,(0,W.css)`
            max-width: 150px;
            max-height: 250px;
            width: auto;
            @media ${dp.mediaUp(n.config.theme.breakpoints.sm)} {
              max-width: 250px;
            }
          `),src:p.loginLogo,alt:"Login logo"}),wr.c.LoginLogo.displayName="BrandingLoginLogo",wr.c.LoginTitle="",wr.c.GetLoginSubTitle=()=>""),p.loginTitle&&(wr.c.LoginTitle=p.loginTitle),p.loginSubtitle&&(wr.c.GetLoginSubTitle=()=>p.loginSubtitle),p.menuLogo&&(wr.c.MenuLogo=F=>a.createElement("img",{className:F.className,src:p.menuLogo,alt:"Menu logo"}),wr.c.MenuLogo.displayName="BrandingMenuLogo"),p.loginBackground){const F=(0,W.css)`
      background: ${p.loginBackground};
      background-size: cover;
    `;wr.c.LoginBackground=G=>a.createElement("div",{className:(0,W.cx)(F,G.className)},G.children),wr.c.LoginBackground.displayName="BrandingLoginBackground"}if(p.loginBoxBackground){const F=(0,W.css)`
      background: ${p.loginBoxBackground};
      background-size: cover;
    `;wr.c.LoginBoxBackground=()=>F}}const Og="ServerAdmin";function Lm(){(0,t.v)("dspermissions.enforcement")&&(0,d.U)(ld),(0,t.v)("caching")&&(0,d.U)(ko),(0,t.v)("reports")&&(0,d.U)(at),(0,t.v)("analytics")&&(0,d.U)(Gs),(0,t.v)("recordedqueries")&&(0,d.U)(ku),(0,t.v)("saml")&&(0,d.U)(Rt)}function Ig(){const p=n.config.featureToggles.featureHighlights;Ic(),tp(),Ys(),(0,t.v)("saml")&&Bn(),((0,t.v)("whitelabeling")||(0,t.v)("grafanacloud"))&&rs(),(0,t.v)("recordedqueries")&&(n.config.isPublicDashboardView||tm()),(0,t.v)("admin")&&v(),(0,t.v)("publicDashboardsEmailSharing")&&m.gV.push({path:"/public-dashboards/:accessToken/request-access",component:Wu,chromeless:!0}),(0,t.v)("saml")&&m.gV.push({path:"/admin/authentication/saml/:step?",component:Mr});const N="/datasources/edit/:uid/cache",F=`${r.Z.DataSourcesEdit}/cache`;(0,t.v)("caching")?(m.gV.push({path:N,component:ac}),m.gV.push({path:F,component:Qd})):p&&(m.gV.push({path:`${N}/upgrade`,component:Vr}),m.gV.push({path:`${F}/upgrade`,component:sc}));const G="/datasources/edit/:uid/insights",J=`${r.Z.DataSourcesEdit}/insights`;(0,t.v)("analytics")?s.contextSrv.hasPermission(o.AccessControlAction.DataSourcesInsightsRead)&&(m.gV.push({path:G,component:Pl}),m.gV.push({path:J,component:Xd})):p&&(m.gV.push({path:`${G}/upgrade`,component:sd}),m.gV.push({path:`${J}/upgrade`,component:dc}));const se="/datasources/edit/:uid/permissions",me=`${r.Z.DataSourcesEdit}/permissions`;(0,t.v)("dspermissions.enforcement")?s.contextSrv.hasPermission(o.AccessControlAction.DataSourcesPermissionsRead)&&(n.config.rbacEnabled?(m.gV.push({path:se,component:lr}),m.gV.push({path:me,component:kr})):(m.gV.push({path:se,component:ni}),m.gV.push({path:me,component:Pi}))):p&&(m.gV.push({path:se+"/upgrade",component:od}),m.gV.push({path:`${me}/upgrade`,component:nl})),n.config.reporting?.enabled&&((0,t.v)("reports")?m.gV.push({path:Cr,component:Im},{path:`${Cr}/settings`,component:cp},{path:"/d-csv/:uid",pageClass:"dashboard-solo",routeName:o.DashboardRoutes.Normal,component:dg}):p&&m.gV.push({path:Cr,component:Ur}),(0,t.v)("reports.creation")&&(m.gV.push({path:`${Cr}/new`,component:gf}),m.gV.push({path:`${Cr}/:step?/:id?`,component:gf})));const be=(0,t.v)("recordedqueries")&&n.config?.recordedQueries?.enabled;s.contextSrv.isEditor&&be&&m.gV.push({path:"/recorded-queries",component:sm},{path:"/recorded-queries/write-target",component:Rd})}function Rg(){$r(),m.gV.push({path:"/admin/licensing",roles:()=>s.contextSrv.evaluatePermission(()=>[Og],[w.LicensingRead,o.AccessControlAction.ActionServerStatsRead]),component:Vc}),s.contextSrv.isSignedIn&&n.config.licenseInfo.stateInfo!=="Licensed"&&(0,i.SZ)(xi(),n.config.featureToggles.featureHighlights?No.Test:No.Control,"")}function Ag(){Rg(),Ig()}},65015:()=>{"use strict"},39501:()=>{"use strict"},51707:()=>{"use strict"},5439:()=>{"use strict"},8237:(j,I,e)=>{"use strict";e.d(I,{A:()=>m});var t=e(27702),n=e(50686),i=e(28580);const r=Object.values(n.B).filter(d=>d!==n.B.None).map(d=>({label:d,value:d}));function m({value:d,onChange:o,"aria-label":l,inputId:a,autoFocus:g,...c}){return t.createElement(i.Ph,{inputId:a,value:d,options:r,onChange:h=>o(h.value),placeholder:"Choose role...","aria-label":l,autoFocus:g,...c})}},68555:(j,I,e)=>{"use strict";e.r(I),e.d(I,{ServerStats:()=>g});var t=e(42844),n=e(27702),i=e(66310),s=e(66670),r=e(90527),m=e(18771),d=e(91368),o=e(67704),l=e(73289);const a=async()=>(0,l.i)().get("api/admin/stats").catch(b=>(console.error(b),null)),g=()=>{const[b,v]=(0,n.useState)(null),[y,E]=(0,n.useState)(!1),C=(0,i.wW)(c),u=d.contextSrv.hasAccess(m.AccessControlAction.DataSourcesRead,d.contextSrv.isGrafanaAdmin),D=d.contextSrv.hasAccess(m.AccessControlAction.UsersRead,d.contextSrv.isGrafanaAdmin);return(0,n.useEffect)(()=>{d.contextSrv.hasAccess(m.AccessControlAction.ActionServerStatsRead,d.contextSrv.isGrafanaAdmin)&&(E(!0),a().then(P=>{v(P),E(!1)}))},[]),d.contextSrv.hasAccess(m.AccessControlAction.ActionServerStatsRead,d.contextSrv.isGrafanaAdmin)?n.createElement(n.Fragment,null,n.createElement("h2",{className:C.title},"Instance statistics"),y?n.createElement("div",{className:C.loader},n.createElement(o.a,{text:"Loading instance stats..."})):b?n.createElement("div",{className:C.row},n.createElement(h,{content:[{name:"Dashboards (starred)",value:`${b.dashboards} (${b.stars})`},{name:"Tags",value:b.tags},{name:"Playlists",value:b.playlists},{name:"Snapshots",value:b.snapshots}],footer:n.createElement(s.Qj,{href:"/dashboards",variant:"secondary"},"Manage dashboards")}),n.createElement("div",{className:C.doubleRow},n.createElement(h,{content:[{name:"Data sources",value:b.datasources}],footer:u&&n.createElement(s.Qj,{href:"/datasources",variant:"secondary"},"Manage data sources")}),n.createElement(h,{content:[{name:"Alerts",value:b.alerts}],footer:n.createElement(s.Qj,{href:"/alerting/list",variant:"secondary"},"Alerts")})),n.createElement(h,{content:[{name:"Organisations",value:b.orgs},{name:"Users total",value:b.users},{name:"Active users in last 30 days",value:b.activeUsers},{name:"Active sessions",value:b.activeSessions}],footer:D&&n.createElement(s.Qj,{href:"/admin/users",variant:"secondary"},"Manage users")})):n.createElement("p",{className:C.notFound},"No stats found.")):null},c=b=>({title:(0,t.css)`
      margin-bottom: ${b.spacing(4)};
    `,row:(0,t.css)`
      display: flex;
      justify-content: space-between;
      width: 100%;

      & > div:not(:last-of-type) {
        margin-right: ${b.spacing(2)};
      }

      & > div {
        width: 33.3%;
      }
    `,doubleRow:(0,t.css)`
      display: flex;
      flex-direction: column;

      & > div:first-of-type {
        margin-bottom: ${b.spacing(2)};
      }
    `,loader:(0,t.css)`
      height: 290px;
    `,notFound:(0,t.css)`
      font-size: ${b.typography.h6.fontSize};
      text-align: center;
      height: 290px;
    `}),h=({content:b,footer:v})=>{const y=(0,i.wW)(f);return n.createElement(r._,{className:y.container,disableHover:!0},n.createElement("div",{className:y.inner},n.createElement("div",{className:y.content},b.map(E=>n.createElement("div",{key:E.name,className:y.row},n.createElement("span",null,E.name),n.createElement("span",null,E.value)))),v&&n.createElement("div",null,v)))},f=b=>({container:(0,t.css)`
      padding: ${b.spacing(2)};
    `,inner:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,content:(0,t.css)`
      flex: 1 0 auto;
    `,row:(0,t.css)`
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: ${b.spacing(2)};
      align-items: center;
    `})},27951:(j,I,e)=>{"use strict";e.r(I),e.d(I,{UpgradeInfo:()=>b,UpgradePage:()=>h,default:()=>M});var t=e(42844),n=e(27702),i=e(27173),s=e(66310),r=e(66670),m=e(44644),d=e(86809);const o={fontWeight:500,fontSize:"26px",lineHeight:"123%"},l=R=>{const O=R.isDark?"public/img/licensing/header_dark.svg":"public/img/licensing/header_light.svg",T=R.isDark?R.v1.palette.dark9:R.v1.palette.gray6;return{container:(0,t.css)`
      padding: 36px 79px;
      background: ${R.components.panel.background};
    `,footer:(0,t.css)`
      text-align: center;
      padding: 16px;
      background: ${T};
    `,header:(0,t.css)`
      height: 137px;
      padding: 40px 0 0 79px;
      position: relative;
      background: url('${O}') right;
    `}};function a({header:R,editionNotice:O,subheader:T,children:U}){const L=(0,s.wW)(l);return n.createElement(n.Fragment,null,n.createElement("div",{className:L.header},n.createElement("h2",{style:o},R),T&&n.createElement("h3",null,T),n.createElement(g,{size:"128px",style:{boxShadow:"0px 0px 24px rgba(24, 58, 110, 0.45)",background:"#0A1C36",position:"absolute",top:"19px",left:"71%"}},n.createElement("img",{src:"public/img/grafana_icon.svg",alt:"Grafana",width:"80px",style:{position:"absolute",left:"23px",top:"20px"}}))),n.createElement("div",{className:L.container},U),O&&n.createElement("div",{className:L.footer},O))}const g=({size:R,style:O,children:T})=>{const U=(0,s.l4)();return n.createElement("div",{style:{width:R,height:R,position:"absolute",bottom:0,right:0,borderRadius:U.shape.radius.circle,...O}},T)};var c=e(68555);function h({navModel:R}){return n.createElement(m.T,{navModel:R},n.createElement(m.T.Contents,null,n.createElement(c.ServerStats,null),n.createElement(b,{editionNotice:`You are running the open-source version of Grafana.
        You have to install the Enterprise edition in order enable Enterprise features.`})))}const f={fontWeight:500,fontSize:"26px",lineHeight:"123%"},b=({editionNotice:R})=>{const O=(0,s.wW)(v);return n.createElement(n.Fragment,null,n.createElement("h2",{className:O.title},"Enterprise license"),n.createElement(a,{header:"Grafana Enterprise",subheader:"Get your free trial",editionNotice:R},n.createElement("div",{className:O.column},n.createElement(u,null),n.createElement(C,null))))},v=R=>({column:(0,t.css)`
      display: grid;
      grid-template-columns: 100%;
      column-gap: 20px;
      row-gap: 40px;

      @media (min-width: 1050px) {
        grid-template-columns: 50% 50%;
      }
    `,title:(0,t.css)`
      margin: ${R.spacing(4)} 0;
    `}),y=()=>n.createElement("div",{style:{marginTop:"40px",marginBottom:"30px"}},n.createElement("h2",{style:f},"Get Grafana Enterprise"),n.createElement(E,null),n.createElement("p",{style:{paddingTop:"12px"}},"You can use the trial version for free for 30 days. We will remind you about it five days before the trial period ends.")),E=()=>n.createElement(r.Qj,{variant:"primary",size:"lg",href:"https://grafana.com/contact?about=grafana-enterprise&utm_source=grafana-upgrade-page"},"Contact us and get a free trial"),C=()=>n.createElement("div",null,n.createElement("h4",null,"At your service"),n.createElement(P,null,n.createElement(S,{title:"Enterprise Plugins",image:"public/img/licensing/plugin_enterprise.svg"}),n.createElement(S,{title:"Critical SLA: 2 hours",image:"public/img/licensing/sla.svg"}),n.createElement(S,{title:"Unlimited Expert Support",image:"public/img/licensing/customer_support.svg"},"24 x 7 x 365 support via",n.createElement(P,{nested:!0},n.createElement(S,{title:"Email"}),n.createElement(S,{title:"Private Slack channel"}),n.createElement(S,{title:"Phone"}))),n.createElement(S,{title:"Hand-in-hand support",image:"public/img/licensing/handinhand_support.svg"},"in the upgrade process")),n.createElement("div",{style:{marginTop:"20px"}},n.createElement("strong",null,"Also included:"),n.createElement("br",null),"Indemnification, working with Grafana Labs on future prioritization, and training from the core Grafana team."),n.createElement(y,null)),u=()=>n.createElement("div",{style:{paddingRight:"11px"}},n.createElement("h4",null,"Enhanced functionality"),n.createElement(D,null)),D=()=>n.createElement(P,null,n.createElement(S,{title:"Data source permissions"}),n.createElement(S,{title:"Reporting"}),n.createElement(S,{title:"SAML authentication"}),n.createElement(S,{title:"Enhanced LDAP integration"}),n.createElement(S,{title:"Team Sync"},"LDAP, GitHub OAuth, Auth Proxy, Okta"),n.createElement(S,{title:"White labeling"}),n.createElement(S,{title:"Auditing"}),n.createElement(S,{title:"Settings updates at runtime"}),n.createElement(S,{title:"Grafana usage insights"},n.createElement(P,{nested:!0},n.createElement(S,{title:"Sort dashboards by popularity in search"}),n.createElement(S,{title:"Find unused dashboards"}),n.createElement(S,{title:"Dashboard usage stats drawer"}),n.createElement(S,{title:"Dashboard presence indicators"}))),n.createElement(S,{title:"Enterprise plugins"},n.createElement(P,{nested:!0},n.createElement(S,{title:"Oracle"}),n.createElement(S,{title:"Splunk"}),n.createElement(S,{title:"Service Now"}),n.createElement(S,{title:"Dynatrace"}),n.createElement(S,{title:"New Relic"}),n.createElement(S,{title:"DataDog"}),n.createElement(S,{title:"AppDynamics"}),n.createElement(S,{title:"SAP HANA\xAE"}),n.createElement(S,{title:"Gitlab"}),n.createElement(S,{title:"Honeycomb"}),n.createElement(S,{title:"Jira"}),n.createElement(S,{title:"MongoDB"}),n.createElement(S,{title:"Salesforce"}),n.createElement(S,{title:"Snowflake"}),n.createElement(S,{title:"Wavefront"})))),P=({children:R,nested:O})=>{const T=(0,t.css)`
    display: flex;
    flex-direction: column;
    padding-top: 8px;

    > div {
      margin-bottom: ${O?0:8}px;
    }
  `;return n.createElement("div",{className:T},R)},S=({children:R,title:O,image:T})=>{const U=T||"public/img/licensing/checkmark.svg",L=(0,t.css)`
    display: flex;

    > img {
      display: block;
      height: 22px;
      flex-grow: 0;
      padding-right: 12px;
    }
  `,V=(0,t.css)`
    font-weight: 500;
    line-height: 1.7;
  `;return n.createElement("div",{className:L},n.createElement("img",{src:U,alt:""}),n.createElement("div",null,n.createElement("div",{className:V},O),R))},x=R=>({navModel:(0,d.ht)(R.navIndex,"upgrading")}),M=(0,i.connect)(x)(h)},41725:(j,I,e)=>{"use strict";e.d(I,{As:()=>M,SO:()=>C});var t=e(42844),n=e(27702),i=e(27173),s=e(74639),r=e(66310),m=e(33716),d=e(40705),o=e(66670),l=e(80011),a=e(73453),g=e(50852),c=e(44644),h=e(8311),f=e(66574),b=e(95685),v=e(18771),y=e(64544);const E=[],C=w=>{E.push(w)},u=s.wl.pages.UserListPage.UserListAdminPage,D={fetchUsers:y.uh,changeQuery:y.R5,changePage:y.oO,changeFilter:y.M6},P=w=>({users:w.userListAdmin.users,query:w.userListAdmin.query,showPaging:w.userListAdmin.showPaging,totalPages:w.userListAdmin.totalPages,page:w.userListAdmin.page,filters:w.userListAdmin.filters,isLoading:w.userListAdmin.isLoading}),M=(0,i.connect)(P,D)(({fetchUsers:w,query:K,changeQuery:B,users:W,showPaging:_,totalPages:k,page:A,changePage:z,changeFilter:H,filters:Q,isLoading:X})=>{const te=(0,r.wW)(L);(0,n.useEffect)(()=>{w()},[w]);const oe=(0,n.useMemo)(()=>W.some(Z=>Z.licensedRole),[W]);return n.createElement(c.T.Contents,null,n.createElement("div",{className:"page-action-bar","data-testid":u.container},n.createElement("div",{className:"gf-form gf-form--grow"},n.createElement(m.H,{placeholder:"Search user by login, email, or name.",autoFocus:!0,value:K,onChange:B}),n.createElement(d.S,{options:[{label:"All users",value:!1},{label:"Active last 30 days",value:!0}],onChange:Z=>H({name:"activeLast30Days",value:Z}),value:Q.find(Z=>Z.name==="activeLast30Days")?.value,className:te.filter}),E.map((Z,le)=>n.createElement(Z,{key:le,filters:Q,onChange:H,className:te.filter}))),f.contextSrv.hasPermission(v.AccessControlAction.UsersCreate)&&n.createElement(o.Qj,{href:"admin/users/create",variant:"primary"},"New user")),X?n.createElement(b.Z,null):n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(te.table,"admin-list-table")},n.createElement("table",{className:"filter-table form-inline filter-table--hover"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null),n.createElement("th",null,"Login"),n.createElement("th",null,"Email"),n.createElement("th",null,"Name"),n.createElement("th",null,"Belongs to"),oe&&n.createElement("th",null,"Licensed role"," ",n.createElement(l.u,{placement:"top",content:n.createElement(n.Fragment,null,"Licensed role is based on a user's Org role (i.e. Viewer, Editor, Admin) and their dashboard/folder permissions."," ",n.createElement("a",{className:te.link,target:"_blank",rel:"noreferrer noopener",href:"https://grafana.com/docs/grafana/next/enterprise/license/license-restrictions/#active-users-limit"},"Learn more"))},n.createElement(a.J,{name:"question-circle"}))),n.createElement("th",null,"Last active\xA0",n.createElement(l.u,{placement:"top",content:"Time since user was seen using Grafana"},n.createElement(a.J,{name:"question-circle"}))),n.createElement("th",{style:{width:"1%"}},"Origin"))),n.createElement("tbody",null,W.map(Z=>n.createElement(T,{user:Z,showLicensedRole:oe,key:Z.id}))))),_&&n.createElement(g.t,{numberOfPages:k,currentPage:A,onNavigate:z})))});function R(){return React.createElement(Page,{navId:"global-users"},React.createElement(M,null))}const O=w=>`Edit user's ${w} details`,T=(0,n.memo)(({user:w,showLicensedRole:K})=>{const B=(0,r.wW)(L),W=`admin/users/edit/${w.id}`;return n.createElement("tr",{key:w.id},n.createElement("td",{className:"width-4 text-center link-td"},n.createElement("a",{href:W,"aria-label":`Edit user's ${w.name} details`},n.createElement("img",{className:"filter-table__avatar",src:w.avatarUrl,alt:`Avatar for user ${w.name}`}))),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:W,title:w.login,"aria-label":O(w.name)},w.login)),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:W,title:w.email,"aria-label":O(w.name)},w.email)),n.createElement("td",{className:"link-td max-width-10"},n.createElement("a",{className:"ellipsis",href:W,title:w.name,"aria-label":O(w.name)},w.name)),n.createElement("td",{className:B.row,title:w.orgs?.length?`The user is a member of the following organizations: ${w.orgs.map(_=>_.name).join(",")}`:void 0},n.createElement(U,{units:w.orgs,icon:"building"}),w.isAdmin&&n.createElement("a",{href:W,"aria-label":O(w.name)},n.createElement(l.u,{placement:"top",content:"Grafana Admin"},n.createElement(a.J,{name:"shield"})))),K&&n.createElement("td",{className:(0,t.cx)("link-td",B.iconRow)},n.createElement("a",{className:"ellipsis",href:W,title:w.name,"aria-label":O(w.name)},w.licensedRole==="None"?n.createElement("span",{className:B.disabled},"Not assigned"," ",n.createElement(l.u,{placement:"top",content:"A licensed role will be assigned when this user signs in"},n.createElement(a.J,{name:"question-circle"}))):w.licensedRole)),n.createElement("td",{className:"link-td"},w.lastSeenAtAge&&n.createElement("a",{href:W,"aria-label":`Last seen at ${w.lastSeenAtAge}. Follow to edit user's ${w.name} details.`},w.lastSeenAtAge==="10 years"?n.createElement("span",{className:B.disabled},"Never"):w.lastSeenAtAge)),n.createElement("td",{className:"text-right"},Array.isArray(w.authLabels)&&w.authLabels.length>0&&n.createElement(h.e,{label:w.authLabels[0],removeIcon:!1,count:0})),n.createElement("td",{className:"text-right"},w.isDisabled&&n.createElement("span",{className:"label label-tag label-tag--gray"},"Disabled")))});T.displayName="UserListItem";const U=({units:w,icon:K})=>{const B=(0,r.wW)(L);return w?.length?w.length>1?n.createElement(l.u,{placement:"top",content:n.createElement("div",{className:B.unitTooltip},w?.map(W=>n.createElement("a",{href:W.url,className:B.link,title:W.name,key:W.name,"aria-label":`Edit ${W.name}`},W.name)))},n.createElement("div",{className:B.unitItem},n.createElement(a.J,{name:K})," ",n.createElement("span",null,w.length))):n.createElement("a",{href:w[0].url,className:B.unitItem,title:w[0].name,key:w[0].name,"aria-label":`Edit ${w[0].name}`},n.createElement(a.J,{name:K})," ",w[0].name):null},L=w=>({table:(0,t.css)`
      margin-top: ${w.spacing(3)};
    `,filter:(0,t.css)`
      margin: 0 ${w.spacing(1)};
    `,iconRow:(0,t.css)`
      svg {
        margin-left: ${w.spacing(.5)};
      }
    `,row:(0,t.css)`
      display: flex;
      align-items: center;
      height: 100% !important;

      a {
        padding: ${w.spacing(.5)} 0 !important;
      }
    `,unitTooltip:(0,t.css)`
      display: flex;
      flex-direction: column;
    `,unitItem:(0,t.css)`
      cursor: pointer;
      padding: ${w.spacing(.5)} 0;
      margin-right: ${w.spacing(1)};
    `,disabled:(0,t.css)`
      color: ${w.colors.text.disabled};
    `,link:(0,t.css)`
      color: inherit;
      cursor: pointer;
      text-decoration: underline;
    `});var V=null},64544:(j,I,e)=>{"use strict";e.d(I,{B9:()=>v,CP:()=>T,Dx:()=>y,Fm:()=>R,IS:()=>w,Jk:()=>P,M6:()=>k,Nq:()=>f,PK:()=>c,R5:()=>_,V0:()=>V,Xx:()=>C,Y3:()=>U,_1:()=>M,bN:()=>D,b_:()=>L,h8:()=>E,j4:()=>O,oO:()=>A,tQ:()=>b,uV:()=>S,uh:()=>B});var t=e(89949),n=e.n(t),i=e(60956),s=e(80978),r=e(73289),m=e(26129),d=e(12308),o=e(66574),l=e(92317),a=e(18771),g=e(90805);function c(z){return async H=>{try{H((0,g.UA)(!1)),await H(h(z)),await H(u(z)),await H(x(z)),d.default.ldapEnabled&&(0,s.v)("ldapsync")&&await H(O()),H((0,g.UA)(!0))}catch(Q){if(console.error(Q),(0,r.kW)(Q)){const X={title:Q.data.message,body:Q.data.error};H((0,g.sL)(X))}}}}function h(z){return async H=>{const Q=await(0,r.i)().get(`/api/users/${z}`,(0,l.y)());H((0,g.pm)(Q))}}function f(z){return async H=>{await(0,r.i)().put(`/api/users/${z.id}`,z),H(c(z.id))}}function b(z,H){return async Q=>{const X={password:H};await(0,r.i)().put(`/api/admin/users/${z}/password`,X),Q(c(z))}}function v(z){return async H=>{await(0,r.i)().post(`/api/admin/users/${z}/disable`),m.E1.push("/admin/users")}}function y(z){return async H=>{await(0,r.i)().post(`/api/admin/users/${z}/enable`),H(c(z))}}function E(z){return async H=>{await(0,r.i)().delete(`/api/admin/users/${z}`),m.E1.push("/admin/users")}}function C(z,H){return async Q=>{const X={isGrafanaAdmin:H};await(0,r.i)().put(`/api/admin/users/${z}/permissions`,X),Q(c(z))}}function u(z){return async H=>{const Q=await(0,r.i)().get(`/api/users/${z}/orgs`);H((0,g.fm)(Q))}}function D(z,H,Q){return async X=>{const te={loginOrEmail:z.login,role:Q};await(0,r.i)().post(`/api/orgs/${H}/users/`,te),X(c(z.id))}}function P(z,H,Q){return async X=>{const te={role:Q};await(0,r.i)().patch(`/api/orgs/${H}/users/${z}`,te),X(c(z))}}function S(z,H){return async Q=>{await(0,r.i)().delete(`/api/orgs/${H}/users/${z}`),Q(c(z))}}function x(z){return async H=>{if(!o.contextSrv.hasPermission(a.AccessControlAction.UsersAuthTokenList))return;const Q=await(0,r.i)().get(`/api/admin/users/${z}/auth-tokens`);Q.reverse();const X=Q.map(te=>({id:te.id,isActive:te.isActive,seenAt:(0,i.E8)(te.seenAt),createdAt:te.createdAt,clientIp:te.clientIp,browser:te.browser,browserVersion:te.browserVersion,os:te.os,osVersion:te.osVersion,device:te.device}));H((0,g.RC)(X))}}function M(z,H){return async Q=>{const X={authTokenId:z};await(0,r.i)().post(`/api/admin/users/${H}/revoke-auth-token`,X),Q(x(H))}}function R(z){return async H=>{await(0,r.i)().post(`/api/admin/users/${z}/logout`),H(x(z))}}function O(){return async z=>{const H=o.contextSrv.hasPermission(a.AccessControlAction.LDAPStatusRead);if((0,s.v)("ldapsync")&&H){const Q=await(0,r.i)().get("/api/admin/ldap-sync-status");z((0,g.CY)(Q))}}}function T(z){return async H=>{await(0,r.i)().post(`/api/admin/ldap/sync/${z}`),H(c(z))}}function U(){return async z=>{if(o.contextSrv.hasPermission(a.AccessControlAction.LDAPStatusRead))try{const H=await(0,r.i)().get("/api/admin/ldap/status");z((0,g.Ls)(H))}catch(H){if((0,r.kW)(H)){H.isHandled=!0;const Q={title:H.data.message,body:H.data.error};z((0,g.y3)(Q))}}}}function L(z){return async H=>{try{const Q=await(0,r.i)().get(`/api/admin/ldap/${encodeURIComponent(z)}`),{name:X,surname:te,email:oe,login:Z,isGrafanaAdmin:le,isDisabled:ce,roles:q,teams:ne}=Q,pe={info:{name:X,surname:te,email:oe,login:Z},permissions:{isGrafanaAdmin:le,isDisabled:ce},roles:q,teams:ne};H((0,g.sJ)(pe))}catch(Q){if((0,r.kW)(Q)){Q.isHandled=!0;const X={title:Q.data.message,body:Q.data.error};H((0,g.eq)()),H((0,g.VB)(X))}}}}function V(){return z=>{z((0,g.WO)())}}function w(){return z=>{z((0,g.WO)()),z((0,g.eq)())}}const K=z=>z.map(H=>Array.isArray(H.value)?H.value.map(Q=>`${H.name}=${Q.value}`).join("&"):`${H.name}=${H.value}`).join("&");function B(){return async(z,H)=>{try{const{perPage:Q,page:X,query:te,filters:oe}=H().userListAdmin,Z=await(0,r.i)().get(`/api/users/search?perpage=${Q}&page=${X}&query=${te}&${K(oe)}`);z((0,g.xh)(Z))}catch(Q){(0,g.k7)(),console.error(Q)}}}const W=(0,t.debounce)(z=>z(B()),500);function _(z){return async H=>{H((0,g.tZ)()),H((0,g.aj)(z)),W(H)}}function k(z){return async H=>{H((0,g.tZ)()),H((0,g.qz)(z)),W(H)}}function A(z){return async H=>{H((0,g.tZ)()),H((0,g.PJ)(z)),H(B())}}},90805:(j,I,e)=>{"use strict";e.d(I,{CY:()=>o,Ls:()=>m,PJ:()=>R,RC:()=>v,UA:()=>y,VB:()=>l,WO:()=>s,ZP:()=>U,aj:()=>M,eq:()=>r,fm:()=>b,k7:()=>x,pm:()=>f,qz:()=>O,sJ:()=>a,sL:()=>E,tZ:()=>S,xh:()=>P,y3:()=>d});var t=e(34099);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},i=(0,t.oM)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(L,V)=>({...L,ldapError:void 0,connectionInfo:V.payload}),ldapFailedAction:(L,V)=>({...L,ldapError:V.payload}),ldapSyncStatusLoadedAction:(L,V)=>({...L,syncInfo:V.payload}),userMappingInfoLoadedAction:(L,V)=>({...L,user:V.payload,userError:void 0}),userMappingInfoFailedAction:(L,V)=>({...L,user:void 0,userError:V.payload}),clearUserMappingInfoAction:(L,V)=>({...L,user:void 0}),clearUserErrorAction:(L,V)=>({...L,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:r,ldapConnectionInfoLoadedAction:m,ldapFailedAction:d,ldapSyncStatusLoadedAction:o,userMappingInfoFailedAction:l,userMappingInfoLoadedAction:a}=i.actions,g=i.reducer,c={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},h=(0,t.oM)({name:"userAdmin",initialState:c,reducers:{userProfileLoadedAction:(L,V)=>({...L,user:V.payload}),userOrgsLoadedAction:(L,V)=>({...L,orgs:V.payload}),userSessionsLoadedAction:(L,V)=>({...L,sessions:V.payload}),userAdminPageLoadedAction:(L,V)=>({...L,isLoading:!V.payload}),userAdminPageFailedAction:(L,V)=>({...L,error:V.payload,isLoading:!1})}}),{userProfileLoadedAction:f,userOrgsLoadedAction:b,userSessionsLoadedAction:v,userAdminPageLoadedAction:y,userAdminPageFailedAction:E}=h.actions,C=h.reducer,u={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},D=(0,t.oM)({name:"userListAdmin",initialState:u,reducers:{usersFetched:(L,V)=>{const{totalCount:w,perPage:K,...B}=V.payload,W=Math.ceil(w/K);return{...L,...B,totalPages:W,perPage:K,showPaging:W>1,isLoading:!1}},usersFetchBegin:L=>({...L,isLoading:!0}),usersFetchEnd:L=>({...L,isLoading:!1}),queryChanged:(L,V)=>({...L,query:V.payload,page:0}),pageChanged:(L,V)=>({...L,page:V.payload}),filterChanged:(L,V)=>{const{name:w,value:K}=V.payload;return L.filters.some(B=>B.name===w)?{...L,page:0,filters:L.filters.map(B=>B.name===w?{...B,value:K}:B)}:{...L,page:0,filters:[...L.filters,V.payload]}}}}),{usersFetched:P,usersFetchBegin:S,usersFetchEnd:x,queryChanged:M,pageChanged:R,filterChanged:O}=D.actions,T=D.reducer,U={ldap:g,userAdmin:C,userListAdmin:T}},41715:(j,I,e)=>{"use strict";e.d(I,{Yb:()=>n,d5:()=>s});var t=e(34667);const n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function i(){const r=t.config.licenseInfo?.trialExpiry;return!!(r&&r>0)}const s=()=>i()&&t.config.featureToggles.featureHighlights},43609:(j,I,e)=>{"use strict";e.d(I,{$:()=>d,Z:()=>E});var t=e(89949),n=e.n(t),i=e(90135);const s=new i.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),r=[{text:"Query",value:"query"}],m={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var d=(C=>(C.IsAbove="gt",C.IsBelow="lt",C.IsOutsideRange="outside_range",C.IsWithinRange="within_range",C.HasNoValue="no_value",C))(d||{});const o=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],l=[{text:"OR",value:"or"},{text:"AND",value:"and"}],a=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],g=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],c=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function h(C){const u=new i.zU({type:C.type,defaultParams:[]});return new i.XN(C,u)}function f(C){return C.toLowerCase().replace(/_/g,"").split(" ")[0]}function b(C){switch(f(C)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function v(C,u){return(0,t.reduce)(C,(D,P)=>(P.metric!==void 0&&P.value!==void 0&&D.push(P.metric+"="+P.value),P.Metric!==void 0&&P.Value!==void 0&&D.push(P.Metric+"="+P.Value),D),[]).join(u)}function y(C){return(0,t.isArray)(C.data)?v(C.data,", "):(0,t.isArray)(C.data.evalMatches)?v(C.data.evalMatches,", "):C.data.error?"Error: "+C.data.error:""}const E={alertQueryDef:s,getStateDisplayModel:b,conditionTypes:r,evalFunctions:o,evalOperators:l,noDataModes:g,executionErrorModes:c,reducerTypes:a,createReducerPart:h,getAlertAnnotationInfo:y,alertStateSortScore:m}},90135:(j,I,e)=>{"use strict";e.d(I,{C7:()=>m,D:()=>r,XN:()=>s,zU:()=>i});var t=e(89949),n=e.n(t);class i{constructor(a){this.type=a.type,this.params=a.params,this.defaultParams=a.defaultParams,this.renderer=a.renderer,this.category=a.category,this.addStrategy=a.addStrategy}}class s{constructor(a,g){if(this.part=a,this.def=g,!this.def)throw{message:"Could not find query part "+a.type};a.params=a.params||(0,t.clone)(this.def.defaultParams),this.params=a.params,this.text="",this.updateText()}render(a){return this.def.renderer(this,a)}hasMultipleParamsInString(a,g){return a.indexOf(",")===-1?!1:this.def.params[g+1]&&this.def.params[g+1].optional}updateParam(a,g){if(this.hasMultipleParamsInString(a,g)){(0,t.each)(a.split(","),(c,h)=>{this.updateParam(c.trim(),h)});return}a===""&&this.def.params[g].optional?this.params.splice(g,1):this.params[g]=a,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let a=this.def.type+"(";a+=this.params.join(", "),a+=")",this.text=a}}function r(l,a){const g=l.def.type+"(",c=(0,t.map)(l.params,(h,f)=>{const b=l.def.params[f];return b.type==="time"&&h==="auto"&&(h="$__interval"),b.quote==="single"?"'"+h+"'":b.quote==="double"?'"'+h+'"':h});return a&&c.unshift(a),g+c.join(", ")+")"}function m(l,a){return a+" "+l.params[0]}function d(l,a){return l.params[0]}function o(l,a){return'"'+l.params[0]+'"'}},64216:(j,I,e)=>{"use strict";e.d(I,{ZP:()=>P,Gr:()=>a,gz:()=>f,Oc:()=>b,K:()=>E,J0:()=>C,T2:()=>y,ql:()=>v});var t=e(34099),n=e(99633),i=e(33199),s=e(84369),r=e(47702);const d=(0,i.combineReducers)({dataSources:(0,s.jK)("dataSources",r.nw,({rulesSourceName:M})=>M).reducer,promRules:(0,s.jK)("promRules",r.y6,({rulesSourceName:M})=>M).reducer,rulerRules:(0,s.jK)("rulerRules",r.UR,({rulesSourceName:M})=>M).reducer,silences:(0,s.jK)("silences",r.je,M=>M).reducer,ruleForm:(0,i.combineReducers)({saveRule:(0,s.i6)("saveRule",r.wy).reducer,existingRule:(0,s.i6)("existingRule",r.on).reducer}),grafanaNotifiers:(0,s.i6)("grafanaNotifiers",r.Vj).reducer,saveAMConfig:(0,s.i6)("saveAMConfig",r.mM).reducer,deleteAMConfig:(0,s.i6)("deleteAMConfig",r.Nc).reducer,updateSilence:(0,s.i6)("updateSilence",r.QY).reducer,amAlerts:(0,s.jK)("amAlerts",r.dB,M=>M).reducer,folders:(0,s.jK)("folders",r.vL,M=>M).reducer,amAlertGroups:(0,s.jK)("amAlertGroups",r.mS,M=>M).reducer,testReceivers:(0,s.i6)("testReceivers",r.D8).reducer,updateLotexNamespaceAndGroup:(0,s.i6)("updateLotexNamespaceAndGroup",r.hv).reducer,externalAlertmanagers:(0,i.combineReducers)({alertmanagerConfig:(0,s.i6)("alertmanagerConfig",r.wE).reducer,discoveredAlertmanagers:(0,s.i6)("discoveredAlertmanagers",r.zy).reducer}),managedAlertStateHistory:(0,s.i6)("managedAlertStateHistory",r.Ms).reducer});var o=e(43609);const l={items:[],searchQuery:"",isLoading:!1},a={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function g(M,R){const O=o.Z.getStateDisplayModel(R),T={...M,stateText:O.text,stateIcon:O.iconClass,stateClass:O.stateClass,stateAge:(0,n.CQ)(M.newStateDate).fromNow(!0)};return T.state!=="paused"&&(T.executionError&&(T.info="Execution Error: "+T.executionError),T.evalData&&T.evalData.noData&&(T.info="Query returned no data")),T}const c=(0,t.oM)({name:"alertRules",initialState:l,reducers:{loadAlertRules:M=>({...M,isLoading:!0}),loadedAlertRules:(M,R)=>{const T=R.payload.map(U=>g(U,U.state));return{...M,items:T,isLoading:!1}},setSearchQuery:(M,R)=>({...M,searchQuery:R.payload})}}),h=(0,t.oM)({name:"notificationChannel",initialState:a,reducers:{setNotificationChannels:(M,R)=>({...M,notificationChannelTypes:x(R.payload),notifiers:R.payload}),notificationChannelLoaded:(M,R)=>{const O=R.payload,U=M.notifiers.find(L=>L.type===O.type).options.filter(L=>L.secure);return U.length>0&&U.some(L=>O.settings[L.propertyName]!=="")?S(M,R.payload,U):{...M,notificationChannel:O}},resetSecureField:(M,R)=>({...M,notificationChannel:{...M.notificationChannel,secureFields:{...M.notificationChannel.secureFields,[R.payload]:!1}}})}}),{loadAlertRules:f,loadedAlertRules:b,setSearchQuery:v}=c.actions,{setNotificationChannels:y,notificationChannelLoaded:E,resetSecureField:C}=h.actions,u=c.reducer,D=h.reducer,P={alertRules:u,notificationChannel:D,unifiedAlerting:d};function S(M,R,O){const T={},U={};return O.forEach(L=>{U[L.propertyName]=R.settings[L.propertyName],T[L.propertyName]=""}),{...M,notificationChannel:{...R,settings:{...R.settings,...T},secureSettings:{...U}}}}function x(M){return M.map(R=>({value:R.type,label:R.name,...R,typeName:R.type})).sort((R,O)=>R.name>O.name?1:-1)}},28722:(j,I,e)=>{"use strict";e.d(I,{$I:()=>h,PN:()=>a,Z0:()=>v,pM:()=>g,z7:()=>l});var t=e(99633),n=e(75308),i=e(91712),s=e(73289),r=e(34667),m=e(86312),d=e(66574);const o=7,l={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"};function a(y,E={}){r.config.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([y],{level:i.in.INFO,context:{...E,module:"Alerting"}})}function g(y,E,C){return async function(...u){const D=performance.now(),P=await y(...u);return a(E,{loadTimeMs:(performance.now()-D).toFixed(0),...C}),P}}async function c(){try{const{createdAt:y}=await(0,s.i)().get("/api/user"),E=(0,t.CQ)().subtract(o,"days"),C=(0,t.CQ)(y);return E.isBefore(C)}catch{return!0}}const h=async(y={grafana_version:r.config.buildInfo.version,org_id:d.contextSrv.user.orgId,user_id:d.contextSrv.user.id})=>{await c()||(0,m.ff)("grafana_alerting_navigation",y)},f=async y=>{await c()||reportInteraction("grafana_alerting_rule_creation",y)},b=async y=>{await c()||reportInteraction("grafana_alerting_rule_aborted",y)},v=async y=>{await c()||(0,m.ff)("grafana_alerting_rule_form_error",y)}},85096:(j,I,e)=>{"use strict";e.d(I,{alertRuleApi:()=>l});var t=e(22513),n=e(77328),i=e(22446),s=e(16881),r=e(21961);const m="/api/v1/rule/test/grafana",d="api/prometheus/grafana/api/v1/rules";function o(a,g="yaml"){return`/api/v1/provisioning/alert-rules/${a}/export?format=${g}`}const l=s.C.injectEndpoints({endpoints:a=>({preview:a.mutation({query:({alertQueries:g,condition:c,customLabels:h,folder:f,alertName:b,alertUid:v})=>({url:m,data:{rule:{grafana_alert:{data:g,condition:c,no_data_state:"Alerting",title:b,uid:v??"N/A"},for:"0s",labels:(0,n.bR)(h),annotations:{}},folderUid:f.uid,folderTitle:f.title},method:"POST"})}),prometheusRulesByNamespace:a.query({query:({limitAlerts:g,identifier:c,filter:h,state:f,matcher:b})=>{const v=new URLSearchParams;g&&v.set("limit_alerts",String(g)),c&&((0,i.qE)(c)||(0,i.E4)(c))&&(v.set("file",c.namespace),v.set("rule_group",c.groupName));const y=(0,r.hd)(v,h);return{url:d,params:(0,r.Tb)(y,f,b)}},transformResponse:g=>(0,r.lL)(g.data.groups,t.GC)}),exportRule:a.query({query:({uid:g,format:c})=>({url:o(g,c)})})})})},16881:(j,I,e)=>{"use strict";e.d(I,{C:()=>m});var t=e(4371),n=e(78209),i=e(73289),s=e(28722);const r=()=>async d=>{try{const o=performance.now(),{data:l,...a}=await(0,n.n)((0,i.i)().fetch(d));return(0,s.PN)("Request finished",{loadTimeMs:(performance.now()-o).toFixed(0),url:d.url,method:d.method??"",responseStatus:a.statusText}),{data:l,meta:a}}catch(o){return{error:o}}},m=(0,t.LC)({reducerPath:"alertingApi",baseQuery:r(),tagTypes:["AlertmanagerChoice","AlertmanagerConfiguration"],endpoints:()=>({})})},58803:(j,I,e)=>{"use strict";e.d(I,{$l:()=>C,Bp:()=>f,CN:()=>d,Ch:()=>r,QK:()=>g,U7:()=>o,UK:()=>h,XK:()=>c,Zo:()=>u,dx:()=>l,iT:()=>a,oy:()=>m,tK:()=>E});var t=e(78209),n=e(78968),i=e(73289),s=e(22513);async function r(P){try{const S=await(0,t.n)((0,i.i)().fetch({url:`/api/alertmanager/${(0,s.gt)(P)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:S.data.template_files??{},template_file_provenances:S.data.template_file_provenances??{},alertmanager_config:S.data.alertmanager_config??{},last_applied:S.data.last_applied,id:S.data.id}}catch(S){if(P===s.GC&&(0,i.kW)(S)&&S.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw S}}async function m(P,S){await(0,t.n)((0,i.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,s.gt)(P)}/config/api/v1/alerts`,data:S,showErrorAlert:!1,showSuccessAlert:!1}))}async function d(P){await(0,t.n)((0,i.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,s.gt)(P)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function o(P){return(await(0,t.n)((0,i.i)().fetch({url:`/api/alertmanager/${(0,s.gt)(P)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function l(P,S){return(await(0,t.n)((0,i.i)().fetch({url:`/api/alertmanager/${(0,s.gt)(P)}/api/v2/silences`,data:S,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function a(P,S){await(0,i.i)().delete(`/api/alertmanager/${(0,s.gt)(P)}/api/v2/silence/${encodeURIComponent(S)}`)}async function g(P,S,x=!0,M=!0,R=!0){const O=n.Cj.toUrlParams({silenced:x,active:M,inhibited:R})+S?.map(U=>`filter=${encodeURIComponent(`${D(U.name)}=${U.isRegex?"~":""}"${D(U.value)}"`)}`).join("&")||"";return(await(0,t.n)((0,i.i)().fetch({url:`/api/alertmanager/${(0,s.gt)(P)}/api/v2/alerts`+(O?"?"+O:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function c(P){return(await(0,t.n)((0,i.i)().fetch({url:`/api/alertmanager/${(0,s.gt)(P)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function h(P){return(await(0,t.n)((0,i.i)().fetch({url:`/api/alertmanager/${(0,s.gt)(P)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function f(P,S,x){const M={receivers:S,alert:x};try{const R=await(0,t.n)((0,i.i)().fetch({method:"POST",data:M,url:`/api/alertmanager/${(0,s.gt)(P)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(b(R.data))throw new Error(y(R.data))}catch(R){throw(0,i.kW)(R)&&v(R.data)&&b(R.data)?new Error(y(R.data)):R}}function b(P){return P.receivers.some(S=>S.grafana_managed_receiver_configs.some(x=>x.status==="failed"))}function v(P){const S=P?.receivers;return Array.isArray(S)?S.every(x=>typeof x.name=="string"&&Array.isArray(x.grafana_managed_receiver_configs)):!1}function y(P){return P.receivers.flatMap(S=>S.grafana_managed_receiver_configs.filter(x=>x.status==="failed").map(x=>x.error??"Unknown error.")).join("; ")}async function E(P){await(0,t.n)((0,i.i)().fetch({method:"POST",data:P,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{u()})}async function C(){return(await(0,t.n)((0,i.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function u(){return(await(0,t.n)((0,i.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function D(P){return P.replace(/"/g,'\\"')}},52646:(j,I,e)=>{"use strict";e.d(I,{alertmanagerApi:()=>f});var t=e(89949),n=e.n(t),i=e(84749),s=e(28722),r=e(76658),m=e(22513),d=e(39036),o=e(84369),l=e(16881),a=e(58803),g=e(37194);const c=10,h=30*1e3,f=l.C.injectEndpoints({endpoints:b=>({getAlertmanagerAlerts:b.query({query:({amSourceName:v,filter:y})=>{const E=y?.matchers?.filter(M=>M.name&&M.value).map(M=>`${M.name}${(0,r.zy)(M)}${(0,d.sM)(M.value)}`),{silenced:C,inhibited:u,unprocessed:D,active:P}=y||{},S=Object.fromEntries(Object.entries({silenced:C,active:P,inhibited:u,unprocessed:D}).filter(([M,R])=>R!==void 0)),x={filter:E};return S&&Object.keys(S).forEach(M=>{x[M]=S[M]}),{url:`/api/alertmanager/${(0,m.gt)(v)}/api/v2/alerts`,params:x}}}),getAlertmanagerAlertGroups:b.query({query:({amSourceName:v})=>({url:`/api/alertmanager/${(0,m.gt)(v)}/api/v2/alerts/groups`})}),getAlertmanagerChoiceStatus:b.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagerConfig:b.query({query:()=>({url:"/api/v1/ngalert/admin_config"}),providesTags:["AlertmanagerChoice"]}),getExternalAlertmanagers:b.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:v=>v.data}),saveExternalAlertmanagersConfig:b.mutation({query:v=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:v}),invalidatesTags:["AlertmanagerChoice"]}),getValidAlertManagersConfig:b.query({query:()=>({url:`/api/alertmanager/${(0,m.gt)(m.GC)}/config/history?limit=${c}`})}),resetAlertManagerConfigToOldVersion:b.mutation({query:v=>({url:`/api/alertmanager/${(0,m.gt)(m.GC)}/config/history/${v.id}/_activate`,method:"POST"})}),getAlertmanagerConfiguration:b.query({queryFn:async v=>{const y=v===m.GC;if((0,m.RY)(v))return(0,o.$b)((0,a.UK)(v).then(x=>({data:{alertmanager_config:x.config,template_files:{}}})));const{data:C}=await(0,i.WI)(g.T.endpoints.discoverAmFeatures.initiate({amSourceName:v})),u={alertmanager_config:{},template_files:{},template_file_provenances:{}},D=C?.lazyConfigInit??!1,P=(0,s.pM)(a.Ch,`[${v}] Alertmanager config loaded`,{dataSourceName:v,thunk:"unifiedalerting/fetchAmConfig"}),S=(0,d.fm)(()=>P(v),x=>!!(0,o.kk)(x)?.includes("alertmanager storage object not found")&&!D,h).then(x=>y?x:(0,t.isEmpty)(x.alertmanager_config)&&(0,t.isEmpty)(x.template_files)?(0,a.UK)(v).then(R=>({alertmanager_config:R.config,template_files:{},template_file_provenances:x.template_file_provenances,last_applied:x.last_applied,id:x.id})):x).then(x=>x??u).then(x=>({data:x})).catch(x=>{if(D&&(0,o.kk)(x)?.includes("alertmanager storage object not found"))return{data:u};throw x});return(0,o.$b)(S).catch(x=>({error:x,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:b.mutation({query:({selectedAlertmanager:v,config:y,...E})=>({url:`/api/alertmanager/${(0,m.gt)(v)}/config/api/v1/alerts`,method:"POST",data:y,...E}),invalidatesTags:["AlertmanagerConfiguration"]})})})},55394:(j,I,e)=>{"use strict";e.d(I,{C$:()=>o,SJ:()=>g,WG:()=>l,Zy:()=>a});var t=e(78209),n=e(73289),i=e(18447),s=e(33555),r=e(22513),m=e(21961),d=e(92089);async function o(y){if(y===r.GC)return{features:{rulerApiEnabled:!0}};const E=(0,r.c$)(y);if(!E)throw new Error(`Cannot find data source configuration for ${y}`);const{url:C,name:u,type:D}=E;if(!C)throw new Error("The data source url cannot be empty.");if(D!=="prometheus"&&D!=="loki")throw new Error(`The build info request is not available for ${D}. Only 'prometheus' and 'loki' are supported`);return l({name:u,url:C,type:D})}async function l(y){const{url:E,name:C,type:u}=y,D=u==="loki"?void 0:await h(E);if(!(D!==void 0)){if(!await f(C))throw new Error(`Unable to fetch alert rules. Is the ${C} data source properly configured?`);const M=await b(C);return{application:i.T8.Cortex,features:{rulerApiEnabled:M}}}const{features:S}=D.data;return S?{application:i.T8.Mimir,features:{rulerApiEnabled:S?.ruler_config_api==="true"}}:{application:i.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function a(y){if(y===r.GC)return{lazyConfigInit:!1};const E=c(y),{url:C,type:u}=E;if(!C)throw new Error("The data source url cannot be empty.");if(u!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${u}. Only 'alertmanager' type is supported`);return await g(C)}async function g(y){try{return{lazyConfigInit:(await h(y))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function c(y){const E=(0,r.c$)(y);if(!E)throw new Error(`Cannot find data source configuration for ${y}`);return E}async function h(y){return(await(0,t.n)((0,n.i)().fetch({url:`${y}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{if(!("status"in C&&C.status===404))throw C}))?.data}async function f(y){try{return await(0,m.j)(y),!0}catch{return!1}}async function b(y){try{return await(0,d.jw)(y),!0}catch(E){if(v(E))return!1;throw E}}function v(y){return(0,n.kW)(y)?y.data.message?.includes("GetRuleGroup unsupported in rule local store")||y.data.message?.includes("page not found")||y.data.message?.includes(s.jZ):y instanceof Error&&y.message?.includes("404 from rules config endpoint")}},37194:(j,I,e)=>{"use strict";e.d(I,{T:()=>i});var t=e(16881),n=e(55394);const i=t.C.injectEndpoints({endpoints:s=>({discoverAmFeatures:s.query({queryFn:async({amSourceName:r})=>{try{return{data:await(0,n.Zy)(r)}}catch(m){return{error:m}}}})})})},8014:(j,I,e)=>{"use strict";e.d(I,{QE:()=>o,i9:()=>s});var t=e(78209),n=e(73289),i=e(22513);function s(){return(0,n.i)().get("/api/alert-notifiers")}const r=l=>{const a=l.match(/^(\w+)(\[\d+\])?$/);return a?{type:a[1],index:a[2]}:{type:l,index:void 0}},m=l=>{const a={receivers:{},errorCount:0};l.forEach(c=>{a.receivers[c.name]={active:c.active,notifiers:{},errorCount:0};const h=a.receivers[c.name];c.integrations.forEach(f=>{!!f?.lastNotifyAttemptError&&(h.errorCount+=1);const v=d(f.name);v&&(h.notifiers[v]||(h.notifiers[v]=[]),h.notifiers[v].push(f))})});const g=Object.values(a.receivers).reduce((c,h)=>c+h.errorCount,0);return{...a,errorCount:g}},d=l=>r(l)?.type;async function o(l){try{const a=await(0,t.n)((0,n.i)().fetch({url:`/api/alertmanager/${(0,i.gt)(l)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return m(a.data)}catch{return m([])}}},21961:(j,I,e)=>{"use strict";e.d(I,{Tb:()=>d,hd:()=>m,j:()=>l,lL:()=>o});var t=e(78209),n=e(73289),i=e(22513),s=e(22446);function r(a){const{dataSourceName:g,limitAlerts:c,identifier:h}=a;return{rules:(f,b,v)=>{const y=new URLSearchParams;g===i.GC&&c&&y.set("limit_alerts",String(c)),h&&((0,s.qE)(h)||(0,s.E4)(h))&&(y.set("file",h.namespace),y.set("rule_group",h.groupName));const E=m(y,f);return{url:`/api/prometheus/${(0,i.gt)(g)}/api/v1/rules`,params:d(E,b,v)}}}}function m(a,g){return g?.dashboardUID&&(a.set("dashboard_uid",g.dashboardUID),g?.panelId&&a.set("panel_id",String(g.panelId))),Object.fromEntries(a)}function d(a,g,c){let h={...a};if(g?.length&&(h={...h,state:g}),c?.length){const f=c.map(b=>JSON.stringify(b));h={...h,matcher:f}}return h}const o=(a,g)=>{const c={};return a.forEach(h=>{h.rules.forEach(f=>{f.query=f.query||""}),c[h.file]?c[h.file].groups.push(h):c[h.file]={dataSourceName:g,name:h.file,groups:[h]}}),Object.values(c)};async function l(a,g,c,h,f,b){if(g?.dashboardUID&&a!==i.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:v,params:y}=r({dataSourceName:a,limitAlerts:c,identifier:b}).rules(g,f,h),E=await(0,t.n)((0,n.i)().fetch({url:v,params:y,showErrorAlert:!1,showSuccessAlert:!1})).catch(C=>{throw"status"in C&&C.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):C});return o(E.data.data.groups,a)}},92089:(j,I,e)=>{"use strict";e.d(I,{BC:()=>c,P4:()=>d,jJ:()=>g,jw:()=>a,m6:()=>o,sz:()=>y});var t=e(78209),n=e(73289),i=e(33555),s=e(22513),r=e(21961);function m(E){const u=`${`/api/ruler/${(0,s.gt)(E.dataSourceName)}`}/api/v1/rules`,D=new URLSearchParams;return D.set("subtype",E.apiVersion==="legacy"?"cortex":"mimir"),{rules:P=>{const S=(0,r.hd)(D,P);return{path:`${u}`,params:S}},namespace:P=>({path:`${u}/${encodeURIComponent(P)}`,params:Object.fromEntries(D)}),namespaceGroup:(P,S)=>({path:`${u}/${encodeURIComponent(P)}/${encodeURIComponent(S)}`,params:Object.fromEntries(D)})}}async function d(E,C,u){const{path:D,params:P}=m(E).namespace(C);await(0,t.n)((0,n.i)().fetch({method:"POST",url:D,data:u,showErrorAlert:!1,showSuccessAlert:!1,params:P}))}async function o(E,C){if(C?.dashboardUID&&E.dataSourceName!==s.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:u,params:D}=m(E).rules(C);return h(u,{},D)}async function l(E,C){const{path:u,params:D}=m(E).namespace(C);return(await h(u,{},D))[C]||[]}async function a(E){return h(`/api/ruler/${(0,s.gt)(E)}/api/v1/rules/test/test`,null)}async function g(E,C,u){const{path:D,params:P}=m(E).namespaceGroup(C,u);return h(D,null,P)}async function c(E,C,u){const{path:D,params:P}=m(E).namespaceGroup(C,u);await(0,t.n)((0,n.i)().fetch({url:D,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:P}))}async function h(E,C,u){try{return(await(0,t.n)((0,n.i)().fetch({url:E,showErrorAlert:!1,showSuccessAlert:!1,params:u}))).data}catch(D){if(!f(D))throw D;if(v(D))return C;throw b(D)?{...D,data:{...D.data,message:i.jZ}}:D}}function f(E){const C=E.data!=null;return Number.isFinite(E.status)&&C}function b(E){return E.status===404||E.status===500&&E.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function v(E){return E.status===404&&(E.data.message?.includes("group does not exist")||E.data.message?.includes("no rule groups found"))}async function y(E,C){const{path:u,params:D}=m(E).namespace(C);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:u,showErrorAlert:!1,showSuccessAlert:!1,params:D}))}},21915:(j,I,e)=>{"use strict";e.d(I,{i:()=>r});var t=e(42844),n=e(27702),i=e(66310),s=e(67437);const r=({labelKey:d,value:o,operator:l="=",onRemoveLabel:a})=>{const g=(0,i.wW)(m);return n.createElement("div",{className:g.wrapper},d,l,o,!!a&&n.createElement(s.h,{name:"times",size:"xs",onClick:a,tooltip:"Remove label"}))},m=d=>({wrapper:(0,t.css)`
    padding: ${d.spacing(.5,1)};
    border-radius: ${d.shape.borderRadius(1)};
    border: solid 1px ${d.colors.border.medium};
    font-size: ${d.typography.bodySmall.fontSize};
    background-color: ${d.colors.background.secondary};
    font-weight: ${d.typography.fontWeightBold};
    color: ${d.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},8254:(j,I,e)=>{"use strict";e.d(I,{s:()=>g});var t=e(42844),n=e(89949),i=e.n(n),s=e(6772),r=e.n(s),m=e(27702),d=e(66310),o=e(66670),l=e(64714),a=e(79374);const g=({labels:b,commonLabels:v={},size:y})=>{const E=(0,d.wW)(x=>f(x,y)),[C,u]=(0,m.useState)(!1),D=(0,n.chain)(b).toPairs().reject(h).reject(([x])=>C?!1:x in v).value(),P=Object.keys(v).length,S=P>0;return m.createElement("div",{className:E.wrapper,role:"list","aria-label":"Labels"},D.map(([x,M])=>m.createElement(a._,{key:x+M,size:y,label:x,value:M,color:c(x)})),!C&&S&&m.createElement(o.zx,{variant:"secondary",fill:"text",onClick:()=>u(!0),tooltip:"Show common labels",tooltipPlacement:"top",size:"sm"},"+",P," common ",r()("label",P)),C&&S&&m.createElement(o.zx,{variant:"secondary",fill:"text",onClick:()=>u(!1),tooltipPlacement:"top",size:"sm"},"Hide common labels"))};function c(b){return(0,l.Bx)(b).color}const h=([b,v])=>b.startsWith("__")&&b.endsWith("__"),f=(b,v)=>({wrapper:(0,t.css)`
    display: flex;
    flex-wrap: wrap;
    align-items: center;

    gap: ${v==="md"?b.spacing():b.spacing(.5)};
  `})},73104:(j,I,e)=>{"use strict";e.d(I,{a:()=>g});var t=e(42844),n=e(27702),i=e(48154),s=e(80011),r=e(66310),m=e(33555),d=e(1333),o=e(3671),l=e(49325);const a=["message","description"],g=({annotationKey:f,value:b,valueLink:v})=>{const y=m.vY[f]?n.createElement(s.u,{content:f,placement:"top",theme:"info"},n.createElement("span",null,m.vY[f])):f;return n.createElement(d.C,{label:y,horizontal:!0},n.createElement(c,{annotationKey:f,value:b,valueLink:v}))},c=({annotationKey:f,value:b,valueLink:v})=>{const y=(0,r.wW)(h),E=a.includes(f),C=b&&b.startsWith("http"),u=n.createElement(o.Z,{input:b,delimiter:["{{","}}"]});return v?n.createElement("a",{href:i.QX.sanitizeUrl(v),className:y.link},b):E?n.createElement(l.t,{className:y.well},u):C?n.createElement("a",{href:i.QX.sanitizeUrl(b),target:"__blank",className:y.link},b):n.createElement(n.Fragment,null,u)},h=f=>({well:(0,t.css)`
    word-break: break-word;
  `,link:(0,t.css)`
    word-break: break-all;
    color: ${f.colors.primary.text};
  `})},10759:(j,I,e)=>{"use strict";e.d(I,{U:()=>r});var t=e(42844),n=e(27702),i=e(66310),s=e(66670);const r=({isCollapsed:d,onToggle:o,idControlled:l,className:a,text:g,size:c="xl",...h})=>{const f=(0,i.wW)(m);return n.createElement(s.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!d,"aria-controls":l,className:(0,t.cx)(f.expandButton,a),icon:d?"angle-right":"angle-down",onClick:()=>o(!d),...h},g)},m=d=>({expandButton:(0,t.css)`
    margin-right: ${d.spacing(1)};
  `})},1333:(j,I,e)=>{"use strict";e.d(I,{C:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({className:m,label:d,horizontal:o,children:l,childrenWrapperClassName:a})=>{const g=(0,i.wW)(r);return n.createElement("div",{className:(0,t.cx)(g.field,o?g.fieldHorizontal:g.fieldVertical,m)},n.createElement("div",null,d),n.createElement("div",{className:a},l))},r=m=>({fieldHorizontal:(0,t.css)`
    flex-direction: row;
    ${m.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:(0,t.css)`
    flex-direction: column;
  `,field:(0,t.css)`
    display: flex;
    margin: ${m.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${m.spacing(1)};
      font-size: ${m.typography.size.sm};
      font-weight: ${m.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${m.colors.text.secondary};
    }
  `})},45986:(j,I,e)=>{"use strict";e.d(I,{t:()=>o});var t=e(42844),n=e(27702),i=e(66310),s=e(67437),r=e(50852),m=e(92367),d=e(36148);const o=({cols:a,items:g,isExpandable:c=!1,onCollapse:h,onExpand:f,isExpanded:b,renderExpandedContent:v,testIdGenerator:y,pagination:E,paginationStyles:C,renderPrefixCell:u,renderPrefixHeader:D,footerRow:P,dataTestId:S})=>{const x=(0,i.wW)(d.Z);if((h||f||b)&&!(h&&f&&b))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((c||v)&&!(c&&v))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const M=(0,i.wW)(l(a,c,!!D)),[R,O]=(0,n.useState)([]),T=B=>{b&&h&&f?b(B)?h(B):f(B):O(R.includes(B.id)?R.filter(W=>W!==B.id):[...R,B.id])},U=E?.itemsPerPage??g.length,{page:L,numberOfPages:V,onPageChange:w,pageItems:K}=(0,m.h)(g,1,U);return n.createElement(n.Fragment,null,n.createElement("div",{className:M.container,"data-testid":S??"dynamic-table"},n.createElement("div",{className:M.row,"data-testid":"header"},D&&D(),c&&n.createElement("div",{className:M.cell}),a.map(B=>n.createElement("div",{className:M.cell,key:B.id},B.label))),K.map((B,W)=>{const _=b?b(B):R.includes(B.id);return n.createElement("div",{className:M.row,key:`${B.id}-${W}`,"data-testid":y?.(B,W)??"row"},u&&u(B,W,g),c&&n.createElement("div",{className:(0,t.cx)(M.cell,M.expandCell)},n.createElement(s.h,{tooltip:`${_?"Collapse":"Expand"} row`,"data-testid":"collapse-toggle",name:_?"angle-down":"angle-right",onClick:()=>T(B)})),a.map(k=>n.createElement("div",{className:(0,t.cx)(M.cell,M.bodyCell,k.className),"data-column":k.label,key:`${B.id}-${k.id}`},k.renderCell(B,W))),_&&v&&n.createElement("div",{className:M.expandedContentRow,"data-testid":"expanded-content"},v(B,W,g)))}),P&&n.createElement("div",{className:(0,t.cx)(M.row,M.footerRow)},P)),E&&n.createElement(r.t,{className:(0,t.cx)(x,C),currentPage:L,numberOfPages:V,onNavigate:w,hideWhenSinglePage:!0}))},l=(a,g,c)=>{const h=a.map(f=>f.size?typeof f.size=="number"?`${f.size}fr`:f.size:"auto");return g&&h.unshift("calc(1em + 16px)"),c&&h.unshift("0"),f=>({container:(0,t.css)`
      border: 1px solid ${f.colors.border.weak};
      border-radius: ${f.shape.borderRadius()};
      color: ${f.colors.text.secondary};
    `,row:(0,t.css)`
      display: grid;
      grid-template-columns: ${h.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${f.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${f.colors.background.primary};
      }

      ${f.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${f.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${c?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:(0,t.css)`
      display: flex;
      padding: ${f.spacing(1)};
    `,cell:(0,t.css)`
      display: flex;
      align-items: center;
      padding: ${f.spacing(1)};

      ${f.breakpoints.down("sm")} {
        padding: ${f.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:(0,t.css)`
      overflow: hidden;

      ${f.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${f.colors.text.primary};
        }
      }
    `,expandCell:(0,t.css)`
      justify-content: center;

      ${f.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:(0,t.css)`
      grid-column-end: ${h.length+1};
      grid-column-start: ${c?3:2};
      grid-row: 2;
      padding: 0 ${f.spacing(3)} 0 ${f.spacing(1)};
      position: relative;

      ${f.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${f.colors.border.strong};
        grid-row: auto;
        padding: ${f.spacing(1)} 0 0 0;
      }
    `})}},51453:(j,I,e)=>{"use strict";e.d(I,{z:()=>l});var t=e(42844),n=e(89898),i=e.n(n),s=e(27702),r=e(23852),m=e(66310),d=e(75965),o=e(71235);const l=({children:g,header:c,content:h,footer:f,arrow:b,showAfter:v=300,wrapperClassName:y,disabled:E=!1,...C})=>{const u=(0,s.useRef)(null),D=(0,m.wW)(a);if(E)return g;const P=s.createElement(r.K,{direction:"column",gap:0},c&&s.createElement("div",{className:D.card.header},c),s.createElement("div",{className:D.card.body},h),f&&s.createElement("div",{className:D.card.footer},f));return s.createElement(d.D,{content:P,hideAfter:100},(S,x,M)=>s.createElement(s.Fragment,null,u.current&&s.createElement(o.J,{...M,...C,wrapperClassName:i()(D.popover(b?1.25:0),y),onMouseLeave:x,onMouseEnter:S,onFocus:S,onBlur:x,referenceElement:u.current,renderArrow:b?({arrowProps:R,placement:O})=>s.createElement("div",{className:D.arrow(O),...R}):()=>s.createElement(s.Fragment,null)}),s.cloneElement(g,{ref:u,onMouseEnter:S,onMouseLeave:x,onFocus:S,onBlur:x})))},a=g=>({popover:c=>(0,t.css)`
    border-radius: ${g.shape.borderRadius()};
    box-shadow: ${g.shadows.z3};
    background: ${g.colors.background.primary};
    border: 1px solid ${g.colors.border.medium};

    margin-bottom: ${g.spacing(c)};
  `,card:{body:(0,t.css)`
      padding: ${g.spacing(1)};
    `,header:(0,t.css)`
      padding: ${g.spacing(1)};
      background: ${g.colors.background.secondary};
      border-bottom: solid 1px ${g.colors.border.medium};
    `,footer:(0,t.css)`
      padding: ${g.spacing(.5)} ${g.spacing(1)};
      background: ${g.colors.background.secondary};
      border-top: solid 1px ${g.colors.border.medium};
    `},arrow:c=>{const h="9px";return(0,t.css)`
      width: 0;
      height: 0;

      border-left: ${h} solid transparent;
      border-right: ${h} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${h} solid ${g.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${h} solid ${g.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${h};
      }
    `}})},79374:(j,I,e)=>{"use strict";e.d(I,{_:()=>d});var t=e(42844),n=e(27702),i=e(71685),s=e(23852),r=e(66310),m=e(73453);const d=({label:l,value:a,icon:g,color:c,size:h="md"})=>{const f=(0,r.wW)(b=>o(b,c,h));return n.createElement("div",{className:f.wrapper,role:"listitem"},n.createElement(s.K,{direction:"row",gap:0,alignItems:"stretch",wrap:!1},n.createElement("div",{className:f.label},n.createElement(s.K,{direction:"row",gap:.5,alignItems:"center"},g&&n.createElement(m.J,{name:g})," ",l??"")),n.createElement("div",{className:f.value},a)))},o=(l,a,g)=>{const c=a??l.colors.secondary.main,h=l.isDark?(0,i.Z)(c).lighten(5).toString():(0,i.Z)(c).darken(5).toString(),f=l.isDark?(0,i.Z)(c).darken(5).toString():(0,i.Z)(c).lighten(5).toString(),b=a?i.Z.mostReadable(c,["#000","#fff"]).toString():l.colors.text.primary,v=g==="md"?`${l.spacing(.33)} ${l.spacing(1)}`:`${l.spacing(.2)} ${l.spacing(.6)}`;return{wrapper:(0,t.css)`
      color: ${b};
      font-size: ${l.typography.bodySmall.fontSize};

      border-radius: ${l.shape.borderRadius(2)};
    `,label:(0,t.css)`
      display: flex;
      align-items: center;
      color: inherit;

      padding: ${v};
      background: ${c};

      border: solid 1px ${h};
      border-top-left-radius: ${l.shape.borderRadius(2)};
      border-bottom-left-radius: ${l.shape.borderRadius(2)};
    `,value:(0,t.css)`
      color: inherit;
      padding: ${v};
      background: ${f};

      border: solid 1px ${h};
      border-left: none;
      border-top-right-radius: ${l.shape.borderRadius(2)};
      border-bottom-right-radius: ${l.shape.borderRadius(2)};
    `}}},67045:(j,I,e)=>{"use strict";e.d(I,{L:()=>i});var t=e(42844),n=e(27702);const i=()=>n.createElement("span",{className:(0,t.css)`
      flex: 1;
    `})},6949:(j,I,e)=>{"use strict";e.d(I,{i:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({children:m,state:d,size:o="md",muted:l=!1})=>{const a=(0,i.wW)(r);return n.createElement("span",{className:(0,t.cx)(a.common,a[d],a[o],{[a.muted]:l})},m||d)},r=m=>({common:(0,t.css)`
    display: inline-block;
    color: white;
    border-radius: ${m.shape.borderRadius()};
    font-size: ${m.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${m.typography.fontWeightBold};
  `,good:(0,t.css)`
    background-color: ${m.colors.success.main};
    border: solid 1px ${m.colors.success.main};
    color: ${m.colors.success.contrastText};
  `,warning:(0,t.css)`
    background-color: ${m.colors.warning.main};
    border: solid 1px ${m.colors.warning.main};
    color: ${m.colors.warning.contrastText};
  `,bad:(0,t.css)`
    background-color: ${m.colors.error.main};
    border: solid 1px ${m.colors.error.main};
    color: ${m.colors.error.contrastText};
  `,neutral:(0,t.css)`
    background-color: ${m.colors.secondary.main};
    border: solid 1px ${m.colors.secondary.main};
    color: ${m.colors.secondary.contrastText};
  `,info:(0,t.css)`
    background-color: ${m.colors.primary.main};
    border: solid 1px ${m.colors.primary.main};
    color: ${m.colors.primary.contrastText};
  `,md:(0,t.css)`
    padding: ${m.spacing(.5,1)};
    min-width: ${m.spacing(8)};
  `,sm:(0,t.css)`
    padding: ${m.spacing(.3,.5)};
    min-width: 52px;
  `,muted:(0,t.css)`
    opacity: 0.5;
  `})},3671:(j,I,e)=>{"use strict";e.d(I,{Z:()=>o});var t=e(42844),n=e(27702),i=e(66310),s=e(25357),r=e(51453),m=e(21475);const d=["$",".",'"'];function o({input:v,delimiter:y=["{{","}}"]}){const E=(0,i.wW)(b),[C,u]=y,D=new RegExp(`(?<before>.*?)(${C}(?<token>.*?)${u}|$)`,"gm"),P=v.split(`
`),S=[];return P.forEach((x,M)=>{Array.from(x.matchAll(D)).forEach((O,T)=>{const U=O.groups?.before,L=O.groups?.token?.trim();if(U&&S.push(n.createElement("span",{key:`${M}-${T}-before`},U)),L){const V=f(L),w=V==="variable"?L:"",K=`${C} ${L} ${u}`;S.push(n.createElement(a,{key:`${M}-${T}-token`,content:K,type:V,description:w}))}}),S.push(n.createElement("br",{key:`${M}-newline`}))}),n.createElement("span",{className:E.wrapper},S)}var l=(v=>(v.Variable="variable",v.Function="function",v.Keyword="keyword",v.Unknown="unknown",v))(l||{});function a({content:v,description:y,type:E}){const C=(0,i.wW)(b),u=!E;return n.createElement(r.z,{placement:"top-start",disabled:u,content:n.createElement("div",{className:C.hoverTokenItem},n.createElement(s.C,{tabIndex:0,text:n.createElement(n.Fragment,null,E),color:"blue"})," ",y&&n.createElement("code",null,y))},n.createElement("span",null,n.createElement(s.C,{tabIndex:0,className:C.token,text:v,color:"blue"})))}function g(v){return d.some(y=>v.startsWith(y))}function c(v){return m.keywords.some(y=>v.startsWith(y))}function h(v){return m.builtinFunctions.some(y=>v.startsWith(y))}function f(v){let y;return g(v)?y="variable":c(v)?y="keyword":h(v)?y="function":y="unknown",y}const b=v=>({wrapper:(0,t.css)`
    white-space: pre-wrap;
  `,token:(0,t.css)`
    cursor: default;
    font-family: ${v.typography.fontFamilyMonospace};
  `,popover:(0,t.css)`
    border-radius: ${v.shape.borderRadius()};
    box-shadow: ${v.shadows.z3};
    background: ${v.colors.background.primary};
    border: 1px solid ${v.colors.border.medium};

    padding: ${v.spacing(1)};
  `,hoverTokenItem:(0,t.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${v.spacing(1)};
  `})},49325:(j,I,e)=>{"use strict";e.d(I,{t:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({children:m,className:d})=>{const o=(0,i.wW)(r);return n.createElement("div",{className:(0,t.cx)(o.wrapper,d)},m)},r=m=>({wrapper:(0,t.css)`
    background-color: ${m.components.panel.background};
    border: solid 1px ${m.components.input.borderColor};
    border-radius: ${m.shape.borderRadius(1)};
    padding: ${m.spacing(.5,1)};
    font-family: ${m.typography.fontFamilyMonospace};
  `})},33273:(j,I,e)=>{"use strict";e.d(I,{Z:()=>m});var t=e(6772),n=e.n(t),i=e(27702),s=e(66310),r=e(14117);const m=({group:d})=>{const o=(0,s.wW)(r.r),l=d.alerts.length,a=d.alerts.reduce((g,c)=>(g[c.status.state]?g[c.status.state]+=1:g[c.status.state]=1,g),{});return i.createElement("div",null,`${l} ${n()("alert",l)}: `,Object.entries(a).map(([g,c],h)=>i.createElement("span",{key:`${JSON.stringify(d.labels)}-notifications-${h}`,className:o[g]},h>0&&", ",`${c} ${g}`)))}},71444:(j,I,e)=>{"use strict";e.d(I,{F:()=>h});var t=e(42844),n=e(89949),i=e.n(n),s=e(27702),r=e(23852),m=e(91106),d=e(66310),o=e(73453),l=e(79978),a=e(80011),g=e(1128),c=e(28722);const h=({className:b,onFilterChange:v,defaultQueryString:y})=>{const E=(0,d.wW)(f),C=(0,s.useMemo)(()=>(0,n.debounce)(D=>{(0,m.PN)(c.z7.filterByLabel);const P=D.target;v(P.value)},600),[v]);(0,s.useEffect)(()=>C.cancel(),[C]);const u=s.createElement(o.J,{name:"search"});return s.createElement("div",{className:b},s.createElement(l._,null,s.createElement(r.K,{gap:.5},s.createElement("span",null,"Search by label"),s.createElement(a.u,{content:s.createElement("div",null,"Filter alerts using label querying, ex:",s.createElement("pre",null,'{severity="critical", instance=~"cluster-us-.+"}'))},s.createElement(o.J,{className:E.icon,name:"info-circle",size:"sm"})))),s.createElement(g.I,{placeholder:"Search",defaultValue:y,onChange:C,"data-testid":"search-query-input",prefix:u,className:E.inputWidth}))},f=b=>({icon:(0,t.css)`
    margin-right: ${b.spacing(.5)};
  `,inputWidth:(0,t.css)`
    width: 340px;
    flex-grow: 0;
  `})},21475:(j,I,e)=>{"use strict";e.r(I),e.d(I,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>i,builtinFunctions:()=>r,conf:()=>o,keywords:()=>m,language:()=>d});var t=(l=>(l.Delimiter="delimiter",l.Keyword="keyword",l.Function="type.identifier",l.String="string",l.Variable="variable.name",l.Number="number",l.Comment="comment",l.Operator="operator",l.Identifier="idenfifier",l))(t||{}),n=(l=>(l.toUpper="toUpper",l.toLower="toLower",l.title="title",l.join="join",l.match="match",l.safeHtml="safeHtml",l.reReplaceAll="reReplaceAll",l.stringSlice="stringSlice",l))(n||{});const i=Object.values(n),r=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],m=["define","if","else","end","range","break","continue","template","block","with"],d={defaultToken:"",keywords:m,functions:[...r,...i],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},o={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},61404:(j,I,e)=>{"use strict";e.d(I,{o:()=>c});var t=e(27702),n=e(14951),i=e(99633),s=e(22446),r=e(8254),m=e(45986),d=e(95438),o=e(73104),l=e(1333);const a=({instance:f})=>{const b=(0,d.$9)(f.annotations),v=(0,d.XW)(b);return t.createElement("div",null,f.value&&t.createElement(l.C,{label:"Value",horizontal:!0},f.value),b.map(([y,E])=>t.createElement(o.a,{key:y,annotationKey:y,value:E,valueLink:v.get(y)})))};var g=e(68614);const c=({instances:f,pagination:b,footerRow:v})=>{const y=(0,t.useMemo)(()=>f.length>1?(0,n.FT)(f.map(C=>C.labels)):{},[f]),E=(0,t.useMemo)(()=>f.map(C=>({data:{...C,commonLabels:y},id:(0,s.pB)(C)})),[y,f]);return t.createElement(m.t,{cols:h,isExpandable:!0,items:E,renderExpandedContent:({data:C})=>t.createElement(a,{instance:C}),pagination:b,footerRow:v})},h=[{id:"state",label:"State",renderCell:({data:{state:f}})=>t.createElement(g.l,{state:f}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:f,commonLabels:b}})=>t.createElement(r.s,{labels:f,commonLabels:b,size:"sm"})},{id:"created",label:"Created",renderCell:({data:{activeAt:f}})=>t.createElement(t.Fragment,null,f.startsWith("0001")?"-":(0,i.CQ)(f).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},68614:(j,I,e)=>{"use strict";e.d(I,{l:()=>s});var t=e(27702),n=e(22446),i=e(6949);const s=t.memo(({state:r,isPaused:m=!1,size:d="md",muted:o=!1})=>t.createElement(i.i,{state:(0,n.Aq)(r),size:d,muted:o},(0,n.SS)(r)," ",m?" (Paused)":""));s.displayName="AlertStateTag"},3764:(j,I,e)=>{"use strict";e.d(I,{E:()=>o});var t=e(42844),n=e(27702),i=e(26129),s=e(66310),r=e(66670),m=e(3613),d=e(96437);const o=n.forwardRef(({text:a,ruleIdentifier:g,isProvisioned:c,className:h},f)=>{const[b,v]=(0,n.useState)(!1),y=(0,s.wW)(l),E="/alerting/new?copyFrom="+d.$V(g);return n.createElement(n.Fragment,null,n.createElement(r.Qj,{title:"Copy",className:h,size:"sm",key:"clone",variant:"secondary",icon:"copy",href:c?void 0:E,onClick:c?()=>v(!0):void 0,ref:f},a),n.createElement(m.s,{isOpen:b,title:"Copy provisioned alert rule",body:n.createElement("div",null,n.createElement("p",null,"The new rule will ",n.createElement("span",{className:y.bold},"NOT")," be marked as a provisioned rule."),n.createElement("p",null,"You will need to set a new alert group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI.")),confirmText:"Copy",onConfirm:()=>{i.E1.push(E)},onDismiss:()=>v(!1)}))});o.displayName="CloneRuleButton";const l=a=>({bold:(0,t.css)`
    font-weight: ${a.typography.fontWeightBold};
  `})},93764:(j,I,e)=>{"use strict";e.d(I,{Ii:()=>C,gr:()=>E});var t=e(42844),n=e(27702),i=e(60956),s=e(99633),r=e(66310),m=e(80011),d=e(58692),o=e(95438),l=e(22446),a=e(447),g=e(8254),c=e(1333),h=e(8044),f=e(28542),b=e(673),v=e(13932),y=e(33468);const E=15,C=({rule:P})=>{const S=(0,r.wW)(D),{namespace:{rulesSource:x}}=P,M=(0,o.$9)(P.annotations);return n.createElement("div",null,n.createElement(h.f,{rule:P,rulesSource:x,isViewMode:!1}),n.createElement("div",{className:S.wrapper},n.createElement("div",{className:S.leftSide},n.createElement(u,{rule:P}),!!P.labels&&!!Object.keys(P.labels).length&&n.createElement(c.C,{label:"Labels",horizontal:!0},n.createElement(g.s,{labels:P.labels})),n.createElement(v.C,{rulesSource:x,rule:P,annotations:M}),n.createElement(f.J,{annotations:M})),n.createElement("div",{className:S.rightSide},n.createElement(b.C,{rulesSource:x,rule:P}))),n.createElement(y.M,{rule:P,itemsDisplayLimit:E}))},u=({rule:P})=>{let S,x=P.group.interval,M=P.promRule?.lastEvaluation,R=P.promRule?.evaluationTime;return(0,l.yF)(P.rulerRule)||(S=P.rulerRule?.for),n.createElement(n.Fragment,null,x&&n.createElement(c.C,{label:"Evaluate",horizontal:!0},"Every ",x),S&&n.createElement(c.C,{label:"For",horizontal:!0},S),M&&!(0,a.gV)(M)&&n.createElement(c.C,{label:"Last evaluation",horizontal:!0},n.createElement(m.u,{placement:"top",content:`${(0,i.dq)(M,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info"},n.createElement("span",null,`${(0,s.CQ)(M).locale("en").fromNow(!0)} ago`))),M&&!(0,a.gV)(M)&&R!==void 0&&n.createElement(c.C,{label:"Evaluation time",horizontal:!0},n.createElement(m.u,{placement:"top",content:`${R}s`,theme:"info"},n.createElement("span",null,(0,d.q)({timeInMs:R*1e3,humanize:!0})))))},D=P=>({wrapper:(0,t.css)`
    display: flex;
    flex-direction: row;

    ${P.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,leftSide:(0,t.css)`
    flex: 1;
  `,rightSide:(0,t.css)`
    ${P.breakpoints.up("md")} {
      padding-left: 90px;
      width: 300px;
    }
  `})},8044:(j,I,e)=>{"use strict";e.d(I,{f:()=>Q});var t=e(42844),n=e(27702),i=e(7662),s=e(48154),r=e(78968),m=e(47494),d=e(34667),o=e(66310),l=e(66670),a=e(71585),g=e(64022),c=e(3613),h=e(73807),f=e(91368),b=e(62862),v=e(18771),y=e(18447),E=e(52646),C=e(99322),u=e(13741);const D=(0,n.lazy)(()=>e.e(9841).then(e.bind(e,79841))),P=(0,n.lazy)(()=>e.e(5179).then(e.bind(e,75179)));var S=(Z=>(Z.Loki="loki",Z.Annotations="annotations",Z))(S||{});function x(){const[Z,le]=(0,n.useState)(!1),[ce,q]=(0,n.useState)(),ne=(0,o.wW)(M),pe=d.config.unifiedAlerting.alertStateHistoryBackend,re=d.config.unifiedAlerting.alertStateHistoryPrimary,Se=[pe,re].some(we=>we==="loki")?"loki":"annotations",ye=(0,n.useCallback)(()=>{q(void 0),le(!1)},[]),Ce=(0,n.useCallback)(we=>{q(we),le(!0)},[]);return{StateHistoryModal:(0,n.useMemo)(()=>ce?n.createElement(u.u,{isOpen:Z,onDismiss:ye,closeOnBackdropClick:!0,closeOnEscape:!0,title:"State history",className:ne.modal,contentClassName:ne.modalContent},n.createElement(n.Suspense,{fallback:"Loading..."},Se==="loki"&&n.createElement(P,{ruleUID:ce.grafana_alert.uid}),Se==="annotations"&&n.createElement(D,{alertId:ce.grafana_alert.id??""}))):null,[ce,Z,ye,Se,ne]),showStateHistoryModal:Ce,hideStateHistoryModal:ye}}const M=Z=>({modal:(0,t.css)`
    width: 80%;
    height: 80%;
    min-width: 800px;
  `,modalContent:(0,t.css)`
    height: 100%;
    width: 100%;
    padding: ${Z.spacing(2)};
  `});var R=e(47702),O=e(2082),T=e(76658),U=e(33555),L=e(22513),V=e(39036),w=e(96437),K=e(22446),B=e(80011),W=e(76393),_=e(62401);const k=({children:Z,plugin:le,loadingComponent:ce,notInstalledFallback:q})=>{const{loading:ne,installed:pe}=usePluginBridge(le);return ne?ce??null:pe?React.createElement(React.Fragment,null,Z):q??null};function A(Z,le,ce){const q=new URLSearchParams(ce).toString();return`/a/${Z}${le}`+(q?"?"+q:"")}const z=({title:Z="",severity:le="",url:ce=""})=>{const q=A(_.W.Incident,"/incidents/declare",{title:Z,severity:le,url:ce}),{loading:ne,installed:pe,settings:re}=(0,W.n)(_.W.Incident);return n.createElement(n.Fragment,null,ne===!0&&n.createElement(l.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident"),pe===!1&&n.createElement(B.u,{content:"Grafana Incident is not installed or is not configured correctly"},n.createElement(l.zx,{icon:"fire",size:"sm",type:"button",disabled:!0},"Declare Incident")),re&&n.createElement(l.Qj,{icon:"fire",size:"sm",type:"button",href:q},"Declare Incident"))};var H=e(3764);const Q=({rule:Z,rulesSource:le,isViewMode:ce})=>{const q=(0,o.wW)(oe),{namespace:ne,group:pe,rulerRule:re}=Z,{StateHistoryModal:ie,showStateHistoryModal:Se}=x(),ye=(0,v.useDispatch)(),Ce=(0,i.TH)(),de=(0,h.iG)(),[we,_e]=(0,n.useState)(),Je=(0,L.HY)(le)?le:(0,T.Xy)(le.jsonData.alertmanagerUid)?.name,Ue=f.contextSrv.hasPermission(v.AccessControlAction.DataSourcesExplore),$e=[],Qe=[],tt=()=>{if(we&&we.rulerRule){const ft=w.Zk((0,L.EG)(we.namespace.rulesSource),we.namespace.name,we.group.name,we.rulerRule);ye((0,R.hS)(ft,{navigateTo:ce?"/alerting/list":void 0})),_e(void 0)}},lt=(0,K.Jq)(pe),Me=(0,L.EG)(le),De=(0,K.Pc)(Z.rulerRule)&&!!Z.rulerRule.grafana_alert.provenance,We=(0,K.x_)(Z.promRule)&&Z.promRule.state===y.x_.Firing,qe=(0,O.Bz)(Me),st=f.contextSrv.hasPermission(qe.create),{isEditable:dt,isRemovable:Tt}=(0,C.M)(Me,re),Nt=te(Z),Bt=()=>(0,V.t6)(le,Z),yt=Ce.pathname+Ce.search;if((0,L.jq)(le)&&Ue&&!lt&&$e.push(n.createElement(l.Qj,{size:"sm",key:"explore",variant:"primary",icon:"chart-line",target:"__blank",href:(0,V.mH)(le.name,Z.query)},"See graph")),Z.annotations[U.q6.runbookURL]&&$e.push(n.createElement(l.Qj,{size:"sm",key:"runbook",variant:"primary",icon:"book",target:"__blank",href:s.QX.sanitizeUrl(Z.annotations[U.q6.runbookURL])},"View runbook")),Z.annotations[U.q6.dashboardUID]){const ft=Z.annotations[U.q6.dashboardUID];if(ft){$e.push(n.createElement(l.Qj,{size:"sm",key:"dashboard",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(ft)}`},"Go to dashboard"));const ct=Z.annotations[U.q6.panelID];ct&&$e.push(n.createElement(l.Qj,{size:"sm",key:"panel",variant:"primary",icon:"apps",target:"__blank",href:`d/${encodeURIComponent(ft)}?viewPanel=${encodeURIComponent(ct)}`},"Go to panel"))}}if(Nt&&Je&&$e.push(n.createElement(l.Qj,{size:"sm",key:"silence",icon:"bell-slash",target:"__blank",href:(0,V.Vv)(Je,Z)},"Silence")),(0,K.Pc)(Z.rulerRule)&&$e.push(n.createElement(n.Fragment,{key:"history"},n.createElement(l.zx,{size:"sm",icon:"history",onClick:()=>(0,K.Pc)(Z.rulerRule)&&Se(Z.rulerRule)},"Show state history"),ie)),We&&X()&&$e.push(n.createElement(n.Fragment,{key:"declare-incident"},n.createElement(z,{title:Z.name,url:Bt()}))),ce&&re){const ft=(0,L.EG)(le),ct=w.Zk(ft,ne.name,pe.name,re);if(dt&&!lt&&(Qe.push(n.createElement(a.m,{key:"copy",icon:"copy",onClipboardError:ge=>{de.error("Error while copying URL",ge)},size:"sm",getText:Bt},"Copy link to rule")),!De)){const ge=r.Cj.renderUrl(`${d.config.appSubUrl}/alerting/${encodeURIComponent(w.$V(ct))}/edit`,{returnTo:yt});Qe.push(n.createElement(l.Qj,{size:"sm",key:"edit",variant:"secondary",icon:"pen",href:ge},"Edit"))}st&&!lt&&Qe.push(n.createElement(H.E,{key:"clone",text:"Copy",ruleIdentifier:ct,isProvisioned:De})),Tt&&!lt&&!De&&Qe.push(n.createElement(l.zx,{size:"sm",type:"button",key:"delete",variant:"secondary",icon:"trash-alt",onClick:()=>_e(Z)},"Delete"))}return $e.length||Qe.length?n.createElement(n.Fragment,null,n.createElement("div",{className:q.wrapper},n.createElement(g.Lh,{width:"auto"},$e.length?$e:n.createElement("div",null)),n.createElement(g.Lh,{width:"auto"},Qe.length?Qe:n.createElement("div",null))),!!we&&n.createElement(c.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:tt,onDismiss:()=>_e(void 0)})):null};function X(){const Z=d.config.buildInfo,le=Z.edition===m.e.OpenSource,ce=Z.env==="development";return!le||ce}function te(Z){const le=(0,K.Pc)(Z.rulerRule),{useGetAlertmanagerChoiceStatusQuery:ce}=E.alertmanagerApi,{currentData:q,isLoading:ne}=ce(void 0,{skip:!le});if(!le||ne)return!1;const pe=f.contextSrv.hasAccess(v.AccessControlAction.AlertingInstanceCreate,f.contextSrv.isEditor),re=q?.alertmanagersChoice===b.TE.External,ie=q?.alertmanagersChoice===b.TE.All;return pe&&(!re||ie)}const oe=Z=>({wrapper:(0,t.css)`
    padding: ${Z.spacing(2)} 0;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;
    border-bottom: solid 1px ${Z.colors.border.medium};
  `})},28542:(j,I,e)=>{"use strict";e.d(I,{J:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(95438),r=e(73104);function m(o){const l=(0,i.wW)(d),{annotations:a}=o,g=(0,s.XW)(a);return a.length===0?null:n.createElement("div",{className:l.annotations},a.map(([c,h])=>n.createElement(r.a,{key:c,annotationKey:c,value:h,valueLink:g.get(c)})))}const d=()=>({annotations:(0,t.css)`
    margin-top: 46px;
  `})},673:(j,I,e)=>{"use strict";e.d(I,{C:()=>l});var t=e(42844),n=e(27702),i=e(10864),s=e(66310),r=e(65946),m=e(22513),d=e(22446),o=e(1333);function l(g){const{rulesSource:c,rule:h}=g,f=(0,s.wW)(a),b=(0,n.useMemo)(()=>{if((0,m.jq)(c))return[{name:c.name,icon:c.meta.info.logos.small}];if((0,d.Pc)(h.rulerRule)){const{data:v}=h.rulerRule.grafana_alert,y=v.reduce((E,C)=>{const u=(0,i.F)().getInstanceSettings(C.datasourceUid);return!u||u.uid===r.Yq||(E[u.name]={name:u.name,icon:u.meta.info.logos.small}),E},{});return Object.values(y)}return[]},[h,c]);return b.length===0?null:n.createElement(o.C,{label:"Data source"},b.map(({name:v,icon:y},E)=>n.createElement("div",{key:v},y&&n.createElement(n.Fragment,null,n.createElement("img",{alt:`${v} datasource logo`,className:f.dataSourceIcon,src:y})," "),v)))}function a(g){const c=g.spacing(2);return{dataSourceIcon:(0,t.css)`
      width: ${c};
      height: ${c};
    `}}},13932:(j,I,e)=>{"use strict";e.d(I,{C:()=>v});var t=e(42844),n=e(27702),i=e(22513),s=e(1333),r=e(6570),m=e(73817),d=e(54916),o=e(80553),l=e(66310),a=e(62434),g=e(60692),c=e(49325);const h=({language:E,expr:C})=>{const u=(0,n.useMemo)(()=>[(0,d.Z)({onlyIn:P=>P.type==="code_block",getSyntax:()=>E},{...r.languages,[E]:E==="logql"?a.ZP:g.ZP})],[E]),D=(0,n.useMemo)(()=>(0,o.l1)(C),[C]);return n.createElement(m.ML,{"data-testid":"expression-editor",plugins:u,value:D})},f=({expression:E,rulesSource:C})=>{const u=(0,l.wW)(b);return n.createElement(c.t,{className:(0,t.cx)(u.well,"slate-query-field")},(0,i.jq)(C)?n.createElement(h,{expr:E,language:C.type===i.ye.Loki?"logql":"promql"}):E)},b=E=>({well:(0,t.css)`
    font-family: ${E.typography.fontFamilyMonospace};
  `});function v(E){const{annotations:C,rulesSource:u,rule:D}=E,P=y();return(0,i.jq)(u)?n.createElement(s.C,{label:"Expression",horizontal:!0,className:(0,t.cx)({[P.exprRow]:!!C.length})},n.createElement(f,{expression:D.query,rulesSource:u})):null}const y=()=>({exprRow:(0,t.css)`
    margin-bottom: 46px;
  `})},33468:(j,I,e)=>{"use strict";e.d(I,{M:()=>S});var t=e(42844),n=e(89949),i=e(27702),s=e(7662),r=e(66310),m=e(66670),d=e(71444),o=e(65333),l=e(79978),a=e(40705),g=e(18447);const c=({className:R,onStateFilterChange:O,stateFilter:T,filterType:U,itemPerStateStats:L})=>{const V=(0,r.wW)(h),w=k=>function(){return L&&L[k]?i.createElement(o.V,{name:L[k].toFixed(0),colorIndex:9,className:V.tag}):null},K=Object.values(g.bj).map(k=>({label:k,value:k,component:w(k)})),W=[g.x_.Firing,g.x_.Pending].map(k=>({label:(0,n.capitalize)(k),value:k,component:w(k)})),_=U==="grafana"?K:W;return i.createElement("div",{className:R,"data-testid":"alert-instance-state-filter"},i.createElement(l._,null,"State"),i.createElement(a.S,{options:_,value:T,onChange:O,onClick:k=>{k===T&&O(void 0)}}))};function h(R){return{tag:(0,t.css)`
      font-size: 11px;
      font-weight: normal;
      padding: ${R.spacing(.25,.5)};
      vertical-align: middle;
      margin-left: ${R.spacing(.5)};
    `}}var f=e(76658),b=e(39036),v=e(57183),y=e(22513),E=e(22446),C=e(1333),u=e(61404),D=e(94696);function P(R){const O=(0,r.wW)(M),{onClick:T,stats:U}=R;return i.createElement("div",{className:O.footerRow},i.createElement("div",null,"Showing ",U.visibleItemsCount," out of ",U.totalItemsCount," instances"),i.createElement(m.zx,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:T},"Show all ",U.totalItemsCount," alert instances"))}function S(R){const O=(0,s.k6)(),{rule:{promRule:T,namespace:U,instanceTotals:L},itemsDisplayLimit:V=Number.POSITIVE_INFINITY,pagination:w,enableFiltering:K=!1}=R,[B,W]=(0,i.useState)(),[_,k]=(0,i.useState)(),[A]=(0,i.useState)(Math.floor(Math.random()*100)),z=`queryString-${A}`,H=(0,r.wW)(M),Q=(0,y.HY)(U.rulesSource)?y.GC:"prometheus",X=(0,i.useMemo)(()=>(0,E.x_)(T)&&T.alerts?.length?x(B,_,(0,b.Zl)(v.As.Importance,T.alerts)):[],[T,_,B]);if(!(0,E.x_)(T))return null;const te=X.slice(0,V),oe=(0,n.countBy)(T.alerts,ye=>(0,g.ED)(ye.state)),Z=(0,n.sum)(Object.values(L)),le=Z-te.length,ce={totalItemsCount:Z,visibleItemsCount:te.length},q=(0,b.V2)(U.rulesSource,R.rule,location.pathname+location.search),ne=(0,D.r0)(L),ie=K?()=>k(void 0):()=>O.push(q),Se=le?i.createElement(P,{stats:ce,onClick:ie}):void 0;return i.createElement(C.C,{label:"Matching instances",horizontal:!0},K&&i.createElement("div",{className:(0,t.cx)(H.flexRow,H.spaceBetween)},i.createElement("div",{className:H.flexRow},i.createElement(d.F,{className:H.rowChild,key:z,defaultQueryString:B,onFilterChange:ye=>W(ye)}),i.createElement(c,{className:H.rowChild,filterType:Q,stateFilter:_,onStateFilterChange:k,itemPerStateStats:oe}))),!K&&i.createElement("div",{className:H.stats},ne),i.createElement(u.o,{instances:te,pagination:w,footerRow:Se}))}function x(R,O,T){let U=[...T];if(R){const L=(0,f.Zh)(R||"");U=U.filter(({labels:V})=>(0,f.eD)(V,L))}return O&&(U=U.filter(L=>(0,g.ED)(L.state)===O)),U}const M=R=>({flexRow:(0,t.css)`
      display: flex;
      flex-direction: row;
      align-items: flex-end;
      width: 100%;
      flex-wrap: wrap;
      margin-bottom: ${R.spacing(1)};
    `,spaceBetween:(0,t.css)`
      justify-content: space-between;
    `,rowChild:(0,t.css)`
      margin-right: ${R.spacing(1)};
    `,footerRow:(0,t.css)`
      display: flex;
      flex-direction: column;
      gap: ${R.spacing(1)};
      justify-content: space-between;
      align-items: center;
      width: 100%;
    `,instancesContainer:(0,t.css)`
      margin-bottom: ${R.spacing(2)};
    `,stats:(0,t.css)`
      display: flex;
      gap: ${R.spacing(1)};
      padding: ${R.spacing(1,0)};
    `})},94696:(j,I,e)=>{"use strict";e.d(I,{Pb:()=>c,WN:()=>g,r0:()=>h});var t=e(89949),n=e.n(t),i=e(6772),s=e.n(i),r=e(27702),m=e(23852),d=e(25357),o=e(68093),l=e(18447);const a={recording:0,alerting:0,[l.x_.Pending]:0,[l.x_.Inactive]:0,paused:0,error:0,nodata:0},g=({namespaces:f})=>{const b={...a};f.forEach(({groups:C})=>{C.forEach(u=>{const D=(0,t.omitBy)(u.totals,t.isUndefined);for(let P in D)b[P]+=D[P]})});const v=h(b),y=!!v.length,E=(0,t.sum)(Object.values(b));return v.unshift(r.createElement(r.Fragment,{key:"total"},E," ",s()("rule",E))),r.createElement(m.K,{direction:"row"},y&&r.createElement("div",null,r.createElement(m.K,{gap:.5},v)))},c=({group:f})=>{const b=f.totals,v=f?.interval,y=h(b),E=!!y.length;return r.createElement(m.K,{direction:"row"},E&&r.createElement("div",null,r.createElement(m.K,{gap:.5},y)),v&&r.createElement(r.Fragment,null,r.createElement("div",null,"|"),r.createElement(d.C,{text:v,icon:"clock-nine",color:"blue"})))};function h(f){const b=[];return f[o.P.Alerting]&&b.push(r.createElement(d.C,{color:"red",key:"firing",text:`${f[o.P.Alerting]} firing`})),f.error&&b.push(r.createElement(d.C,{color:"red",key:"errors",text:`${f.error} errors`})),f.nodata&&b.push(r.createElement(d.C,{color:"blue",key:"nodata",text:`${f.nodata} no data`})),f[o.P.Pending]&&b.push(r.createElement(d.C,{color:"orange",key:"pending",text:`${f[o.P.Pending]} pending`})),f[o.P.Normal]&&f.paused&&b.push(r.createElement(d.C,{color:"green",key:"paused",text:`${f[o.P.Normal]} normal (${f.paused} paused)`})),f[o.P.Normal]&&!f.paused&&b.push(r.createElement(d.C,{color:"green",key:"inactive",text:`${f[o.P.Normal]} normal`})),f.recording&&b.push(r.createElement(d.C,{color:"purple",key:"recording",text:`${f.recording} recording`})),b}},52467:(j,I,e)=>{"use strict";e.d(I,{DD:()=>v,Fm:()=>f,Kd:()=>a,ZP:()=>b,Zo:()=>l});var t=e(89949),n=e.n(t),i=e(27702),s=e(68093),r=e(18447),m=e(22513),d=e(22446),o=e(10027);function l(S,x){const M=(0,o._)(U=>U.promRules),R=(0,o._)(U=>U.rulerRules),O=(0,i.useRef)({}),T=(0,i.useMemo)(()=>{if(S){const U=(0,m.o_)(S);if(!U)throw new Error(`Unknown rules source: ${S}`);return[U]}return(0,m.h_)()},[S]);return(0,i.useMemo)(()=>T.map(U=>{const L=(0,m.jq)(U)?U.name:U,V=R[L]?.result;let w=M[L]?.result;L===m.GC&&x&&(w=x);const K=O.current[L];if(K&&K.promRules===w&&K.rulerRules===V)return K.result;const B={};Object.entries(V||{}).forEach(([_,k])=>{const A={rulesSource:U,name:_,groups:[]};B[_]=A,c(A,k)}),w?.forEach(({name:_,groups:k})=>{const A=B[_]=B[_]||{rulesSource:U,name:_,groups:[]};h(A,k)});const W=Object.values(B);return O.current[L]={promRules:w,rulerRules:V,result:W},W}).flat(),[M,R,T,x])}function a(S){return S.map(x=>{const M={...x,groups:[]};return M.groups.push({name:"default",rules:g(x.groups.flatMap(R=>R.rules)),totals:y(x.groups)}),M})}function g(S){return S.sort((x,M)=>x.name.localeCompare(M.name))}function c(S,x=[]){S.groups=x.map(M=>{const R=M.rules.filter(U=>(0,d.yF)(U)).length,O=M.rules.filter(U=>(0,d.Pc)(U)&&U.grafana_alert.is_paused).length,T={name:M.name,interval:M.interval,source_tenants:M.source_tenants,rules:[],totals:{paused:O,recording:R}};return T.rules=M.rules.map(U=>C(U,S,T)),T})}function h(S,x){const M=new Map;S.groups.forEach(R=>M.set(R.name,R)),x.forEach(R=>{let O=M.get(R.name);O||(O={name:R.name,rules:[],totals:v(R)},S.groups.push(O),M.set(R.name,O)),O.totals={...O.totals,...v(R)};const T=new Map;O.rules.forEach(U=>{const L=T.get(U.name);L?L.push(U):T.set(U.name,[U])}),(R.rules??[]).forEach(U=>{const L=u(U,T,S.rulesSource);L?(L.promRule=U,L.instanceTotals=(0,d.x_)(U)?f(U):{},L.filteredInstanceTotals=(0,d.x_)(U)?b(U):{}):O.rules.push(E(U,S,O))})})}function f(S){const x=(0,t.countBy)(S.alerts,"state");if(S.totals){const{normal:M,...R}=S.totals;return{...R,inactive:M}}return{alerting:x[s.P.Alerting],pending:x[s.P.Pending],inactive:x[s.P.Normal],nodata:x[s.P.NoData],error:x[s.P.Error]+x.err}}function b(S){if(S.totalsFiltered){const{normal:x,...M}=S.totalsFiltered;return{...M,inactive:x}}return{}}function v(S){if(S.totals){const{firing:O,...T}=S.totals;return{...T,alerting:O}}const x=(0,t.countBy)(S.rules,O=>(0,d.x_)(O)&&O.state),M=(0,t.countBy)(S.rules,O=>O.health),R=S.rules.filter(O=>(0,d.OP)(O)).length;return{alerting:x[r.x_.Firing],error:M.error,nodata:M.nodata,inactive:x[r.x_.Inactive],pending:x[r.x_.Pending],recording:R}}function y(S){const x={};return S.forEach(M=>{const R=M.totals;Object.entries(R).forEach(([O,T])=>{x[O]||(x[O]=0),x[O]+=T})}),x}function E(S,x,M){return{name:S.name,query:S.query,labels:S.labels||{},annotations:(0,d.x_)(S)?S.annotations||{}:{},promRule:S,namespace:x,group:M,instanceTotals:(0,d.x_)(S)?f(S):{},filteredInstanceTotals:(0,d.x_)(S)?b(S):{}}}function C(S,x,M){return(0,d.cG)(S)?{name:S.alert,query:S.expr,labels:S.labels||{},annotations:S.annotations||{},rulerRule:S,namespace:x,group:M,instanceTotals:{},filteredInstanceTotals:{}}:(0,d.yF)(S)?{name:S.record,query:S.expr,labels:S.labels||{},annotations:{},rulerRule:S,namespace:x,group:M,instanceTotals:{},filteredInstanceTotals:{}}:{name:S.grafana_alert.title,query:"",labels:S.labels||{},annotations:S.annotations||{},rulerRule:S,namespace:x,group:M,instanceTotals:{},filteredInstanceTotals:{}}}function u(S,x,M){const R=x.get(S.name);if(!R)return;if((0,m.HY)(M))return R[0];const O=R.find(U=>!U.promRule&&D(U,S,!0));if(O)return O;const T=R.find(U=>!U.promRule&&D(U,S,!1));if(T)return T}function D(S,x,M=!0){return S.name===x.name?(0,t.isEqual)([M?P(S.query):"",S.labels,S.annotations],[M?P(x.query):"",x.labels||{},(0,d.x_)(x)?x.annotations||{}:{}]):!1}function P(S){return S.length>1&&S[0]==="("&&S[S.length-1]===")"&&(S=S.slice(1,-1)),S=S.replace(/\s|\n/g,""),S.split("").sort().join("")}},80171:(j,I,e)=>{"use strict";e.d(I,{W:()=>m});var t=e(27702),n=e(18771),i=e(47702),s=e(84369),r=e(10027);function m(d){const o=(0,n.useDispatch)(),l=(0,r._)(a=>a.folders);if((0,t.useEffect)(()=>{d&&o((0,i.sw)(d))},[o,d]),d){const a=l[d]||s.oq;return{folder:a.result,loading:a.loading}}return{loading:!1}}},99322:(j,I,e)=>{"use strict";e.d(I,{M:()=>m});var t=e(91368),n=e(2082),i=e(22446),s=e(80171),r=e(10027);function m(d,o){const l=(0,r._)(y=>y.dataSources),a=o&&(0,i.Pc)(o)?o.grafana_alert.namespace_uid:void 0,g=(0,n.Bz)(d),{folder:c,loading:h}=(0,s.W)(a);if(!o)return{isEditable:!1,isRemovable:!1,loading:!1};if((0,i.Pc)(o)){if(!a)throw new Error(`Rule ${o.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!c)return{isEditable:!1,isRemovable:!1,loading:h};const y=c.canSave,E=t.contextSrv.hasAccessInMetadata(g.update,c,y),C=t.contextSrv.hasAccessInMetadata(g.delete,c,y);return{isEditable:E,isRemovable:C,loading:h}}const f=!!l[d]?.result?.rulerConfig,b=t.contextSrv.hasAccess(g.update,t.contextSrv.isEditor),v=t.contextSrv.hasAccess(g.delete,t.contextSrv.isEditor);return{isEditable:b&&f,isRemovable:v&&f,loading:l[d]?.loading}}},92367:(j,I,e)=>{"use strict";e.d(I,{h:()=>s});var t=e(89949),n=e.n(t),i=e(27702);function s(r,m=1,d){const[o,l]=(0,i.useState)(m),a=(0,i.useMemo)(()=>(0,t.chunk)(r,d),[r,d]),g=a.length,c=a[o-1]??[],h=(o-1)*d+1,f=(0,t.clamp)(o*d,r.length),b=(0,i.useCallback)(E=>{l((0,t.clamp)(E,1,a.length))},[l,a]),v=(0,i.useCallback)(()=>b(o+1),[o,b]),y=(0,i.useCallback)(()=>b(o-1),[o,b]);return(0,i.useEffect)(()=>l(1),[g]),{page:o,onPageChange:b,numberOfPages:g,pageItems:c,pageStart:h,pageEnd:f,nextPage:v,previousPage:y}}},76393:(j,I,e)=>{"use strict";e.d(I,{n:()=>i});var t=e(25111),n=e(67821);function i(s){const{loading:r,error:m,value:d}=(0,t.Z)(()=>(0,n.a)(s,{showErrorAlert:!1})),o=d&&!m&&!r,l=d?.enabled;return r&&!d?{loading:!0}:!o||!l?{loading:!1,installed:!1}:{loading:r,installed:!0,settings:d}}},10027:(j,I,e)=>{"use strict";e.d(I,{_:()=>n});var t=e(18771);function n(i,s){return(0,t.useSelector)(r=>i(r.unifiedAlerting),s)}},41028:(j,I,e)=>{"use strict";e.d(I,{VG:()=>W,HY:()=>k,ug:()=>_});var t=e(18447),n=e(22446);const i=1,s=2,r=3,m=4,d=5,o=6,l=7,a=8,g=9,c=10,h=11,f=12,b=0,v=1,y=2,E=3,C=4,u=5,D=6,P=7;var S=e(89949),x=e(55859);const M=x.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),R={[r]:"datasource",[d]:"namespace",[o]:"label",[a]:"rule",[l]:"group",[g]:"state",[c]:"type",[h]:"health"};var O=(z=>(z.dataSource="dataSourceFilter",z.nameSpace="nameSpaceFilter",z.label="labelFilter",z.group="groupFilter",z.rule="ruleFilter",z.state="stateFilter",z.type="typeFilter",z.health="healthFilter",z))(O||{});function T(z,H,Q){w(z,H,X=>{if(X.type.id===s){const te=U(z,X);if(te.type&&te.value){const oe=Q[te.type];oe&&oe(te.value)}}else if(X.type.id===f){const te=Q[f];te&&te(L(z,X))}})}function U(z,H){if(H.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const Q=H.firstChild;if(!Q)return{type:void 0,value:void 0};const X=H.getChild(m),te=X?(0,S.trim)(L(z,X),'"'):void 0;return{type:Q.type.id,value:te}}function L(z,H){return z.slice(H.from,H.to).trim().replace(/\"/g,"")}function V(z,H,Q){const X=[];w(z,H,oe=>{oe.type.id===s&&oe.firstChild&&X.push(oe.firstChild),oe.type.id===f&&X.push(oe)});let te=[];return X.forEach(oe=>{const Z=Q.findIndex(le=>le.type===oe.type.id);if(Z!==-1){if(oe.parent?.type.is(s)){const le=R[oe.type.id],ce=Q.splice(Z,1)[0];te.push(`${le}:${K(ce.value)}`)}if(oe.type.is(f)){const le=Q.splice(Z,1)[0];te.push(le.value)}}}),Q.forEach(oe=>{oe.type===f?te.push(oe.value):te.push(`${R[oe.type]}:${K(oe.value)}`)}),te.join(" ")}function w(z,H,Q){const X=H.join(" ");let oe=M.configure({dialect:X}).parse(z).cursor();do Q(oe.node);while(oe.next())}function K(z){return/\s/.test(z)?`"${z}"`:z}const B=[O.dataSource,O.nameSpace,O.label,O.group,O.rule,O.state,O.type,O.health];var W=(z=>(z.Ok="ok",z.Error="error",z.NoData="nodata",z.Unknown="unknown",z))(W||{});function _(z){const H={labels:[],freeFormWords:[],dataSourceNames:[]},Q={[r]:X=>H.dataSourceNames.push(X),[d]:X=>H.namespace=X,[l]:X=>H.groupName=X,[a]:X=>H.ruleName=X,[o]:X=>H.labels.push(X),[g]:X=>H.ruleState=A(X),[c]:X=>(0,n.Wd)(X)?H.ruleType=X:void 0,[h]:X=>H.ruleHealth=(0,n.vU)(X),[f]:X=>H.freeFormWords.push(X)};return T(z,B,Q),H}function k(z,H){const Q=[];return H.dataSourceNames&&Q.push(...H.dataSourceNames.map(X=>({type:r,value:X}))),H.namespace&&Q.push({type:d,value:H.namespace}),H.groupName&&Q.push({type:l,value:H.groupName}),H.ruleName&&Q.push({type:a,value:H.ruleName}),H.ruleState&&Q.push({type:g,value:H.ruleState}),H.ruleType&&Q.push({type:c,value:H.ruleType}),H.ruleHealth&&Q.push({type:h,value:H.ruleHealth}),H.labels&&Q.push(...H.labels.map(X=>({type:o,value:X}))),H.freeFormWords&&Q.push(...H.freeFormWords.map(X=>({type:f,value:X}))),V(z,B,Q)}function A(z){if(z==="normal")return t.x_.Inactive;if((0,t.I9)(z))return z}},47702:(j,I,e)=>{"use strict";e.d(I,{QY:()=>ne,Nc:()=>Ce,r0:()=>de,X4:()=>pe,hS:()=>X,oE:()=>Q,S6:()=>re,yO:()=>q,mS:()=>ye,ei:()=>A,dV:()=>_,lB:()=>z,dB:()=>ce,on:()=>H,zy:()=>L,wE:()=>V,vL:()=>ie,sw:()=>Se,Ms:()=>Z,Vj:()=>oe,dn:()=>K,y6:()=>U,UR:()=>w,IA:()=>W,nw:()=>k,je:()=>B,iH:()=>_e,wy:()=>te,D8:()=>we,mM:()=>le,hv:()=>Je,tg:()=>Ue});var t=e(34099),n=e(89949),i=e(26129),s=e(18447),r=e(45937),m=e(28722),d=e(58803),o=e(52646),l=e(73289);function a(Qe){return(0,l.i)().get("/api/annotations",{alertId:Qe}).then(tt=>tt?.sort(g))}function g(Qe,tt){const lt=(We,qe)=>We>qe?-1:qe>We?1:0,Me=lt(Qe.timeEnd,tt.timeEnd);if(Me)return Me;const De=lt(Qe.time,tt.time);return De||lt(Qe.id,tt.id)}var c=e(55394),h=e(8014),f=e(21961),b=e(92089),v=e(72821),y=e(76658),E=e(22513),C=e(39036),u=e(84369),D=e(96437),P=e(85184),S=e(22446);function x(Qe){const tt=async dt=>{if((0,S.Kl)(dt)){const Tt=await(0,b.m6)(Qe);for(const[Nt,Bt]of Object.entries(Tt))for(const yt of Bt){const ft=yt.rules.find(ct=>(0,S.Pc)(ct)&&ct.grafana_alert?.uid===dt.uid);if(ft)return{group:yt,ruleSourceName:E.GC,namespace:Nt,rule:ft}}}if((0,S.E4)(dt)){const{ruleSourceName:Tt,namespace:Nt,groupName:Bt}=dt,yt=await(0,b.jJ)(Qe,Nt,Bt);if(!yt)return null;const ft=yt.rules.find(ct=>{const ge=D.Zk(Tt,Nt,yt.name,ct);return D.Dg(ge,dt)});return ft?{group:yt,ruleSourceName:Tt,namespace:Nt,rule:ft}:null}if((0,S.qE)(dt))throw new Error("Native prometheus rules can not be edited in grafana.");return null},lt=async dt=>{const{namespace:Tt,group:Nt,rule:Bt}=dt;if(Nt.rules.length===1){await(0,b.BC)(Qe,Tt,Nt.name);return}await(0,b.P4)(Qe,Tt,{...Nt,rules:Nt.rules.filter(yt=>yt!==Bt)})},Me=async(dt,Tt,Nt)=>{const{dataSourceName:Bt,group:yt,namespace:ft}=dt,ct=(0,P.yh)(dt);if(Bt&&yt&&ft){if(Nt){const Le=await tt(D.CK(Nt));if(!Le)throw new Error("Rule not found.");if(Le.namespace!==ft||Le.group.name!==yt)await lt(Le);else{const he={...Le.group,rules:Le.group.rules.map(He=>He===Le.rule?ct:He),evaluateEvery:Tt};return await(0,b.P4)(Qe,ft,he),D.Zk(Bt,ft,yt,ct)}}const ge=await(0,b.jJ)(Qe,ft,yt),Be=ge?{...ge,rules:[...ge.rules,ct]}:{name:yt,rules:[ct]};return await(0,b.P4)(Qe,ft,Be),D.Zk(Bt,ft,yt,ct)}else throw new Error("Data source and location must be specified")},De=async(dt,Tt,Nt)=>{const{folder:Bt,group:yt}=dt;if(!Bt)throw new Error("Folder must be specified");const ft=(0,P.mI)(dt),ct=Bt.title,ge={name:yt,interval:Tt};if(!Nt)return We(ct,ge,ft);const Be=await tt(D.CK(Nt));if(!Be)throw new Error("Rule not found.");const Le=Be.namespace===ct,he=Be.group.name===dt.group;return Le&&he?st(Be,ft,Tt):qe(ct,ge,Be,ft)},We=async(dt,Tt,Nt)=>{const Bt=await(0,b.jJ)(Qe,dt,Tt.name);if(!Bt)throw new Error(`No group found with name "${Tt.name}"`);const yt={name:Tt.name,interval:Tt.interval,rules:(Bt.rules??[]).concat(Nt)};return await(0,b.P4)(Qe,dt,yt),{uid:Nt.grafana_alert.uid??"",ruleSourceName:E.GC}},qe=async(dt,Tt,Nt,Bt)=>(M(Nt,Bt),await We(dt,Tt,Bt)),st=async(dt,Tt,Nt)=>{M(dt,Tt);const Bt=dt.group.rules.map(yt=>(0,S.Pc)(yt)&&yt.grafana_alert.uid===dt.rule.grafana_alert.uid?Tt:yt);return await(0,b.P4)(Qe,dt.namespace,{name:dt.group.name,interval:Nt,rules:Bt}),{uid:dt.rule.grafana_alert.uid,ruleSourceName:E.GC}};return{findEditableRule:tt,deleteRule:lt,saveLotexRule:Me,saveGrafanaRule:De}}function M(Qe,tt){if(!(0,S.Pc)(Qe.rule))throw new Error("The rule is not a Grafana managed rule");const lt=Qe.rule.grafana_alert.uid;tt.grafana_alert.uid=lt}var R=e(447);function O(Qe,tt){const Me=Qe().unifiedAlerting.dataSources[tt]?.result;if(!Me)throw new Error(`Data source configuration is not available for "${tt}" data source`);return Me}function T(Qe,tt){const lt=O(Qe,tt);if(!lt.rulerConfig)throw new Error(`Ruler API is not available for ${tt}`);return lt.rulerConfig}const U=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:Qe,filter:tt,limitAlerts:lt,matcher:Me,state:De,identifier:We},qe)=>{await qe.dispatch(k({rulesSourceName:Qe}));const st=(0,m.pM)(f.j,`[${Qe}] Prometheus rules loaded`,{dataSourceName:Qe,thunk:"unifiedalerting/fetchPromRules"});return await(0,u.$b)(st(Qe,tt,lt,Me,De,We))}),L=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,u.$b)((0,d.$l)())),V=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,u.$b)((0,d.Zo)())),w=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:Qe,filter:tt},{dispatch:lt,getState:Me})=>{await lt(k({rulesSourceName:Qe}));const De=T(Me,Qe),We=(0,m.pM)(b.m6,`[${Qe}] Ruler rules loaded`,{dataSourceName:Qe,thunk:"unifiedalerting/fetchRulerRules"});return await(0,u.$b)(We(De,tt))});function K({rulesSourceName:Qe,identifier:tt,filter:lt,limitAlerts:Me,matcher:De,state:We}){return async(qe,st)=>{await qe(k({rulesSourceName:Qe}));const dt=O(st,Qe);await qe(U({rulesSourceName:Qe,identifier:tt,filter:lt,limitAlerts:Me,matcher:De,state:We})),dt.rulerConfig&&await qe(w({rulesSourceName:Qe}))}}const B=(0,t.hg)("unifiedalerting/fetchSilences",Qe=>{const tt=(0,m.pM)(d.U7,`[${Qe}] Silences loaded`,{dataSourceName:Qe,thunk:"unifiedalerting/fetchSilences"});return(0,u.$b)(tt(Qe))});function W(Qe){return(tt,lt)=>{const{rulerRules:Me}=lt().unifiedAlerting,De=Me[Qe];(0,n.isEmpty)(De?.result)&&!(De&&(0,S.m$)(De))&&!De?.loading&&tt(w({rulesSourceName:Qe}))}}function _(){return async Qe=>{const tt=(0,E.mA)().map(lt=>Qe(k({rulesSourceName:lt})));await Promise.allSettled(tt)}}const k=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:Qe})=>(0,u.$b)((async()=>{if(Qe===E.GC)return{name:E.GC,id:E.GC,rulerConfig:{dataSourceName:E.GC,apiVersion:"legacy"}};const tt=(0,E.VX)(Qe);if(!tt)throw new Error(`Missing data source configuration for ${Qe}`);const{id:lt,name:Me}=tt,We=await(0,m.pM)(c.C$,`[${Qe}] Rules source features discovered`,{dataSourceName:Qe,thunk:"unifiedalerting/fetchPromBuildinfo"})(Me),qe=We.features.rulerApiEnabled?{dataSourceName:Me,apiVersion:We.application===s.T8.Cortex?"legacy":"config"}:void 0;return{name:Me,id:lt,rulerConfig:qe}})()),{condition:({rulesSourceName:Qe},{getState:tt})=>{const lt=tt().unifiedAlerting.dataSources,Me=!!lt[Qe]?.result,De=!!lt[Qe]?.error;return!(Me||De)}});function A(Qe=!1,tt={}){return async(lt,Me)=>{const De=performance.now();await Promise.allSettled((0,E.mA)().map(async We=>{await lt(k({rulesSourceName:We}));const{promRules:qe,rulerRules:st,dataSources:dt}=Me().unifiedAlerting,Tt=dt[We].result;if(!Tt)return;const Nt=Qe||!qe[We]?.loading,Bt=(Qe||!st[We]?.loading)&&!!Tt.rulerConfig;await Promise.allSettled([Nt&&lt(U({rulesSourceName:We,...tt})),Bt&&lt(w({rulesSourceName:We}))])})),(0,m.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-De).toFixed(0)})}}function z(Qe=!1){return async(tt,lt)=>{const{promRules:Me}=lt().unifiedAlerting;(0,E.mA)().map(De=>{(Qe||!Me[De]?.loading)&&tt(U({rulesSourceName:De}))})}}const H=(0,t.hg)("unifiedalerting/fetchEditableRule",(Qe,tt)=>{const lt=T(tt.getState,Qe.ruleSourceName);return(0,u.$b)(x(lt).findEditableRule(Qe))});function Q(Qe,tt){return async(lt,Me)=>{(0,u.Ez)((async()=>{const De=(0,E.EG)(Qe.rulesSource),We=T(Me,De);await(0,b.BC)(We,Qe.name,tt.name),await lt(K({rulesSourceName:De}))})(),{successMessage:"Group deleted"})}}function X(Qe,tt={}){return async(lt,Me)=>{(0,u.Ez)((async()=>{const De=T(Me,Qe.ruleSourceName),We=x(De),qe=await We.findEditableRule(Qe);if(!qe)throw new Error("Rule not found.");await We.deleteRule(qe),await lt(K({rulesSourceName:qe.ruleSourceName})),tt.navigateTo&&i.E1.replace(tt.navigateTo)})(),{successMessage:"Rule deleted."})}}const te=(0,t.hg)("unifiedalerting/saveRuleForm",({values:Qe,existing:tt,redirectOnSave:lt,evaluateEvery:Me},De)=>(0,u.Ez)((0,u.$b)((async()=>{const{type:We}=Qe;let qe;if(We===v.$.cloudAlerting||We===v.$.cloudRecording){if(!Qe.dataSourceName)throw new Error("The Data source has not been defined.");const st=T(De.getState,Qe.dataSourceName);qe=await x(st).saveLotexRule(Qe,Me,tt),await De.dispatch(w({rulesSourceName:Qe.dataSourceName}))}else if(We===v.$.grafana){const st=T(De.getState,E.GC);qe=await x(st).saveGrafanaRule(Qe,Me,tt),await De.dispatch(w({rulesSourceName:E.GC}))}else throw new Error("Unexpected rule form type");if((0,m.PN)(m.z7.successSavingAlertRule,{type:We,isNew:(!tt).toString()}),lt)i.E1.push(lt);else{const st=D.$V(qe);if(!st){i.E1.push("/alerting/list");return}const dt=`/alerting/${encodeURIComponent(st)}/edit`;i.E1.getLocation().pathname!==dt?i.E1.replace(dt):De.dispatch(H(qe))}})()),{successMessage:tt?`Rule "${Qe.name}" updated.`:`Rule "${Qe.name}" saved.`,errorMessage:"Failed to save rule"})),oe=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,u.$b)((0,h.i9)())),Z=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",Qe=>(0,u.$b)(a(Qe))),le=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:Qe,oldConfig:tt,newConfig:lt,successMessage:Me,redirectPath:De,redirectSearch:We,refetch:qe},st)=>(0,u.Ez)((0,u.$b)((async()=>{const dt=await st.dispatch(o.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(Qe)).unwrap(),Tt=(0,n.isEmpty)(dt.alertmanager_config)&&(0,n.isEmpty)(dt.template_files),Nt=JSON.stringify(dt)!==JSON.stringify(tt);if(!Tt&&Nt)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,d.oy)(Qe,(0,y.X4)(lt)),qe&&st.dispatch(o.alertmanagerApi.util.invalidateTags(["AlertmanagerConfiguration"])),De){const Bt=new URLSearchParams(We??"");i.E1.push((0,C.eQ)(De,Qe,Bt))}})()),{successMessage:Me})),ce=(0,t.hg)("unifiedalerting/fetchAmAlerts",Qe=>(0,u.$b)((0,d.QK)(Qe,[],!0,!0,!0))),q=(Qe,tt)=>async lt=>{await(0,u.Ez)((0,d.iT)(Qe,tt),{successMessage:"Silence expired."}),lt(B(Qe)),lt(ce(Qe))},ne=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:Qe,payload:tt,exitOnSave:lt,successMessage:Me})=>(0,u.Ez)((0,u.$b)((async()=>{await(0,d.dx)(Qe,tt),lt&&i.E1.push("/alerting/silences")})()),{successMessage:Me})),pe=(Qe,tt)=>async lt=>{const Me=await lt(o.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(tt)).unwrap();if(!Me)throw new Error(`Config for ${tt} not found`);if(!Me.alertmanager_config.receivers?.find(We=>We.name===Qe))throw new Error(`Cannot delete receiver ${Qe}: not found in config.`);const De={...Me,alertmanager_config:{...Me.alertmanager_config,receivers:Me.alertmanager_config.receivers.filter(We=>We.name!==Qe)}};return lt(le({newConfig:De,oldConfig:Me,alertManagerSourceName:tt,successMessage:"Contact point deleted.",refetch:!0}))},re=(Qe,tt)=>async lt=>{const Me=await lt(o.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(tt)).unwrap();if(!Me)throw new Error(`Config for ${tt} not found`);if(typeof Me.template_files?.[Qe]!="string")throw new Error(`Cannot delete template ${Qe}: not found in config.`);const De={...Me.template_files};delete De[Qe];const We={...Me,alertmanager_config:{...Me.alertmanager_config,templates:Me.alertmanager_config.templates?.filter(qe=>qe!==Qe)},template_files:De};return lt(le({newConfig:We,oldConfig:Me,alertManagerSourceName:tt,successMessage:"Template deleted.",refetch:!0}))},ie=(0,t.hg)("unifiedalerting/fetchFolder",Qe=>(0,u.$b)(r.ae.getFolderByUid(Qe,{withAccessControl:!0}))),Se=Qe=>(tt,lt)=>{lt().unifiedAlerting.folders[Qe]?.dispatched||tt(ie(Qe))},ye=(0,t.hg)("unifiedalerting/fetchAlertGroups",Qe=>(0,u.$b)((0,d.XK)(Qe))),Ce=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(Qe,tt)=>(0,u.Ez)((0,u.$b)((async()=>{await(0,d.CN)(Qe),await tt.dispatch(o.alertmanagerApi.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),de=(Qe,tt)=>async lt=>{const Me=await lt(o.alertmanagerApi.endpoints.getAlertmanagerConfiguration.initiate(Qe)).unwrap(),De=Me?.alertmanager_config?.mute_time_intervals?.filter(({name:We})=>We!==tt)??[];Me&&(0,u.Ez)(lt(le({alertManagerSourceName:Qe,oldConfig:Me,newConfig:{...Me,alertmanager_config:{...Me.alertmanager_config,route:Me.alertmanager_config.route?(0,y.rU)(tt,Me.alertmanager_config?.route):void 0,mute_time_intervals:De}},refetch:!0})),{successMessage:`Deleted "${tt}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},we=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:Qe,receivers:tt,alert:lt})=>(0,u.Ez)((0,u.$b)((0,d.Bp)(Qe,tt,lt)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),_e=(Qe,tt)=>Qe.filter(lt=>{const{forDuration:Me}=(0,S.qd)(lt,tt),De=(0,R.Bg)(Me),We=(0,R.Bg)(tt);return De!==0&&De<We}),Je=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(Qe,tt)=>(0,u.Ez)((0,u.$b)((async()=>{const{rulesSourceName:lt,namespaceName:Me,groupName:De,newNamespaceName:We,newGroupName:qe,groupInterval:st}=Qe,dt=T(tt.getState,lt),Tt=await(0,b.m6)(dt);if(!!!Tt[Me])throw new Error(`Namespace "${Me}" not found.`);const Bt=Tt[Me].find(ct=>ct.name===De);if(!Bt)throw new Error(`Group "${De}" not found.`);const yt=!!Tt[Me].find(ct=>ct.name===qe);if(qe!==De&&yt)throw new Error(`Group "${qe}" already exists in namespace "${Me}".`);const ft=!!Tt[We];if(We!==Me&&ft)throw new Error(`Namespace "${We}" already exists.`);if(We===Me&&De===qe&&st===Bt.interval)throw new Error("Nothing changed.");if(st!==Bt.interval){const ct=_e(Bt.rules,st??"1m");if(ct.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${ct.map(ge=>{const{alertName:Be}=(0,S.qd)(ge,st??"");return Be}).join(",")}`)}if(We!==Me){for(const ct of Tt[Me])await(0,b.P4)(dt,We,ct.name===De?{...ct,name:qe,interval:st}:ct);await(0,b.sz)(dt,Me)}else await(0,b.P4)(dt,Me,{...Bt,name:qe,interval:st}),qe!==De&&await(0,b.BC)(dt,Me,De);await tt.dispatch(w({rulesSourceName:lt}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Ue=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(Qe,tt)=>(0,u.Ez)((0,u.$b)((async()=>{const{rulesSourceName:lt,namespaceName:Me,groupName:De,newRules:We}=Qe,qe=T(tt.getState,lt),dt=(await(0,b.m6)(qe))[Me].find(Nt=>Nt.name===De);if(!dt)throw new Error(`Group "${De}" not found.`);const Tt={name:dt.name,interval:dt.interval,rules:We};await(0,b.P4)(qe,Me,Tt),await tt.dispatch(w({rulesSourceName:lt}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),$e=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(Qe,tt)=>(0,u.Ez)((0,u.$b)((async()=>{await(0,d.tK)(Qe),tt.dispatch(V())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},14117:(j,I,e)=>{"use strict";e.d(I,{r:()=>i});var t=e(42844),n=e(62862);const i=s=>({[n.Z9.Active]:(0,t.css)`
    color: ${s.colors.error.text};
  `,[n.Z9.Suppressed]:(0,t.css)`
    color: ${s.colors.primary.text};
  `,[n.Z9.Unprocessed]:(0,t.css)`
    color: ${s.colors.secondary.text};
  `})},36148:(j,I,e)=>{"use strict";e.d(I,{Z:()=>n});var t=e(42844);const n=i=>(0,t.css)`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${i.spacing(2,0)};
  `},62401:(j,I,e)=>{"use strict";e.d(I,{W:()=>t});var t=(n=>(n.Incident="grafana-incident-app",n.OnCall="grafana-oncall-app",n.MachineLearning="grafana-ml-app",n))(t||{})},72821:(j,I,e)=>{"use strict";e.d(I,{$:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},42439:(j,I,e)=>{"use strict";e.d(I,{t:()=>t});var t=(n=>(n.seconds="s",n.minutes="m",n.hours="h",n.days="d",n.weeks="w",n))(t||{})},2082:(j,I,e)=>{"use strict";e.d(I,{Bz:()=>c,Fo:()=>d,Ko:()=>g,Ob:()=>m,QX:()=>a,Rv:()=>f,ql:()=>h});var t=e(91368),n=e(309),i=e(18771),s=e(22513);function r(b){return(0,s.HY)(b)?"grafana":"external"}const m={read:{grafana:i.AccessControlAction.AlertingInstanceRead,external:i.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:i.AccessControlAction.AlertingInstanceCreate,external:i.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:i.AccessControlAction.AlertingInstanceUpdate,external:i.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:i.AccessControlAction.AlertingInstanceUpdate,external:i.AccessControlAction.AlertingInstancesExternalWrite}},d={read:{grafana:i.AccessControlAction.AlertingNotificationsRead,external:i.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:i.AccessControlAction.AlertingNotificationsWrite,external:i.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:i.AccessControlAction.AlertingNotificationsWrite,external:i.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:i.AccessControlAction.AlertingNotificationsWrite,external:i.AccessControlAction.AlertingNotificationsExternalWrite}},o={read:i.AccessControlAction.AlertingProvisioningRead,write:i.AccessControlAction.AlertingProvisioningWrite},l={read:{grafana:i.AccessControlAction.AlertingRuleRead,external:i.AccessControlAction.AlertingRuleExternalRead},create:{grafana:i.AccessControlAction.AlertingRuleCreate,external:i.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:i.AccessControlAction.AlertingRuleUpdate,external:i.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:i.AccessControlAction.AlertingRuleDelete,external:i.AccessControlAction.AlertingRuleExternalWrite}};function a(b){const v=r(b);return{read:m.read[v],create:m.create[v],update:m.update[v],delete:m.delete[v]}}function g(b){const v=r(b);return{read:d.read[v],create:d.create[v],update:d.update[v],delete:d.delete[v],provisioning:o}}function c(b){const v=r(b);return{read:l.read[v],create:l.create[v],update:l.update[v],delete:l.delete[v]}}function h(b,v){return()=>t.contextSrv.evaluatePermission(()=>v,b)}function f(){return{canCreateGrafanaRules:t.contextSrv.hasAccess(i.AccessControlAction.FoldersRead,t.contextSrv.hasEditPermissionInFolders)&&t.contextSrv.hasAccess(l.create.grafana,t.contextSrv.hasEditPermissionInFolders),canCreateCloudRules:t.contextSrv.hasAccess(i.AccessControlAction.DataSourcesRead,t.contextSrv.isEditor)&&t.contextSrv.hasAccess(l.create.external,t.contextSrv.isEditor),canEditRules:b=>{const v=b===s.GC?t.contextSrv.hasEditPermissionInFolders:t.contextSrv.isEditor;return t.contextSrv.hasAccess(c(b).update,v)},canReadProvisioning:t.contextSrv.hasAccess(o.read,(0,n.RN)())}}},76658:(j,I,e)=>{"use strict";e.d(I,{FM:()=>o,J8:()=>O,X4:()=>m,Xy:()=>S,Zh:()=>E,_J:()=>f,cm:()=>h,eD:()=>u,m8:()=>T,nv:()=>a,qw:()=>U,rU:()=>d,tA:()=>v,u6:()=>M,uK:()=>x,v7:()=>R,vB:()=>D,xz:()=>y,zy:()=>g});var t=e(89949),n=e.n(t),i=e(62862),s=e(76384),r=e(22513);function m(L){return L.alertmanager_config.receivers||(L.alertmanager_config.receivers=[{name:"default "}]),L.alertmanager_config.route||(L.alertmanager_config.route={receiver:L.alertmanager_config.receivers[0].name}),L.template_files||(L.template_files={}),L}function d(L,V){return{...V,mute_time_intervals:V.mute_time_intervals?.filter(K=>K!==L)??[],routes:V.routes?.map(K=>d(L,K))}}function o(L,V,w){return{...w,mute_time_intervals:w.mute_time_intervals?.map(K=>K===V?L:K),routes:w.routes?.map(K=>o(L,V,K))}}function l(L,V){return(V.receiver===L||V.routes?.some(w=>l(L,w)))??!1}function a(L,V){return(V.alertmanager_config.route&&l(L,V.alertmanager_config.route))??!1}function g(L){return L.isEqual?L.isRegex?i._M.regex:i._M.equal:L.isRegex?i._M.notRegex:i._M.notEqual}function c(L){switch(L){case i._M.equal:return{isEqual:!0,isRegex:!1};case i._M.notEqual:return{isEqual:!1,isRegex:!1};case i._M.regex:return{isEqual:!0,isRegex:!0};case i._M.notRegex:return{isEqual:!1,isRegex:!0}}}function h(L){return{name:L.name,value:L.value,operator:g(L)}}function f(L){return{name:L.name,value:L.value,...c(L.operator)}}function b(L){return`{${L.map(h).reduce((K,B)=>{const W=`${B.name}${B.operator}"${B.value}"`;return K?`${K},${W}`:W},"")}}`}const v=[{label:i._M.equal,description:"Equals",value:i._M.equal},{label:i._M.notEqual,description:"Does not equal",value:i._M.notEqual},{label:i._M.regex,description:"Matches regex",value:i._M.regex},{label:i._M.notRegex,description:"Does not match regex",value:i._M.notRegex}];function y(L){const V=g(L);return[L.name,V,L.value]}function E(L){const V=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,}]*)"?/g,w=[];return L.replace(V,(K,B,W,_)=>{const k=W===i._M.equal||W===i._M.regex,A=W===i._M.regex||W===i._M.notRegex;return w.push({name:B,value:A?C(_.trim()):_.trim(),isEqual:k,isRegex:A}),""}),w}function C(L){try{return new RegExp(L),L}catch{return""}}function u(L,V){return V.every(({name:w,value:K,isRegex:B,isEqual:W})=>Object.entries(L).some(([_,k])=>{const A=w===_;let z;return W&&!B&&(z=K===k),!W&&!B&&(z=K!==k),W&&B&&(z=new RegExp(K).test(k)),!W&&B&&(z=!new RegExp(K).test(k)),A&&z}))}function D(...L){const V=L.map(E).flat(),w=(0,t.uniqWith)(V,t.isEqual);return b(w)}function P(){return(0,s.x)().filter(L=>L.type===r.ye.Alertmanager)}function S(L){return P().find(V=>L===V.uid)}function x(L){const{times:V,weekdays:w,days_of_month:K,months:B,years:W,location:_}=L,k=M(V,_),A=R(w),z=O(K),H=T(B),Q=U(W);return[k,A,z,H,Q].join(", ")}function M(L,V){return"Times: "+(L?L?.map(({start_time:w,end_time:K})=>`${w} - ${K} [${V??"UTC"}]`).join(" and "):"All")}function R(L){return"Weekdays: "+(L?.map(V=>{if(V.includes(":"))return V.split(":").map(w=>{const K=w.slice(0,3);return K[0].toLocaleUpperCase()+K.slice(1)}).join("-");{const w=V.slice(0,3);return w[0].toLocaleUpperCase()+w.slice(1)}}).join(", ")??"All")}function O(L){return"Days of the month: "+(L?.join(", ")??"All")}function T(L){return"Months: "+(L?.join(", ")??"All")}function U(L){return"Years: "+(L?.join(", ")??"All")}},95438:(j,I,e)=>{"use strict";e.d(I,{$9:()=>r,XW:()=>m});var t=e(27702),n=e(33555),i=e(39036);function s(d){return{dashboardUID:d.find(([o])=>o===n.q6.dashboardUID)?.[1],panelId:d.find(([o])=>o===n.q6.panelID)?.[1]}}function r(d){return(0,t.useMemo)(()=>Object.entries(d||{}).filter(([o,l])=>!!l.trim()),[d])}function m(d){const o=new Map,{panelId:l,dashboardUID:a}=s(d);return a&&o.set(n.q6.dashboardUID,(0,i.RQ)(a)),a&&l&&o.set(n.q6.panelID,(0,i.yM)(a,l)),o}},76384:(j,I,e)=>{"use strict";e.d(I,{f:()=>s,x:()=>i});var t=e(34667),n=e(447);function i(){return Object.values(t.config.datasources)}function s(r){if(!(0,n.wd)(t.config.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const m=(0,n.nd)(t.config.unifiedAlerting.minInterval);if(!r||!(0,n.wd)(r))return{globalLimit:m,exceedsLimit:!1};const d=(0,n.nd)(r),o=m>d&&d>0;return{globalLimit:m,exceedsLimit:o}}},33555:(j,I,e)=>{"use strict";e.d(I,{_y:()=>h,c4:()=>i,cm:()=>r,de:()=>s,eY:()=>f,iF:()=>m,jZ:()=>t,m4:()=>d,p4:()=>n,q6:()=>g,vY:()=>c});const t="ruler not supported",n=2e4,i="alertmanager",s="alerting-alertmanager",r=2e4,m=2e4,d=2e4,o="timeseries",l="table",a="stat";var g=(b=>(b.description="description",b.summary="summary",b.runbookURL="runbook_url",b.alertId="__alertId__",b.dashboardUID="__dashboardUid__",b.panelID="__panelId__",b))(g||{});const c={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},h={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},f=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}]},22513:(j,I,e)=>{"use strict";e.d(I,{EG:()=>u,Eu:()=>g,GC:()=>d,G_:()=>V,HY:()=>x,JY:()=>o,LE:()=>v,P:()=>L,RY:()=>S,VX:()=>c,aM:()=>h,c$:()=>M,gt:()=>T,h_:()=>C,jq:()=>P,mA:()=>E,o_:()=>R,v_:()=>D,ye:()=>l,z3:()=>b});var t=e(10864),n=e(91368),i=e(62862),s=e(18771),r=e(2082),m=e(76384);const d="grafana",o="-- Grafana --";var l=(w=>(w.Alertmanager="alertmanager",w.Loki="loki",w.Prometheus="prometheus",w))(l||{});const a=["loki","prometheus"];function g(){return n.contextSrv.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,m.x)().filter(w=>a.includes(w.type)&&w.jsonData.manageAlerts!==!1).sort((w,K)=>w.name.localeCompare(K.name)):[]}function c(w){return g().find(K=>K.name===w)}function h(){return(0,m.x)().filter(w=>w.type==="alertmanager").sort((w,K)=>w.name.localeCompare(K.name))}const f={name:d,imgUrl:"public/img/grafana_icon.svg"};function b(){return[f,...h().map(w=>({name:w.name,displayName:w.name,imgUrl:w.meta.info.logos.small,meta:w.meta}))]}function v(w){const K=[],B={instance:r.Ob.read,notification:r.Fo.read};if(n.contextSrv.hasPermission(B[w].grafana)&&K.push(f),n.contextSrv.hasPermission(B[w].external)){const W=h().map(_=>({name:_.name,displayName:_.name,imgUrl:_.meta.info.logos.small,meta:_.meta}));K.push(...W)}return K}function y(w){const K=M(w);if(!K)throw new Error(`Data source ${w} not found`);if(K.type!=="loki"&&K.type!=="prometheus")throw new Error(`Unexpected data source type ${K.type}`);return K}function E(){const w=g().map(K=>K.name);return n.contextSrv.hasPermission(s.AccessControlAction.AlertingRuleRead)&&w.push(d),w}function C(){const w=g();return n.contextSrv.hasPermission(s.AccessControlAction.AlertingRuleRead)&&w.push(d),w}function u(w){return P(w)?w.name:w}function D(w){return P(w)?w.uid:d}function P(w){return w!==d}function S(w){return w!==d&&M(w)?.jsonData?.implementation===i.sK.prometheus}function x(w){return w===d}function M(w){return(0,m.x)().find(K=>K.name===w)}function R(w){return w===d?d:M(w)}function O(w){if(w===d)return d;const K=M(w);if(!K)throw new Error(`Datasource "${w}" not found`);return String(K.id)}function T(w){if(w===d)return d;const K=M(w);if(!K)throw new Error(`Datasource "${w}" not found`);return K.uid}function U(){return(0,t.F)().getList({alerting:!0})[0]}function L(){const w=(0,t.F)().getInstanceSettings("default");return w?.meta.alerting??!1?w:U()}function V(w){return w.jsonData.manageAlerts!==!1}},77328:(j,I,e)=>{"use strict";e.d(I,{P3:()=>t,bR:()=>s,cH:()=>n,nW:()=>i});function t(r){return Object.entries(r).map(([m,d])=>`${m}=${d}`).sort()}function n(r){return Object.entries(r).map(([m,d])=>[m,d])}function i(r){const m={};return r.forEach(d=>{m[d[0]]=d[1]}),m}function s(r){const m={};return r.forEach(d=>{d.key&&(m[d.key]=d.value)}),m}},32925:(j,I,e)=>{"use strict";e.d(I,{QO:()=>o,RT:()=>m,rz:()=>d,tC:()=>r});var t=e(89949),n=e.n(t),i=e(62862);const s=[i._M.regex,i._M.notRegex,i._M.notEqual,i._M.equal];function r(c){if(c.startsWith("{")&&c.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${c}`);const h=s.map(E=>[E,c.indexOf(E)]).filter(([E,C])=>C>-1).sort((E,C)=>E[1]-C[1]);if(!h.length)throw new Error(`Invalid matcher: ${c}`);const[f,b]=h[0],v=c.slice(0,b).trim(),y=c.slice(b+f.length);if(!v)throw new Error(`Invalid matcher: ${c}`);return{name:v,value:y,isRegex:f===i._M.regex||f===i._M.notRegex,isEqual:f===i._M.equal||f===i._M.regex}}function m(c){const h=c.filter(f=>!!f.trim()).map(f=>r(f));return(0,t.uniqBy)(h,f=>f.name)}const d=c=>{const h=Object.entries(c).filter(([b])=>!(b.startsWith("__")&&b.endsWith("__"))),f=new URLSearchParams;return h.forEach(([b,v])=>f.append("matcher",`${b}=${v}`)),f},o=c=>{const h=[];return c.matchers&&c.matchers.forEach(f=>{const{name:b,value:v,isEqual:y,isRegex:E}=r(f);let C=i._M.equal;y&&E&&(C=i._M.regex),!y&&E&&(C=i._M.notRegex),y&&!E&&(C=i._M.equal),!y&&!E&&(C=i._M.notEqual),h.push([b,C,v])}),c.object_matchers&&h.push(...c.object_matchers),c.match_re&&Object.entries(c.match_re).forEach(([f,b])=>{h.push([f,i._M.regex,b])}),c.match&&Object.entries(c.match).forEach(([f,b])=>{h.push([f,i._M.equal,b])}),h},l={[i._M.equal]:(c,h)=>c===h,[i._M.notEqual]:(c,h)=>c!==h,[i._M.regex]:(c,h)=>new RegExp(h).test(c),[i._M.notRegex]:(c,h)=>!new RegExp(h).test(c)};function a(c,h){const[f,b]=h,[v,y,E]=c;if(f!==v)return!1;const C=l[y];if(!C)throw new Error(`no such operator: ${y}`);return C(b,E)}function g(c,h){return c.every(f=>h.some(b=>a(f,b)))}},39036:(j,I,e)=>{"use strict";e.d(I,{ET:()=>f,GV:()=>h,HV:()=>O,J8:()=>u,RQ:()=>U,S0:()=>v,V2:()=>g,VN:()=>M,Vv:()=>x,Zl:()=>K,__:()=>R,aH:()=>T,eQ:()=>D,fm:()=>V,lC:()=>y,mH:()=>c,pF:()=>C,sM:()=>S,t6:()=>b,yM:()=>L});var t=e(89949),n=e.n(t),i=e(22446),s=e(57183),r=e(18447),m=e(33555),d=e(22513),o=e(32925),l=e(96437),a=e(59597);function g(B,W,_){const k=(0,d.EG)(B),A=l.Yd(k,W),z=encodeURIComponent(l.$V(A)),H=encodeURIComponent(k);return(0,a.u)(`/alerting/${H}/${z}/view`,{returnTo:_})}function c(B,W){return(0,a.u)("/explore",{left:JSON.stringify({datasource:B,queries:[{refId:"A",datasource:B,expr:W}],range:{from:"now-1h",to:"now"}})})}function h(B,W=""){return(0,a.u)(`/alerting/notifications/receivers/${encodeURIComponent(B)}/edit`,{alertmanager:W})}function f(B,W=""){return(0,a.u)("/alerting/routes/mute-timing/edit",{muteName:B,alertmanager:W})}function b(B,W){return(0,d.jq)(B)?(0,a._)(`/alerting/${encodeURIComponent(B.name)}/${encodeURIComponent(W.name)}/find`):window.location.href.split("?")[0]}function v(B){return B.reduce((W,{key:_,value:k})=>(W[_]=k,W),{})}const y=B=>{const W=B.queryString===void 0?void 0:String(B.queryString),_=B.alertState===void 0?void 0:String(B.alertState),k=B.dataSource===void 0?void 0:String(B.dataSource),A=B.ruleType===void 0?void 0:String(B.ruleType),z=B.groupBy===void 0?void 0:String(B.groupBy).split(",");return{queryString:W,alertState:_,dataSource:k,groupBy:z,ruleType:A}},E=B=>({queryString:B.get("queryString")??void 0,contactPoint:B.get("contactPoint")??void 0}),C=B=>{const W=B.queryString===void 0?void 0:String(B.queryString),_=B.silenceState===void 0?void 0:String(B.silenceState);return{queryString:W,silenceState:_}};function u(B){return Object.entries(B).map(([W,_])=>({key:W,value:_}))}function D(B,W,_){const k=new URLSearchParams(_);return W&&k.append(m.c4,W),`${B}?${k.toString()}`}const P=B=>B.replace(/\"/g,'\\"');function S(B){return B.startsWith('"')&&B.endsWith('"')?P(B):`"${P(B)}"`}function x(B,W){const _={alertname:W.name,...W.labels};return M(B,_)}function M(B,W){const _=new URLSearchParams;return _.append("alertmanager",B),(0,o.rz)(W).forEach((A,z)=>_.append(z,A)),(0,a.u)("/alerting/silence/new",_)}function R(B){return(0,a.u)(`/datasources/edit/${B.uid}`)}function O(B){return(0,a.u)(`/dashboards/f/${B}`)}function T(B){return(0,a.u)(`/dashboards/f/${B.uid}/${B.title}/settings`)}function U(B){return(0,a.u)(`/d/${encodeURIComponent(B)}`)}function L(B,W){return(0,a.u)(`/d/${encodeURIComponent(B)}`,{viewPanel:W})}function V(B,W,_,k=1e3){const A=new Date().getTime(),z=()=>B().catch(H=>{if(W(H)&&new Date().getTime()-A<_)return new Promise(Q=>setTimeout(Q,k)).then(z);throw H});return z()}const w={[r.bj.Alerting]:1,[r.x_.Firing]:1,[r.bj.Error]:1,[r.bj.Pending]:2,[r.x_.Pending]:2,[r.x_.Inactive]:2,[r.bj.NoData]:3,[r.bj.Normal]:4};function K(B,W){if(B===s.As.Importance)return(0,t.sortBy)(W,k=>[w[(0,r.ED)(k.state)],(0,i.pB)(k).toLocaleLowerCase()]);if(B===s.As.TimeAsc)return(0,t.sortBy)(W,k=>[new Date(k.activeAt)||new Date,(0,i.pB)(k).toLocaleLowerCase()]);if(B===s.As.TimeDesc)return(0,t.sortBy)(W,k=>[new Date(k.activeAt)||new Date,(0,i.pB)(k).toLocaleLowerCase()]).reverse();const _=(0,t.sortBy)(W,k=>(0,i.pB)(k).toLocaleLowerCase());return B===s.As.AlphaDesc&&_.reverse(),_}},84369:(j,I,e)=>{"use strict";e.d(I,{$b:()=>a,Ez:()=>g,I7:()=>u,PE:()=>f,i6:()=>o,jK:()=>l,kk:()=>h,op:()=>D,oq:()=>m,wt:()=>C,yR:()=>E});var t=e(34099),n=e(3935),i=e(73289),s=e(66574),r=e(28722);const m=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function d(P,S=m,x){if(P.pending.match(x))return{result:S.result,loading:!0,error:S.error,dispatched:!0,requestId:x.meta.requestId};if(P.fulfilled.match(x)){if(S.requestId===void 0||S.requestId===x.meta.requestId)return{...S,result:x.payload,loading:!1,error:void 0}}else if(P.rejected.match(x)&&S.requestId===x.meta.requestId)return{...S,loading:!1,error:x.error};return S}function o(P,S){return(0,t.oM)({name:P,initialState:m,reducers:{},extraReducers:x=>x.addDefaultCase((M,R)=>d(S,M,R))})}function l(P,S,x){return(0,t.oM)({name:P,initialState:{},reducers:{},extraReducers:M=>M.addDefaultCase((R,O)=>{if((0,t.Gx)(S)(O)){const T=O,U=x(T.meta.arg);return{...R,[U]:d(S,R[U],T)}}return R})})}function a(P){return P.catch(S=>{throw{message:h(S),code:S.statusCode}})}function g(P,S){return P.then(x=>(S.successMessage&&s.h$.emit(n.SI.alertSuccess,[S.successMessage]),x)).catch(x=>{const M=h(x);throw s.h$.emit(n.SI.alertError,[`${S.errorMessage??"Error"}: ${M}`]),x})}const c="Unknown Error";function h(P){if((0,i.kW)(P))if(P.data?.message){let x=P.data?.message;return typeof P.data?.error=="string"&&(x+=`; ${P.data.error}`),x}else{if(Array.isArray(P.data)&&P.data.length&&P.data[0]?.message)return P.data.map(x=>x?.message).filter(x=>!!x).join(" ");if(P.statusText)return P.statusText}const S=P?.message;return S||((0,r.PN)(r.z7.unknownMessageFromError,{error:JSON.stringify(P)}),c)}function f(P){return Object.values(P).every(b)}function b(P){return P.dispatched&&!P.loading}function v(P){return Object.values(P).every(y)}function y(P){return P.dispatched&&!P.loading&&!P.error}function E(P){return Object.values(P).some(D)}function C(P){return Object.values(P).some(S=>S.dispatched)}function u(P){return Object.values(P).some(y)}function D(P){return P?P.dispatched&&P.loading:!1}},85184:(j,I,e)=>{"use strict";e.d(I,{DQ:()=>P,EB:()=>v,TN:()=>u,WL:()=>S,aR:()=>U,lN:()=>x,mI:()=>D,s0:()=>M,tO:()=>K,uZ:()=>y,yh:()=>E});var t=e(8508),n=e(76305),i=e(10864),s=e(42751),r=e(76897),m=e(65946),d=e(18447),o=e(43609),l=e(72821),a=e(2082),g=e(33555),c=e(22513),h=e(39036),f=e(22446),b=e(447);const v="1m",y=()=>{const{canCreateGrafanaRules:B,canCreateCloudRules:W}=(0,a.Rv)();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:g.eY,dataSourceName:null,type:B?l.$.grafana:W?l.$.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:d.g0.NoData,execErrState:d.g0.Error,evaluateFor:"5m",evaluateEvery:v,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function E(B){const{name:W,expression:_,forTime:k,forTimeUnit:A,type:z}=B;if(z===l.$.cloudAlerting)return{alert:W,for:`${k}${A}`,annotations:(0,h.S0)(B.annotations||[]),labels:(0,h.S0)(B.labels||[]),expr:_};if(z===l.$.cloudRecording)return{record:W,labels:(0,h.S0)(B.labels||[]),expr:_};throw new Error(`unexpected rule type: ${z}`)}function C(B,W){const _=[...(0,h.J8)(B||{})];return W&&_.push({key:"",value:""}),_}function u(B){const W=[...B];return g.eY.map(k=>k.key).forEach((k,A)=>{const z=W.findIndex(H=>H.key===k);if(z===-1){const H={key:k,value:""};W.splice(A,0,H)}else z!==A&&W.splice(A,0,W.splice(z,1)[0])}),W}function D(B){const{name:W,condition:_,noDataState:k,execErrState:A,evaluateFor:z,queries:H,isPaused:Q}=B;if(_)return{grafana_alert:{title:W,condition:_,no_data_state:k,exec_err_state:A,data:H.map(V),is_paused:!!Q},for:z,annotations:(0,h.S0)(B.annotations||[]),labels:(0,h.S0)(B.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function P(B){const{ruleSourceName:W,namespace:_,group:k,rule:A}=B,z=y();if((0,c.HY)(W))if((0,f.Pc)(A)){const H=A.grafana_alert;return{...z,name:H.title,type:l.$.grafana,group:k.name,evaluateEvery:k.interval||z.evaluateEvery,evaluateFor:A.for||"0",noDataState:H.no_data_state,execErrState:H.exec_err_state,queries:H.data,condition:H.condition,annotations:u(C(A.annotations,!1)),labels:C(A.labels,!0),folder:{title:_,uid:H.namespace_uid},isPaused:H.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,f.cG)(A)){const H=S(A);return{...z,...H,annotations:u(C(A.annotations,!1)),type:l.$.cloudAlerting,dataSourceName:W,namespace:_,group:k.name}}else if((0,f.yF)(A)){const H=x(A);return{...z,...H,type:l.$.cloudRecording,dataSourceName:W,namespace:_,group:k.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function S(B){const W=y(),[_,k]=B.for?(0,b.bG)(B.for):[W.forTime,W.forTimeUnit];return{name:B.alert,expression:B.expr,forTime:_,forTimeUnit:k,annotations:C(B.annotations,!1),labels:C(B.labels,!0)}}function x(B){return{name:B.record,expression:B.expr,labels:C(B.labels,!0)}}const M=()=>{const B=(0,c.P)();if(!B)return[...O("A","B")];const W=(0,t.Rr)();return[{refId:"A",datasourceUid:B.uid,queryType:"",relativeTimeRange:W,model:{refId:"A"}},...O("B","C")]},R=B=>{const W=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:B[0]?.uid||"",queryType:"",relativeTimeRange:W,model:{refId:"A"}}]},O=(...B)=>{const W=B[0],_=B[1],k={refId:B[0],type:m.Us.reduce,datasource:{uid:m.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[],type:o.$.IsAbove},operator:{type:"and"},query:{params:[W]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},A={refId:_,type:m.Us.threshold,datasource:{uid:m.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:o.$.IsAbove},operator:{type:"and"},query:{params:[_]},reducer:{params:[],type:"last"}}],expression:W};return[{refId:W,datasourceUid:m.Yq,queryType:"",model:k},{refId:_,datasourceUid:m.Yq,queryType:"",model:A}]},T=async(B,W,_,k,A,z)=>{const H=[];for(const Q of B){const X=await(0,i.F)().get(Q.datasource?.uid?Q.datasource:k),te={uid:X.uid,type:X.type},oe=n.relativeToTimeRange(W),{interval:Z,intervalMs:le}=L(oe,z??X.interval,A),ce={__interval:{text:Z,value:Z},__interval_ms:{text:le,value:le},..._},q=X.interpolateVariablesInQueries?await X.interpolateVariablesInQueries([Q],ce)[0]:Q;if(te.uid===m.Yq){const ne={refId:q.refId,queryType:"",relativeTimeRange:W,datasourceUid:m.Yq,model:q};H.push(ne)}else{const ne=(0,i.F)().getInstanceSettings(te);if(ne&&ne.meta.alerting){const pe={refId:q.refId,queryType:q.queryType??"",relativeTimeRange:W,datasourceUid:ne.uid,model:{...q,maxDataPoints:A,intervalMs:le}};H.push(pe)}}}return H},U=async(B,W)=>{const{targets:_}=B;if(!B.id||!W.uid)return;const k=n.timeRangeToRelative(n.convertRawToRange(W.time)),A=await T(_,k,B.scopedVars||{},B.datasource??void 0,B.maxDataPoints??void 0,B.interval??void 0);if(!A.length||!A.find(X=>X.datasourceUid!==m.Yq))return;if(!A.find(X=>X.datasourceUid===m.Yq)){const[X,te]=O((0,r.Hs)(A),"-");A.push(X);const[oe,Z]=O(X.refId,(0,r.Hs)(A));A.push(Z)}const{folderTitle:z,folderUid:H}=W.meta;return{type:l.$.grafana,folder:H&&z?{uid:H,title:z}:void 0,queries:A,name:B.title,condition:A[A.length-1].refId,annotations:[{key:g.q6.dashboardUID,value:W.uid},{key:g.q6.panelID,value:String(B.id)}]}};function L(B,W,_){return _?n.calculateInterval(B,_,W):W&&n.intervalToMs(W)>1e3?{interval:W,intervalMs:n.intervalToMs(W)}:{interval:"1s",intervalMs:1e3}}function V(B){const W=B.model;return w(W)&&W.instant&&W.range?{...B,model:{...W,range:!0,instant:!1}}:B}function w(B){return"expr"in B&&"instant"in B&&"range"in B}function K(B){return"expr"in B}},96437:(j,I,e)=>{"use strict";e.d(I,{$V:()=>v,CK:()=>m,Dg:()=>d,OA:()=>b,Om:()=>E,Yd:()=>r,Zk:()=>i,s0:()=>D});var t=e(22513),n=e(22446);function i(P,S,x,M){return(0,n.Pc)(M)?{uid:M.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:P,namespace:S,groupName:x,rulerRuleHash:E(M)}}function s(P,S,x,M){return{ruleSourceName:P,namespace:S,groupName:x,ruleHash:C(M)}}function r(P,S){const x=S.namespace.name,M=S.group.name;if(S.rulerRule)return i(P,x,M,S.rulerRule);if(S.promRule)return s(P,x,M,S.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function m(P){return i(P.ruleSourceName,P.namespace,P.group.name,P.rule)}function d(P,S){return(0,n.Kl)(P)&&(0,n.Kl)(S)?P.uid===S.uid:(0,n.E4)(P)&&(0,n.E4)(S)?P.groupName===S.groupName&&P.namespace===S.namespace&&P.rulerRuleHash===S.rulerRuleHash&&P.ruleSourceName===S.ruleSourceName:(0,n.qE)(P)&&(0,n.qE)(S)?P.groupName===S.groupName&&P.namespace===S.namespace&&P.ruleHash===S.ruleHash&&P.ruleSourceName===S.ruleSourceName:!1}const o="cri",l="pri";function a(P){return P.replace(/\$/g,"_DOLLAR_")}function g(P){return P.replace(/\_DOLLAR\_/g,"$")}function c(P){return P.replace(/\//g,"").replace(/\\/g,"")}function h(P){return P.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function f(P,S=!1){const M=(S?decodeURIComponent(P):P).split("$");if(M.length===1)return{uid:P,ruleSourceName:"grafana"};if(M.length===5){const[R,O,T,U,L]=M.map(g).map(h);if(R===o)return{ruleSourceName:O,namespace:T,groupName:U,rulerRuleHash:L};if(R===l)return{ruleSourceName:O,namespace:T,groupName:U,ruleHash:L}}throw new Error(`Failed to parse rule location: ${P}`)}function b(P,S=!1){if(P)try{return f(P,S)}catch{return}}function v(P){return(0,n.Kl)(P)?P.uid:(0,n.E4)(P)?[o,P.ruleSourceName,P.namespace,P.groupName,P.rulerRuleHash].map(String).map(a).map(c).join("$"):[l,P.ruleSourceName,P.namespace,P.groupName,P.ruleHash].map(String).map(a).map(c).join("$")}function y(P){let S=0;if(P.length===0)return S;for(let x=0;x<P.length;x++){const M=P.charCodeAt(x);S=(S<<5)-S+M,S=S&S}return S}function E(P){if((0,n.yF)(P))return y(JSON.stringify([P.record,P.expr,u(P.labels)])).toString();if((0,n.cG)(P))return y(JSON.stringify([P.alert,P.expr,u(P.annotations),u(P.labels)])).toString();if((0,n.Pc)(P))return P.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function C(P){if((0,n.OP)(P))return y(JSON.stringify([P.type,P.query,u(P.labels)])).toString();if((0,n.x_)(P))return y(JSON.stringify([P.type,P.query,u(P.annotations),u(P.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function u(P){return JSON.stringify(Object.entries(P||{}).sort((S,x)=>S[0].localeCompare(x[0])))}function D(P){return(0,n.Kl)(P)?t.GC:P.ruleSourceName}},22446:(j,I,e)=>{"use strict";e.d(I,{Aq:()=>R,C7:()=>M,E:()=>f,E4:()=>E,Jq:()=>U,Kl:()=>y,OP:()=>a,PW:()=>L,Pc:()=>h,Re:()=>x,SS:()=>P,Wd:()=>C,cG:()=>g,m$:()=>v,pB:()=>b,qE:()=>u,qd:()=>V,ub:()=>T,vU:()=>D,x_:()=>l,yF:()=>c});var t=e(89949),n=e.n(t),i=e(41999),s=e(18447),r=e(41028),m=e(33555),d=e(22513),o=e(447);function l(K){return typeof K=="object"&&K.type===s.pz.Alerting}function a(K){return typeof K=="object"&&K.type===s.pz.Recording}function g(K){return typeof K=="object"&&"alert"in K}function c(K){return typeof K=="object"&&"record"in K}function h(K){return typeof K=="object"&&"grafana_alert"in K}function f(K){return K.rulerRule&&h(K.rulerRule)&&!!K.rulerRule.grafana_alert.is_paused}function b(K){return JSON.stringify(K.labels)}function v(K){return K.error&&K.error?.message?.includes(m.jZ)}function y(K){return"uid"in K}function E(K){return"rulerRuleHash"in K}function C(K){return Object.values(s.pz).includes(K)}function u(K){return"ruleHash"in K}function D(K){switch(K){case"ok":return r.VG.Ok;case"nodata":return r.VG.NoData;case"error":case"err":return r.VG.Error;case"unknown":return r.VG.Unknown;default:return}}function P(K){return K===s.x_.Inactive?"Normal":(0,t.capitalize)(K)}const S=K=>K.reduce((B,{dataSourceName:W,name:_,groups:k})=>(k.forEach(({name:A,rules:z})=>{z.forEach(H=>{l(H)&&B.push({dataSourceName:W,namespaceName:_,groupName:A,rule:H})})}),B),[]),x=K=>l(K.promRule)?K.promRule:null,M=K=>K.reduce((B,{rulesSource:W,name:_,groups:k})=>(k.forEach(({name:A,rules:z})=>{z.forEach(H=>{H.promRule&&l(H.promRule)&&B.push({dataSourceName:(0,d.EG)(W),namespaceName:_,groupName:A,...H})})}),B),[]);function R(K){let B;return Object.values(i.Z).includes(K)?B=K:B=(0,s.ED)(K),O[B]}const O={[s.x_.Inactive]:"good",[s.x_.Firing]:"bad",[s.x_.Pending]:"warning",[s.bj.Alerting]:"bad",[s.bj.Error]:"bad",[s.bj.NoData]:"info",[s.bj.Normal]:"good",[s.bj.Pending]:"warning",[i.Z.NoData]:"info",[i.Z.Paused]:"warning",[i.Z.Alerting]:"bad",[i.Z.OK]:"good",[i.Z.Pending]:"warning",[i.Z.Unknown]:"info"};function T(K){return K?.alerts?K.alerts.reduce((B,W)=>{const _=(0,s.ED)(W.state)!==s.bj.Normal;if(W.activeAt&&_){const k=new Date(W.activeAt);if(B===null||B.getTime()>k.getTime())return k}return B},null):null}function U(K){return Array.isArray(K.source_tenants)}function L(K){return h(K)?K.grafana_alert.title:g(K)?K.alert:c(K)?K.record:""}const V=(K,B)=>{const W={alertName:"",forDuration:"0s",evaluationsToFire:0};return h(K)?{alertName:K.grafana_alert.title,forDuration:K.for,evaluationsToFire:w(K.for,B)}:g(K)?{alertName:K.alert,forDuration:K.for??"1m",evaluationsToFire:w(K.for??"1m",B)}:W},w=(K,B)=>{const W=(0,o.Bg)(B),_=(0,o.Bg)(K);return _===0&&W!==0?1:W===0||_/W<1?0:Math.ceil(_/W)+1}},447:(j,I,e)=>{"use strict";e.d(I,{Bg:()=>a,bG:()=>n,gS:()=>c,gV:()=>g,nd:()=>l,qr:()=>s,wd:()=>r});var t=e(42439);function n(h){const f=h.match(/(\d+)(\w+)/);if(f)return[Number(f[1]),f[2]];throw new Error(`Invalid interval description: ${h}`)}function i(h){const{sec:f,count:b}=describeInterval(h);return f*b}const s=Object.entries(t.t).map(([h,f])=>({label:h[0].toUpperCase()+h.slice(1),value:f}));function r(h){try{return l(h),!0}catch{return!1}}const m={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},d=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),o=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t.t).join(", ")}`);function l(h){let f=h,b=[];function v(E){const C=d.exec(E),u=C?.groups?.value&&C?.groups?.type;if(!C||!u)throw o;C&&C.groups?.value&&C.groups?.type&&(f=f.replace(C[0],""),b.push([Number(C.groups.value),C.groups.type])),f&&v(f)}if(v(h),!b.length)throw o;return b.reduce((E,[C,u])=>{const D=C*m[u];return E+D},0)}const a=h=>{try{return l(h)}catch{return 0}},g=h=>h.includes("0001-01-01T00");function c(h){return h%(1e3*60*60)===0?h/(1e3*60*60)+"h":h%(1e3*60)===0?h/(1e3*60)+"m":h%1e3===0?h/1e3+"s":h.toFixed()+"ms"}},59597:(j,I,e)=>{"use strict";e.d(I,{_:()=>i,u:()=>n});var t=e(34667);function n(s,r){const d=new URLSearchParams(r).toString();return`${t.config.appSubUrl}${s}${d?`?${d}`:""}`}function i(s,r){const d=new URLSearchParams(r).toString();try{const o=new URL(t.config.appSubUrl,t.config.appUrl);return o.pathname=s,`${o.href}${d?`?${d}`:""}`}catch{return n(s,r)}}},11285:(j,I,e)=>{"use strict";e.d(I,{Dl:()=>s,_E:()=>i,lK:()=>r,xD:()=>n});var t=e(73289);function n(m){return(0,t.i)().post("/api/annotations",m)}function i(m){return(0,t.i)().put(`/api/annotations/${m.id}`,m)}function s(m){return(0,t.i)().delete(`/api/annotations/${m.id}`)}async function r(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:d,count:o})=>({term:d,count:o}))}},92877:(j,I,e)=>{"use strict";e.d(I,{r:()=>a});var t=e(45383),n=e(22479),i=e(39343),s=e(76305),r=e(62247),m=e(46809),d=e(97463);let o=100;function l(){return"AQ"+o++}function a(g,c,h){const f={...d.yA,...c.annotations},b={...f.getDefaultQuery?.(),...h},v=f.prepareAnnotation(b);if(!v)return(0,t.of)({});const y=f.prepareQuery(v);if(!y)return(0,t.of)({});const E=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,C=s.calculateInterval(g.range,E,c.interval),u={__interval:{text:C.interval,value:C.interval},__interval_ms:{text:C.intervalMs.toString(),value:C.intervalMs},__annotation:{text:v.name,value:v}},D={startTime:Date.now(),requestId:l(),range:g.range,maxDataPoints:E,scopedVars:u,...C,app:r.zj.Dashboard,publicDashboardAccessToken:g.dashboard.meta.publicDashboardAccessToken,timezone:g.dashboard.timezone,targets:[{...y,refId:"Anno"}]};return(0,m.v7)(c,D).pipe((0,n.z)(P=>{const S=P?.series.length?P.series:P.annotations;return S?.length?f.processEvents(v,S).pipe((0,i.U)(x=>({panelData:P,events:x}))):(0,t.of)({panelData:P,events:[]})}))}},97463:(j,I,e)=>{"use strict";e.d(I,{$w:()=>E,r0:()=>h,yA:()=>g,yr:()=>C});var t=e(89949),n=e.n(t),i=e(45383),s=e(22479),r=e(39343),m=e(44885),d=e(29241),o=e(75578),l=e(22001),a=e(12308);const g={prepareAnnotation:u=>{if((0,t.isString)(u?.query)){const{query:D,...P}=u;return{...P,target:{refId:"annotation_query",query:D},mappings:{}}}return u},prepareQuery:u=>u.target,processEvents:(u,D)=>v(D,u.mappings)};function c(){return u=>u.pipe((0,s.z)(D=>{if(!D?.length)return(0,i.of)(void 0);if(D.length===1)return(0,i.of)(D[0]);const P={interpolate:S=>S};return(0,i.of)(D).pipe(m.Y.mergeTransformer.operator({},P),(0,r.U)(S=>S[0]))}))}const h=[{key:"time",field:u=>u.fields.find(D=>D.type===d.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:u=>u.fields.find(D=>D.type===d.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],f=[{key:"color"},{key:"isRegion"},{key:"source"}],b=[...a.config.isPublicDashboardView?f:[],...h,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function v(u,D){return(0,i.of)(u).pipe(c(),(0,r.U)(P=>{if(!P?.length)return[];let S=!1,x=!1;const M={};for(const T of P.fields){const U=(0,o.CZ)(T,P);M[U.toLowerCase()]=T}D||(D={});const R=[];for(const T of b){const U=D[T.key]||{};if(U.source===l.L.Skip)continue;const L={key:T.key,split:T.split};if(U.source===l.L.Text)L.text=U.value;else{const V=(U.value||T.key).toLowerCase();L.field=M[V],!L.field&&T.field&&(L.field=T.field(P))}(L.field||L.text)&&(R.push(L),L.key==="time"?S=!0:L.key==="text"&&(x=!0))}if(!S||!x)return console.error("Cannot process annotation fields. No time or text present."),[];const O=[];for(let T=0;T<P.length;T++){const U={type:"default",color:"red"};for(const L of R){let V;if(L.text)V=L.text;else if(L.field&&(V=L.field.values[T],V!==void 0&&L.regex)){const w=L.regex.exec(V);w&&(V=w[1]?w[1]:w[0])}V!=null&&(L.split&&typeof V=="string"&&(V=V.split(",")),U[L.key]=V)}O.push(U)}return O}))}const y=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function E(u){const{type:D}=u;return!(D==="datasource"||y.includes(D))}function C(u){const{type:D}=u;return y.includes(D)}},59273:(j,I,e)=>{"use strict";e.d(I,{ZP:()=>a,dF:()=>m,iK:()=>s,j4:()=>r,nQ:()=>o,ql:()=>d});var t=e(34099);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",migrationResult:{total:0,migrated:0,failed:0,failedApikeyIDs:[0],failedDetails:[]}},i=(0,t.oM)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(g,c)=>{const{keys:h,keysIncludingExpired:f}=c.payload,b=c.payload.keys.length===0&&c.payload.keysIncludingExpired.length>0?!0:g.includeExpired;return{...g,hasFetched:!0,keys:h,keysIncludingExpired:f,includeExpired:b}},setSearchQuery:(g,c)=>({...g,searchQuery:c.payload}),includeExpiredToggled:g=>({...g,includeExpired:!g.includeExpired}),isFetching:g=>({...g,hasFetched:!1}),setMigrationResult:(g,c)=>({...g,migrationResult:c.payload})}}),{apiKeysLoaded:s,includeExpiredToggled:r,isFetching:m,setSearchQuery:d,setMigrationResult:o}=i.actions,a={apiKeys:i.reducer}},12352:(j,I,e)=>{"use strict";e.d(I,{getAuthProviderStatus:()=>d,getRegisteredAuthProviders:()=>s,registerAuthProvider:()=>i});const t=[],n={};function i(o,l){t.find(a=>a.id===o.id)||(t.push(o),l&&(n[o.id]=l))}function s(){return t}function r(o){return t.find(l=>l.id===o)}function m(o){const l=[];for(const[a,g]of Object.entries(o)){const c=t.find(h=>`auth.${h.id}`===a);if(c){const h={...g,providerId:c.id,displayName:g.name||c.displayName};l.push(h)}}return l}async function d(o){if(n[o]){const l=n[o];return l()}return{configured:!1,enabled:!1}}},91281:(j,I,e)=>{"use strict";e.d(I,{ri:()=>d,zQ:()=>l});var t=e(78209),n=e(73289),i=e(66574),s=e(18771),r=e(12352),m=e(4242);function d(){return async a=>{if(i.contextSrv.hasPermission(s.AccessControlAction.SettingsRead)){a((0,m.uX)());const g=await(0,n.i)().get("/api/admin/settings");return a((0,m.AW)(g)),await a(o()),a((0,m._E)()),g}}}function o(){return async a=>{const g=(0,r.getRegisteredAuthProviders)(),c={},h=[];for(const b of g)h.push((0,r.getAuthProviderStatus)(b.id));const f=await Promise.all(h);for(let b=0;b<g.length;b++){const v=g[b],y=f[b];c[v.id]=y}a((0,m.AB)(c))}}function l(a){return async g=>{if(i.contextSrv.hasPermission(s.AccessControlAction.SettingsWrite))try{return await(0,t.n)((0,n.i)().fetch({url:"/api/admin/settings",method:"PUT",data:a,showSuccessAlert:!1,showErrorAlert:!1})),g((0,m.q$)()),!0}catch(c){if(console.log(c),(0,n.kW)(c)){c.isHandled=!0;const h={message:c.data?.message,errors:c.data?.errors};return g((0,m.sT)(h)),!1}}return!1}}},4242:(j,I,e)=>{"use strict";e.d(I,{AB:()=>r,AW:()=>s,ZP:()=>h,_E:()=>d,gG:()=>g,q$:()=>l,sT:()=>o,uX:()=>m});var t=e(34099);const n={settings:{},providerStatuses:{},isLoading:!1},i=(0,t.oM)({name:"authConfig",initialState:n,reducers:{settingsUpdated:(f,b)=>({...f,settings:b.payload}),providerStatusesLoaded:(f,b)=>({...f,providerStatuses:b.payload}),loadingBegin:f=>({...f,isLoading:!0}),loadingEnd:f=>({...f,isLoading:!1}),setError:(f,b)=>({...f,updateError:b.payload}),resetError:f=>({...f,updateError:void 0}),setWarning:(f,b)=>({...f,warning:b.payload}),resetWarning:f=>({...f,warning:void 0})}}),{settingsUpdated:s,providerStatusesLoaded:r,loadingBegin:m,loadingEnd:d,setError:o,resetError:l,setWarning:a,resetWarning:g}=i.actions,h={authConfig:i.reducer}},67572:(j,I,e)=>{"use strict";e.d(I,{CN:()=>h.CN,Hv:()=>v,OH:()=>D,Zi:()=>b,jL:()=>P,t4:()=>u,vN:()=>M,wo:()=>S,yC:()=>y,yF:()=>x,zs:()=>C,zu:()=>E});var t=e(4371),n=e(78209),i=e(94469),s=e(53933),r=e(73289),m=e(26129),d=e(33877),o=e(73807),l=e(66574),a=e(284),g=e(1631),c=e(49079),h=e(41938);function f({baseURL:R}){async function O(T){try{const{data:U,...L}=await(0,n.n)((0,r.i)().fetch({...T,url:R+T.url,showErrorAlert:T.showErrorAlert}));return{data:U,meta:L}}catch(U){return T.manageError?T.manageError(U):{error:U}}}return O}const b=(0,t.LC)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:f({baseURL:"/api"}),endpoints:R=>({getFolder:R.query({providesTags:(O,T,U)=>[{type:"getFolder",id:U}],query:O=>({url:`/folders/${O}`,params:{accesscontrol:!0}})}),newFolder:R.mutation({query:({title:O,parentUid:T})=>({method:"POST",url:"/folders",data:{title:O,parentUid:T}}),onQueryStarted:({parentUid:O},{queryFulfilled:T,dispatch:U})=>{T.then(async({data:L})=>{await l.contextSrv.fetchUserPermissions(),U((0,d.$l)((0,o.AT)("Folder created"))),U((0,g.it)({parentUID:O,pageSize:c.IV})),m.E1.push(i.u.stripBaseFromUrl(L.url))})}}),saveFolder:R.mutation({invalidatesTags:["getFolder"],query:({uid:O,title:T,version:U})=>({method:"PUT",url:`/folders/${O}`,data:{title:T,version:U}}),onQueryStarted:({parentUid:O},{queryFulfilled:T,dispatch:U})=>{T.then(()=>{U((0,g.it)({parentUID:O,pageSize:c.IV}))})}}),moveFolder:R.mutation({invalidatesTags:["getFolder"],query:({folder:O,destinationUID:T})=>({url:`/folders/${O.uid}/move`,method:"POST",data:{parentUID:T}}),onQueryStarted:({folder:O,destinationUID:T},{queryFulfilled:U,dispatch:L})=>{const{parentUid:V}=O;U.then(()=>{L((0,g.it)({parentUID:V,pageSize:c.IV})),L((0,g.it)({parentUID:T,pageSize:c.IV}))})}}),deleteFolder:R.mutation({query:({uid:O})=>({url:`/folders/${O}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:O},{queryFulfilled:T,dispatch:U})=>{T.then(()=>{U((0,g.it)({parentUID:O,pageSize:c.IV}))})}}),getAffectedItems:R.query({queryFn:async O=>{const U=Object.keys(O.folder).filter(w=>O.folder[w]).map(w=>(0,r.i)().get(`/api/folders/${w}/counts`)),L=await Promise.all(U),V={folder:Object.values(O.folder).filter(s.fQ).length,dashboard:Object.values(O.dashboard).filter(s.fQ).length,libraryPanel:0,alertRule:0};for(const w of L)V.folder+=w.folder,V.dashboard+=w.dashboard,V.alertRule+=w.alertrule??0;return{data:V}}}),moveItems:R.mutation({invalidatesTags:["getFolder"],queryFn:async({selectedItems:O,destinationUID:T},U,L,V)=>{const w=Object.keys(O.dashboard).filter(B=>O.dashboard[B]),K=Object.keys(O.folder).filter(B=>O.folder[B]);for(const B of K)await V({url:`/folders/${B}/move`,method:"POST",data:{parentUID:T}});for(const B of w){const _={dashboard:(await(0,r.i)().get(`/api/dashboards/uid/${B}`)).dashboard,folderUid:T,overwrite:!1,message:""};await V({url:"/dashboards/db",method:"POST",data:_})}return{data:void 0}},onQueryStarted:({destinationUID:O,selectedItems:T},{queryFulfilled:U,dispatch:L})=>{const V=Object.keys(T.dashboard).filter(K=>T.dashboard[K]),w=Object.keys(T.folder).filter(K=>T.folder[K]);U.then(()=>{L((0,g.it)({parentUID:O,pageSize:c.IV})),L((0,g.Nc)([...w,...V]))})}}),deleteItems:R.mutation({queryFn:async({selectedItems:O},T,U,L)=>{const V=Object.keys(O.dashboard).filter(K=>O.dashboard[K]),w=Object.keys(O.folder).filter(K=>O.folder[K]);for(const K of w)await L({url:`/folders/${K}`,method:"DELETE",params:{forceDeleteRules:!1}});for(const K of V)await L({url:`/dashboards/uid/${K}`,method:"DELETE"});return{data:void 0}},onQueryStarted:({selectedItems:O},{queryFulfilled:T,dispatch:U})=>{const L=Object.keys(O.dashboard).filter(w=>O.dashboard[w]),V=Object.keys(O.folder).filter(w=>O.folder[w]);T.then(()=>{U((0,g.Nc)([...V,...L]))})}}),saveDashboard:R.mutation({query:({dashboard:O,folderUid:T,message:U,overwrite:L})=>({url:"/dashboards/db",method:"POST",data:{dashboard:O,folderUid:T,message:U??"",overwrite:!!L}}),onQueryStarted:({folderUid:O},{queryFulfilled:T,dispatch:U})=>{a.H.ignoreNextSave(),T.then(async()=>{await l.contextSrv.fetchUserPermissions(),U((0,g.it)({parentUID:O,pageSize:c.IV}))})}})})}),{endpoints:v,useDeleteFolderMutation:y,useDeleteItemsMutation:E,useGetAffectedItemsQuery:C,useGetFolderQuery:u,useMoveFolderMutation:D,useMoveItemsMutation:P,useNewFolderMutation:S,useSaveDashboardMutation:x,useSaveFolderMutation:M}=b},49079:(j,I,e)=>{"use strict";e.d(I,{IV:()=>r,ry:()=>m,xH:()=>d});var t=e(73289),n=e(15758),i=e(63064),s=e(6092);const r=50;async function m(o,l,a=1,g=r){return(await(0,t.i)().get("/api/folders",{parentUid:o,page:a,limit:g})).map(f=>({kind:"folder",uid:f.uid,title:f.title,parentTitle:l,parentUID:o,url:`/dashboards/f/${f.uid}/`}))}async function d(o,l=1,a=r){const c=await(0,i.getGrafanaSearcher)().search({kind:["dashboard"],query:"*",location:o||"general",from:(l-1)*a,limit:a});return c.view.map(h=>{const f=(0,s.f9)(h,c.view);return f.parentUID===n.YQ&&(f.parentUID=void 0),f})}},50837:(j,I,e)=>{"use strict";e.d(I,{X:()=>o});var t=e(27702),n=e(57704),i=e(63439),s=e(21323),r=e(67572),m=e(65322);function d(l,a,g,c){const h=l+a+g+c,f=[];l&&f.push((0,m.t)("browse-dashboards.counts.folder","{{count}} folder",{count:l})),a&&f.push((0,m.t)("browse-dashboards.counts.dashboard","{{count}} dashboard",{count:a})),g&&f.push((0,m.t)("browse-dashboards.counts.libraryPanel","{{count}} library panel",{count:g})),c&&f.push((0,m.t)("browse-dashboards.counts.alertRule","{{count}} alert rule",{count:c}));let b=(0,m.t)("browse-dashboards.counts.total","{{count}} item",{count:h});return f.length>0&&(b+=`: ${f.join(", ")}`),b}const o=({selectedItems:l})=>{const{data:a,isFetching:g,isLoading:c,error:h}=(0,r.zs)(l);return t.createElement(t.Fragment,null,t.createElement(s.x,{element:"p",color:"secondary"},a&&d(a.folder,a.dashboard,a.libraryPanel,a.alertRule),(g||c)&&t.createElement(n.Z,{width:200})),h&&t.createElement(i.b,{severity:"error",title:"Unable to retrieve descendant information"}))}},4571:(j,I,e)=>{"use strict";e.d(I,{A:()=>s});var t=e(27702),n=e(66310),i=e(6309);function s({children:r,level:m}){const d=(0,n.l4)(),o=`var(${i.w}, ${d.spacing(2)})`;return t.createElement("span",{style:{paddingLeft:`calc(${o} * ${m})`}},r)}},25237:(j,I,e)=>{"use strict";e.d(I,{Nc:()=>r,it:()=>m,si:()=>d});var t=e(15758),n=e(18771),i=e(49079),s=e(59648);const r=(0,n.createAsyncThunk)("browseDashboards/refreshParents",async(o,{getState:l,dispatch:a})=>{const{browseDashboards:g}=l(),{rootItems:c,childrenByParentUID:h}=g,f=new Set;for(const b of o){const v=(0,s.i)(c?.items??[],h,b);f.add(v?.parentUID)}for(const b of f)a(m({parentUID:b,pageSize:i.IV}))}),m=(0,n.createAsyncThunk)("browseDashboards/refetchChildren",async({parentUID:o,pageSize:l})=>{const a=o===t.YQ?void 0:o;let g=1,c="folder",h=await(0,i.ry)(a,void 0,g,l),f=h.length<l;if(c==="folder"&&f){c="dashboard",g=1;const b=await(0,i.xH)(a,g,l);f=b.length<l,h=h.concat(b)}return{children:h,lastPageOfKind:f,page:g,kind:c}}),d=(0,n.createAsyncThunk)("browseDashboards/fetchNextChildrenPage",async({parentUID:o,excludeKinds:l=[],pageSize:a},g)=>{const c=!l.includes("dashboard"),h=o===t.YQ?void 0:o,f=g.getState().browseDashboards,b=h?f.childrenByParentUID[h]:f.rootItems;let v=1,y;if(b?b.lastFetchedKind==="dashboard"&&!b.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${h} but that collection is fully loaded`):b.lastFetchedKind==="folder"&&b.lastKindHasMoreItems?(v=b.lastFetchedPage+1,y="folder"):c&&(v=b.lastFetchedKind==="folder"?1:b.lastFetchedPage+1,y="dashboard"):(v=1,y="folder"),!y)return;let E=y==="folder"?await(0,i.ry)(h,void 0,v,a):await(0,i.xH)(h,v,a),C=E.length<a;if(y==="folder"&&C&&c){y="dashboard",v=1;const u=await(0,i.xH)(h,v,a);C=u.length<a,E=E.concat(u)}return{children:E,lastPageOfKind:C,page:v,kind:y}})},1631:(j,I,e)=>{"use strict";e.d(I,{MH:()=>l,qO:()=>P,si:()=>n.si,it:()=>n.it,Nc:()=>n.Nc,hO:()=>o,u6:()=>t.u6,xm:()=>t.xm,wk:()=>t.wk,m2:()=>u,zw:()=>b,aw:()=>E,$H:()=>C,Sk:()=>v,QD:()=>y,D$:()=>D});var t=e(82880),n=e(25237),i=e(27702),s=e(75892),r=e(18771),m=e(49079),d=e(59648);const o=S=>S.browseDashboards.rootItems,l=S=>S.browseDashboards.childrenByParentUID,a=S=>S.browseDashboards.openFolders,g=S=>S.browseDashboards.selectedItems,c=(0,s.P1)(o,l,a,(S,x)=>x,(S,x,M,R)=>P(R,S,x,M)),h=(0,s.P1)(g,S=>Object.values(S).some(x=>Object.values(x).some(M=>M))),f=(0,s.P1)(g,l,(S,x)=>{const M={dashboard:{...S.dashboard},folder:{...S.folder}};for(const R of Object.keys(S.folder))if(S.folder[R]){const T=x[R];if(T)for(const U of T.items)U.kind==="dashboard"&&(M.dashboard[U.uid]=!1),U.kind==="folder"&&(M.folder[U.uid]=!1)}return M});function b(S){return(0,r.useSelector)(x=>(S?x.browseDashboards.childrenByParentUID[S]:x.browseDashboards.rootItems)?"fulfilled":"pending")}function v(S){return(0,r.useSelector)(x=>c(x,S))}function y(){return(0,r.useSelector)(S=>h(S))}function E(){return(0,r.useSelector)(g)}function C(){return(0,r.useSelector)(S=>S.browseDashboards.childrenByParentUID)}function u(){return(0,r.useSelector)(S=>f(S))}function D(S=[]){const x=(0,r.useDispatch)(),M=(0,i.useRef)(!1);return(0,i.useCallback)(O=>{if(M.current)return Promise.resolve();M.current=!0;const T=x((0,n.si)({parentUID:O,excludeKinds:S,pageSize:m.IV}));return T.finally(()=>M.current=!1),T},[x,S])}function P(S,x,M,R,O=0,T=[],U=[]){function L(k,A,z){if(T.includes(k.kind)||U.includes(k.uid))return[];const H=P(k.uid,x,M,R,z+1,T,U),Q=!!R[k.uid],X=M[k.uid]?.items.length===0;return Q&&X&&!T.includes("empty-folder")&&H.push({isOpen:!1,level:z+1,item:{kind:"ui",uiKind:"empty-folder",uid:k.uid+"empty-folder"},parentUID:A}),[{item:k,parentUID:A,level:z,isOpen:Q},...H]}const V=S&&R[S]||O===0,w=S?M[S]:x;let B=((S?V&&w?.items:w?.items)||[]).flatMap(k=>L(k,S,O));const W=T.includes("dashboard")&&w?.lastFetchedKind==="dashboard";return(O===0&&!w||V&&w&&!(w.isFullyLoaded||W))&&(B=B.concat((0,d.k)(m.IV,S,O))),B}},82880:(j,I,e)=>{"use strict";e.d(I,{ZP:()=>C,u6:()=>E,xm:()=>v,wk:()=>y});var t={};e.r(t),e.d(t,{fetchNextChildrenPageFulfilled:()=>m,refetchChildrenFulfilled:()=>r,setAllSelection:()=>l,setFolderOpenState:()=>d,setItemSelectionState:()=>o});var n=e(34099),i=e(25237),s=e(59648);function r(u,D){const{children:P,page:S,kind:x,lastPageOfKind:M}=D.payload,{parentUID:R}=D.meta.arg,O={items:P,lastFetchedKind:x,lastFetchedPage:S,lastKindHasMoreItems:!M,isFullyLoaded:x==="dashboard"&&M};R?u.childrenByParentUID[R]=O:u.rootItems=O}function m(u,D){const P=D.payload;if(!P)return;const{children:S,page:x,kind:M,lastPageOfKind:R}=P,{parentUID:O,excludeKinds:T=[]}=D.meta.arg,V={items:((O?u.childrenByParentUID[O]:u.rootItems)?.items??[]).concat(S),lastFetchedKind:M,lastFetchedPage:x,lastKindHasMoreItems:!R,isFullyLoaded:(T.includes("dashboard")||M==="dashboard")&&R};if(!O){u.rootItems=V;return}if(u.childrenByParentUID[O]=V,u.selectedItems.folder[O])for(const K of S)u.selectedItems[K.kind][K.uid]=!0}function d(u,D){const{folderUID:P,isOpen:S}=D.payload;u.openFolders[P]=S}function o(u,D){const{item:P,isSelected:S}=D.payload;function x(R,O){if(u.selectedItems[R][O]=S,R!=="folder")return;let T=u.childrenByParentUID[O];for(const U of T?.items??[])x(U.kind,U.uid)}x(P.kind,P.uid);let M=P.parentUID;for(;M;){const R=(0,s.i)(u.rootItems?.items??[],u.childrenByParentUID,M);if(!R)break;S||(u.selectedItems[R.kind][R.uid]=!1),M=R.parentUID}u.selectedItems.$all=u.rootItems?.items?.every(R=>u.selectedItems[R.kind][R.uid])??!1}function l(u,D){const{isSelected:P,folderUID:S}=D.payload;if(u.selectedItems.$all=P,P){let M=function(R){const O=R?u.childrenByParentUID[R]:u.rootItems;if(O)for(const T of O.items)u.selectedItems[T.kind][T.uid]=P,T.kind==="folder"&&M(T.uid)};var x=M;M(S)}else for(const M in u.selectedItems){if(!(M==="dashboard"||M==="panel"||M==="folder"))continue;const R=u.selectedItems[M];for(const O in R)R[O]=P}}const{fetchNextChildrenPageFulfilled:a,refetchChildrenFulfilled:g,...c}=t,h={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},f=(0,n.oM)({name:"browseDashboards",initialState:h,reducers:c,extraReducers:u=>{u.addCase(i.si.fulfilled,a),u.addCase(i.it.fulfilled,g)}}),b=f.reducer,{setFolderOpenState:v,setItemSelectionState:y,setAllSelection:E}=f.actions,C={browseDashboards:b}},59648:(j,I,e)=>{"use strict";e.d(I,{i:()=>t,k:()=>n});function t(i,s,r){for(const m of i)if(m.uid===r)return m;for(const m in s){const d=s[m];if(d){for(const o of d.items)if(o.uid===r)return o}}}function n(i,s,r){return new Array(i).fill(null).map((m,d)=>({parentUID:s,level:r,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${s}-pagination-${d}`}}))}},6309:(j,I,e)=>{"use strict";e.d(I,{f:()=>n,w:()=>t});const t="--dashboards-tree-indentation";var n=(i=>(i[i.Unselected=0]="Unselected",i[i.Selected=1]="Selected",i[i.Mixed=2]="Mixed",i))(n||{})},90131:(j,I,e)=>{"use strict";e.d(I,{D:()=>t,Z:()=>n});const t="connections",n={Base:`/${t}`,DataSources:`/${t}/datasources`,DataSourcesNew:`/${t}/datasources/new`,DataSourcesEdit:`/${t}/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${t}/add-new-connection`,DataSourcesDetails:`/${t}/datasources/:id`}},65808:(j,I,e)=>{"use strict";e.d(I,{M:()=>s});var t=e(7662),n=e(21691),i=e(64248);function s(r){const{uid:m}=(0,t.UO)(),d=(0,t.TH)(),o=(0,n.wl)(m),l=(0,i.bJ)(o.type),a=new URLSearchParams(d.search),g=(0,n.MF)(m,r||a.get("page"));return{navId:"connections-datasources",pageNav:{...g.main,text:o.name,subTitle:`Type: ${l?.name}`,children:(g.main.children||[]).map(h=>({...h,url:h.url?.replace("datasources/edit/","/connections/datasources/edit/")}))}}}},12142:(j,I,e)=>{"use strict";e.d(I,{I0:()=>d,K:()=>l,Yu:()=>o});var t=e(26811),n=e(78209),i=e(10864),s=e(26473);const r=({sourceUID:a,targetUID:g,...c})=>{const h=(0,i.F)().getInstanceSettings(a),f=(0,i.F)().getInstanceSettings(g);if(h&&h?.uid!==void 0&&f&&f.uid!==void 0)return{...c,source:h,target:f}},m=a=>!!a,d=a=>({...a,correlations:a.correlations.map(r).filter(m)});function o(a){return a.data}const l=()=>{const{backend:a}=(0,s.p)(),[g,c]=(0,t.Z)(C=>(0,n.n)(a.fetch({url:"/api/datasources/correlations",params:{page:C.page},method:"GET",showErrorAlert:!1})).then(o).then(d),[a]),[h,f]=(0,t.Z)(({sourceUID:C,...u})=>a.post(`/api/datasources/uid/${C}/correlations`,u).then(D=>{const P=r(D.result);if(P!==void 0)return P;throw new Error("invalid sourceUID")}),[a]),[b,v]=(0,t.Z)(({sourceUID:C,uid:u})=>a.delete(`/api/datasources/uid/${C}/correlations/${u}`),[a]),[y,E]=(0,t.Z)(({sourceUID:C,uid:u,...D})=>a.patch(`/api/datasources/uid/${C}/correlations/${u}`,D).then(P=>{const S=r(P.result);if(S!==void 0)return S;throw new Error("invalid sourceUID")}),[a]);return{create:{execute:f,...h},update:{execute:E,...y},get:{execute:c,...g},remove:{execute:v,...b}}}},64077:(j,I,e)=>{"use strict";e.d(I,{n:()=>m,r:()=>o});var t=e(78209),n=e(24094),i=e(73289),s=e(18262),r=e(12142);const m=(l,a,g)=>(l.forEach(c=>{const h=c.refId;if(!h)return;let f=g[h];if(f===void 0&&c.meta?.preferredVisualisationType==="rawPrometheus"){const v=(0,s.a)(h);f=g[v]}const b=a.filter(v=>v.source.uid===f);d(c,b)}),l),d=(l,a)=>{l.fields.forEach(g=>{g.config.links=g.config.links?.filter(c=>c.origin!==n.n1.Correlations)||[],a.map(c=>{c.config?.field===g.name&&g.config.links.push({internal:{query:c.config?.target,datasourceUid:c.target.uid,datasourceName:c.target.name,transformations:c.config?.transformations},url:"",title:c.label||c.target.name,origin:n.n1.Correlations})})})},o=async l=>(0,t.n)((0,i.i)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:l}})).then(r.Yu).then(r.I0)},39705:(j,I,e)=>{"use strict";e.d(I,{Bl:()=>C,FJ:()=>b,Mi:()=>c,RS:()=>y,Rh:()=>l,WJ:()=>f,Ym:()=>a,bS:()=>h,jI:()=>E,r5:()=>v,zZ:()=>g});var t=e(4371),n=e(78209),i=e(73289),s=e(33877),r=e(73807);function m(u){return typeof u=="object"&&u!=null&&"error"in u}const d=({baseUrl:u})=>async D=>{try{const{data:P,...S}=await(0,n.n)((0,i.i)().fetch({...D,url:u+D.url,showErrorAlert:D.showErrorAlert}));return{data:P,meta:S}}catch(P){return D.manageError?D.manageError(P):{error:P}}},o=u=>({error:(0,i.kW)(u)&&u.status!==404?u:null}),l=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:d({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:u=>({getPublicDashboard:u.query({query:D=>({url:`/dashboards/uid/${D}/public-dashboards`,manageError:o,showErrorAlert:!1}),async onQueryStarted(D,{dispatch:P,queryFulfilled:S}){try{await S}catch(x){m(x)&&(0,i.kW)(x.error)&&P((0,s.$l)((0,r.t_)(x.error.data.message)))}},providesTags:(D,P,S)=>[{type:"PublicDashboard",id:S}]}),createPublicDashboard:u.mutation({query:D=>({url:`/dashboards/uid/${D.dashboard.uid}/public-dashboards`,method:"POST",data:D.payload}),async onQueryStarted({dashboard:D,payload:P},{dispatch:S,queryFulfilled:x}){const{data:M}=await x;S((0,s.$l)((0,r.AT)("Dashboard is public!"))),D.updateMeta({publicDashboardUid:M.uid,publicDashboardEnabled:M.isEnabled})},invalidatesTags:(D,P,{dashboard:S})=>[{type:"PublicDashboard",id:S.uid}]}),updatePublicDashboard:u.mutation({query:D=>({url:`/dashboards/uid/${D.dashboard.uid}/public-dashboards/${D.payload.uid}`,method:"PATCH",data:D.payload}),async onQueryStarted({dashboard:D,payload:P},{dispatch:S,queryFulfilled:x}){const{data:M}=await x;S((0,s.$l)((0,r.AT)("Public dashboard updated!"))),D.updateMeta&&D.updateMeta({publicDashboardUid:M.uid,publicDashboardEnabled:M.isEnabled})},invalidatesTags:(D,P,{payload:S})=>[{type:"PublicDashboard",id:S.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:u.mutation({query:()=>({url:""})}),deleteRecipient:u.mutation({query:()=>({url:""})}),reshareAccessToRecipient:u.mutation({query:()=>({url:""})}),getActiveUsers:u.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:u.query({query:()=>({url:""}),providesTags:(D,P,S)=>[{type:"ActiveUserDashboards",id:S}]}),listPublicDashboards:u.query({query:(D=1)=>({url:`/dashboards/public-dashboards?page=${D}&perpage=8`}),transformResponse:D=>({...D,totalPages:Math.ceil(D.totalCount/D.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:u.mutation({query:D=>({url:`/dashboards/uid/${D.dashboardUid}/public-dashboards/${D.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:D,uid:P},{dispatch:S,queryFulfilled:x}){await x,S((0,s.$l)((0,r.AT)("Public dashboard deleted!"))),D?.updateMeta({publicDashboardUid:P,publicDashboardEnabled:!1})},invalidatesTags:(D,P,{dashboardUid:S})=>[{type:"PublicDashboard",id:S},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]})})}),{useGetPublicDashboardQuery:a,useCreatePublicDashboardMutation:g,useUpdatePublicDashboardMutation:c,useDeletePublicDashboardMutation:h,useListPublicDashboardsQuery:f,useAddRecipientMutation:b,useDeleteRecipientMutation:v,useReshareAccessToRecipientMutation:y,useGetActiveUsersQuery:E,useGetActiveUserDashboardsQuery:C}=l},50389:(j,I,e)=>{"use strict";e.d(I,{E:()=>a});var t=e(89949),n=e(10864),i=e(12308),s=e(75766),r=e(73668),m=e(41139),d=e(5399),o=e(6230);function l(g){return g.libraryPanel&&typeof g.libraryPanel.name=="string"&&typeof g.libraryPanel.uid=="string"}class a{async makeExportable(c){c.cleanUpRepeats();const h=c.getSaveModelClone();h.id=null,c.processRepeats();const f=[],b={},v={},y={},E=new Map;for(const P of h.getVariables())y[P.name]=P;const C=(P,S)=>{if(P.datasource===void 0){P.datasource=S;return}let x=P.datasource,M=null;const R=x?.uid;return R&&R.indexOf("$")===0&&(M=y[R.substring(1)],M&&M.current&&(x=M.current.value)),(0,n.F)().get(x).then(O=>{if(O.meta?.builtIn||(b["datasource"+O.meta?.id]={type:"datasource",id:O.meta.id,name:O.meta.name,version:O.meta.info.version||"1.0.0"},M))return;const T="DS_"+O.name.replace(" ","_").toUpperCase();v[T]={name:T,label:O.name,description:"",type:"datasource",pluginId:O.meta?.id,pluginName:O.meta?.name},P.datasource={type:O.meta.id,uid:"${"+T+"}"}})},u=async P=>{if(P.type!=="row"){if(await C(P),P.targets)for(const x of P.targets)await C(x,P.datasource);const S=i.default.panels[P.type];S&&(b["panel"+S.id]={type:"panel",id:S.id,name:S.name,version:S.info.version})}},D=async P=>{if((0,r.V)(P)){const{name:S,uid:x}=P.libraryPanel;let M=P.libraryPanel.model;M||(M=(await(0,s.Mh)(x,!0)).model),await C(M);const{gridPos:R,id:O,...T}=M;E.has(x)||E.set(x,{name:S,uid:x,kind:m.V.Panel,model:T})}};try{for(const x of h.panels)if(await u(x),x.collapsed!==void 0&&x.collapsed===!0&&x.panels)for(const M of x.panels)await u(M);for(const x of h.getVariables())(0,d.Xh)(x)&&(await C(x),x.options=[],x.current={},x.refresh=x.refresh!==o.Bd.never?x.refresh:o.Bd.onDashboardLoad);for(const x of h.annotations.list)await C(x);b.grafana={type:"grafana",id:"grafana",name:"Grafana",version:i.default.buildInfo.version};for(const x of h.panels)if(await D(x),x.collapsed!==void 0&&x.collapsed===!0&&x.panels)for(const M of x.panels)await D(M);(0,t.each)(v,x=>{f.push(x)});for(const x of h.getVariables())if((0,d.VC)(x)){const M="VAR_"+x.name.replace(" ","_").toUpperCase();f.push({name:M,type:"constant",label:x.label||x.name,value:x.query,description:""}),x.query="${"+M+"}",x.current={value:x.query,text:x.query,selected:!1},x.options=[x.current]}const P=[...E.entries()].reduce((x,[M,R])=>(x[M]=R,x),{}),S=(0,t.defaults)({__inputs:f,__elements:P,__requires:(0,t.sortBy)(b,["id"])},h);for(let x=0;x<S.panels.length;x++){const M=S.panels[x];l(M)&&(S.panels[x]={gridPos:M.gridPos,id:M.id,libraryPanel:{uid:M.libraryPanel.uid,name:M.libraryPanel.name}})}return S}catch(P){return console.error("Export failed:",P),{error:P}}}}},80101:(j,I,e)=>{"use strict";e.d(I,{NN:()=>Se,hf:()=>ye,ZP:()=>de});var t=e(42844),n=e(27702),i=e(27173),s=e(7662),r=e(48154),m=e(74639),d=e(26129),o=e(75340),l=e(3613),a=e(65333),g=e(77720),c=e(30973),h=e(60729),f=e(84693),b=e(75443),v=e(80557),y=e(12308),E=e(73807),C=e(66574);function u(_e,Je){const[Ue,$e]=(0,n.useState)();return(0,n.useEffect)(()=>{const Qe=_e.subscribe(Je,$e);return()=>Qe.unsubscribe()},[_e,Je]),Ue}var D=e(65322),P=e(78467),S=e(66310),x=e(80434),M=e(66670),R=e(73453),O=e(86312),T=e(34667),U=e(89746),L=e(8594),V=e(18771),w=e(10974);const B=({dashboard:_e})=>{const Je=(0,n.useMemo)(()=>(0,L.uZ)(),[]),Ue=(0,V.useDispatch)(),$e=(0,V.useSelector)(Qe=>Qe.dashboard.initialDatasource);return n.createElement(U.v,null,n.createElement(U.v.Item,{key:"add-visualisation",testId:m.wl.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,D.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const Qe=(0,L.LU)(_e,$e);(0,O.ff)("dashboards_toolbar_add_clicked",{item:"add_visualization"}),d.E1.partial({editPanel:Qe}),Ue((0,w.Rd)(void 0))}}),T.config.featureToggles.vizAndWidgetSplit&&n.createElement(U.v.Item,{key:"add-widget",testId:m.wl.pages.AddDashboard.itemButton("Add new widget menu item"),label:(0,D.t)("dashboard.add-menu.widget","Widget"),onClick:()=>{(0,O.ff)("dashboards_toolbar_add_clicked",{item:"add_widget"}),d.E1.partial({addWidget:!0})}}),n.createElement(U.v.Item,{key:"add-row",testId:m.wl.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,D.t)("dashboard.add-menu.row","Row"),onClick:()=>{(0,O.ff)("dashboards_toolbar_add_clicked",{item:"add_row"}),(0,L.L_)(_e)}}),n.createElement(U.v.Item,{key:"add-panel-lib",testId:m.wl.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,D.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{(0,O.ff)("dashboards_toolbar_add_clicked",{item:"import_from_library"}),(0,L.RB)(_e)}}),n.createElement(U.v.Item,{key:"add-panel-clipboard",testId:m.wl.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,D.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{(0,O.ff)("dashboards_toolbar_add_clicked",{item:"paste_panel"}),(0,L.Dh)(_e,Je)},disabled:!Je}))},_=({dashboard:_e})=>{const Je=k((0,S.l4)()),[Ue,$e]=(0,n.useState)(!1);return n.createElement(x.L,{overlay:()=>n.createElement(B,{dashboard:_e}),placement:"bottom",offset:[0,6],onVisibleChange:$e},n.createElement(M.zx,{icon:"panel-add",size:"lg",fill:"text",className:(0,t.cx)(Je.button,Je.buttonIcon,Je.buttonText),"data-testid":m.wl.components.PageToolbar.itemButton("Add button")},n.createElement(D.cC,{i18nKey:"dashboard.toolbar.add"},"Add"),n.createElement(R.J,{name:Ue?"angle-up":"angle-down",size:"lg"})))};function k(_e){return{button:(0,t.css)({label:"add-panel-button",padding:_e.spacing(.5,.5,.5,.75),height:_e.spacing((_e.components.height.sm+_e.components.height.md)/2),borderRadius:_e.shape.radius.default}),buttonIcon:(0,t.css)({svg:{margin:0}}),buttonText:(0,t.css)({label:"add-panel-button-text",fontSize:_e.typography.body.fontSize,span:{marginLeft:_e.spacing(.67)}})}}var A=e(37778),z=e(75261),H=e(79517),Q=e(83341),X=e(43620),te=e(78474),oe=e(57082),Z=e(89033),le=e(19067);const ce=({dashboard:_e})=>{const[Je]=(0,Z.K)(),{showModal:Ue,hideModal:$e}=(0,n.useContext)(h.kr);return(0,n.useEffect)(()=>(Je.shareView&&Ue(le.ShareModal,{dashboard:_e,onDismiss:$e,activeTab:String(Je.shareView)}),()=>{$e()}),[Ue,$e,_e,Je.shareView]),n.createElement(te.u,{tooltip:(0,D.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{Ue(le.ShareModal,{dashboard:_e,onDismiss:$e})}})},q={setStarred:P.OQ,updateTimeZoneForSession:Q.YT},ne=(0,i.connect)(null,q),pe=m.wl.pages.Dashboard.DashNav,re=[],ie=[];function Se(_e){re.push(_e)}function ye(_e){ie.push(_e)}const Ce=n.memo(_e=>{(0,s.TH)();const Je=(0,o.N)();u(_e.dashboard.events,X.hS);const Ue=_e.dashboard.snapshot?.originalUrl??"",$e=()=>{window.location.href=r.QX.sanitizeUrl(_e.dashboard.snapshot.originalUrl)},Qe=(0,E.iG)(),tt=()=>{try{const ft=new URL(r.QX.sanitizeUrl(Ue),y.default.appUrl),ct=new URL(y.default.appUrl);ft.host!==ct.host?C.h$.publish(new X.Dn({component:l.s,props:{title:"Proceed to external site?",modalClass:we,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,Ue)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:$e}})):$e()}catch(ft){Qe.error("Invalid URL",ft instanceof Error?ft.message:void 0)}},lt=()=>{const ft=(0,z.h4)(),{dashboard:ct,setStarred:ge}=_e;ft.starDashboard(ct.uid,!!ct.meta.isStarred).then(Be=>{ge({id:ct.uid,title:ct.title,url:ct.meta.url??"",isStarred:Be}),ct.meta.isStarred=Be,Je()})},Me=()=>{d.E1.partial({editview:"settings"})},De=()=>{H.r0.prev()},We=()=>{H.r0.next()},qe=()=>{H.r0.stop(),Je()},st=(ft,ct)=>{ft.map((ge,Be)=>{const Le=ge.component,he=n.createElement(Le,{..._e,key:`button-custom-${Be}`});typeof ge.index=="number"?ct.splice(ge.index,0,he):ct.push(he)})},dt=()=>H.r0.isPlaying,Tt=()=>{const{dashboard:ft,kioskMode:ct}=_e,{canStar:ge,canShare:Be,isStarred:Le}=ft.meta,he=[];if(ct||dt())return[];if(ge){let He=Le?(0,D.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,D.t)("dashboard.toolbar.mark-favorite","Mark as favorite");he.push(n.createElement(te.u,{tooltip:He,icon:Le?"favorite":"star",iconType:Le?"mono":"default",iconSize:"lg",onClick:lt,key:"button-star"}))}return Be&&he.push(n.createElement(ce,{key:"button-share",dashboard:ft})),ft.meta.publicDashboardEnabled&&he.push(n.createElement(a.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":pe.publicDashboardTag})),y.default.featureToggles.scenes&&he.push(n.createElement(te.u,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>d.E1.push(`/scenes/dashboard/${ft.uid}`)})),st(re,he),he},Nt=()=>n.createElement(g.h,{key:"playlist-buttons"},n.createElement(c.h,{tooltip:(0,D.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:De,narrow:!0}),n.createElement(c.h,{onClick:qe},n.createElement(D.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(c.h,{tooltip:(0,D.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:We,narrow:!0})),Bt=()=>{const{dashboard:ft,updateTimeZoneForSession:ct,hideTimePicker:ge}=_e;return ge?null:n.createElement(oe.C,{dashboard:ft,onChangeTimeZone:ct,key:"time-controls"})},yt=()=>{const{dashboard:ft,onAddPanel:ct,isFullscreen:ge,kioskMode:Be}=_e,{canSave:Le,canEdit:he,showSettings:He}=ft.meta,{snapshot:Pe}=ft,Ie=Pe&&Pe.originalUrl,Te=[];return dt()?[Nt(),Bt()]:Be===V.KioskMode.TV?[Bt()]:(he&&!ge&&(y.default.featureToggles.emptyDashboardPage?Te.push(n.createElement(_,{dashboard:ft,key:"panel-add-dropdown"})):Te.push(n.createElement(c.h,{tooltip:(0,D.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",iconSize:"xl",onClick:ct,key:"button-panel-add"}))),Le&&!ge&&Te.push(n.createElement(h.JY,{key:"button-save"},({showModal:Re,hideModal:ue})=>n.createElement(c.h,{tooltip:(0,D.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Re(A.d,{dashboard:ft,onDismiss:ue})}}))),Ie&&Te.push(n.createElement(c.h,{tooltip:(0,D.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:tt,icon:"link",key:"button-snapshot"})),He&&Te.push(n.createElement(c.h,{tooltip:(0,D.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Me,key:"button-settings"})),st(ie,Te),Te.push(Bt()),Te)};return n.createElement(b.A,{actions:n.createElement(n.Fragment,null,Tt(),n.createElement(v.M,{leftActionsSeparator:!0}),n.createElement(f.R,{alignment:"right"},yt()))})});Ce.displayName="DashNav";const de=ne(Ce),we=(0,t.css)({width:"max-content",maxWidth:"80vw"})},78474:(j,I,e)=>{"use strict";e.d(I,{u:()=>r});var t=e(42844),n=e(27702),i=e(66310),s=e(67437);const r=({icon:d,iconType:o,iconSize:l,tooltip:a,onClick:g,children:c})=>{const h=(0,i.wW)(m);return n.createElement("div",{className:h.noBorderContainer},d&&n.createElement(s.h,{name:d,size:l,iconType:o,tooltip:a,tooltipPlacement:"bottom",onClick:g}),c)},m=d=>({noBorderContainer:(0,t.css)`
    padding: 0 ${d.spacing(.5)};
    display: flex;
  `})},57082:(j,I,e)=>{"use strict";e.d(I,{C:()=>g});var t=e(27702),n=e(1726),i=e(32713),s=e(26862),r=e(37827),m=e(66574),d=e(65322),o=e(91368),l=e(26858),a=e(43620);class g extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=h=>{(0,l.$t)().setAutoRefresh(h),this.forceUpdate()},this.onRefresh=()=>((0,l.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{m.h$.publish(new a.Qt({direction:a.Im.Left}))},this.onMoveForward=()=>{m.h$.publish(new a.Qt({direction:a.Im.Right}))},this.onChangeTimePicker=h=>{const{dashboard:f}=this.props,b=f.timepicker,v=b.nowDelay&&h.raw.to==="now",y=n.isMathString(h.raw.from)?h.raw.from:h.from,E=n.isMathString(h.raw.to)?h.raw.to:h.to,C={from:y,to:v?"now-"+b.nowDelay:E};(0,l.$t)().setTime(C)},this.onChangeTimeZone=h=>{this.props.dashboard.timezone=h,this.props.onChangeTimeZone(h),this.onRefresh()},this.onChangeFiscalYearStartMonth=h=>{this.props.dashboard.fiscalYearStartMonth=h,this.onRefresh()},this.onZoom=()=>{m.h$.publish(new a.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(i.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:h,isOnCanvas:f}=this.props,{refresh_intervals:b}=h.timepicker,v=(0,l.$t)().getValidIntervals(b||s.o5),y=(0,l.$t)().timeRange(),E=h.getTimezone(),C=h.fiscalYearStartMonth,u=h.panelInEdit?.isEditing;let D;return h.refresh===o.Wg&&(D=(0,l.$t)().getAutoRefreshInteval().interval),t.createElement(t.Fragment,null,t.createElement(r.a,{value:y,onChange:this.onChangeTimePicker,timeZone:E,fiscalYearStartMonth:C,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:f}),t.createElement(s.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:h.refresh,intervals:v,isOnCanvas:f,tooltip:(0,d.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:u,showAutoInterval:!0,text:D}))}}},26711:(j,I,e)=>{"use strict";e.d(I,{t:()=>t.ZP});var t=e(80101)},37232:(j,I,e)=>{"use strict";e.d(I,{P:()=>v});var t=e(89949),n=e(27702),i=e(76305),s=e(74639),r=e(62499),m=e(22209),d=e(15672),o=e(63014),l=e(1128),a=e(42074),g=e(26862),c=e(26858);const h=({refreshIntervals:y,onRefreshIntervalChange:E,getIntervalsFunc:C=b,validateIntervalsFunc:u=f})=>{const[D,P]=(0,n.useState)(C(y??g.o5)),[S,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{const T=C(y??g.o5);P(T)},[C,y]);const M=(0,n.useMemo)(()=>Array.isArray(D)?D.join(","):"",[D]),R=(0,n.useCallback)(T=>{const U=T.currentTarget.value?T.currentTarget.value.split(","):[];P(U)},[P]),O=(0,n.useCallback)(T=>{const U=u(D);U===null&&E(C(D)),x(U)},[C,D,E,u]);return n.createElement(m.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:S,invalid:!!S},n.createElement(l.I,{id:"auto-refresh-input",invalid:!!S,value:M,onChange:R,onBlur:O}))},f=(y,E={getTimeSrv:c.$t})=>{try{return b(y,E),null}catch(C){return C instanceof Error?C.message:"Invalid intervals"}},b=(y,E={getTimeSrv:c.$t})=>{const C=y.filter(u=>u.trim()!=="").map(u=>u.replace(/\s+/g,""));return[...new Set(E.getTimeSrv().getValidIntervals(C))]};class v extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=E=>{const C=E.currentTarget.value;if((0,t.isEmpty)(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);if(i.isValidTimeSpan(C))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(C);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=E=>{typeof E=="string"&&this.props.onTimeZoneChange(E)},this.onWeekStartChange=E=>{this.props.onWeekStartChange(E)}}render(){return n.createElement(r.s,{label:"Time options",isOpen:!0},n.createElement(m.g,{label:"Time zone","data-testid":s.wl.components.TimeZonePicker.containerV2},n.createElement(d.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(m.g,{label:"Week start","data-testid":s.wl.components.WeekStartPicker.containerV2},n.createElement(o.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(h,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(m.g,{label:"Now delay",description:"Exclude recent data that may be incomplete."},n.createElement(l.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(m.g,{label:"Hide time picker"},n.createElement(a.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(m.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'"},n.createElement(a.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},83961:(j,I,e)=>{"use strict";e.d(I,{D:()=>As});var t=e(27702),n=e(7662),i=e(94469),s=e(74639),r=e(26129),m=e(66670),d=e(84693),o=e(75443),l=e(44644),a=e(12308),g=e(91368),c=e(18771),h=e(43620),f=e(27173),b=e(33199),v=e(42844),y=e(25111),E=e(86312),C=e(66310),u=e(62499),D=e(64022),P=e(62108),S=e(80011),x=e(73453),M=e(67437),R=e(13741);const O=({nodes:Lt,edges:Ot,direction:on,width:Xt,height:Dn,onDoubleClick:wn})=>{const Bn=(0,t.useRef)(null),Gn=(0,t.useRef)(null),Tn=(0,t.useCallback)(xt=>{wn&&wn(xt.nodes[0])},[wn]);return(0,t.useEffect)(()=>((async()=>{const Nn=await e.e(8271).then(e.t.bind(e,23874,23)),Fa={nodes:T(Nn,Lt),edges:U(Nn,Ot)},us={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:on??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Bn.current=new Nn.Network(Gn.current,Fa,us),Bn.current?.on("doubleClick",Tn)})(),()=>{Bn.current&&Bn.current.off("doubleClick")}),[on,Ot,Lt,Tn]),t.createElement("div",null,t.createElement("div",{ref:Gn,style:{width:Xt??"100%",height:Dn??"60vh"}}))};function T(Lt,Ot){const on=Ot.map(Xt=>({...Xt,shape:"box"}));return new Lt.DataSet(on)}function U(Lt,Ot){const on=Ot.map(Xt=>({...Xt,arrows:"to",dashes:!0}));return new Lt.DataSet(on)}function L({edges:Lt,nodes:Ot,show:on,title:Xt,children:Dn}){const[wn,Bn]=(0,t.useState)(on),Gn=(0,t.useCallback)(()=>Bn(!0),[Bn]),Tn=(0,t.useCallback)(()=>Bn(!1),[Bn]);return t.createElement(t.Fragment,null,t.createElement(R.u,{isOpen:wn,title:Xt,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:Tn,onDismiss:Tn},t.createElement(O,{nodes:Ot,edges:Lt})),Dn({showModal:Gn}))}const V=({id:Lt,usages:Ot})=>{const on=(0,t.useMemo)(()=>Ot.find(Dn=>Dn.variable.id===Lt),[Lt,Ot]);if(!on)return null;const Xt=on.nodes.map(Dn=>Dn.label.includes(`$${Lt}`)?{...Dn,color:"#FB7E81"}:Dn);return t.createElement(L,{show:!1,title:`Showing usages for: $${Lt}`,nodes:Xt,edges:on.edges},({showModal:Dn})=>t.createElement(M.h,{onClick:()=>Dn(),name:"code-branch",tooltip:"Show usages","data-testid":"VariablesUnknownButton"}))};var w=e(44068);const K=1e3;function B({variables:Lt,dashboard:Ot}){const[on,Xt]=(0,t.useState)(!1),[Dn,wn]=(0,t.useState)(0),[Bn,Gn]=(0,t.useState)([]),Tn=(0,C.wW)(A);(0,t.useEffect)(()=>wn(Fa=>Fa+1),[Lt,Ot]);const{loading:xt}=(0,y.Z)(async()=>{if(on&&Dn>0){const Fa=Date.now(),us=await(0,w.Yg)(Lt,Ot),vs=Date.now()-Fa;return vs>=K&&(0,E.ff)("Slow unknown variables expansion",{elapsed:vs}),wn(0),Gn(us),us}return[]},[Lt,Ot,on,Dn]),Nn=Fa=>{Fa&&(0,E.ff)("Unknown variables section expanded"),Xt(Fa)};return t.createElement("div",{className:Tn.container},t.createElement(u.s,{label:t.createElement(W,null),isOpen:on,onToggle:Nn},xt&&t.createElement(D.wc,{justify:"center"},t.createElement(D.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(P.$,{size:16}))),!xt&&Bn&&t.createElement(t.Fragment,null,Bn.length===0&&t.createElement(_,null),Bn.length>0&&t.createElement(k,{usages:Bn}))))}function W(){const Lt=(0,C.wW)(A);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(S.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(x.J,{name:"info-circle",className:Lt.infoIcon})))}function _(){return t.createElement("span",null,"No renamed or missing variables found.")}function k({usages:Lt}){const Ot=(0,C.wW)(A);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,Lt.map(on=>{const{variable:Xt}=on,{id:Dn,name:wn}=Xt;return t.createElement("tr",{key:Dn},t.createElement("td",{className:Ot.firstColumn},t.createElement("span",null,wn)),t.createElement("td",{className:Ot.defaultColumn}),t.createElement("td",{className:Ot.defaultColumn}),t.createElement("td",{className:Ot.defaultColumn}),t.createElement("td",{className:Ot.lastColumn},t.createElement(V,{id:Xt.id,usages:Lt})))})))}const A=Lt=>({container:(0,v.css)`
    margin-top: ${Lt.spacing(4)};
    padding-top: ${Lt.spacing(4)};
  `,infoIcon:(0,v.css)`
    margin-left: ${Lt.spacing(1)};
  `,defaultColumn:(0,v.css)`
    width: 1%;
  `,firstColumn:(0,v.css)`
    width: 1%;
    vertical-align: top;
    color: ${Lt.colors.text.maxContrast};
  `,lastColumn:(0,v.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var z=e(1941),H=e(51824),Q=e(60344),X=e(81587),te=e(3613);function oe({varName:Lt,isOpen:Ot=!1,onConfirm:on,onDismiss:Xt}){return t.createElement(te.s,{title:"Delete variable",isOpen:Ot,onConfirm:on,onDismiss:Xt,body:`
      Are you sure you want to delete variable "${Lt}"?
    `,modalClass:Z.modal,confirmText:"Delete"})}const Z={modal:(0,v.css)({width:"max-content",maxWidth:"80vw"})};var le=e(53933),ce=e(41355),q=e(5399),ne=e(4684),pe=e(82986),re=e(22209),ie=e(40705);const Se=[{label:"Label and value",value:pe.bU.dontHide},{label:"Value",value:pe.bU.hideLabel},{label:"Nothing",value:pe.bU.hideVariable}];function ye({onChange:Lt,hide:Ot,type:on}){const Xt=(0,t.useMemo)(()=>Se.find(Dn=>Dn.value===Ot)?.value??Se[0].value,[Ot]);return on==="constant"?null:t.createElement(re.g,{label:"Show on dashboard"},t.createElement(ie.S,{options:Se,onChange:Lt,value:Xt}))}var Ce=e(95774),de=e(62981),we=e(24446),_e=e(1781);function Je({onChange:Lt,type:Ot}){const on=(0,t.useMemo)(()=>(0,X.bi)(),[]),Xt=(0,t.useMemo)(()=>on.find(Dn=>Dn.value===Ot)??on[0],[on,Ot]);return t.createElement(_e.u,{name:"Select variable type",value:Xt,options:on,onChange:Lt,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var Ue=e(71107),$e=e(53901);const Qe=({variable:{options:Lt}})=>{const[Ot,on]=(0,t.useState)(20),[Xt,Dn]=(0,t.useState)([]),wn=(0,t.useCallback)(Gn=>{Gn.preventDefault(),on(Ot+20)},[Ot,on]),Bn=(0,C.wW)(tt);return(0,t.useEffect)(()=>Dn(Lt.slice(0,Ot)),[Ot,Lt]),Xt.length?t.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},t.createElement("h5",null,"Preview of values"),t.createElement(Ue.Z,null,Xt.map((Gn,Tn)=>t.createElement(Ue.Z,{key:`${Gn.value}-${Tn}`,className:Bn.optionContainer},t.createElement($e.W,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},t.createElement("div",{className:Bn.label},Gn.text))))),Lt.length>Ot&&t.createElement(Ue.Z,{className:Bn.optionContainer},t.createElement(m.zx,{onClick:wn,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};Qe.displayName="VariableValuesPreview";function tt(Lt){return{wrapper:(0,v.css)({display:"flex",flexDirection:"column",marginTop:Lt.spacing(2)}),optionContainer:(0,v.css)({marginLeft:Lt.spacing(.5),marginBottom:Lt.spacing(.5)}),label:(0,v.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var lt=e(89949),Me=e(24877),De=e(39655);const We=Lt=>async Ot=>{const{rootStateKey:on}=Lt;Ot((0,z.mb)(on,(0,De.wJ)({name:(0,H.E0)(Lt).name,id:Lt.id})))},qe=Lt=>async(Ot,on)=>{const{rootStateKey:Xt}=Lt;Ot((0,z.mb)(Xt,(0,De.qe)((0,X.Y6)(Lt))))},st=(Lt,Ot)=>(on,Xt)=>{const{id:Dn,rootStateKey:wn}=Lt;let Bn=null;if(Ot.match(/^(?!__).*$/)||(Bn="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Ot.match(/^\w+$/)||(Bn="Only word and digit characters are allowed in variable names"),(0,H.gt)(wn,Xt()).filter(xt=>xt.name===Ot&&xt.id!==Dn).length&&(Bn="Variable with the same name already exists"),Bn){on((0,z.mb)(wn,(0,De.y8)({newName:Ot,errorText:Bn})));return}on(dt(Lt,Ot))},dt=(Lt,Ot)=>(on,Xt)=>{const{rootStateKey:Dn}=Lt,wn=(0,H.E0)(Lt,Xt());if(wn.name===Ot){on((0,z.mb)(Dn,(0,De.Yo)((0,X.Y6)(Lt,{newName:Ot}))));return}const Bn={...(0,lt.cloneDeep)(wn),name:Ot,id:Ot},Gn=wn.global,Tn=wn.index,xt=(0,X.yQ)(Bn);on((0,z.mb)(Dn,(0,Q.VN)((0,X.Y6)(xt,{global:Gn,index:Tn,model:Bn})))),on((0,z.mb)(Dn,(0,De.Yo)((0,X.Y6)(xt,{newName:Ot})))),on((0,z.mb)(Dn,(0,Q.mZ)((0,X.Y6)(Lt,{reIndex:!1}))))},Tt=(Lt,Ot="query")=>(on,Xt)=>{const Dn=(0,X.mn)(Lt),wn=(0,H.gt)(Dn,Xt()),Bn=Bt(Ot,wn),Gn={type:Ot,id:Bn},Tn=!1,xt=(0,H.Eo)(Dn,Xt()),Nn=(0,lt.cloneDeep)(ce.z.get(Ot).initialState);Nn.id=Bn,Nn.name=Bn,Nn.rootStateKey=Dn,on((0,z.mb)(Dn,(0,Q.VN)((0,X.Y6)(Gn,{global:Tn,model:Nn,index:xt})))),r.E1.partial({editIndex:wn.length})},Nt=Lt=>(Ot,on)=>{const Xt=(0,X.mn)(Lt),Dn=on(),wn=(0,H.xD)(Xt,Dn),Bn=Dn.dashboard.getModel(),{usages:Gn}=(0,w.V)(wn,Bn),Tn=(0,w.vI)(Gn);Ot((0,z.mb)(Xt,(0,Me.j4)({usages:Gn,usagesNetwork:Tn})))};function Bt(Lt,Ot){let on=0,Xt=`${Lt}${on}`;for(;Ot.find(Dn=>Dn.id===Xt);)Xt=`${Lt}${++on}`;return Xt}var yt=(Lt=>(Lt[Lt.MaxSize=50]="MaxSize",Lt))(yt||{});const ft=(Lt,Ot)=>({editor:(0,H.AE)(Ot.identifier.rootStateKey,Lt).editor,variable:(0,H.E0)(Ot.identifier,Lt)}),ct=Lt=>({...(0,b.bindActionCreators)({variableEditorMount:We,variableEditorUnMount:qe,changeVariableName:st,updateOptions:ne.Rk},Lt),changeVariableProp:(Ot,on,Xt)=>Lt((0,z.mb)(Ot.rootStateKey,(0,Q.Pl)((0,X.Y6)(Ot,{propName:on,propValue:Xt})))),changeVariableType:(Ot,on)=>Lt((0,z.mb)(Ot.rootStateKey,(0,Q.Be)((0,X.Y6)(Ot,{newType:on})))),removeVariable:Ot=>{Lt((0,z.mb)(Ot.rootStateKey,(0,Q.mZ)((0,X.Y6)(Ot,{reIndex:!0}))))}}),ge=(0,f.connect)(ft,ct);class Be extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=Ot=>{Ot.preventDefault(),this.props.changeVariableName(this.props.identifier,Ot.currentTarget.value)},this.onTypeChange=Ot=>{Ot.value&&this.props.changeVariableType(this.props.identifier,Ot.value)},this.onLabelChange=Ot=>{Ot.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",Ot.currentTarget.value)},this.onDescriptionChange=Ot=>{this.props.changeVariableProp(this.props.identifier,"description",Ot.currentTarget.value)},this.onHideChange=Ot=>{this.props.changeVariableProp(this.props.identifier,"hide",Ot)},this.onPropChanged=({propName:Ot,propValue:on,updateOptions:Xt=!1})=>{this.props.changeVariableProp(this.props.identifier,Ot,on),Xt&&this.props.updateOptions((0,X.yQ)(this.props.variable))},this.onHandleSubmit=async Ot=>{Ot.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,X.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),r.E1.partial({editIndex:null})},this.onApply=()=>{r.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:Ot}=this.props,on=ce.z.get(this.props.variable.type).editor;if(!on)return null;const Xt=Ot.state===le.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(Je,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(Ce.e,null,"General"),t.createElement(we.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:yt.MaxSize,required:!0}),t.createElement(we.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(de.W,{name:"Description",value:Ot.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(ye,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),on&&t.createElement(on,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,q.eL)(this.props.variable)?t.createElement(Qe,{variable:this.props.variable}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(D.Lh,{spacing:"md",height:"inherit"},t.createElement(m.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(m.zx,{type:"submit","aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:Xt,variant:"secondary"},"Run query",Xt&&t.createElement(x.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(m.zx,{variant:"primary",onClick:this.onApply,"data-testid":s.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(oe,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Le=ge(Be);var he=e(85532),He=e(23852),Pe=e(66970),Ie=e(84749);const Te=({variables:Lt})=>{const Ot=(0,t.useMemo)(()=>(0,w.GQ)(Lt),[Lt]),on=(0,t.useMemo)(()=>(0,w.MJ)(Lt),[Lt]);return on.length?t.createElement(L,{show:!1,title:"Dependencies",nodes:(0,w.Of)(Ot,on),edges:on},({showModal:Xt})=>t.createElement(m.zx,{onClick:()=>{(0,E.ff)("Show variable dependencies"),Xt()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},Re=Lt=>t.createElement(f.Provider,{store:Ie.h},t.createElement(Te,{...Lt})),ue=({id:Lt,usages:Ot,isAdhoc:on})=>{const Xt=(0,t.useMemo)(()=>Ot.find(wn=>wn.variable.id===Lt),[Ot,Lt]);if(Ot.length===0||on||!Xt)return null;const Dn=Xt.nodes.map(wn=>wn.label.includes(`$${Lt}`)?{...wn,color:"#FB7E81"}:wn);return t.createElement(L,{show:!1,title:`Showing usages for: $${Lt}`,nodes:Dn,edges:Xt.edges},({showModal:wn})=>t.createElement(M.h,{onClick:()=>{(0,E.ff)("Show variable usages"),wn()},name:"code-branch",tooltip:"Show usages"}))};function xe({index:Lt,variable:Ot,usageTree:on,usagesNetwork:Xt,onEdit:Dn,onDuplicate:wn,onDelete:Bn}){const Gn=(0,C.l4)(),Tn=(0,C.wW)(fe),xt=Ve(Ot),Fa=(0,w.Rv)(Ot.id,on)>0||(0,q.Kn)(Ot),us=(0,X.yQ)(Ot);return t.createElement(he._l,{draggableId:JSON.stringify(us),index:Lt},(Ts,vs)=>t.createElement("tr",{ref:Ts.innerRef,...Ts.draggableProps,style:{userSelect:vs.isDragging?"none":"auto",background:vs.isDragging?Gn.colors.background.secondary:void 0,...Ts.draggableProps.style}},t.createElement("td",{role:"gridcell",className:Tn.column},t.createElement(m.zx,{size:"xs",fill:"text",onClick:Ws=>{Ws.preventDefault(),Dn(us)},className:Tn.nameLink,"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(Ot.name)},Ot.name)),t.createElement("td",{role:"gridcell",className:Tn.definitionColumn,onClick:Ws=>{Ws.preventDefault(),Dn(us)},"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(Ot.name)},xt),t.createElement("td",{role:"gridcell",className:Tn.column},t.createElement("div",{className:Tn.icons},t.createElement(Ne,{passed:Fa}),t.createElement(ue,{id:Ot.id,isAdhoc:(0,q.Kn)(Ot),usages:Xt}),t.createElement(M.h,{onClick:Ws=>{Ws.preventDefault(),(0,E.ff)("Duplicate variable"),wn(us)},name:"copy",tooltip:"Duplicate variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(Ot.name)}),t.createElement(M.h,{onClick:Ws=>{Ws.preventDefault(),(0,E.ff)("Delete variable"),Bn(us)},name:"trash-alt",tooltip:"Remove variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(Ot.name)}),t.createElement("div",{...Ts.dragHandleProps,className:Tn.dragHandle},t.createElement(x.J,{name:"draggabledots",size:"lg"}))))))}function Ve(Lt){let Ot="";return(0,q.Xh)(Lt)?Lt.definition?Ot=Lt.definition:typeof Lt.query=="string"&&(Ot=Lt.query):(0,q.eL)(Lt)&&(Ot=Lt.query),Ot}function Ne({passed:Lt}){const Ot=(0,C.wW)(fe);return Lt?t.createElement(x.J,{name:"check",className:Ot.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(x.J,{name:"exclamation-triangle",className:Ot.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function fe(Lt){return{dragHandle:(0,v.css)`
      cursor: grab;
      margin-left: ${Lt.spacing(1)};
    `,column:(0,v.css)`
      width: 1%;
    `,nameLink:(0,v.css)`
      cursor: pointer;
      color: ${Lt.colors.primary.text};
    `,definitionColumn:(0,v.css)`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:(0,v.css)`
      color: ${Lt.v1.palette.greenBase};
      margin-right: ${Lt.spacing(2)};
    `,iconFailed:(0,v.css)`
      color: ${Lt.v1.palette.orange};
      margin-right: ${Lt.spacing(2)};
    `,icons:(0,v.css)`
      display: flex;
      gap: ${Lt.spacing(2)};
      align-items: center;
    `}}function ve({variables:Lt,usages:Ot,usagesNetwork:on,onChangeOrder:Xt,onAdd:Dn,onEdit:wn,onDelete:Bn,onDuplicate:Gn}){const Tn=xt=>{if(!xt.destination||!xt.source)return;(0,E.ff)("Variable drag and drop");const Nn=JSON.parse(xt.draggableId);Xt(Nn,Lt[xt.source.index].index,Lt[xt.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,Lt.length===0&&t.createElement(ze,{onAdd:Dn}),Lt.length>0&&t.createElement(He.K,{direction:"column",gap:4},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(he.Z5,{onDragEnd:Tn},t.createElement(he.bK,{droppableId:"variables-list",direction:"vertical"},xt=>t.createElement("tbody",{ref:xt.innerRef,...xt.droppableProps},Lt.map((Nn,Fa)=>t.createElement(xe,{index:Fa,key:`${Nn.name}-${Fa}`,variable:Nn,usageTree:Ot,usagesNetwork:on,onDelete:Bn,onDuplicate:Gn,onEdit:wn})),xt.placeholder)))),t.createElement(He.K,null,t.createElement(Re,{variables:Lt}),t.createElement(m.zx,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:Dn,icon:"plus"},"New variable")))))}function ze({onAdd:Lt}){return t.createElement("div",null,t.createElement(Pe.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:Ot=>{Ot.preventDefault(),Lt()}}))}const Oe=(Lt,Ot)=>{const{uid:on}=Ot.dashboard,Xt=(0,H.AE)(on,Lt);return{variables:(0,H.xD)(on,Lt),idInEditor:Xt.editor.id,usagesNetwork:Xt.inspect.usagesNetwork,usages:Xt.inspect.usages}},Fe=Lt=>({...(0,b.bindActionCreators)({createNewVariable:Tt,initListMode:Nt},Lt),changeVariableOrder:(Ot,on,Xt)=>Lt((0,z.mb)(Ot.rootStateKey,(0,Q.gE)((0,X.Y6)(Ot,{fromIndex:on,toIndex:Xt})))),duplicateVariable:Ot=>Lt((0,z.mb)(Ot.rootStateKey,(0,Q.Y9)((0,X.Y6)(Ot,{newId:void 0})))),removeVariable:Ot=>{Lt((0,z.mb)(Ot.rootStateKey,(0,Q.mZ)((0,X.Y6)(Ot,{reIndex:!0}))))}}),Ge=(0,f.connect)(Oe,Fe);class nt extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=Ot=>{const on=this.props.variables.findIndex(Xt=>Xt.id===Ot.id);r.E1.partial({editIndex:on})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(Ot,on,Xt)=>{this.props.changeVariableOrder(Ot,on,Xt)},this.onDuplicateVariable=Ot=>{this.props.duplicateVariable(Ot)},this.onModalOpen=Ot=>{this.setState({variableId:Ot})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:Ot,variables:on}=this.props,Xt=Ot!=null?on[Ot]:void 0,Dn=Xt?{text:Xt.name}:void 0;return t.createElement(l.T,{navModel:this.props.sectionNav,pageNav:Dn},!Xt&&t.createElement(ve,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!Xt&&this.props.variables.length>0&&t.createElement(B,{variables:this.props.variables,dashboard:this.props.dashboard}),Xt&&t.createElement(Le,{identifier:(0,X.yQ)(Xt)}),t.createElement(oe,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const Xe=Ge(nt);var ut=e(1541),ht=e(66574);const wt=({dashboard:Lt,sectionNav:Ot})=>{const on=ht.contextSrv.hasPermission(c.AccessControlAction.DashboardsPermissionsWrite);return t.createElement(l.T,{navModel:Ot},t.createElement(ut.P,{resource:"dashboards",resourceId:Lt.uid,canSetPermissions:on}))};var mn=e(88203),vn=e(71313),gn=e(50683),Sn=e(22698),Cn=e(35381),pn=e(42997);const nn=Lt=>({permissions:Lt.dashboard.permissions,canViewFolderPermissions:Lt.folder.canViewFolderPermissions}),Ct={getDashboardPermissions:pn.qm,addDashboardPermission:pn.Yq,removeDashboardPermission:pn.Qk,updateDashboardPermission:pn.RF,checkFolderPermissions:Cn.J6},bt=(0,f.connect)(nn,Ct);class Ut extends t.PureComponent{constructor(Ot){super(Ot),this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onRemoveItem=on=>{this.props.removeDashboardPermission(this.props.dashboard.id,on)},this.onPermissionChanged=(on,Xt)=>{this.props.updateDashboardPermission(this.props.dashboard.id,on,Xt)},this.onAddPermission=on=>this.props.addDashboardPermission(this.props.dashboard.id,on),this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:Ot,canViewFolderPermissions:on}=this.props;return{id:Ot.meta.folderId,title:Ot.meta.folderTitle,url:Ot.meta.folderUrl,canViewFolderPermissions:on}}render(){const{permissions:Ot,dashboard:on,sectionNav:Xt}=this.props,{isAdding:Dn}=this.state;return on.meta.hasUnsavedFolderChange?t.createElement(l.T,{navModel:Xt},t.createElement("h5",null,"You have changed a folder, please save to view permissions.")):t.createElement(l.T,{navModel:Xt},t.createElement("div",{className:"page-action-bar"},t.createElement(S.u,{placement:"auto",content:t.createElement(Sn.Z,null)},t.createElement(x.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),t.createElement("div",{className:"page-action-bar__spacer"}),t.createElement(m.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:Dn},"Add permission")),t.createElement(mn.s,{in:Dn},t.createElement(vn.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),t.createElement(gn.Z,{items:Ot,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()}))}}const _t=bt(Ut);var Gt=e(63534),jt=e(17312),sn=e(10864),St=e(5229),mt=e(1128),kt=e(83967),it=e(28580),pt=e(74908),It=e(78209),Qt=e(61576),rn=e(75261),un=e(26858),xn=e(73170),Kn=e(92877),_n=e(97463),Ma=e(75578),la=e(22001),aa=e(21609);class ba extends t.PureComponent{constructor(Ot){super(Ot),this.updateFields=()=>{const on=this.props.response?.panelData,Xt=on?.series?.[0]??on?.annotations?.[0];if(Xt&&Xt.fields){const Dn=Xt.fields.map(wn=>{const Bn=(0,Ma.CZ)(wn,Xt);let Gn="";for(let Tn=0;Tn<Xt.length;Tn++){if(Tn>0&&(Gn+=", "),Tn>2){Gn+="...";break}Gn+=wn.values[Tn]}return Gn.length>50&&(Gn=Gn.substring(0,50)+"..."),{label:`${Bn} (${wn.type})`,value:Bn,description:Gn}});this.setState({fieldNames:Dn})}},this.onFieldSourceChange=(on,Xt)=>{const Dn=this.props.mappings||{},wn=Dn[on]||{};this.props.change({...Dn,[on]:{...wn,source:Xt.value||la.L.Field}})},this.onFieldNameChange=(on,Xt)=>{const Dn=this.props.mappings||{},wn=Dn[on]||{};this.props.change({...Dn,[on]:{...wn,value:Xt.value,source:la.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(Ot){Ot.response!==this.props.response&&this.updateFields()}renderRow(Ot,on,Xt){const{fieldNames:Dn}=this.state;let wn=Dn;const Bn=on.value;let Gn=Dn.find(xt=>Bn===xt.value);Bn&&(wn=[...Dn],Gn||wn.push({label:Bn,value:Bn}));let Tn=Xt?Xt[Ot.key]:"";if(Tn&&Ot.key.startsWith("time")){const xt=(0,aa.Cf)("dateTimeAsIso");Tn=(0,aa.zc)(xt(Tn))}return Tn==null&&(Tn=""),t.createElement("tr",{key:Ot.key},t.createElement("td",null,Ot.key," ",Ot.help&&t.createElement(S.u,{content:Ot.help},t.createElement(x.J,{name:"info-circle"}))),t.createElement("td",null,t.createElement(it.Ph,{value:Gn,options:wn,placeholder:Ot.placeholder||Ot.key,onChange:xt=>{this.onFieldNameChange(Ot.key,xt)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})),t.createElement("td",null,`${Tn}`))}render(){const Ot=this.props.response?.events?.[0],on=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,_n.r0.map(Xt=>this.renderRow(Xt,on[Xt.key]||{},Ot))))}}class ga extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:Ot,annotation:on}=this.props;if((0,_n.yr)(Ot))return;const Xt=(0,rn.h4)().getCurrent();if(!Xt)return;this.setState({running:!0});const Dn=await(0,It.n)((0,Kn.r)({range:(0,un.$t)().timeRange(),panel:new xn.r({}),dashboard:Xt},Ot,on));this.setState({running:!1,response:Dn})},this.onQueryChange=Ot=>{this.props.onChange({...this.props.annotation,target:Ot})},this.onMappingChange=Ot=>{this.props.onChange({...this.props.annotation,mappings:Ot})},this.onAnnotationChange=Ot=>{this.props.onChange(Ot)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(Ot){this.props.annotation!==Ot.annotation&&!(0,_n.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:Ot,annotation:on}=this.props,Dn={..._n.yA,...Ot.annotations}.prepareAnnotation(on);Dn!==on?this.props.onChange(Dn):this.onRunQuery()}renderStatus(){const{response:Ot,running:on}=this.state;let Xt="alert-info",Dn="...",wn;if(on||Ot?.panelData?.state===le.Gu.Loading||!Ot)Dn="loading...";else{const{events:Bn,panelData:Gn}=Ot;if(Gn?.error)Xt="alert-error",wn="exclamation-triangle",Dn=Gn.error.message??"error";else if(!Bn?.length)Xt="alert-warning",wn="exclamation-triangle",Dn="No events found";else{const Tn=Gn?.series?.[0]??Gn?.annotations?.[0];Dn=`${Bn.length} events (from ${Tn?.fields.length} fields)`}}return t.createElement("div",{className:(0,v.cx)(Xt,(0,v.css)`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},t.createElement("div",null,wn&&t.createElement(t.Fragment,null,t.createElement(x.J,{name:wn}),"\xA0"),Dn),t.createElement("div",null,on?t.createElement(P.$,null):t.createElement(m.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:Ot,annotation:on,datasourceInstanceSettings:Xt}=this.props,{response:Dn}=this.state;let wn=Ot.annotations?.QueryEditor||Ot.components?.QueryEditor;if(!wn)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const Bn={...Ot.annotations?.getDefaultQuery?.(),...on.target??{refId:"Anno"}};return t.createElement(t.Fragment,null,t.createElement(Qt.n,{instanceSettings:Xt},t.createElement(wn,{key:Ot?.name,query:Bn,datasource:Ot,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:Dn?.panelData,range:(0,un.$t)().timeRange(),annotation:on,onAnnotationChange:this.onAnnotationChange})),(0,_n.$w)(Ot)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(ba,{response:Dn,mappings:on.mappings,change:this.onMappingChange})))}}var Ca=e(53229),Ha=e(9772);class ka extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(Ot){Ot.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const Ot=(0,Ha.w)(),on='<plugin-component type="annotations-query-ctrl"> </plugin-component>',Xt={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=Ot.load(this.ref,Xt,on),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(Xt.ctrl.ignoreNextWatcherFiring){Xt.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(Xt.ctrl.currentAnnotation)}),this.scopeProps=Xt}render(){return t.createElement("div",{ref:Ot=>this.ref=Ot})}}const ma="New annotation",At=({editIdx:Lt,dashboard:Ot})=>{const on=(0,C.wW)(Rt),[Xt,Dn]=(0,t.useState)(Ot.annotations.list[Lt]),wn=(0,t.useMemo)(()=>Xt.filter?Xt.filter.exclude?2:1:0,[Xt.filter]),{value:Bn}=(0,y.Z)(()=>(0,sn.F)().get(Xt.datasource),[Xt.datasource]),Gn=(0,sn.F)().getInstanceSettings(Xt.datasource),Tn=Xa=>{const Es=[...Ot.annotations.list];Es.splice(Lt,1,Xa),Dn(Xa),Ot.annotations.list=Es},xt=Xa=>{Tn({...Xt,name:Xa.currentTarget.value})},Nn=Xa=>{Tn({...Xt,datasource:(0,jt.iU)(Xa)})},Fa=Xa=>{const Es=Xa.currentTarget;Tn({...Xt,[Es.name]:Es.type==="checkbox"?Es.checked:Es.value})},us=Xa=>{Tn({...Xt,iconColor:Xa})},Ts=Xa=>{let Es=Xa.value===0?void 0:{exclude:Xa.value===2,ids:Xt.filter?.ids??[]};Tn({...Xt,filter:Es})},vs=Xa=>{if(!Array.isArray(Xa))return;const Es={exclude:wn===2,ids:[]};Xa.forEach(er=>er.value&&Es.ids.push(er.value)),Tn({...Xt,filter:Es})},Ws=Mt,xr=()=>{r.E1.partial({editview:null,editIndex:null})},Mr=()=>{const Xa=Ot.annotations.list;Ot.annotations.list=[...Xa.slice(0,Lt),...Xa.slice(Lt+1)],Mt()},Za=Xt.name===ma,Ps=(Xa,Es)=>Xa.label&&Es.label?Xa.label.toLowerCase().localeCompare(Es.label.toLowerCase()):-1,ur=(0,t.useMemo)(()=>Ot?.panels.filter(Xa=>a.default.panels[Xa.type]).map(Xa=>({value:Xa.id,label:Xa.title??`Panel ${Xa.id}`,description:Xa.description,imgUrl:a.default.panels[Xa.type].info.logos.small})).sort(Ps)??[],[Ot]);return t.createElement("div",null,t.createElement(St.C,{className:on.settingsForm},t.createElement(re.g,{label:"Name"},t.createElement(mt.I,{"aria-label":s.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Za,value:Xt.name,onChange:xt})),t.createElement(re.g,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(Ca.q,{annotations:!0,variables:!0,current:Xt.datasource,onChange:Nn})),t.createElement(re.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(kt.X,{name:"enable",id:"enable",value:Xt.enable,onChange:Fa})),t.createElement(re.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(kt.X,{name:"hide",id:"hide",value:Xt.hide,onChange:Fa})),t.createElement(re.g,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(D.Lh,null,t.createElement(pt.B,{value:Xt?.iconColor,onChange:us}))),t.createElement(re.g,{label:"Show in","aria-label":s.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel},t.createElement(t.Fragment,null,t.createElement(it.Ph,{options:Pn,value:wn,onChange:Ts,"aria-label":s.wl.components.Annotations.annotationsTypeInput}),wn!==0&&t.createElement(it.NU,{options:ur,value:ur.filter(Xa=>Xt.filter?.ids.includes(Xa.value)),onChange:vs,isClearable:!0,placeholder:"Choose panels",width:100,closeMenuOnSelect:!1,className:on.select,"aria-label":s.wl.components.Annotations.annotationsChoosePanelInput})))),t.createElement(St.C,null,t.createElement("h3",{className:"page-heading"},"Query"),Bn?.annotations&&Gn&&t.createElement(ga,{datasource:Bn,datasourceInstanceSettings:Gn,annotation:Xt,onChange:Tn}),Bn&&!Bn.annotations&&t.createElement(ka,{datasource:Bn,annotation:Xt,onChange:Tn})),t.createElement(He.K,null,!Xt.builtIn&&t.createElement(m.zx,{variant:"destructive",onClick:Mr},"Delete"),t.createElement(m.zx,{variant:"secondary",onClick:xr,"data-testid":s.wl.pages.Dashboard.Settings.Annotations.NewAnnotation.previewInDashboard},"Preview in dashboard"),t.createElement(m.zx,{variant:"primary",onClick:Ws},"Apply")))},Rt=Lt=>({settingsForm:(0,v.css)({maxWidth:Lt.spacing(60),marginBottom:Lt.spacing(2)}),select:(0,v.css)`
      margin-top: 8px;
    `});function Mt(){r.E1.partial({editIndex:null})}var $t=(Lt=>(Lt[Lt.AllPanels=0]="AllPanels",Lt[Lt.IncludePanels=1]="IncludePanels",Lt[Lt.ExcludePanels=2]="ExcludePanels",Lt))($t||{});const Pn=[{label:"All panels",value:0,description:"Send the annotation data to all panels that support annotations"},{label:"Selected panels",value:1,description:"Send the annotations to the explicitly listed panels"},{label:"All panels except",value:2,description:"Do not send annotation data to the following panels"}];var tn=e(99025),Un=e(15202);const $n=({children:Lt,...Ot})=>{const on=(0,C.wW)(kn);return t.createElement("div",{className:on.buttonWrapper},t.createElement(m.zx,{icon:"plus",variant:"secondary",...Ot},Lt))},kn=Lt=>({buttonWrapper:(0,v.css)`
    padding: ${Lt.spacing(3)} 0;
  `}),Fn=({dashboard:Lt,onNew:Ot,onEdit:on})=>{const[Xt,Dn]=(0,t.useState)(Lt.annotations.list),wn=(Nn,Fa)=>{Lt.annotations.list=tn.moveItemImmutably(Xt,Nn,Nn+Fa),Dn(Lt.annotations.list)},Bn=Nn=>{Lt.annotations.list=[...Xt.slice(0,Nn),...Xt.slice(Nn+1)],Dn(Lt.annotations.list)},Gn=Xt.length===0||Xt.length===1&&Xt[0].builtIn,Tn=Nn=>Nn.enable===!1?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",Nn.name)):Nn.builtIn?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},Nn.name," \xA0 (Built-in)")):t.createElement(t.Fragment,null,Nn.name),xt=(0,sn.F)();return t.createElement(D.wc,null,Xt.length>0&&t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Lt.annotations.list.map((Nn,Fa)=>t.createElement("tr",{key:`${Nn.name}-${Fa}`},Nn.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>on(Fa)},t.createElement(m.zx,{size:"sm",fill:"text",variant:"secondary"},Tn(Nn))):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>on(Fa)},t.createElement(m.zx,{size:"sm",fill:"text",variant:"secondary"},Tn(Nn))),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>on(Fa)},xt.getInstanceSettings(Nn.datasource)?.name||Nn.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Fa!==0&&t.createElement(M.h,{name:"arrow-up",onClick:()=>wn(Fa,-1),tooltip:"Move up"})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Lt.annotations.list.length>1&&Fa!==Lt.annotations.list.length-1?t.createElement(M.h,{name:"arrow-down",onClick:()=>wn(Fa,1),tooltip:"Move down"}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!Nn.builtIn&&t.createElement(Un.m,{size:"sm",onConfirm:()=>Bn(Fa),"aria-label":`Delete query with title "${Nn.name}"`})))))),Gn&&t.createElement(Pe.Z,{onClick:Ot,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!Gn&&t.createElement($n,{onClick:Ot},"New query"))};function Da({dashboard:Lt,editIndex:Ot,sectionNav:on}){const Xt=()=>{const Bn={name:ma,enable:!0,datasource:(0,jt.iU)((0,sn.F)().getInstanceSettings(null)),iconColor:"red"};Lt.annotations.list=[...Lt.annotations.list,{...Bn}],r.E1.partial({editIndex:Lt.annotations.list.length-1})},Dn=Bn=>{r.E1.partial({editIndex:Bn})},wn=Ot!=null&&Ot<Lt.annotations.list.length;return t.createElement(l.T,{navModel:on,pageNav:Ta(Lt,Ot)},!wn&&t.createElement(Fn,{dashboard:Lt,onNew:Xt,onEdit:Dn}),wn&&t.createElement(At,{dashboard:Lt,editIdx:Ot}))}function Ta(Lt,Ot){if(Ot==null)return;const on=Lt.annotations.list[Ot];if(on)return{text:on.name}}var ca=e(72699),Sa=e(74729),Yt=e(60729),Kt=e(58281),hn=e(26811),Mn=e(73807),Hn=e(77799);const Jn=(Lt,Ot)=>{const[on,Xt]=(0,hn.Z)(()=>(0,Hn.iM)(Lt,!1),[]),Dn=(0,Mn.iG)();return(0,t.useEffect)(()=>{on.value&&(Ot(),r.E1.replace("/"),Dn.success("Dashboard Deleted",`${on.value.title} has been deleted`))},[on,Dn,Ot]),{state:on,onDeleteDashboard:Xt}},Qn={cleanUpDashboardAndVariables:pn.lw},va=(0,f.connect)(null,Qn),Ga=({hideModal:Lt,cleanUpDashboardAndVariables:Ot,dashboard:on})=>{const Xt=on.meta.provisioned,{onDeleteDashboard:Dn}=Jn(on.uid,Ot),[,wn]=(0,Kt.default)(async()=>{await Dn(),Lt()},[Lt]),Bn=La(on.panels,on.title);return Xt?t.createElement(Ia,{hideModal:Lt,provisionedId:on.meta.provisionedExternalId}):t.createElement(te.s,{isOpen:!0,body:Bn,onConfirm:wn,onDismiss:Lt,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},La=(Lt,Ot)=>{const on=(0,lt.sumBy)(Lt,Xt=>Xt.alert?1:0);return on>0&&!a.config.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",on," alert",on>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,Ot))},Ia=({hideModal:Lt,provisionedId:Ot})=>t.createElement(R.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:Lt,className:(0,v.css)`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",Ot),t.createElement(R.u.ButtonRow,null,t.createElement(m.zx,{variant:"primary",onClick:Lt},"OK"))),Ka=va(Ga),qa=({dashboard:Lt})=>t.createElement(Yt.JY,null,({showModal:Ot,hideModal:on})=>t.createElement(m.zx,{variant:"destructive",onClick:()=>{Ot(Ka,{dashboard:Lt,hideModal:on})},"aria-label":"Dashboard settings page delete dashboard button"},"Delete Dashboard"));var hs=e(37232);const $s=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function zs({dashboard:Lt,updateTimeZone:Ot,updateWeekStart:on,sectionNav:Xt}){const[Dn,wn]=(0,t.useState)(0),Bn=(Za,Ps)=>{Lt.meta.folderUid=Za,Lt.meta.folderTitle=Ps,Lt.meta.hasUnsavedFolderChange=!0,wn(Dn+1)},Gn=Za=>{(Za.currentTarget.name==="title"||Za.currentTarget.name==="description")&&(Lt[Za.currentTarget.name]=Za.currentTarget.value)},Tn=Za=>{Lt.graphTooltip=Za,wn(Dn+1)},xt=Za=>{Lt.timepicker.refresh_intervals=Za.filter(Ps=>Ps.trim()!=="")},Nn=Za=>{Lt.timepicker.nowDelay=Za},Fa=Za=>{Lt.timepicker.hidden=Za,wn(Dn+1)},us=Za=>{Lt.liveNow=Za,wn(Dn+1)},Ts=Za=>{Lt.timezone=Za,wn(Dn+1),Ot(Za)},vs=Za=>{Lt.weekStart=Za,wn(Dn+1),on(Za)},Ws=Za=>{Lt.tags=Za,wn(Dn+1)},xr=Za=>{Lt.editable=Za,wn(Dn+1)},Mr=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(l.T,{navModel:Xt},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement("div",{className:"gf-form-group"},t.createElement(re.g,{label:"Name"},t.createElement(mt.I,{id:"title-input",name:"title",onBlur:Gn,defaultValue:Lt.title})),t.createElement(re.g,{label:"Description"},t.createElement(mt.I,{id:"description-input",name:"description",onBlur:Gn,defaultValue:Lt.description})),t.createElement(re.g,{label:"Tags"},t.createElement(ca.B,{id:"tags-input",tags:Lt.tags,onChange:Ws,width:40})),t.createElement(re.g,{label:"Folder"},t.createElement(Sa.E,{value:Lt.meta.folderUid,onChange:Bn,initialTitle:Lt.meta.folderTitle,inputId:"dashboard-folder-input",enableCreateNew:!0,dashboardId:Lt.id,skipInitialLoad:!0})),t.createElement(re.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect"},t.createElement(ie.S,{value:Lt.editable,options:Mr,onChange:xr}))),t.createElement(hs.P,{onTimeZoneChange:Ts,onWeekStartChange:vs,onRefreshIntervalChange:xt,onNowDelayChange:Nn,onHideTimePickerChange:Fa,onLiveNowChange:us,refreshIntervals:Lt.timepicker.refresh_intervals,timePickerHidden:Lt.timepicker.hidden,nowDelay:Lt.timepicker.nowDelay,timezone:Lt.timezone,weekStart:Lt.weekStart,liveNow:Lt.liveNow}),t.createElement(u.s,{label:"Panel options",isOpen:!0},t.createElement(re.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"},t.createElement(ie.S,{onChange:Tn,options:$s,value:Lt.graphTooltip}))),t.createElement("div",{className:"gf-form-button-row"},Lt.meta.canDelete&&t.createElement(qa,{dashboard:Lt}))))}const Ns={updateTimeZone:pn.tM,updateWeekStart:pn.f4},ys=(0,f.connect)(null,Ns)(zs);var ua=e(11649),ja=e(284);function Pa({dashboard:Lt,sectionNav:Ot}){const[on,Xt]=(0,t.useState)(JSON.stringify(Lt.getSaveModelClone(),null,2)),Dn=async()=>{await(0,rn.h4)().saveJSONDashboard(on),ja.H.reloadPage()},wn=(0,C.wW)(Ya),Bn="The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on";return t.createElement(l.T,{navModel:Ot,subTitle:Bn},t.createElement("div",{className:wn.wrapper},t.createElement(ua.p,{value:on,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:Xt,containerStyles:wn.codeEditor}),Lt.meta.canSave&&t.createElement("div",null,t.createElement(m.zx,{type:"submit",onClick:Dn},"Save changes"))))}const Ya=Lt=>({wrapper:(0,v.css)({display:"flex",height:"100%",flexDirection:"column",gap:Lt.spacing(2)}),codeEditor:(0,v.css)({flexGrow:1})});var _s=e(1674),Us=e(86004);const ds=({dashboard:Lt,onNew:Ot,onEdit:on})=>{const[Xt,Dn]=(0,t.useState)(Lt.links),wn=(xt,Nn)=>{Lt.links=tn.moveItemImmutably(Xt,xt,xt+Nn),Dn(Lt.links)},Bn=(xt,Nn)=>{Lt.links=[...Xt,{...xt}],Dn(Lt.links)},Gn=xt=>{Lt.links=[...Xt.slice(0,xt),...Xt.slice(xt+1)],Dn(Lt.links)};return Lt.links.length===0?t.createElement("div",null,t.createElement(Pe.Z,{onClick:Ot,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):t.createElement(t.Fragment,null,t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Type"),t.createElement("th",null,"Info"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Xt.map((xt,Nn)=>t.createElement("tr",{key:`${xt.title}-${Nn}`},t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>on(Nn)},t.createElement(x.J,{name:"external-link-alt"})," \xA0 ",xt.type),t.createElement("td",{role:"gridcell"},t.createElement(D.Lh,null,xt.title&&t.createElement("span",null,xt.title),xt.type==="link"&&t.createElement("span",null,xt.url),xt.type==="dashboards"&&t.createElement(Us.P,{tags:xt.tags??[]}))),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Nn!==0&&t.createElement(M.h,{name:"arrow-up",onClick:()=>wn(Nn,-1),tooltip:"Move link up"})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},Xt.length>1&&Nn!==Xt.length-1?t.createElement(M.h,{name:"arrow-down",onClick:()=>wn(Nn,1),tooltip:"Move link down"}):null),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(M.h,{name:"copy",onClick:()=>Bn(xt,Nn),tooltip:"Copy link"})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(Un.m,{"aria-label":`Delete link with title "${xt.title}"`,size:"sm",onConfirm:()=>Gn(Nn)})))))),t.createElement($n,{onClick:Ot},"New link"))};function cn({dashboard:Lt,sectionNav:Ot,editIndex:on}){const[Xt,Dn]=(0,t.useState)(!1),wn=()=>{Dn(!1),r.E1.partial({editIndex:void 0})},Bn=()=>{Lt.links=[...Lt.links,{..._s.zA}],Dn(!0),r.E1.partial({editIndex:Lt.links.length-1})},Gn=Nn=>{Dn(!1),r.E1.partial({editIndex:Nn})},Tn=on!==void 0;let xt;return Tn&&(xt={text:Xt?"New link":"Edit link",subTitle:Xt?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}),t.createElement(l.T,{navModel:Ot,pageNav:xt},!Tn&&t.createElement(ds,{dashboard:Lt,onNew:Bn,onEdit:Gn}),Tn&&t.createElement(_s.fD,{dashboard:Lt,editLinkIdx:on,onGoBack:wn}))}var os=e(7942);const qs=10;class Dr extends t.PureComponent{constructor(Ot){super(Ot),this.getVersions=(on=!1)=>{this.setState({isAppending:on}),os.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(Xt=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(Xt)]}),this.start+=this.limit}).catch(Xt=>console.log(Xt)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const on=this.state.versions.filter(Tn=>Tn.checked),[Xt,Dn]=on,wn=Xt.version===this.props.dashboard.version;this.setState({isLoading:!0});const Bn=await os.K8.getDashboardVersion(this.props.dashboard.uid,Dn.version),Gn=await os.K8.getDashboardVersion(this.props.dashboard.uid,Xt.version);this.setState({baseInfo:Dn,isLoading:!1,isNewLatest:wn,newInfo:Xt,viewMode:"compare",diffData:{lhs:Bn.data,rhs:Gn.data}})},this.decorateVersions=on=>on.map(Xt=>({...Xt,createdDateString:this.props.dashboard.formatDate(Xt.created),ageString:this.props.dashboard.getRelativeTime(Xt.created),checked:!1})),this.onCheck=(on,Xt)=>{this.setState({versions:this.state.versions.map(Dn=>Dn.id===Xt?{...Dn,checked:on.currentTarget.checked}:Dn)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(on=>({...on,checked:!1})),viewMode:"list"})},this.limit=qs,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(Ot=>Ot.version===1)}render(){const{versions:Ot,viewMode:on,baseInfo:Xt,newInfo:Dn,isNewLatest:wn,isLoading:Bn,diffData:Gn}=this.state,Tn=Ot.filter(Fa=>Fa.checked).length===2,xt=Ot.length>1,Nn=Ot.length>=this.limit;return on==="compare"?t.createElement(l.T,{navModel:this.props.sectionNav},t.createElement(os.Cs,{onClick:this.reset,baseVersion:Xt?.version,newVersion:Dn?.version,isNewLatest:wn}),Bn?t.createElement(dr,{msg:"Fetching changes\u2026"}):t.createElement(os.U$,{newInfo:Dn,baseInfo:Xt,isNewLatest:wn,diffData:Gn})):t.createElement(l.T,{navModel:this.props.sectionNav},Bn?t.createElement(dr,{msg:"Fetching history list\u2026"}):t.createElement(os.Sd,{versions:Ot,onCheck:this.onCheck,canCompare:Tn}),this.state.isAppending&&t.createElement(dr,{msg:"Fetching more entries\u2026"}),xt&&t.createElement(os.R1,{hasMore:Nn,canCompare:Tn,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const dr=({msg:Lt})=>t.createElement(D.Lh,null,t.createElement(P.$,null),t.createElement("em",null,Lt)),Fr=()=>r.E1.partial({editview:null,editIndex:null});function As({dashboard:Lt,editview:Ot,pageNav:on,sectionNav:Xt}){const[Dn,wn]=(0,t.useState)(0);(0,t.useEffect)(()=>{Lt.events.subscribe(h.hS,()=>wn(xr=>xr+1))},[Lt]);const Bn=(0,t.useMemo)(()=>Qs(Lt),[Lt,Dn]),Gn=()=>{Lt.meta.hasUnsavedFolderChange=!1},Tn=Bn.find(xr=>xr.id===Ot)??Bn[0],xt=g.contextSrv.hasEditPermissionInFolders,Nn=Lt.meta.canSave,Fa=(0,n.TH)(),us=Sr(Fa),Ts=ws(on,Xt,Bn,Tn,Fa),vs="sm",Ws=[t.createElement(m.zx,{"data-testid":s.wl.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:vs,onClick:Fr},"Close"),xt&&t.createElement(Gt.t,{dashboard:Lt,onSaveSuccess:Gn,variant:"secondary",key:"save as",size:vs}),Nn&&t.createElement(Gt.i,{dashboard:Lt,onSaveSuccess:Gn,key:"Save",size:vs})];return t.createElement(t.Fragment,null,t.createElement(o.A,{actions:t.createElement(d.R,{alignment:"right"},Ws)}),t.createElement(Tn.component,{sectionNav:Ts,dashboard:Lt,editIndex:us}))}function Qs(Lt){const Ot=[];return Lt.meta.canEdit&&(Ot.push({title:"General",id:"settings",icon:"sliders-v-alt",component:ys}),Ot.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:Da,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),Ot.push({title:"Variables",id:"templating",icon:"calculator-alt",component:Xe,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),Ot.push({title:"Links",id:"links",icon:"link",component:cn})),Lt.meta.canMakeEditable&&Ot.push({title:"General",icon:"sliders-v-alt",id:"settings",component:ps}),Lt.id&&Lt.meta.canSave&&Ot.push({title:"Versions",id:"versions",icon:"history",component:Dr}),Lt.id&&Lt.meta.canAdmin&&(a.default.rbacEnabled?g.contextSrv.hasPermission(c.AccessControlAction.DashboardsPermissionsRead)&&Ot.push({title:"Permissions",id:"permissions",icon:"lock",component:wt}):Ot.push({title:"Permissions",id:"permissions",icon:"lock",component:_t})),Ot.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:Pa}),Ot}function Ls(Lt,Ot){return{...Lt,parentItem:Lt.parentItem?Ls(Lt.parentItem,Ot):Ot}}function ws(Lt,Ot,on,Xt,Dn){const wn={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};wn.children=on.map(Gn=>({text:Gn.title,icon:Gn.icon,id:Gn.id,url:i.u.getUrlForPartial(Dn,{editview:Gn.id,editIndex:null}),active:Gn===Xt,parentItem:wn,subTitle:Gn.subTitle}));const Bn=Ls(Lt,Ot.node);return wn.parentItem=Bn,{main:wn,node:wn.children.find(Gn=>Gn.active)}}function ps({dashboard:Lt,sectionNav:Ot}){return t.createElement(l.T,{navModel:Ot},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(m.zx,{type:"submit",onClick:()=>Lt.makeEditable()},"Make editable"))}function Sr(Lt){const Ot=new URLSearchParams(Lt.search).get("editIndex");if(Ot!=null)return parseInt(Ot,10)}},1674:(j,I,e)=>{"use strict";e.d(I,{fD:()=>h,xy:()=>g,zA:()=>l});var t=e(27702),n=e(22209),i=e(1128),s=e(28580),r=e(72699),m=e(62499),d=e(83967),o=e(66670);const l={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},a=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],g={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},c=Object.keys(g).map(f=>({label:f,value:f})),h=({editLinkIdx:f,dashboard:b,onGoBack:v})=>{const[y,E]=(0,t.useState)(f!==null?b.links[f]:l),C=M=>{const R=[...b.links];R.splice(f,1,M),b.links=R,E(M)},u=M=>{C({...y,tags:M})},D=M=>{const R={...y,type:M.value};R.type==="dashboards"?(R.url="",R.tooltip=""):R.tags=[],C(R)},P=M=>{C({...y,icon:M.value})},S=M=>{const R=M.currentTarget;C({...y,[R.name]:R.type==="checkbox"?R.checked:R.value})},x=y.title===l.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.g,{label:"Title"},t.createElement(i.I,{name:"title",id:"title",value:y.title,onChange:S,autoFocus:x})),t.createElement(n.g,{label:"Type"},t.createElement(s.Ph,{inputId:"link-type-input",value:y.type,options:a,onChange:D})),y.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"With tags"},t.createElement(r.B,{tags:y.tags,onChange:u}))),y.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"URL"},t.createElement(i.I,{name:"url",value:y.url,onChange:S})),t.createElement(n.g,{label:"Tooltip"},t.createElement(i.I,{name:"tooltip",value:y.tooltip,onChange:S,placeholder:"Open dashboard"})),t.createElement(n.g,{label:"Icon"},t.createElement(s.Ph,{value:y.icon,options:c,onChange:P}))),t.createElement(m.s,{label:"Options",isOpen:!0},y.type==="dashboards"&&t.createElement(n.g,null,t.createElement(d.X,{label:"Show as dropdown",name:"asDropdown",value:y.asDropdown,onChange:S})),t.createElement(n.g,null,t.createElement(d.X,{label:"Include current time range",name:"keepTime",value:y.keepTime,onChange:S})),t.createElement(n.g,null,t.createElement(d.X,{label:"Include current template variable values",name:"includeVars",value:y.includeVars,onChange:S})),t.createElement(n.g,null,t.createElement(d.X,{label:"Open link in new tab",name:"targetBlank",value:y.targetBlank,onChange:S}))),t.createElement(o.zx,{onClick:v},"Apply"))}},18282:(j,I,e)=>{"use strict";e.d(I,{u:()=>g});var t=e(42844),n=e(27702),i=e(84789),s=e(74639),r=e(66310),m=e(77122),d=e(66670),o=e(89033),l=e(45743);const a="showCategory",g=n.memo(({id:f,title:b,children:v,forceOpen:y,isOpenDefault:E,renderTitle:C,className:u,itemsCount:D,isNested:P=!1})=>{const S=E!==!1,[x,M]=(0,i.Z)(h(f),{isExpanded:S}),R=(0,r.wW)(c),[O,T]=(0,o.K)(),[U,L]=(0,n.useState)(x?.isExpanded??S),V=(0,n.useRef)(0),w=(0,n.useRef)(null),K=O[a]===f;(0,n.useEffect)(()=>{V.current&&Date.now()-V.current<200||(K||y)&&(U||L(!0),K&&w.current?.scrollIntoView())},[y,U,K]);const B=(0,n.useCallback)(()=>{V.current=Date.now(),T({[a]:U?void 0:f},!0),M({isExpanded:!U}),L(!U)},[M,L,T,U,f]);C||(C=function(z){return z||D===void 0||D===0?b:n.createElement("span",null,b," ",n.createElement(m.A,{value:D}))});const W=(0,t.cx)({[R.box]:!0,[R.boxNestedExpanded]:P&&U},u,"options-group"),_=(0,t.cx)(R.header,{[R.headerExpanded]:U,[R.headerNested]:P}),k=(0,t.cx)(R.body,{[R.bodyNested]:P});return n.createElement("div",{className:W,"data-testid":"options-category","aria-label":s.wl.components.OptionsGroup.group(f),ref:w},n.createElement("div",{className:_,onClick:B},n.createElement(d.zx,{"aria-label":s.wl.components.OptionsGroup.toggle(f),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":U,className:R.toggleButton,icon:U?"angle-down":"angle-right",onClick:B}),n.createElement("h6",{id:`button-${f}`,className:R.title},C(U))),U&&n.createElement("div",{className:k,id:f,"aria-labelledby":`button-${f}`},v))});g.displayName="OptionsPaneCategory";const c=f=>({box:(0,t.css)`
      border-top: 1px solid ${f.colors.border.weak};
    `,boxNestedExpanded:(0,t.css)`
      margin-bottom: ${f.spacing(2)};
    `,title:(0,t.css)`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${f.typography.fontWeightMedium};
      margin: 0;
    `,header:(0,t.css)`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${f.spacing(.5)};
      color: ${f.colors.text.primary};
      font-weight: ${f.typography.fontWeightMedium};

      &:hover {
        background: ${f.colors.emphasize(f.colors.background.primary,.03)};
      }
    `,toggleButton:(0,t.css)`
      align-self: baseline;
    `,headerExpanded:(0,t.css)`
      color: ${f.colors.text.primary};
    `,headerNested:(0,t.css)`
      padding: ${f.spacing(.5,0,.5,0)};
    `,body:(0,t.css)`
      padding: ${f.spacing(1,2,1,4)};
    `,bodyNested:(0,t.css)`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${f.colors.border.weak};
      }
    `}),h=f=>`${l.jy}.optionGroup[${f}]`},32299:(j,I,e)=>{"use strict";e.d(I,{j:()=>i});var t=e(27702),n=e(18282);class i{constructor(r){this.props=r,this.items=[],this.categories=[]}addItem(r){return r.parent=this,this.items.push(r),this}addCategory(r){return r.props.isNested=!0,r.parent=this,this.categories.push(r),this}getCategory(r){let m=this.categories.find(d=>d.props.id===r);return m||(m=new i({title:r,id:r}),this.addCategory(m),m)}render(r){return this.props.customRender?this.props.customRender():t.createElement(n.u,{key:this.props.title,...this.props},this.items.map(m=>m.render(r)),this.categories.map(m=>m.render(r)))}}},23140:(j,I,e)=>{"use strict";e.d(I,{a:()=>c});var t=e(27702),n=e(3819),i=e.n(n),s=e(74639),r=e(79978),m=e(22209),d=e(42844),o=e(66310),l=e(80011);function a({overrides:h}){const f=(0,o.wW)(g);return t.createElement("div",{className:f.wrapper},h.map((b,v)=>t.createElement(l.u,{content:b.tooltip,key:v.toString(),placement:"top"},t.createElement("div",{"aria-label":b.description,className:f[b.type]}))))}const g=h=>{const f={width:8,height:8,borderRadius:h.shape.radius.circle,marginLeft:h.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,d.css)({display:"flex"}),rule:(0,d.css)({...f,backgroundColor:h.colors.primary.main}),data:(0,d.css)({...f,backgroundColor:h.colors.warning.main})}};class c{constructor(f){this.props=f}getLabel(f){const{title:b,description:v,overrides:y}=this.props;if(!f)return this.parent.props.title===b&&!y?.length?null:t.createElement(r._,{description:v},b,y&&y.length>0&&t.createElement(a,{overrides:y}));const E=[];return this.parent.parent&&E.push(this.highlightWord(this.parent.parent.props.title,f)),this.parent.props.title!==b&&E.push(this.highlightWord(this.parent.props.title,f)),t.createElement(r._,{description:v&&this.highlightWord(v,f),category:E},this.highlightWord(b,f),y&&y.length>0&&t.createElement(a,{overrides:y}))}highlightWord(f,b){return t.createElement(i(),{textToHighlight:f,searchWords:[b],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:f}=this.props;!f||f.length}render(f){const{title:b,description:v,render:y,showIf:E,skipField:C}=this.props,u=`${this.parent.props.id} ${b}`;return E&&!E()?null:C?y():t.createElement(m.g,{label:this.getLabel(f),description:v,key:u,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(u)},y())}}},26908:(j,I,e)=>{"use strict";e.d(I,{HZ:()=>h,AL:()=>c});var t=e(89949),n=e(27702),i=e(2471),s=e(89897),r=e(32299),m=e(23140);const d="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",o="An override rule exists for this property";function l(f,b,v){const y=[];if(v){for(const C of v)for(const u of C.fields)if((0,t.get)(u.config,f.path)!=null){y.push({type:"data",description:d,tooltip:d});break}}return b.overrides.some(C=>C.properties.some(u=>u.id===f.id))&&y.push({type:"rule",description:o,tooltip:o}),y}var a=e(11778);function g({data:f,replaceVariables:b,options:v,eventBus:y,instanceState:E}){const C=f?.series??[];return{data:C,replaceVariables:b,options:v,eventBus:y,getSuggestions:D=>(0,s.PW)(C,D),instanceState:E}}function c(f){const{plugin:b,panel:v,onPanelOptionsChanged:y,onFieldConfigsChange:E,data:C,dashboard:u,instanceState:D}=f,P=v.getOptions(),S=v.fieldConfig,x={},M=g({data:C,replaceVariables:v.replaceVariables,options:P,eventBus:u.events,instanceState:D}),R=T=>{const U=(T&&T[0])??`${b.meta.name}`,L=x[U];return L||(x[U]=new r.j({title:U,id:U}))},O={getValue:T=>(0,t.get)(P,T),onChange:(T,U)=>{const L=(0,a.hs)(P,T,U);y(L)}};h(b.getPanelOptionsSupplier(),O,R,M);for(const T of b.fieldConfigRegistry.list()){if(T.isCustom&&T.showIf&&!T.showIf(S.defaults.custom,C?.series)||T.hideFromDefaults)continue;const U=R(T.category),L=T.editor,V=S.defaults,w=T.isCustom?V.custom?(0,t.get)(V.custom,T.path):void 0:(0,t.get)(V,T.path);T.getItemsCount&&(U.props.itemsCount=T.getItemsCount(w)),U.addItem(new m.a({title:T.name,description:T.description,overrides:l(T,S,C?.series),render:function(){const B=W=>{E((0,a.uJ)(S,T.path,W,T.isCustom))};return n.createElement(L,{value:w,onChange:B,item:T,context:M,id:T.id})}}))}return Object.values(x)}function h(f,b,v,y,E){const C=new i.rt;f(C,y);for(const u of C.getItems()){if(u.showIf&&!u.showIf(y.options,y.data))continue;let D=E;if(D?u.category?.[0]?.length&&(D=D.getCategory(u.category[0])):D=v(u.category),(0,i.j)(u)){const S=u.getNestedValueAccess(b),x=S.getContext?S.getContext(y):{...y,options:b.getValue(u.path)};h(u.getBuilder(),S,v,x,D);continue}const P=u.editor;D.addItem(new m.a({title:u.name,description:u.description,render:function(){return n.createElement(P,{value:b.getValue(u.path),onChange:x=>{b.onChange(u.path,x)},item:u,context:y,id:u.id})}}))}}},45743:(j,I,e)=>{"use strict";e.d(I,{Hl:()=>g,K9:()=>b,OT:()=>y,ZP:()=>C,g_:()=>v,jy:()=>d,my:()=>f,yi:()=>h});var t=e(34099),n=e(53933),i=e(8508),s=e(56812),r=e(89167),m=e(25374);const d="grafana.dashboard.editor.ui",o={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:m.d1.Fill},l=()=>{const u=s.Z.getObject(d,o);let D={...u};return typeof u.topPaneSize=="string"&&(D={...u,topPaneSize:parseFloat(u.topPaneSize)/100}),{getPanel:()=>new r.rY({}),getSourcePanel:()=>new r.rY({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,i.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...o,...D}}},a=(0,t.oM)({name:"panelEditor",initialState:l(),reducers:{updateEditorInitState:(u,D)=>{u.getPanel=()=>D.payload.panel,u.getSourcePanel=()=>D.payload.sourcePanel,u.initDone=!0,u.isOpen=!0,u.shouldDiscardChanges=!1},setEditorPanelData:(u,D)=>{u.getData=()=>D.payload},setDiscardChanges:(u,D)=>{u.shouldDiscardChanges=D.payload},setPanelEditorUIState:(u,D)=>{u.ui={...u.ui,...D.payload},!u.ui.isPanelOptionsVisible&&u.isVizPickerOpen&&(u.isVizPickerOpen=!1)},toggleVizPicker:(u,D)=>{u.isVizPickerOpen=D.payload,u.isVizPickerOpen&&(u.ui.isPanelOptionsVisible=!0)},toggleTableView(u){u.tableViewEnabled=!u.tableViewEnabled},closeEditor:u=>{u.getPanel=()=>new r.rY({}),u.getSourcePanel=()=>new r.rY({}),u.isOpen=!1,u.initDone=!1,u.isVizPickerOpen=!1,u.tableViewEnabled=!1}}}),{updateEditorInitState:g,setEditorPanelData:c,setDiscardChanges:h,closeEditor:f,setPanelEditorUIState:b,toggleVizPicker:v,toggleTableView:y}=a.actions,C={panelEditor:a.reducer}},25374:(j,I,e)=>{"use strict";e.d(I,{Ip:()=>t,Ok:()=>m,d1:()=>n,d7:()=>s});var t=(d=>(d.Query="query",d.Transform="transform",d.Visualize="visualize",d.Alert="alert",d))(t||{}),n=(d=>(d[d.Fill=0]="Fill",d[d.Fit=1]="Fit",d[d.Exact=2]="Exact",d))(n||{}),i=(d=>(d[d.Off=0]="Off",d[d.Table=1]="Table",d))(i||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],r=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var m=(d=>(d[d.Visualizations=0]="Visualizations",d[d.LibraryPanels=1]="LibraryPanels",d[d.Suggestions=2]="Suggestions",d[d.Widgets=3]="Widgets",d))(m||{})},11778:(j,I,e)=>{"use strict";e.d(I,{hs:()=>o,jF:()=>r,sY:()=>m,uJ:()=>d});var t=e(89949),n=e.n(t),i=e(97957),s=e(25374);function r(l,a,g,c){if(l===s.d1.Fill)return{width:a,height:g};const h=8*6,f=60,v=(window.innerWidth-f-i.hD*4)/i.cz*c.gridPos.w,y=i.K3*c.gridPos.h+h,E=Math.min(a/v,g/y);return v<=a&&y<=g?{width:v,height:y}:{width:v*E,height:y*E}}function m(l){return l?.meta.skipDataQuery===!1}const d=(l,a,g,c)=>{let h={...l.defaults};const f=g==null||g==="";return c?h.custom?f?h.custom=(0,t.omit)(h.custom,a):h.custom=o(h.custom,a,g):f||(h.custom=o(h.custom,a,g)):f?h=(0,t.omit)(h,a):h=o(h,a,g),{...l,defaults:h}};function o(l,a,g){const c=Array.isArray(a)?a:a.split("."),h=c.shift();if(h.endsWith("]")){const b=h.lastIndexOf("["),v=+h.substring(b+1,h.length-1),y=h.substring(0,b);let E=l[y];const C=Array.isArray(E)?[...E]:[];return c.length&&(E=C[v],(E==null||typeof E!="object")&&(E={}),g=o(E,c,g)),C[v]=g,{...l,[y]:C}}if(!c.length)return{...l,[h]:g};let f=l[h];return(f==null||typeof f!="object")&&(f={}),{...l,[h]:o(f,c,g)}}},65468:(j,I,e)=>{"use strict";e.d(I,{Go:()=>s,Jc:()=>r});var t=e(42844),n=e(27702),i=e(66310);const s=function(){const o=(0,i.wW)(d),l=m();return l.hide?null:n.createElement("div",{className:o.footer},n.createElement("a",{className:o.link,href:l.link,target:"_blank",rel:"noreferrer noopener"},l.text," ",n.createElement("img",{className:o.logoImg,alt:"",src:l.logo})))};function r(o){m=o}let m=()=>({hide:!1,text:"powered by Grafana",logo:"public/img/grafana_icon.svg",link:"https://grafana.com/"});const d=o=>({footer:(0,t.css)`
    display: flex;
    justify-content: end;
    height: 30px;
    padding: ${o.spacing(0,2,0,1)};
  `,link:(0,t.css)`
    display: flex;
    gap: 4px;
    justify-content: end;
    align-items: center;
  `,logoImg:(0,t.css)`
    height: 100%;
    padding: ${o.spacing(.25,0,.5,0)};
  `})},60042:(j,I,e)=>{"use strict";e.d(I,{Z:()=>l});var t=e(42844),n=e(27702),i=e(25111),s=e(66310),r=e(63439),m=e(45937);function d({dashboard:a}){const g=(0,s.wW)(o),{loading:c,value:h,error:f}=(0,i.Z)(async()=>{const v=a.getSaveModelClone();return m.ae.validateDashboard(v).catch(E=>{if(E.status>=500)throw E;return E.data})},[a]);let b;if(c)b=n.createElement(r.b,{severity:"info",title:"Checking dashboard validity"});else if(h)h.isValid||(b=n.createElement(r.b,{severity:"warning",title:"Dashboard failed schema validation"},n.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),n.createElement("div",{className:g.error},h.message)));else{const v=f?.message??"Unknown error";b=n.createElement(r.b,{severity:"info",title:"Error checking dashboard validity"},n.createElement("p",{className:g.error},v))}return b?n.createElement("div",{className:g.root},b):null}const o=a=>({root:(0,t.css)({marginTop:a.spacing(1)}),error:(0,t.css)({fontFamily:a.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),l=d},63534:(j,I,e)=>{"use strict";e.d(I,{i:()=>d,t:()=>o});var t=e(27702),n=e(74639),i=e(86312),s=e(60729),r=e(66670),m=e(37778);const d=({dashboard:l,onSaveSuccess:a,size:g})=>t.createElement(s.JY,null,({showModal:c,hideModal:h})=>t.createElement(r.zx,{size:g,onClick:()=>{c(m.d,{dashboard:l,onSaveSuccess:a,onDismiss:h})},"aria-label":n.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),o=({dashboard:l,onSaveSuccess:a,variant:g,size:c})=>t.createElement(s.JY,null,({showModal:h,hideModal:f})=>t.createElement(r.zx,{size:c,onClick:()=>{(0,i.ff)("grafana_dashboard_save_as_clicked"),h(m.d,{dashboard:l,onSaveSuccess:a,onDismiss:f,isCopy:!0})},variant:g,"aria-label":n.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},43590:(j,I,e)=>{"use strict";e.d(I,{_:()=>o});var t=e(42844),n=e(27702),i=e(25111),s=e(66310),r=e(62108),m=e(60195),d=e(18475);const o=({diff:a,oldValue:g,newValue:c})=>{const h=(0,s.wW)(l),f=(0,i.Z)(async()=>{const v=JSON.stringify(g??{},null,2),y=JSON.stringify(c??{},null,2);let E;const C=[];let u=0;if(a)for(const[D,P]of Object.entries(a)){const S=n.createElement(m.B,{diffs:P,key:D,title:D});D==="schemaVersion"?E=S:C.push(S),u+=P.length}return{schemaChange:E,diffs:C,count:u,showDiffs:u<15,jsonView:n.createElement(d.Z,{oldValue:v,newValue:y})}},[a,g,c]),{value:b}=f;return!b||!g?n.createElement(r.$,null):b.count<1?n.createElement("div",null,"No changes in this dashboard"):n.createElement("div",null,b.schemaChange&&n.createElement("div",{className:h.spacer},b.schemaChange),b.showDiffs&&n.createElement("div",{className:h.spacer},b.diffs),n.createElement("h4",null,"JSON Model"),b.jsonView)},l=a=>({spacer:(0,t.css)`
    margin-bottom: ${a.v1.spacing.xl};
  `})},37778:(j,I,e)=>{"use strict";e.d(I,{d:()=>Ce});var t=e(27702),n=e(25111),i=e(73289),s=e(34667),r=e(14574),m=e(15372),d=e(54281),o=e(45937),l=e(3323),a=e(60042),g=e(43590),c=e(42844),h=e(3613),f=e(66310),b=e(13741),v=e(66670),y=e(63534),E=e(26811),C=e(94469),u=e(86312),D=e(26129),P=e(5933),S=e(73807),x=e(66574),M=e(78467),R=e(67572),O=e(77799),T=e(18771),U=e(43620);const L=async(de,we,_e,Je)=>{if(s.config.featureToggles.nestedFolders){const Qe=await Je({dashboard:de,folderUid:we.folderUid??_e.meta.folderUid??de.meta.folderUid,message:we.message,overwrite:we.overwrite});if("error"in Qe)throw Qe.error;return Qe.data}let Ue=we.folderUid;Ue===void 0&&(Ue=_e.meta.folderUid??de.folderUid);const $e=await(0,O.uC)({...we,folderUid:Ue,dashboard:de});return await x.contextSrv.fetchUserPermissions(),$e},V=(de,we=!1)=>{const _e=(0,T.useDispatch)(),Je=(0,S.iG)(),[Ue]=(0,R.yF)(),[$e,Qe]=(0,E.Z)(async(tt,lt,Me)=>{try{const De=await L(tt,lt,Me,Ue);Me.version=De.version,Me.clearUnsavedChanges(),P.Z.publish(new U.Jd),Je.success("Dashboard saved"),we?(0,u.ff)("grafana_dashboard_copied",{name:Me.title,url:De.url}):(0,u.ff)(`grafana_dashboard_${Me.id?"saved":"created"}`,{name:Me.title,url:De.url});const We=D.E1.getLocation().pathname,qe=C.u.stripBaseFromUrl(De.url);return qe!==We&&setTimeout(()=>D.E1.replace(qe)),Me.meta.isStarred&&_e((0,M.gd)({id:Me.uid,title:Me.title,url:qe})),De}catch(De){throw De instanceof Error&&Je.error(De.message??"Error saving dashboard"),De}},[_e,Je]);return{state:$e,onDashboardSave:Qe}},w=({dashboard:de,dashboardSaveModel:we,error:_e,onDismiss:Je})=>{const{onDashboardSave:Ue}=V(de);return(0,t.useEffect)(()=>{_e.data&&B(_e.data.status)&&(_e.isHandled=!0)},[_e]),t.createElement(t.Fragment,null,_e.data&&_e.data.status==="version-mismatch"&&t.createElement(h.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Ue(we,{overwrite:!0},de),Je()},onDismiss:Je}),_e.data&&_e.data.status==="name-exists"&&t.createElement(h.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await Ue(we,{overwrite:!0},de),Je()},onDismiss:Je}),_e.data&&_e.data.status==="plugin-dashboard"&&t.createElement(K,{dashboard:de,onDismiss:Je}))},K=({onDismiss:de,dashboard:we})=>{const{onDashboardSave:_e}=V(we),Je=(0,f.wW)(W);return t.createElement(b.u,{className:Je.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:de},t.createElement("div",{className:Je.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(b.u.ButtonRow,null,t.createElement(v.zx,{variant:"secondary",onClick:de,fill:"outline"},"Cancel"),t.createElement(y.t,{dashboard:we,onSaveSuccess:de}),t.createElement(v.zx,{variant:"destructive",onClick:async()=>{await _e(we.getSaveModelClone(),{overwrite:!0},we),de()}},"Overwrite")))},B=de=>{switch(de){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},W=de=>({modal:(0,c.css)`
    width: 500px;
  `,modalText:(0,c.css)`
    font-size: ${de.typography.h4.fontSize};
    color: ${de.colors.text.primary};
    margin-bottom: ${de.spacing(4)}
    padding-top: ${de.spacing(2)};
  `,modalButtonRow:(0,c.css)`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${de.spacing(2)};
    }
  `});var _=e(23839),k=e(22209),A=e(1128),z=e(16310),H=e(42074),Q=e(64022),X=e(74729),te=e(39345);const oe=de=>{const we=de.getSaveModelClone();return we.id=null,we.uid="",we.title+=" Copy",we.editable=!0,de.id>0&&we.panels.forEach(_e=>{_e.type==="graph"&&_e.alert&&delete _e.thresholds,delete _e.alert}),we},Z=({dashboard:de,isLoading:we,isNew:_e,onSubmit:Je,onCancel:Ue,onSuccess:$e})=>{const Qe={title:_e?de.title:`${de.title} Copy`,$folder:{uid:de.meta.folderUid,title:de.meta.folderTitle},copyTags:!1},tt=lt=>async Me=>{if(Me&&Me===lt().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await te.t.validateNewDashboardName(lt().$folder.uid??"general",Me),!0}catch(De){return De instanceof Error?De.message:"Dashboard name is invalid"}};return t.createElement(_.l,{defaultValues:Qe,onSubmit:async lt=>{if(!Je)return;const Me=oe(de);Me.title=lt.title,!_e&&!lt.copyTags&&(Me.tags=[]),(await Je(Me,{folderUid:lt.$folder.uid},de)).status==="success"&&$e()}},({register:lt,control:Me,errors:De,getValues:We})=>t.createElement(t.Fragment,null,t.createElement(k.g,{label:"Dashboard name",invalid:!!De.title,error:De.title?.message},t.createElement(A.I,{...lt("title",{validate:tt(We)}),"aria-label":"Save dashboard title field",autoFocus:!0})),t.createElement(k.g,{label:"Folder"},t.createElement(z.g,{render:({field:{ref:qe,...st}})=>t.createElement(X.E,{...st,onChange:(dt,Tt)=>st.onChange({uid:dt,title:Tt}),value:st.value?.uid,initialTitle:de.meta.folderTitle,dashboardId:de.id,enableCreateNew:!0}),control:Me,name:"$folder"})),!_e&&t.createElement(k.g,{label:"Copy tags"},t.createElement(H.r,{...lt("copyTags")})),t.createElement(Q.Lh,null,t.createElement(v.zx,{type:"button",variant:"secondary",onClick:Ue,fill:"outline"},"Cancel"),t.createElement(v.zx,{disabled:we,type:"submit","aria-label":"Save dashboard button"},we?"Saving...":"Save"))))};var le=e(74639),ce=e(23852),q=e(83967),ne=e(60105);const pe=({dashboard:de,isLoading:we,saveModel:_e,options:Je,onSubmit:Ue,onCancel:$e,onSuccess:Qe,onOptionsChange:tt})=>{const lt=(0,t.useMemo)(()=>de.hasTimeChanged(),[de]),Me=(0,t.useMemo)(()=>de.hasVariableValuesChanged(),[de]),[De,We]=(0,t.useState)(!1);return t.createElement(_.l,{onSubmit:async qe=>{if(!Ue)return;We(!0),Je={...Je,message:qe.message},(await Ue(_e.clone,Je,de)).status==="success"?(Je.saveVariables&&de.resetOriginalVariables(),Je.saveTimerange&&de.resetOriginalTime(),Qe()):We(!1)}},({register:qe,errors:st})=>{const dt=qe("message");return t.createElement(ce.K,{gap:2,direction:"column",alignItems:"flex-start"},lt&&t.createElement(q.X,{checked:!!Je.saveTimerange,onChange:()=>tt({...Je,saveTimerange:!Je.saveTimerange}),label:"Save current time range as dashboard default","aria-label":le.wl.pages.SaveDashboardModal.saveTimerange}),Me&&t.createElement(q.X,{checked:!!Je.saveVariables,onChange:()=>tt({...Je,saveVariables:!Je.saveVariables}),label:"Save current variable values as dashboard default","aria-label":le.wl.pages.SaveDashboardModal.saveVariables}),t.createElement(ne.K,{...dt,"aria-label":"message",value:Je.message,onChange:Tt=>{tt({...Je,message:Tt.currentTarget.value}),dt.onChange(Tt)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5}),t.createElement(ce.K,{alignItems:"center"},t.createElement(v.zx,{variant:"secondary",onClick:$e,fill:"outline"},"Cancel"),t.createElement(v.zx,{type:"submit",disabled:!_e.hasChanges||we,icon:De?"fa fa-spinner":void 0,"aria-label":le.wl.pages.SaveDashboardModal.save},we?"Saving...":"Save"),!_e.hasChanges&&t.createElement("div",null,"No changes to save")))})};var re=e(49086),ie=e(71585);const Se=({dashboard:de,onCancel:we})=>{const[_e,Je]=(0,t.useState)(()=>{const $e=de.getSaveModelClone();return delete $e.id,JSON.stringify($e,null,2)}),Ue=(0,t.useCallback)(()=>{const $e=new Blob([_e],{type:"application/json;charset=utf-8"});(0,re.saveAs)($e,de.title+"-"+new Date().getTime()+".json")},[de.title,_e]);return t.createElement(t.Fragment,null,t.createElement(ce.K,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",de.meta.provisionedExternalId),t.createElement(ne.K,{spellCheck:!1,value:_e,onChange:$e=>{Je($e.currentTarget.value)},className:ye.json}),t.createElement(Q.Lh,null,t.createElement(v.zx,{variant:"secondary",onClick:we,fill:"outline"},"Cancel"),t.createElement(ie.m,{icon:"copy",getText:()=>_e},"Copy JSON to clipboard"),t.createElement(v.zx,{type:"submit",onClick:Ue},"Save JSON to file"))))},ye={json:(0,c.css)`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},Ce=({dashboard:de,onDismiss:we,onSaveSuccess:_e,isCopy:Je})=>{const[Ue,$e]=(0,t.useState)({}),Qe=de.meta.provisioned,tt=de.version===0,lt=(0,n.Z)(async()=>tt?void 0:(await o.ae.getDashboardByUid(de.uid)).dashboard,[de,tt]),Me=(0,t.useMemo)(()=>{const Bt=de.getSaveModelClone({saveTimerange:!!Ue.saveTimerange,saveVariables:!!Ue.saveVariables});if(!lt.value)return{clone:Bt,diff:{},diffCount:0,hasChanges:!1};const yt=JSON.stringify(Bt,null,2),ft=JSON.parse(yt),ct=(0,l.Q$)(lt.value,ft);let ge=0;for(const Be of Object.values(ct))ge+=Be.length;return{clone:Bt,diff:ct,diffCount:ge,hasChanges:ge>0&&!tt}},[de,lt.value,Ue,tt]),[De,We]=(0,t.useState)(!1),{state:qe,onDashboardSave:st}=V(de,Je),dt=_e?()=>{we(),_e()}:we,Tt=()=>De?t.createElement(g._,{diff:Me.diff,oldValue:lt.value,newValue:Me.clone}):tt||Je?t.createElement(Z,{dashboard:de,isLoading:qe.loading,onCancel:we,onSuccess:dt,onSubmit:st,isNew:tt}):Qe?t.createElement(Se,{dashboard:de,onCancel:we,onSuccess:dt}):t.createElement(pe,{dashboard:de,isLoading:qe.loading,saveModel:Me,onCancel:we,onSuccess:dt,onSubmit:st,options:Ue,onOptionsChange:$e});if(qe.error&&(0,i.kW)(qe.error)&&!qe.error.isHandled&&B(qe.error.data.status))return t.createElement(w,{error:qe.error,dashboard:de,dashboardSaveModel:Me.clone,onDismiss:we});let Nt="Save dashboard";return Je?Nt="Save dashboard copy":Qe&&(Nt="Provisioned dashboard"),t.createElement(r.d,{title:Nt,onClose:we,subtitle:de.title,tabs:t.createElement(m.J,null,t.createElement(d.O,{label:"Details",active:!De,onChangeTab:()=>We(!1)}),Me.hasChanges&&t.createElement(d.O,{label:"Changes",active:De,onChangeTab:()=>We(!0),counter:Me.diffCount})),scrollableContent:!0},Tt(),s.config.featureToggles.showDashboardValidationWarnings&&t.createElement(a.Z,{dashboard:de}))}},51727:(j,I,e)=>{"use strict";e.d(I,{Jd:()=>i,_H:()=>s,Ez:()=>o,_M:()=>d,ek:()=>m,Gt:()=>r,C2:()=>l});var t=e(12308);const n=new Set(["__expr__","aquaqanalytics-kdbbackend-datasource","cloudwatch","datasource","dlopes7-appdynamics-datasource","doitintl-bigquery-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","nagasudhirpulla-api-datasource","opentsdb","postgres","prometheus","redis-datasource","sentinelone-dataset-datasource","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","yesoreyeram-infinity-datasource"]);var i=(a=>(a.PUBLIC="public",a.EMAIL="email",a))(i||{});const s=a=>a.length>0,r=a=>a?.uid!==""&&a?.uid!==void 0,m=a=>{let g=new Set;for(const c of a)for(const h of c.targets){let f=h?.datasource?.type;f&&!n.has(f)&&g.add(f)}return Array.from(g).sort()},d=a=>`${(0,t.iE)().appUrl}public-dashboards/${a}`,o=a=>`/d/${a}?shareView=public-dashboard`,l=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i},19067:(j,I,e)=>{"use strict";e.d(I,{ShareModal:()=>mt,addDashboardShareTab:()=>_t});var t=e(42844),n=e(27702),i=e(86312),s=e(64472),r=e(13741),m=e(4432),d=e(66310),o=e(12308),l=e(66574),a=e(65322),g=e(62108),c=e(39705),h=e(51727),f=e(58083),b=e(46089),v=e(74639),y=e(34667),E=e(80978),C=e(60729),u=e(22209),D=e(1128),P=e(71585),S=e(42074),x=e(79978),M=e(64022),R=e(56074),O=e(91368),T=e(18771),U=e(92983),L=e(309),V=e(46917);const w=()=>{const{width:it}=(0,V.Z)();return it>1024};var K=e(63439);const B=v.wl.pages.ShareDashboardModal.PublicDashboard,W=({mode:it})=>n.createElement(K.b,{severity:"info",title:`You don\u2019t have permission to ${it} a public dashboard`,"data-testid":B.NoUpsertPermissionsWarningAlert,bottomSpacing:0},"Contact your admin to get permission to ",it," create public dashboards"),_=()=>n.createElement(K.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning",bottomSpacing:0});var k=e(89898),A=e.n(k);const z=v.wl.pages.ShareDashboardModal.PublicDashboard,H=({unsupportedDataSources:it})=>{const pt=(0,d.wW)(Q);return n.createElement(K.b,{severity:"warning",title:"Unsupported data sources","data-testid":z.UnsupportedDataSourcesWarningAlert,bottomSpacing:0},n.createElement("p",{className:pt.unsupportedDataSourceDescription},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",it,"."),n.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",className:A()("text-link",pt.unsupportedDataSourceDescription)},"Read more about supported data sources"))},Q=it=>({unsupportedDataSourceDescription:(0,t.css)`
    color: ${it.colors.text.secondary};
    margin-bottom: ${it.spacing(1)};
  `}),X=v.wl.pages.ShareDashboardModal.PublicDashboard,te=()=>n.createElement(K.b,{severity:"warning",title:"Template variables are not supported","data-testid":X.TemplateVariablesWarningAlert,bottomSpacing:0},"This public dashboard may not work since it uses template variables");var oe=e(5229),Z=e(95059);const le=v.wl.pages.ShareDashboardModal.PublicDashboard,ce=({disabled:it,onChange:pt,register:It,timeRange:Qt})=>n.createElement(n.Fragment,null,n.createElement(oe.C,{disabled:it},n.createElement(M.wc,{spacing:"md"},n.createElement(M.Ar,{orientation:1,spacing:"xs",justify:"space-between"},n.createElement(x._,{description:"The public dashboard uses the default time range settings of the dashboard"},"Default time range"),n.createElement(Z.K,{value:Qt,disabled:!0,onChange:()=>{}})),n.createElement(M.Ar,{orientation:0,spacing:"sm"},n.createElement(S.r,{...It("isTimeSelectionEnabled"),"data-testid":le.EnableTimeRangeSwitch,onChange:rn=>{(0,i.ff)("grafana_dashboards_public_time_selection_clicked",{action:rn.currentTarget.checked?"enable":"disable"}),pt("isTimeSelectionEnabled",rn.currentTarget.checked)}}),n.createElement(x._,{description:"Allow viewers to change time range"},"Time range picker enabled")),n.createElement(M.Ar,{orientation:0,spacing:"sm"},n.createElement(S.r,{...It("isAnnotationsEnabled"),onChange:rn=>{(0,i.ff)("grafana_dashboards_public_annotations_clicked",{action:rn.currentTarget.checked?"enable":"disable"}),pt("isAnnotationsEnabled",rn.currentTarget.checked)},"data-testid":le.EnableAnnotationsSwitch}),n.createElement(x._,{description:"Show annotations on public dashboard"},"Show annotations")))));var q=e(77720),ne=e(66670),pe=e(16310),re=e(40705);const ie=[{label:"Anyone with a link",value:h.Jd.PUBLIC},{label:"Only specified people",value:h.Jd.EMAIL}],Se=v.wl.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,ye=({recipients:it,dashboardUid:pt,publicDashboardUid:It})=>{const Qt=(0,d.wW)(de),[rn,{isLoading:un}]=(0,c.r5)(),[xn,{isLoading:Kn}]=(0,c.RS)(),_n=un||Kn,Ma=aa=>{(0,i.ff)("grafana_dashboards_public_delete_sharing_email_clicked"),rn({recipientUid:aa,dashboardUid:pt,uid:It})},la=aa=>{(0,i.ff)("grafana_dashboards_public_reshare_email_clicked"),xn({recipientUid:aa,uid:It})};return n.createElement("table",{className:Qt.table,"data-testid":Se.EmailSharingList},n.createElement("tbody",null,it.map((aa,ba)=>n.createElement("tr",{key:aa.uid},n.createElement("td",null,aa.recipient),n.createElement("td",null,n.createElement(q.h,{className:Qt.tableButtonsContainer},n.createElement(ne.zx,{type:"button",variant:"destructive",fill:"text","aria-label":"Revoke",title:"Revoke",size:"sm",disabled:_n,onClick:()=>Ma(aa.uid),"data-testid":`${Se.DeleteEmail}-${ba}`},"Revoke"),n.createElement(ne.zx,{type:"button",variant:"primary",fill:"text","aria-label":"Resend",title:"Resend",size:"sm",disabled:_n,onClick:()=>la(aa.uid),"data-testid":`${Se.ReshareLink}-${ba}`},"Resend")))))))},Ce=()=>{const{width:it}=(0,V.Z)(),pt=(0,d.wW)(de),Qt=(0,T.useSelector)(ma=>ma.dashboard).getModel(),{data:rn}=(0,c.Ym)(Qt.uid),[un]=(0,c.Mi)(),[xn,{isLoading:Kn}]=(0,c.FJ)(),{register:_n,setValue:Ma,control:la,watch:aa,handleSubmit:ba,formState:{errors:ga},reset:Ca}=(0,b.cI)({defaultValues:{shareType:rn?.share||h.Jd.PUBLIC,email:""},mode:"onSubmit"}),Ha=ma=>{const At={dashboard:Qt,payload:{...rn,share:ma}};un(At)},ka=async ma=>{(0,i.ff)("grafana_dashboards_public_add_share_email_clicked"),await xn({recipient:ma.email,uid:rn.uid,dashboardUid:Qt.uid}).unwrap(),Ca({email:"",shareType:h.Jd.EMAIL})};return n.createElement("form",{"data-testid":Se.Container,className:pt.container,onSubmit:ba(ka)},n.createElement(u.g,{label:"Can view dashboard",className:pt.field},n.createElement(pe.g,{name:"shareType",control:la,render:({field:ma})=>{const{ref:At,...Rt}=ma;return n.createElement(re.S,{...Rt,size:it<480?"sm":"md",options:ie,onChange:Mt=>{(0,i.ff)("grafana_dashboards_public_share_type_clicked",{type:Mt}),Ma("shareType",Mt),Ha(Mt)}})}})),aa("shareType")===h.Jd.EMAIL&&n.createElement(n.Fragment,null,n.createElement(u.g,{label:"Invite",description:"Invite people by email",error:ga.email?.message,invalid:!!ga.email?.message||void 0,className:pt.field},n.createElement("div",{className:pt.emailContainer},n.createElement(D.I,{className:pt.emailInput,placeholder:"email",autoCapitalize:"none",..._n("email",{required:"Email is required",pattern:{value:h.C2,message:"Invalid email"}}),"data-testid":Se.EmailSharingInput}),n.createElement(ne.zx,{type:"submit",variant:"primary",disabled:Kn,"data-testid":Se.EmailSharingInviteButton},"Invite ",Kn&&n.createElement(g.$,null)))),!!rn?.recipients?.length&&n.createElement(ye,{recipients:rn.recipients,dashboardUid:Qt.uid,publicDashboardUid:rn.uid})))},de=it=>({container:(0,t.css)`
    label: emailConfigContainer;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${it.spacing(3)};
  `,field:(0,t.css)`
    label: field-noMargin;
    margin-bottom: 0;
  `,emailContainer:(0,t.css)`
    label: emailContainer;
    display: flex;
    gap: ${it.spacing(1)};
  `,emailInput:(0,t.css)`
    label: emailInput;
    flex-grow: 1;
  `,table:(0,t.css)`
    label: table;
    display: flex;
    max-height: 220px;
    overflow-y: scroll;

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${it.spacing(.5,1)};

      :nth-child(odd) {
        background: ${it.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:(0,t.css)`
    display: flex;
    justify-content: end;
  `});var we=e(66258),_e=e(67437);function Je({headerElement:it,isContentVisible:pt=!1,onRowToggle:It,title:Qt,...rn}){const un=(0,d.wW)(Ue),xn=it&&we.renderOrCallToRender(it,{className:un.summaryWrapper});return n.createElement("div",{className:un.wrapper},n.createElement("div",{className:un.header},n.createElement(_e.h,{name:pt?"angle-down":"angle-right",tooltip:pt?"Collapse settings":"Expand settings",className:un.collapseIcon,onClick:It,"aria-expanded":pt,...rn}),Qt&&n.createElement("div",{className:un.titleWrapper,onClick:It},n.createElement("span",{className:un.title},Qt)),xn))}Je.displayName="SettingsBarHeader";function Ue(it){return{wrapper:(0,t.css)({label:"header",padding:it.spacing(.5,.5),borderRadius:it.shape.borderRadius(1),background:it.colors.background.secondary,minHeight:it.spacing(4),"&:focus":{outline:"none"}}),header:(0,t.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,t.css)({marginLeft:it.spacing(.5),color:it.colors.text.disabled}),titleWrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${it.spacing(.5)}`,[it.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,t.css)({fontWeight:it.typography.fontWeightBold,marginLeft:it.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,t.css)({display:"flex",flexWrap:"wrap",[it.breakpoints.down("sm")]:{flex:"2 2"}})}}function $e({children:it,title:pt,headerElement:It,...Qt}){const rn=(0,d.wW)(Qe),[un,xn]=(0,n.useState)(!1);function Kn(){xn(_n=>!_n)}return n.createElement(n.Fragment,null,n.createElement(Je,{onRowToggle:Kn,isContentVisible:un,title:pt,headerElement:It,...Qt}),un&&n.createElement("div",{className:rn.content},it))}$e.displayName="SettingsBar";const Qe=it=>({content:(0,t.css)({marginTop:it.spacing(1),marginLeft:it.spacing(4)})});var tt=e(49430);function lt({className:it,isDataLoading:pt=!1,timeRange:It,timeSelectionEnabled:Qt,annotationsEnabled:rn}){const un=(0,d.wW)(Me);return pt?n.createElement("div",{className:(0,t.cx)(un.summaryWrapper,it)},n.createElement(g.$,{className:un.summary,inline:!0,size:14})):n.createElement("div",{className:(0,t.cx)(un.summaryWrapper,it)},n.createElement("span",{className:un.summary},"Time range = ",n.createElement(tt.q,{className:un.timeRange,value:It})),n.createElement("span",{className:un.summary},`Time range picker = ${Qt?"enabled":"disabled"}`),n.createElement("span",{className:un.summary},`Annotations = ${rn?"show":"hide"}`))}lt.displayName="SettingsSummary";const Me=it=>({summaryWrapper:(0,t.css)({display:"flex"}),summary:(0,t.css)`
      label: collapsedText;
      margin-left: ${it.spacing.gridSize*2}px;
      font-size: ${it.typography.bodySmall.fontSize};
      color: ${it.colors.text.secondary};
    `,timeRange:(0,t.css)({display:"inline-block"})}),De=v.wl.pages.ShareDashboardModal.PublicDashboard,We=()=>{const it=(0,d.wW)(qe),pt=w(),{showModal:It,hideModal:Qt}=(0,n.useContext)(C.kr),rn=O.contextSrv.hasAccess(T.AccessControlAction.DashboardsPublicWrite,(0,L.RN)()),un=!!y.config.featureToggles.publicDashboardsEmailSharing&&(0,E.v)("publicDashboardsEmailSharing"),Kn=(0,T.useSelector)(tn=>tn.dashboard).getModel(),_n=Kn.getVariables(),Ma=(0,h.ek)(Kn.panels),{data:la,isFetching:aa}=(0,c.Ym)(Kn.uid),[ba,{isLoading:ga}]=(0,c.Mi)(),Ca=ga||aa,Ha=!rn||Ca,ka=(0,R.O)(Kn.getDefaultTime(),Kn),{handleSubmit:ma,setValue:At,register:Rt}=(0,b.cI)({defaultValues:{isAnnotationsEnabled:la?.annotationsEnabled,isTimeSelectionEnabled:la?.timeSelectionEnabled,isPaused:!la?.isEnabled}}),Mt=async tn=>{const{isAnnotationsEnabled:Un,isTimeSelectionEnabled:$n,isPaused:kn}=tn,Fn={dashboard:Kn,payload:{...la,annotationsEnabled:Un,timeSelectionEnabled:$n,isEnabled:!kn}};ba(Fn)},$t=async(tn,Un)=>{At(tn,Un),await ma($n=>Mt($n))()},Pn=()=>{It(mt,{dashboard:Kn,onDismiss:Qt,activeTab:"public-dashboard"})};return n.createElement("div",{className:it.configContainer},rn&&Kn.hasUnsavedChanges()&&n.createElement(_,null),!rn&&n.createElement(W,{mode:"edit"}),(0,h._H)(_n)&&n.createElement(te,null),!!Ma.length&&n.createElement(H,{unsupportedDataSources:Ma.join(", ")}),un&&n.createElement(Ce,null),n.createElement(u.g,{label:"Dashboard URL",className:it.fieldSpace},n.createElement(D.I,{value:(0,h._M)(la.accessToken),readOnly:!0,disabled:!la?.isEnabled,"data-testid":De.CopyUrlInput,addonAfter:n.createElement(P.m,{"data-testid":De.CopyUrlButton,variant:"primary",disabled:!la?.isEnabled,getText:()=>(0,h._M)(la.accessToken)},"Copy")})),n.createElement(u.g,{className:it.fieldSpace},n.createElement(M.Ar,null,n.createElement(S.r,{...Rt("isPaused"),disabled:Ha,onChange:tn=>{(0,i.ff)("grafana_dashboards_public_enable_clicked",{action:tn.currentTarget.checked?"disable":"enable"}),$t("isPaused",tn.currentTarget.checked)},"data-testid":De.PauseSwitch}),n.createElement(x._,{className:(0,t.css)`
              margin-bottom: 0;
            `},"Pause sharing dashboard"))),n.createElement(u.g,{className:it.fieldSpace},n.createElement($e,{title:"Settings",headerElement:({className:tn})=>n.createElement(lt,{className:tn,isDataLoading:Ca,timeRange:ka,timeSelectionEnabled:la?.timeSelectionEnabled,annotationsEnabled:la?.annotationsEnabled}),"data-testid":De.SettingsDropdown},n.createElement(ce,{disabled:Ha,onChange:$t,register:Rt,timeRange:ka}))),n.createElement(M.Ar,{orientation:pt?0:1,justify:pt?"flex-end":"flex-start",align:pt?"center":"normal"},n.createElement(M.Lh,{justify:"flex-end"},n.createElement(U.H,{type:"button",disabled:Ha,"data-testid":De.DeleteButton,onDismiss:Pn,variant:"destructive",fill:"outline",dashboard:Kn,publicDashboard:{uid:la.uid,dashboardUid:Kn.uid,title:Kn.title}},"Revoke public URL"))))},qe=it=>({configContainer:(0,t.css)`
    label: config container;
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    gap: ${it.spacing(3)};
  `,fieldSpace:(0,t.css)`
    label: field space;
    width: 100%;
    margin-bottom: 0;
  `,timeRange:(0,t.css)({display:"inline-block"})}),st=We;var dt=e(23839),Tt=e(83967);const Nt=v.wl.pages.ShareDashboardModal.PublicDashboard,Bt=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public*",testId:Nt.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of data sources*",testId:Nt.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public will cause queries to run each time is viewed, which may increase costs*",testId:Nt.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],yt=({disabled:it,register:pt})=>{const It=(0,d.wW)(ft);return n.createElement(n.Fragment,null,n.createElement("p",{className:It.title},"Before you make the dashboard public, acknowledge the following:"),n.createElement(oe.C,{disabled:it},n.createElement(M.wc,{spacing:"md"},Bt.map(Qt=>n.createElement(M.Lh,{key:Qt.type,spacing:"none",align:"center"},n.createElement(Tt.X,{...pt(Qt.type,{required:!0}),label:Qt.description,"data-testid":Qt.testId}),n.createElement(ne.Qj,{variant:"primary",href:Qt.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:Qt.info.tooltip}))))))},ft=it=>({title:(0,t.css)`
    font-weight: ${it.typography.fontWeightBold};
  `}),ct=()=>{const it=(0,d.wW)(ge);return n.createElement("div",{className:it.container},n.createElement("p",{className:it.description},"Currently, we don\u2019t support template variables or frontend data sources"),n.createElement("p",{className:it.description},"We'd love your feedback. To share, please comment on this"," ",n.createElement("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:A()("text-link",it.description)},"GitHub discussion"),"."))},ge=it=>({container:(0,t.css)`
    margin-bottom: ${it.spacing(3)};
  `,description:(0,t.css)`
    color: ${it.colors.text.secondary};
    margin-bottom: ${it.spacing(1)};
  `}),Be=v.wl.pages.ShareDashboardModal.PublicDashboard,Le=({isError:it})=>{const pt=(0,d.wW)(he),It=O.contextSrv.hasAccess(T.AccessControlAction.DashboardsPublicWrite,(0,L.RN)()),rn=(0,T.useSelector)(la=>la.dashboard).getModel(),un=(0,h.ek)(rn.panels),[xn,{isLoading:Kn}]=(0,c.zZ)(),_n=!It||Kn||it,Ma=async()=>{(0,i.ff)("grafana_dashboards_public_create_clicked"),xn({dashboard:rn,payload:{isEnabled:!0}})};return n.createElement("div",null,n.createElement("p",{className:pt.title},"Welcome to public dashboards public preview!"),n.createElement(ct,null),!It&&n.createElement(W,{mode:"create"}),(0,h._H)(rn.getVariables())&&n.createElement(te,null),!!un.length&&n.createElement(H,{unsupportedDataSources:un.join(", ")}),n.createElement(dt.l,{onSubmit:Ma,validateOn:"onChange",maxWidth:"none"},({register:la,formState:{isValid:aa}})=>n.createElement(n.Fragment,null,n.createElement("div",{className:pt.checkboxes},n.createElement(yt,{disabled:_n,register:la})),n.createElement("div",{className:pt.buttonContainer},n.createElement(ne.zx,{type:"submit",disabled:_n||!aa,"data-testid":Be.CreateButton},"Generate public URL ",Kn&&n.createElement(g.$,{className:pt.loadingSpinner}))))))},he=it=>({title:(0,t.css)`
    font-size: ${it.typography.h4.fontSize};
    margin: ${it.spacing(0,0,2)};
  `,checkboxes:(0,t.css)`
    margin: ${it.spacing(0,0,4)};
  `,buttonContainer:(0,t.css)`
    display: flex;
    justify-content: end;
  `,loadingSpinner:(0,t.css)`
    margin-left: ${it.spacing(1)};
  `}),He=Le,Pe=()=>{const it=(0,d.wW)(Te);return n.createElement(f.L,{className:it.loadingContainer},n.createElement(n.Fragment,null,"Loading configuration",n.createElement(g.$,{size:20,className:it.spinner})))},Ie=it=>{const{data:pt,isLoading:It,isError:Qt}=(0,c.Ym)(it.dashboard.uid);return(0,n.useEffect)(()=>{(0,i.ff)("grafana_dashboards_public_share_viewed")},[]),n.createElement(n.Fragment,null,It?n.createElement(Pe,null):(0,h.Gt)(pt)?n.createElement(st,null):n.createElement(He,{isError:Qt}))},Te=it=>({loadingContainer:(0,t.css)`
    height: 280px;
    align-items: center;
    justify-content: center;
    gap: ${it.spacing(1)};
  `,spinner:(0,t.css)`
    margin-bottom: ${it.spacing(0)};
  `});var Re=e(73668),ue=e(60105);const xe=({selectedTheme:it="current",onChange:pt})=>{const It=[{label:(0,a.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,a.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,a.t)("share-modal.theme-picker.light","Light"),value:"light"}];return n.createElement(u.g,{label:(0,a.t)("share-modal.theme-picker.field-name","Theme")},n.createElement(re.S,{options:It,value:it,onChange:pt}))};var Ve=e(42857);class Ne extends n.PureComponent{constructor(pt){super(pt),this.buildIframeHtml=()=>{const{panel:It,dashboard:Qt}=this.props,{useCurrentTimeRange:rn,selectedTheme:un}=this.state,xn=(0,Ve.S_)(rn,Qt.uid,un,It);this.setState({iframeHtml:xn})},this.onIframeHtmlChange=It=>{this.setState({iframeHtml:It.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=It=>{this.setState({selectedTheme:It},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,i.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:pt,selectedTheme:It,iframeHtml:Qt}=this.state,un=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,a.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(a.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),n.createElement(u.g,{label:(0,a.t)("share-modal.embed.time-range","Current time range"),description:un},n.createElement(S.r,{id:"share-current-time-range",value:pt,onChange:this.onUseCurrentTimeRangeChange})),n.createElement(xe,{selectedTheme:It,onChange:this.onThemeChange}),n.createElement(u.g,{label:(0,a.t)("share-modal.embed.html","Embed HTML"),description:(0,a.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},n.createElement(ue.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:Qt,onChange:this.onIframeHtmlChange})),n.createElement(r.u.ButtonRow,null,n.createElement(P.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},n.createElement(a.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var fe=e(49086),ve=e(45937),ze=e(50389),Oe=e(43620),Fe=e(55925),Ge=e(11649);function nt({json:it,onDismiss:pt}){const It=(0,n.useCallback)(()=>it,[it]);return n.createElement(r.u,{title:"JSON",onDismiss:pt,onClickBackdrop:pt,isOpen:!0},n.createElement(Fe.Z,{disableHeight:!0},({width:Qt})=>n.createElement(Ge.p,{value:it,language:"json",showMiniMap:!1,height:"500px",width:Qt})),n.createElement(r.u.ButtonRow,null,n.createElement(P.m,{icon:"copy",getText:It},n.createElement(a.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class Xe extends n.PureComponent{constructor(pt){super(pt),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:It}=this.props,{shareExternally:Qt}=this.state,{trimDefaults:rn}=this.state;Qt?this.exporter.makeExportable(It).then(un=>{rn?(0,ve.i)().post("/api/dashboards/trim",{dashboard:un}).then(xn=>{this.openSaveAsDialog(xn.dashboard)}):this.openSaveAsDialog(un)}):rn?(0,ve.i)().post("/api/dashboards/trim",{dashboard:It.getSaveModelClone()}).then(un=>{this.openSaveAsDialog(un.dashboard)}):this.openSaveAsDialog(It.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:It}=this.props,{shareExternally:Qt}=this.state,{trimDefaults:rn}=this.state;Qt?this.exporter.makeExportable(It).then(un=>{rn?(0,ve.i)().post("/api/dashboards/trim",{dashboard:un}).then(xn=>{this.openJsonModal(xn.dashboard)}):this.openJsonModal(un)}):rn?(0,ve.i)().post("/api/dashboards/trim",{dashboard:It.getSaveModelClone()}).then(un=>{this.openJsonModal(un.dashboard)}):this.openJsonModal(It.getSaveModelClone())},this.openSaveAsDialog=It=>{const Qt=JSON.stringify(It,null,2),rn=new Blob([Qt],{type:"application/json;charset=utf-8"}),un=new Date().getTime();(0,fe.saveAs)(rn,`${It.title}-${un}.json`)},this.openJsonModal=It=>{l.h$.publish(new Oe.Dn({props:{json:JSON.stringify(It,null,2)},component:nt})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new ze.E}componentDidMount(){(0,i.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:pt}=this.props,{shareExternally:It}=this.state,{trimDefaults:Qt}=this.state,rn=(0,a.t)("share-modal.export.share-externally-label","Export for sharing externally"),un=(0,a.t)("share-modal.export.share-default-label","Export with default values removed");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(a.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),n.createElement(u.g,{label:rn},n.createElement(S.r,{id:"share-externally-toggle",value:It,onChange:this.onShareExternallyChange})),y.config.featureToggles.trimDefaults&&n.createElement(u.g,{label:un},n.createElement(S.r,{id:"trim-defaults-toggle",value:Qt,onChange:this.onTrimDefaultsChange})),n.createElement(r.u.ButtonRow,null,n.createElement(ne.zx,{variant:"secondary",onClick:pt,fill:"outline"},n.createElement(a.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),n.createElement(ne.zx,{variant:"secondary",onClick:this.onViewJson},n.createElement(a.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),n.createElement(ne.zx,{variant:"primary",onClick:this.onSaveAsFile},n.createElement(a.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var ut=e(14673);const ht=({panel:it,initialFolderUid:pt,onDismiss:It})=>((0,n.useEffect)(()=>{(0,i.ff)("grafana_dashboards_library_panel_share_viewed")},[]),it?n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(a.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),n.createElement(ut.T,{panel:it,initialFolderUid:pt,onDismiss:It})):null);var wt=e(73453);class mn extends n.PureComponent{constructor(pt){super(pt),this.buildUrl=async()=>{const{panel:It,dashboard:Qt}=this.props,{useCurrentTimeRange:rn,useShortUrl:un,selectedTheme:xn}=this.state,Kn=await(0,Ve.bl)(rn,xn,It,un),_n=(0,Ve.Sc)(rn,Qt.uid,xn,It);this.setState({shareUrl:Kn,imageUrl:_n})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=It=>{this.setState({selectedTheme:It})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,i.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(pt,It){const{useCurrentTimeRange:Qt,useShortUrl:rn,selectedTheme:un}=this.state;(It.useCurrentTimeRange!==Qt||It.selectedTheme!==un||It.useShortUrl!==rn)&&this.buildUrl()}render(){const{panel:pt,dashboard:It}=this.props,Qt=It?It.time.to==="now":!1,{useCurrentTimeRange:rn,useShortUrl:un,selectedTheme:xn,shareUrl:Kn,imageUrl:_n}=this.state,Ma=v.wl.pages.SharePanelModal,la=!!It.id,aa=(0,a.t)("share-modal.link.time-range-label","Lock time range"),ba=(0,a.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),ga=(0,a.t)("share-modal.link.shorten-url","Shorten URL"),Ca=(0,a.t)("share-modal.link.link-url","Link URL");return n.createElement(n.Fragment,null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(a.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),n.createElement(oe.C,null,n.createElement(u.g,{label:aa,description:Qt?ba:""},n.createElement(S.r,{id:"share-current-time-range",value:rn,onChange:this.onUseCurrentTimeRangeChange})),n.createElement(xe,{selectedTheme:xn,onChange:this.onThemeChange}),n.createElement(u.g,{label:ga},n.createElement(S.r,{id:"share-shorten-url",value:un,onChange:this.onUrlShorten})),n.createElement(u.g,{label:Ca},n.createElement(D.I,{id:"link-url-input",value:Kn,readOnly:!0,addonAfter:n.createElement(P.m,{icon:"copy",variant:"primary",getText:this.getShareUrl},n.createElement(a.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),pt&&o.default.rendererAvailable&&n.createElement(n.Fragment,null,la&&n.createElement("div",{className:"gf-form"},n.createElement("a",{href:_n,target:"_blank",rel:"noreferrer","aria-label":Ma.linkToRenderedImage},n.createElement(wt.J,{name:"camera"}),"\xA0",n.createElement(a.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!la&&n.createElement(K.b,{severity:"info",title:(0,a.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},n.createElement(a.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),pt&&!o.default.rendererAvailable&&n.createElement(K.b,{severity:"info",title:(0,a.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},n.createElement(a.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the\xA0",n.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var vn=e(59421),gn=e(73289),Sn=e(28580),Cn=e(26858),pn=e(6230);const nn="/api/snapshots";class Ct extends n.PureComponent{constructor(pt){super(pt),this.createSnapshot=It=>()=>{const{timeoutSeconds:Qt}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,It)},Qt*1e3)},this.saveSnapshot=async(It,Qt)=>{const{snapshotExpires:rn}=this.state,un=this.dashboard.getSaveModelClone();this.scrubDashboard(un);const xn={dashboard:un,name:un.title,expires:rn,external:Qt};try{const Kn=await(0,gn.i)().post(nn,xn);this.setState({deleteUrl:Kn.deleteUrl,snapshotUrl:Kn.url,step:2})}finally{(0,i.ff)("grafana_dashboards_snapshot_created",{location:Qt?"raintank":"local"}),this.setState({isLoading:!1})}},this.scrubDashboard=It=>{const{panel:Qt}=this.props,{snapshotName:rn}=this.state;It.title=rn,It.time=(0,Cn.$t)().timeRange(),It.links=[],It.panels.forEach(xn=>{xn.targets=[],xn.links=[],xn.datasource=null});const un=It.annotations.list.filter(xn=>xn.enable);if(It.annotations.list=un.map(xn=>({name:xn.name,enable:xn.enable,iconColor:xn.iconColor,snapshotData:xn.snapshotData,type:xn.type,builtIn:xn.builtIn,hide:xn.hide})),It.getVariables().forEach(xn=>{"query"in xn&&(xn.query=""),"options"in xn&&(xn.options=xn.current&&!(0,vn.Q)(xn.current)?[xn.current]:[]),"refresh"in xn&&(xn.refresh=pn.Bd.never)}),Qt){const xn=Qt.getSaveModel();xn.gridPos.w=24,xn.gridPos.x=0,xn.gridPos.y=0,xn.gridPos.h=20,It.panels=[xn]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(xn=>{delete xn.snapshotData}),this.dashboard.annotations.list.forEach(xn=>{delete xn.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:It}=this.state;await(0,gn.i)().get(It),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=It=>{this.setState({snapshotName:It.target.value})},this.onTimeoutChange=It=>{this.setState({timeoutSeconds:Number(It.target.value)})},this.onExpireChange=It=>{this.setState({selectedExpireOption:It,snapshotExpires:It.value})},this.dashboard=pt.dashboard,this.expireOptions=[{label:(0,a.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,a.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,a.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,a.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:pt.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,i.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const pt=await(0,gn.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:pt.externalSnapshotName,externalEnabled:pt.externalEnabled})}renderStep1(){const{onDismiss:pt}=this.props,{snapshotName:It,selectedExpireOption:Qt,timeoutSeconds:rn,isLoading:un,sharingButtonText:xn,externalEnabled:Kn}=this.state,_n=(0,a.t)("share-modal.snapshot.name","Snapshot name"),Ma=(0,a.t)("share-modal.snapshot.expire","Expire"),la=(0,a.t)("share-modal.snapshot.timeout","Timeout (seconds)"),aa=(0,a.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("p",{className:"share-modal-info-text"},n.createElement(a.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),n.createElement("p",{className:"share-modal-info-text"},n.createElement(a.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",n.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),n.createElement(u.g,{label:_n},n.createElement(D.I,{id:"snapshot-name-input",width:30,value:It,onChange:this.onSnapshotNameChange})),n.createElement(u.g,{label:Ma},n.createElement(Sn.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:Qt,onChange:this.onExpireChange})),n.createElement(u.g,{label:la,description:aa},n.createElement(D.I,{id:"timeout-input",type:"number",width:21,value:rn,onChange:this.onTimeoutChange})),n.createElement(r.u.ButtonRow,null,n.createElement(ne.zx,{variant:"secondary",onClick:pt,fill:"outline"},n.createElement(a.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),Kn&&n.createElement(ne.zx,{variant:"secondary",disabled:un,onClick:this.createSnapshot(!0)},xn),n.createElement(ne.zx,{variant:"primary",disabled:un,onClick:this.createSnapshot()},n.createElement(a.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:pt}=this.state;return n.createElement(n.Fragment,null,n.createElement(u.g,{label:(0,a.t)("share-modal.snapshot.url-label","Snapshot URL")},n.createElement(D.I,{id:"snapshot-url-input",value:pt,readOnly:!0,addonAfter:n.createElement(P.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},n.createElement(a.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),n.createElement("div",{className:"pull-right",style:{padding:"5px"}},n.createElement(a.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",n.createElement(ne.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},n.createElement(a.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return n.createElement("div",{className:"share-modal-header"},n.createElement("p",{className:"share-modal-info-text"},n.createElement(a.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:pt,step:It}=this.state;return n.createElement(n.Fragment,null,It===1&&this.renderStep1(),It===2&&this.renderStep2(),It===3&&this.renderStep3(),pt&&n.createElement(g.$,{inline:!0}))}}const bt=[],Ut=[];function _t(it){bt.push(it)}function Gt(it){Ut.push(it)}function jt(it,pt){const Qt=[{label:(0,a.t)("share-modal.tab-title.link","Link"),value:"link",component:mn}];if(l.contextSrv.isSignedIn&&o.config.snapshotEnabled){const un=(0,a.t)("share-modal.tab-title.snapshot","Snapshot");Qt.push({label:un,value:"snapshot",component:Ct})}if(it){const un=(0,a.t)("share-modal.tab-title.embed","Embed");if(Qt.push({label:un,value:"embed",component:Ne}),!(0,Re.V)(it)){const xn=(0,a.t)("share-modal.tab-title.library-panel","Library panel");Qt.push({label:xn,value:"library_panel",component:ht})}Qt.push(...Ut)}else{const un=(0,a.t)("share-modal.tab-title.export","Export");Qt.push({label:un,value:"export",component:Xe}),Qt.push(...bt)}o.config.featureToggles.publicDashboards&&Qt.push({label:"Public dashboard",value:"public-dashboard",component:Ie});const rn=Qt.find(un=>un.value===pt);return{tabs:Qt,activeTab:rn?.value??Qt[0].value}}function sn(it){const{tabs:pt,activeTab:It}=jt(it.panel,it.activeTab);return{tabs:pt,activeTab:It}}class St extends n.Component{constructor(pt){super(pt),this.onSelectTab=It=>{this.setState(Qt=>({...Qt,activeTab:It.value}))},this.state=sn(pt)}componentDidMount(){(0,i.ff)("grafana_dashboards_share_modal_viewed")}getActiveTab(){const{tabs:pt,activeTab:It}=this.state;return pt.find(Qt=>Qt.value===It)}renderTitle(){const{panel:pt}=this.props,{activeTab:It}=this.state,Qt=pt?(0,a.t)("share-modal.panel.title","Share Panel"):(0,a.t)("share-modal.dashboard.title","Share"),rn=jt(this.props.panel,this.state.activeTab).tabs;return n.createElement(s.H,{title:Qt,icon:"share-alt",tabs:rn,activeTab:It,onChangeTab:this.onSelectTab})}render(){const{dashboard:pt,panel:It,theme:Qt}=this.props,rn=kt(Qt),xn=this.getActiveTab().component;return n.createElement(r.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss,className:rn.container,contentClassName:rn.content},n.createElement(m.I,null,n.createElement(xn,{dashboard:pt,panel:It,onDismiss:this.props.onDismiss})))}}const mt=(0,d.HE)(St),kt=it=>({container:(0,t.css)({label:"shareModalContainer",paddingTop:it.spacing(1)}),content:(0,t.css)({label:"shareModalContent",padding:it.spacing(3,2,2,2)})})},42857:(j,I,e)=>{"use strict";e.d(I,{OS:()=>o,S_:()=>c,Sc:()=>g,bl:()=>l});var t=e(78968),n=e(94469),i=e(99633),s=e(34667),r=e(82146),m=e(26858);function d({useCurrentTimeRange:f,selectedTheme:b,panel:v,search:y=window.location.search,range:E=(0,m.$t)().timeRange(),orgId:C=s.config.bootData.user.orgId}){const u=new URLSearchParams(y);return u.set("from",String(E.from.valueOf())),u.set("to",String(E.to.valueOf())),u.set("orgId",String(C)),f||(u.delete("from"),u.delete("to")),b!=="current"&&u.set("theme",b),v&&!u.has("editPanel")&&u.set("viewPanel",String(v.id)),u}function o(){let f=window.location.href;const b=f.indexOf("?");return b!==-1&&(f=f.substring(0,b)),f}async function l(f,b,v,y){const E=o(),C=d({useCurrentTimeRange:f,selectedTheme:b,panel:v}),u=t.Cj.appendQueryToUrl(E,C.toString());return y?await(0,r.D)(u):u}function a(f,b,v,y){const E=o(),C=d({useCurrentTimeRange:f,selectedTheme:v,panel:y});let u=E.replace(s.config.appSubUrl+"/dashboard/",s.config.appSubUrl+"/dashboard-solo/");u=u.replace(s.config.appSubUrl+"/d/",s.config.appSubUrl+"/d-solo/"),n.u.stripBaseFromUrl(E)==="/"&&(u=`${s.config.appUrl}d-solo/${b}`);const P=C.get("editPanel")??C.get("viewPanel")??"";return C.set("panelId",P),C.delete("editPanel"),C.delete("viewPanel"),t.Cj.appendQueryToUrl(u,C.toString())}function g(f,b,v,y){let C=a(f,b,v,y).replace(s.config.appSubUrl+"/dashboard-solo/",s.config.appSubUrl+"/render/dashboard-solo/");return C=C.replace(s.config.appSubUrl+"/d-solo/",s.config.appSubUrl+"/render/d-solo/"),C+="&width=1000&height=500"+h(),C}function c(f,b,v,y){return'<iframe src="'+a(f,b,v,y)+'" width="450" height="200" frameborder="0"></iframe>'}function h(){const f="&tz=UTC"+encodeURIComponent((0,i.CQ)().format("Z"));if(!window.Intl)return f;const b=window.Intl.DateTimeFormat();if(!b.resolvedOptions)return f;const v=b.resolvedOptions();return v.timeZone?"&tz="+encodeURIComponent(v.timeZone):f}},60195:(j,I,e)=>{"use strict";e.d(I,{B:()=>c});var t=e(42844),n=e(89949),i=e(27702),s=e(66310),r=e(73453);const m=({diff:f})=>{const b=(0,s.wW)(d),v=!(0,n.isUndefined)(f.originalValue)&&!(0,n.isArray)(f.originalValue)&&!(0,n.isObject)(f.originalValue),y=!(0,n.isUndefined)(f.value)&&!(0,n.isArray)(f.value)&&!(0,n.isObject)(f.value);return i.createElement(i.Fragment,null,v&&i.createElement("span",{className:b},String(f.originalValue)),v&&y?i.createElement(r.J,{name:"arrow-right"}):null,y&&i.createElement("span",{className:b},String(f.value)))},d=f=>(0,t.css)`
  background-color: ${f.colors.action.hover};
  border-radius: ${f.shape.borderRadius()};
  color: ${f.colors.text.primary};
  font-size: ${f.typography.body.fontSize};
  margin: 0 ${f.spacing(.5)};
  padding: ${f.spacing(.5,1)};
`;var o=e(3323);const l={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},a=({diff:f,title:b})=>{const v=(0,s.wW)(g);return f?i.createElement(i.Fragment,null,i.createElement(r.J,{type:"mono",name:"circle",className:v[f.op]})," ",i.createElement("span",{className:v.embolden},b)," ",i.createElement("span",null,(0,o.dW)(f,f.path.length>1))," ",i.createElement(m,{diff:f})):i.createElement("div",{className:v.withoutDiff},i.createElement(r.J,{type:"mono",name:"circle",className:v.replace})," ",i.createElement("span",{className:v.embolden},b)," ",i.createElement("span",null,(0,o.dW)(l,!1)))},g=f=>({embolden:(0,t.css)`
    font-weight: ${f.typography.fontWeightBold};
  `,add:(0,t.css)`
    color: ${f.colors.success.main};
  `,replace:(0,t.css)`
    color: ${f.colors.success.main};
  `,move:(0,t.css)`
    color: ${f.colors.success.main};
  `,copy:(0,t.css)`
    color: ${f.colors.success.main};
  `,_get:(0,t.css)`
    color: ${f.colors.success.main};
  `,test:(0,t.css)`
    color: ${f.colors.success.main};
  `,remove:(0,t.css)`
    color: ${f.colors.success.main};
  `,withoutDiff:(0,t.css)`
    margin-bottom: ${f.spacing(2)};
  `}),c=({diffs:f,title:b})=>{const v=(0,s.wW)(h);return f.length===1?i.createElement("div",{className:v.container,"data-testid":"diffGroup"},i.createElement(a,{title:b,diff:f[0]})):i.createElement("div",{className:v.container,"data-testid":"diffGroup"},i.createElement(a,{title:b}),i.createElement("ul",{className:v.list},f.map((y,E)=>i.createElement("li",{className:v.listItem,key:`${(0,n.last)(y.path)}__${E}`},i.createElement("span",null,(0,o.dW)(y))," ",i.createElement(m,{diff:y})))))},h=f=>({container:(0,t.css)`
    background-color: ${f.colors.background.secondary};
    font-size: ${f.typography.h6.fontSize};
    margin-bottom: ${f.spacing(2)};
    padding: ${f.spacing(2)};
  `,list:(0,t.css)`
    margin-left: ${f.spacing(4)};
  `,listItem:(0,t.css)`
    margin-bottom: ${f.spacing(1)};
  `})},18475:(j,I,e)=>{"use strict";e.d(I,{Z:()=>d});var t=e(42844),n=e(27702),i=e(7698),s=e.n(i),r=e(71685),m=e(66310);const d=({oldValue:o,newValue:l})=>{const a=(0,m.l4)(),g={variables:{dark:{diffViewerBackground:a.colors.background.canvas,diffViewerColor:a.colors.text.primary,addedBackground:(0,r.Z)(a.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,r.Z)(a.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,r.Z)(a.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,r.Z)(a.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,r.Z)(a.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,r.Z)(a.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:a.colors.background.primary,gutterBackgroundDark:a.colors.background.primary,highlightBackground:(0,r.Z)(a.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,r.Z)(a.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:a.colors.background.secondary,codeFoldBackground:a.colors.background.secondary,emptyLineBackground:a.colors.background.secondary,gutterColor:a.colors.text.disabled,addedGutterColor:a.colors.text.primary,removedGutterColor:a.colors.text.primary,codeFoldContentColor:a.colors.text.disabled,diffViewerTitleBackground:a.colors.background.secondary,diffViewerTitleColor:a.colors.text.disabled,diffViewerTitleBorderColor:a.colors.border.strong}},codeFold:{fontSize:a.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${(0,r.Z)(a.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return n.createElement("div",{className:(0,t.css)`
        font-size: ${a.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},n.createElement(s(),{styles:g,oldValue:o,newValue:l,splitView:!1,compareMethod:i.DiffMethod.CSS,useDarkTheme:a.isDark}))}},7942:(j,I,e)=>{"use strict";e.d(I,{U$:()=>B,Cs:()=>x,Sd:()=>u,R1:()=>T,K8:()=>s});var t=e(89949),n=e(73289);class i{getHistoryList(k,A){const z=k&&k.uid?k.uid:void 0;return z?(0,n.i)().get(`api/dashboards/uid/${z}/versions`,A):Promise.resolve([])}getDashboardVersion(k,A){return(0,n.i)().get(`api/dashboards/uid/${k}/versions/${A}`)}restoreDashboard(k,A){const z=k&&k.uid?k.uid:void 0,H=`api/dashboards/uid/${z}/restore`;return z&&(0,t.isNumber)(A)?(0,n.i)().post(H,{version:A}):Promise.resolve({})}}const s=new i;var r=e(42844),m=e(27702),d=e(83967),o=e(65333),l=e(60729),a=e(66670),g=e(3613),c=e(26811),h=e(94469),f=e(26129),b=e(73807),v=e(18771);const y=async(_,k)=>await s.restoreDashboard(k,_),E=_=>{const k=(0,v.useSelector)(Q=>Q.dashboard.getModel()),[A,z]=(0,c.Z)(async()=>await y(_,k),[]),H=(0,b.iG)();return(0,m.useEffect)(()=>{if(A.value){const Q=f.E1.getLocation(),X=h.u.stripBaseFromUrl(A.value.url),te=Q.state?.routeReloadCounter;f.E1.replace({...Q,pathname:X,state:{routeReloadCounter:te?te+1:1}}),H.success("Dashboard restored",`Restored from version ${_}`)}},[A,_,H]),{state:A,onRestoreDashboard:z}},C=({hideModal:_,version:k})=>{const{state:A,onRestoreDashboard:z}=E(k);return(0,m.useEffect)(()=>{A.loading===!1&&A.value&&_()},[A,_]),m.createElement(g.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:_,onConfirm:z,body:m.createElement("p",null,"Are you sure you want to restore the dashboard to version ",k,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${k}`})},u=({versions:_,canCompare:k,onCheck:A})=>m.createElement("table",{className:"filter-table gf-form-group"},m.createElement("thead",null,m.createElement("tr",null,m.createElement("th",{className:"width-4"}),m.createElement("th",{className:"width-4"},"Version"),m.createElement("th",{className:"width-14"},"Date"),m.createElement("th",{className:"width-10"},"Updated by"),m.createElement("th",null,"Notes"),m.createElement("th",null))),m.createElement("tbody",null,_.map((z,H)=>m.createElement("tr",{key:z.id},m.createElement("td",null,m.createElement(d.X,{"aria-label":`Toggle selection of version ${z.version}`,className:(0,r.css)`
                display: inline;
              `,checked:z.checked,onChange:Q=>A(Q,z.id),disabled:!z.checked&&k})),m.createElement("td",null,z.version),m.createElement("td",null,z.createdDateString),m.createElement("td",null,z.createdBy),m.createElement("td",null,z.message),m.createElement("td",{className:"text-right"},H===0?m.createElement(o.V,{name:"Latest",colorIndex:17}):m.createElement(l.JY,null,({showModal:Q,hideModal:X})=>m.createElement(a.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Q(C,{version:z.version,hideModal:X})}},"Restore")))))));var D=e(66310),P=e(67437),S=e(73453);const x=({onClick:_=t.noop,baseVersion:k=0,newVersion:A=0,isNewLatest:z=!1})=>{const H=(0,D.wW)(M);return m.createElement("h3",{className:H.header},m.createElement(P.h,{name:"arrow-left",size:"xl",onClick:_,tooltip:"Reset version"}),m.createElement("span",null,"Comparing ",k," ",m.createElement(S.J,{name:"arrows-h"})," ",A," ",z&&m.createElement("cite",{className:"muted"},"(Latest)")))},M=_=>({header:(0,r.css)`
    font-size: ${_.typography.h3.fontSize};
    display: flex;
    gap: ${_.spacing(2)};
    margin-bottom: ${_.spacing(3)};
  `});var R=e(23852),O=e(80011);const T=({hasMore:_,canCompare:k,getVersions:A,getDiff:z,isLastPage:H})=>m.createElement(R.K,null,_&&m.createElement(a.zx,{type:"button",onClick:()=>A(!0),variant:"secondary",disabled:H},"Show more versions"),m.createElement(O.u,{content:"Select two versions to start comparing",placement:"bottom"},m.createElement(a.zx,{type:"button",disabled:!k,onClick:z,icon:"code-branch"},"Compare versions")));var U=e(64022),L=e(62499),V=e(60195),w=e(18475),K=e(3323);const B=({baseInfo:_,newInfo:k,diffData:A,isNewLatest:z})=>{const H=(0,K.Q$)(A.lhs,A.rhs),Q=(0,D.wW)(W);return m.createElement("div",null,m.createElement("div",{className:Q.spacer},m.createElement(U.Lh,{justify:"space-between",align:"center"},m.createElement("div",null,m.createElement("p",{className:Q.versionInfo},m.createElement("strong",null,"Version ",k.version)," updated by ",k.createdBy," ",k.ageString," -"," ",k.message),m.createElement("p",{className:(0,r.cx)(Q.versionInfo,Q.noMarginBottom)},m.createElement("strong",null,"Version ",_.version)," updated by ",_.createdBy," ",_.ageString," -"," ",_.message)),z&&m.createElement(l.JY,null,({showModal:X,hideModal:te})=>m.createElement(a.zx,{variant:"destructive",icon:"history",onClick:()=>{X(C,{version:_.version,hideModal:te})}},"Restore to version ",_.version)))),m.createElement("div",{className:Q.spacer},Object.entries(H).map(([X,te])=>m.createElement(V.B,{diffs:te,key:X,title:X}))),m.createElement(L.s,{isOpen:!1,label:"View JSON Diff"},m.createElement(w.Z,{oldValue:JSON.stringify(A.lhs,null,2),newValue:JSON.stringify(A.rhs,null,2)})))},W=_=>({spacer:(0,r.css)`
    margin-bottom: ${_.spacing(4)};
  `,versionInfo:(0,r.css)`
    color: ${_.colors.text.secondary};
    font-size: ${_.typography.bodySmall.fontSize};
  `,noMarginBottom:(0,r.css)`
    margin-bottom: 0;
  `})},3323:(j,I,e)=>{"use strict";e.d(I,{Q$:()=>r,dW:()=>m});var t=e(38063),n=e(85885),i=e(89949),s=e.n(i);const r=(l,a)=>{const g=(0,t.qu)(l,a),c=n.stringify(l,null,2),h=n.stringify(a,null,2),f=y=>y.map(E=>{let C,u,D=0;const P=(0,i.tail)(E.path.split("/"));return E.op==="replace"&&(C=(0,i.get)(l,P),u=E.value,D=h.pointers[E.path].value.line),E.op==="add"&&(u=E.value,D=h.pointers[E.path].value.line),E.op==="remove"&&(C=(0,i.get)(l,P),D=c.pointers[E.path].value.line),{op:E.op,value:u,path:P,originalValue:C,startLineNumber:D}}),b=y=>(0,i.sortBy)(y,"startLineNumber"),v=y=>y.reduce((E,C)=>{const u=C.path[0];return E[u]||(E[u]=[]),E[u].push(C),E},{});return(0,i.flow)([f,b,v])(g)},m=(l,a=!0)=>{const g=(0,i.last)(l.path),c=d(g),h=l.op==="remove"?l.originalValue:l.value;let f=o(l.op);return a&&(c?f+=` item ${g}`:(0,i.isArray)(h)&&!(0,i.isEmpty)(h)?f+=` ${h.length} ${g}`:f+=` ${g}`),f},d=l=>!(0,i.isNaN)((0,i.toNumber)(l)),o=l=>l==="add"?"added":l==="remove"?"deleted":"changed"},30084:(j,I,e)=>{"use strict";e.r(I),e.d(I,{SoloPanel:()=>g,SoloPanelPage:()=>a,default:()=>c});var t=e(27702),n=e(27173),i=e(55925),s=e(26473),r=e(70053),m=e(54195);const d=h=>({dashboard:h.dashboard.getModel()}),o={initDashboard:m.mV},l=(0,n.connect)(d,o);class a extends t.Component{constructor(){super(...arguments),this.state={panel:null,notFound:!1}}componentDidMount(){const{match:f,route:b}=this.props;this.props.initDashboard({urlSlug:f.params.slug,urlUid:f.params.uid,urlType:f.params.type,routeName:b.routeName,fixUrl:!1,keybindingSrv:this.context.keybindings})}getPanelId(){return parseInt(this.props.queryParams.panelId??"0",10)}componentDidUpdate(f){const{dashboard:b}=this.props;if(b&&(!f.dashboard||f.dashboard.uid!==b.uid)){const v=b.getPanelByUrlId(this.props.queryParams.panelId);if(!v){this.setState({notFound:!0});return}this.setState({panel:v})}}render(){return t.createElement(g,{dashboard:this.props.dashboard,notFound:this.state.notFound,panel:this.state.panel,panelId:this.getPanelId(),timezone:this.props.queryParams.timezone})}}a.contextType=s.h;const g=({dashboard:h,notFound:f,panel:b,panelId:v,timezone:y})=>f?t.createElement("div",{className:"alert alert-error"},"Panel with id ",v," not found"):!b||!h?t.createElement("div",null,"Loading & initializing dashboard"):t.createElement("div",{className:"panel-solo"},t.createElement(i.Z,null,({width:E,height:C})=>E===0?null:t.createElement(r.l,{stateKey:b.key,width:E,height:C,dashboard:h,panel:b,isEditing:!1,isViewing:!0,lazy:!1,timezone:y,hideMenu:!0}))),c=l(a)},70053:(j,I,e)=>{"use strict";e.d(I,{l:()=>sn});var t=e(27702),n=e(27173),i=e(32195),s=e(47875),r=e(19559);function m({children:St,width:mt,height:kt,onLoad:it,onChange:pt}){const It=(0,t.useId)(),[Qt,rn]=(0,t.useState)(!1),[un,xn]=(0,t.useState)(!1),Kn=(0,t.useRef)(null);return(0,r.Z)(()=>{m.addCallback(It,Ma=>{!Qt&&Ma.isIntersecting&&(rn(!0),it?.()),xn(Ma.isIntersecting),pt?.(Ma.isIntersecting)});const _n=Kn.current;return _n&&m.observer.observe(_n),()=>{delete m.callbacks[It],_n&&m.observer.unobserve(_n),Object.keys(m.callbacks).length===0&&m.observer.disconnect()}}),t.createElement("div",{id:It,ref:Kn,style:{width:mt,height:kt}},Qt&&(typeof St=="function"?St({isInView:un}):St))}const d={};m.callbacks=d,m.addCallback=(St,mt)=>m.callbacks[St]=mt,m.observer=new IntersectionObserver(St=>{for(const mt of St)m.callbacks[mt.target.id]&&m.callbacks[mt.target.id](mt)},{rootMargin:"100px"});var o=e(89898),l=e.n(o),a=e(19973),g=e(53933),c=e(8508),h=e(74639),f=e(9772),b=e(26129),v=e(92056),y=e(12308),E=e(97957),C=e(69037);function u(St){return/(d-solo|dashboard-solo)/.test(St?.toLowerCase())}function D(St,mt){return!!mt.find(kt=>kt.id==="apps")?.children?.find(kt=>kt.id===`plugin-page-${St}`)?.children?.some(kt=>kt.url?.endsWith(`/a/${St}`))}var P=e(26858),S=e(18112),x=e(39317),M=e(86312),R=e(49516),O=e(36676),T=e(42844),U=e(41999),L=e(66310),V=e(80011),w=e(73453),K=e(37424),B=e(89746),W=e(80434),_=e(30973);function k({panelLinks:St,onShowPanelLinks:mt}){const kt=(0,L.wW)(A),it=()=>{const pt=mt();return t.createElement(B.v,null,pt?.map((It,Qt)=>t.createElement(B.v.Item,{key:Qt,label:It.title,url:It.href,target:It.target,onClick:It.onClick})))};if(St.length===1){const pt=mt()[0];return t.createElement(v.fm.TitleItem,{href:pt.href,onClick:pt.onClick,target:pt.target,title:pt.title},t.createElement(w.J,{name:"external-link-alt",size:"md"}))}else return t.createElement(W.L,{overlay:it},t.createElement(_.h,{icon:"external-link-alt",iconSize:"md","aria-label":"panel links",className:kt.menuTrigger}))}const A=St=>({menuTrigger:(0,T.css)({height:"100%",background:"inherit",border:"none",borderRadius:`${St.shape.borderRadius()}`,cursor:"context-menu"})});var z=e(97289);const H=({notice:St,onClick:mt})=>{const kt=(0,L.wW)(Q),it=St.severity==="error"||St.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return St.inspect&&mt?t.createElement(_.h,{className:kt.notice,icon:it,iconSize:"md",key:St.severity,tooltip:St.text,onClick:pt=>mt(pt,St.inspect)}):St.link?t.createElement("a",{className:kt.notice,"aria-label":St.text,href:St.link,target:"_blank",rel:"noreferrer"},t.createElement(w.J,{name:it,style:{marginRight:"8px"},size:"md"})):t.createElement(V.u,{key:St.severity,content:St.text},t.createElement("span",{className:kt.iconTooltip},t.createElement(w.J,{name:it,size:"md"})))},Q=St=>({notice:(0,T.css)({background:"inherit",border:"none",borderRadius:St.shape.borderRadius()}),iconTooltip:(0,T.css)({color:`${St.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${St.shape.borderRadius()}`,padding:`${St.spacing(0,1)}`,height:` ${St.spacing(St.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,z.getFocusStyles)(St),zIndex:1},"&: focus:not(:focus-visible)":(0,z.getMouseFocusStyles)(St),"&:hover ":{boxShadow:`${St.shadows.z1}`,color:`${St.colors.text.primary}`,background:`${St.colors.background.secondary}`}})}),X=({frames:St,panelId:mt})=>{const kt=(0,t.useCallback)((pt,It)=>{pt.stopPropagation(),b.E1.partial({inspect:mt,inspectTab:It})},[mt]),it={};for(const pt of St)if(!(!pt.meta||!pt.meta.notices))for(const It of pt.meta.notices)it[It.severity]=It;return t.createElement(t.Fragment,null,Object.values(it).map(pt=>t.createElement(H,{notice:pt,onClick:kt,key:pt.severity})))};function te(St){const{alertState:mt,data:kt,panelId:it,onShowPanelLinks:pt,panelLinks:It}=St,Qt=(0,L.wW)(oe),rn=t.createElement(V.u,{content:`alerting is ${mt}`},t.createElement(v.fm.TitleItem,{className:(0,T.cx)({[Qt.ok]:mt===U.Z.OK,[Qt.pending]:mt===U.Z.Pending,[Qt.alerting]:mt===U.Z.Alerting})},t.createElement(w.J,{name:mt==="alerting"?"heart-break":"heart",className:"panel-alert-icon",size:"md"}))),un=t.createElement(t.Fragment,null,kt.request&&kt.request.timeInfo&&t.createElement(V.u,{content:t.createElement(K.IF,{timeRange:kt.request?.range,timeZone:kt.request?.timezone})},t.createElement(v.fm.TitleItem,{className:Qt.timeshift},t.createElement(w.J,{name:"clock-nine",size:"md"})," ",kt.request?.timeInfo)));return t.createElement(t.Fragment,null,It&&It.length>0&&pt&&t.createElement(k,{onShowPanelLinks:pt,panelLinks:It}),t.createElement(X,{panelId:it,frames:kt.series}),un,mt&&rn)}const oe=St=>({ok:(0,T.css)({color:St.colors.success.text}),pending:(0,T.css)({color:St.colors.warning.text}),alerting:(0,T.css)({color:St.colors.error.text}),timeshift:(0,T.css)({color:St.colors.text.link,gap:St.spacing(.5),whiteSpace:"nowrap","&:hover":{color:St.colors.emphasize(St.colors.text.link,.03)}})});function Z(St){let mt=!1;function kt(){return St.data.request&&St.data.request.timeInfo?!1:!St.panel.hasTitle()}const it=()=>{const ga=(0,x.J)().replace(St.panel.description,St.panel.scopedVars),Ca=(0,S.a)(ga);return mt||((0,M.ff)("dashboards_panelheader_description_displayed"),mt=!0),Ca},pt=()=>{const ga=(0,O.H)(St.panel);if(!ga)return[];const Ca=ga&&ga.getLinks(St.panel.replaceVariables);return Ca.map(Ha=>({...Ha,onClick:(...ka)=>{(0,M.ff)("dashboards_panelheader_datalink_clicked",{has_multiple_links:Ca.length>1}),Ha.onClick?.(...ka)}}))},It=(ga,Ca)=>{ga.stopPropagation(),b.E1.partial({inspect:St.panel.id,inspectTab:Ca})},Qt=ga=>{ga.stopPropagation(),b.E1.partial({inspect:St.panel.id,inspectTab:R.q.Error}),(0,M.ff)("dashboards_panelheader_statusmessage_clicked")},rn=()=>{St.panel.getQueryRunner().cancelQuery(),(0,M.ff)("dashboards_panelheader_cancelquery_clicked",{data_state:St.data.state})},un=St.plugin.noPadding?"none":"md",xn=St.data.alertState?.state,_n=(St.panel.links&&St.panel.links.length>0&&pt||St.data.series.length>0&&St.data.series.some(ga=>(ga.meta?.notices?.length??0)>0)||St.data.request&&St.data.request.timeInfo||xn)&&t.createElement(te,{alertState:xn,data:St.data,panelId:St.panel.id,panelLinks:St.panel.links,onShowPanelLinks:pt}),Ma=St.panel.description?it:void 0,la=!(St.isViewing||St.isEditing)&&(St.isDraggable??!0)?"grid-drag-handle":"",aa=St.panel.getDisplayTitle();return{hasOverlayHeader:kt,onShowPanelDescription:it,onShowPanelLinks:pt,onOpenInspector:It,onOpenErrorInspect:Qt,onCancelQuery:rn,padding:un,description:Ma,dragClass:la,title:aa,titleItems:_n,onOpenMenu:()=>{(0,M.ff)("dashboards_panelheader_menu",{item:"menu"})}}}var le=e(8430),ce=e(39118);const q=({state:St,onClick:mt})=>{const kt=(0,L.wW)(ne);return St===g.Gu.Loading?t.createElement("div",{className:"panel-loading",onClick:mt},t.createElement(V.u,{content:"Cancel query"},t.createElement(w.J,{className:"panel-loading__spinner spin-clockwise",name:"sync"}))):St===g.Gu.Streaming?t.createElement("div",{className:"panel-loading",onClick:mt},t.createElement("div",{title:"Streaming (click to stop)",className:kt.streamIndicator})):null};function ne(St){return{streamIndicator:(0,T.css)`
      width: 10px;
      height: 10px;
      background: ${St.colors.text.disabled};
      box-shadow: 0 0 2px ${St.colors.text.disabled};
      border-radius: ${St.shape.radius.circle};
      position: relative;
      top: 6px;
      right: 1px;
    `}}function pe({children:St,onOpenMenu:mt,...kt}){const it=(0,t.useRef)({x:0,y:0}),[pt,It]=(0,t.useState)(!1),Qt=(0,t.useCallback)(un=>{re(it.current,ie(un))&&(It(!pt),pt&&mt?.())},[pt,It,mt]),rn=(0,t.useCallback)(un=>{it.current=ie(un)},[]);return t.createElement("header",{...kt,className:"panel-title-container",onClick:Qt,onMouseDown:rn},St({panelMenuOpen:pt,closeMenu:()=>It(!1)}))}function re(St,mt,kt=3.5){return Math.sqrt((St.x-mt.x)**2+(St.y-mt.y)**2)<=kt}function ie(St){return{x:St.clientX,y:St.clientY}}var Se=e(15166);class ye extends t.PureComponent{constructor(){super(...arguments),this.renderItems=(mt,kt=!1)=>t.createElement("ul",{className:l()("dropdown-menu","dropdown-menu--menu","panel-menu",this.props.itemsClassName),style:this.props.style,role:kt?"":"menu"},mt.map((it,pt)=>t.createElement(Se.u,{key:`${it.text}${pt}`,type:it.type,text:it.text,iconClassName:it.iconClassName,onClick:it.onClick,shortcut:it.shortcut,href:it.href},it.subMenu&&this.renderItems(it.subMenu,!0))))}render(){return t.createElement("div",{className:l()("panel-menu-container","dropdown","open",this.props.className)},this.renderItems(Ce(this.props.items)))}}function Ce(St){return St.reduce((mt,kt)=>{if(Array.isArray(kt.subMenu)&&kt.type==="submenu")return mt.push({...kt,subMenu:Ce(kt.subMenu)}),mt;if(Array.isArray(kt.subMenu)&&kt.type==="group"){const{subMenu:it,...pt}=kt;return mt.push(pt),mt.push.apply(mt,Ce(it)),mt}return mt.push(kt),mt},[])}function de({items:St}){const mt=kt=>kt.map(it=>{switch(it.type){case"divider":return t.createElement(B.v.Divider,{key:it.text});case"group":return t.createElement(B.v.Group,{key:it.text,label:it.text},it.subMenu?mt(it.subMenu):void 0);default:return t.createElement(B.v.Item,{key:it.text,label:it.text,icon:it.iconClassName,childItems:it.subMenu?mt(it.subMenu):void 0,url:it.href,onClick:it.onClick,shortcut:it.shortcut,testId:h.wl.components.Panels.Panel.menuItems(it.text)})}});return t.createElement(B.v,null,mt(St))}var we=e(18771),_e=e(15766),Je=e(10864),Ue=e(82123),$e=e(65322),Qe=e(91368),tt=e(89024),lt=e(22377),Me=e(73668),De=e(63245),We=e(36617),qe=e(84749),st=e(29739);function dt(St,mt,kt){const it=ma=>{ma.preventDefault(),b.E1.partial({viewPanel:mt.id}),(0,M.ff)("dashboards_panelheader_menu",{item:"view"})},pt=ma=>{ma.preventDefault(),b.E1.partial({editPanel:mt.id}),(0,M.ff)("dashboards_panelheader_menu",{item:"edit"})},It=ma=>{ma.preventDefault(),(0,lt.Po)(St,mt),(0,M.ff)("dashboards_panelheader_menu",{item:"share"})},Qt=ma=>{ma.preventDefault(),(0,lt.Kq)(St,mt),(0,M.ff)("dashboards_panelheader_menu",{item:"createLibraryPanel"})},rn=ma=>{ma.preventDefault(),(0,lt.oe)(mt),(0,M.ff)("dashboards_panelheader_menu",{item:"unlinkLibraryPanel"})},un=ma=>{b.E1.partial({inspect:mt.id,inspectTab:ma}),(0,M.ff)("dashboards_panelheader_menu",{item:"inspect",tab:ma??R.q.Data})},xn=ma=>{ma.preventDefault()},Kn=ma=>{ma.preventDefault(),(0,lt.jN)(St,mt),(0,M.ff)("dashboards_panelheader_menu",{item:"duplicate"})},_n=ma=>{ma.preventDefault(),(0,lt.bY)(mt),(0,M.ff)("dashboards_panelheader_menu",{item:"copy"})},Ma=ma=>{ma.preventDefault(),(0,lt.WJ)(St,mt,!0),(0,M.ff)("dashboards_panelheader_menu",{item:"remove"})},la=ma=>{ma.preventDefault();const At=ma.ctrlKey||ma.metaKey?Rt=>window.open(`${y.default.appSubUrl}${Rt}`):void 0;qe.h.dispatch((0,st.m$)(mt,{getDataSourceSrv:Je.F,getTimeSrv:P.$t,getExploreUrl:tt.H6,openInNewWindow:At})),(0,M.ff)("dashboards_panelheader_menu",{item:"explore"})},aa=ma=>{ma.preventDefault(),(0,lt.qw)(mt),(0,M.ff)("dashboards_panelheader_menu",{item:"toggleLegend"})},ba=[];mt.isEditing||ba.push({text:(0,$e.t)("panel.header-menu.view","View"),iconClassName:"eye",onClick:it,shortcut:"v"}),St.canEditPanel(mt)&&!mt.isEditing&&ba.push({text:(0,$e.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",onClick:pt,shortcut:"e"}),ba.push({text:(0,$e.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:It,shortcut:"p s"}),Qe.contextSrv.hasAccessToExplore()&&!(mt.plugin&&mt.plugin.meta.skipDataQuery)&&mt.datasource?.uid!==We.oe&&ba.push({text:(0,$e.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",onClick:la,shortcut:"p x"});const ga=[];mt.plugin&&!mt.plugin.meta.skipDataQuery&&(ga.push({text:(0,$e.t)("panel.header-menu.inspect-data","Data"),onClick:ma=>un(R.q.Data)}),St.meta.canEdit&&ga.push({text:(0,$e.t)("panel.header-menu.query","Query"),onClick:ma=>un(R.q.Query)})),ga.push({text:(0,$e.t)("panel.header-menu.inspect-json","Panel JSON"),onClick:ma=>un(R.q.JSON)}),ba.push({type:"submenu",text:(0,$e.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",onClick:ma=>{const At=ma.currentTarget,Rt=ma.target,Mt=Rt.closest('[role="menuitem"]');(Rt===At||Mt===At)&&un()},shortcut:"i",subMenu:ga});const Ca=[],Ha=St.canEditPanel(mt);if(mt.isViewing||mt.isEditing||(Ha?(Ca.push({text:(0,$e.t)("panel.header-menu.duplicate","Duplicate"),onClick:Kn,shortcut:"p d"}),Ca.push({text:(0,$e.t)("panel.header-menu.copy","Copy"),onClick:_n}),(0,Me.V)(mt)?Ca.push({text:(0,$e.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),onClick:rn}):Ca.push({text:(0,$e.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:Qt})):Qe.contextSrv.isEditor&&Ca.push({text:(0,$e.t)("panel.header-menu.copy","Copy"),onClick:_n})),kt){const ma=kt.getScope(),At=ma.$$childHead.ctrl,Rt=At.getExtendedMenu();for(const Mt of Rt){const $t={text:Mt.text,href:Mt.href,shortcut:Mt.shortcut};Mt.click&&($t.onClick=()=>{ma.$eval(Mt.click,{ctrl:At})}),Ca.push($t)}}mt.options.legend&&Ca.push({text:mt.options.legend.showLegend?(0,$e.t)("panel.header-menu.hide-legend","Hide legend"):(0,$e.t)("panel.header-menu.show-legend","Show legend"),onClick:aa,shortcut:"p l"}),mt.isEditing&&(Ca.length=0),Ha&&mt.plugin&&!mt.plugin.meta.skipDataQuery&&Ca.push({text:(0,$e.t)("panel.header-menu.get-help","Get help"),onClick:ma=>un(R.q.Help)});const{extensions:ka}=(0,Ue.dj)({extensionPointId:_e.y.DashboardPanelMenu,context:Tt(mt,St),limitPerPlugin:3});return ka.length>0&&!mt.isEditing&&ba.push({text:"Extensions",iconClassName:"plug",type:"submenu",subMenu:Nt(ka)}),Ca.length&&ba.push({type:"submenu",text:(0,$e.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:Ca,onClick:xn}),St.canEditPanel(mt)&&!mt.isEditing&&!mt.isViewing&&(ba.push({type:"divider",text:""}),ba.push({text:(0,$e.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:Ma,shortcut:"p r"})),ba}function Tt(St,mt){return{id:St.id,pluginId:St.type,title:St.title,timeRange:mt.time,timeZone:mt.timezone,dashboard:{uid:mt.uid,title:mt.title,tags:Array.from(mt.tags)},targets:St.targets,scopedVars:St.scopedVars,data:St.getQueryRunner().getLastResult()}}function Nt(St){const mt={},kt=[];for(const pt of St){const It=pt.category;if(!It){kt.push({text:(0,De.ew)(pt.title,25),href:pt.path,onClick:pt.onClick});continue}Array.isArray(mt[It])||(mt[It]=[]),mt[It].push({text:(0,De.ew)(pt.title,25),href:pt.path,onClick:pt.onClick})}const it=Object.keys(mt).reduce((pt,It)=>(pt.push({text:(0,De.ew)(It,25),type:"group",subMenu:mt[It]}),pt),[]);return kt.length>0&&(it.length>0&&it.push({text:"divider",type:"divider"}),Array.prototype.push.apply(it,kt)),it}function Bt({panel:St,dashboard:mt,loadingState:kt,children:it}){const[pt,It]=(0,t.useState)([]),Qt=(0,we.useSelector)(rn=>(0,C.i)(rn,St)?.angularComponent);return(0,t.useEffect)(()=>{It(dt(mt,St,Qt))},[mt,St,Qt,kt,It]),it({items:pt})}function yt({panel:St,dashboard:mt,loadingState:kt,style:it,menuItemsClassName:pt,menuWrapperClassName:It}){return t.createElement(Bt,{panel:St,dashboard:mt,loadingState:kt},({items:Qt})=>t.createElement(ye,{className:It,itemsClassName:pt,style:it,items:Qt}))}function ft({style:St,panel:mt,dashboard:kt,loadingState:it}){return t.createElement(Bt,{panel:mt,dashboard:kt,loadingState:it},({items:pt})=>t.createElement(de,{style:St,items:pt}))}function ct({panel:St,error:mt,isViewing:kt,isEditing:it,data:pt,alertState:It,dashboard:Qt}){const rn=()=>St.getQueryRunner().cancelQuery(),un=St.getDisplayTitle(),xn=(0,T.cx)("panel-header",kt||it?"":"grid-drag-handle"),Kn=(0,L.wW)(ge),_n=()=>{(0,M.ff)("dashboards_panelheader_menu",{item:"menu"})};return t.createElement(t.Fragment,null,t.createElement(q,{state:pt.state,onClick:rn}),t.createElement(ce.Z,{panel:St,title:St.title,description:St.description,scopedVars:St.scopedVars,links:(0,O.H)(St),error:mt}),t.createElement("div",{className:xn},t.createElement(pe,{"data-testid":h.wl.components.Panels.Panel.title(un),onOpenMenu:_n},({closeMenu:Ma,panelMenuOpen:la})=>t.createElement(le.L,{onClick:Ma,parent:document},t.createElement("div",{className:"panel-title"},t.createElement(X,{frames:pt.series,panelId:St.id}),It?t.createElement(w.J,{name:It==="alerting"?"heart-break":"heart",className:"icon-gf panel-alert-icon",style:{marginRight:"4px"},size:"sm"}):null,t.createElement("h2",{className:Kn.titleText},un),!Qt.meta.publicDashboardAccessToken&&t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(w.J,{name:"angle-down",className:"panel-menu-toggle"}),la?t.createElement(yt,{panel:St,dashboard:Qt}):null),pt.request&&pt.request.timeInfo&&t.createElement("span",{className:"panel-time-info"},t.createElement(w.J,{name:"clock-nine",size:"sm"})," ",pt.request.timeInfo))))))}const ge=St=>({titleText:(0,T.css)`
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      max-width: calc(100% - 38px);
      cursor: pointer;
      font-weight: ${St.typography.fontWeightMedium};
      font-size: ${St.typography.body.fontSize};
      margin: 0;

      &:hover {
        color: ${St.colors.text.primary};
      }
      .panel-has-alert & {
        max-width: calc(100% - 54px);
      }
    `});class Be extends t.PureComponent{constructor(mt){super(mt),this.element=null,this.timeSrv=(0,P.$t)(),this.subs=new a.w0,this.state={data:{state:g.Gu.NotStarted,series:[],timeRange:(0,c.JK)()}}}componentDidMount(){const{panel:mt}=this.props;this.loadAngularPanel();const kt=mt.getQueryRunner();this.subs.add(kt.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:it=>this.onPanelDataUpdate(it)}))}onPanelDataUpdate(mt){let kt;if(mt.state===g.Gu.Error){const{error:it}=mt;it&&kt!==it.message&&(kt=it.message)}this.setState({data:mt,errorMessage:kt})}componentWillUnmount(){this.subs.unsubscribe(),this.props.angularComponent&&this.props.angularComponent?.destroy()}componentDidUpdate(mt,kt){const{plugin:it,height:pt,width:It,panel:Qt}=this.props;mt.plugin!==it&&this.loadAngularPanel(),(mt.width!==It||mt.height!==pt)&&this.scopeProps&&(this.scopeProps.size.height=this.getInnerPanelHeight(),this.scopeProps.size.width=this.getInnerPanelWidth(),Qt.render())}getInnerPanelHeight(){const{plugin:mt,height:kt}=this.props,{theme:it}=y.default,pt=this.hasOverlayHeader()?0:it.panelHeaderHeight,It=mt.noPadding?0:it.panelPadding;return kt-pt-It*2-E.QO}getInnerPanelWidth(){const{plugin:mt,width:kt}=this.props,{theme:it}=y.default,pt=mt.noPadding?0:it.panelPadding;return kt-pt*2-E.QO}loadAngularPanel(){const{panel:mt,dashboard:kt,setPanelAngularComponent:it}=this.props;if(!this.element)return;const pt=(0,f.w)(),It='<plugin-component type="panel" class="panel-height-helper"></plugin-component>';this.scopeProps={panel:mt,dashboard:kt,size:{width:this.getInnerPanelWidth(),height:this.getInnerPanelHeight()}},it({key:mt.key,angularComponent:pt.load(this.element,this.scopeProps,It)})}hasOverlayHeader(){const{panel:mt}=this.props,{data:kt}=this.state;return kt.request&&kt.request.timeInfo?!1:!mt.hasTitle()}render(){const{dashboard:mt,panel:kt,isViewing:it,isEditing:pt,plugin:It}=this.props,{errorMessage:Qt,data:rn}=this.state,{transparent:un}=kt,xn=rn.alertState?.state,Kn=Z({...this.props,data:rn}),_n=l()({"panel-container":!0,"panel-container--absolute":u(b.E1.getLocation().pathname),"panel-container--transparent":un,"panel-container--no-title":this.hasOverlayHeader(),"panel-has-alert":kt.alert!==void 0,[`panel-alert-state--${xn}`]:xn!==void 0}),Ma=l()({"panel-content":!0,"panel-content--no-padding":It.noPadding});if(y.default.featureToggles.newPanelChromeUI){const la=(kt.gridPos?.y??0)===0?-16:void 0,aa=t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(ft,{panel:kt,dashboard:mt,loadingState:rn.state}));return t.createElement(v.fm,{width:this.props.width,height:this.props.height,title:Kn.title,loadingState:rn.state,statusMessage:Qt,statusMessageOnClick:Kn.onOpenErrorInspect,description:Kn.description,titleItems:Kn.titleItems,menu:this.props.hideMenu?void 0:aa,dragClass:Kn.dragClass,dragClassCancel:"grid-drag-cancel",padding:Kn.padding,hoverHeaderOffset:la,hoverHeader:Kn.hasOverlayHeader(),displayMode:un?"transparent":"default",onCancelQuery:Kn.onCancelQuery,onOpenMenu:Kn.onOpenMenu},()=>t.createElement("div",{ref:ba=>this.element=ba,className:"panel-height-helper"}))}else return t.createElement("div",{className:_n,"data-testid":h.wl.components.Panels.Panel.title(kt.title),"aria-label":h.wl.components.Panels.Panel.containerByTitle(kt.title)},t.createElement(ct,{panel:kt,dashboard:mt,title:kt.title,description:kt.description,links:kt.links,error:Qt,isViewing:it,isEditing:pt,data:rn,alertState:xn}),t.createElement("div",{className:Ma},t.createElement("div",{ref:la=>this.element=la,className:"panel-height-helper"})))}}const Le=(St,mt)=>({angularComponent:(0,C.i)(St,mt.panel)?.angularComponent}),he={setPanelAngularComponent:s.o8},He=(0,n.connect)(Le,he)(Be);var Pe=e(79248),Ie=e(84714),Te=e(99633),Re=e(17312),ue=e(62247),xe=e(32053),Ve=e(90665),Ne=e(32713),fe=e(34667),ve=e(70823),ze=e(37647),Oe=e(54788),Fe=e(5926),Ge=e(74030),nt=e(75506),Xe=e(19221),ut=e(93666);const ht=(St,mt,kt)=>{const{overrides:it}=kt,pt=kt.overrides.findIndex(xn=>xn.matcher.id===Xe.mi.byName&&xn.matcher.options===St);if(pt<0)return{...kt,overrides:[...kt.overrides,wt(St,mt)]};const It=Array.from(it),Qt=It[pt],rn=Qt.properties.findIndex(xn=>xn.id==="color");if(rn<0)return It[pt]={...Qt,properties:[...Qt.properties,mn(mt)]},{...kt,overrides:It};const un=Array.from(Qt.properties);return un[rn]=mn(mt),It[pt]={...Qt,properties:un},{...kt,overrides:It}},wt=(St,mt)=>({matcher:{id:Xe.mi.byName,options:St},properties:[mn(mt)]}),mn=St=>({id:"color",value:{mode:ut.S.Fixed,fixedColor:St}});var vn=e(43620),gn=e(11285),Sn=e(77972),Cn=e(69887),pn=e(48549),nn=e(87909);const Ct="Error in plugin";class bt extends t.PureComponent{constructor(mt){super(mt),this.timeSrv=(0,P.$t)(),this.subs=new a.w0,this.eventFilter={onlyLocal:!0},this.getSync=()=>this.props.isEditing?Pe.m.Off:this.props.dashboard.graphTooltip,this.onInstanceStateChange=it=>{this.props.onInstanceStateChange(it),this.setState({context:{...this.state.context,instanceState:it}})},this.onUpdateData=it=>(0,nt.F)(this.props.panel,it),this.onSeriesColorChange=(it,pt)=>{this.onFieldConfigChange(ht(it,pt,this.props.panel.fieldConfig))},this.onSeriesVisibilityChange=(it,pt)=>{this.onFieldConfigChange((0,pn.N)(it,pt,this.props.panel.fieldConfig,this.state.data.series))},this.onToggleLegendSort=it=>{const pt=this.props.panel.options.legend;if(!pt)return;let It=pt.sortDesc,Qt=pt.sortBy;it!==Qt&&(It=void 0),It===!1?(Qt=void 0,It=void 0):(It=!It,Qt=it),this.onOptionsChange({...this.props.panel.options,legend:{...pt,sortBy:Qt,sortDesc:It}})},this.onRefresh=()=>{const{dashboard:it,panel:pt,isInView:It,width:Qt}=this.props;if(!It){this.setState({refreshWhenInView:!0});return}const rn=(0,lt.W1)(pt,this.timeSrv.timeRange());if(this.wantsQueryExecution){if(Qt<0)return;this.state.refreshWhenInView&&this.setState({refreshWhenInView:!1}),pt.runAllPanelQueries({dashboardUID:it.uid,dashboardTimezone:it.getTimezone(),publicDashboardAccessToken:it.meta.publicDashboardAccessToken,timeData:rn,width:Qt})}else this.setState({data:{...this.state.data,timeRange:this.timeSrv.timeRange()},renderCounter:this.state.renderCounter+1,liveTime:void 0})},this.onRender=()=>{const it={renderCounter:this.state.renderCounter+1};this.setState(it)},this.onOptionsChange=it=>{this.props.panel.updateOptions(it)},this.onFieldConfigChange=it=>{this.props.panel.updateFieldConfig(it)},this.onPanelError=it=>{const pt=it.message||Ct;this.state.errorMessage!==pt&&this.setState({errorMessage:pt})},this.onPanelErrorRecover=()=>{this.setState({errorMessage:void 0})},this.onAnnotationCreate=async it=>{const pt=it.from!==it.to,It={dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:pt,time:it.from,timeEnd:pt?it.to:0,tags:it.tags,text:it.description};await(0,gn.xD)(It),(0,Sn.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ie.n1(It))},this.onAnnotationDelete=async it=>{await(0,gn.Dl)({id:it}),(0,Sn.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ie.n1({id:it}))},this.onAnnotationUpdate=async it=>{const pt=it.from!==it.to,It={id:it.id,dashboardUID:this.props.dashboard.uid,panelId:this.props.panel.id,isRegion:pt,time:it.from,timeEnd:pt?it.to:0,tags:it.tags,text:it.description};await(0,gn._E)(It),(0,Sn.kt)().run({dashboard:this.props.dashboard,range:this.timeSrv.timeRange()}),this.state.context.eventBus.publish(new Ie.n1(It))},this.onChangeTimeRange=it=>{this.timeSrv.setTime({from:(0,Te.zh)(it.from),to:(0,Te.zh)(it.to)})},this.onAddAdHocFilter=it=>{const{key:pt,value:It,operator:Qt}=it,rn=(0,Fe.ak)().getInstanceSettings(this.props.panel.datasource),un=rn&&(0,Re.iU)(rn);un&&(0,qe.WI)((0,Ge.m2)({datasource:un,key:pt,operator:Qt,value:It}))};const kt=mt.dashboard.events.newScopedBus(`panel:${mt.panel.id}`,this.eventFilter);this.state={isFirstLoad:!0,renderCounter:0,refreshWhenInView:!1,context:{eventsScope:"__global_",eventBus:kt,app:this.getPanelContextApp(),sync:this.getSync,onSeriesColorChange:this.onSeriesColorChange,onToggleSeriesVisibility:this.onSeriesVisibilityChange,onAnnotationCreate:this.onAnnotationCreate,onAnnotationUpdate:this.onAnnotationUpdate,onAnnotationDelete:this.onAnnotationDelete,onInstanceStateChange:this.onInstanceStateChange,onToggleLegendSort:this.onToggleLegendSort,canAddAnnotations:mt.dashboard.canAddAnnotations.bind(mt.dashboard),canEditAnnotations:mt.dashboard.canEditAnnotations.bind(mt.dashboard),canDeleteAnnotations:mt.dashboard.canDeleteAnnotations.bind(mt.dashboard),onAddAdHocFilter:this.onAddAdHocFilter,onUpdateData:this.onUpdateData},data:this.getInitialPanelDataState()}}getPanelContextApp(){return this.props.isEditing?ue.zj.PanelEditor:this.props.isViewing?ue.zj.PanelViewer:ue.zj.Dashboard}getInitialPanelDataState(){return{state:g.Gu.NotStarted,series:[],timeRange:(0,c.JK)()}}componentDidMount(){const{panel:mt,dashboard:kt}=this.props;if(this.subs.add(mt.events.subscribe(Ne.U5,this.onRefresh)),this.subs.add(mt.events.subscribe(vn._z,this.onRender)),kt.panelInitialized(this.props.panel),this.hasPanelSnapshot){this.setState({data:(0,Cn.y)(mt,kt),isFirstLoad:!1});return}this.wantsQueryExecution||this.setState({isFirstLoad:!1}),this.subs.add(mt.getQueryRunner().getData({withTransforms:!0,withFieldConfig:!0}).subscribe({next:it=>this.onDataUpdate(it)})),nn.A.listen(this)}componentWillUnmount(){this.subs.unsubscribe(),nn.A.remove(this)}liveTimeChanged(mt){const{data:kt}=this.state;if(kt.timeRange){const it=mt.to.valueOf()-kt.timeRange.to.valueOf();if(it<100){console.log("Skip tick render",this.props.panel.title,it);return}}this.setState({liveTime:mt})}componentDidUpdate(mt){const{isInView:kt,width:it}=this.props,{context:pt}=this.state,It=this.getPanelContextApp();pt.app!==It&&this.setState({context:{...pt,app:It}}),kt!==mt.isInView&&kt&&this.state.refreshWhenInView&&this.onRefresh(),it!==mt.width&&nn.A.updateInterval(this)}onDataUpdate(mt){const{dashboard:kt,panel:it,plugin:pt}=this.props;if(pt.meta.skipDataQuery){this.setState({data:this.getInitialPanelDataState()});return}let{isFirstLoad:It}=this.state,Qt;switch(mt.state){case g.Gu.Loading:if(this.state.data.state===g.Gu.Loading)return;break;case g.Gu.Error:const{error:rn,errors:un}=mt;un?.length?un.length===1?Qt=un[0].message:Qt="Multiple errors found. Click for more details":rn&&Qt!==rn.message&&(Qt=rn.message);break;case g.Gu.Done:kt.snapshot&&(it.snapshotData=mt.series.map(xn=>(0,xe.og)(xn))),It&&(It=!1);break}this.setState({isFirstLoad:It,errorMessage:Qt,data:mt,liveTime:void 0})}get hasPanelSnapshot(){const{panel:mt}=this.props;return mt.snapshotData&&mt.snapshotData.length}get wantsQueryExecution(){return!(this.props.plugin.meta.skipDataQuery||this.hasPanelSnapshot)}shouldSignalRenderingCompleted(mt,kt){return mt===g.Gu.Done||mt===g.Gu.Error||kt.skipDataQuery}skipFirstRender(mt){const{isFirstLoad:kt}=this.state;return this.wantsQueryExecution&&kt&&(mt===g.Gu.Loading||mt===g.Gu.NotStarted)}renderPanelContent(mt,kt){const{panel:it,plugin:pt,dashboard:It}=this.props,{renderCounter:Qt,data:rn}=this.state,{state:un}=rn;if(this.skipFirstRender(un))return null;this.shouldSignalRenderingCompleted(un,pt.meta)&&Oe.r.renderingCompleted();const xn=pt.panel,Kn=this.state.liveTime??rn.timeRange??this.timeSrv.timeRange(),_n=it.getOptions();return this.eventFilter.onlyLocal=It.graphTooltip===0,t.createElement(t.Fragment,null,t.createElement(ve._w,{value:this.state.context},t.createElement(xn,{id:it.id,data:rn,title:it.title,timeRange:Kn,timeZone:this.props.dashboard.getTimezone(),options:_n,fieldConfig:it.fieldConfig,transparent:it.transparent,width:mt,height:kt,renderCounter:Qt,replaceVariables:it.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:It.events})))}renderPanel(mt,kt){const{panel:it,plugin:pt,dashboard:It}=this.props,{renderCounter:Qt,data:rn}=this.state,{theme:un}=fe.config,{state:xn}=rn;if(this.skipFirstRender(xn))return null;this.shouldSignalRenderingCompleted(xn,pt.meta)&&Oe.r.renderingCompleted();const Kn=pt.panel,_n=this.state.liveTime??rn.timeRange??this.timeSrv.timeRange(),Ma=this.hasOverlayHeader()?0:un.panelHeaderHeight,la=pt.noPadding?0:un.panelPadding,aa=mt-la*2-E.QO,ba=kt-Ma-la*2-E.QO,ga=l()({"panel-content":!0,"panel-content--no-padding":pt.noPadding}),Ca=it.getOptions();this.eventFilter.onlyLocal=It.graphTooltip===0;const Ha=this.props.timezone||this.props.dashboard.getTimezone();return t.createElement(t.Fragment,null,t.createElement("div",{className:ga},t.createElement(Ve.b,{meta:pt.meta},t.createElement(ve._w,{value:this.state.context},t.createElement(Kn,{id:it.id,data:rn,title:it.title,timeRange:_n,timeZone:Ha,options:Ca,fieldConfig:it.fieldConfig,transparent:it.transparent,width:aa,height:ba,renderCounter:Qt,replaceVariables:it.replaceVariables,onOptionsChange:this.onOptionsChange,onFieldConfigChange:this.onFieldConfigChange,onChangeTimeRange:this.onChangeTimeRange,eventBus:It.events})))))}hasOverlayHeader(){const{panel:mt}=this.props,{data:kt}=this.state;return kt.request&&kt.request.timeInfo?!1:!mt.hasTitle()}render(){const{dashboard:mt,panel:kt,isViewing:it,isEditing:pt,width:It,height:Qt,plugin:rn}=this.props,{errorMessage:un,data:xn}=this.state,{transparent:Kn}=kt,_n=xn.alertState?.state,Ma=this.hasOverlayHeader(),la=l()({"panel-container":!0,"panel-container--absolute":u(b.E1.getLocation().pathname),"panel-container--transparent":Kn,"panel-container--no-title":Ma,[`panel-alert-state--${_n}`]:_n!==void 0}),aa=Z({...this.props,data:xn});if(fe.config.featureToggles.newPanelChromeUI){const ba=(kt.gridPos?.y??0)===0?-16:void 0,ga=t.createElement("div",{"data-testid":"panel-dropdown"},t.createElement(ft,{panel:kt,dashboard:mt,loadingState:xn.state}));return t.createElement(v.fm,{width:It,height:Qt,title:aa.title,loadingState:xn.state,statusMessage:un,statusMessageOnClick:aa.onOpenErrorInspect,description:aa.description,titleItems:aa.titleItems,menu:this.props.hideMenu?void 0:ga,dragClass:aa.dragClass,dragClassCancel:"grid-drag-cancel",padding:aa.padding,hoverHeaderOffset:ba,hoverHeader:aa.hasOverlayHeader(),displayMode:Kn?"transparent":"default",onCancelQuery:aa.onCancelQuery,onOpenMenu:aa.onOpenMenu},(Ca,Ha)=>t.createElement(t.Fragment,null,t.createElement(ze.SV,{dependencies:[xn,rn,kt.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:ka})=>ka?null:this.renderPanelContent(Ca,Ha))))}else return t.createElement("section",{className:la,"aria-label":h.wl.components.Panels.Panel.containerByTitle(kt.title)},t.createElement(ct,{panel:kt,dashboard:mt,title:kt.title,description:kt.description,links:kt.links,error:un,isEditing:pt,isViewing:it,alertState:_n,data:xn}),t.createElement(ze.SV,{dependencies:[xn,rn,kt.getOptions()],onError:this.onPanelError,onRecover:this.onPanelErrorRecover},({error:ba})=>ba?null:this.renderPanel(It,Qt)))}}const Ut=(St,mt)=>{const kt=St.panels[mt.stateKey];return kt?{plugin:kt.plugin,instanceState:kt.instanceState}:{plugin:null}},_t={initPanelState:i.JI,setPanelInstanceState:s.pC},Gt=(0,n.connect)(Ut,_t);class jt extends t.PureComponent{constructor(){super(...arguments),this.onInstanceStateChange=mt=>{this.props.setPanelInstanceState({key:this.props.stateKey,value:mt})},this.onVisibilityChange=mt=>{this.props.panel.isInView=mt},this.onPanelLoad=()=>{this.props.plugin||this.props.initPanelState(this.props.panel)},this.renderPanel=({isInView:mt})=>{const{dashboard:kt,panel:it,isViewing:pt,isEditing:It,width:Qt,height:rn,plugin:un,timezone:xn,hideMenu:Kn,isDraggable:_n=!0}=this.props;return un?un&&un.angularPanelCtrl?t.createElement(He,{plugin:un,panel:it,dashboard:kt,isViewing:pt,isEditing:It,isInView:mt,isDraggable:_n,width:Qt,height:rn}):t.createElement(bt,{plugin:un,panel:it,dashboard:kt,isViewing:pt,isEditing:It,isInView:mt,isDraggable:_n,width:Qt,height:rn,onInstanceStateChange:this.onInstanceStateChange,timezone:xn,hideMenu:Kn}):null}}componentDidMount(){this.props.panel.isInView=!this.props.lazy,this.props.lazy||this.onPanelLoad()}render(){const{width:mt,height:kt,lazy:it}=this.props;return it?t.createElement(m,{width:mt,height:kt,onChange:this.onVisibilityChange,onLoad:this.onPanelLoad},this.renderPanel):this.renderPanel({isInView:!0})}}jt.defaultProps={lazy:!0};const sn=Gt(jt)},39118:(j,I,e)=>{"use strict";e.d(I,{Z:()=>g});var t=e(27702),n=e(18112),i=e(74639),s=e(39317),r=e(26129),m=e(80011),d=e(26858),o=e(49516),l=(c=>(c.Error="Error",c.Info="Info",c.Links="Links",c))(l||{});class a extends t.Component{constructor(){super(...arguments),this.timeSrv=(0,d.$t)(),this.getInfoMode=()=>{const{panel:h,error:f}=this.props;if(f)return"Error";if(h.description)return"Info";if(h.links&&h.links.length)return"Links"},this.getInfoContent=()=>{const{panel:h}=this.props,f=h.description||"",b=(0,s.J)().replace(f,h.scopedVars),v=(0,n.a)(b),y=this.props.links&&this.props.links.getLinks(h.replaceVariables);return t.createElement("div",{className:"panel-info-content markdown-html"},t.createElement("div",{dangerouslySetInnerHTML:{__html:v}}),y&&y.length>0&&t.createElement("ul",{className:"panel-info-corner-links"},y.map((E,C)=>t.createElement("li",{key:C},t.createElement("a",{className:"panel-info-corner-links__item",href:E.href,target:E.target},E.title)))))},this.onClickError=()=>{r.E1.partial({inspect:this.props.panel.id,inspectTab:o.q.Error})}}renderCornerType(h,f,b){const v=h==="Error"?"error":"info",y=`panel-info-corner panel-info-corner--${h.toLowerCase()}`,E=i.wl.components.Panels.Panel.headerCornerInfo(h.toLowerCase());return t.createElement(m.u,{content:f,placement:"top-start",theme:v,interactive:!0},t.createElement("button",{type:"button",className:y,onClick:b,"aria-label":E},t.createElement("i",{"aria-hidden":!0,className:"fa"}),t.createElement("span",{className:"panel-info-corner-inner"})))}render(){const{error:h}=this.props,f=this.getInfoMode();return f?f==="Error"&&h?this.renderCornerType(f,h,this.onClickError):f==="Info"||f==="Links"?this.renderCornerType(f,this.getInfoContent):null:null}}const g=a},15166:(j,I,e)=>{"use strict";e.d(I,{u:()=>d});var t=e(42844),n=e(27702),i=e(74639),s=e(66310),r=e(65469),m=e(73453);const d=a=>{const[g,c]=(0,n.useState)(null),h=a.type==="submenu",f=(0,s.wW)(l),b=a.iconClassName?(0,r.toIconName)(a.iconClassName):void 0;switch(a.type){case"divider":return n.createElement("li",{className:"divider"});case"group":return n.createElement("li",null,n.createElement("span",{className:f.groupLabel},a.text));default:return n.createElement("li",{className:h?`dropdown-submenu ${o(g)}`:void 0,ref:c,"data-testid":i.wl.components.Panels.Panel.menuItems(a.text)},n.createElement("a",{onClick:a.onClick,href:a.href,role:"menuitem"},b&&n.createElement(m.J,{name:b,className:f.menuIconClassName}),n.createElement("span",{className:"dropdown-item-text","aria-label":i.wl.components.Panels.Panel.headerItems(a.text)},a.text,h&&n.createElement(m.J,{name:"angle-right",className:f.shortcutIconClassName})),a.shortcut&&n.createElement("span",{className:"dropdown-menu-item-shortcut"},n.createElement(m.J,{name:"keyboard",className:f.menuIconClassName})," ",a.shortcut)),a.children)}};function o(a){if(!a)return"invisible";const g=a.parentElement.getBoundingClientRect(),c=a.getBoundingClientRect();return c.width===0?"invisible":g.right+c.width+10>window.innerWidth?"pull-left":"pull-right"}function l(a){return{menuIconClassName:(0,t.css)({marginRight:a.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,t.css)({position:"absolute",top:"7px",right:a.spacing(.5),color:a.colors.text.secondary}),groupLabel:(0,t.css)({color:a.colors.text.secondary,fontSize:a.typography.size.sm,padding:a.spacing(.5,1)})}}},48549:(j,I,e)=>{"use strict";e.d(I,{N:()=>a});var t=e(25587),n=e(1141),i=e(19221),s=e(29241),r=e(75578),m=e(76178),d=e(76761);const o="hideSeriesFrom",l=(0,t.Y4)(o);function a(y,E,C,u){const{overrides:D}=C,P=y,S=D.findIndex(l);if(S<0){if(E===d.R.ToggleSelection){const U=g([P,...v(D,u)]);return{...C,overrides:[...C.overrides,U]}}const O=b(u,P),T=g(O);return{...C,overrides:[...C.overrides,T]}}const x=Array.from(D),[M]=x.splice(S,1);if(E===d.R.ToggleSelection){let O=h(M);const T=v(x,u);if(T.length>0&&(O=O.filter(L=>T.indexOf(L)<0)),O[0]===P&&O.length===1)return{...C,overrides:x};const U=g([P,...T]);return{...C,overrides:[...x,U]}}const R=c(M,P);return f(R,u)?{...C,overrides:x}:{...C,overrides:[...x,R]}}function g(y,E=n.Ys.exclude,C){return C=C??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!1}},{__systemRef:o,matcher:{id:i.mi.byNames,options:{mode:E,names:y,prefix:E===n.Ys.exclude?"All except:":void 0,readOnly:!0}},properties:[{...C,value:{viz:!0,legend:!1,tooltip:!1}}]}}const c=(y,E,C=n.Ys.exclude)=>{const u=y.properties.find(S=>S.id==="custom.hideFrom"),D=h(y),P=D.findIndex(S=>S===E);return P<0?D.push(E):D.splice(P,1),g(D,C,u)},h=y=>{const E=y.matcher.options?.names;return Array.isArray(E)?[...E]:[]},f=(y,E)=>h(y).length===b(E).length,b=(y,E)=>{const C=new Set;for(const u of y)for(const D of u.fields){if(D.type!==s.fS.number)continue;const P=(0,r.CZ)(D,u,y);P!==E&&C.add(P)}return Array.from(C)},v=(y,E)=>{let C=[];for(const u of y){const D=u.properties.find(P=>P.id==="custom.hideFrom");if(D!==void 0&&D.value?.legend===!0){const S=m.Ls.get(u.matcher.id).get(u.matcher.options);for(const x of E)for(const M of x.fields){if(M.type!==s.fS.number)continue;const R=(0,r.CZ)(M,x,E);S(M,x,E)&&C.push(R)}}}return C}},87909:(j,I,e)=>{"use strict";e.d(I,{A:()=>o});var t=e(88646),n=e(99633),i=e(1726);const s=100;class r{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const a=Date.now();this.budget=(a-this.lastUpdate)/s;const g=this.ok.getValue(),c=this.budget<=this.threshold;if(g!==c&&this.ok.next(c),this.lastUpdate=a,this.isLive&&this.ok.getValue()&&this.timeRange){let h;for(const f of this.listeners){if(!f.panel.props.isInView)continue;if(a-f.last>=f.intervalMs){if(!h){const{raw:v}=this.timeRange;h={raw:v,from:(0,n.CQ)(a-this.liveTimeOffset),to:(0,n.CQ)(a)}}f.panel.liveTimeChanged(h),f.last=a}}}}}setLiveTimeRange(a){if(this.timeRange=a,this.isLive=a?.raw?.to==="now",this.isLive){const g=i.parse(a.raw.from,!1)?.valueOf(),c=i.parse(a.raw.to,!0)?.valueOf();this.liveTimeOffset=c-g;for(const h of this.listeners)h.intervalMs=d(this.liveTimeOffset,h.panel.props.width)}}listen(a){this.listeners.push({last:this.lastUpdate,panel:a,intervalMs:d(6e4,a.props.width)})}remove(a){this.listeners=this.listeners.filter(g=>g.panel!==a)}updateInterval(a){if(!(!this.timeRange||!this.isLive)){for(const g of this.listeners)if(g.panel===a){g.intervalMs=d(this.liveTimeOffset,g.panel.props.width);return}}}}const m=5*60*1e3;function d(l,a){const g=Math.ceil(l/a/100)*100;return g>m?m:g}const o=new r;setInterval(o.measure,s)},46823:(j,I,e)=>{"use strict";e.d(I,{Bg:()=>y,pD:()=>E});var t=e(7610),n=e.n(t),i=e(89949),s=e.n(i),r=e(79913),m=e.n(r),d=e(3935),o=e(1726),l=e(73289),a=e(26129),g=e(45937),c=e(6872),h=e(13216),f=e(5926),b=e(66574),v=e(75261);class y{constructor(){}_dashboardLoadFailed(D,P){return P=P||!1,{meta:{canStar:!1,isSnapshot:P,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:D}}}loadDashboard(D,P,S){let x;if(D==="script"&&P)x=this._loadScriptedDashboard(P);else if(D==="snapshot"&&P)x=g.ae.get("/api/snapshots/"+P).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0));else if(D==="ds"&&P)x=this._loadFromDatasource(P);else if(D==="public"&&S)x=g.ae.getPublicDashboardByUid(S).then(M=>M).catch(M=>{const R=M.data.statusCode===403&&M.data.messageId==="publicdashboards.notEnabled",O=M.data.statusCode===404&&M.data.messageId==="publicdashboards.notFound",T=this._dashboardLoadFailed(R?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...T,meta:{...T.meta,publicDashboardEnabled:O?void 0:!R,dashboardNotFound:O}}});else if(S)x=g.ae.getDashboardByUid(S).then(M=>{if(M.meta.isFolder)throw b.h$.emit(d.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return M}).catch(()=>this._dashboardLoadFailed("Not found",!0));else throw new Error("Dashboard uid or slug required");return x.then(M=>(M.meta.dashboardNotFound!==!0&&c.Z.addDashboardImpression(M.dashboard.uid),M)),x}_loadScriptedDashboard(D){const P="public/dashboards/"+D.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,l.i)().get(P).then(this._executeScript.bind(this)).then(S=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:S.data}),S=>(console.error("Script dashboard error "+S),b.h$.emit(d.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(D){const P=await(0,f.ak)().get(D);if(!P)return Promise.reject("can not find datasource: "+D);const S=new URLSearchParams(window.location.search),x=S.get("path");if(!x)return Promise.reject("expecting path parameter");const M={};return S.forEach((R,O)=>{M[O]=R}),(0,l.i)().get(`/api/datasources/uid/${P.uid}/resources/${x}`,M).then(R=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:R}))}_executeScript(D){const P={dashboardSrv:(0,v.h4)(),datasourceSrv:(0,f.ak)()},x=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",D)(a.E1.getSearchObject(),h.Z,o,s(),m(),window,document,n(),n(),P);return(0,i.isFunction)(x)?new Promise(M=>{x(R=>{M({data:R})})}):{data:x}}}let E=new y;const C=u=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},75261:(j,I,e)=>{"use strict";e.d(I,{h4:()=>h});var t=e(78209),n=e(3935),i=e(5933),s=e(65322),r=e(45937),m=e(77799),d=e(43620),o=e(85991),l=e(22377);class a{constructor(){this.onRemovePanel=b=>{const v=this.getCurrent();v&&(0,l.WJ)(v,v.getPanelById(b),!0)},i.h.subscribe(d.Eb,b=>this.onRemovePanel(b.payload))}create(b,v){return new o.f(b,v)}setCurrent(b){this.dashboard=b}getCurrent(){return this.dashboard}saveJSONDashboard(b){const v=JSON.parse(b);return(0,m.uC)({dashboard:v,folderUid:this.dashboard?.meta.folderUid||v.folderUid})}saveDashboard(b,v){return(0,t.n)((0,r.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...b,dashboard:b.dashboard.getSaveModelClone()},...v}))}starDashboard(b,v){const y=(0,r.i)(),E={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+b,method:v?"DELETE":"POST"};return y.request(E).then(()=>{const C=!v;this.dashboard?.uid===b&&(this.dashboard.meta.isStarred=C);const u=C?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return i.h.emit(n.SI.alertSuccess,[u]),C})}}let g;function c(f){g=f}function h(){return g||(g=new a),g}},71183:(j,I,e)=>{"use strict";e.d(I,{Qi:()=>c,lh:()=>f});var t=e(45383),n=e(91053),i=e(90996),s=e(56469),r=e(68246),m=e(32053),d=e(73289),o=e(35306),l=e(89050),a=e(32159),g=e(22513);const c="-- Public --",h="1min";class f extends r.MF{constructor(v){let y={};f.isMixedDatasource(v)&&(y.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:y,uid:f.resolveUid(v),jsonData:{},access:"proxy",readOnly:!0}),this.interval=f.resolveInterval(v),this.annotations={prepareQuery(E){return{...E,queryType:l.hR.Annotations,refId:"anno"}}}}static resolveUid(v){return typeof v=="string"?v:v?.uid??c}static isMixedDatasource(v){return typeof v=="string"||v==null?!1:v?.uid===a.D}static resolveInterval(v){return typeof v=="string"||v==null?h:("interval"in v?v.interval:void 0)??h}query(v){const{intervalMs:y,maxDataPoints:E,requestId:C,publicDashboardAccessToken:u,panelId:D,queryCachingTTL:P,range:{from:S,to:x}}=v;let M;if(!v.targets.length)return(0,t.of)({data:[]});const R=v.targets[0];if(R.queryType===l.hR.Annotations)return R?.datasource?.uid===g.JY?(0,n.D)(this.getAnnotations(v)):(0,t.of)({data:[]});{const O={intervalMs:y,maxDataPoints:E,queryCachingTTL:P,timeRange:{from:S.valueOf().toString(),to:x.valueOf().toString(),timezone:this.getBrowserTimezone()}};return(0,d.i)().fetch({url:`/api/public/dashboards/${u}/panels/${D}/query`,method:"POST",data:O,requestId:C}).pipe((0,i.w)(T=>(0,t.of)((0,o.z1)(T,M))),(0,s.K)(T=>(0,t.of)((0,o.z1)(T))))}}async getAnnotations(v){const{publicDashboardAccessToken:y,range:{to:E,from:C}}=v,u={from:C.valueOf(),to:E.valueOf()},D=y?await(0,d.i)().get(`/api/public/dashboards/${y}/annotations`,u):[];return{data:[(0,m.g0)(D)]}}testDatasource(){return Promise.resolve({message:"",status:""})}getBrowserTimezone(){return window.Intl?.DateTimeFormat().resolvedOptions()?.timeZone||""}}},26858:(j,I,e)=>{"use strict";e.d(I,{$t:()=>E});var t=e(89949),n=e(99633),i=e(8508),s=e(76305),r=e(1726),m=e(26129),d=e(5933),o=e(12308),l=e(91368),a=e(15476),g=e(56074),c=e(43620),h=e(26862);function f({urlRefresh:C,currentRefresh:u,isAllowedIntervalFn:D,minRefreshInterval:P,refreshIntervals:S=h.o5}){if(!C)return u;const x=D(C),M=S.find(R=>R===C);if(!x||!M){const R=P?S.find(T=>T===P):void 0,O=S?.length?S[0]:void 0;return R??O??u}return C||u}class b{constructor(u){this.contextSrv=u,this.timeRangeForUrl=()=>{const D=this.timeRange().raw;return(0,n.v9)(D.from)&&(D.from=D.from.valueOf().toString()),(0,n.v9)(D.to)&&(D.to=D.to.valueOf().toString()),D},this.time=(0,i.JK)().raw,this.timeAtLoad=(0,i.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),d.Z.subscribe(c.p8,D=>{this.zoomOut(D.payload.scale,D.payload.updateUrl)}),d.Z.subscribe(c.Qt,D=>{this.shiftTime(D.payload.direction,D.payload.updateUrl)}),d.Z.subscribe(c.QI,D=>{this.makeAbsoluteTime(D.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(u){this.timeModel=u,this.time=u.time,this.refresh=u.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const D=s.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);D.to.isBefore(D.from)&&this.setTime({from:D.raw.to,to:D.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(u){return this.contextSrv.minRefreshInterval?u.filter(D=>D!=="").filter(this.contextSrv.isAllowedInterval):u}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(u){if(u.indexOf("now")!==-1)return u;if(u.length===8){const D=(0,n.zh)(u,"YYYYMMDD");if(D.isValid())return D}else if(u.length===15){const D=(0,n.zh)(u,"YYYYMMDDTHHmmss");if(D.isValid())return D}if(!isNaN(Number(u))){const D=parseInt(u,10);return(0,n.zh)(D)}return null}getTimeWindow(u,D){const P=parseInt(u,10);let S;return D.match(/^\d+$/)&&parseInt(D,10)?S=parseInt(D,10):S=s.intervalToMs(D),{from:(0,n.zh)(P-S/2),to:(0,n.zh)(P+S/2)}}initTimeFromUrl(){if(o.config.isPublicDashboardView&&this.timeModel?.timepicker?.hidden)return;const u=m.E1.getSearch();u.get("time")&&u.get("time.window")&&(this.time=this.getTimeWindow(u.get("time"),u.get("time.window"))),u.get("from")&&(this.time.from=this.parseUrlParam(u.get("from"))||this.time.from),u.get("to")&&(this.time.to=this.parseUrlParam(u.get("to"))||this.time.to),u.get("to")&&u.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=f({urlRefresh:u.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:o.config.minRefreshInterval})}updateTimeRangeFromUrl(){const u=m.E1.getSearch();if(u.get("left"))return;const D=this.timeRangeForUrl(),P=u.get("from"),S=u.get("to");P&&S?(P!==D.from||S!==D.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(u){this.timeModel&&(this.timeModel.refresh=u),this.stopAutoRefresh();const D=m.E1.getSearchObject();if(!u){D.refresh&&m.E1.partial({refresh:null},!0);return}let P=u,S=60*1e3;u===l.Wg?S=this.getAutoRefreshInteval().intervalMs:(P=this.contextSrv.getValidInterval(u),S=s.intervalToMs(P)),this.refreshMS=S,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(S),this.refreshTimeModel()},S),D.refresh!==P&&m.E1.partial({refresh:P},!0)}getAutoRefreshInteval(){const u=window?.innerWidth??2e3;return s.calculateInterval(this.timeRange(),u,o.config.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(u){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(u),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},u)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(u,D=!0){if((0,t.extend)(this.time,u),(0,n.v9)(u.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),D===!0){const P=this.timeRangeForUrl(),S=m.E1.getSearchObject();if(S.from===P.from.toString()&&S.to===P.to.toString())return;S.from=P.from.toString(),S.to=P.to.toString(),m.E1.partial(S)}this.timeModel?.refresh===l.Wg&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(l.Wg),this.refreshTimeModel()}timeRange(){return(0,g.O)(this.time,this.timeModel)}zoomOut(u,D=!0){const P=this.timeRange(),{from:S,to:x}=(0,a.h)(P,u);this.setTime({from:(0,n.zh)(S),to:(0,n.zh)(x)},D)}shiftTime(u,D=!0){const P=this.timeRange(),{from:S,to:x}=(0,a.e)(u,P);this.setTime({from:(0,n.zh)(S),to:(0,n.zh)(x)},D)}makeAbsoluteTime(u){const{from:D,to:P}=this.timeRange();this.setTime({from:D,to:P},u)}isRefreshOutsideThreshold(u,D=.05){const P=this.timeRange();if(r.isMathString(P.raw.from)){const S=P.to.diff(P.from),x=Date.now()-u,M=S*D;return x>=M}return!1}}let v;function y(C){v=C}function E(){return v||(v=new b(l.contextSrv)),v}},85180:(j,I,e)=>{"use strict";e.d(I,{o:()=>B,p:()=>H});var t=e(89949),n=e(41199),i=e(59421),s=e(17312),r=e(78968),m=e(3569),d=e(51046),o=e(77104),l=e(19221),a=e(29241),g=e(23830),c=e(99581),h=e(10864),f=e(64167),b=e(37193),v=e(53035),y=e(12308),E=e(97957);function C(q){return Array.from(new Array(q+1),(ne,pe)=>pe).filter(ne=>q%ne===0)}var u=e(13216),D=e(5926),P=e(5399),S=e(21791),x=e(32159),M=e(3133),R=e(24830),O=e(76897),T=e(14180);function U(q,ne){const pe=[];if(q?.statistics&&q?.statistics.length){q.statistic=q.statistics[0];for(const re of q.statistics.splice(1))pe.push({...q,statistic:re})}for(const re of pe)re.refId=(0,O.Hs)(ne),delete re.statistics,ne.push(re);return delete q.statistics,pe}function L(q){const ne=[];if(q&&"statistics"in q&&q?.statistics?.length){for(const pe of q.statistics.splice(1)){const{statistics:re,name:ie,...Se}=q;ne.push({...Se,statistic:pe,name:`${ie} - ${pe}`})}q.statistic=q.statistics[0],ne.length!==0&&(q.name=`${q.name} - ${q.statistic}`),delete q.statistics}return ne}function V(q){q.hasOwnProperty("metricQueryType")||(q.metricQueryType=T.$5.Search),q.hasOwnProperty("metricEditorMode")||(q.metricQueryType===T.$5.Query?q.metricEditorMode=T.MQ.Code:q.metricEditorMode=q.expression?T.MQ.Code:T.MQ.Builder)}var w=e(6230),K=e(89167);n.S.setInit(v.u),n.N.setInit(v.l);class B{constructor(ne){this.dashboard=ne,(0,h.F)()||(0,h.w)(new D.ND)}updateSchema(ne){let pe,re,ie,Se;const ye=this.dashboard.schemaVersion,Ce=[];if(this.dashboard.schemaVersion=38,ye!==this.dashboard.schemaVersion){if(ye<2&&(ne.services&&ne.services.filter&&(this.dashboard.time=ne.services.filter.time,this.dashboard.templating.list=ne.services.filter.list||[]),Ce.push(de=>(de.type==="graphite"&&(de.type="graph"),de.type!=="graph"||((0,t.isBoolean)(de.legend)&&(de.legend={show:de.legend}),de.grid&&(de.grid.min&&(de.grid.leftMin=de.grid.min,delete de.grid.min),de.grid.max&&(de.grid.leftMax=de.grid.max,delete de.grid.max)),de.y_format&&(de.y_formats||(de.y_formats=[]),de.y_formats[0]=de.y_format,delete de.y_format),de.y2_format&&(de.y_formats||(de.y_formats=[]),de.y_formats[1]=de.y2_format,delete de.y2_format)),de))),ye<3){let de=this.dashboard.getNextPanelId();Ce.push(we=>(we.id||(we.id=de,de+=1),we))}if(ye<4&&Ce.push(de=>(de.type!=="graph"||((0,t.each)(de.aliasYAxis,(we,_e)=>{de.seriesOverrides=[{alias:_e,yaxis:we}]}),delete de.aliasYAxis),de)),ye<6){const de=(0,t.find)(ne.pulldowns,{type:"annotations"});for(de&&(this.dashboard.annotations={list:de.annotations||[]}),pe=0;pe<this.dashboard.templating.list.length;pe++){const we=this.dashboard.templating.list[pe];we.datasource===void 0&&(we.datasource=null),we.type==="filter"&&(we.type="query"),we.type===void 0&&(we.type="query"),we.allFormat===void 0&&(we.allFormat="glob")}}if(ye<7&&(ne.nav&&ne.nav.length&&(this.dashboard.timepicker=ne.nav[0]),Ce.push(de=>((0,t.each)(de.targets,we=>{we.refId||(we.refId=de.getNextQueryLetter&&de.getNextQueryLetter())}),de))),ye<8&&Ce.push(de=>((0,t.each)(de.targets,we=>{we.fields&&we.tags&&we.groupBy&&(we.rawQuery?(delete we.fields,delete we.fill):(we.select=(0,t.map)(we.fields,_e=>{const Je=[];return Je.push({type:"field",params:[_e.name]}),Je.push({type:_e.func,params:[]}),_e.mathExpr&&Je.push({type:"math",params:[_e.mathExpr]}),_e.asExpr&&Je.push({type:"alias",params:[_e.asExpr]}),Je}),delete we.fields,(0,t.each)(we.groupBy,_e=>{_e.type==="time"&&_e.interval&&(_e.params=[_e.interval],delete _e.interval),_e.type==="tag"&&_e.key&&(_e.params=[_e.key],delete _e.key)}),we.fill&&(we.groupBy.push({type:"fill",params:[we.fill]}),delete we.fill)))}),de)),ye<9&&Ce.push(de=>{if(de.type!=="singlestat"&&de.thresholds!=="")return de;if(de.thresholds){const we=de.thresholds.split(",");we.length>=3&&(we.shift(),de.thresholds=we.join(","))}return de}),ye<10&&Ce.push(de=>(de.type!=="table"||(0,t.each)(de.styles,we=>{if(we.thresholds&&we.thresholds.length>=3){const _e=we.thresholds;_e.shift(),we.thresholds=_e}}),de)),ye<12&&(0,t.each)(this.dashboard.getVariables(),de=>{de.refresh&&(de.refresh=1),de.refresh||(de.refresh=0),de.hideVariable?de.hide=2:de.hideLabel&&(de.hide=1)}),ye<12&&Ce.push(de=>(de.type!=="graph"||!de.grid||de.yaxes||(de.yaxes=[{show:de["y-axis"],min:de.grid.leftMin,max:de.grid.leftMax,logBase:de.grid.leftLogBase,format:de.y_formats[0],label:de.leftYAxisLabel},{show:de["y-axis"],min:de.grid.rightMin,max:de.grid.rightMax,logBase:de.grid.rightLogBase,format:de.y_formats[1],label:de.rightYAxisLabel}],de.xaxis={show:de["x-axis"]},delete de.grid.leftMin,delete de.grid.leftMax,delete de.grid.leftLogBase,delete de.grid.rightMin,delete de.grid.rightMax,delete de.grid.rightLogBase,delete de.y_formats,delete de.leftYAxisLabel,delete de.rightYAxisLabel,delete de["y-axis"],delete de["x-axis"]),de)),ye<13&&Ce.push(de=>{if(de.type!=="graph"||!de.grid)return de;de.thresholds||(de.thresholds=[]);const we={},_e={};return de.grid.threshold1!==null&&(we.value=de.grid.threshold1,de.grid.thresholdLine?(we.line=!0,we.lineColor=de.grid.threshold1Color,we.colorMode="custom"):(we.fill=!0,we.fillColor=de.grid.threshold1Color,we.colorMode="custom")),de.grid.threshold2!==null&&(_e.value=de.grid.threshold2,de.grid.thresholdLine?(_e.line=!0,_e.lineColor=de.grid.threshold2Color,_e.colorMode="custom"):(_e.fill=!0,_e.fillColor=de.grid.threshold2Color,_e.colorMode="custom")),(0,t.isNumber)(we.value)&&((0,t.isNumber)(_e.value)?we.value>_e.value?(we.op=_e.op="lt",de.thresholds.push(we),de.thresholds.push(_e)):(we.op=_e.op="gt",de.thresholds.push(we),de.thresholds.push(_e)):(we.op="gt",de.thresholds.push(we))),delete de.grid.threshold1,delete de.grid.threshold1Color,delete de.grid.threshold2,delete de.grid.threshold2Color,delete de.grid.thresholdLine,de}),ye<14&&(this.dashboard.graphTooltip=ne.sharedCrosshair?1:0),ye<16&&this.upgradeToGridLayout(ne),ye<17&&Ce.push(de=>{if(de.minSpan){const we=E.cz/de.minSpan,_e=C(E.cz);de.maxPerRow=_e[(0,t.findIndex)(_e,Je=>Je>we)-1]}return delete de.minSpan,de}),ye<18&&Ce.push(de=>(de["options-gauge"]&&(de.options=de["options-gauge"],de.options.valueOptions={unit:de.options.unit,stat:de.options.stat,decimals:de.options.decimals,prefix:de.options.prefix,suffix:de.options.suffix},de.options.thresholds&&de.options.thresholds.reverse(),delete de.options.options,delete de.options.unit,delete de.options.stat,delete de.options.decimals,delete de.options.prefix,delete de.options.suffix,delete de["options-gauge"]),de)),ye<19&&Ce.push(de=>(de.links&&(0,t.isArray)(de.links)&&(de.links=de.links.map(k)),de)),ye<20){const de=we=>({...we,url:A(we.url)});Ce.push(we=>(we.options&&we.options.dataLinks&&(0,t.isArray)(we.options.dataLinks)&&(we.options.dataLinks=we.options.dataLinks.map(de)),we.options&&we.options.fieldOptions&&we.options.fieldOptions.defaults&&(we.options.fieldOptions.defaults.links&&(0,t.isArray)(we.options.fieldOptions.defaults.links)&&(we.options.fieldOptions.defaults.links=we.options.fieldOptions.defaults.links.map(de)),we.options.fieldOptions.defaults.title&&(we.options.fieldOptions.defaults.title=A(we.options.fieldOptions.defaults.title))),we))}if(ye<21){const de=we=>({...we,url:we.url.replace(/__series.labels/g,"__field.labels")});Ce.push(we=>(we.options&&we.options.dataLinks&&(0,t.isArray)(we.options.dataLinks)&&(we.options.dataLinks=we.options.dataLinks.map(de)),we.options&&we.options.fieldOptions&&we.options.fieldOptions.defaults&&we.options.fieldOptions.defaults.links&&(0,t.isArray)(we.options.fieldOptions.defaults.links)&&(we.options.fieldOptions.defaults.links=we.options.fieldOptions.defaults.links.map(de)),we))}if(ye<22&&Ce.push(de=>(de.type!=="table"||(0,t.each)(de.styles,we=>{we.align="auto"}),de)),ye<23)for(const de of this.dashboard.templating.list){if(!(0,P.U4)(de))continue;const{multi:we,current:_e}=de;(0,i.Q)(_e)||(de.current=(0,S.x)(_e,we))}if(ye<24&&Ce.push(de=>{const we=de.type==="table";if(we&&!de.styles)return de;const _e=de.table==="table2";return!we||_e||(de.type=we?"table-old":"table"),de}),ye<25,ye<26&&Ce.push(de=>(de.type==="text2"&&(de.type="text",delete de.options.angular),de)),ye<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map(de=>{if(!(0,P.VC)(de))return de;const we={...de};return we.current={selected:!0,text:we.query??"",value:we.query??""},we.options=[we.current],we.hide===w.bU.dontHide||we.hide===w.bU.hideLabel?{...we,type:"textbox"}:we})),ye<28){Ce.push(de=>de.type==="singlestat"?z(de):de);for(const de of this.dashboard.templating.list)de.tags&&delete de.tags,de.tagsQuery&&delete de.tagsQuery,de.tagValuesQuery&&delete de.tagValuesQuery,de.useTags&&delete de.useTags}if(ye<29)for(const de of this.dashboard.templating.list)de.type==="query"&&(de.refresh!==1&&de.refresh!==2&&(de.refresh=1),de.options?.length&&(de.options=[]));if(ye<30&&(Ce.push(X),Ce.push(le)),ye<31&&Ce.push(de=>{if(de.transformations){for(const we of de.transformations)if(we.id===g.r.id)return Q(de,g.r.id,{id:c.R.id,options:{}})}return de}),ye<32,ye<33&&Ce.push(de=>{if(de.datasource=H(de.datasource,{returnDefaultAsNull:!0}),!de.targets)return de;for(const we of de.targets){const _e=H(we.datasource,{returnDefaultAsNull:!0});_e!=null&&(we.datasource=_e)}return de}),ye<34&&(Ce.push(de=>(this.migrateCloudWatchQueries(de),de)),this.migrateCloudWatchAnnotationQuery()),ye<35&&Ce.push(ce),ye<36){for(const we of this.dashboard.annotations.list)we.datasource=H(we.datasource,{returnDefaultAsNull:!1});const de=(0,h.F)().getInstanceSettings(null);if(de){for(const we of this.dashboard.templating.list)we.type==="query"&&we.datasource===null&&(we.datasource=(0,s.iU)(de));Ce.push(we=>{if(we.targets){let _e=!1;we.datasource==null&&we.targets.length>0&&(we.datasource=(0,s.iU)(de),_e=!0);for(const Je of we.targets)(Je.datasource==null||Je.datasource.uid==null)&&(we.datasource?.uid!==x.D?Je.datasource={...we.datasource}:Je.datasource=H(Je.datasource,{returnDefaultAsNull:!1})),_e&&Je.datasource?.uid!=="__expr__"&&(we.datasource=Je.datasource)}return we})}}if(ye<37&&Ce.push(de=>(de.options?.legend&&(de.options.legend.displayMode==="hidden"||de.options.legend.showLegend===!1)?(de.options.legend.displayMode="list",de.options.legend.showLegend=!1):de.options?.legend&&(de.options.legend={...de.options?.legend,showLegend:!0}),de)),ye<38&&Ce.push(de=>{if(de.type==="table"&&de.fieldConfig!==void 0){const we=de.fieldConfig.defaults?.custom?.displayMode;if(we!==void 0&&(de.fieldConfig.defaults.custom.cellOptions=(0,b.q7)(we),delete de.fieldConfig.defaults.custom.displayMode),de.fieldConfig?.overrides)for(const _e of de.fieldConfig.overrides)for(let Je=0;Je<_e.properties?.length;Je++){let Ue=_e.properties[Je].value;_e.properties[Je].id==="custom.displayMode"&&(_e.properties[Je].id="custom.cellOptions",_e.properties[Je].value=(0,b.q7)(Ue))}}return de}),Ce.length!==0)for(re=0;re<this.dashboard.panels.length;re++)for(ie=0;ie<Ce.length;ie++){this.dashboard.panels[re]=Ce[ie].call(this,this.dashboard.panels[re]);const de=this.dashboard.panels[re].panels;if(de)for(Se=0;Se<de.length;Se++)de[Se]=Ce[ie].call(this,de[Se])}}}migrateCloudWatchQueries(ne){for(const pe of ne.targets||[])if(te(pe)&&(V(pe),pe.hasOwnProperty("statistics"))){const re=U(pe,[...ne.targets]);for(const ie of re)ne.targets.push(ie)}}migrateCloudWatchAnnotationQuery(){for(const ne of this.dashboard.annotations.list)if(oe(ne)){const pe=L(ne);for(const re of pe)this.dashboard.annotations.list.push(re)}}upgradeToGridLayout(ne){let pe=0;const re=E.cz/12;let Se=(0,t.max)((0,t.flattenDeep)((0,t.map)(ne.rows,Ce=>(0,t.map)(Ce.panels,"id"))))+1;if(!ne.rows)return;const ye=(0,t.some)(ne.rows,Ce=>Ce.collapse||Ce.showTitle||Ce.repeat);for(const Ce of ne.rows){if(Ce.repeatIteration)continue;const de=Ce.height||E.b0,we=W(de),_e={};let Je;ye&&(_e.id=Se,_e.type="row",_e.title=Ce.title,_e.collapsed=Ce.collapse,_e.repeat=Ce.repeat,_e.panels=[],_e.gridPos={x:0,y:pe,w:E.cz,h:we},Je=new K.rY(_e),Se++,pe++);const Ue=new _(we,E.cz,pe);for(const $e of Ce.panels){$e.span=$e.span||E.kh,$e.minSpan&&($e.minSpan=Math.min(E.cz,E.cz/12*$e.minSpan));const Qe=Math.floor($e.span)*re,tt=$e.height?W($e.height):we,lt=Ue.getPanelPosition(tt,Qe);pe=Ue.yPos,$e.gridPos={x:lt.x,y:pe+lt.y,w:Qe,h:tt},Ue.addPanel($e.gridPos),delete $e.span,Je&&_e.collapsed?Je.panels?.push($e):this.dashboard.panels.push(new K.rY($e))}Je&&this.dashboard.panels.push(Je),Je&&_e.collapsed||(pe+=we)}}}function W(q){return(0,t.isString)(q)&&(q=parseInt(q.replace("px",""),10)),q<E.AV&&(q=E.AV),Math.ceil(q/(E.K3+E.hD))}class _{constructor(ne,pe=E.cz,re=0){this.area=new Array(pe).fill(0),this.yPos=re,this.height=ne}reset(){this.area.fill(0)}addPanel(ne){for(let pe=ne.x;pe<ne.x+ne.w;pe++)(!this.area[pe]||ne.y+ne.h-this.yPos>this.area[pe])&&(this.area[pe]=ne.y+ne.h-this.yPos);return this.area}getPanelPosition(ne,pe,re=!1){let ie,Se,ye;for(let Ce=this.area.length-1;Ce>=0&&this.height-this.area[Ce]>0;Ce--)if(Se===void 0)Se=Ce;else if(Ce<this.area.length-1&&this.area[Ce]<=this.area[Ce+1])ie=Ce;else break;if(ie!==void 0&&Se!==void 0&&Se-ie>=pe-1){const Ce=(0,t.max)(this.area.slice(ie));ye={x:ie,y:Ce}}else return re?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(ne,pe,!0));return ye}}function k(q){let ne=q.url;return!ne&&q.dashboard&&(ne=`dashboard/db/${u.Z.slugifyForUrl(q.dashboard)}`),!ne&&q.dashUri&&(ne=`dashboard/${q.dashUri}`),ne||(ne="/"),q.keepTime&&(ne=r.Cj.appendQueryToUrl(ne,`$${m.W.keepTime}`)),q.includeVars&&(ne=r.Cj.appendQueryToUrl(ne,`$${m.W.includeVars}`)),q.params&&(ne=r.Cj.appendQueryToUrl(ne,q.params)),{url:ne,title:q.title,targetBlank:q.targetBlank}}function A(q){const ne=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return q.replace(ne,(pe,re,ie,Se,ye,Ce)=>re?"__series.name":ie?"${__series.name}":Se?"__value.time":ye?"__field.name":Ce?"${__field.name}":pe)}function z(q){if(y.config.panels["grafana-singlestat-panel"])return q.type="grafana-singlestat-panel",q;let ne=!1;return q.changePlugin||(ne=!0,q=new K.rY(q)),q.plugin={angularPanelCtrl:{}},q.gauge?.show?(M.plugin.meta=y.config.panels.gauge,q.changePlugin(M.plugin)):(R.plugin.meta=y.config.panels.stat,q.changePlugin(R.plugin)),ne?q.getSaveModel():q}function H(q,ne){if(ne.returnDefaultAsNull&&(q==null||q==="default"))return null;if((0,s.cv)(q))return q;const pe=(0,h.F)().getInstanceSettings(q);return pe?(0,s.iU)(pe):{uid:q}}function Q(q,ne,pe){if(q.transformations){const re=[];for(const ie of q.transformations)re.push(ie),ie.id===ne&&re.push({...pe});q.transformations=re}return q}function X(q){const ne=q.fieldConfig;if(!ne)return q;if(ne.defaults&&ne.defaults.mappings&&(ne.defaults.mappings=Z(ne.defaults.mappings,ne.defaults.thresholds)),Array.isArray(ne.overrides))for(const pe of ne.overrides)for(const re of pe.properties)re.id==="mappings"&&(re.value=Z(re.value));return q}function te(q){return q.hasOwnProperty("dimensions")&&q.hasOwnProperty("namespace")&&q.hasOwnProperty("region")&&q.hasOwnProperty("metricName")}function oe(q){return q.hasOwnProperty("dimensions")&&q.hasOwnProperty("namespace")&&q.hasOwnProperty("region")&&q.hasOwnProperty("prefixMatching")&&q.hasOwnProperty("statistics")}function Z(q,ne){if(!q)return;const pe={type:d.H.ValueToText,options:{}},re=[];for(const ie of q){if(ie.type&&ie.options){ie.type===d.H.ValueToText?pe.options={...pe.options,...ie.options}:re.push(ie);continue}let Se;const ye=parseFloat(ie.text);if(ne&&!isNaN(ye)){const Ce=(0,o.m1)(ye,ne.steps);Ce&&Ce.color&&(Se=Ce.color)}switch(ie.type){case 1:ie.value!=null&&(ie.value==="null"?re.push({type:d.H.SpecialValue,options:{match:d.e.Null,result:{text:ie.text,color:Se}}}):pe.options[String(ie.value)]={text:ie.text,color:Se});break;case 2:re.push({type:d.H.RangeToText,options:{from:+ie.from,to:+ie.to,result:{text:ie.text,color:Se}}});break}}return Object.keys(pe.options).length>0&&re.unshift(pe),re}function le(q){return(q.type==="timeseries"||q.type==="xychart")&&q.options.tooltipOptions&&(q.options={...q.options,tooltip:q.options.tooltipOptions},delete q.options.tooltipOptions),q}function ce(q){return q.type==="timeseries"&&q.fieldConfig?.defaults.custom?.axisPlacement===f.LB.Hidden&&(q.fieldConfig={...q.fieldConfig,overrides:[...q.fieldConfig.overrides,{matcher:{id:l.mi.byType,options:a.fS.time},properties:[{id:"custom.axisPlacement",value:f.LB.Auto}]}]}),q}},85991:(j,I,e)=>{"use strict";e.d(I,{f:()=>w});var t=e(89949),n=e(19973),i=e(62435),s=e(60956),r=e(99633),m=e(34667),d=e(32713),o=e(5354),l=e(97957),a=e(91368);function g(B){return(0,t.isArray)(B)?B.map(g):(0,t.isPlainObject)(B)?Object.keys(B).sort().reduce((W,_)=>{const k=B[_];return k!=null&&(W[_]=g(k)),W},{}):B}var c=e(41355),h=e(4684),f=e(51824),b=e(18771),v=e(43620),y=e(66574),E=e(84749),C=e(6230),u=e(81587),D=e(26858),P=e(73170);const S=new Set(["gridPos","title","description","transparent"]);function x(B,W){const _=[],k={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:_};let A=0;const z=new Map;for(let H of W){let{id:Q}=H;Q||(A||(A=R([B,W])),Q=A++,H={...H,id:Q}),z.set(Q,H)}for(const H of B){const Q=z.get(H.id);if(!Q){k.changed=!0,k.actions.remove.push(H.id),H.destroy();continue}if(z.delete(H.id),Q===H){_.push(H),k.actions.noop.push(H.id);continue}if(H.type===Q.type){const te=H.getSaveModel();let oe=!0,Z=!1;for(const[le,ce]of Object.entries(Q))if(!(0,t.isEqualWith)(ce,te[le],M))if(k.changed=!0,oe=!1,S.has(le))H[le]=ce,Z=!0;else{Z=!1;break}if(oe){_.push(H),k.actions.noop.push(H.id);continue}if(Z){_.push(H),k.actions.update.push(H.id);continue}}H.destroy();const X=new P.r(Q);X.key=`${X.id}-update-${Date.now()}`,_.push(X),k.changed=!0,k.actions.replace.push(H.id)}for(const H of z.values())_.push(new P.r(H)),k.changed=!0,k.actions.add.push(H.id);return k}function M(B,W){if(B==null&&(W===1/0||W===-1/0||W==null)||W==null&&(B===1/0||B===-1/0||B==null))return!0}function R(B){let W=0;for(const _ of B)for(const k of _)k.id>W&&(W=k.id);return W+1}var O=e(85180),T=e(89167);function U(B,W){return B.repeatDirection===l.yM?!1:W.gridPos.x>=B.gridPos.x+B.gridPos.w&&W.gridPos.y===B.gridPos.y}function L(B){for(const W of B)if(delete W.scopedVars,W.panels?.length)for(const _ of W.panels)delete _.scopedVars}const V=class{constructor(B,W,_){this.timeRangeUpdatedDuringEdit=!1,this.getVariablesFromState=_?.getVariablesFromState??f.gt,this.events=new i.F,this.id=B.id||null,this.uid=B.uid||null,this.revision=B.revision??void 0,this.title=B.title??"No Title",this.description=B.description,this.tags=B.tags??[],this.style=B.style??"dark",this.timezone=B.timezone??"",this.weekStart=B.weekStart??"",this.editable=B.editable!==!1,this.graphTooltip=B.graphTooltip||0,this.time=B.time??{from:"now-6h",to:"now"},this.timepicker=B.timepicker??{},this.liveNow=!!B.liveNow,this.templating=this.ensureListExist(B.templating),this.annotations=this.ensureListExist(B.annotations),this.refresh=B.refresh||"",this.snapshot=B.snapshot,this.schemaVersion=B.schemaVersion??0,this.fiscalYearStartMonth=B.fiscalYearStartMonth??0,this.version=B.version??0,this.links=B.links??[],this.gnetId=B.gnetId||null,this.panels=(0,t.map)(B.panels??[],k=>new T.rY(k)),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(W),this.updateSchema(B),(_?.autoMigrateOldPanels||!m.config.angularSupportEnabled||m.config.featureToggles.autoMigrateOldPanels)&&this.panels.forEach(k=>{const A=T.G7[k.type];!k.autoMigrateFrom&&A&&(k.autoMigrateFrom=k.type,k.type=A)}),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(y.h$.subscribe(C.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(y.h$.subscribe(C.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(y.h$.subscribe(C.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(W=>W.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:o.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(B){B=B||{},B.canShare=B.canShare!==!1,B.canSave=B.canSave!==!1,B.canStar=B.canStar!==!1,B.canEdit=B.canEdit!==!1,B.canDelete=B.canDelete!==!1,B.showSettings=B.canEdit,B.canMakeEditable=B.canSave&&!this.editable,B.hasUnsavedFolderChange=!1,this.editable||(B.canEdit=!1,B.canDelete=!1,B.canSave=!1),this.meta=B}getSaveModelClone(B){const W=(0,t.defaults)(B||{},{saveVariables:!0,saveTimerange:!0});let _={};for(const k in this)V.nonPersistedProperties[k]||!this.hasOwnProperty(k)||(_[k]=(0,t.cloneDeep)(this[k]));return this.updateTemplatingSaveModelClone(_,W),W.saveTimerange||(_.time=this.originalTime),_.panels=this.getPanelSaveModels(),_=g(_),_.getVariables=()=>_.templating.list,_}updatePanels(B){const W=x(this.panels,B??[]);return W.changed&&(this.panels=W.panels??[],this.sortPanelsByGridPos(),this.events.publish(new v._B)),W}getPanelSaveModels(){return this.panels.filter(B=>this.isSnapshotTruthy()||!(B.type==="add-panel"||B.repeatPanelId||B.repeatedByRow)).map(B=>{if(B.libraryPanel){const{id:W,title:_,libraryPanel:k,gridPos:A}=B;return{id:W,title:_,gridPos:A,libraryPanel:{uid:k.uid,name:k.name}}}return this.panelInEdit&&this.panelInEdit.id===B.id?this.panelInEdit.getSaveModel():B.getSaveModel()}).map(B=>(this.isSnapshotTruthy()||(delete B.scopedVars,B.type==="row"&&B.panels&&B.panels.length>0&&(B.panels=B.panels.filter(W=>!W.repeatPanelId).map(W=>(delete W.scopedVars,W)))),B))}updateTemplatingSaveModelClone(B,W){const _=this.originalTemplating,k=this.getVariablesFromState(this.uid);if(B.templating={list:k.map(A=>c.z.get(A.type).getSaveModel(A,W.saveVariables))},!W.saveVariables)for(const A of B.templating.list){const z=_.find(({name:H,type:Q})=>H===A.name&&Q===A.type);z&&(A.type==="adhoc"?A.filters=z.filters:A.current=z.current)}}timeRangeUpdated(B){this.events.publish(new d.md(B)),(0,E.WI)((0,h.DU)(this.uid,B)),this.panelInEdit&&(this.timeRangeUpdatedDuringEdit=!0)}startRefresh(B={refreshAll:!0,panelIds:[]}){if(this.events.publish(new d.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(B.refreshAll||B.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const W of this.panels)!this.otherPanelInFullscreen(W)&&(B.refreshAll||B.panelIds.includes(W.id))&&W.refresh()}render(){this.events.publish(new v._z);for(const B of this.panels)B.render()}panelInitialized(B){const W=B.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(B)&&!W&&B.refresh()}otherPanelInFullscreen(B){return(this.panelInEdit||this.panelInView)&&!(B.isViewing||B.isEditing)}initEditPanel(B){return(0,D.$t)().stopAutoRefresh(),this.panelInEdit=B.getEditClone(),this.timeRangeUpdatedDuringEdit=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,D.$t)().resumeAutoRefresh(),(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEdit)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEdit}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEdit=!1)}initViewPanel(B){this.panelInView=B,B.setIsViewing(!0)}exitViewPanel(B){this.panelInView=void 0,B.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const B=new Set;let W=this.getNextPanelId();for(const _ of this.panelIterator())(!_.id||B.has(_.id))&&(_.id=W++),B.add(_.id)}ensureListExist(B={}){return B.list??=[],B}getNextPanelId(){let B=0;for(const W of this.panelIterator())W.id>B&&(B=W.id);return B+1}*panelIterator(){for(const B of this.panels){yield B;const W=B.panels??[];for(const _ of W)yield _}}forEachPanel(B){for(let W=0;W<this.panels.length;W++)B(this.panels[W],W)}getPanelById(B){return this.panelInEdit&&this.panelInEdit.id===B?this.panelInEdit:this.panels.find(W=>W.id===B)??null}canEditPanel(B){return!!(this.meta.canEdit&&B&&!B.repeatPanelId&&B.type!=="row")}canEditPanelById(B){return this.canEditPanel(this.getPanelById(B))}addPanel(B){B.id=this.getNextPanelId(),this.panels.unshift(new T.rY(B)),this.sortPanelsByGridPos(),this.events.publish(new v._B)}updateMeta(B){this.meta={...this.meta,...B},this.events.publish(new v.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((B,W)=>B.gridPos.y===W.gridPos.y?B.gridPos.x-W.gridPos.x:B.gridPos.y-W.gridPos.y)}clearUnsavedChanges(){for(const B of this.panels)B.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){return!!this.panels.find(W=>W.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;L(this.panels);const B=this.panels.filter(W=>(!W.repeat||W.repeatedByRow)&&W.repeatPanelId);(0,t.pull)(this.panels,...B),B.map(W=>W.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let B=0;B<this.panels.length;B++){const W=this.panels[B];W.repeat&&this.repeatPanel(W,B)}this.sortPanelsByGridPos(),this.events.publish(new v._B)}}cleanUpRowRepeats(B){const W=B.map(k=>k.id),_=B.filter(k=>!k.repeat&&k.repeatPanelId&&W.includes(k.repeatPanelId));(0,t.pull)(B,..._),(0,t.pull)(this.panels,..._)}processRowRepeats(B){if(this.isSnapshotTruthy()||!this.hasVariables())return;let W=B.panels??[];if(!B.collapsed){const _=this.panels.findIndex(k=>k.id===B.id);W=this.getRowPanels(_)}this.cleanUpRowRepeats(W);for(const _ of W)if(_.repeat){const k=this.panels.findIndex(A=>A.id===_.id);this.repeatPanel(_,k)}}getPanelRepeatClone(B,W,_){if(W===0)return B;const k=B.getSaveModel();k.id=this.getNextPanelId();const A=new T.rY(k);return this.panels.splice(_+W,0,A),A.repeatPanelId=B.id,A.repeat=void 0,this.panelInView?.id===A.id&&(A.setIsViewing(!0),this.panelInView=A),A}getRowRepeatClone(B,W,_){if(W===0){if(!B.collapsed){const H=this.getRowPanels(_);B.panels=H}return B}const k=new T.rY(B.getSaveModel());let A,z;return B.collapsed?(A=(0,t.cloneDeep)(B.panels)??[],k.panels=A,z=_+W):(A=this.getRowPanels(_),k.panels=A.map(H=>H.getSaveModel()),z=_+(A.length+1)*W),this.panels.splice(z,0,k),this.updateRepeatedPanelIds(k),k}repeatPanel(B,W){const _=this.getPanelRepeatVariable(B);if(!_)return;if(B.type==="row"){this.repeatRow(B,W,_);return}const k=this.getSelectedVariableOptions(_),A=B.maxPerRow||4;let z=0,H=B.gridPos.y;for(let X=0;X<k.length;X++){const te=k[X];let oe;oe=this.getPanelRepeatClone(B,X,W),oe.scopedVars??={},oe.scopedVars[_.name]=te,B.repeatDirection===l.OA?(X>0&&(H+=oe.gridPos.h),oe.gridPos.y=H):(oe.gridPos.w=Math.max(l.cz/k.length,l.cz/A),oe.gridPos.x=z,oe.gridPos.y=H,z+=oe.gridPos.w,z+oe.gridPos.w>l.cz&&(z=0,H+=oe.gridPos.h))}const Q=H-B.gridPos.y;if(Q>0){const X=W+k.length;for(const te of this.panels.slice(X))U(B,te)||(te.gridPos.y+=Q)}}repeatRow(B,W,_){const k=this.getSelectedVariableOptions(_);let A=B.gridPos.y;function z(H,Q){H.scopedVars??={},H.scopedVars[_.name]=Q}for(let H=0;H<k.length;H++){const Q=k[H],X=this.getRowRepeatClone(B,H,W);z(X,Q);const te=this.getRowHeight(X),oe=X.panels||[];let Z;if(B.collapsed){for(const le of oe)z(le,Q),H>0&&this.updateRepeatedPanelIds(le,!0);X.gridPos.y+=H,A+=H,Z=W+H+1}else{const le=W+(oe.length+1)*H+1;oe.forEach((ce,q)=>{if(z(ce,Q),H>0){const ne=new T.rY(ce);this.updateRepeatedPanelIds(ne,!0),ne.gridPos.y+=te*H,this.panels.splice(le+q,0,ne)}}),X.panels=[],X.gridPos.y+=te*H,A+=te,Z=le+oe.length}if(k.length>1)for(const le of this.panels.slice(Z))le.gridPos.y+=A}}updateRepeatedPanelIds(B,W){return B.repeatPanelId=B.id,B.id=this.getNextPanelId(),W?B.repeatedByRow=!0:B.repeat=void 0,B}getSelectedVariableOptions(B){let W;return(0,u.HY)(B)?W=B.options.slice(1,B.options.length):W=(0,t.filter)(B.options,{selected:!0}),W}getRowHeight(B){if(!B.panels||B.panels.length===0)return 0;const W=B.gridPos.y,_=(0,t.map)(B.panels,"gridPos"),k=(0,t.maxBy)(_,A=>A.y+A.h);return k.y+k.h-W}removePanel(B){this.panels=this.panels.filter(W=>W!==B),this.events.publish(new v._B)}removeRow(B,W){(!W&&B.collapsed||W&&!B.collapsed)&&this.toggleRow(B),this.removePanel(B)}expandRows(){const B=this.panels.filter(W=>W.type==="row"&&W.collapsed);for(const W of B)this.toggleRow(W)}collapseRows(){const B=this.panels.filter(W=>W.type==="row"&&!W.collapsed);for(const W of B)this.toggleRow(W)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(B=>B.hide!==2)||this.annotations.list.some(B=>!B.hide)}getPanelInfoById(B){const W=this.panels.findIndex(_=>_.id===B);return W>=0?{panel:this.panels[W],index:W}:null}duplicatePanel(B){const W=B.getSaveModel();return W.id=this.getNextPanelId(),delete W.repeat,delete W.repeatIteration,delete W.repeatPanelId,delete W.scopedVars,W.alert&&delete W.thresholds,delete W.alert,B.gridPos.x+B.gridPos.w*2<=l.cz?W.gridPos.x+=B.gridPos.w:W.gridPos.y+=B.gridPos.h,this.addPanel(W),W}formatDate(B,W){return(0,s.dq)(B,{format:W,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const B of this.panels)B.destroy()}toggleRow(B){const W=(0,t.indexOf)(this.panels,B);if(!B.collapsed){const z=this.getRowPanels(W);(0,t.pull)(this.panels,...z),B.panels=z.map(H=>H.getSaveModel()),B.collapsed=!0,z.some(H=>H.hasChanged)&&B.configRev++,this.events.publish(new v._B);return}B.collapsed=!1;const _=B.panels??[],k=_.some(z=>z.repeat),A=B.repeat;if(_.length>0){const H=(_[0].gridPos.y??B.gridPos.y)-(B.gridPos.y+B.gridPos.h);let Q=W+1,X=B.gridPos.y;for(const oe of _){if(A){const Z=this.getPanelRepeatVariable(B);if(oe.scopedVars??={},Z){const le=this.getSelectedVariableOptions(Z);oe.scopedVars={...oe.scopedVars,[Z.name]:le[0]}}}oe.gridPos.y??(oe.gridPos.y=B.gridPos.y),oe.gridPos.y-=H,this.panels.splice(Q,0,new T.rY(oe)),Q+=1,X=Math.max(X,oe.gridPos.y+oe.gridPos.h)}const te=X-B.gridPos.y-1;for(const oe of this.panels.slice(Q))oe.gridPos.y+=te;B.panels=[],k&&this.processRowRepeats(B)}this.sortPanelsByGridPos(),this.events.publish(new v._B)}getRowPanels(B){const W=this.panels.slice(B+1),_=W.findIndex(A=>A.type==="row");return W.slice(0,_>=0?_:this.panels.length)}on(B,W){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(B,W)}off(B,W){console.log("DashboardModel.off is deprecated"),this.events.off(B,W)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(B){return(0,s.E8)(B,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:a.contextSrv?.user?.timezone}updateSchema(B){new O.o(this).updateSchema(B)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:B,originalTime:W}=this;return!((0,t.isEqual)(B,W)||(0,t.isEqual)((0,r.CQ)(B?.from),(0,r.CQ)(W?.from))&&(0,t.isEqual)((0,r.CQ)(B?.to),(0,r.CQ)(W?.to)))}resetOriginalVariables(B=!1){if(B){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(B,W){const _=Math.max(...this.panels.map(X=>X.gridPos.h+X.gridPos.y)),k=55,A=20;let z=B-k-A;W&&W!==b.KioskMode.TV&&(z+=k);const H=Math.floor(z/(l.K3+l.hD)),Q=_/H;for(const X of this.panels)X.gridPos.y=Math.round(X.gridPos.y/Q)||1,X.gridPos.h=Math.round(X.gridPos.h/Q)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(b.CoreEvents.nq)}getPanelByUrlId(B){const W=parseInt(B??"0",10),_=this.panels.filter(k=>k.collapsed);for(const k of _)k.panels?.some(z=>z.id===W)&&this.toggleRow(k);return this.getPanelById(W)}toggleLegendsForAll(){const B=this.panels.filter(K),W=B.filter(A=>A.legend.show).length,_=B.length-W,k=W>=_;for(const A of B)A.legend.show=!k,A.render()}toggleExemplarsForAll(){for(const B of this.panels)for(const W of B.targets){if(!(W.datasource&&W.datasource.type==="prometheus"))continue;const _=W;_.exemplar=!_.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(B){let W=!0;return a.contextSrv.accessControlEnabled()&&(B?W=!!this.meta.annotationsPermissions?.dashboard.canEdit:W=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&W}canDeleteAnnotations(B){let W=!0;return a.contextSrv.accessControlEnabled()&&(B?W=!!this.meta.annotationsPermissions?.dashboard.canDelete:W=!!this.meta.annotationsPermissions?.organization.canDelete),W&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(W=>W.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!a.contextSrv.accessControlEnabled()||!!this.meta.annotationsPermissions?.dashboard.canAdd}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(B,W){!(0,t.isEqual)(B?.gridPos,W?.gridPos)&&this.events.publish(new v._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(B){return this.getVariablesFromState(this.uid).find(W=>W.name===B.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(B,W){if(B.length!==W.length)return!1;const _=W.map(k=>({name:k.name,type:k.type,current:(0,t.cloneDeep)(k.current),filters:(0,t.cloneDeep)(k.filters)}));return!(0,t.isEqual)(_,B)}cloneVariablesFrom(B){return B.map(W=>({name:W.name,type:W.type,current:(0,t.cloneDeep)(W.current),filters:(0,t.cloneDeep)(W.filters)}))}variablesTimeRangeProcessDoneHandler(B){const W=B.payload.variableIds.length>0;this.variablesChangedHandler(new C.x9({panelIds:[],refreshAll:!0}),W)}variablesChangedHandler(B,W=!0){if(W&&this.processRepeats(),B.payload.refreshAll||(0,D.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=B.payload.panelIds.filter(_=>_!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(B.payload)}variablesChangedInUrlHandler(B){this.templateVariableValueUpdated(),this.startRefresh(B.payload)}};let w=V;w.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEdit:!0};function K(B){return!!B.legend}},89167:(j,I,e)=>{"use strict";e.d(I,{G7:()=>y,Jg:()=>D,rY:()=>C});var t=e(89949),n=e.n(t),i=e(66117),s=e(62435),r=e(62247),m=e(83335),d=e(32713),o=e(39317),l=e(12308),a=e(89024),g=e(76897),c=e(43620),h=e(76543);const f={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0},b={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},v={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""},y={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},E={"heatmap-new":"heatmap"};class C{constructor(S){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},this.events=new s.F,this.restoreModel(S),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,i.Z)()}restoreModel(S){for(const M in this)f[M]||!this.hasOwnProperty(M)||S[M]||typeof this[M]!="function"&&typeof this[M]!="symbol"&&delete this[M];for(const M in S)this[M]=S[M];const x=E[this.type];x&&(this.autoMigrateFrom=this.type,this.type=x),(0,t.defaultsDeep)(this,(0,t.cloneDeep)(v)),this.ensureQueryIds()}generateNewKey(){this.key=(0,i.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const S of this.targets)S.refId||(S.refId=(0,g.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(S){this.options=S,this.configRev++,this.events.publish(new c.Wj),this.render()}updateFieldConfig(S){this.fieldConfig=S,this.configRev++,this.events.publish(new c.Wj),this.resendLastResult(),this.render()}getSaveModel(){const S={};for(const x in this)f[x]||!this.hasOwnProperty(x)||(0,t.isEqual)(this[x],v[x])||(S[x]=(0,t.cloneDeep)(this[x]));return this.type==="row"&&this.panels&&this.panels.length>0&&(S.panels=this.panels.map(x=>{if(x.libraryPanel){const{id:M,title:R,libraryPanel:O,gridPos:T}=x;return{id:M,title:R,gridPos:T,libraryPanel:{uid:O.uid,name:O.name}}}return x})),S}setIsViewing(S){this.isViewing=S}updateGridPos(S,x=!0){S.x===this.gridPos.x&&S.y===this.gridPos.y&&S.h===this.gridPos.h&&S.w===this.gridPos.w||(this.gridPos.x=S.x,this.gridPos.y=S.y,this.gridPos.w=S.w,this.gridPos.h=S.h,x&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:S,dashboardTimezone:x,timeData:M,width:R,publicDashboardAccessToken:O}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardUID:S,publicDashboardAccessToken:O,timezone:x,timeRange:M.timeRange,timeInfo:M.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(R),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?r.zj.PanelEditor:this.isViewing?r.zj.PanelViewer:r.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new d.U5)}render(){this.hasRefreshed?this.events.publish(new c._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((S,x)=>f[x]||b[x]?S:{...S,[x]:this[x]},{})}restorePanelOptions(S){const x=this.cachedPluginOptions[S];x&&(Object.keys(x.properties).map(M=>{this[M]=x.properties[M]}),this.fieldConfig=(0,m.__)(this.fieldConfig,x.fieldConfig))}applyPluginOptionDefaults(S,x){const M=(0,m.d4)({plugin:S,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:x});this.fieldConfig=M.fieldConfig,this.options=M.options}pluginLoaded(S){this.plugin=S;const x=u(S);if(this.autoMigrateFrom){const M=y[this.autoMigrateFrom]!=null,R=this.getOptionsToRemember(),O=this.autoMigrateFrom,T=this.type;this.clearPropertiesBeforePluginChange(),this.type=T,this.plugin=S,this.callPanelTypeChangeHandler(S,O,R,M)}S.onPanelMigration&&x!==this.pluginVersion&&(this.options=S.onPanelMigration(this),this.pluginVersion=x),this.applyPluginOptionDefaults(S,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const S of(0,t.keys)(this))b[S]||delete this[S];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,m.aS)(this.fieldConfig.overrides,m._k)}}callPanelTypeChangeHandler(S,x,M,R){if(S.onPanelTypeChanged){const O=R?{angular:M}:M.options;Object.assign(this.options,S.onPanelTypeChanged(this,x,O,this.fieldConfig))}}changePlugin(S){const x=S.meta.id,M=this.getOptionsToRemember(),R=this.fieldConfig,O=this.type,T=this.isAngularPlugin()||!!y[O];this.cachedPluginOptions[O]={properties:M,fieldConfig:R},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(x),this.callPanelTypeChangeHandler(S,O,M,T),this.type=x,this.plugin=S,this.configRev++,this.applyPluginOptionDefaults(S,!0),S.onPanelMigration&&(this.pluginVersion=u(S))}updateQueries(S){const{dataSource:x}=S;this.datasource={uid:x.uid,type:x.type},this.cacheTimeout=S.cacheTimeout,this.queryCachingTTL=S.queryCachingTTL,this.timeFrom=S.timeRange?.from,this.timeShift=S.timeRange?.shift,this.hideTimeOverride=S.timeRange?.hide,this.interval=S.minInterval,this.maxDataPoints=S.maxDataPoints,this.targets=S.queries,this.configRev++,this.events.publish(new c.pO)}addQuery(S){S=S||{refId:"A"},S.refId=(0,g.Hs)(this.targets),this.targets.push(S),this.configRev++}changeQuery(S,x){S.refId=this.targets[x].refId,this.configRev++,this.targets=this.targets.map((M,R)=>R===x?S:M)}getEditClone(){const S=this.getSaveModel(),x=new C(S);x.isEditing=!0,x.plugin=this.plugin;const M=this.getQueryRunner();return x.getQueryRunner().useLastResultFrom(M),x}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:l.default.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new h.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(S){this.transformations=S,this.resendLastResult(),this.configRev++,this.events.publish(new c.Xw)}setProperty(S,x){this[S]=x,this.configRev++,S==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(S,x,M){const R=this.getQueryRunner().getLastRequest(),O=Object.assign({},this.scopedVars,R?.scopedVars,x);return(0,o.J)().replace(S,O,M)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(S){for(const[x,M]of Object.entries(S.model)){switch(x){case"id":case"gridPos":case"libraryPanel":continue}this[x]=M}this.libraryPanel=S}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function u(P){return P&&P.meta.info.version?P.meta.info.version:l.default.buildInfo.version}function D(P){const S={};return Object.entries(P).filter(([x,M])=>!f[x]&&P.hasOwnProperty(x)&&!(0,t.isEqual)(M,v[x])).forEach(([x,M])=>{S[x]=M}),(0,a.Xh)(S)}},42997:(j,I,e)=>{"use strict";e.d(I,{$j:()=>y,Qk:()=>b,RF:()=>f,Yq:()=>v,f4:()=>D,fG:()=>E,lw:()=>C,qm:()=>c,tM:()=>u});var t=e(73289),n=e(33877),i=e(73807),s=e(284),r=e(47875),m=e(83341),d=e(30235),o=e(4684),l=e(75261),a=e(26858),g=e(10974);function c(P){return async S=>{const x=await(0,t.i)().get(`/api/dashboards/id/${P}/permissions`);S((0,g.O0)(x))}}function h(P){return{userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}}function f(P,S,x){return async(M,R)=>{const{dashboard:O}=R(),T=[];for(const U of O.permissions){if(U.inherited)continue;const L=h(U);S===U&&(L.permission=x),T.push(L)}await(0,t.i)().post(`/api/dashboards/id/${P}/permissions`,{items:T}),await M(c(P))}}function b(P,S){return async(x,M)=>{const R=M().dashboard,O=[];for(const T of R.permissions)T.inherited||T===S||O.push(h(T));await(0,t.i)().post(`/api/dashboards/id/${P}/permissions`,{items:O}),await x(c(P))}}function v(P,S){return async(x,M)=>{const{dashboard:R}=M(),O=[];for(const T of R.permissions)T.inherited||O.push(h(T));O.push({userId:S.userId,teamId:S.teamId,role:S.role,permission:S.permission}),await(0,t.i)().post(`/api/dashboards/id/${P}/permissions`,{items:O}),await x(c(P))}}function y(P,S){return async x=>{await(0,t.i)().post("/api/dashboards/import",P),x((0,n.$l)((0,i.AT)("Dashboard Imported",S))),x((0,d.m3)())}}function E(P){return async S=>{await(0,t.i)().delete(`/api/dashboards/uid/${P}`),S((0,d.m3)())}}const C=()=>(P,S)=>{const M=S().dashboard.getModel();M&&(M.destroy(),P((0,o.wX)(M.uid))),(0,a.$t)().stopAutoRefresh(),P((0,g.sG)()),P((0,r.Vl)()),s.H.leave(),(0,l.h4)().setCurrent(void 0)},u=P=>S=>{S((0,m.YT)(P)),(0,a.$t)().refreshTimeModel()},D=P=>S=>{S((0,m.zW)(P)),(0,a.$t)().refreshTimeModel()}},73170:(j,I,e)=>{"use strict";e.d(I,{f:()=>t.f,r:()=>n.rY});var t=e(85991),n=e(89167)},54195:(j,I,e)=>{"use strict";e.d(I,{ZQ:()=>K,mV:()=>w,f1:()=>_,$M:()=>W});var t=e(94469),n=e(99633),i=e(84714),s=e(26129),r=e(34667),m=e(73289),d=e(33877),o=e(5933),l=e(73807),a=e(45937),g=e(56812),c=e(46823),h=e(75261),f=e(26858),b=e(35381),v=e(284),y=e(79517),E=e(81587),C=e(18771),u=e(77972),D=e(4684),P=e(51824),S=e(86312);function x(k,A){const z=k.templating.list.map(H=>H.type).reduce((H,Q)=>(H[M(Q)]=1+H[M(Q)]||1,H),{});(0,S.ff)("dashboards_init_dashboard_completed",{uid:k.uid,title:k.title,theme:k.style,schemaVersion:k.schemaVersion,version_before_migration:A,panels_count:k.panels.length,...z})}const M=k=>`variable_type_${k}_count`;var R=e(85991),O=e(9175);function T(k){const A={dashboardId:k.id,dashboardName:k.title,dashboardUid:k.uid,folderName:k.meta.folderTitle,eventName:O.ct.DashboardView};(0,S.r_)(A)}var U=e(10974);async function L(k,A,z){const H=g.Z.getObject(B);if(H)return _(),H;try{switch(k.routeName){case C.DashboardRoutes.Home:{const Q=await a.ae.get("/api/dashboards/home");if(Q.redirectUri){const X=t.u.stripBaseFromUrl(Q.redirectUri);return s.E1.replace(X),null}return Q.meta.canSave=!1,Q.meta.canShare=!1,Q.meta.canStar=!1,Q}case C.DashboardRoutes.Public:return await c.pD.loadDashboard("public",k.urlSlug,k.accessToken);case C.DashboardRoutes.Embedded:if(k.dashboardDto)return k.dashboardDto;case C.DashboardRoutes.Normal:{const Q=await c.pD.loadDashboard(k.urlType,k.urlSlug,k.urlUid);if(r.config.featureToggles.nestedFolders&&Q.meta.folderUid&&await A((0,b.Pb)(Q.meta.folderUid)),k.fixUrl&&Q.meta.url&&!y.r0.isPlaying){const X=t.u.stripBaseFromUrl(Q.meta.url),te=s.E1.getLocation().pathname;X!==te&&(s.E1.replace({...s.E1.getLocation(),pathname:X}),console.log("not correct url correcting",X,te))}return Q}case C.DashboardRoutes.New:return r.config.featureToggles.nestedFolders&&k.urlFolderUid&&await A((0,b.Pb)(k.urlFolderUid)),K(k.urlFolderUid,k.panelType);case C.DashboardRoutes.Path:{const Q=k.urlSlug??"";return await c.pD.loadDashboard(C.DashboardRoutes.Path,Q,Q)}default:throw{message:"Unknown route "+k.routeName}}}catch(Q){return(0,m.kW)(Q)&&Q.cancelled||(A((0,U.jA)({message:"Failed to fetch dashboard",error:Q})),console.error(Q)),null}}const V=(k,A={})=>(k.forEach(z=>{z.panels?V(z.panels,A):z.targets&&z.targets.forEach(H=>{H.datasource?.type&&(A[H.datasource.type]?A[H.datasource.type].push(H):A[H.datasource.type]=[H])})}),A);function w(k){return async(A,z)=>{A((0,U.sf)());const H=await L(k,A,z),Q=H?.dashboard?.version;if(!H)return;A((0,U.Nv)());let X;try{X=new R.f(H.dashboard,H.meta)}catch(ne){A((0,U.jA)({message:"Failed create dashboard model",error:ne})),console.error(ne);return}const te=z(),oe=s.E1.getSearchObject();oe.orgId||s.E1.partial({orgId:te.user.orgId},!0);const Z=(0,f.$t)();(0,h.h4)().setCurrent(X),Z.init(X);const ce=(0,E.mn)(k.urlUid??X.uid);if(await A((0,D.LX)(ce,X)),(0,u.Tl)({dashboard:X,timeSrv:Z}).run({dashboard:X,range:Z.timeRange()}),(0,P.cp)(z())===ce&&z().dashboard.initPhase===C.DashboardInitPhase.Services){try{X.processRepeats(),oe.autofitpanels&&X.autoFitPanels(window.innerHeight,oe.kiosk),k.keybindingSrv.setupDashboardBindings(X)}catch(ne){ne instanceof Error&&A((0,d.$l)((0,l.t_)("Dashboard init failed",ne))),console.error(ne)}k.routeName!==C.DashboardRoutes.New?(T(X),v.H.watch(X.uid)):v.H.leave(),X.weekStart!==""?(0,n.Ls)(X.weekStart):(0,n.Ls)(r.config.bootData.user.weekStart),o.Z.publish(new i.Pl({dashboardId:X.uid,orgId:te.user.orgId,userId:te.user.user?.id,grafanaVersion:r.config.buildInfo.version,queries:V(X.panels)})),x(X,Q),A((0,U.dS)(X))}}}function K(k,A){const z=r.config.featureToggles.emptyDashboardPage?[]:[{type:A??"add-panel",gridPos:{x:0,y:0,w:12,h:9},title:"Panel Title"}],H={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{title:"New dashboard",panels:z}};return k&&(H.meta.folderUid=k),H}const B="DASHBOARD_FROM_LS_KEY";function W(k){g.Z.setObject(B,k)}function _(){g.Z.delete(B)}},10974:(j,I,e)=>{"use strict";e.d(I,{Nv:()=>c,O0:()=>o,Rd:()=>b,ZP:()=>y,dS:()=>g,jA:()=>a,sG:()=>h,sf:()=>l,tq:()=>f});var t=e(34099),n=e(48414),i=e(58198),s=e(18771),r=e(85991);const m={initPhase:s.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null,initialDatasource:void 0},d=(0,t.oM)({name:"dashboard",initialState:m,reducers:{loadDashboardPermissions:(E,C)=>{E.permissions=(0,i.A)(C.payload)},dashboardInitFetching:E=>{E.initPhase=s.DashboardInitPhase.Fetching},dashboardInitServices:E=>{E.initPhase=s.DashboardInitPhase.Services},dashboardInitCompleted:(E,C)=>{E.getModel=()=>C.payload,E.initPhase=s.DashboardInitPhase.Completed},dashboardInitFailed:(E,C)=>{E.initPhase=s.DashboardInitPhase.Failed,E.initError=C.payload,E.getModel=()=>new r.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:E=>{E.initPhase=s.DashboardInitPhase.NotStarted,E.initError=null,E.getModel=()=>null},addPanel:(E,C)=>{},setInitialDatasource:(E,C)=>{E.initialDatasource=C.payload}}}),{loadDashboardPermissions:o,dashboardInitFetching:l,dashboardInitFailed:a,dashboardInitCompleted:g,dashboardInitServices:c,cleanUpDashboard:h,addPanel:f,setInitialDatasource:b}=d.actions,y={dashboard:d.reducer}},8594:(j,I,e)=>{"use strict";e.d(I,{AI:()=>o,Dh:()=>g,LU:()=>d,L_:()=>l,RB:()=>a,uZ:()=>c});var t=e(89949),n=e.n(t),i=e(12308),s=e(97957),r=e(56812),m=e(22377);function d(h,f){const b={type:"timeseries",title:"Panel Title",gridPos:(0,m.lg)(h),datasource:f?{uid:f}:null,isNew:!0};return h.addPanel(b),b.id}function o(h,f){const b={type:f,title:"Widget title",gridPos:(0,m.lg)(h),datasource:null,isNew:!0};return h.addPanel(b),b.id}function l(h){const f={type:"row",title:"Row title",gridPos:{x:0,y:0}};h.addPanel(f)}function a(h){const f={type:"add-library-panel",gridPos:(0,m.lg)(h)};h.addPanel(f)}function g(h,f){if(!f)return;const b=(0,m.lg)(h),v={type:f.id,title:"Panel Title",gridPos:{x:b.x,y:b.y,w:f.defaults.gridPos.w,h:f.defaults.gridPos.h}};f.defaults&&((0,t.defaults)(v,f.defaults),v.title=f.defaults.title,r.Z.delete(s.zF)),h.addPanel(v)}function c(){const h=(0,t.chain)(i.default.panels).filter({hideFromList:!1}).map(b=>b).value(),f=r.Z.get(s.zF);if(f){const b=JSON.parse(f),v=(0,t.find)(h,{id:b.type});if(v){const y=(0,t.cloneDeep)(v);return y.name=b.title,y.sort=-1,{...y,defaults:{...b}}}}}},69887:(j,I,e)=>{"use strict";e.d(I,{y:()=>a});var t=e(32053),n=e(8508),i=e(46580),s=e(53933),r=e(21708),m=e(12308),d=e(75049),o=e(26858),l=e(22377);function a(g,c){const h=(0,t.F9)(g.snapshotData),f=new d.g,b={dashboard:c,range:(0,n.JK)()},v=f.canWork(b)?f.getAnnotationsInSnapshot(c,g.id):[],y=[(0,i.P)(v)];return{timeRange:(0,l.W1)(g,(0,o.$t)().timeRange()).timeRange,state:s.Gu.Done,series:(0,r.SM)({data:h,fieldConfig:{defaults:{},overrides:[]},replaceVariables:g.replaceVariables,fieldConfigRegistry:g.plugin.fieldConfigRegistry,theme:m.config.theme2,timeZone:c.getTimezone()}),annotations:y}}},22377:(j,I,e)=>{"use strict";e.d(I,{Kq:()=>P,Po:()=>D,W1:()=>R,WJ:()=>E,bY:()=>u,jN:()=>C,lg:()=>U,oe:()=>S,qw:()=>M});var t=e(89949),n=e.n(t),i=e(3935),s=e(76305),r=e(1726),m=e(39317),d=e(5933),o=e(12308),l=e(97957),a=e(56812),g=e(19067),c=e(89167),h=e(14673),f=e(97816),b=e(32195),v=e(84749),y=e(43620);const E=(L,V,w)=>{if(w!==!1){const K=V.alert&&!o.default.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,B=V.alert?"YES":void 0;d.Z.publish(new y.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:K,icon:"trash-alt",confirmText:B,yesText:"Remove",onConfirm:()=>E(L,V,!1)}));return}L.removePanel(V),(0,v.WI)((0,b.qj)(V.key))},C=(L,V)=>{L.duplicatePanel(V)},u=L=>{let V=L;L instanceof c.rY&&(V=L.getSaveModel()),a.Z.set(l.zF,JSON.stringify(V)),d.Z.emit(i.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},D=(L,V)=>{d.Z.publish(new y.Dn({component:g.ShareModal,props:{dashboard:L,panel:V}}))},P=(L,V)=>{d.Z.publish(new y.Dn({component:h.c,props:{panel:V,initialFolderUid:L.meta.folderUid,isOpen:!0}}))},S=L=>{d.Z.publish(new y.Dn({component:f.i,props:{onConfirm:()=>L.unlinkLibraryPanel(),isOpen:!0}}))},x=L=>{L.refresh()},M=L=>{const V={...L.options};V.legend.showLegend===!0?V.legend.showLegend=!1:V.legend.showLegend=!0,L.updateOptions(V)};function R(L,V){const w={timeInfo:"",timeRange:V};if(L.timeFrom){const K=(0,m.J)().replace(L.timeFrom,L.scopedVars),B=s.describeTextRange(K);if(B.invalid)return w.timeInfo="invalid time override",w;if((0,t.isString)(V.raw.from)){const W=r.parse(B.from);w.timeInfo=B.display,w.timeRange={from:W,to:r.parse(B.to),raw:{from:B.from,to:B.to}}}}if(L.timeShift){const K=(0,m.J)().replace(L.timeShift,L.scopedVars);if(s.describeTextRange(K).invalid)return w.timeInfo="invalid timeshift",w;const W="-"+K;w.timeInfo+=" timeshift "+W;const _=r.parseDateMath(W,w.timeRange.from,!1),k=r.parseDateMath(W,w.timeRange.to,!0);w.timeRange={from:_,to:k,raw:{from:_,to:k}}}return L.hideTimeOverride&&(w.timeInfo=""),w}function O(L){const w=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return L.maxDataPoints?L.maxDataPoints:Math.ceil(w*(L.gridPos.w/24))}function T(L,V){const w=L.plugin&&L.plugin.noPadding?0:config.theme.panelPadding*2,K=L.hasTitle()?config.theme.panelHeaderHeight:0;return V-K-w-PANEL_BORDER}function U(L){for(const w of L.panelIterator())w.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},56074:(j,I,e)=>{"use strict";e.d(I,{O:()=>i});var t=e(99633),n=e(1726);const i=(s,r)=>{const m={from:(0,t.v9)(s.from)?(0,t.CQ)(s.from):s.from,to:(0,t.v9)(s.to)?(0,t.CQ)(s.to):s.to},d=r?r.getTimezone():void 0;return{from:n.parse(m.from,!1,d,r?.fiscalYearStartMonth),to:n.parse(m.to,!0,d,r?.fiscalYearStartMonth),raw:m}}},40397:(j,I,e)=>{"use strict";e.d(I,{DK:()=>m,eM:()=>r,dg:()=>d});var t=e(48592),n=e(32053);function i(o){const l=new Set;return Object.keys(o).forEach(a=>{o[a].forEach(g=>{l.add(g)})}),l}function s(o){const l=Array.from(i(o));return l.length===1?l[0]:`${l.slice(0,-1).join(", ")} or ${l.slice(-1)}`}function r(o){return new t.y(l=>{let a=0;Promise.all([e.e(5961),e.e(1378)]).then(e.bind(e,45961)).then(g=>{o.forEach(c=>{const h=new FileReader;h.readAsArrayBuffer(c),h.onload=()=>{const f=h.result;if(f&&f instanceof ArrayBuffer){if(c.type==="application/json"){const b=new TextDecoder("utf-8"),v=JSON.parse(b.decode(f));l.next({dataFrames:[(0,n.g0)(v)],file:c})}else l.next({dataFrames:g.readSpreadsheet(f),file:c});++a>=o.length&&l.complete()}}})}).catch(()=>{throw"Failed to load sheets module"})})}const m={"text/plain":[".csv",".txt"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"application/vnd.apple.numbers":[".numbers"],"application/vnd.oasis.opendocument.spreadsheet":[".ods"],"application/json":[".json"]},d=5e5},34518:(j,I,e)=>{"use strict";e.d(I,{P:()=>m});var t=e(27702),n=e(66670),i=e(66574),s=e(90131),r=e(18771);function m({variant:d,onClick:o}){const l=i.contextSrv.hasPermission(r.AccessControlAction.DataSourcesCreate),a=s.Z.DataSourcesNew;return t.createElement(n.Qj,{variant:d||"primary",href:a,disabled:!l,tooltip:l?void 0:"You do not have permission to configure new data sources",onClick:o,target:"_blank"},"Configure a new data source")}},42784:(j,I,e)=>{"use strict";e.d(I,{F:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(50230),r=e(86004);function m({ds:o,onClick:l,selected:a,description:g,...c}){const h=(0,i.wW)(d);return n.createElement(s.Z,{key:o.uid,onClick:l,className:(0,t.cx)(h.card,a?h.selected:void 0),...c},n.createElement(s.Z.Heading,{className:h.heading},n.createElement("div",{className:h.headingContent},n.createElement("span",{className:h.name},o.name," ",o.isDefault?n.createElement(r.P,{tags:["default"]}):null),n.createElement("small",{className:h.type},g||o.meta.name))),n.createElement(s.Z.Figure,{className:h.logo},n.createElement("img",{src:o.meta.info.logos.small,alt:`${o.meta.name} Logo`})))}function d(o){return{card:(0,t.css)`
      cursor: pointer;
      background-color: ${o.colors.background.primary};
      border-bottom: 1px solid ${o.colors.border.weak};
      // Move to list component
      margin-bottom: 0;
      border-radius: 0;
      padding: ${o.spacing(1)};
    `,heading:(0,t.css)`
      width: 100%;
      overflow: hidden;
      // This is needed to enable ellipsis when text overlfows
      > button {
        width: 100%;
      }
    `,headingContent:(0,t.css)`
      color: ${o.colors.text.secondary};
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      justify-content: space-between;
    `,logo:(0,t.css)`
      width: 32px;
      height: 32px;
      padding: ${o.spacing(0,1)};
      display: flex;
      align-items: center;

      > img {
        max-height: 100%;
        min-width: 24px;
      }
    `,name:(0,t.css)`
      color: ${o.colors.text.primary};
      display: flex;
      gap: ${o.spacing(2)};
    `,type:(0,t.css)`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      display: flex;
      align-items: center;
    `,separator:(0,t.css)`
      margin: 0 ${o.spacing(1)};
      color: ${o.colors.border.weak};
    `,selected:(0,t.css)`
      background-color: ${o.colors.background.secondary};
    `,meta:(0,t.css)`
      display: block;
      overflow-wrap: unset;
      white-space: nowrap;
      width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    `}}},31190:(j,I,e)=>{"use strict";e.d(I,{K:()=>l});var t=e(42844),n=e(27702),i=e(39317),s=e(66310),r=e(66691),m=e(34518),d=e(42784),o=e(10520);function l(f){const b=(0,n.useRef)(null),[v,y]=(0,r.wv)({keyboardEvents:f.keyboardEvents,containerRef:b}),E=(0,s.l4)(),C=h(E,y),{className:u,current:D,onChange:P,enableKeyboardNavigation:S,onClickEmptyStateCTA:x}=f,M=(0,r.Hq)({alerting:f.alerting,annotations:f.annotations,dashboard:f.dashboard,logs:f.logs,metrics:f.metrics,mixed:f.mixed,pluginId:f.pluginId,tracing:f.tracing,type:f.type,variables:f.variables}),[R,O]=(0,r.BM)(),T=f.filter?M.filter(f.filter):M;return n.createElement("div",{ref:b,className:(0,t.cx)(u,C.container),"data-testid":"data-sources-list"},T.length===0&&n.createElement(a,{className:C.emptyState,onClickCTA:x}),T.sort((0,o.Tw)(D,R,c())).map(U=>n.createElement(d.F,{"data-testid":"data-source-card",key:U.uid,ds:U,onClick:()=>{O(U),P(U)},selected:(0,o.TX)(U,D),...S?v:{}})))}function a({className:f,onClickCTA:b}){const v=(0,s.wW)(g);return n.createElement("div",{className:(0,t.cx)(f,v.container)},n.createElement("p",{className:v.message},"No data sources found"),n.createElement(m.P,{onClick:b}))}function g(f){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    `,message:(0,t.css)`
      margin-bottom: ${f.spacing(3)};
    `}}function c(){return(0,i.J)().getVariables().filter(b=>b.type==="datasource").map(b=>`\${${b.id}}`)}function h(f,b){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      ${b} {
        background-color: ${f.colors.background.secondary};
      }
    `,emptyState:(0,t.css)`
      height: 100%;
      flex: 1;
    `}}},56250:(j,I,e)=>{"use strict";e.d(I,{a:()=>S});var t=e(42844),n=e(89949),i=e(27702),s=e(86312),r=e(34667),m=e(66310),d=e(13741),o=e(1128),l=e(73453),a=e(29372),g=e(79399),c=e(40397),h=e(75506),f=e(66691),b=e(34518),v=e(42784),y=e(10520);const E={grafana:"Discover visualizations using mock data","-- Mixed --":"Use multiple data sources","-- Dashboard --":"Reuse query results from other visualizations"};function C({className:M,current:R,onChange:O,tracing:T,dashboard:U,mixed:L,metrics:V,type:w,annotations:K,variables:B,alerting:W,pluginId:_,logs:k,filter:A}){const H=(0,f.Hq)({tracing:T,dashboard:U,mixed:L,metrics:V,type:w,annotations:K,variables:B,alerting:W,pluginId:_,logs:k}).filter(Q=>(A?A?.(Q):!0)&&!!Q.meta.builtIn);return i.createElement("div",{className:M,"data-testid":"built-in-data-sources-list"},H.map(Q=>i.createElement(v.F,{key:Q.uid,ds:Q,description:E[Q.uid],selected:(0,y.TX)(Q,R),onClick:()=>O(Q)})))}var u=e(31190);const D="dashboards_dspickermodal_clicked",P={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss"};function S({tracing:M,dashboard:R,mixed:O,metrics:T,type:U,annotations:L,variables:V,alerting:w,pluginId:K,logs:B,uploadFile:W,filter:_,onChange:k,current:A,onDismiss:z,reportedInteractionFrom:H}){const Q=(0,m.wW)(x),[X,te]=(0,i.useState)(""),oe=H||"modal",Z=()=>{z(),(0,s.ff)(D,{item:P.DISMISS,src:oe})},le=re=>{k(re),(0,s.ff)(D,{item:P.SELECT_DS,ds_type:re.type,src:oe})},ce=i.useMemo(()=>(0,n.once)(()=>{(0,s.ff)(D,{item:"search",src:oe})}),[oe]),q=(0,f.wP)("-- Grafana --"),ne=(0,h.k)((re,ie)=>{q&&(k(q,[re]),(0,s.ff)(D,{item:P.UPLOAD_FILE,src:oe}),ie.length<1&&z())}),pe=({className:re})=>i.createElement(C,{className:re,onChange:le,current:A,filter:_,variables:V,tracing:M,metrics:T,type:U,annotations:L,alerting:w,pluginId:K,logs:B,dashboard:R,mixed:O});return i.createElement(d.u,{title:"Select data source",closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:Q.modal,contentClassName:Q.modalContent,onClickBackdrop:Z,onDismiss:Z},i.createElement("div",{className:Q.leftColumn},i.createElement(o.I,{type:"search",autoFocus:!0,className:Q.searchInput,value:X,prefix:i.createElement(l.J,{name:"search"}),placeholder:"Search data source",onChange:re=>{te(re.currentTarget.value),ce()}}),i.createElement(a.$,null,i.createElement(u.K,{onChange:le,current:A,onClickEmptyStateCTA:()=>(0,s.ff)(D,{item:P.CONFIG_NEW_DS_EMPTY_STATE,src:oe}),filter:re=>(_?_?.(re):!0)&&(0,y.qW)(re,X)&&!re.meta.builtIn,variables:V,tracing:M,metrics:T,type:U,annotations:L,alerting:w,pluginId:K,logs:B,dashboard:R,mixed:O}),i.createElement(pe,{className:Q.appendBuiltInDataSourcesList}))),i.createElement("div",{className:Q.rightColumn},i.createElement("div",{className:Q.builtInDataSources},i.createElement(a.$,{className:Q.builtInDataSourcesList},i.createElement(pe,null)),W&&r.config.featureToggles.editPanelCSVDragAndDrop&&i.createElement(g.Yo,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:c.dg,multiple:!1,accept:c.DK,onDrop:ne}},i.createElement(g.A_,null))),i.createElement("div",{className:Q.newDSSection},i.createElement("span",{className:Q.newDSDescription},"Open a new tab and configure a data source"),i.createElement(b.P,{variant:"secondary",onClick:()=>{(0,s.ff)(D,{item:P.CONFIG_NEW_DS,src:oe}),z()}}))))}function x(M){return{modal:(0,t.css)`
      width: 80%;
      height: 80%;
      max-width: 1200px;
      max-height: 900px;

      ${M.breakpoints.down("md")} {
        width: 100%;
      }
    `,modalContent:(0,t.css)`
      display: flex;
      flex-direction: row;
      height: 100%;

      ${M.breakpoints.down("md")} {
        flex-direction: column;
      }
    `,leftColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      padding-right: ${M.spacing(4)};
      border-right: 1px solid ${M.colors.border.weak};

      ${M.breakpoints.down("md")} {
        width: 100%;
        border-right: 0;
        padding-right: 0;
        flex: 1;
        overflow-y: auto;
      }
    `,rightColumn:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 50%;
      height: 100%;
      justify-items: space-evenly;
      align-items: stretch;
      padding-left: ${M.spacing(4)};

      ${M.breakpoints.down("md")} {
        width: 100%;
        padding-left: 0;
        flex: 0;
      }
    `,builtInDataSources:(0,t.css)`
      flex: 1 1;
      margin-bottom: ${M.spacing(4)};

      ${M.breakpoints.down("md")} {
        flex: 0;
      }
    `,builtInDataSourcesList:(0,t.css)`
      ${M.breakpoints.down("md")} {
        display: none;
        margin-bottom: 0;
      }

      margin-bottom: ${M.spacing(4)};
    `,appendBuiltInDataSourcesList:(0,t.css)`
      ${M.breakpoints.up("md")} {
        display: none;
      }
    `,newDSSection:(0,t.css)`
      display: flex;
      flex-direction: row;
      width: 100%;
      justify-content: space-between;
      align-items: center;
    `,newDSDescription:(0,t.css)`
      flex: 1 0;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      color: ${M.colors.text.secondary};
    `,searchInput:(0,t.css)`
      width: 100%;
      min-height: 32px;
      margin-bottom: ${M.spacing(1)};
    `}}},53229:(j,I,e)=>{"use strict";e.d(I,{q:()=>H});var t=e(27702),n=e(94372),i=e(12308),s=e(42844),r=e(45809),m=e(91546),d=e(6714),o=e(76566),l=e(74639),a=e(86312),g=e(66310),c=e(1128),h=e(73453),f=e(52995),b=e(29372),v=e(60729),y=e(66670),E=e(63419),C=e(89050),u=e(66691),D=e(31190);function P(Q){const{dataSource:X}=Q,te=(0,g.wW)(x);return X?t.createElement("img",{className:te.pickerDSLogo,alt:`${X.meta.name} logo`,src:X.meta.info.logos.small}):S()}function S(){const Q=(0,g.wW)(x);return t.createElement("div",{className:Q.pickerDSLogo})}function x(Q){return{pickerDSLogo:(0,s.css)`
      height: 20px;
      width: 20px;
    `}}var M=e(56250),R=e(77696);const O=20,T=200,U={name:"maxSize",enabled:!0,phase:"main",requires:["offset","preventOverflow","flip"],fn({state:Q,name:X,options:te}){const oe=(0,R.Z)(Q,te),{x:Z,y:le}=Q.modifiersData.preventOverflow||{x:0,y:0},{width:ce,height:q}=Q.rects.popper,{width:ne}=Q.rects.reference,[pe]=Q.placement.split("-"),re=pe==="left"?"left":"right",ie=pe==="top"?"top":"bottom";Q.modifiersData[X]={maxWidth:ce-oe[re]-Z,maxHeight:q-oe[ie]-le,minWidth:ne}}},L={name:"applyMaxSize",enabled:!0,phase:"beforeWrite",requires:["maxSize"],fn({state:Q}){const{maxHeight:X,maxWidth:te,minWidth:oe}=Q.modifiersData.maxSize;Q.styles.popper.maxHeight??=`${X-O}px`,Q.styles.popper.minHeight??=`${T}px`,Q.styles.popper.maxWidth??=te,Q.styles.popper.minWidth??=oe}};var V=e(10520);const w="dashboards_dspicker_clicked",K={OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state"};function B(Q){const{current:X,onChange:te,hideTextValue:oe=!1,width:Z,inputId:le,noDefault:ce=!1,disabled:q=!1,placeholder:ne="Select data source",...pe}=Q,re=(0,g.wW)(he=>W(he,Q)),[ie,Se]=(0,t.useState)(!1),[ye,Ce]=(0,t.useState)(!1),[de,we]=(0,t.useState)(""),{onKeyDown:_e,keyboardEvents:Je}=(0,E.A)(),Ue=(0,t.useRef)(null),[$e,Qe]=(0,t.useState)(),[tt,lt]=(0,t.useState)(),[Me,De]=(0,t.useState)(),We=(0,u.wP)(X),qe=(0,u.wP)("-- Grafana --"),st=!X&&ce?void 0:We,dt=de&&ie?t.createElement(S,null):t.createElement(P,{dataSource:st}),Tt=(0,o.D)($e,tt,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}},U,L]}),Nt=(0,t.useCallback)(()=>{we(""),Se(!1),$e?.focus()},[Se,$e]),{overlayProps:Bt,underlayProps:yt}=(0,d.Ir)({onClose:Nt,isDismissable:!0,isOpen:ie,shouldCloseOnInteractOutside:he=>$e?!$e.isSameNode(he):!1},Ue),{dialogProps:ft}=(0,r.R)({"aria-label":"Opened data source picker list"},Ue);function ct(){(0,a.ff)(w,{item:K.OPEN_DROPDOWN}),Se(!0),$e?.focus()}function ge(){qe&&te(qe,[C.ip])}function Be(he){he.key==="Tab"&&!he.shiftKey&&ie&&(he.preventDefault(),Me?.focus()),he.key==="Tab"&&he.shiftKey&&ie&&Nt(),_e(he)}function Le(he){he.shiftKey?(he.preventDefault(),$e?.focus()):Nt()}return(0,t.useEffect)(()=>{const he=Je.subscribe({next:He=>{switch(He?.code){case"ArrowDown":ct(),He.preventDefault();break;case"ArrowUp":ct(),He.preventDefault();break;case"Escape":Nt(),He.preventDefault();break}}});return()=>he.unsubscribe()}),t.createElement("div",{className:re.container,"data-testid":l.wl.components.DataSourcePicker.container},t.createElement("div",{className:re.trigger,onClick:ct},t.createElement(c.I,{id:le||"data-source-picker",className:ye?void 0:re.input,"data-testid":l.wl.components.DataSourcePicker.inputV2,"aria-label":"Select a data source",prefix:st?dt:void 0,suffix:t.createElement(h.J,{name:ie?"search":"angle-down"}),placeholder:oe?"":(0,V.Ve)(st)||ne,onFocus:()=>{Ce(!0)},onBlur:()=>{Ce(!1)},onKeyDown:Be,value:de,onChange:he=>{ct(),we(he.currentTarget.value)},ref:Qe,disabled:q})),ie?t.createElement(f.h_,null,t.createElement("div",{...yt}),t.createElement("div",{ref:Ue,...Bt,...ft},t.createElement(_,{...pe,...Tt.attributes.popper,style:Tt.styles.popper,ref:lt,footerRef:De,current:st,filterTerm:de,keyboardEvents:Je,onChange:(he,He)=>{Nt(),he.uid!==st?.uid&&(te(he,He),(0,a.ff)(w,{item:K.SELECT_DS,ds_type:he.type}))},onClose:Nt,onClickAddCSV:ge,onDismiss:Nt,onNavigateOutsiteFooter:Le}))):null)}function W(Q,X){return{container:(0,s.css)`
      position: relative;
      cursor: ${X.disabled?"not-allowed":"pointer"};
      width: ${Q.spacing(X.width||"auto")};
    `,trigger:(0,s.css)`
      cursor: pointer;
      ${X.disabled&&"pointer-events: none;"}
    `,input:(0,s.css)`
      input::placeholder {
        color: ${X.disabled?Q.colors.action.disabledText:Q.colors.text.primary};
      }
    `}}const _=t.forwardRef((Q,X)=>{const{filterTerm:te,onChange:oe,onClose:Z,onClickAddCSV:le,current:ce,filter:q}=Q,ne=(0,t.useCallback)(ie=>{oe(ie)},[oe]),pe=(0,t.useCallback)(()=>{le?.(),Z(),(0,a.ff)(w,{item:K.ADD_FILE})},[le,Z]),re=(0,g.wW)(k);return t.createElement("div",{style:Q.style,ref:X,className:re.container},t.createElement(b.$,null,t.createElement(D.K,{...Q,enableKeyboardNavigation:!0,className:re.dataSourceList,current:ce,onChange:ne,filter:ie=>(q?q?.(ie):!0)&&(0,V.qW)(ie,te),onClickEmptyStateCTA:()=>(0,a.ff)(w,{item:K.CONFIG_NEW_DS_EMPTY_STATE})})),t.createElement(m.MT,null,t.createElement(A,{...Q,onClickAddCSV:pe,onChange:ne,onNavigateOutsiteFooter:Q.onNavigateOutsiteFooter})))});_.displayName="PickerContent";function k(Q){return{container:(0,s.css)`
      display: flex;
      flex-direction: column;
      background: ${Q.colors.background.primary};
      box-shadow: ${Q.shadows.z3};
    `,picker:(0,s.css)`
      background: ${Q.colors.background.secondary};
    `,dataSourceList:(0,s.css)`
      flex: 1;
    `,footer:(0,s.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${Q.spacing(1.5)};
      border-top: 1px solid ${Q.colors.border.weak};
      background-color: ${Q.colors.background.secondary};
    `}}function A({onClose:Q,onChange:X,onClickAddCSV:te,...oe}){const Z=(0,g.wW)(z),le=oe.uploadFile&&i.default.featureToggles.editPanelCSVDragAndDrop,ce=ne=>{ne.key==="Tab"&&oe.onNavigateOutsiteFooter(ne)},q=ne=>{ne.key==="Tab"&&ne.shiftKey&&oe.onNavigateOutsiteFooter(ne)};return t.createElement("div",{className:Z.footer},t.createElement(v.JY,null,({showModal:ne,hideModal:pe})=>t.createElement(y.zx,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{Q(),ne(M.a,{reportedInteractionFrom:"ds_picker",tracing:oe.tracing,dashboard:oe.dashboard,mixed:oe.mixed,metrics:oe.metrics,type:oe.type,annotations:oe.annotations,variables:oe.variables,alerting:oe.alerting,pluginId:oe.pluginId,logs:oe.logs,filter:oe.filter,uploadFile:oe.uploadFile,current:oe.current,onDismiss:pe,onChange:(re,ie)=>{X(re,ie),pe()}}),(0,a.ff)(w,{item:K.OPEN_ADVANCED_DS_PICKER})},ref:oe.footerRef,onKeyDown:le?q:ce},"Open advanced data source picker",t.createElement(h.J,{name:"arrow-right"}))),le&&t.createElement(y.zx,{variant:"secondary",size:"sm",onClick:te,onKeyDown:ce},"Add csv or spreadsheet"))}function z(Q){return{footer:(0,s.css)`
      flex: 0;
      display: flex;
      flex-direction: row-reverse;
      justify-content: space-between;
      padding: ${Q.spacing(1.5)};
      border-top: 1px solid ${Q.colors.border.weak};
      background-color: ${Q.colors.background.secondary};
    `}}function H(Q){return i.config.featureToggles.advancedDataSourcePicker?t.createElement(B,{...Q}):t.createElement(n.q,{...Q})}},10520:(j,I,e)=>{"use strict";e.d(I,{TX:()=>t,Tw:()=>i,Ve:()=>n,qW:()=>s});function t(r,m){return!r||!m?!1:typeof m=="string"?r.uid===m:r.uid===m.uid}function n(r){if(r){if(typeof r=="string")return`${r} - not found`;if("name"in r)return r.name;if(r.uid)return`${r.uid} - not found`}}function i(r,m,d){return(l,a)=>{const g=l.name.toUpperCase(),c=a.name.toUpperCase();if(r&&t(l,r))return-1;if(r&&t(a,r))return 1;const h=m.indexOf(l.uid),f=m.indexOf(a.uid);if(h>-1&&h>f)return-1;if(f>-1&&f>h)return 1;const b=d.includes(l.uid),v=d.includes(a.uid);return b&&!v?-1:v&&!b||l.meta.builtIn&&!a.meta.builtIn?1:a.meta.builtIn&&!l.meta.builtIn||g<c?-1:1}}function s(r,m=""){return r.name.toLowerCase().includes(m.toLowerCase())}},39410:(j,I,e)=>{"use strict";e.d(I,{n:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},66691:(j,I,e)=>{"use strict";e.d(I,{BM:()=>r,Hq:()=>m,wP:()=>d,wv:()=>o});var t=e(27702),n=e(84789),i=e(10864);const s="grafana.features.datasources.components.picker.DataSourceDropDown.history";function r(){const[l=[],a]=(0,n.Z)(s,[]),g=(0,t.useCallback)(c=>{c.meta.builtIn||(l.includes(c.uid)?(l.splice(l.findIndex(h=>c.uid===h),1),a([...l,c.uid])):a([...l,c.uid].slice(1,6)))},[l,a]);return[l,g]}function m(l){return(0,i.F)().getList(l)}function d(l){const a=(0,i.F)();return a.getInstanceSettings(l)}function o(l){const{keyboardEvents:a,containerRef:g}=l,c=(0,t.useRef)(0),h="data-role",f="keyboardSelectableItem",b={[h]:f},v=`[${h}="${f}"`,y="data-selectedItem",E=`[${y}="true"]`,C=(0,t.useCallback)(D=>{const P=g?.current?.querySelectorAll(v),S=P?.item(D%P?.length);P?.forEach(x=>x.setAttribute(y,"false")),S&&(S.scrollIntoView({block:"center"}),S.setAttribute(y,"true"))},[g,v]),u=(0,t.useCallback)(()=>{g?.current?.querySelector(E)?.querySelector("button")?.click()},[g,E]);return(0,t.useEffect)(()=>{if(!a)return;const D=a.subscribe({next:P=>{switch(P?.code){case"ArrowDown":{C(++c.current),P.preventDefault();break}case"ArrowUp":c.current=c.current>0?c.current-1:c.current,C(c.current),P.preventDefault();break;case"Enter":u();break}}});return()=>D.unsubscribe()},[a,C,u]),(0,t.useEffect)(()=>{const D=new MutationObserver(P=>{P.some(x=>x.addedNodes&&x.addedNodes.length>0||x.removedNodes&&x.removedNodes.length>0)&&C(0)});return g.current&&D.observe(g.current,{childList:!0}),()=>{D.disconnect()}},[g,v,C]),[b,E]}},58473:(j,I,e)=>{"use strict";e.d(I,{J_:()=>te,F5:()=>le,M9:()=>A,gv:()=>Q,b2:()=>X,Kj:()=>oe,bZ:()=>H,kY:()=>z,oe:()=>Z});var t=e(94469),n=e(42751),i=e(73289),s=e(34667),r=e(26129),m=e(33877),d=e(66574),o=e(45937),l=e(90131),a=e(5926),g=e(67821),c=e(8929),h=e(78209),f=e(92317);const b=async()=>await(0,o.i)().get("/api/datasources"),v=async ce=>{const q=await(0,h.n)((0,o.i)().fetch({method:"GET",url:`/api/datasources/${ce}`,params:(0,f.y)(),showErrorAlert:!1}));if(q.ok)return q.data;throw Error(`Could not find data source by ID: "${ce}"`)},y=async ce=>{const q=await(0,h.n)((0,o.i)().fetch({method:"GET",url:`/api/datasources/uid/${ce}`,params:(0,f.y)(),showErrorAlert:!1}));if(q.ok)return q.data;throw Error(`Could not find data source by UID: "${ce}"`)},E=async ce=>{try{return await y(ce)}catch{console.log(`Failed to lookup data source using UID "${ce}"`)}try{return await v(ce)}catch{console.log(`Failed to lookup data source using ID "${ce}"`)}throw Error("Could not find data source")},C=ce=>(0,o.i)().post("/api/datasources",ce),u=()=>(0,o.i)().get("/api/plugins",{enabled:1,type:"datasource"}),D=ce=>(0,o.i)().put(`/api/datasources/uid/${ce.uid}`,ce,{showErrorAlert:!1,showSuccessAlert:!1}),P=ce=>(0,o.i)().delete(`/api/datasources/uid/${ce}`);var S=e(39410),x=e(99464),M=e(2148),R=e(9232),O=e(80978);function T(ce){const q=[{id:"tsdb",title:"Time series databases",plugins:[]},{id:"logging",title:"Logging & document databases",plugins:[]},{id:"tracing",title:"Distributed tracing",plugins:[]},{id:"profiling",title:"Profiling",plugins:[]},{id:"sql",title:"SQL",plugins:[]},{id:"cloud",title:"Cloud",plugins:[]},{id:"enterprise",title:"Enterprise plugins",plugins:[]},{id:"iot",title:"Industrial & IoT",plugins:[]},{id:"other",title:"Others",plugins:[]}].filter(ie=>ie),ne={},pe={},re=L();for(const ie of q)ne[ie.id]=ie;for(const ie of ce){const Se=re.find(Ce=>Ce.id===ie.id);if((ie.enterprise||Se)&&(ie.category="enterprise",ie.unlicensed=!(0,O.v)("enterprise.plugins"),ie.info.links=Se?.info?.links||ie.info.links),ie.info.links)for(const Ce of ie.info.links)Ce.name="Learn more";(q.find(Ce=>Ce.id===ie.category)||ne.other).plugins.push(ie),pe[ie.id]=ie}for(const ie of q){if(ie.id==="cloud"&&ie.plugins.push(V()),ie.id==="enterprise")for(const Se of re)pe[Se.id]||ie.plugins.push(Se);U(ie.plugins)}return q.filter(ie=>ie.plugins.length>0)}function U(ce){const q={prometheus:100,graphite:95,loki:90,mysql:80,jaeger:100,postgres:79,gcloud:-1};ce.sort((ne,pe)=>{const re=q[ne.id]||0,ie=q[pe.id]||0;return re>ie?-1:re<ie||ne.name>pe.name?1:-1})}function L(){return[w({id:"grafana-splunk-datasource",name:"Splunk",description:"Visualize and explore Splunk logs",imgUrl:"public/img/plugins/splunk_logo_128.png"}),w({id:"grafana-oracle-datasource",name:"Oracle",description:"Visualize and explore Oracle SQL",imgUrl:"public/img/plugins/oracle.png"}),w({id:"grafana-dynatrace-datasource",name:"Dynatrace",description:"Visualize and explore Dynatrace data",imgUrl:"public/img/plugins/dynatrace.png"}),w({id:"grafana-servicenow-datasource",description:"ServiceNow integration and data source",name:"ServiceNow",imgUrl:"public/img/plugins/servicenow.svg"}),w({id:"grafana-datadog-datasource",description:"DataDog integration and data source",name:"DataDog",imgUrl:"public/img/plugins/datadog.png"}),w({id:"grafana-newrelic-datasource",description:"New Relic integration and data source",name:"New Relic",imgUrl:"public/img/plugins/newrelic.svg"}),w({id:"grafana-mongodb-datasource",description:"MongoDB integration and data source",name:"MongoDB",imgUrl:"public/img/plugins/mongodb.svg"}),w({id:"grafana-snowflake-datasource",description:"Snowflake integration and data source",name:"Snowflake",imgUrl:"public/img/plugins/snowflake.svg"}),w({id:"grafana-wavefront-datasource",description:"Wavefront integration and data source",name:"Wavefront",imgUrl:"public/img/plugins/wavefront.svg"}),w({id:"dlopes7-appdynamics-datasource",description:"AppDynamics integration and data source",name:"AppDynamics",imgUrl:"public/img/plugins/appdynamics.svg"}),w({id:"grafana-saphana-datasource",description:"SAP HANA\xAE integration and data source",name:"SAP HANA\xAE",imgUrl:"public/img/plugins/sap_hana.png"}),w({id:"grafana-honeycomb-datasource",description:"Honeycomb integration and datasource",name:"Honeycomb",imgUrl:"public/img/plugins/honeycomb.png"}),w({id:"grafana-salesforce-datasource",description:"Salesforce integration and datasource",name:"Salesforce",imgUrl:"public/img/plugins/salesforce.svg"}),w({id:"grafana-jira-datasource",description:"Jira integration and datasource",name:"Jira",imgUrl:"public/img/plugins/jira_logo.png"}),w({id:"grafana-gitlab-datasource",description:"GitLab integration and datasource",name:"GitLab",imgUrl:"public/img/plugins/gitlab.svg"}),w({id:"grafana-splunk-monitoring-datasource",description:"SignalFx integration and datasource",name:"Splunk Infrastructure Monitoring",imgUrl:"public/img/plugins/signalfx-logo.svg"}),w({id:"grafana-azuredevops-datasource",description:"Azure Devops datasource",name:"Azure Devops",imgUrl:"public/img/plugins/azure-devops.png"})]}function V(){return{id:"gcloud",name:"Grafana Cloud",type:R.zV.datasource,module:"phantom",baseUrl:"",info:{description:"Hosted Graphite, Prometheus, and Loki",logos:{small:"public/img/grafana_icon.svg",large:"asd"},author:{name:"Grafana Labs"},links:[{url:"https://grafana.com/products/cloud/",name:"Learn more"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}function w(ce){return{id:ce.id,name:ce.name,type:R.zV.datasource,module:"phantom",baseUrl:"",info:{description:ce.description,logos:{small:ce.imgUrl,large:ce.imgUrl},author:{name:"Grafana Labs"},links:[{url:"/plugins/"+ce.id,name:"Install now",target:"_self"}],screenshots:[],updated:"2019-05-10",version:"1.0.0"}}}var K=e(28706),B=e(11676),W=e(35342);const _=ce=>{let q,ne;return ce.error&&ce.error instanceof n.ZA?(q=ce.error.message,ne=ce.error.details):(0,i.kW)(ce)?q=ce.data.message??`HTTP error ${ce.statusText}`:ce instanceof Error&&(q=ce.message),{message:q,details:ne}},k=ce=>{const{details:q,message:ne,status:pe}=ce;return{status:pe,message:ne,details:q}},A=(ce,q={loadDataSource:Q,loadDataSourceMeta:X,getDataSource:W.f6,getDataSourceMeta:W.G4,importDataSourcePlugin:c.nL})=>async(ne,pe)=>{if(!ce){ne((0,B.CT)(new Error("Invalid UID")));return}try{const re=await ne(q.loadDataSource(ce));await ne(q.loadDataSourceMeta(re));const ie=q.getDataSource(pe().dataSources,ce),Se=q.getDataSourceMeta(pe().dataSources,ie.type),ye=await q.importDataSourcePlugin(Se);ne((0,B.iZ)(ye))}catch(re){re instanceof Error&&ne((0,B.CT)(re))}},z=(ce,q=S.n.Edit,ne={getDatasourceSrv:a.ak,getBackendSrv:o.i})=>async(pe,re)=>{const ie=await ne.getDatasourceSrv().get(ce),Se=q.replace(/:uid/gi,ce);ie.testDatasource&&(pe((0,B.j_)()),ne.getBackendSrv().withNoBackendCache(async()=>{try{const ye=await ie.testDatasource(),Ce=k({...ye,details:{...ye.details}});pe((0,B.ng)(Ce)),(0,x.Rw)({grafana_version:s.config.buildInfo.version,plugin_id:ie.type,datasource_uid:ie.uid,success:!0,path:Se})}catch(ye){const Ce=_(ye);pe((0,B.Aq)({...Ce})),(0,x.Rw)({grafana_version:s.config.buildInfo.version,plugin_id:ie.type,datasource_uid:ie.uid,success:!1,path:Se})}}))};function H(){return async ce=>{ce((0,B.MP)());const q=await b();ce((0,B.be)(q))}}function Q(ce){return async q=>{let ne=await E(ce);return ce!==ne.uid&&(window.location.href=t.u.assureBaseUrl(`/datasources/edit/${ne.uid}`),ne={}),q((0,B.rl)(ne)),ne}}function X(ce){return async q=>{const ne=await(0,g.a)(ce.type),pe=await(0,c.nL)(ne),re=pe.DataSourceClass.prototype instanceof n.CK,ie={...ne,isBackend:ne.backend||re};q((0,B.jS)(ie)),pe.meta=ie,q((0,m.RL)((0,K.B1)(ce,pe)))}}function te(ce,q=S.n.Edit){return async(ne,pe)=>{const re=await b();ne((0,B.be)(re));const ie=pe().dataSources.dataSources,Se=ie.length===0,ye={name:ce.name,type:ce.id,access:"proxy",isDefault:Se};(0,M.NV)(ie,ye.name)&&(ye.name=(0,M.eM)(ie,ye.name));const Ce=await C(ye),de=q.replace(/:uid/gi,Ce.datasource.uid);await(0,a.ak)().reload(),await d.contextSrv.fetchUserPermissions(),(0,x.Er)({grafana_version:s.config.buildInfo.version,plugin_id:ce.id,datasource_uid:Ce.datasource.uid,plugin_version:Ce.meta?.info?.version,path:de}),r.E1.push(de)}}function oe(){return async ce=>{ce((0,B.Ww)());const q=await u(),ne=T(q);ce((0,B.wZ)({plugins:q,categories:ne}))}}function Z(ce){return async q=>{try{await D(ce)}catch(ne){const pe=_(ne);return q((0,B.Aq)(pe)),Promise.reject(ce)}return await(0,a.ak)().reload(),q(Q(ce.uid))}}function le(){return async(ce,q)=>{const{uid:ne}=q().dataSources.dataSource;try{await P(ne),await(0,a.ak)().reload();const pe=l.Z.DataSources;r.E1.push(pe)}catch(pe){const re=_(pe);ce((0,B.Aq)(re))}}}},82220:(j,I,e)=>{"use strict";e.d(I,{V:()=>i});var t=e(27702),n=e(39410);const i=(0,t.createContext)(n.n)},21691:(j,I,e)=>{"use strict";e.d(I,{E:()=>v,IA:()=>M,MF:()=>T,OU:()=>u,Qs:()=>R,YY:()=>U,_l:()=>O,d7:()=>L,hw:()=>y,nH:()=>D,q6:()=>S,qj:()=>P,wl:()=>x,zJ:()=>E});var t=e(27702),n=e(10864),i=e(92071),s=e(5933),r=e(66574),m=e(86809),d=e(64248),o=e(18771),l=e(43620),a=e(2148),g=e(58473),c=e(82220),h=e(28706),f=e(11676),b=e(35342);const v=V=>{const w=(0,o.useDispatch)();(0,t.useEffect)(()=>(w((0,g.M9)(V)),function(){w((0,i.e)({cleanupAction:B=>B.dataSourceSettings=f.fk}))}),[V,w])},y=V=>{const w=(0,o.useDispatch)(),K=L();return()=>w((0,g.kY)(V,K.Edit))},E=()=>{const V=(0,o.useDispatch)(),w=(0,o.useSelector)(B=>B.dataSources.isLoadingDataSources),K=(0,o.useSelector)(B=>B.dataSources.dataSources);return(0,t.useEffect)(()=>{V((0,g.bZ)())},[V]),{isLoading:w,dataSources:K}},C=V=>{const w=useDispatch();useEffect(()=>{w(loadDataSource(V))},[w,V])},u=()=>{const V=(0,o.useDispatch)();(0,t.useEffect)(()=>{V((0,g.Kj)())},[V])},D=()=>{const V=(0,o.useDispatch)(),w=L();return K=>{V((0,g.J_)(K,w.Edit))}},P=()=>{const V=(0,o.useDispatch)();return async w=>V((0,g.oe)(w))},S=()=>{const V=(0,o.useDispatch)(),{name:w}=(0,o.useSelector)(K=>K.dataSources.dataSource);return()=>{s.Z.publish(new l.VJ({title:"Delete",text:`Are you sure you want to delete the "${w}" data source?`,yesText:"Delete",icon:"trash-alt",onConfirm:()=>V((0,g.F5)())}))}},x=V=>(0,o.useSelector)(w=>(0,b.f6)(w.dataSources,V)),M=V=>{const w=x(V);return(0,a.iU)(w)},R=V=>(0,o.useSelector)(w=>(0,b.G4)(w.dataSources,V)),O=()=>(0,o.useSelector)(V=>V.dataSourceSettings),T=(V,w)=>{const{plugin:K,loadError:B,loading:W}=O(),_=x(V),k=(0,n.F)()?.getInstanceSettings(V),A=!!(k?.meta?.alerting??!1),z=k?.type==="alertmanager",H=A||z,Q=(0,d.bJ)(_.type),X=(0,o.useSelector)(Z=>Z.navIndex),te=w?`datasource-${w}-${V}`:`datasource-settings-${V}`;let oe={node:{text:"Data Source Nav Node"},main:{text:"Data Source Nav Node"}};if(B){const Z={text:B,subTitle:"Data Source Error",icon:"exclamation-triangle"};oe={node:Z,main:Z}}return(W||!K)&&(oe=(0,m.ht)(X,te,(0,h.xG)("settings"))),K&&(oe=(0,m.ht)(X,te,(0,h.nI)((0,h.B1)(_,K),w||"settings"))),{node:oe.node,main:{...oe.main,text:_.name,dataSourcePluginName:Q?.name||K?.meta.name||"",active:!0},dataSourceHeader:{alertingSupported:H}}},U=V=>{const w=x(V),K=w.readOnly===!0,B=r.contextSrv.hasPermissionInMetadata(o.AccessControlAction.DataSourcesWrite,w),W=r.contextSrv.hasPermissionInMetadata(o.AccessControlAction.DataSourcesDelete,w);return{readOnly:K,hasWriteRights:B,hasDeleteRights:W}},L=()=>(0,t.useContext)(c.V)},9906:(j,I,e)=>{"use strict";e.d(I,{BX:()=>r.BX,E:()=>i.E,Ht:()=>r.Ht,I5:()=>m.I5,IA:()=>m.IA,IO:()=>m.IO,J_:()=>t.J_,MF:()=>i.MF,Nu:()=>r.Nu,OU:()=>i.OU,Qs:()=>i.Qs,Rz:()=>i.IA,Vj:()=>n.V,YY:()=>i.YY,_l:()=>i._l,d7:()=>i.d7,hw:()=>i.hw,mt:()=>m.mt,nH:()=>i.nH,q6:()=>i.q6,qj:()=>i.qj,r7:()=>m.r7,rl:()=>r.rl,wl:()=>i.wl,xG:()=>s.xG,yr:()=>r.yr,zJ:()=>i.zJ,zT:()=>r.zT});var t=e(58473),n=e(82220),i=e(21691),s=e(28706),r=e(11676),m=e(35342)},28706:(j,I,e)=>{"use strict";e.d(I,{B1:()=>l,nI:()=>a,xG:()=>g});var t=e(9232),n=e(80978),i=e(99829),s=e(12308),r=e(66574),m=e(41715),d=e(18771);const o="Loading";function l(h,f){const b=f.meta,v=s.default.featureToggles.featureHighlights,y=s.default.featureToggles.dataSourcePageHeader,E={img:b.info.logos.large,id:"datasource-"+h.uid,url:"",text:h.name,children:[{active:!1,icon:"sliders-v-alt",id:`datasource-settings-${h.uid}`,text:"Settings",url:`datasources/edit/${h.uid}/`}]};if(y||(E.subTitle=`Type: ${b.name}`),f.configPages)for(const R of f.configPages)E.children.push({active:!1,text:R.title,icon:R.icon,url:`datasources/edit/${h.uid}/?page=${R.id}`,id:`datasource-page-${R.id}`});b.includes&&c(b.includes)&&r.contextSrv.hasRole("Admin")&&E.children.push({active:!1,icon:"apps",id:`datasource-dashboards-${h.uid}`,text:"Dashboards",url:`datasources/edit/${h.uid}/dashboards`});const C=h.type===o,u="feature-highlights-data-source-permissions-badge",D={active:!1,icon:"lock",id:`datasource-permissions-${h.uid}`,text:"Permissions",url:`datasources/edit/${h.uid}/permissions`};(0,m.d5)()&&!C&&(D.tabSuffix=()=>(0,i.Z)({experimentId:u,eventVariant:"trial"})),(0,n.v)("dspermissions.enforcement")?r.contextSrv.hasPermission(d.AccessControlAction.DataSourcesPermissionsRead)&&E.children.push(D):v&&!C&&E.children.push({...D,url:D.url+"/upgrade",tabSuffix:()=>(0,i.Z)({experimentId:u})});const P="feature-highlights-data-source-insights-badge",S={active:!1,icon:"info-circle",id:`datasource-insights-${h.uid}`,text:"Insights",url:`datasources/edit/${h.uid}/insights`};(0,m.d5)()&&!C&&(S.tabSuffix=()=>(0,i.Z)({experimentId:P,eventVariant:"trial"})),(0,n.v)("analytics")?r.contextSrv.hasPermission(d.AccessControlAction.DataSourcesInsightsRead)&&E.children.push(S):v&&!C&&E.children.push({...S,url:S.url+"/upgrade",tabSuffix:()=>(0,i.Z)({experimentId:P})});const x="feature-highlights-query-caching-badge",M={active:!1,icon:"database",id:`datasource-cache-${h.uid}`,text:"Cache",url:`datasources/edit/${h.uid}/cache`,hideFromTabs:!b.isBackend||!s.default.caching.enabled};return(0,m.d5)()&&!C&&(M.tabSuffix=()=>(0,i.Z)({experimentId:x,eventVariant:"trial"})),(0,n.v)("caching")?r.contextSrv.hasPermissionInMetadata(d.AccessControlAction.DataSourcesCachingRead,h)&&E.children.push(M):v&&!C&&E.children.push({...M,url:M.url+"/upgrade",tabSuffix:()=>(0,i.Z)({experimentId:x})}),E}function a(h,f){let b={text:""};for(const v of h.children)if(v.id.indexOf(f)>0){v.active=!0,b=v;break}return{main:h,node:b}}function g(h){const f=l({access:"",basicAuth:!1,basicAuthUser:"",withCredentials:!1,database:"",id:1,uid:"x",isDefault:!1,jsonData:{authType:"credentials",defaultRegion:"eu-west-2"},name:"Loading",orgId:1,readOnly:!1,type:o,typeName:o,typeLogoUrl:"public/img/icn-datasource.svg",url:"",user:"",secureJsonFields:{}},{meta:{id:"1",type:t.zV.datasource,name:"",info:{author:{name:"",url:""},description:"",links:[{name:"",url:""}],logos:{large:"",small:""},screenshots:[],updated:"",version:""},includes:[],module:"",baseUrl:""}});return a(f,h)}function c(h){return h.find(f=>f.type==="dashboard")!==void 0}},11676:(j,I,e)=>{"use strict";e.d(I,{Aq:()=>P,BX:()=>h,CT:()=>C,Ht:()=>c,MP:()=>r,Nu:()=>b,Ww:()=>o,ZP:()=>x,be:()=>m,fk:()=>y,iZ:()=>E,jS:()=>d,j_:()=>u,ng:()=>D,rl:()=>s,wZ:()=>l,yr:()=>f,zT:()=>a});var t=e(34099),n=e(47435);const i={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.PH)("dataSources/dataSourceLoaded"),r=(0,t.PH)("dataSources/dataSourcesLoad"),m=(0,t.PH)("dataSources/dataSourcesLoaded"),d=(0,t.PH)("dataSources/dataSourceMetaLoaded"),o=(0,t.PH)("dataSources/dataSourcePluginsLoad"),l=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),a=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),g=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),c=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),h=(0,t.PH)("dataSources/setDataSourceName"),f=(0,t.PH)("dataSources/setIsDefault"),b=(0,t.PH)("dataSources/setIsSortAscending"),v=(M=i,R)=>r.match(R)?{...M,isLoadingDataSources:!0}:m.match(R)?{...M,isLoadingDataSources:!1,dataSources:R.payload,dataSourcesCount:R.payload.length}:s.match(R)?{...M,dataSource:R.payload}:a.match(R)?{...M,searchQuery:R.payload}:g.match(R)?{...M,layoutMode:R.payload}:o.match(R)?{...M,plugins:[],isLoadingDataSourcePlugins:!0}:l.match(R)?{...M,plugins:R.payload.plugins,categories:R.payload.categories,isLoadingDataSourcePlugins:!1}:c.match(R)?{...M,dataSourceTypeSearchQuery:R.payload}:d.match(R)?{...M,dataSourceMeta:R.payload}:h.match(R)?{...M,dataSource:{...M.dataSource,name:R.payload}}:f.match(R)?{...M,dataSource:{...M.dataSource,isDefault:R.payload}}:b.match(R)?{...M,isSortAscending:R.payload}:M,y={testingStatus:{},loadError:null,loading:!0,plugin:null},E=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),C=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),u=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),D=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),P=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),x={dataSources:v,dataSourceSettings:(M=y,R)=>E.match(R)?{...M,plugin:R.payload,loadError:null,loading:!1}:C.match(R)?{...M,plugin:null,loadError:R.payload.message,loading:!1}:u.match(R)?{...M,testingStatus:{message:"Testing... this could take up to a couple of minutes",status:"info"}}:D.match(R)?{...M,testingStatus:{status:R.payload?.status,message:R.payload?.message,details:R.payload?.details}}:P.match(R)?{...M,testingStatus:{status:"error",message:R.payload?.message,details:R.payload?.details}}:M}},35342:(j,I,e)=>{"use strict";e.d(I,{G4:()=>s,I5:()=>n,IA:()=>o,IO:()=>r,f6:()=>i,mt:()=>t,r7:()=>d});const t=l=>{const a=new RegExp(l.searchQuery,"i");return l.dataSources.filter(c=>a.test(c.name)||a.test(c.database)||a.test(c.type)).sort((c,h)=>l.isSortAscending?c.name.localeCompare(h.name):h.name.localeCompare(c.name))},n=l=>{const a=new RegExp(l.dataSourceTypeSearchQuery,"i");return l.plugins.filter(g=>a.test(g.name))},i=(l,a)=>l.dataSource.uid===a?l.dataSource:{},s=(l,a)=>l.dataSourceMeta.id===a?l.dataSourceMeta:{},r=l=>l.searchQuery,m=l=>l.layoutMode,d=l=>l.dataSourcesCount,o=l=>l.isSortAscending},99464:(j,I,e)=>{"use strict";e.d(I,{Er:()=>n,Rw:()=>i,U4:()=>s,aL:()=>o,dF:()=>m,hJ:()=>r,ij:()=>d});var t=e(86312);const n=l=>{(0,t.ff)("grafana_ds_add_datasource_clicked",l)},i=l=>{(0,t.ff)("grafana_ds_test_datasource_clicked",l)},s=l=>{(0,t.ff)("grafana_ds_explore_datasource_clicked",l)},r=l=>{(0,t.ff)("grafana_ds_create_dashboard_clicked",l)},m=l=>{(0,t.ff)("grafana_ds_datasources_list_viewed",l)},d=l=>{(0,t.ff)("connections_datasources_settings_clicked",{item:l})},o=l=>{(0,t.ff)("connections_datasources_ds_configured",l)}},2148:(j,I,e)=>{"use strict";e.d(I,{NV:()=>i,eM:()=>s,iU:()=>l});var t=e(78968),n=e(94469);function i(a,g){return a.filter(c=>c.name.toLowerCase()===g.toLowerCase()).length>0}function s(a,g){for(;i(a,g);)r(g)?g=`${o(g)}${d(m(g))}`:g=`${g}-1`;return g}function r(a){return a.endsWith("-",a.length-1)}function m(a){return parseInt(a.slice(-1),10)}function d(a){return isNaN(a)?1:a+1}function o(a){return a.slice(0,a.length-1)}const l=a=>{const g=JSON.stringify({datasource:a.name,context:"explore"});return t.Cj.renderUrl(n.u.assureBaseUrl("/explore"),{left:g})}},85614:()=>{"use strict"},18473:(j,I,e)=>{"use strict";e.d(I,{L:()=>o});var t=e(42844),n=e(27702),i=e(66310),s=e(28580),r=e(56025),m=e(38588);const d={label:"Fixed color",value:"_____fixed_____"},o=a=>{const{value:g,context:c,onChange:h}=a,f="dark-green",b=(0,i.wW)(l),v=g?.field,y=!v,E=(0,m.IX)(c.data),C=(0,m.nw)(E,v,d),u=(0,n.useCallback)(S=>{const x=S.value;if(x&&x!==d.value)h({...g,field:x});else{const M=g?.fixed??f;h({...g,field:void 0,fixed:M})}},[h,g]),D=(0,n.useCallback)(S=>{h({field:void 0,fixed:S??f})},[h]),P=y?d:C.find(S=>S.value===v);return n.createElement(n.Fragment,null,n.createElement("div",{className:b.container},n.createElement(s.Ph,{value:P,options:C,onChange:u,noOptionsMessage:"No fields found"}),y&&n.createElement("div",{className:b.picker},n.createElement(r.zH,{color:g?.fixed??f,onChange:D,enableNamedColors:!0}))))},l=a=>({container:(0,t.css)`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:(0,t.css)`
    padding-left: 8px;
  `})},95535:(j,I,e)=>{"use strict";e.d(I,{E:()=>b});var t=e(42844),n=e(27702),i=e(66310),s=e(66670),r=e(71107),m=e(48024),d=e(1128),o=e(75965),l=e(71235),a=e(54826),g=e(66300),c=e(34050),h=e(1553),f=e(92549);const b=E=>{const{value:C,src:u,name:D,placeholder:P,onChange:S,onClear:x,mediaType:M,folderName:R,size:O,color:T}=E,U=(0,i.wW)(y),L=(0,i.l4)(),V=(0,n.createRef)(),w=n.createElement(f.Y,{onChange:S,value:C,mediaType:M,folderName:R});let K=u;!K&&C&&(K=(0,c.t)(C));const B=T&&{fill:L.visualization.getColorByName(T)},W=()=>C&&K?n.createElement(g.V,{src:K,className:U.icon,style:{...B}}):n.createElement(s.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),_=()=>n.createElement(r.Z,null,n.createElement(m._,{label:null,grow:!0},n.createElement(d.I,{value:v(u,D),placeholder:P,readOnly:!0,prefix:K&&n.createElement(g.V,{src:K,className:U.icon,style:{...B}}),suffix:n.createElement(s.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:x})})));return n.createElement(o.D,{content:w},(k,A,z)=>n.createElement(n.Fragment,null,V.current&&n.createElement(l.J,{...z,referenceElement:V.current,onMouseEnter:k,onKeyDown:H=>{(0,a.i)(H,A)}}),n.createElement("div",{ref:V,onClick:k,className:U.pointer},O===h.zc.SMALL&&W(),O===h.zc.NORMAL&&_())))};function v(E,C){if(E?.startsWith("public/img/icons")){const u=C?.lastIndexOf(".svg")??0;if(u>0)return C.substring(0,u)}return C}const y=E=>({pointer:(0,t.css)`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:(0,t.css)`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},92549:(j,I,e)=>{"use strict";e.d(I,{Y:()=>W});var t=e(42844),n=e(45809),i=e(91546),s=e(6714),r=e(27702),m=e(73289),d=e(66310),o=e(66670),l=e(12308),a=e(1553),g=e(22209),c=e(79399),h=e(66300);function f({secondaryText:k="Drag and drop here or browse"}){const A=(0,d.wW)(v);return r.createElement("div",{className:A.iconWrapper},r.createElement("small",{className:A.small},k),r.createElement(o.zx,{type:"button",icon:"upload"},"Upload"))}const b=({mediaType:k,setFormData:A,setUpload:z,error:H})=>{const Q=(0,d.wW)(v),[X,te]=(0,r.useState)(!1),[oe,Z]=(0,r.useState)(""),le=()=>r.createElement(g.g,{label:"Preview"},r.createElement("div",{className:Q.iconPreview},k===a.DD.Icon&&r.createElement(h.V,{src:oe,className:Q.img}),k===a.DD.Image&&r.createElement("img",{src:oe,alt:"Preview of the uploaded file",className:Q.img}))),ce=ne=>{fetch(`/api/storage/delete/upload/${ne.file.name}`,{method:"DELETE"}).catch(pe=>console.error("cannot delete file",pe))},q=k==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return r.createElement(c.Yo,{readAs:"readAsBinaryString",onFileRemove:ce,options:{accept:q,multiple:!1,onDrop:ne=>{let pe=new FormData;pe.append("file",ne[0]),Z(URL.createObjectURL(ne[0])),te(!0),A(pe),z(!0)}}},H.message!==""&&X?r.createElement("p",null,H.message):X?r.createElement(le,null):r.createElement(f,null))};function v(k,A){return{container:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:(0,t.css)`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${k.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${k.colors.border.medium};
      background-color: ${A?k.colors.background.secondary:k.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:(0,t.css)`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:(0,t.css)`
      margin: ${k.spacing(2,0,1)};
    `,small:(0,t.css)`
      color: ${k.colors.text.secondary};
      margin-bottom: ${k.spacing(2)};
    `,iconContainer:(0,t.css)`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:(0,t.css)`
      width: 238px;
      height: 198px;
      border: 1px solid ${k.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:(0,t.css)`
      width: 147px;
      height: 147px;
      fill: ${k.colors.text.primary};
    `}}var y=e(28580),E=e(33716),C=e(5926),u=e(55925),D=e(25472),P=e(80402);const S=(0,r.memo)(function(A){const{columnIndex:z,rowIndex:H,style:Q,data:X}=A,{cards:te,columnCount:oe,onChange:Z,selected:le}=X,ce=z+H*oe,q=te[ce],ne=(0,d.l4)(),pe=x(ne);return r.createElement("div",{style:Q},q&&r.createElement("div",{key:q.value,className:le===q.value?(0,t.cx)(pe.card,pe.selected):pe.card,onClick:()=>Z(q.value)},q.imgUrl.endsWith(".svg")?r.createElement(h.V,{src:q.imgUrl,className:pe.img}):r.createElement("img",{src:q.imgUrl,alt:"",className:pe.img}),r.createElement("h6",{className:pe.text},q.label.slice(0,-4))))},D.wy),x=(0,P.B)(k=>({card:(0,t.css)`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${k.colors.action.hover};
        box-shadow: ${k.shadows.z2};
      }
    `,selected:(0,t.css)`
      border: 2px solid ${k.colors.primary.main};
      :hover {
        border-color: ${k.colors.primary.main};
      }
    `,img:(0,t.css)`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${k.colors.text.primary};
    `,text:(0,t.css)`
      color: ${k.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:(0,t.css)`
      border: 1px solid ${k.colors.border.medium};
    `})),M=k=>{const{onChange:A,cards:z,value:H}=k,Q=(0,d.l4)(),X=x(Q);return r.createElement(u.Z,{defaultWidth:680},({width:te,height:oe})=>{const ce=Math.floor(te/90),q=Math.ceil(z.length/ce);return r.createElement(D.Ym,{width:te,height:oe,columnCount:ce,columnWidth:90,rowCount:q,rowHeight:90,itemData:{cards:z,columnCount:ce,onChange:A,selected:H},className:X.grid},S)})},R=k=>k===a.DD.Icon?[a.QS.Icon,a.QS.IOT,a.QS.Marker]:[a.QS.BG],O=(k,A)=>k.find(z=>A.startsWith(z.value))??k[0],T=k=>{const{value:A,mediaType:z,folderName:H,newValue:Q,setNewValue:X}=k,te=(0,d.wW)(U),oe=R(z).map(ye=>({label:ye,value:ye})),[Z,le]=(0,r.useState)(),[ce,q]=(0,r.useState)(O(oe,A?.length?A:H)),[ne,pe]=(0,r.useState)([]),[re,ie]=(0,r.useState)([]),Se=ye=>{ye?(ye=ye.toLowerCase(),ie(ne.filter(Ce=>Ce.search.includes(ye)))):ie(ne)};return(0,r.useEffect)(()=>{const ye=ce?.value;if(ye){const Ce=z===a.DD.Icon?de=>de.name.endsWith(".svg"):de=>de.name.endsWith(".png")||de.name.endsWith(".gif");(0,C.ak)().get("-- Grafana --").then(de=>{de.listFiles(ye).subscribe({next:we=>{const _e=[];we.forEach(Je=>{if(Ce(Je)){const Ue=Je.name.lastIndexOf(".");_e.push({value:`${ye}/${Je.name}`,label:Je.name,search:(Ue?Je.name.substring(0,Ue):Je.name).toLowerCase(),imgUrl:`public/${ye}/${Je.name}`})}}),pe(_e),ie(_e)}})})}},[z,ce]),r.createElement(r.Fragment,null,r.createElement(g.g,null,r.createElement(y.Ph,{options:oe,onChange:q,value:ce,menuShouldPortal:!1})),r.createElement(g.g,null,r.createElement(E.H,{value:Z??"",placeholder:"Search",onChange:ye=>{Se(ye),le(ye)}})),re&&r.createElement("div",{className:te.cardsWrapper},r.createElement(M,{cards:re,onChange:ye=>X(ye),value:Q})))},U=k=>({cardsWrapper:(0,t.css)`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var L=e(1128),V=e(79978),w=e(34050);const K=k=>{const{newValue:A,setNewValue:z,mediaType:H}=k,Q=(0,d.wW)(B),X=(0,w.t)(A);let te=A?.substring(A.lastIndexOf("/")+1,A.lastIndexOf("."));return te.length>20&&(te=te.substring(0,20)+"..."),r.createElement(r.Fragment,null,r.createElement(g.g,null,r.createElement(L.I,{onChange:oe=>z(oe.currentTarget.value),value:A})),r.createElement("div",{className:Q.iconContainer},r.createElement(g.g,{label:"Preview"},r.createElement("div",{className:Q.iconPreview},H===a.DD.Icon&&r.createElement(h.V,{src:X,className:Q.img}),H===a.DD.Image&&A&&r.createElement("img",{src:X,alt:"Preview of the selected URL",className:Q.img}))),r.createElement(V._,null,te)))},B=k=>({iconContainer:(0,t.css)`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:(0,t.css)`
    width: 238px;
    height: 198px;
    border: 1px solid ${k.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:(0,t.css)`
    width: 147px;
    height: 147px;
    fill: ${k.colors.text.primary};
  `}),W=k=>{const{value:A,onChange:z,mediaType:H,folderName:Q}=k,X=(0,d.wW)(_),te=()=>{z(A)},oe=(0,r.createRef)(),{dialogProps:Z}=(0,n.R)({},oe),{overlayProps:le}=(0,s.Ir)({onClose:te,isDismissable:!0,isOpen:!0},oe),ce=A&&A.includes("://"),[q,ne]=(0,r.useState)(A??""),[pe,re]=(0,r.useState)(ce?a.hQ.URL:a.hQ.Folder),[ie,Se]=(0,r.useState)(new FormData),[ye,Ce]=(0,r.useState)(!1),[de,we]=(0,r.useState)({message:""}),_e=tt=>`${X.resourcePickerPopoverTab} ${pe===tt&&X.resourcePickerPopoverActiveTab}`,Je=()=>r.createElement(T,{value:A,mediaType:H,folderName:Q,newValue:q,setNewValue:ne}),Ue=()=>r.createElement(K,{newValue:q,setNewValue:ne,mediaType:H}),$e=()=>r.createElement(b,{mediaType:H,setFormData:Se,setUpload:Ce,newValue:q,error:de}),Qe=()=>{switch(pe){case a.hQ.Folder:return Je();case a.hQ.URL:return Ue();case a.hQ.Upload:return $e();default:return Je()}};return r.createElement(i.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},r.createElement("section",{ref:oe,...le,...Z},r.createElement("div",{className:X.resourcePickerPopover},r.createElement("div",{className:X.resourcePickerPopoverTabs},r.createElement("button",{className:_e(a.hQ.Folder),onClick:()=>re(a.hQ.Folder)},"Folder"),r.createElement("button",{className:_e(a.hQ.URL),onClick:()=>re(a.hQ.URL)},"URL")),r.createElement("div",{className:X.resourcePickerPopoverContent},Qe(),r.createElement("div",{className:X.buttonRow},r.createElement(o.zx,{variant:"secondary",onClick:()=>te(),fill:"outline"},"Cancel"),r.createElement(o.zx,{variant:q&&q!==A?"primary":"secondary",onClick:()=>{ye?fetch("/api/storage/upload",{method:"POST",body:ie}).then(tt=>{if(tt.status>=400){tt.json().then(lt=>we(lt));return}else return tt.json()}).then(tt=>{(0,m.i)().get(`api/storage/read/${tt.path}`).then(()=>ne(`${l.config.appUrl}api/storage/read/${tt.path}`)).then(()=>z(`${l.config.appUrl}api/storage/read/${tt.path}`))}).catch(tt=>console.error(tt)):z(q)}},"Select"))))))},_=k=>({resourcePickerPopover:(0,t.css)`
    border-radius: ${k.shape.borderRadius()};
    box-shadow: ${k.shadows.z3};
    background: ${k.colors.background.primary};
    border: 1px solid ${k.colors.border.weak};
  `,resourcePickerPopoverTab:(0,t.css)`
    width: 50%;
    text-align: center;
    padding: ${k.spacing(1,0)};
    background: ${k.colors.background.secondary};
    color: ${k.colors.text.secondary};
    font-size: ${k.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:(0,t.css)`
    color: ${k.colors.text.primary};
    font-weight: ${k.typography.fontWeightMedium};
    background: ${k.colors.background.primary};
  `,resourcePickerPopoverContent:(0,t.css)`
    width: 315px;
    font-size: ${k.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${k.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:(0,t.css)`
    display: flex;
    width: 100%;
    border-radius: ${k.shape.borderRadius()} ${k.shape.borderRadius()} 0 0;
  `,buttonRow:(0,t.css)({display:"flex",justifyContent:"center",gap:k.spacing(2),padding:k.spacing(1)})})},9953:(j,I,e)=>{"use strict";e.d(I,{$:()=>c});var t=e(27702),n=e(64167),i=e(71107),s=e(48024),r=e(40705),m=e(66670),d=e(86912),o=e(85819);const l=[{label:"Fixed",value:n.xy.Fixed,description:"Fixed value"},{label:"Field",value:n.xy.Field,description:"Display field value"}],a={settings:{}},g={settings:{}},c=({value:h,context:f,onChange:b})=>{const y=(0,t.useCallback)(P=>{b({...h,mode:P})},[b,h]),E=(0,t.useCallback)(P=>{b({...h,field:P})},[b,h]),C=(0,t.useCallback)((P="")=>{b({...h,fixed:P})},[b,h]),u=()=>{C("")},D=h?.mode??n.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(i.Z,null,t.createElement(s._,{label:"Source",labelWidth:9,grow:!0},t.createElement(r.S,{value:D,options:l,onChange:y,fullWidth:!0}))),D!==n.xy.Fixed&&t.createElement(i.Z,null,t.createElement(s._,{label:"Field",labelWidth:9,grow:!0},t.createElement(d.b,{context:f,value:h.field??"",onChange:E,item:a}))),D===n.xy.Fixed&&t.createElement(i.Z,{key:h?.fixed},t.createElement(s._,{label:"Value",labelWidth:9,grow:!0},t.createElement(o.A,{context:f,value:h?.fixed,onChange:C,item:g,suffix:h?.fixed&&t.createElement(m.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:u})}))),D===n.xy.Template&&t.createElement(i.Z,null,t.createElement(s._,{label:"Template",labelWidth:9,grow:!0},t.createElement(o.A,{context:f,value:h?.fixed,onChange:C,item:g}))))}},78276:(j,I,e)=>{"use strict";e.d(I,{Lm:()=>t.L,Lv:()=>b,k9:()=>U,cL:()=>x,$2:()=>V.$});var t=e(18473),n=e(27702);const i=({value:w,onChange:K})=>{const[B,W]=useState(w?[{value:w,label:w}]:[]),[_,k]=useState(),A=window.__grafana_public_path__+"img/icons/unicons/",z=H=>{K(H),k(H)};return useEffect(()=>{getBackendSrv().get(`${A}/index.json`).then(H=>{W(H.files.map(Q=>({value:Q,label:Q})))})},[A]),React.createElement(Select,{options:B,value:_,onChange:H=>{z(H.value)}})},s=null;var r=e(64167),m=e(71107),d=e(48024),o=e(40705),l=e(86912),a=e(82382),g=e(1553),c=e(95535);const h=[{label:"Fixed",value:r.Q8.Fixed,description:"Fixed value"},{label:"Field",value:r.Q8.Field,description:"Use a string field result"}],f={settings:{}},b=w=>{const{value:K,context:B,onChange:W,item:_}=w,k=9,A=(0,n.useCallback)(ce=>{W({...K,mode:ce})},[W,K]),z=(0,n.useCallback)((ce="")=>{W({...K,field:ce})},[W,K]),H=(0,n.useCallback)(ce=>{W({...K,fixed:ce??""})},[W,K]),Q=ce=>{ce.stopPropagation(),W({mode:r.Q8.Fixed,fixed:"",field:""})},X=K?.mode??r.Q8.Fixed,te=_.settings?.showSourceRadio??!0,oe=_.settings?.resourceType??g.DD.Icon,Z=_.settings?.folderName??a.ResourceFolderName.Icon;let le="";return oe===g.DD.Icon&&(K?.fixed?le=(0,a.getPublicOrAbsoluteUrl)(K.fixed):_.settings?.placeholderValue&&(le=(0,a.getPublicOrAbsoluteUrl)(_.settings.placeholderValue))),n.createElement(n.Fragment,null,te&&n.createElement(m.Z,null,n.createElement(d._,{label:"Source",labelWidth:k,grow:!0},n.createElement(o.S,{value:X,options:h,onChange:A,fullWidth:!0}))),X!==r.Q8.Fixed&&n.createElement(m.Z,null,n.createElement(d._,{label:"Field",labelWidth:k,grow:!0},n.createElement(l.b,{context:B,value:K.field??"",onChange:z,item:f}))),X===r.Q8.Fixed&&n.createElement(c.E,{onChange:H,onClear:Q,value:K?.fixed,src:le,placeholder:_.settings?.placeholderText??"Select a value",name:v(K?.fixed)??"",mediaType:oe,folderName:Z,size:g.zc.NORMAL}),X===r.Q8.Mapping&&n.createElement(m.Z,null,n.createElement(d._,{label:"Mappings",labelWidth:k,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function v(w){if(!w)return;const K=w.lastIndexOf("/");return K>0?w.substring(K+1):w}var y=e(42844),E=e(66310),C=e(28580),u=e(38588),D=e(55093),P=e(91389);const S={label:"Fixed value",value:"_____fixed_____"},x=w=>{const{value:K,context:B,onChange:W,item:_}=w,{settings:k}=_,A=(0,E.wW)(M),z=K?.field,H=!z,Q=(0,u.IX)(B.data),X=(0,u.nw)(Q,z,S),te=(0,n.useMemo)(()=>(0,P.x5)(k),[k]),oe=(0,n.useCallback)(re=>{W((0,P.C)(re,te))},[W,te]),Z=(0,n.useCallback)(re=>{const ie=re.value;ie&&ie!==S.value?oe({...K,field:ie}):oe({...K,field:void 0})},[oe,K]),le=(0,n.useCallback)(re=>{re!==void 0&&oe({...K,min:re})},[oe,K]),ce=(0,n.useCallback)(re=>{re!==void 0&&oe({...K,max:re})},[oe,K]),q=(0,n.useCallback)(re=>{re!==void 0&&oe({...K,fixed:re})},[oe,K]),ne=K??{},pe=H?S:X.find(re=>re.value===z);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(C.Ph,{value:pe,options:X,onChange:Z,noOptionsMessage:"No fields found"})),n.createElement("div",{className:A.range},H&&n.createElement(m.Z,null,n.createElement(d._,{label:"Value",labelWidth:8,grow:!0},n.createElement(D.Y,{value:ne.fixed,...te,onChange:q}))),!H&&!te.hideRange&&n.createElement(n.Fragment,null,n.createElement(m.Z,null,n.createElement(d._,{label:"Min",labelWidth:8,grow:!0},n.createElement(D.Y,{value:ne.min,...te,onChange:le}))),n.createElement(m.Z,null,n.createElement(d._,{label:"Max",labelWidth:8,grow:!0},n.createElement(D.Y,{value:ne.max,...te,onChange:ce}))))))},M=w=>({range:(0,y.css)`
    padding-top: 8px;
  `});var R=e(29241);const O={label:"Fixed value",value:"_____fixed_____"},T=[{label:"Mod",value:r.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:r.eK.Clamped,description:"Use field values, clamped to max and min"}],U=({value:w,context:K,onChange:B,item:W})=>{const{settings:_}=W,k=0,A=w?.field,z=!A,H=(0,u.IX)(K.data),Q=(0,u.nw)(H,A,O,R.fS.number),X=(0,E.wW)(L),te=(0,n.useCallback)(ne=>{const pe=ne.value;if(pe&&pe!==O.value)B({...w,field:pe});else{const re=w.fixed??k;B({...w,field:void 0,fixed:re})}},[B,w]),oe=(0,n.useCallback)(ne=>{B({...w,mode:ne})},[B,w]),Z=(0,n.useCallback)(ne=>{B({...w,field:void 0,fixed:ne??k})},[B,w]),le=w??{},ce=w?.mode??r.eK.Mod,q=z?O:Q.find(ne=>ne.value===A);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(m.Z,null,n.createElement(d._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(o.S,{value:ce,options:T,onChange:oe,fullWidth:!0}))),n.createElement(C.Ph,{value:q,options:Q,onChange:te,noOptionsMessage:"No fields found"})),n.createElement("div",{className:X.range},z&&n.createElement(m.Z,null,n.createElement(d._,{label:"Value",labelWidth:8,grow:!0},n.createElement(D.Y,{value:le?.fixed??k,onChange:Z,max:_?.max,min:_?.min})))))},L=w=>({range:(0,y.css)`
    padding-top: 8px;
  `});var V=e(9953)},82382:(j,I,e)=>{"use strict";e.d(I,{MediaType:()=>t.DD,ResourceFolderName:()=>t.QS,findField:()=>r.PI,findFieldIndex:()=>r.rj,getColorDimension:()=>m,getPublicOrAbsoluteUrl:()=>f.t,getResourceDimension:()=>f.I,getScalarDimension:()=>v.y,getScaledDimension:()=>o.W8,getScaledDimensionForField:()=>o.A,getTextDimension:()=>c});var t=e(1553),n=e(58192),i=e(11024),s=e(61965),r=e(69730);function m(y,E,C){return d((0,r.PI)(y,E.field),E,C)}function d(y,E,C){if(!y){const P=C.visualization.getColorByName(E.fixed??"grey");return{isAssumed:!!E.field?.length||!E.fixed,fixed:P,value:()=>P,get:S=>P}}const u=(0,n.fD)(y);if(u.isByValue||y.config.mappings?.length){const P=(0,i.xD)(y,!0);P!==y.config&&(y={...y,config:P},y.state=void 0);const S=(0,s.U)({field:y,theme:C}),x=M=>S(M).color??"#ccc";return{field:y,get:M=>x(y.values[M]),value:()=>x((0,r.cR)(y))}}const D=u.getCalculator(y,C)(0,0);return{fixed:D,value:()=>D,get:P=>D,field:y}}var o=e(91389),l=e(29241),a=e(21609),g=e(64167);function c(y,E){const C=E.field?(0,r.PI)(y,E.field):y?.fields.find(u=>u.type===l.fS.string);return h(C,E)}function h(y,E){let C=E.fixed;const u=E.mode??g.xy.Fixed;if(u===g.xy.Fixed)return{isAssumed:!C,fixed:C,value:()=>C,get:P=>C};if(u===g.xy.Template){const P=S=>`TEMPLATE[${E.fixed} // ${S}]`;return y?{field:y,get:S=>P(y.values[S]),value:()=>P((0,r.cR)(y))}:(C=P(""),{isAssumed:!0,fixed:C,value:()=>C,get:S=>C})}if(!y)return{isAssumed:!0,fixed:C,value:()=>C,get:P=>C};let D=P=>(0,a.zc)(y.display(P));return{field:y,get:P=>D(y.values[P]),value:()=>D((0,r.cR)(y))}}var f=e(34050),b=e(85614),v=e(74243)},34050:(j,I,e)=>{"use strict";e.d(I,{I:()=>s,t:()=>i});var t=e(64167),n=e(69730);function i(r){return r?r.indexOf(":/")>0?r:window.__grafana_public_path__+r:""}function s(r,m){const d=m.mode??t.Q8.Fixed;if(d===t.Q8.Fixed){const a=i(m.fixed);return{isAssumed:!a,fixed:a,value:()=>a,get:g=>a}}const o=(0,n.PI)(r,m.field);if(!o){const a="";return{isAssumed:!0,fixed:a,value:()=>a,get:g=>a}}if(d===t.Q8.Mapping){const a=g=>i(`${g}`);return{field:o,get:g=>a(o.values[g]),value:()=>a((0,n.cR)(o))}}const l=a=>{if(o&&o.display){const g=o.display(a).icon;return i(g??"")}return""};return{field:o,get:a=>l(o.values[a]),value:()=>l((0,n.cR)(o))}}},74243:(j,I,e)=>{"use strict";e.d(I,{y:()=>i});var t=e(64167),n=e(69730);function i(r,m){return s((0,n.PI)(r,m?.field),m)}function s(r,m){if(!r){const l=m.fixed??0;return{isAssumed:!!m.field?.length||!m.fixed,fixed:l,value:()=>l,get:()=>l}}let d=l=>l%m.max;return m.mode===t.eK.Clamped&&(d=l=>l<m.min?m.min:l>m.max?m.max:l),{field:r,get:l=>{const a=r.values[l];return a===null||typeof a!="number"?0:d(a)},value:()=>(0,n.cR)(r)}}},91389:(j,I,e)=>{"use strict";e.d(I,{A:()=>r,C:()=>d,W8:()=>s,x5:()=>m});var t=e(11024),n=e(64167),i=e(69730);function s(o,l){return r((0,i.PI)(o,l?.field),l)}function r(o,l,a){if(!o){const v=l.fixed??0;return{isAssumed:!!l.field?.length||!l.fixed,fixed:v,value:()=>v,get:()=>v}}const g=(0,t.dz)(o),c=l.max-l.min;if(o.values.length<1||c<=0||g.delta<=0)return{fixed:l.min,value:()=>l.min,get:()=>l.min};let f=v=>l.min+v*c;if(a===n.B5.Quad){const v=Math.PI*(l.max/2)**2,y=Math.PI*(l.min/2)**2,E=v-y;f=C=>{let u=y+E*C;return Math.sqrt(u/Math.PI)*2}}const b=v=>{const y=o.values[v];let E=0;return y!==-1/0&&(E=(y-g.min)/g.delta),E>1?E=1:E<0&&(E=0),f(E)};return{get:b,value:()=>b((0,i.cR)(o)),field:o}}function m(o){return o||(o={min:0,max:1}),o.min==null&&(o.min=0),o.max==null&&(o.max=1),o}function d(o,l){let{min:a,max:g}=m(l);if(o||(o={}),o.max==null&&(o.max=g),o.min==null&&(o.min=a),o.min>o.max){const c=o.max;o.max=o.min,o.min=c}return o.min<a&&(o.min=a),o.max>g&&(o.max=g),o.fixed==null&&(o.fixed=o.min+(o.max-o.min)/2),o.field||(o.fixed>g?o.fixed=g:o.fixed<a&&(o.fixed=a)),o}},1553:(j,I,e)=>{"use strict";e.d(I,{DD:()=>s,QS:()=>i,hQ:()=>r,qj:()=>n,zc:()=>m});var t=e(64167);const n=Object.freeze({fixed:"",mode:t.xy.Field,field:""});var i=(d=>(d.Icon="img/icons/unicons",d.IOT="img/icons/iot",d.Marker="img/icons/marker",d.BG="img/bg",d))(i||{}),s=(d=>(d.Icon="icon",d.Image="image",d))(s||{}),r=(d=>(d.Folder="folder",d.URL="url",d.Upload="upload",d))(r||{}),m=(d=>(d.SMALL="small",d.NORMAL="normal",d))(m||{})},69730:(j,I,e)=>{"use strict";e.d(I,{FP:()=>m,PI:()=>g,Qz:()=>l,WO:()=>a,cR:()=>h,pb:()=>d,rj:()=>c,z2:()=>o});var t=e(75578),n=e(66656),i=e(34667),s=e(82382),r=e(74243);function m(f,b){if(f?.series&&b.field)for(const v of f.series){const y=(0,s.getColorDimension)(v,b,i.config.theme2);if(!y.isAssumed||f.series.length===1)return y}return(0,s.getColorDimension)(void 0,b,i.config.theme2)}function d(f,b){if(f?.series&&b.field)for(const v of f.series){const y=(0,s.getScaledDimension)(v,b);if(!y.isAssumed||f.series.length===1)return y}return(0,s.getScaledDimension)(void 0,b)}function o(f,b){if(f?.series&&b.field)for(const v of f.series){const y=(0,r.y)(v,b);if(!y.isAssumed||f.series.length===1)return y}return(0,r.y)(void 0,b)}function l(f,b){if(f?.series&&b.field)for(const v of f.series){const y=(0,s.getResourceDimension)(v,b);if(!y.isAssumed||f.series.length===1)return y}return(0,s.getResourceDimension)(void 0,b)}function a(f,b){if(f?.series&&b.field)for(const v of f.series){const y=(0,s.getTextDimension)(v,b);if(!y.isAssumed||f.series.length===1)return y}return(0,s.getTextDimension)(void 0,b)}function g(f,b){const v=c(f,b);return v==null?void 0:f.fields[v]}function c(f,b){if(!(!f||!b?.length))for(let v=0;v<f.fields.length;v++){const y=f.fields[v];if(b===y.name)return v;const E=(0,t.CZ)(y,f);if(b===E)return v}}function h(f){const b=f.state?.calcs;if(b){const E=b[n.gz.lastNotNull];if(E!=null)return E}const v=f.values;let y=v.length-1;for(;y>=0;){const E=v[y--];if(E!=null)return E}}},18262:(j,I,e)=>{"use strict";e.d(I,{I:()=>o,a:()=>d});var t=e(42844),n=e(27702),i=e(66310),s=e(26807),r=e(98558);const m=(l,a)=>({valueNavigation:(0,t.css)`
      width: ${r.vl};
      font-weight: bold;
    `,valueNavigationWrapper:(0,t.css)`
      display: flex;
      justify-content: flex-end;
    `,itemLabelsWrap:(0,t.css)`
      ${a?"":`border-bottom: 1px solid ${l.colors.border.medium}`};
    `}),d=l=>l.includes(s.QG)?l.replace(s.QG,""):l,o=({valueLabels:l,expanded:a})=>{const g=(0,i.wW)(c=>m(c,a));return n.createElement("div",{className:g.itemLabelsWrap},n.createElement("div",{className:g.valueNavigationWrapper},l.map((c,h)=>n.createElement("span",{className:g.valueNavigation,key:c.name},d(c.name)))))}},98558:(j,I,e)=>{"use strict";e.d(I,{ZP:()=>u,vl:()=>b,Cw:()=>v});var t=e(42844),n=e(27702),i=e(1277),s=e(86312),r=e(66310),m=e(67437),d=e(18262),o=e(747);const l=(D,P)=>({rowWrapper:(0,t.css)`
    position: relative;
    min-width: ${b};
    padding-right: 5px;
  `,rowValue:(0,t.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    display: block;
    padding-right: 10px;

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:before {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(to right, transparent calc(100% - 25px), ${D.colors.background.primary});
    }
  `,rowValuesWrap:(0,t.css)`
    padding-left: ${v};
    width: calc(${P} * ${b});
    display: flex;
  `}),a=({totalNumberOfValues:D,values:P,hideFieldsWithoutValues:S})=>{const x=(0,r.wW)(M=>l(M,D));return n.createElement("div",{role:"cell",className:x.rowValuesWrap},P?.map(M=>S&&(M.value===void 0||M.value===o.T)?null:n.createElement("span",{key:M.key,className:x.rowWrapper},n.createElement("span",{className:x.rowValue},M.value))))},g=D=>{const P=D.isDark?"#ce9178":"#a31515",S=D.isDark?"#73bf69":"#56a64b";return{metricName:(0,t.css)`
      color: ${S};
    `,metricValue:(0,t.css)`
      color: ${P};
    `,expanded:(0,t.css)`
      display: block;
      text-indent: 1em;
    `}},h=({value:D,index:P,length:S,isExpandedView:x})=>{const M=(0,r.wW)(g),R=D.key,O=D.value;return n.createElement("span",{className:x?M.expanded:"",key:P},n.createElement("span",{className:M.metricName},R),n.createElement("span",null,"="),n.createElement("span",null,'"'),n.createElement("span",{className:M.metricValue},O),n.createElement("span",null,'"'),P<S-1&&n.createElement("span",null,", "))},f="20px",b="80px",v="25px",y=(D,P,S)=>({rowWrapper:(0,t.css)`
    border-bottom: 1px solid ${D.colors.border.medium};
    display: flex;
    position: relative;
    padding-left: 22px;
    ${S?"":"align-items: center;"}
    ${S?"":"height: 100%;"}
  `,copyToClipboardWrapper:(0,t.css)`
    position: absolute;
    left: 0;
    ${S?"":"bottom: 0;"}
    ${S?"top: 4px;":"top: 0;"}
    margin: auto;
    z-index: 1;
    height: 16px;
    width: 16px;
  `,rowLabelWrapWrap:(0,t.css)`
    position: relative;
    width: calc(100% - (${P} * ${b}) - ${v});
  `,rowLabelWrap:(0,t.css)`
    white-space: nowrap;
    overflow-x: auto;
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
    padding-right: ${f};

    &::-webkit-scrollbar {
      display: none; /* Chrome, Safari and Opera */
    }

    &:after {
      pointer-events: none;
      content: '';
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      background: linear-gradient(
        to right,
        transparent calc(100% - ${f}),
        ${D.colors.background.primary}
      );
    }
  `});function E(D){let P=[],S=[];for(const x in D)x in D&&D[x]&&!x.includes("Value")?P.push({key:x,value:D[x]}):x in D&&D[x]&&x.includes("Value")&&S.push({key:x,value:D[x]});return{values:S,attributeValues:P}}const u=({listItemData:D,listKey:P,totalNumberOfValues:S,valueLabels:x,isExpandedView:M})=>{const{__name__:R,...O}=D,[T,U]=(0,i.Z)(),L=x?.length??S,V=(0,r.wW)(k=>y(k,L,M)),{values:w,attributeValues:K}=E(O),B=k=>k==="\u221E"||k==="Infinity"?"+Inf":k,W=`${R}{${K.map(k=>`${k.key}="${B(k.value)}"`)}}`,_=!!(x&&x?.length);return n.createElement(n.Fragment,null,x!==void 0&&M&&n.createElement(d.I,{valueLabels:x,expanded:M}),n.createElement("div",{key:P,className:V.rowWrapper},n.createElement("span",{className:V.copyToClipboardWrapper},n.createElement(m.h,{tooltip:"Copy to clipboard",onClick:()=>{(0,s.ff)("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),U(W)},name:"copy"})),n.createElement("span",{role:"cell",className:V.rowLabelWrapWrap},n.createElement("div",{className:V.rowLabelWrap},n.createElement("span",null,R),n.createElement("span",null,"{"),n.createElement("span",null,K.map((k,A)=>n.createElement(h,{isExpandedView:M,value:k,key:A,index:A,length:K.length}))),n.createElement("span",null,"}"))),n.createElement(a,{hideFieldsWithoutValues:_,totalNumberOfValues:L,values:w})))}},58692:(j,I,e)=>{"use strict";e.d(I,{q:()=>i});var t=e(27702),n=e(99633);const i=({timeInMs:r,className:m,humanize:d})=>t.createElement("span",{className:m},s(r,d)),s=(r,m=!1)=>{const d=r/1e3;if(!m)return`${d.toFixed(1)}s`;const o=(0,n.Ks)(d,"seconds"),l=o.hours(),a=o.minutes(),g=o.seconds();return l?`${l}h ${a}m ${g}s`:a?`${a}m ${g}s`:`${g}s`}},67066:(j,I,e)=>{"use strict";e.d(I,{m:()=>Be});var t=e(42844),n=e(27702),i=e(73195),s=e(62247),r=e(3569),m=e(39317),d=e(66310),o=e(51778),l=e(5926),a=e(6327),g=e(18771),c=e(92662),h=e(28382),f=e(89898),b=e.n(f),v=e(82152),y=e(90170),E=e(80402),C=e(20609),u=e(84720);const D=.8,P=2,S=200,x=10,M=60,R=6;function O(he,He,Pe,Ie,Te){const Re=new Map,ue=He.length<M?M:Math.min(He.length,S),xe=window.innerWidth*2;he.width=xe,he.height=ue;const Ve=Math.min(R,Math.max(P,ue/He.length)),Ne=ue/He.length,fe=he.getContext("2d",{alpha:!1});if(fe){fe.fillStyle=Te,fe.fillRect(0,0,xe,ue);for(let ve=0;ve<He.length;ve++){const{valueWidth:ze,valueOffset:Oe,serviceName:Fe}=He[ve],Ge=Oe/Pe*xe;let nt=ze/Pe*xe;nt<x&&(nt=x);let Xe=Re.get(Fe);Xe||(Xe=`rgba(${Ie(Fe).concat(D).join()})`,Re.set(Fe,Xe)),fe.fillStyle=Xe,fe.fillRect(Ge,ve*Ne,nt,Ve)}}}const T=(0,E.B)(he=>({CanvasSpanGraph:(0,t.css)`
      label: CanvasSpanGraph;
      background: ${(0,C.h)(he,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class U extends n.PureComponent{constructor(He){super(He),this.getColor=Pe=>(0,u.e6)(Pe,this.props.theme),this._setCanvasRef=Pe=>{this._canvasElm=Pe},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:He,items:Pe}=this.props;O(this._canvasElm,Pe,He,this.getColor,(0,C.h)(this.props.theme,"#fff"))}}render(){return n.createElement("canvas",{className:T(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const L=(0,d.HE)(U);var V=e(25985);const w=()=>({TickLabels:(0,t.css)`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:(0,t.css)`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function K(he){const{numTicks:He,duration:Pe}=he,Ie=(0,d.wW)(w),Te=[];for(let Re=0;Re<He+1;Re++){const ue=Re/He,xe=ue===1?{right:"0%"}:{left:`${ue*100}%`};Te.push(n.createElement("div",{key:ue,className:Ie.TickLabelsLabel,style:xe,"data-testid":"tick"},(0,V.LU)(Pe*ue)))}return n.createElement("div",{className:Ie.TickLabels,"data-testid":"TickLabels"},Te)}var B=e(66670),W=e(8033);const _=()=>({GraphTick:(0,t.css)`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function k(he){const{numTicks:He}=he,Pe=(0,d.wW)(_),Ie=[];for(let Te=1;Te<He;Te++){const Re=`${Te/He*100}%`;Ie.push(n.createElement("line",{className:Pe.GraphTick,x1:Re,y1:"0%",x2:Re,y2:"100%",key:Te/He}))}return n.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Ie)}const A=()=>({ScrubberHandleExpansion:b()((0,t.css)`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:b()((0,t.css)`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:b()((0,t.css)`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:(0,t.css)`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:(0,t.css)`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function z({isDragging:he,onMouseDown:He,onMouseEnter:Pe,onMouseLeave:Ie,position:Te}){const Re=`${Te*100}%`,ue=(0,d.wW)(A),xe=b()({[ue.ScrubberDragging]:he});return n.createElement("g",{className:xe,"data-testid":"scrubber-component"},n.createElement("g",{"data-testid":"scrubber-component-g",className:ue.ScrubberHandles,onMouseDown:He,onMouseEnter:Pe,onMouseLeave:Ie},n.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:Re,className:ue.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),n.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:Re,className:ue.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),n.createElement("line",{className:ue.ScrubberLine,y2:"100%",x1:Re,x2:Re,"data-testid":"scrubber-component-line"}))}const H=(0,E.B)(he=>{const He="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Pe=(0,t.css)`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:(0,t.css)`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${He} {
        display: unset;
      }
    `,ViewingLayerGraph:(0,t.css)`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,C.h)(he,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:(0,t.css)`
      label: ViewingLayerInactive;
      fill: ${(0,C.h)(he,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:(0,t.css)`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,C.h)(he,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:(0,t.css)`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:(0,t.css)`
      label: ViewingLayerDrag;
      fill: ${(0,C.h)(he,"#44f")};
    `,ViewingLayerFullOverlay:(0,t.css)`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Pe,ViewingLayerResetZoomHoverClassName:He}}),Q={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function X(he,He){const[Pe,Ie]=he<He?[he,He]:[He,he];return{x:`${Pe*100}%`,width:`${(Ie-Pe)*100}%`,leadingX:`${He*100}%`}}class te extends n.PureComponent{constructor(He){super(He),this._setRoot=Pe=>{this._root=Pe},this._getDraggingBounds=Pe=>{if(!this._root)throw new Error("invalid state");const{left:Ie,width:Te}=this._root.getBoundingClientRect(),[Re,ue]=this.props.viewRange.time.current;let xe=1,Ve=0;return Pe===Q.SHIFT_START?xe=ue:Pe===Q.SHIFT_END&&(Ve=Re),{clientXLeft:Ie,maxValue:xe,minValue:Ve,width:Te}},this._handleReframeMouseMove=({value:Pe})=>{this.props.updateNextViewRangeTime({cursor:Pe})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Pe})=>{const Ie=Pe,{time:Te}=this.props.viewRange,ue={reframe:{anchor:Te.reframe?Te.reframe.anchor:Ie,shift:Ie}};this.props.updateNextViewRangeTime(ue)},this._handleReframeDragEnd=({manager:Pe,value:Ie})=>{const{time:Te}=this.props.viewRange,Re=Te.reframe?Te.reframe.anchor:Ie,[ue,xe]=Ie<Re?[Ie,Re]:[Re,Ie];Pe.resetBounds(),this.props.updateViewRangeTime(ue,xe,"minimap")},this._handleScrubberEnterLeave=({type:Pe})=>{const Ie=Pe===W.EUpdateTypes.MouseEnter;this.setState({preventCursorLine:Ie})},this._handleScrubberDragUpdate=({event:Pe,tag:Ie,type:Te,value:Re})=>{Te===W.EUpdateTypes.DragStart&&Pe.stopPropagation(),Ie===Q.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:Re}):Ie===Q.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:Re})},this._handleScrubberDragEnd=({manager:Pe,tag:Ie,value:Te})=>{const[Re,ue]=this.props.viewRange.time.current;let xe;if(Ie===Q.SHIFT_START)xe=[Te,ue];else if(Ie===Q.SHIFT_END)xe=[Re,Te];else throw new Error("bad state");Pe.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(xe[0],xe[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new W.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:Q.REFRAME}),this._draggerStart=new W.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:Q.SHIFT_START}),this._draggerEnd=new W.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:Q.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(He,Pe){const Ie=H(this.props.theme),Te=X(He,Pe);return[n.createElement("rect",{key:"fill",className:b()(Ie.ViewingLayerDraggedShift,Ie.ViewingLayerDrag),x:Te.x,y:"0",width:Te.width,height:this.props.height-2}),n.createElement("rect",{key:"edge",className:b()(Ie.ViewingLayerDrag),x:Te.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:He,viewRange:Pe,numTicks:Ie,theme:Te}=this.props,{preventCursorLine:Re}=this.state,{current:ue,cursor:xe,shiftStart:Ve,shiftEnd:Ne,reframe:fe}=Pe.time,ve=Ve!=null||Ne!=null||fe!=null,[ze,Oe]=ue;let Fe=0;ze&&(Fe=ze*100);let Ge=100;Oe&&(Ge=100-Oe*100);let nt;!ve&&xe!=null&&!Re&&(nt=`${xe*100}%`);const Xe=H(Te);return n.createElement("div",{"aria-hidden":!0,className:Xe.ViewingLayer,style:{height:He}},(ze!==0||Oe!==1)&&n.createElement(B.zx,{onClick:this._resetTimeZoomClickHandler,className:b()(Xe.ViewingLayerResetZoom,Xe.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),n.createElement("svg",{height:He,className:Xe.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},Fe>0&&n.createElement("rect",{x:0,y:0,height:"100%",width:`${Fe}%`,className:Xe.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),Ge>0&&n.createElement("rect",{x:`${100-Ge}%`,y:0,height:"100%",width:`${Ge}%`,className:Xe.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),n.createElement(k,{numTicks:Ie}),nt&&n.createElement("line",{className:Xe.ViewingLayerCursorGuide,x1:nt,y1:"0",x2:nt,y2:He-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),Ve!=null&&this._getMarkers(ze,Ve),Ne!=null&&this._getMarkers(Oe,Ne),n.createElement(z,{isDragging:Ve!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:ze||0}),n.createElement(z,{isDragging:Ne!=null,position:Oe||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),fe!=null&&this._getMarkers(fe.anchor,fe.shift)),ve&&n.createElement("div",{className:Xe.ViewingLayerFullOverlay}))}}const oe=(0,d.HE)(te),Z=60,le=4;function ce(he){return{valueOffset:he.relativeStartTime,valueWidth:he.duration,serviceName:he.process.serviceName}}function q(he){return he.spans.map(ce)}const ne=(0,v.Z)(q);class pe extends n.PureComponent{render(){const{height:He,trace:Pe,viewRange:Ie,updateNextViewRangeTime:Te,updateViewRangeTime:Re}=this.props;if(!Pe)return n.createElement("div",null);const ue=ne(Pe);return n.createElement("div",{className:b()(y.GL,y.H3)},n.createElement(K,{numTicks:le,duration:Pe.duration}),n.createElement("div",{className:y.WW},n.createElement(L,{valueWidth:Pe.duration,items:ue}),n.createElement(oe,{viewRange:Ie,numTicks:le,height:He||Z,updateViewRangeTime:Re,updateNextViewRangeTime:Te})))}}pe.defaultProps={height:Z};var re=e(76305),ie=e(99633),Se=e(73453),ye=e(20205),Ce=e(66798);function de({splitOpenFn:he,traceToLogsOptions:He,traceToMetricsOptions:Pe,dataFrame:Ie,createFocusSpanLink:Te,trace:Re}){if(!Ie)return;let ue=We(Re);const xe=Ie.fields.some(Ne=>!!Ne.config.links?.length),Ve=_e(he,Ie.fields[0],He,Pe,Te,ue);return function(fe){let ve=Ve(fe);if(xe){ue={...ue,...qe(fe)};const ze=Ie.fields.filter(Oe=>!!Oe.config.links?.length);try{let Oe=[];ze.forEach(Ge=>{const nt=(0,ye.a_)({field:Ge,rowIndex:fe.dataFrameRowIndex,splitOpenFn:he,range:Me(fe),dataFrame:Ie,vars:ue});Oe=Oe.concat(nt)});const Fe=Oe.map(Ge=>({title:Ge.title,href:Ge.href,onClick:Ge.onClick,content:n.createElement(Se.J,{name:"link",title:Ge.title||"Link"}),field:Ge.origin,type:Ce.u.Unknown}));ve.push.apply(ve,Fe)}catch(Oe){return console.error(Oe),ve}}return ve}}const we=["cluster","hostname","namespace","pod"].map(he=>({key:he}));function _e(he,He,Pe,Ie,Te,Re){let ue;Pe?.datasourceUid&&(ue=(0,l.ak)().getInstanceSettings(Pe.datasourceUid));const xe=ue?.type==="grafana-splunk-datasource";let Ve;return Ie?.datasourceUid&&(Ve=(0,l.ak)().getInstanceSettings(Ie.datasourceUid)),function(fe){Re={...Re,...qe(fe)};const ve=[];let ze,Oe="";if(ue&&Pe){const Fe=Pe.customQuery?Pe.query:void 0,Ge=Pe.tags||we;switch(ue?.type){case"loki":Oe=lt(fe,Ge),ze=Je(fe,Pe,Oe,Fe);break;case"grafana-splunk-datasource":Oe=lt(fe,Ge,{joinBy:" "}),ze=$e(fe,Pe,Oe,Fe);break;case"elasticsearch":case"grafana-opensearch-datasource":Oe=lt(fe,Ge,{labelValueSign:":",joinBy:" AND "}),ze=Ue(fe,Pe,Oe,Fe);break;case"grafana-falconlogscale-datasource":Oe=lt(fe,Ge,{joinBy:" OR "}),ze=tt(fe,Pe,Oe,Fe);break;case"googlecloud-logging-datasource":Oe=lt(fe,Ge,{joinBy:" AND "}),ze=Qe(fe,Pe,Oe,Fe)}if(ze){const nt={title:ue.name,url:"",internal:{datasourceUid:ue.uid,datasourceName:ue.name,query:ze}};if(Re={...Re,__tags:{text:"Tags",value:Oe}},(0,ye.lt)(nt.internal.query,Re).allVariablesDefined){const Xe=(0,r._)({link:nt,internalLink:nt.internal,scopedVars:Re,range:Me(fe,{startMs:Pe.spanStartTimeShift?re.intervalToMs(Pe.spanStartTimeShift):0,endMs:Pe.spanEndTimeShift?re.intervalToMs(Pe.spanEndTimeShift):0},xe),field:{},onClickFn:he,replaceVariables:(0,m.J)().replace.bind((0,m.J)())});ve.push({href:Xe.href,title:"Related logs",onClick:Xe.onClick,content:n.createElement(Se.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:He,type:Ce.u.Logs})}}}if(Ve&&Ie?.queries)for(const Fe of Ie.queries){const Ge=De(Fe,Ie?.tags||[],fe),nt={title:Ve.name,url:"",internal:{datasourceUid:Ve.uid,datasourceName:Ve.name,query:{expr:Ge,refId:"A"}}},Xe=(0,r._)({link:nt,internalLink:nt.internal,scopedVars:{},range:Me(fe,{startMs:Ie.spanStartTimeShift?re.intervalToMs(Ie.spanStartTimeShift):0,endMs:Ie.spanEndTimeShift?re.intervalToMs(Ie.spanEndTimeShift):0}),field:{},onClickFn:he,replaceVariables:(0,m.J)().replace.bind((0,m.J)())});ve.push({title:Fe?.name,href:Xe.href,onClick:Xe.onClick,content:n.createElement(Se.J,{name:"chart-line",title:"Explore metrics for this span"}),field:He,type:Ce.u.Metrics})}if(fe.references&&Te)for(const Fe of fe.references){if(Fe.refType==="CHILD_OF")continue;const Ge=Te(Fe.traceID,Fe.spanID);ve.push({href:Ge.href,title:Fe.span?Fe.span.operationName:"View linked span",content:n.createElement(Se.J,{name:"link",title:"View linked span"}),onClick:Ge.onClick,field:Ge.origin,type:Ce.u.Traces})}if(fe.subsidiarilyReferencedBy&&Te)for(const Fe of fe.subsidiarilyReferencedBy){const Ge=Te(Fe.traceID,Fe.spanID);ve.push({href:Ge.href,title:Fe.span?Fe.span.operationName:"View linked span",content:n.createElement(Se.J,{name:"link",title:"View linked span"}),onClick:Ge.onClick,field:Ge.origin,type:Ce.u.Traces})}return ve}}function Je(he,He,Pe,Ie){const{filterByTraceID:Te,filterBySpanID:Re}=He;if(Ie)return{expr:Ie,refId:""};if(!Pe)return;let ue="{${__tags}}";return Te&&he.traceID&&(ue+=' |="${__span.traceId}"'),Re&&he.spanID&&(ue+=' |="${__span.spanId}"'),{expr:ue,refId:""}}function Ue(he,He,Pe,Ie){const{filterByTraceID:Te,filterBySpanID:Re}=He;if(Ie)return{query:Ie,refId:"",metrics:[{id:"1",type:"logs"}]};let ue=[];return Re&&he.spanID&&ue.push('"${__span.spanId}"'),Te&&he.traceID&&ue.push('"${__span.traceId}"'),Pe&&ue.push("${__tags}"),{query:ue.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function $e(he,He,Pe,Ie){const{filterByTraceID:Te,filterBySpanID:Re}=He;if(Ie)return{query:Ie,refId:""};let ue="";return Pe&&(ue+="${__tags}"),Te&&he.traceID&&(ue+=' "${__span.traceId}"'),Re&&he.spanID&&(ue+=' "${__span.spanId}"'),{query:ue,refId:""}}function Qe(he,He,Pe,Ie){const{filterByTraceID:Te,filterBySpanID:Re}=He;if(Ie)return{query:Ie,refId:""};let ue=[];return Re&&he.spanID&&ue.push('"${__span.spanId}"'),Te&&he.traceID&&ue.push('"${__span.traceId}"'),Pe&&ue.push("${__tags}"),{query:ue.join(" AND "),refId:""}}function tt(he,He,Pe,Ie){const{filterByTraceID:Te,filterBySpanID:Re}=He;if(Ie)return{lsql:Ie,refId:""};if(!Pe)return;let ue="${__tags}";return Te&&he.traceID&&(ue+=' or "${__span.traceId}"'),Re&&he.spanID&&(ue+=' or "${__span.spanId}"'),{lsql:ue,refId:""}}function lt(he,He,{labelValueSign:Pe="=",joinBy:Ie=", "}={}){return[...he.process.tags,...he.tags,{key:"spanId",value:he.spanID},{key:"traceId",value:he.traceID},{key:"name",value:he.operationName},{key:"duration",value:he.duration}].map(Te=>{const Re=He.find(ue=>ue.key===Te.key);if(Re)return`${Re.value?Re.value:Re.key}${Pe}"${Te.value}"`}).filter(Te=>!!Te).join(Ie)}function Me(he,He={startMs:0,endMs:0},Pe=!1){const Ie=Math.floor(he.startTime/1e3+He.startMs),Te=(0,ie.CQ)(Ie),Re=(he.startTime+he.duration)/1e3;let ue=Math.floor(Re+He.endMs);Pe&&ue-Ie<1e3?ue=Ie+1e3:Ie===ue&&ue++;const xe=(0,ie.CQ)(ue);return{from:Te,to:xe,raw:{from:Te,to:xe}}}function De(he,He=[],Pe){if(!he.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${Pe.process.serviceName}"}[5m])) by (le))`;let Ie=he.query;if(He.length&&Ie.indexOf("$__tags")!==-1){const Te=[...Pe.process.tags,...Pe.tags],ue=He.reduce((xe,Ve)=>{const Ne=Te.find(fe=>fe.key===Ve.key)?.value;return Ne&&xe.push(`${Ve.value?Ve.value:Ve.key}="${Ne}"`),xe},[])?.join(", ");Ie=Ie.replace(/\$__tags/g,ue)}return Ie}function We(he){return{__trace:{text:"Trace",value:{duration:he.duration,name:he.traceName,traceId:he.traceID}}}}function qe(he){const He={};for(const Pe of he.process.tags)He[Pe.key]=Pe.value;for(const Pe of he.tags)He[Pe.key]=Pe.value;return{__span:{text:"Span",value:{spanId:he.spanID,traceId:he.traceID,duration:he.duration,name:he.operationName,tags:He}}}}function st(){const[he,He]=(0,n.useState)(new Set),Pe=(0,n.useCallback)(function(Ve){if(he.size===0)return;let Ne=-1,fe=!0;const ve=Ve.reduce((ze,Oe)=>(Oe.depth<=Ne&&(fe=!0),fe&&ze.has(Oe.spanID)&&(ze.delete(Oe.spanID),fe=!1,Ne=Oe.depth),ze),new Set(he));He(ve)},[he]),Ie=(0,n.useCallback)(function(Ve){if(dt(Ve,he))return;let Ne;const fe=Ve.reduce((ve,ze)=>(Ne&&ze.depth<=Ne.depth?(ve.add(Ne.spanID),ze.hasChildren&&(Ne=ze)):ze.hasChildren&&!ve.has(ze.spanID)&&(Ne=ze),ve),new Set(he));Ne&&fe.add(Ne.spanID),He(fe)},[he]),Te=(0,n.useCallback)(function(){He(new Set)},[]),Re=(0,n.useCallback)(function(Ve){if(dt(Ve,he))return;const Ne=Ve.reduce((fe,ve)=>(ve.hasChildren&&fe.add(ve.spanID),fe),new Set);He(Ne)},[he]),ue=(0,n.useCallback)(function(Ve){const Ne=new Set(he);he.has(Ve)?Ne.delete(Ve):Ne.add(Ve),He(Ne)},[he]);return{childrenHiddenIDs:he,expandOne:Pe,collapseOne:Ie,expandAll:Te,collapseAll:Re,childrenToggle:ue}}function dt(he,He){return he.filter(Ie=>Ie.hasChildren).length===He.size}function Tt(he){const[He,Pe]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{Pe(new Map)},[he,Pe]);const Ie=(0,n.useCallback)(function(xe){const Ve=new Map(He);Ve.has(xe)?Ve.delete(xe):Ve.set(xe,new h.DetailState),Pe(Ve)},[He]),Te=(0,n.useCallback)(function(xe,Ve){const Ne=He.get(xe);if(!Ne)return;const fe=Ne.toggleLogItem(Ve),ve=new Map(He);return ve.set(xe,fe),Pe(ve)},[He]),Re=(0,n.useCallback)(function(xe,Ve){const Ne=He.get(xe);if(!Ne)return;const fe=Ne.toggleReferenceItem(Ve),ve=new Map(He);return ve.set(xe,fe),Pe(ve)},[He]);return{detailStates:He,toggleDetail:Ie,detailLogItemToggle:Te,detailLogsToggle:(0,n.useCallback)(ue=>Nt("logs",He,Pe)(ue),[He]),detailWarningsToggle:(0,n.useCallback)(ue=>Nt("warnings",He,Pe)(ue),[He]),detailStackTracesToggle:(0,n.useCallback)(ue=>Nt("stackTraces",He,Pe)(ue),[He]),detailReferenceItemToggle:Re,detailReferencesToggle:(0,n.useCallback)(ue=>Nt("references",He,Pe)(ue),[He]),detailProcessToggle:(0,n.useCallback)(ue=>Nt("process",He,Pe)(ue),[He]),detailTagsToggle:(0,n.useCallback)(ue=>Nt("tags",He,Pe)(ue),[He])}}function Nt(he,He,Pe){return Ie=>{const Te=He.get(Ie);if(!Te)return;let Re;he==="tags"?Re=Te.toggleTags():he==="process"?Re=Te.toggleProcess():he==="warnings"?Re=Te.toggleWarnings():he==="references"?Re=Te.toggleReferences():he==="stackTraces"?Re=Te.toggleStackTraces():Re=Te.toggleLogs();const ue=new Map(He);ue.set(Ie,Re),Pe(ue)}}function Bt(){const[he,He]=(0,n.useState)(new Set),Pe=(0,n.useCallback)(function(Re){He(ue=>{const xe=new Set(ue);return xe.add(Re),xe})},[]),Ie=(0,n.useCallback)(function(Re){He(ue=>{const xe=new Set(ue);return xe.delete(Re),xe})},[]);return{hoverIndentGuideIds:he,addHoverIndentGuideId:Pe,removeHoverIndentGuideId:Ie}}var yt=e(24540);function ft(){const[he,He]=(0,n.useState)({time:{current:[0,1]}}),Pe=(0,n.useCallback)(function(Re){He(ue=>{const xe={...ue.time,...Re};return{...ue,time:xe}})},[]),Ie=(0,n.useCallback)(function(Re,ue){const Ve={current:[Re,ue]};He(Ne=>({...Ne,time:Ve}))},[]);return{viewRange:he,updateViewRangeTime:Ie,updateNextViewRangeTime:Pe}}const ct=he=>({noDataMsg:(0,t.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${he.typography.h4.fontSize};
    color: ${he.colors.text.secondary};
  `});function ge(){return{}}function Be(he){const{traceProp:He,datasource:Pe,topOfViewRef:Ie,topOfViewRefType:Te,exploreId:Re}=he,{detailStates:ue,toggleDetail:xe,detailLogItemToggle:Ve,detailLogsToggle:Ne,detailProcessToggle:fe,detailReferencesToggle:ve,detailReferenceItemToggle:ze,detailTagsToggle:Oe,detailWarningsToggle:Fe,detailStackTracesToggle:Ge}=Tt(he.dataFrames[0]),{removeHoverIndentGuideId:nt,addHoverIndentGuideId:Xe,hoverIndentGuideIds:ut}=Bt(),{viewRange:ht,updateViewRangeTime:wt,updateNextViewRangeTime:mn}=ft(),{expandOne:vn,collapseOne:gn,childrenToggle:Sn,collapseAll:Cn,childrenHiddenIDs:pn,expandAll:nn}=st(),{search:Ct,setSearch:bt,spanFilterMatches:Ut}=(0,yt.Rx)(He?.spans),[_t,Gt]=(0,n.useState)(""),[jt,sn]=(0,i.Z)(!1),[St,mt]=(0,n.useState)(!1),[kt,it]=(0,n.useState)(100),pt=(0,d.wW)(ct),[It,Qt]=(0,n.useState)(.25),[rn,un]=Le({refId:he.dataFrames[0]?.refId,exploreId:he.exploreId,datasource:Pe,splitOpenFn:he.splitOpenFn}),xn=(0,n.useMemo)(()=>({childrenHiddenIDs:pn,detailStates:ue,hoverIndentGuideIds:ut,spanNameColumnWidth:It,traceID:he.traceProp?.traceID}),[pn,ue,ut,It,he.traceProp?.traceID]),Kn=(0,l.ak)().getInstanceSettings(Pe?.name),_n=(0,o.p1)(Kn?.jsonData),Ma=Kn?.jsonData?.tracesToMetrics,la=Kn?.jsonData,aa=(0,n.useMemo)(()=>de({splitOpenFn:he.splitOpenFn,traceToLogsOptions:_n,traceToMetricsOptions:Ma,dataFrame:he.dataFrames[0],createFocusSpanLink:un,trace:He}),[he.splitOpenFn,_n,Ma,he.dataFrames,un,He]),ba=(0,g.useSelector)(Ha=>(0,a.Z)(Ha.user)),ga=Pe?Pe?.type:"unknown",Ca=he.scrollElement?he.scrollElement:document.getElementsByClassName(he.scrollElementClass??"")[0];return n.createElement(n.Fragment,null,he.dataFrames?.length&&He?n.createElement(n.Fragment,null,n.createElement(h.TracePageHeader,{trace:He,data:he.dataFrames[0],timeZone:ba,search:Ct,setSearch:bt,showSpanFilters:jt,setShowSpanFilters:sn,showSpanFilterMatchesOnly:St,setShowSpanFilterMatchesOnly:mt,setFocusedSpanIdForSearch:Gt,spanFilterMatches:Ut,datasourceType:ga,setHeaderHeight:it,app:Re?s.zj.Explore:s.zj.Unknown}),n.createElement(pe,{trace:He,viewRange:ht,updateNextViewRangeTime:mn,updateViewRangeTime:wt}),n.createElement(h.TraceTimelineViewer,{registerAccessors:ge,findMatchesIDs:Ut,trace:He,datasourceType:ga,spanBarOptions:la?.spanBar,traceTimeline:xn,updateNextViewRangeTime:mn,updateViewRangeTime:wt,viewRange:ht,timeZone:ba,setSpanNameColumnWidth:Qt,collapseAll:Cn,collapseOne:gn,expandAll:nn,expandOne:vn,childrenToggle:Sn,detailLogItemToggle:Ve,detailLogsToggle:Ne,detailWarningsToggle:Fe,detailStackTracesToggle:Ge,detailReferencesToggle:ve,detailReferenceItemToggle:ze,detailProcessToggle:fe,detailTagsToggle:Oe,detailToggle:xe,addHoverIndentGuideId:Xe,removeHoverIndentGuideId:nt,linksGetter:()=>[],createSpanLink:aa,scrollElement:Ca,focusedSpanId:rn,focusedSpanIdForSearch:_t,showSpanFilterMatchesOnly:St,createFocusSpanLink:un,topOfViewRef:Ie,topOfViewRefType:Te,headerHeight:kt})):n.createElement("div",{className:pt.noDataMsg},"No data"))}function Le(he){const He=(0,g.useSelector)(xe=>xe.explore.panes[he.exploreId]?.panelsState.trace),Pe=He?.spanId,Ie=(0,g.useDispatch)(),Te=xe=>Ie((0,c.km)(he.exploreId,"trace",{...He,spanId:xe})),Re=(0,g.useSelector)(xe=>xe.explore.panes[he.exploreId]?.queries.find(Ve=>Ve.refId===he.refId));return[Pe,(xe,Ve)=>{const Ne={title:"Deep link to this span",url:"",internal:{datasourceUid:he.datasource?.uid,datasourceName:he.datasource?.name,query:{...Re,query:xe},panelsState:{trace:{spanId:Ve}}}},fe=Re?.queryType==="traceql"&&Re.query===xe;return(0,r._)({link:Ne,internalLink:Ne.internal,scopedVars:{},range:{},field:{},onClickFn:fe?()=>Te(Pe===Ve?void 0:Ve):he.splitOpenFn?()=>he.splitOpenFn({datasourceUid:he.datasource?.uid,queries:[{...Re,query:xe}],panelsState:{trace:{spanId:Ve}}}):void 0,replaceVariables:(0,m.J)().replace.bind((0,m.J)())})}]}},20609:(j,I,e)=>{"use strict";e.d(I,{h:()=>n});var t=e(71685);function n(i,s,r){if(i.isLight)return s;{if(r){const o=(0,t.Z)(s);return t.Z.mostReadable(r,[o.clone().lighten(25),o.clone().lighten(10),o,o.clone().darken(10),o.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const m=(0,t.Z)(s).toHsl();m.l=1-m.l;const d=(0,t.Z)(m);return d.isLight()?d.darken(5).toHex8String():d.lighten(5).toHex8String()}}},59391:(j,I,e)=>{"use strict";e.d(I,{Z:()=>l});var t=e(42844),n=e(89898),i=e.n(n),s=e(27702),r=e(66310),m=e(20609),d=e(58549);const o=a=>({Ticks:(0,t.css)`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:(0,t.css)`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,m.h)(a,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:(0,t.css)`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:(0,t.css)`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function l(a){const{endTime:g,numTicks:c,showLabels:h,startTime:f}=a;let b;if(h){b=[];const E=(g||0)-(f||0);for(let C=0;C<c;C++){const u=(f||0)+C/(c-1)*E;b.push((0,d.LU)(u))}}const v=(0,r.wW)(o),y=[];for(let E=0;E<c;E++){const C=E/(c-1);y.push(s.createElement("div",{"data-testid":"TicksID",key:C,className:v.TicksTick,style:{left:`${C*100}%`}},b&&s.createElement("span",{className:i()(v.TicksTickLabel,{[v.TicksTickLabelEndAnchor]:C>=1})},b[E])))}return s.createElement("div",{className:v.Ticks},y)}l.defaultProps={endTime:null,showLabels:null,startTime:null}},25356:(j,I,e)=>{"use strict";e.d(I,{Z:()=>o});var t=e(42844),n=e(89898),i=e.n(n),s=e(27702),r=e(66310),m=e(90170);const d=()=>({flexRow:(0,t.css)`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function o(a){const{children:g,className:c="",...h}=a,f=(0,r.wW)(d);return s.createElement("div",{className:i()(f.flexRow,c),...h},g)}o.defaultProps={className:""};function l(a){const{children:g,className:c="",width:h,style:f,...b}=a,v=`${h*100}%`,y={...f,flexBasis:v,maxWidth:v};return s.createElement("div",{className:i()(m.WW,c),style:y,"data-testid":"TimelineRowCell",...b},g)}l.defaultProps={className:"",style:{}},o.Cell=l},62227:(j,I,e)=>{"use strict";e.d(I,{l4:()=>Xe,ZP:()=>nn});var t=e(42844),n=e(89949),i=e(82152),s=e(27702),r=e(86312),m=e(34667),d=e(80402),o=e(30973),l=e(66310);const a="peer.service";var g=e(84720);class c{constructor(bt){this.ys=[],this.heights=[],this.bufferLen=bt,this.dataLen=-1,this.lastI=-1}profileData(bt){bt!==this.dataLen&&(this.dataLen=bt,this.ys.length=bt,this.heights.length=bt,this.lastI>=bt&&(this.lastI=bt-1))}calcHeights(bt,Ut,_t){_t!=null&&(this.lastI=_t);let Gt=bt+this.bufferLen;if(Gt<=this.lastI)return;Gt>=this.heights.length&&(Gt=this.heights.length-1);let jt=this.lastI;for(this.lastI===-1&&(jt=0,this.ys[0]=0);jt<=Gt;){const sn=this.heights[jt]=Ut(jt);this.ys[jt+1]=this.ys[jt]+sn,jt++}this.lastI=Gt}calcYs(bt,Ut){for(;(this.ys[this.lastI]==null||bt>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,Ut)}confirmHeight(bt,Ut){let _t=bt;if(_t>this.lastI){this.calcHeights(_t,Ut);return}const Gt=Ut(_t);if(Gt===this.heights[_t])return;const jt=Gt-this.heights[_t];for(this.heights[_t]=Gt;++_t<=this.lastI;)this.ys[_t]+=jt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=jt)}findFloorIndex(bt,Ut){this.calcYs(bt,Ut);let _t=0,Gt=this.lastI;if(this.ys.length<2||bt<this.ys[1])return 0;if(bt>this.ys[Gt])return Gt;let jt;for(;_t<Gt;)if(jt=_t+.5*(Gt-_t)|0,bt>this.ys[jt]){if(bt<=this.ys[jt+1])return jt;_t=jt}else if(bt<this.ys[jt]){if(bt>=this.ys[jt-1])return jt-1;Gt=jt}else return jt;throw new Error(`unable to find floor index for y=${bt}`)}getRowPosition(bt,Ut){return this.confirmHeight(bt,Ut),{height:this.heights[bt],y:this.ys[bt]}}getEstimatedHeight(){const bt=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?bt|0:bt/(this.lastI+1)*this.heights.length|0}}const h=100;class f extends s.Component{constructor(bt){super(bt),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const Ut=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(Ut,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=Ut=>this._yPositions.getRowPosition(Ut,this._getHeight),this.scrollToIndex=(Ut,_t)=>{const{scrollElement:Gt}=this.props,jt=Gt?.getBoundingClientRect().top||0,St=(Gt?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-jt,mt=this.getRowPosition(Ut).y;this.props.scrollElement?.scrollTo({top:mt+St-_t-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const Ut=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,_t=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(Ut<this._startIndexDrawn||_t>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=Ut=>{this.props.windowScroller&&(this._wrapperElm=Ut,Ut&&(this._viewHeight=Ut.clientHeight))},this._initItemHolder=Ut=>{this._itemHolderElm=Ut,this._scanItemHeights()},this._scanItemHeights=()=>{const Ut=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let _t=null,Gt=null,jt=!1;const sn=this._itemHolderElm.childNodes,St=sn.length;for(let mt=0;mt<St;mt++){const kt=sn[mt],it=kt.getAttribute("data-item-key");if(!it){console.warn("itemKey not found");continue}const It=(kt.firstElementChild||kt).clientHeight,Qt=this._knownHeights.get(it);It!==Qt&&(this._knownHeights.set(it,It),jt?Gt=it:(jt=!0,_t=Gt=it))}if(_t!=null&&Gt!=null){const mt=Ut(_t),kt=Gt===_t?mt:Ut(Gt);this._yPositions.calcHeights(kt,this._getHeight,mt),this.forceUpdate()}},this._getHeight=Ut=>{const _t=this.props.getKeyFromIndex(Ut),Gt=this._knownHeights.get(_t);return Gt!=null&&Gt===Gt?Gt:this.props.itemHeightGetter(Ut,_t)},this._yPositions=new c(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:bt}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=bt+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(bt){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&bt.scrollElement!==this.props.scrollElement&&(bt.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const bt=this.props.windowScroller,Ut=bt?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,_t=bt?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return Ut!==this._viewHeight||_t!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const Ut=this._scrollTop,_t=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(Ut,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(_t,this._getHeight)}render(){const{dataLength:bt,getKeyFromIndex:Ut,initialDraw:_t=h,itemRenderer:Gt,viewBuffer:jt,viewBufferMin:sn}=this.props,St=this._getHeight,mt=[];let kt,it;if(this._yPositions.profileData(bt),!this._wrapperElm)kt=0,it=(_t<bt?_t:bt)-1;else{this._isViewChanged()&&this._calcViewIndexes();const Qt=sn>this._startIndex?0:this._startIndex-sn,rn=sn<bt-this._endIndex?this._endIndex+sn:bt-1;Qt<this._startIndexDrawn||rn>this._endIndexDrawn?(kt=jt>this._startIndex?0:this._startIndex-jt,it=this._endIndex+jt,it>=bt&&(it=bt-1)):(kt=this._startIndexDrawn>bt-1?0:this._startIndexDrawn,it=this._endIndexDrawn>bt-1?bt-1:this._endIndexDrawn)}this._yPositions.calcHeights(it,St,kt||-1),this._startIndexDrawn=kt,this._endIndexDrawn=it,mt.length=it-kt+1;for(let Qt=kt;Qt<=it;Qt++){const{y:rn,height:un}=this._yPositions.getRowPosition(Qt,St),xn={height:un,top:rn,position:"absolute"},Kn=Ut(Qt),_n={"data-item-key":Kn};mt.push(Gt(Kn,xn,Qt,_n))}const pt={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(pt.onScroll=this._onScroll,pt.style.height="100%",pt.style.overflowY="auto");const It={position:"relative",height:this._yPositions.getEstimatedHeight()};return s.createElement("div",{...pt,"data-testid":"ListView"},s.createElement("div",{style:It},s.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},mt)))}}f.defaultProps={initialDraw:h,itemsWrapperClassName:"",windowScroller:!1};var b=e(89898),v=e.n(b),y=e(73453),E=e(20609),C=e(32042),u=e(74639),D=e(75965),P=e(71235);function S({children:Ct,content:bt,overlayClassName:Ut}){const _t=(0,s.useRef)(null);return s.createElement(D.D,{content:bt,hideAfter:300},(Gt,jt,sn)=>s.createElement(s.Fragment,null,_t.current&&s.createElement(P.J,{...sn,referenceElement:_t.current,wrapperClassName:Ut,onMouseLeave:jt,onMouseEnter:Gt}),s.cloneElement(Ct,{ref:_t,onMouseEnter:Gt,onMouseLeave:jt})))}var x=e(90170),M=e(58549);const R="label";var O=e(80011),T=e(66670);const U=()=>({CopyIcon:(0,t.css)`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function L(Ct){const bt=(0,l.wW)(U),[Ut,_t]=(0,s.useState)(!1),Gt=()=>{navigator.clipboard.writeText(Ct.copyText),_t(!0)};return s.createElement(O.u,{content:Ut?"Copied":Ct.tooltipTitle},s.createElement(T.zx,{className:v()(bt.CopyIcon),type:"button",icon:Ct.icon,onClick:Gt}))}L.defaultProps={icon:"copy",className:void 0};var V=e(23932),w=e.n(V);const K="copyIcon",B=Ct=>({KeyValueTable:(0,t.css)`
      label: KeyValueTable;
      background: ${(0,E.h)(Ct,"#fff")};
      border: 1px solid ${(0,E.h)(Ct,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:(0,t.css)`
      label: body;
      vertical-align: baseline;
    `,row:(0,t.css)`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,E.h)(Ct,"#f5f5f5")};
      }
      &:not(:hover) .${K} {
        visibility: hidden;
      }
    `,keyColumn:(0,t.css)`
      label: keyColumn;
      color: ${(0,E.h)(Ct,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:(0,t.css)`
      label: copyColumn;
      text-align: right;
    `,linkIcon:(0,t.css)`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),W=/^(\[|\{)/;function _(Ct){if(typeof Ct=="string"&&W.test(Ct))try{return JSON.parse(Ct)}catch{}return Ct}const k=Ct=>s.createElement("a",{href:Ct.href,title:Ct.title,target:"_blank",rel:"noopener noreferrer"},Ct.children," ",s.createElement(y.J,{name:"external-link-alt"}));k.defaultProps={title:""};function A(Ct){const{data:bt,linksGetter:Ut}=Ct,_t=(0,l.wW)(B);return s.createElement("div",{className:v()(_t.KeyValueTable),"data-testid":"KeyValueTable"},s.createElement("table",{className:x.K9},s.createElement("tbody",{className:_t.body},bt.map((Gt,jt)=>{const sn={__html:w()(_(Gt.value))},St=s.createElement("div",{className:x.b$,dangerouslySetInnerHTML:sn}),mt=Ut?Ut(bt,jt):null;let kt;return mt&&mt.length?kt=s.createElement("div",null,s.createElement(k,{href:mt[0].url,title:mt[0].text},St)):kt=St,s.createElement("tr",{className:_t.row,key:`${Gt.key}-${jt}`},s.createElement("td",{className:_t.keyColumn,"data-testid":"KeyValueTable--keyColumn"},Gt.key),s.createElement("td",null,kt),s.createElement("td",{className:_t.copyColumn},s.createElement(L,{className:K,copyText:JSON.stringify(Gt,null,2),tooltipTitle:"Copy JSON"})))}))))}const z=Ct=>({header:(0,t.css)`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,E.h)(Ct,"#e8e8e8")};
      }
    `,headerEmpty:(0,t.css)`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:(0,t.css)`
      label: headerHighContrast;
      &:hover {
        background: ${(0,E.h)(Ct,"#ddd")};
      }
    `,emptyIcon:(0,t.css)`
      label: emptyIcon;
      color: ${(0,E.h)(Ct,"#aaa")};
    `,summary:(0,t.css)`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:(0,t.css)`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,E.h)(Ct,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:(0,t.css)`
      label: summaryLabel;
      color: ${(0,E.h)(Ct,"#777")};
    `,summaryDelim:(0,t.css)`
      label: summaryDelim;
      color: ${(0,E.h)(Ct,"#bbb")};
      padding: 0 0.2em;
    `});function H(Ct){const{data:bt}=Ct,Ut=(0,l.wW)(z);return!Array.isArray(bt)||!bt.length?null:s.createElement("ul",{className:Ut.summary},bt.map((_t,Gt)=>s.createElement("li",{className:Ut.summaryItem,key:`${_t.key}-${Gt}`},s.createElement("span",{className:Ut.summaryLabel},_t.key),s.createElement("span",{className:Ut.summaryDelim},"="),String(_t.value))))}H.defaultProps={data:null};function Q(Ct){const{className:bt,data:Ut,highContrast:_t,interactive:Gt,isOpen:jt,label:sn,linksGetter:St,onToggle:mt}=Ct,kt=!Array.isArray(Ut)||!Ut.length,it=(0,l.wW)(z),pt=v()(x.Im,{[it.emptyIcon]:kt});let It=null,Qt=null;return Gt&&(It=jt?s.createElement(y.J,{name:"angle-down",className:pt}):s.createElement(y.J,{name:"angle-right",className:pt}),Qt={"aria-checked":jt,onClick:kt?null:mt,role:"switch"}),s.createElement("div",{className:v()(bt,x.ty)},s.createElement("div",{className:v()(it.header,{[it.headerEmpty]:kt,[it.headerHighContrast]:_t&&!kt}),...Qt,"data-testid":"AccordianKeyValues--header"},It,s.createElement("strong",{"data-test":R},sn,jt||":"),!jt&&s.createElement(H,{data:Ut})),jt&&s.createElement(A,{data:Ut,linksGetter:St}))}Q.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const X=Ct=>({AccordianLogs:(0,t.css)`
      label: AccordianLogs;
      border: 1px solid ${(0,E.h)(Ct,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:(0,t.css)`
      label: AccordianLogsHeader;
      background: ${(0,E.h)(Ct,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,E.h)(Ct,"#dadada")};
      }
    `,AccordianLogsContent:(0,t.css)`
      label: AccordianLogsContent;
      background: ${(0,E.h)(Ct,"#f0f0f0")};
      border-top: 1px solid ${(0,E.h)(Ct,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:(0,t.css)`
      label: AccordianLogsFooter;
      color: ${(0,E.h)(Ct,"#999")};
    `});function te(Ct){const{interactive:bt,isOpen:Ut,linksGetter:_t,logs:Gt,openedItems:jt,onItemToggle:sn,onToggle:St,timestamp:mt}=Ct;let kt=null,it="span",pt=null;bt&&(kt=Ut?s.createElement(y.J,{name:"angle-down",className:x.Im}):s.createElement(y.J,{name:"angle-right",className:"u-align-icon"}),it="a",pt={"aria-checked":Ut,onClick:St,role:"switch"});const It=(0,l.wW)(X);return s.createElement("div",{className:It.AccordianLogs},s.createElement(it,{className:It.AccordianLogsHeader,...pt},kt," ",s.createElement("strong",null,"Events")," (",Gt.length,")"),Ut&&s.createElement("div",{className:It.AccordianLogsContent},(0,n.sortBy)(Gt,"timestamp").map((Qt,rn)=>s.createElement(Q,{key:`${Qt.timestamp}-${rn}`,className:rn<Gt.length-1?x.bi:null,data:Qt.fields||[],highContrast:!0,interactive:bt,isOpen:jt?jt.has(Qt):!1,label:`${(0,M.LU)(Qt.timestamp-mt)}`,linksGetter:_t,onToggle:bt&&sn?()=>sn(Qt):null})),s.createElement("small",{className:It.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}te.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const oe=Ct=>({wrapper:(0,t.css)`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:(0,t.css)`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:(0,t.css)`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:(0,t.css)`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:(0,t.css)`
      label: logMarker;
      background-color: ${(0,E.h)(Ct,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,E.h)(Ct,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function Z(Ct){return`${(Ct*100).toFixed(1)}%`}function le({viewEnd:Ct,viewStart:bt,getViewedBounds:Ut,color:_t,shortLabel:Gt,longLabel:jt,onClick:sn,rpc:St,traceStartTime:mt,span:kt,className:it,labelClassName:pt}){const[It,Qt]=(0,s.useState)(Gt),rn=()=>Qt(Gt),un=()=>Qt(jt),xn=(0,n.groupBy)(kt.logs,_n=>{const Ma=Ut(_n.timestamp,_n.timestamp).start;return Z(Math.round(Ma*500)/500)}),Kn=(0,l.wW)(oe);return s.createElement("div",{className:v()(Kn.wrapper,it),onBlur:rn,onClick:sn,onFocus:un,onMouseOut:rn,onMouseOver:un,"aria-hidden":!0,"data-testid":u.wl.components.TraceViewer.spanBar},s.createElement("div",{"aria-label":It,className:Kn.bar,style:{background:_t,left:Z(bt),width:Z(Ct-bt)}},s.createElement("div",{className:v()(Kn.label,pt),"data-testid":"SpanBar--label"},It)),s.createElement("div",null,Object.keys(xn).map(_n=>s.createElement(S,{key:_n,content:s.createElement(te,{interactive:!1,isOpen:!0,logs:xn[_n],timestamp:mt})},s.createElement("div",{"data-testid":"SpanBar--logMarker",className:Kn.logMarker,style:{left:_n}})))),St&&s.createElement("div",{className:Kn.rpc,style:{background:St.color,left:Z(St.viewStart),width:Z(St.viewEnd-St.viewStart)}}))}const ce=s.memo(le);var q=e(79655),ne=e(14986);const pe=(Ct,bt,Ut,_t)=>(Ct.sort(function(Gt,jt){return(Gt.title||"link").toLowerCase().localeCompare((jt.title||"link").toLowerCase())}),Ct.map((Gt,jt)=>s.createElement(q.s,{key:jt,label:Gt.title||"Link",onClick:Gt.onClick?sn=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:_t,grafana_version:m.config.buildInfo.version,type:Gt.type,location:"menu"}),sn?.preventDefault(),Gt.onClick(sn),Ut()}:void 0,url:Gt.href,className:bt.menuItem}))),re=({links:Ct,datasourceType:bt})=>{const Ut=(0,l.wW)(ie),[_t,Gt]=(0,s.useState)(!1),[jt,sn]=(0,s.useState)({x:0,y:0}),St=()=>Gt(!1);return s.createElement("div",{"data-testid":"SpanLinksMenu"},s.createElement("button",{onClick:mt=>{Gt(!0),sn({x:mt.pageX,y:mt.pageY})},className:Ut.button},s.createElement(y.J,{name:"link",className:Ut.button})),_t?s.createElement(ne.x,{onClose:()=>Gt(!1),renderMenuItems:()=>pe(Ct,Ut,St,bt),focusOnOpen:!1,x:jt.x,y:jt.y}):null)},ie=()=>({button:(0,t.css)`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:(0,t.css)`
      max-width: 60ch;
      overflow: hidden;
    `});function Se(Ct){return(0,n.get)((0,n.find)(Ct.references,({span:bt,refType:Ut})=>bt&&bt.spanID&&(Ut==="CHILD_OF"||Ut==="FOLLOWS_FROM")),"span")}function ye(Ct){const bt=[];if(!Ct)return bt;let Ut=Se(Ct);for(;Ut;)bt.push(Ut.spanID),Ut=Se(Ut);return bt}const Ce=(0,d.B)(Ct=>({SpanTreeOffset:(0,t.css)`
      label: SpanTreeOffset;
      color: ${(0,E.h)(Ct,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:(0,t.css)`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:(0,t.css)`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,E.h)(Ct,"lightgrey")};
      }
    `,indentGuideActive:(0,t.css)`
      label: indentGuideActive;
      border-color: ${(0,E.h)(Ct,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:(0,t.css)`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class de extends s.PureComponent{constructor(bt){super(bt),this.handleMouseLeave=(Ut,_t)=>{(!(Ut.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Ut,"relatedTarget.dataset.ancestorId")!==_t)&&this.props.removeHoverIndentGuideId(_t)},this.handleMouseEnter=(Ut,_t)=>{(!(Ut.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Ut,"relatedTarget.dataset.ancestorId")!==_t)&&this.props.addHoverIndentGuideId(_t)},this.ancestorIds=ye(bt.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:bt,onClick:Ut,showChildrenIcon:_t,span:Gt,theme:jt}=this.props,{hasChildren:sn,spanID:St}=Gt,mt=sn?{onClick:Ut,role:"switch","aria-checked":bt}:null,kt=_t&&sn&&(bt?s.createElement(y.J,{name:"angle-down","data-testid":"icon-arrow-down"}):s.createElement(y.J,{name:"angle-right","data-testid":"icon-arrow-right"})),it=Ce(jt);return s.createElement("span",{className:v()(it.SpanTreeOffset,{[it.SpanTreeOffsetParent]:sn}),...mt},this.ancestorIds.map(pt=>s.createElement("span",{key:pt,className:v()(it.indentGuide,{[it.indentGuideActive]:this.props.hoverIndentGuideIds.has(pt)}),"data-ancestor-id":pt,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:It=>this.handleMouseEnter(It,pt),onMouseLeave:It=>this.handleMouseLeave(It,pt)})),kt&&s.createElement("span",{className:it.iconWrapper,onMouseEnter:pt=>this.handleMouseEnter(pt,St),onMouseLeave:pt=>this.handleMouseLeave(pt,St),"data-testid":"icon-wrapper"},kt))}}de.displayName="UnthemedSpanTreeOffset",de.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const we=(0,l.HE)(de);var _e=e(59391),Je=e(25356);const Ue="spanBar",$e="spanBarLabel",Qe="nameWrapper",tt="nameWrapperMatchingFilter",lt="jaegerView",Me="nameColumn",De=(0,d.B)((Ct,bt)=>{const Ut={label:"flash",flash:(0,t.keyframes)`
    from {
      background-color: ${(0,E.h)(Ct,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `},_t=bt?"":(0,E.h)(Ct,"#fffce4");return{nameWrapper:(0,t.css)`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:(0,t.css)`
      label: nameWrapperMatchingFilter;
      background-color: ${_t};
    `,nameColumn:(0,t.css)`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:(0,t.css)`
      label: endpointName;
      color: ${(0,E.h)(Ct,"#808080")};
    `,view:(0,t.css)`
      label: view;
      position: relative;
    `,viewExpanded:(0,t.css)`
      label: viewExpanded;
      background: ${(0,E.h)(Ct,"#f8f8f8")};
      outline: 1px solid ${(0,E.h)(Ct,"#ddd")};
    `,viewExpandedAndMatchingFilter:(0,t.css)`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,E.h)(Ct,"#fff3d7")};
      outline: 1px solid ${(0,E.h)(Ct,"#ddd")};
    `,row:(0,t.css)`
      label: row;
      &:hover .${Ue} {
        opacity: 1;
      }
      &:hover .${$e} {
        color: ${(0,E.h)(Ct,"#000")};
      }
      &:hover .${Qe} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,E.h)(Ct,"#fafafa")},
          ${(0,E.h)(Ct,"#f8f8f8")} 75%,
          ${(0,E.h)(Ct,"#eee")}
        );
      }
      &:hover .${lt} {
        background-color: ${(0,E.h)(Ct,"#f5f5f5")};
        outline: 1px solid ${(0,E.h)(Ct,"#ddd")};
      }
    `,rowClippingLeft:(0,t.css)`
      label: rowClippingLeft;
      & .${Me}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,E.h)(Ct,"rgba(25, 25, 25, 0.25)")},
          ${(0,E.h)(Ct,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:(0,t.css)`
      label: rowClippingRight;
      & .${lt}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,E.h)(Ct,"rgba(25, 25, 25, 0.25)")},
          ${(0,E.h)(Ct,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:(0,t.css)`
      label: rowExpanded;
      & .${Ue} {
        opacity: 1;
      }
      & .${$e} {
        color: ${(0,E.h)(Ct,"#000")};
      }
      & .${Qe}, &:hover .${Qe} {
        background: ${(0,E.h)(Ct,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,E.h)(Ct,"#ddd")};
      }
      & .${tt} {
        background: ${(0,E.h)(Ct,"#fff3d7")};
      }
      &:hover .${lt} {
        background: ${(0,E.h)(Ct,"#eee")};
      }
    `,rowMatchingFilter:(0,t.css)`
      label: rowMatchingFilter;
      // background-color: ${(0,E.h)(Ct,"#fffbde")};
      &:hover .${Qe} {
        background: linear-gradient(
          90deg,
          ${(0,E.h)(Ct,"#fffbde")},
          ${(0,E.h)(Ct,"#fffbde")} 75%,
          ${(0,E.h)(Ct,"#f7f1c6")}
        );
      }
      &:hover .${lt} {
        background-color: ${(0,E.h)(Ct,"#f7f1c6")};
        outline: 1px solid ${(0,E.h)(Ct,"#ddd")};
      }
    `,rowFocused:(0,t.css)`
      label: rowFocused;
      background-color: ${(0,E.h)(Ct,"#cbe7ff")};
      animation: ${Ut.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${Qe}, .${lt}, .${tt} {
        background-color: ${(0,E.h)(Ct,"#cbe7ff")};
        animation: ${Ut.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Ue} {
        opacity: 1;
      }
      & .${$e} {
        color: ${(0,E.h)(Ct,"#000")};
      }
      &:hover .${Qe}, :hover .${lt} {
        background: ${(0,E.h)(Ct,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,E.h)(Ct,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:(0,t.css)`
      label: rowExpandedAndMatchingFilter;
      &:hover .${lt} {
        background: ${(0,E.h)(Ct,"#ffeccf")};
      }
    `,name:(0,t.css)`
      label: name;
      color: ${(0,E.h)(Ct,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,E.h)(Ct,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:(0,t.css)`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:(0,t.css)`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:(0,t.css)`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:(0,t.css)`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,E.h)(Ct,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:(0,t.css)`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:(0,t.css)`
      label: labelRight;
      left: 100%;
    `,labelLeft:(0,t.css)`
      label: labelLeft;
      right: 100%;
    `}});class We extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(bt,Ut,_t)=>{const Gt=Ut?.type??"";if(Gt===C.Hn)return"";if(Gt===""||Gt===C.th)return`(${_t})`;if(Gt===C.Kg){const jt=Ut?.tag?.trim()??"";if(jt!==""&&bt.tags){const sn=bt.tags?.find(mt=>mt.key===jt);if(sn)return`(${sn.value})`;const St=bt.process?.tags?.find(mt=>mt.key===jt);if(St)return`(${St.value})`}}return""}}render(){const{className:bt,color:Ut,spanBarOptions:_t,columnDivision:Gt,isChildrenExpanded:jt,isDetailExpanded:sn,isMatchingFilter:St,showSpanFilterMatchesOnly:mt,isFocused:kt,numTicks:it,rpc:pt,noInstrumentedServer:It,showErrorIcon:Qt,getViewedBounds:rn,traceStartTime:un,span:xn,hoverIndentGuideIds:Kn,addHoverIndentGuideId:_n,removeHoverIndentGuideId:Ma,clippingLeft:la,clippingRight:aa,theme:ba,createSpanLink:ga,datasourceType:Ca}=this.props,{duration:Ha,hasChildren:ka,operationName:ma,process:{serviceName:At}}=xn,Rt=(0,M.LU)(Ha),Mt=rn(xn.startTime,xn.startTime+xn.duration),$t=Mt.start,Pn=Mt.end,tn=De(ba,mt),Un=`${At}::${ma}`;let $n,kn;return $t>1-Pn?($n=`${Un} | ${Rt}`,kn=tn.labelLeft):($n=`${Rt} | ${Un}`,kn=tn.labelRight),s.createElement(Je.Z,{className:v()(tn.row,{[tn.rowExpanded]:sn,[tn.rowMatchingFilter]:St,[tn.rowExpandedAndMatchingFilter]:St&&sn,[tn.rowFocused]:kt,[tn.rowClippingLeft]:la,[tn.rowClippingRight]:aa},bt)},s.createElement(Je.Z.Cell,{className:v()(tn.nameColumn,Me),width:Gt},s.createElement("div",{className:v()(tn.nameWrapper,Qe,{[tn.nameWrapperMatchingFilter]:St,nameWrapperMatchingFilter:St})},s.createElement(we,{onClick:ka?this._childrenToggle:void 0,childrenVisible:jt,span:xn,hoverIndentGuideIds:Kn,addHoverIndentGuideId:_n,removeHoverIndentGuideId:Ma}),s.createElement("button",{type:"button",className:v()(tn.name,{[tn.nameDetailExpanded]:sn}),"aria-checked":sn,title:Un,onClick:this._detailToggle,role:"switch",style:{borderColor:Ut},tabIndex:0},s.createElement("span",{className:v()(tn.svcName,{[tn.svcNameChildrenCollapsed]:ka&&!jt})},Qt&&s.createElement(y.J,{name:"exclamation-circle",style:{backgroundColor:xn.errorIconColor?(0,E.h)(ba,xn.errorIconColor):(0,E.h)(ba,"#db2828")},className:tn.errorIcon}),At," ",pt&&s.createElement("span",null,s.createElement(y.J,{name:"arrow-right"})," ",s.createElement("i",{className:tn.rpcColorMarker,style:{background:pt.color}}),pt.serviceName),It&&s.createElement("span",null,s.createElement(y.J,{name:"arrow-right"})," ",s.createElement("i",{className:tn.rpcColorMarker,style:{background:It.color}}),It.serviceName)),s.createElement("small",{className:tn.endpointName},pt?pt.operationName:ma),s.createElement("small",{className:tn.endpointName}," ",this.getSpanBarLabel(xn,_t,Rt))),ga&&(()=>{const Fn=ga(xn),Da=Fn?.length||0;return Fn&&Da===1?Fn[0]?s.createElement("a",{href:Fn[0].href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:Fn[0].onClick?Ta=>{!(Ta.ctrlKey||Ta.metaKey||Ta.shiftKey)&&Fn[0].onClick&&(Ta.preventDefault(),Fn[0].onClick(Ta))}:void 0},Fn[0].content):null:Fn&&Da>1?s.createElement(re,{links:Fn,datasourceType:Ca}):null})())),s.createElement(Je.Z.Cell,{className:v()(tn.view,lt,{[tn.viewExpanded]:sn,[tn.viewExpandedAndMatchingFilter]:St&&sn}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-Gt,onClick:this._detailToggle},s.createElement(_e.Z,{numTicks:it}),s.createElement(ce,{rpc:pt,viewStart:$t,viewEnd:Pn,getViewedBounds:rn,color:Ut,shortLabel:Rt,longLabel:$n,traceStartTime:un,span:xn,labelClassName:`${$e} ${kn}`,className:Ue})))}}We.displayName="UnthemedSpanBarRow",We.defaultProps={className:"",rpc:null};const qe=(0,l.HE)(We);var st=e(37391),dt=e(60956),Tt=e(26129),Nt=e(73e3),Bt=e(60105);const yt=Ct=>({Divider:(0,t.css)`
      background: ${(0,E.h)(Ct,"#ddd")};
    `,DividerVertical:(0,t.css)`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:(0,t.css)`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function ft({className:Ct,style:bt,type:Ut}){const _t=(0,l.wW)(yt);return s.createElement("div",{style:bt,className:(0,t.cx)(_t.Divider,Ut==="horizontal"?_t.DividerHorizontal:_t.DividerVertical,Ct)})}const ct=Ct=>bt=>({LabeledList:(0,t.css)`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${Ct&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:(0,t.css)`
      label: LabeledListItem;
      display: inline-block;
      ${Ct&&`
        border-right: 1px solid ${(0,E.h)(bt,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:(0,t.css)`
      label: LabeledListLabel;
      color: ${bt.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:(0,t.css)`
      label: LabeledListValue;
      ${!Ct&&"margin-right: 0.55rem;"}
    `});function ge(Ct){const{className:bt,divider:Ut=!1,items:_t}=Ct,Gt=(0,l.wW)(ct(Ut));return s.createElement("ul",{className:v()(Gt.LabeledList,bt)},_t.map(({key:jt,label:sn,value:St})=>s.createElement("li",{className:Gt.LabeledListItem,key:`${jt}`},s.createElement("span",{className:Gt.LabeledListLabel},sn),s.createElement("strong",{className:Gt.LabeledListValue},St))))}var Be=e(63568),Le=e(66798);function he(Ct){const{reference:bt,children:Ut,createFocusSpanLink:_t}=Ct,Gt=_t(bt.traceID,bt.spanID);return s.createElement("a",{href:Gt.href,target:Gt.target,rel:"noopener noreferrer",onClick:Gt.onClick?jt=>{jt.preventDefault(),Gt.onClick(jt)}:void 0},Ut)}const He=Ct=>({AccordianReferenceItem:(0,t.css)`
      border-bottom: 1px solid ${(0,E.h)(Ct,"#d8d8d8")};
    `,AccordianKeyValues:(0,t.css)`
      margin-left: 10px;
    `,AccordianReferences:(0,t.css)`
      label: AccordianReferences;
      border: 1px solid ${(0,E.h)(Ct,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:(0,t.css)`
      label: AccordianReferencesHeader;
      background: ${(0,E.h)(Ct,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,E.h)(Ct,"#dadada")};
      }
    `,AccordianReferencesContent:(0,t.css)`
      label: AccordianReferencesContent;
      background: ${(0,E.h)(Ct,"#f0f0f0")};
      border-top: 1px solid ${(0,E.h)(Ct,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:(0,t.css)`
      label: AccordianReferencesFooter;
      color: ${(0,E.h)(Ct,"#999")};
    `,ReferencesList:(0,t.css)`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:(0,t.css)`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:(0,t.css)`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:(0,t.css)`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:(0,t.css)`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:(0,t.css)`
      margin-right: 8px;
    `,title:(0,t.css)`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function Pe(Ct){const{data:bt,createFocusSpanLink:Ut,openedItems:_t,onItemToggle:Gt,interactive:jt}=Ct,sn=(0,l.wW)(He);return s.createElement("div",{className:sn.AccordianReferencesContent},bt.map((St,mt)=>s.createElement("div",{className:mt<bt.length-1?sn.AccordianReferenceItem:void 0,key:mt},s.createElement("div",{className:sn.item,key:`${St.spanID}`},s.createElement(he,{reference:St,createFocusSpanLink:Ut},s.createElement("span",{className:sn.itemContent},St.span?s.createElement("span",null,s.createElement("span",{className:(0,t.cx)("span-svc-name",sn.serviceName)},St.span.process.serviceName),s.createElement("small",{className:"endpoint-name"},St.span.operationName)):s.createElement("span",{className:(0,t.cx)("span-svc-name",sn.title)},"View Linked Span ",s.createElement(y.J,{name:"external-link-alt"})),s.createElement("small",{className:sn.debugInfo},s.createElement("span",{className:sn.debugLabel,"data-label":"TraceID:"},St.traceID),s.createElement("span",{className:sn.debugLabel,"data-label":"SpanID:"},St.spanID))))),!!St.tags?.length&&s.createElement("div",{className:sn.AccordianKeyValues},s.createElement(Q,{className:mt<bt.length-1?x.bi:null,data:St.tags||[],highContrast:!0,interactive:jt,isOpen:_t?_t.has(St):!1,label:"attributes",linksGetter:null,onToggle:jt&&Gt?()=>Gt(St):null})))))}const Ie=({data:Ct,interactive:bt=!0,isOpen:Ut,onToggle:_t,onItemToggle:Gt,openedItems:jt,createFocusSpanLink:sn})=>{const St=!Array.isArray(Ct)||!Ct.length;let mt=null,kt="span",it=null;bt&&(mt=Ut?s.createElement(y.J,{name:"angle-down",className:x.Im}):s.createElement(y.J,{name:"angle-right",className:x.Im}),kt="a",it={"aria-checked":Ut,onClick:St?null:_t,role:"switch"});const pt=(0,l.wW)(He);return s.createElement("div",{className:pt.AccordianReferences},s.createElement(kt,{className:pt.AccordianReferencesHeader,...it},mt,s.createElement("strong",null,s.createElement("span",null,"References"))," ","(",Ct.length,")"),Ut&&s.createElement(Pe,{data:Ct,openedItems:jt,createFocusSpanLink:sn,onItemToggle:Gt,interactive:bt}))},Te=s.memo(Ie),Re=()=>({TextList:(0,t.css)`
      max-height: 450px;
      overflow: auto;
    `,List:(0,t.css)`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:(0,t.css)`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function ue(Ct){const{data:bt}=Ct,Ut=(0,l.wW)(Re);return s.createElement("div",{className:v()(Ut.TextList),"data-testid":"TextList"},s.createElement("ul",{className:Ut.List},bt.map((_t,Gt)=>s.createElement("li",{className:Ut.item,key:`${Gt}`},_t))))}const xe=Ct=>({header:(0,t.css)`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,E.h)(Ct,"#e8e8e8")};
      }
    `});function Ve({data:Ct}){return s.createElement(ue,{data:Ct})}function Ne(Ct){const{className:bt,data:Ut,headerClassName:_t,interactive:Gt,isOpen:jt,label:sn,onToggle:St,TextComponent:mt=Ve}=Ct,kt=!Array.isArray(Ut)||!Ut.length,it=(0,l.wW)(z),pt=v()(x.Im,{[it.emptyIcon]:kt});let It=null,Qt=null;Gt&&(It=jt?s.createElement(y.J,{name:"angle-down",className:pt}):s.createElement(y.J,{name:"angle-right",className:pt}),Qt={"aria-checked":jt,onClick:kt?null:St,role:"switch"});const rn=(0,l.wW)(xe);return s.createElement("div",{className:bt||""},s.createElement("div",{className:v()(rn.header,_t),...Qt,"data-testid":"AccordianText--header"},It,s.createElement("strong",null,sn)," (",Ut.length,")"),jt&&s.createElement(mt,{data:Ut}))}Ne.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const fe=Ct=>({header:(0,t.css)`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:(0,t.css)`
      overflow: hidden;
    `,debugInfo:(0,t.css)`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:(0,t.css)`
      label: debugLabel;
      &::before {
        color: ${(0,E.h)(Ct,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:(0,t.css)`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,E.h)(Ct,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,E.h)(Ct,"#333")};
      }
    `,AccordianWarnings:(0,t.css)`
      label: AccordianWarnings;
      background: ${(0,E.h)(Ct,"#fafafa")};
      border: 1px solid ${(0,E.h)(Ct,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:(0,t.css)`
      label: AccordianWarningsHeader;
      background: ${(0,E.h)(Ct,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,E.h)(Ct,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:(0,t.css)`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,E.h)(Ct,"#e8e8e8")};
    `,AccordianWarningsLabel:(0,t.css)`
      label: AccordianWarningsLabel;
      color: ${(0,E.h)(Ct,"#d36c08")};
    `,Textarea:(0,t.css)`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:(0,t.css)`
      font-size: 1.5em;
    `});function ve(Ct){const{detailState:bt,linksGetter:Ut,logItemToggle:_t,logsToggle:Gt,processToggle:jt,span:sn,tagsToggle:St,traceStartTime:mt,warningsToggle:kt,stackTracesToggle:it,referencesToggle:pt,referenceItemToggle:It,createSpanLink:Qt,createFocusSpanLink:rn,topOfViewRefType:un,datasourceType:xn}=Ct,{isTagsOpen:Kn,isProcessOpen:_n,logs:Ma,isWarningsOpen:la,references:aa,isStackTracesOpen:ba}=bt,{operationName:ga,process:Ca,duration:Ha,relativeStartTime:ka,startTime:ma,traceID:At,spanID:Rt,logs:Mt,tags:$t,warnings:Pn,references:tn,stackTraces:Un}=sn,{timeZone:$n}=Ct;let kn=[{key:"svc",label:"Service:",value:Ca.serviceName},{key:"duration",label:"Duration:",value:(0,M.LU)(Ha)},{key:"start",label:"Start Time:",value:(0,M.LU)(ka)+ze(ma,$n)},...sn.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:sn.childSpanCount}]:[]];sn.kind&&kn.push({key:Be.TO,label:"Kind:",value:sn.kind}),sn.statusCode!==void 0&&kn.push({key:Be.Q_,label:"Status:",value:st.Q[sn.statusCode].toLowerCase()}),sn.statusMessage&&kn.push({key:Be.S2,label:"Status Message:",value:sn.statusMessage}),sn.instrumentationLibraryName&&kn.push({key:Be.cG,label:"Library Name:",value:sn.instrumentationLibraryName}),sn.instrumentationLibraryVersion&&kn.push({key:Be.gc,label:"Library Version:",value:sn.instrumentationLibraryVersion}),sn.traceState&&kn.push({key:Be.vB,label:"Trace State:",value:sn.traceState});const Fn=(0,l.wW)(fe);let Da;if(Qt){const ca=Qt(sn),Sa=ca?.filter(Yt=>Yt.type===Le.u.Logs);ca&&Sa&&Sa.length>0&&(Da=s.createElement(Nt.k,{link:{...Sa[0],title:"Logs for this span",target:"_blank",origin:Sa[0].field,onClick:Yt=>{(0,r.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:xn,grafana_version:m.config.buildInfo.version,type:"log",location:"spanDetails"}),Sa?.[0].onClick?Sa?.[0].onClick?.(Yt):Tt.E1.push(Sa?.[0].href)}},buttonProps:{icon:"gf-logs"}}))}const Ta=rn(At,Rt);return s.createElement("div",{"data-testid":"span-detail-component"},s.createElement("div",{className:Fn.header},s.createElement("h2",{className:v()(x.h2)},ga),s.createElement("div",{className:Fn.listWrapper},s.createElement(ge,{className:x.xb,divider:!0,items:kn}))),Da,s.createElement(ft,{className:x.im,type:"horizontal"}),s.createElement("div",null,s.createElement("div",null,s.createElement(Q,{data:$t,label:"Span Attributes",linksGetter:Ut,isOpen:Kn,onToggle:()=>St(Rt)}),Ca.tags&&s.createElement(Q,{className:x.bi,data:Ca.tags,label:"Resource Attributes",linksGetter:Ut,isOpen:_n,onToggle:()=>jt(Rt)})),Mt&&Mt.length>0&&s.createElement(te,{linksGetter:Ut,logs:Mt,isOpen:Ma.isOpen,openedItems:Ma.openedItems,onToggle:()=>Gt(Rt),onItemToggle:ca=>_t(Rt,ca),timestamp:mt}),Pn&&Pn.length>0&&s.createElement(Ne,{className:Fn.AccordianWarnings,headerClassName:Fn.AccordianWarningsHeader,label:s.createElement("span",{className:Fn.AccordianWarningsLabel},"Warnings"),data:Pn,isOpen:la,onToggle:()=>kt(Rt)}),Un?.length?s.createElement(Ne,{label:"Stack trace",data:Un,isOpen:ba,TextComponent:ca=>{let Sa;return ca.data?.length>1?Sa=ca.data.map((Yt,Kt)=>`StackTrace ${Kt+1}:
${Yt}`).join(`
`):Sa=ca.data?.[0],s.createElement(Bt.K,{className:Fn.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:Sa})},onToggle:()=>it(Rt)}):null,tn&&tn.length>0&&(tn.length>1||tn[0].refType!=="CHILD_OF")&&s.createElement(Te,{data:tn,isOpen:aa.isOpen,openedItems:aa.openedItems,onToggle:()=>pt(Rt),onItemToggle:ca=>It(Rt,ca),createFocusSpanLink:rn}),un===Xe.Explore&&s.createElement("small",{className:Fn.debugInfo},s.createElement("a",{...Ta,onClick:ca=>{Ta.onClick&&ca.button===0&&(!ca.currentTarget.target||ca.currentTarget.target==="_self")&&!(ca.metaKey||ca.altKey||ca.ctrlKey||ca.shiftKey)&&(ca.preventDefault(),Ta.onClick(ca))}},s.createElement(y.J,{name:"link",className:v()(x.Im,Fn.LinkIcon)})),s.createElement("span",{className:Fn.debugLabel,"data-label":"SpanID:"})," ",Rt)))}const ze=(Ct,bt)=>{const Ut=(0,dt.dq)(Ct/1e3,{timeZone:bt,defaultWithMS:!0}),_t=Ut.split(" ");return` (${_t[1]?_t[1]:Ut})`},Oe=(0,d.B)(Ct=>({expandedAccent:(0,t.css)`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:(0,t.css)`
      label: infoWrapper;
      border: 1px solid ${(0,E.h)(Ct,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Fe extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(bt,Ut)=>{const{linksGetter:_t,span:Gt}=this.props;return _t(Gt,bt,Ut)}}render(){const{color:bt,columnDivision:Ut,detailState:_t,logItemToggle:Gt,logsToggle:jt,processToggle:sn,referenceItemToggle:St,referencesToggle:mt,warningsToggle:kt,stackTracesToggle:it,span:pt,timeZone:It,tagsToggle:Qt,traceStartTime:rn,hoverIndentGuideIds:un,addHoverIndentGuideId:xn,removeHoverIndentGuideId:Kn,theme:_n,createSpanLink:Ma,focusedSpanId:la,createFocusSpanLink:aa,topOfViewRefType:ba,datasourceType:ga}=this.props,Ca=Oe(_n);return s.createElement(Je.Z,null,s.createElement(Je.Z.Cell,{width:Ut,style:{overflow:"hidden"}},s.createElement(we,{span:pt,showChildrenIcon:!1,hoverIndentGuideIds:un,addHoverIndentGuideId:xn,removeHoverIndentGuideId:Kn}),s.createElement(T.zx,{fill:"text",onClick:this._detailToggle,className:v()(Ca.expandedAccent,(0,T.gN)(_n)),style:{borderColor:bt},"data-testid":"detail-row-expanded-accent"})),s.createElement(Je.Z.Cell,{width:1-Ut},s.createElement("div",{className:Ca.infoWrapper,style:{borderTopColor:bt}},s.createElement(ve,{detailState:_t,linksGetter:this._linksGetter,logItemToggle:Gt,logsToggle:jt,processToggle:sn,referenceItemToggle:St,referencesToggle:mt,warningsToggle:kt,stackTracesToggle:it,span:pt,timeZone:It,tagsToggle:Qt,traceStartTime:rn,createSpanLink:Ma,focusedSpanId:la,createFocusSpanLink:aa,topOfViewRefType:ba,datasourceType:ga}))))}}const Ge=(0,l.HE)(Fe),nt=(0,d.B)(Ct=>{const{topOfViewRefType:bt}=Ct,Ut=bt==="Explore"?"fixed":"absolute";return{rowsWrapper:(0,t.css)`
      width: 100%;
    `,row:(0,t.css)`
      width: 100%;
    `,scrollToTopButton:(0,t.css)`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${Ut};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var Xe=(Ct=>(Ct.Explore="Explore",Ct.Panel="Panel",Ct))(Xe||{});const ut={bar:28,detail:161,detailWithLogs:197},ht=5;function wt(Ct,bt,Ut,_t,Gt){if(!Ct)return[];Gt&&_t&&(Ct=Ct.filter(St=>_t.has(St.spanID)));let jt=null;const sn=[];for(let St=0;St<Ct.length;St++){const mt=Ct[St],{spanID:kt,depth:it}=mt;let pt=!1;jt!=null&&(it>=jt?pt=!0:jt=null),!pt&&(bt.has(kt)&&(jt=it+1),sn.push({span:mt,isDetail:!1,spanIndex:St}),Ut.has(kt)&&sn.push({span:mt,isDetail:!0,spanIndex:St}))}return sn}function mn(Ct){const[bt,Ut]=Ct;return{left:bt>0,right:Ut<1}}function vn(Ct,bt,Ut,_t,Gt){return Ct?wt(Ct.spans,bt,Ut,_t,Gt):[]}const gn=(0,i.Z)(vn),Sn=(0,i.Z)(M._h,n.isEqual),Cn=(0,i.Z)(mn,n.isEqual);class pn extends s.Component{constructor(){super(...arguments),this.hasScrolledToSpan=!1,this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=bt=>this.getRowStates()[bt].spanIndex,this.mapSpanIndexToRowIndex=bt=>{const Ut=this.getRowStates().length;for(let _t=0;_t<Ut;_t++){const{spanIndex:Gt}=this.getRowStates()[_t];if(Gt===bt)return _t}throw new Error(`unable to find row for span index: ${bt}`)},this.setListView=bt=>{const Ut=this.listView!==bt;this.listView=bt,bt&&Ut&&this.props.registerAccessors(this.getAccessors())},this.getKeyFromIndex=bt=>{const{isDetail:Ut,span:_t}=this.getRowStates()[bt];return`${_t.traceID}--${_t.spanID}--${Ut?"detail":"bar"}`},this.getIndexFromKey=bt=>{const Ut=bt.split("--"),_t=Ut[0],Gt=Ut[1],jt=Ut[2]==="detail",sn=this.getRowStates().length;for(let St=0;St<sn;St++){const{span:mt,isDetail:kt}=this.getRowStates()[St];if(mt.spanID===Gt&&mt.traceID===_t&&kt===jt)return St}return-1},this.getRowHeight=bt=>{const{span:Ut,isDetail:_t}=this.getRowStates()[bt];return _t?Array.isArray(Ut.logs)&&Ut.logs.length?ut.detailWithLogs:ut.detail:ut.bar},this.renderRow=(bt,Ut,_t,Gt)=>{const{isDetail:jt,span:sn,spanIndex:St}=this.getRowStates()[_t];return jt?this.renderSpanDetailRow(sn,bt,Ut,Gt):this.renderSpanBarRow(sn,St,bt,Ut,Gt)},this.scrollToSpan=(bt,Ut)=>{if(Ut==null)return;const _t=this.getRowStates().findIndex(Gt=>Gt.span.spanID===Ut);_t>=0&&this.listView?.scrollToIndex(_t,bt)},this.scrollToTop=()=>{const{topOfViewRef:bt,datasourceType:Ut,trace:_t}=this.props;bt?.current?.scrollIntoView({behavior:"smooth"}),(0,r.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:Ut,grafana_version:m.config.buildInfo.version,numServices:_t.services.length,numSpans:_t.spans.length})}}componentDidMount(){this.scrollToSpan(this.props.headerHeight,this.props.focusedSpanId)}shouldComponentUpdate(bt){let Ut;for(Ut in bt)if(bt[Ut]!==this.props[Ut])return!0;return!1}componentDidUpdate(bt){const{registerAccessors:Ut}=bt,{registerAccessors:_t,headerHeight:Gt,focusedSpanId:jt,focusedSpanIdForSearch:sn}=this.props;this.listView&&Ut!==_t&&_t(this.getAccessors()),this.hasScrolledToSpan||(this.scrollToSpan(Gt,jt),this.hasScrolledToSpan=!0),jt!==bt.focusedSpanId&&this.scrollToSpan(Gt,jt),sn!==bt.focusedSpanIdForSearch&&this.scrollToSpan(Gt,sn)}getRowStates(){const{childrenHiddenIDs:bt,detailStates:Ut,trace:_t,findMatchesIDs:Gt,showSpanFilterMatchesOnly:jt}=this.props;return gn(_t,bt,Ut,Gt,jt)}getClipping(){const{currentViewRangeTime:bt}=this.props;return Cn(bt)}getViewedBounds(){const{currentViewRangeTime:bt,trace:Ut}=this.props,[_t,Gt]=bt;return Sn({min:Ut.startTime,max:Ut.endTime,viewStart:_t,viewEnd:Gt})}getAccessors(){const bt=this.listView;if(!bt)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:bt.getViewHeight,getBottomRowIndexVisible:bt.getBottomVisibleIndex,getTopRowIndexVisible:bt.getTopVisibleIndex,getRowPosition:bt.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(bt,Ut,_t,Gt,jt){const{spanID:sn}=bt,{serviceName:St}=bt.process,{childrenHiddenIDs:mt,childrenToggle:kt,detailStates:it,detailToggle:pt,findMatchesIDs:It,spanNameColumnWidth:Qt,trace:rn,spanBarOptions:un,hoverIndentGuideIds:xn,addHoverIndentGuideId:Kn,removeHoverIndentGuideId:_n,createSpanLink:Ma,focusedSpanId:la,focusedSpanIdForSearch:aa,showSpanFilterMatchesOnly:ba,theme:ga,datasourceType:Ca}=this.props;if(!rn)return null;const Ha=(0,g._K)(St,ga),ka=mt.has(sn),ma=it.has(sn),At=It?It.has(sn):!1,Rt=sn===la||sn===aa,Mt=(0,M.yM)(bt)||ka&&(0,M.Qx)(rn.spans,Ut);let $t=null;if(ka){const $n=(0,M.s2)(rn.spans.slice(Ut));if($n){const kn=this.getViewedBounds()($n.startTime,$n.startTime+$n.duration);$t={color:(0,g._K)($n.process.serviceName,ga),operationName:$n.operationName,serviceName:$n.process.serviceName,viewEnd:kn.end,viewStart:kn.start}}}const Pn=bt.tags.find($n=>$n.key===a);let tn=null;!bt.hasChildren&&Pn&&(0,M.JE)(bt)&&(tn={serviceName:Pn.value,color:(0,g._K)(Pn.value,ga)});const Un=nt(this.props);return s.createElement("div",{className:Un.row,key:_t,style:Gt,...jt},s.createElement(qe,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:Ha,spanBarOptions:un,columnDivision:Qt,isChildrenExpanded:!ka,isDetailExpanded:ma,isMatchingFilter:At,isFocused:Rt,showSpanFilterMatchesOnly:ba,numTicks:ht,onDetailToggled:pt,onChildrenToggled:kt,rpc:$t,noInstrumentedServer:tn,showErrorIcon:Mt,getViewedBounds:this.getViewedBounds(),traceStartTime:rn.startTime,span:bt,hoverIndentGuideIds:xn,addHoverIndentGuideId:Kn,removeHoverIndentGuideId:_n,createSpanLink:Ma,datasourceType:Ca}))}renderSpanDetailRow(bt,Ut,_t,Gt){const{spanID:jt}=bt,{serviceName:sn}=bt.process,{detailLogItemToggle:St,detailLogsToggle:mt,detailProcessToggle:kt,detailReferencesToggle:it,detailReferenceItemToggle:pt,detailWarningsToggle:It,detailStackTracesToggle:Qt,detailStates:rn,detailTagsToggle:un,detailToggle:xn,spanNameColumnWidth:Kn,trace:_n,timeZone:Ma,hoverIndentGuideIds:la,addHoverIndentGuideId:aa,removeHoverIndentGuideId:ba,linksGetter:ga,createSpanLink:Ca,focusedSpanId:Ha,createFocusSpanLink:ka,topOfViewRefType:ma,theme:At,datasourceType:Rt}=this.props,Mt=rn.get(jt);if(!_n||!Mt)return null;const $t=(0,g._K)(sn,At),Pn=nt(this.props);return s.createElement("div",{className:Pn.row,key:Ut,style:{..._t,zIndex:1},...Gt},s.createElement(Ge,{color:$t,columnDivision:Kn,onDetailToggled:xn,detailState:Mt,linksGetter:ga,logItemToggle:St,logsToggle:mt,processToggle:kt,referenceItemToggle:pt,referencesToggle:it,warningsToggle:It,stackTracesToggle:Qt,span:bt,timeZone:Ma,tagsToggle:un,traceStartTime:_n.startTime,hoverIndentGuideIds:la,addHoverIndentGuideId:aa,removeHoverIndentGuideId:ba,createSpanLink:Ca,focusedSpanId:Ha,createFocusSpanLink:ka,topOfViewRefType:ma,datasourceType:Rt}))}render(){const bt=nt(this.props),{scrollElement:Ut}=this.props;return s.createElement(s.Fragment,null,s.createElement(f,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:bt.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:Ut}),s.createElement(o.h,{className:bt.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const nn=(0,l.HE)(pn)},58549:(j,I,e)=>{"use strict";e.d(I,{JE:()=>v,LU:()=>t.LU,Qx:()=>f,_h:()=>n,s2:()=>b,yM:()=>h});var t=e(25985);function n(y){const{min:E,max:C,viewStart:u,viewEnd:D}=y,P=C-E,S=E+u*P,M=C-(1-D)*P-S;return(R,O)=>({start:(R-S)/M,end:(O-S)/M})}function i(y,E,C){return!Array.isArray(C.tags)||!C.tags.length?!1:C.tags.some(u=>u.key===y&&u.value===E)}const s=y=>y.kind==="client",r=i.bind(null,"span.kind","client"),m=y=>s(y)||r(y),d=y=>y.kind==="server",o=i.bind(null,"span.kind","server"),l=y=>d(y)||o(y),a=y=>y.statusCode===2,g=i.bind(null,"error",!0),c=i.bind(null,"error","true"),h=y=>a(y)||g(y)||c(y);function f(y,E){const{depth:C}=y[E];let u=E+1;for(;u<y.length&&y[u].depth>C;u++)if(h(y[u]))return!0;return!1}function b(y){if(y.length<=1||!m(y[0]))return!1;const C=y[0].depth+1;let u=1;for(;u<y.length&&y[u].depth===C;){if(l(y[u]))return y[u];u++}return null}const v=y=>y.kind?y.kind==="client":y.tags.some(({key:E,value:C})=>E==="span.kind"&&C==="client")},63568:(j,I,e)=>{"use strict";e.d(I,{ID:()=>d,Q_:()=>n,S2:()=>i,TO:()=>t,cG:()=>s,gc:()=>r,vB:()=>m});const t="kind",n="status",i="status.message",s="library.name",r="library.version",m="trace.state",d="id"},28382:(j,I,e)=>{"use strict";e.d(I,{DetailState:()=>Qt,TracePageHeader:()=>kt,TraceTimelineViewer:()=>H,filterSpans:()=>Sn,transformTraceData:()=>ma});var t=e(42844),n=e(27702),i=e(86312),s=e(34667),r=e(80402),m=e(66310),d=e(20609),o=e(42185),l=e.n(o);const g={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let c;function h(){if(c)return c;const At=new(l())(document.body);return c=At,At}function f(At){const Rt=h();Object.keys(At).forEach(Mt=>{const $t=At[Mt];$t&&Rt.bind(g[Mt].binding,$t)})}function b(){h().reset()}var v=e(89898),y=e.n(v),E=e(90170),C=e(59391),u=e(25356),D=e(67437);const P=()=>({TimelineCollapser:(0,t.css)`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function S(At){const{onExpandAll:Rt,onExpandOne:Mt,onCollapseAll:$t,onCollapseOne:Pn}=At,tn=(0,m.wW)(P);return n.createElement("div",{className:tn.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(D.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Mt}),n.createElement(D.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:Pn}),n.createElement(D.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:Rt}),n.createElement(D.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:$t}))}var x=e(8033);const M=(0,r.B)(()=>({TimelineColumnResizer:(0,t.css)`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:(0,t.css)`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:(0,t.css)`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:(0,t.css)`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:(0,t.css)`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:(0,t.css)`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:(0,t.css)`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:(0,t.css)`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class R extends n.PureComponent{constructor(Rt){super(Rt),this._setRootElm=Mt=>{this._rootElm=Mt},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Mt,width:$t}=this._rootElm.getBoundingClientRect(),{min:Pn,max:tn}=this.props;return{clientXLeft:Mt,width:$t,maxValue:tn,minValue:Pn}},this._handleDragUpdate=({value:Mt})=>{this.setState({dragPosition:Mt})},this._handleDragEnd=({manager:Mt,value:$t})=>{Mt.resetBounds(),this.setState({dragPosition:null}),this.props.onChange($t)},this._dragManager=new x.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let Rt,Mt;const{position:$t,columnResizeHandleHeight:Pn}=this.props,{dragPosition:tn}=this.state;Rt=`${$t*100}%`;const Un={left:Rt};let $n=!1,kn=!1;const Fn=M();if(this._dragManager.isDragging()&&this._rootElm&&tn!=null){$n=tn<$t,kn=tn>$t;const Ta=`${Math.min($t,tn)*100}%`,ca=`calc(${(1-Math.max($t,tn))*100}% - 1px)`;Mt={left:Ta,right:ca}}else Mt=Un;Mt.height=Pn;const Da=$n||kn;return n.createElement("div",{className:Fn.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:y()(Fn.gripIcon,Da&&Fn.gripIconDragging),style:Un,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:y()(Fn.dragger,Da&&Fn.draggerDragging,kn&&Fn.draggerDraggingRight,$n&&Fn.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Mt,"data-testid":"TimelineColumnResizer--dragger"}))}}const O=(0,r.B)(()=>({TimelineViewingLayer:(0,t.css)`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:(0,t.css)`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:(0,t.css)`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:(0,t.css)`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:(0,t.css)`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:(0,t.css)`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function T(At){return Reflect.has(At,"isOutOfView")}function U(At,Rt,Mt){return At+Mt*(Rt-At)}function L(At,Rt,Mt){return(Mt-At)/(Rt-At)}function V(At,Rt){let[Mt,$t]=At<Rt?[At,Rt]:[Rt,At];return Mt>=1||$t<=0?{isOutOfView:!0}:(Mt<0&&(Mt=0),$t>1&&($t=1),{isDraggingLeft:At>Rt,left:`${Mt*100}%`,width:`${($t-Mt)*100}%`})}function w(At,Rt,Mt,$t,Pn){const tn=L(At,Rt,Mt),Un=L(At,Rt,$t),$n=V(tn,Un);if(T($n))return null;const{isDraggingLeft:kn,left:Fn,width:Da}=$n,Ta=O(),ca=(0,t.cx)({[Ta.TimelineViewingLayerDraggedDraggingRight]:!kn,[Ta.TimelineViewingLayerDraggedReframeDrag]:!Pn,[Ta.TimelineViewingLayerDraggedShiftDrag]:Pn});return n.createElement("div",{className:(0,t.cx)(Ta.TimelineViewingLayerDragged,Ta.TimelineViewingLayerDraggedDraggingLeft,ca),style:{left:Fn,width:Da},"data-testid":"Dragged"})}class K extends n.PureComponent{constructor(Rt){super(Rt),this._setRoot=Mt=>{this._root=Mt},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Mt,width:$t}=this._root.getBoundingClientRect();return{clientXLeft:Mt,width:$t}},this._handleReframeMouseMove=({value:Mt})=>{const[$t,Pn]=this.props.viewRangeTime.current,tn=U($t,Pn,Mt);this.props.updateNextViewRangeTime({cursor:tn})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Mt})=>{const{current:$t,reframe:Pn}=this.props.viewRangeTime,[tn,Un]=$t,$n=U(tn,Un,Mt),Fn={reframe:{anchor:Pn?Pn.anchor:$n,shift:$n}};this.props.updateNextViewRangeTime(Fn)},this._handleReframeDragEnd=({manager:Mt,value:$t})=>{const{current:Pn,reframe:tn}=this.props.viewRangeTime,[Un,$n]=Pn,kn=U(Un,$n,$t),Fn=tn?tn.anchor:kn,[Da,Ta]=kn<Fn?[kn,Fn]:[Fn,kn];Mt.resetBounds(),this.props.updateViewRangeTime(Da,Ta,"timeline-header")},this._draggerReframe=new x.default({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(Rt){const{boundsInvalidator:Mt}=this.props;Mt!==Rt.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:Rt}=this.props,{current:Mt,cursor:$t,reframe:Pn,shiftEnd:tn,shiftStart:Un}=Rt,[$n,kn]=Mt,Fn=Pn!=null||tn!=null||Un!=null;let Da;!Fn&&$t!=null&&$t>=$n&&$t<=kn&&(Da=`${L($n,kn,$t)*100}%`);const Ta=O();return n.createElement("div",{"aria-hidden":!0,className:Ta.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},Da!=null&&n.createElement("div",{className:Ta.TimelineViewingLayerCursorGuide,style:{left:Da},"data-testid":"TimelineViewingLayer--cursorGuide"}),Pn!=null&&w($n,kn,Pn.anchor,Pn.shift,!1),tn!=null&&w($n,kn,kn,tn,!0),Un!=null&&w($n,kn,$n,Un,!0))}}const B=At=>({TimelineHeaderRow:(0,t.css)`
      label: TimelineHeaderRow;
      background: ${(0,d.h)(At,"#ececec")};
      border-bottom: 1px solid ${(0,d.h)(At,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:(0,t.css)`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:(0,t.css)`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function W(At){const{duration:Rt,nameColumnWidth:Mt,numTicks:$t,onCollapseAll:Pn,onCollapseOne:tn,onColummWidthChange:Un,onExpandAll:$n,onExpandOne:kn,updateViewRangeTime:Fn,updateNextViewRangeTime:Da,viewRangeTime:Ta,columnResizeHandleHeight:ca}=At,[Sa,Yt]=Ta.current,Kt=(0,m.wW)(B);return n.createElement(u.Z,{className:Kt.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(u.Z.Cell,{className:y()(E.oD,E.H3,Kt.TimelineHeaderWrapper),width:Mt},n.createElement("h4",{className:Kt.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(S,{onCollapseAll:Pn,onExpandAll:$n,onCollapseOne:tn,onExpandOne:kn})),n.createElement(u.Z.Cell,{width:1-Mt},n.createElement(K,{boundsInvalidator:Mt,updateNextViewRangeTime:Da,updateViewRangeTime:Fn,viewRangeTime:Ta}),n.createElement(C.Z,{numTicks:$t,startTime:Sa*Rt,endTime:Yt*Rt,showLabels:!0})),n.createElement(R,{columnResizeHandleHeight:ca,position:Mt,onChange:Un,min:.2,max:.85}))}var _=e(62227);const k=(0,r.B)(At=>({TraceTimelineViewer:(0,t.css)`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,d.h)(At,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,d.h)(At,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,d.h)(At,"teal")};
      }

      & .json-markup-null {
        color: ${(0,d.h)(At,"teal")};
      }

      & .json-markup-number {
        color: ${(0,d.h)(At,"blue","black")};
      }
    `})),A=5;class z extends n.PureComponent{constructor(Rt){super(Rt),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.config.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.config.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.config.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,i.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.config.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){f({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:Rt,updateNextViewRangeTime:Mt,updateViewRangeTime:$t,viewRange:Pn,traceTimeline:tn,theme:Un,topOfViewRef:$n,focusedSpanIdForSearch:kn,...Fn}=this.props,{trace:Da}=Fn,Ta=k(Un);return n.createElement("div",{className:Ta.TraceTimelineViewer,ref:ca=>ca&&this.setState({height:ca.getBoundingClientRect().height})},n.createElement(W,{duration:Da.duration,nameColumnWidth:tn.spanNameColumnWidth,numTicks:A,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:Rt,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:Pn.time,updateNextViewRangeTime:Mt,updateViewRangeTime:$t,columnResizeHandleHeight:this.state.height}),n.createElement(_.ZP,{...Fn,...tn,setSpanNameColumnWidth:Rt,currentViewRangeTime:Pn.time.current,topOfViewRef:$n,focusedSpanIdForSearch:kn,datasourceType:this.props.datasourceType}))}}const H=(0,m.HE)(z);var Q=e(60956),X=e(80011),te=e(25357),oe=e(73453);const Z=()=>({NewWindowIconLarge:(0,t.css)`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function le(At){const{isLarge:Rt,className:Mt,...$t}=At,Pn=(0,m.wW)(Z),tn=y()({[Pn.NewWindowIconLarge]:Rt},Mt);return n.createElement(oe.J,{className:tn,name:"anchor",...$t})}le.defaultProps={isLarge:!1};const ce=At=>n.createElement("a",{href:At.href,title:At.title,target:"_blank",rel:"noopener noreferrer",className:At.className},At.children," ",n.createElement(le,null));function q(At){const{links:Rt}=At;return n.createElement(ce,{href:Rt[0].url,title:Rt[0].text,className:At.className})}const ne=100,pe="<trace-without-root-span>",re=()=>({BreakableText:(0,t.css)`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),ie=/\W*\w+\W*/g;function Se(At){const{className:Rt,text:Mt,wordRegexp:$t=ie}=At,Pn=(0,m.wW)(re);if(!Mt)return null;const tn=[];$t.exec("");let Un=$t.exec(Mt)||[Mt];for(;Un;)tn.push(n.createElement("span",{key:`${Mt}-${tn.length}`,className:Rt||Pn.BreakableText},Un[0])),Un=$t.exec(Mt);return tn}Se.defaultProps={wordRegexp:ie};const ye=At=>({TraceName:(0,t.css)`
      label: TraceName;
      font-size: ${At.typography.size.lg};
    `});function Ce(At){const{className:Rt,traceName:Mt}=At,$t=(0,m.wW)(ye),Pn=String(Mt||pe),tn=n.createElement(Se,{text:Pn});return n.createElement("span",{className:y()($t.TraceName,Rt)},tn)}var de=e(89949),we=e(79662);const _e=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:ne,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Je(){return _e}function Ue(At){return(0,de.get)(Je(),At)}function $e(At){const Rt=At.references?At.references.find(Mt=>Mt.refType==="CHILD_OF"):null;return Rt?Rt.span:null}const Qe=/#\{([^{}]*)\}/g;function tt(At){const Rt=new Set;return At.replace(Qe,(Mt,$t)=>(Rt.add($t),Mt)),Array.from(Rt)}function lt(At,Rt,Mt){return At.replace(Qe,($t,Pn)=>{const tn=Mt[Pn];return tn==null?"":Rt(tn)})}function Me(At,Rt){if(typeof At!="string")throw new Error("Invalid template");return{parameters:tt(At),template:lt.bind(null,At,Rt)}}function De(At){if(typeof At=="string")return Rt=>Rt===At;if(Array.isArray(At))return Rt=>At.indexOf(Rt)>-1;if(At==null)return()=>!0;throw new Error(`Invalid value: ${At}`)}const We=At=>At;function qe(At){try{const Rt=Me(At.url,encodeURIComponent),Mt=Me(At.text,We);return{object:At,type:De(At.type),key:De(At.key),value:De(At.value),url:Rt,text:Mt,parameters:(0,de.uniq)(Rt.parameters.concat(Mt.parameters))}}catch(Rt){return console.error(`Ignoring invalid link pattern: ${Rt}`,At),null}}function st(At,Rt){if(Rt)return Rt.find(Mt=>Mt.key===At)}function dt(At,Rt){let Mt=Rt;for(;Mt;){const $t=st(At,Mt.tags)||st(At,Mt.process.tags);if($t)return $t;Mt=$e(Mt)}}function Tt(At,Rt){return At.template(Rt)}function Nt(At,Rt){const Mt=[],$t=Object.keys(Rt).filter(Pn=>typeof Rt[Pn]=="string"||Rt[Pn]==="number");return At?.filter(Pn=>Pn?.type("traces")).forEach(Pn=>{const tn={};Pn?.parameters.every($n=>{const kn=$n;return $t.includes(kn)?(tn[$n]=Rt[kn],!0):!1})&&Mt.push({url:Tt(Pn.url,tn),text:Tt(Pn.text,tn)})}),Mt}function Bt(At,Rt,Mt,$t){const Pn=Mt[$t];let tn="logs";const Un=Rt.process.tags===Mt;Un&&(tn="process"),Rt.tags===Mt&&(tn="tags");const kn=[];return At.forEach(Fn=>{if(Fn.type(tn)&&Fn.key(Pn.key)&&Fn.value(Pn.value)){const Da={};Fn.parameters.every(ca=>{let Sa=st(ca,Mt);return!Sa&&!Un&&(Sa=dt(ca,Rt)),Sa?(Da[ca]=Sa.value,!0):(console.warn(`Skipping link pattern, missing parameter ${ca} for key ${Pn.key} in ${tn}.`,Fn.object),!1)})&&kn.push({url:Tt(Fn.url,Da),text:Tt(Fn.text,Da)})}}),kn}function yt(At,Rt){return(Mt,$t,Pn)=>{if(At.length===0)return[];const tn=$t[Pn];let Un=Rt.get(tn);return Un||(Un=Bt(At,Mt,$t,Pn),Rt.set(tn,Un)),Un}}const ft=(Ue("linkPatterns")||[]).map(qe).filter(At=>!!At),ct=(0,we.Z)(10)(At=>{const Rt=[];return At?Nt(ft,At):Rt}),ge=yt(ft,new WeakMap);function Be(At){let Rt;const Mt=new Set(At.map(({spanID:$t})=>$t));for(let $t=0;$t<At.length;$t++){if(At[$t].references&&At[$t].references.some(({traceID:$n,spanID:kn})=>$n===At[$t].traceID&&Mt.has(kn)))continue;if(!Rt){Rt=At[$t];continue}const tn=At[$t].references&&At[$t].references.length||0,Un=Rt.references&&Rt.references.length||0;(tn<Un||tn===Un&&At[$t].startTime<Rt.startTime)&&(Rt=At[$t])}return Rt?`${Rt.process.serviceName}: ${Rt.operationName}`:""}const Le=(0,de.memoize)(Be,At=>At.length?At[0].traceID:0);function he(At){for(let Rt=0;Rt<At.length;Rt++){const Mt=At[Rt].tags.filter(tn=>tn.key==="http.method"),$t=At[Rt].tags.filter(tn=>tn.key==="http.status_code"),Pn=At[Rt].tags.filter(tn=>tn.key==="http.url"||tn.key==="http.target"||tn.key==="http.path");if(Mt.length>0||$t.length>0||Pn.length>0)return{method:Mt,status:$t,url:Pn}}return{}}const He=(0,de.memoize)(he,At=>At.length?At[0].traceID:0);var Pe=e(25985),Ie=e(12308),Te=e(31783),Re=e(66670);const ue=At=>({ActionButton:(0,t.css)`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      &:after {
        content: '';
        background: ${At.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function xe(At){const{onClick:Rt,ariaLabel:Mt,label:$t,icon:Pn}=At,tn=(0,m.wW)(ue);return n.createElement(Re.zx,{className:tn.ActionButton,size:"sm",variant:"secondary",fill:"outline",type:"button",icon:Pn,"aria-label":Mt,onClick:Rt},$t)}const Ve=At=>({TracePageActions:(0,t.css)`
      label: TracePageActions;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    `,feedback:(0,t.css)`
      margin: 6px;
      color: ${At.colors.text.secondary};
      font-size: ${At.typography.bodySmall.fontSize};
      &:hover {
        color: ${At.colors.text.link};
      }
    `});function Ne(At){const{traceId:Rt,data:Mt,app:$t}=At,Pn=(0,m.l4)(),tn=Ve(Pn),[Un,$n]=(0,n.useState)(!1),kn=()=>{navigator.clipboard.writeText(Rt),$n(!0),setTimeout(()=>{$n(!1)},5e3)},Fn=()=>{const Da=(0,Te.gb)(Mt,"Trace-"+Rt.substring(Rt.length-6));(0,i.ff)("grafana_traces_download_traces_clicked",{app:$t,grafana_version:Ie.config.buildInfo.version,trace_format:Da,location:"trace-view"})};return n.createElement("div",{className:tn.TracePageActions},n.createElement("a",{href:"https://forms.gle/RZDEx8ScyZNguDoC8",className:tn.feedback,title:"Share your thoughts about tracing in Grafana.",target:"_blank",rel:"noreferrer noopener"},n.createElement(oe.J,{name:"comment-alt-message"})," Give feedback"),n.createElement(xe,{onClick:kn,ariaLabel:"Copy Trace ID",label:Un?"Copied!":"Trace ID",icon:"copy"}),n.createElement(xe,{onClick:Fn,ariaLabel:"Export Trace",label:"Export",icon:"save"}))}var fe=e(37391),ve=e(81078),ze=e(76715),Oe=e(41640),Fe=e(71107),Ge=e(48024),nt=e(64022),Xe=e(28580),ut=e(71654),ht=e(24540),wt=e(63568);const mn=(0,n.memo)(function(Rt){const{trace:Mt,spanFilterMatches:$t,setFocusedSpanIdForSearch:Pn,focusedSpanIndexForSearch:tn,setFocusedSpanIndexForSearch:Un,datasourceType:$n,showSpanFilters:kn}=Rt,Fn=vn((0,m.l4)(),kn);(0,n.useEffect)(()=>{if($t&&tn!==-1){const Qn=Array.from($t);Pn(Qn[tn])}},[tn,Pn,$t]);const Da=(Qn,va)=>{if(Qn.preventDefault(),Qn.stopPropagation(),va){if((0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:$n,grafana_version:s.config.buildInfo.version,direction:"next"}),tn===-1||$t&&tn===$t.size-1){Un(0);return}Un(tn+1)}},Ta=(Qn,va)=>{if(Qn.preventDefault(),Qn.stopPropagation(),va){if((0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:$n,grafana_version:s.config.buildInfo.version,direction:"prev"}),$t&&(tn===-1||tn===0)){Un($t.size-1);return}Un(tn-1)}},ca=(Qn,va)=>{Qn.key==="Enter"&&Da(Qn,va)},Sa=(Qn,va)=>{Qn.key==="Enter"&&Ta(Qn,va)},Yt=($t&&$t?.size>0)??!1,Kt=Yt?Fn.button:(0,t.cx)(Fn.button,Fn.buttonDisabled),hn=(0,n.useCallback)(Qn=>n.createElement(X.u,{content:Qn,placement:"top"},n.createElement("span",{className:Fn.tooltip},n.createElement(oe.J,{name:"info-circle",size:"md"}))),[Fn.tooltip]),Mn=(0,n.useCallback)((Qn,va)=>{const Ga=[],La=[];let Ia=n.createElement(n.Fragment,null,n.createElement("span",null,`${Mt.spans.length} spans`),hn(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",va),n.createElement("div",null,"Depth: ",Qn))));if($t)if($t.forEach(Ka=>{Mt.processes[Ka]&&(Ga.push(Mt.processes[Ka].serviceName),La.push(Mt.spans.find(qa=>qa.spanID===Ka)?.depth||0))}),$t.size===0)Ia=n.createElement(n.Fragment,null,n.createElement("span",null,"0 matches"),hn("There are 0 span matches for the filters selected. Please try removing some of the selected filters."));else{const Ka=$t.size===1?"match":"matches",qa=tn!==-1?`${tn+1}/${$t.size} ${Ka}`:`${$t.size} ${Ka}`;Ia=n.createElement(n.Fragment,null,n.createElement("span",null,qa),hn(n.createElement(n.Fragment,null,n.createElement("div",null,"Services: ",new Set(Ga).size,"/",va),n.createElement("div",null,"Depth: ",new Set(La).size,"/",Qn))))}return Ia},[tn,hn,$t,Mt.processes,Mt.spans]),Hn=new Set((0,de.values)(Mt.processes).map(Qn=>Qn.serviceName)).size,Jn=(0,de.get)((0,de.maxBy)(Mt.spans,"depth"),"depth",0)+1;return n.createElement(n.Fragment,null,n.createElement("span",{className:Fn.matches},Mn(Jn,Hn)),n.createElement("div",{className:Yt?Fn.buttons:(0,t.cx)(Fn.buttons,Fn.buttonsDisabled)},n.createElement("div",{"aria-label":"Prev result button",className:Kt,onClick:Qn=>Ta(Qn,Yt),onKeyDown:Qn=>Sa(Qn,Yt),role:"button",tabIndex:Yt?0:-1},"Prev"),n.createElement("div",{"aria-label":"Next result button",className:Kt,onClick:Qn=>Da(Qn,Yt),onKeyDown:Qn=>ca(Qn,Yt),role:"button",tabIndex:Yt?0:-1},"Next")))}),vn=(At,Rt)=>{const Mt=(0,Re.fW)({theme:At,variant:"secondary",size:Rt?"md":"sm",iconOnly:!1,fill:"outline"});return{buttons:(0,t.css)`
      display: inline-flex;
      gap: 4px;
    `,buttonsDisabled:(0,t.css)`
      cursor: not-allowed;
    `,button:(0,t.css)`
      ${Mt.button};
    `,buttonDisabled:(0,t.css)`
      ${Mt.disabled};
      pointer-events: none;
    `,matches:(0,t.css)`
      margin-right: ${At.spacing(2)};
    `,tooltip:(0,t.css)`
      color: #aaa;
      margin: 0 0 0 5px;
    `}};var gn=e(42074);function Sn(At,Rt){if(!Rt)return;let Mt=!1;At.serviceName&&(Rt=bt(Rt,At),Mt=!0),At.spanName&&(Rt=Ut(Rt,At),Mt=!0),(At.from||At.to)&&(Rt=_t(Rt,At),Mt=!0);const $t=Cn(Rt,At.tags);return $t&&(Rt=$t,Mt=!0),Mt?new Set(Rt.map(Pn=>Pn.spanID)):void 0}const Cn=(At,Rt)=>{if(Rt=Rt.filter(Mt=>Mt.key&&Mt.key!==""||Mt.value),Rt.length>0)return At.filter(Mt=>Rt.every($t=>{if($t.key&&$t.value){if(Mt.tags.some(Pn=>nn($t,Pn))||Mt.process.tags.some(Pn=>nn($t,Pn))||Mt.logs&&Mt.logs.some(Pn=>Pn.fields.some(tn=>nn($t,tn)))||Mt.kind&&$t.key===wt.TO&&$t.value===Mt.kind||Mt.statusCode!==void 0&&$t.key===wt.Q_&&$t.value===fe.Q[Mt.statusCode].toLowerCase()||Mt.statusMessage&&$t.key===wt.S2&&$t.value===Mt.statusMessage||Mt.instrumentationLibraryName&&$t.key===wt.cG&&$t.value===Mt.instrumentationLibraryName||Mt.instrumentationLibraryVersion&&$t.key===wt.gc&&$t.value===Mt.instrumentationLibraryVersion||Mt.traceState&&$t.key===wt.vB&&$t.value===Mt.traceState||$t.key===wt.ID&&$t.value===Mt.spanID)return Ct($t.operator,!0)}else if($t.key&&(Mt.tags.some(Pn=>pn($t.key,Pn.key))||Mt.process.tags.some(Pn=>pn($t.key,Pn.key))||Mt.logs&&Mt.logs.some(Pn=>Pn.fields.some(tn=>pn($t.key,tn.key)))||Mt.kind&&$t.key===wt.TO||Mt.statusCode!==void 0&&$t.key===wt.Q_||Mt.statusMessage&&$t.key===wt.S2||Mt.instrumentationLibraryName&&$t.key===wt.cG||Mt.instrumentationLibraryVersion&&$t.key===wt.gc||Mt.traceState&&$t.key===wt.vB||$t.key===wt.ID))return Ct($t.operator,!0);return Ct($t.operator,!1)}))},pn=(At,Rt)=>At===Rt.toString(),nn=(At,Rt)=>At.key===Rt.key.toString()&&At.value===Rt.value.toString(),Ct=(At,Rt)=>At==="="?Rt:!Rt,bt=(At,Rt)=>At.filter(Mt=>Rt.serviceNameOperator==="="?Mt.process.serviceName===Rt.serviceName:Mt.process.serviceName!==Rt.serviceName),Ut=(At,Rt)=>At.filter(Mt=>Rt.spanNameOperator==="="?Mt.operationName===Rt.spanName:Mt.operationName!==Rt.spanName),_t=(At,Rt)=>{const Mt=Gt(Rt?.from||""),$t=Gt(Rt?.to||"");let Pn=[];if(Mt&&(Pn=At.filter(tn=>Rt.fromOperator===">"?tn.duration>Mt:tn.duration>=Mt)),$t){const tn=Un=>Rt.toOperator==="<"?Un.duration<$t:Un.duration<=$t;Pn=Pn.length>0?Pn.filter(Un=>tn(Un)):At.filter(Un=>tn(Un))}return Pn},Gt=At=>{if(At.includes("ns"))return parseFloat(At.split("ns")[0])/1e3;if(At.includes("us"))return parseFloat(At.split("us")[0]);if(At.includes("\xB5s"))return parseFloat(At.split("\xB5s")[0]);if(At.includes("ms"))return parseFloat(At.split("ms")[0])*1e3;if(At.includes("s"))return parseFloat(At.split("s")[0])*1e3*1e3;if(At.includes("m"))return parseFloat(At.split("m")[0])*1e3*1e3*60;if(At.includes("h"))return parseFloat(At.split("h")[0])*1e3*1e3*60*60},jt=(0,n.memo)(function(Rt){const{trace:Mt,search:$t,spanFilterMatches:Pn,showSpanFilterMatchesOnly:tn,setShowSpanFilterMatchesOnly:Un,focusedSpanIndexForSearch:$n,setFocusedSpanIndexForSearch:kn,setFocusedSpanIdForSearch:Fn,datasourceType:Da,clear:Ta,showSpanFilters:ca}=Rt,Sa=(0,m.wW)(sn),Yt=(0,n.useMemo)(()=>$t.serviceName&&$t.serviceName!==""||$t.spanName&&$t.spanName!==""||Gt($t.from||"")||Gt($t.to||"")||$t.tags.length>1||$t.tags.some(Kt=>Kt.key),[$t.serviceName,$t.spanName,$t.from,$t.to,$t.tags]);return n.createElement("div",{className:Sa.container},n.createElement("div",{className:Sa.controls},n.createElement(n.Fragment,null,n.createElement("div",{className:Sa.clearButton},n.createElement(Re.zx,{variant:"destructive",disabled:!Yt,type:"button",fill:"outline","aria-label":"Clear filters button",onClick:Ta},"Clear"),n.createElement("div",{className:Sa.matchesOnly},n.createElement(gn.r,{value:tn,onChange:Kt=>Un(Kt.currentTarget.checked??!1),label:"Show matches only switch"}),n.createElement(Re.zx,{onClick:()=>Un(!tn),className:Sa.clearMatchesButton,variant:"secondary",fill:"text"},"Show matches only"))),n.createElement("div",{className:Sa.nextPrevResult},n.createElement(mn,{trace:Mt,spanFilterMatches:Pn,setFocusedSpanIdForSearch:Fn,focusedSpanIndexForSearch:$n,setFocusedSpanIndexForSearch:kn,datasourceType:Da,showSpanFilters:ca})))))}),sn=At=>{const Rt=(0,Re.fW)({theme:At,variant:"secondary",size:"md",iconOnly:!1,fill:"outline"});return{button:(0,t.css)(Rt.button),buttonDisabled:(0,t.css)(Rt.disabled,{pointerEvents:"none",cursor:"not-allowed"}),container:(0,t.css)`
      display: inline;
    `,controls:(0,t.css)`
      display: flex;
      justify-content: flex-end;
      margin: 5px 0 0 0;
    `,clearButton:(0,t.css)`
      order: 1;
    `,matchesOnly:(0,t.css)`
      display: inline-flex;
      margin: 0 0 0 25px;
      vertical-align: middle;
      align-items: center;

      span {
        cursor: pointer;
      }
    `,clearMatchesButton:(0,t.css)`
      color: ${At.colors.text.primary};
      &:hover {
        background: inherit;
        color: inherit;
      }
    `,nextPrevResult:(0,t.css)`
      margin-left: auto;
      order: 2;
    `}},St=(0,n.memo)(At=>{const{trace:Rt,search:Mt,setSearch:$t,showSpanFilters:Pn,setShowSpanFilters:tn,showSpanFilterMatchesOnly:Un,setShowSpanFilterMatchesOnly:$n,setFocusedSpanIdForSearch:kn,spanFilterMatches:Fn,datasourceType:Da}=At,Ta={...(0,m.wW)(mt)},[ca,Sa]=(0,n.useState)(),[Yt,Kt]=(0,n.useState)(),[hn,Mn]=(0,n.useState)(),[Hn,Jn]=(0,n.useState)({}),[Qn,va]=(0,n.useState)(-1),Ga=/^\d+(?:\.\d)?\d*(?:ns|us|s|ms|s|m|h)$/,La=(0,n.useCallback)(()=>{Sa(void 0),Kt(void 0),Mn(void 0),Jn({}),$t(ht.js)},[$t]);if((0,n.useEffect)(()=>{La()},[La,Rt]),!Rt)return null;const Ia=ua=>{va(-1),kn(""),$t(ua)},Ka=()=>{if(!ca){const ua=Rt.spans.map(ja=>ja.process.serviceName);Sa((0,de.uniq)(ua).sort().map(ve.E))}},qa=()=>{if(!Yt){const ua=Rt.spans.map(ja=>ja.operationName);Kt((0,de.uniq)(ua).sort().map(ve.E))}},hs=()=>{if(!hn){let ua=[],ja=[];Rt.spans.forEach(Pa=>{Pa.tags.forEach(Ya=>{ua.push(Ya.key)}),Pa.process.tags.forEach(Ya=>{ua.push(Ya.key)}),Pa.logs!==null&&Pa.logs.forEach(Ya=>{Ya.fields.forEach(_s=>{ja.push(_s.key)})}),Pa.kind&&ua.push(wt.TO),Pa.statusCode!==void 0&&ua.push(wt.Q_),Pa.statusMessage&&ua.push(wt.S2),Pa.instrumentationLibraryName&&ua.push(wt.cG),Pa.instrumentationLibraryVersion&&ua.push(wt.gc),Pa.traceState&&ua.push(wt.vB),ua.push(wt.ID)}),ua=(0,de.uniq)(ua).sort(),ja=(0,de.uniq)(ja).sort(),Mn([...ua,...ja].map(ve.E))}},$s=async ua=>{const ja=[];return Rt.spans.forEach(Pa=>{const Ya=Pa.tags.find(Us=>Us.key===ua)?.value;Ya&&ja.push(Ya.toString());const _s=Pa.process.tags.find(Us=>Us.key===ua)?.value;switch(_s&&ja.push(_s.toString()),Pa.logs!==null&&Pa.logs.forEach(Us=>{const ds=Us.fields.find(cn=>cn.key===ua)?.value;ds&&ja.push(ds.toString())}),ua){case wt.TO:Pa.kind&&ja.push(Pa.kind);break;case wt.Q_:Pa.statusCode!==void 0&&ja.push(fe.Q[Pa.statusCode].toLowerCase());break;case wt.S2:Pa.statusMessage&&ja.push(Pa.statusMessage);break;case wt.cG:Pa.instrumentationLibraryName&&ja.push(Pa.instrumentationLibraryName);break;case wt.gc:Pa.instrumentationLibraryVersion&&ja.push(Pa.instrumentationLibraryVersion);break;case wt.vB:Pa.traceState&&ja.push(Pa.traceState);break;case wt.ID:ja.push(Pa.spanID);break;default:break}}),(0,de.uniq)(ja).sort().map(ve.E)},zs=(ua,ja)=>{$t({...Mt,tags:Mt.tags?.map(Ya=>Ya.id===ua.id?{...Ya,key:ja?.value||"",value:void 0}:Ya)}),(async()=>{if(ja?.value)Jn({...Hn,[ua.id]:await $s(ja.value)});else{const Ya={...Hn};Ya[ua.id]&&delete Ya[ua.id],Jn(Ya)}})()},Ns=()=>{const ua={id:(0,ht.kb)(),operator:"="};$t({...Mt,tags:[...Mt.tags,ua]})},Xs=ua=>{let ja=Mt.tags.filter(Pa=>Pa.id!==ua);ja.length===0&&(ja=[{id:(0,ht.kb)(),operator:"="}]),$t({...Mt,tags:ja})},ys=n.createElement(n.Fragment,null,n.createElement(X.u,{content:"Filter your spans below. You can continue to apply filters until you have narrowed down your resulting spans to the select few you are most interested in.",placement:"right"},n.createElement("span",{className:Ta.collapseLabel},"Span Filters",n.createElement(oe.J,{size:"md",name:"info-circle"}))),!Pn&&n.createElement("div",{className:Ta.nextPrevResult},n.createElement(mn,{trace:Rt,spanFilterMatches:Fn,setFocusedSpanIdForSearch:kn,focusedSpanIndexForSearch:Qn,setFocusedSpanIndexForSearch:va,datasourceType:Da,showSpanFilters:Pn})));return n.createElement("div",{className:Ta.container},n.createElement(Oe.U,{label:ys,collapsible:!0,isOpen:Pn,onToggle:tn},n.createElement(Fe.Z,null,n.createElement(Ge._,{label:"Service Name",labelWidth:16},n.createElement(nt.Lh,{spacing:"xs"},n.createElement(Xe.Ph,{"aria-label":"Select service name operator",onChange:ua=>Ia({...Mt,serviceNameOperator:ua.value}),options:[(0,ve.E)("="),(0,ve.E)("!=")],value:Mt.serviceNameOperator}),n.createElement(Xe.Ph,{"aria-label":"Select service name",isClearable:!0,onChange:ua=>Ia({...Mt,serviceName:ua?.value||""}),onOpenMenu:Ka,options:ca,placeholder:"All service names",value:Mt.serviceName||null})))),n.createElement(Fe.Z,null,n.createElement(Ge._,{label:"Span Name",labelWidth:16},n.createElement(nt.Lh,{spacing:"xs"},n.createElement(Xe.Ph,{"aria-label":"Select span name operator",onChange:ua=>Ia({...Mt,spanNameOperator:ua.value}),options:[(0,ve.E)("="),(0,ve.E)("!=")],value:Mt.spanNameOperator}),n.createElement(Xe.Ph,{"aria-label":"Select span name",isClearable:!0,onChange:ua=>Ia({...Mt,spanName:ua?.value||""}),onOpenMenu:qa,options:Yt,placeholder:"All span names",value:Mt.spanName||null})))),n.createElement(Fe.Z,null,n.createElement(Ge._,{label:"Duration",labelWidth:16,tooltip:"Filter by duration. Accepted units are ns, us, ms, s, m, h"},n.createElement(nt.Lh,{spacing:"xs",align:"flex-start"},n.createElement(Xe.Ph,{"aria-label":"Select min span operator",onChange:ua=>Ia({...Mt,fromOperator:ua.value}),options:[(0,ve.E)(">"),(0,ve.E)(">=")],value:Mt.fromOperator}),n.createElement("div",{className:Ta.intervalInput},n.createElement(ut.w,{ariaLabel:"Select min span duration",onChange:ua=>Ia({...Mt,from:ua}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Mt.from||"",validationRegex:Ga})),n.createElement(Xe.Ph,{"aria-label":"Select max span operator",onChange:ua=>Ia({...Mt,toOperator:ua.value}),options:[(0,ve.E)("<"),(0,ve.E)("<=")],value:Mt.toOperator}),n.createElement(ut.w,{ariaLabel:"Select max span duration",onChange:ua=>Ia({...Mt,to:ua}),isInvalidError:"Invalid duration",placeholder:"e.g. 100ms, 1.2s",width:18,value:Mt.to||"",validationRegex:Ga})))),n.createElement(Fe.Z,{className:Ta.tagsRow},n.createElement(Ge._,{label:"Tags",labelWidth:16,tooltip:"Filter by tags, process tags or log fields in your spans."},n.createElement("div",null,Mt.tags.map((ua,ja)=>n.createElement("div",{key:ja},n.createElement(nt.Lh,{spacing:"xs",width:"auto"},n.createElement(Xe.Ph,{"aria-label":"Select tag key",isClearable:!0,key:ua.key,onChange:Pa=>zs(ua,Pa),onOpenMenu:hs,options:hn,placeholder:"Select tag",value:ua.key||null}),n.createElement(Xe.Ph,{"aria-label":"Select tag operator",onChange:Pa=>{Ia({...Mt,tags:Mt.tags?.map(Ya=>Ya.id===ua.id?{...Ya,operator:Pa.value}:Ya)})},options:[(0,ve.E)("="),(0,ve.E)("!=")],value:ua.operator}),n.createElement("span",{className:Ta.tagValues},n.createElement(Xe.Ph,{"aria-label":"Select tag value",isClearable:!0,key:ua.value,onChange:Pa=>{Ia({...Mt,tags:Mt.tags?.map(Ya=>Ya.id===ua.id?{...Ya,value:Pa?.value||""}:Ya)})},options:Hn[ua.id]?Hn[ua.id]:[],placeholder:"Select value",value:ua.value})),n.createElement(ze._,{"aria-label":"Remove tag",variant:"secondary",icon:"times",onClick:()=>Xs(ua.id),title:"Remove tag"}),n.createElement("span",{className:Ta.addTag},Mt?.tags?.length&&ja===Mt.tags.length-1&&n.createElement(ze._,{"aria-label":"Add tag",variant:"secondary",icon:"plus",onClick:Ns,title:"Add tag"})))))))),n.createElement(jt,{trace:Rt,search:Mt,spanFilterMatches:Fn,showSpanFilterMatchesOnly:Un,setShowSpanFilterMatchesOnly:$n,setFocusedSpanIdForSearch:kn,focusedSpanIndexForSearch:Qn,setFocusedSpanIndexForSearch:va,datasourceType:Da,clear:La,showSpanFilters:Pn})))});St.displayName="SpanFilters";const mt=At=>({container:(0,t.css)`
      margin: 0.5em 0 -${At.spacing(1)} 0;
      z-index: 5;

      & > div {
        border-left: none;
        border-right: none;
      }
    `,collapseLabel:(0,t.css)`
      svg {
        color: #aaa;
        margin: -2px 0 0 10px;
      }
    `,addTag:(0,t.css)`
      margin: 0 0 0 10px;
    `,intervalInput:(0,t.css)`
      margin: 0 -4px 0 0;
    `,tagsRow:(0,t.css)`
      margin: -4px 0 0 0;
    `,tagValues:(0,t.css)`
      max-width: 200px;
    `,nextPrevResult:(0,t.css)`
      flex: 1;
      align-items: center;
      display: flex;
      justify-content: flex-end;
      margin-right: ${At.spacing(1)};
    `}),kt=(0,n.memo)(At=>{const{trace:Rt,data:Mt,app:$t,timeZone:Pn,search:tn,setSearch:Un,showSpanFilters:$n,setShowSpanFilters:kn,showSpanFilterMatchesOnly:Fn,setShowSpanFilterMatchesOnly:Da,setFocusedSpanIdForSearch:Ta,spanFilterMatches:ca,datasourceType:Sa,setHeaderHeight:Yt}=At,Kt=(0,m.wW)(it);(0,n.useEffect)(()=>{Yt(document.querySelector("."+Kt.header)?.scrollHeight??0)},[Yt,$n,Kt.header]);const hn=(0,n.useMemo)(()=>Rt?ct(Rt):[],[Rt]);if(!Rt)return null;const Mn=(La,Ia)=>{const Ka=(0,Q.dq)(La.startTime/1e3,{timeZone:Ia,defaultWithMS:!0}),qa=Ka.match(/^(.+)(:\d\d\.\d+)$/);return qa?n.createElement("span",{className:Kt.TracePageHeaderOverviewItemValue},qa[1],n.createElement("span",{className:Kt.TracePageHeaderOverviewItemValueDetail},qa[2])):Ka},Hn=n.createElement("h1",{className:y()(Kt.title)},n.createElement(Ce,{traceName:Le(Rt.spans)}),n.createElement("small",{className:Kt.duration},(0,Pe.LU)(Rt.duration))),{method:Jn,status:Qn,url:va}=He(Rt.spans);let Ga="green";return Qn&&Qn.length>0&&(Qn[0].value.toString().charAt(0)==="4"?Ga="orange":Qn[0].value.toString().charAt(0)==="5"&&(Ga="red")),n.createElement("header",{className:Kt.header},n.createElement("div",{className:Kt.titleRow},hn&&hn.length>0&&n.createElement(q,{links:hn,className:Kt.TracePageHeaderBack}),Hn,n.createElement(Ne,{traceId:Rt.traceID,data:Mt,app:$t})),n.createElement("div",{className:Kt.subtitle},n.createElement("span",{className:Kt.timestamp},Mn(Rt,Pn)),n.createElement("span",{className:Kt.tagMeta},Jn&&Jn.length>0&&n.createElement(X.u,{content:"http.method",interactive:!0},n.createElement("span",{className:Kt.tag},n.createElement(te.C,{text:Jn[0].value,color:"blue"}))),Qn&&Qn.length>0&&n.createElement(X.u,{content:"http.status_code",interactive:!0},n.createElement("span",{className:Kt.tag},n.createElement(te.C,{text:Qn[0].value,color:Ga}))),va&&va.length>0&&n.createElement(X.u,{content:"http.url or http.target or http.path",interactive:!0},n.createElement("span",{className:Kt.url},va[0].value)))),n.createElement(St,{trace:Rt,showSpanFilters:$n,setShowSpanFilters:kn,showSpanFilterMatchesOnly:Fn,setShowSpanFilterMatchesOnly:Da,search:tn,setSearch:Un,spanFilterMatches:ca,setFocusedSpanIdForSearch:Ta,datasourceType:Sa}))});kt.displayName="TracePageHeader";const it=At=>({TracePageHeaderBack:(0,t.css)`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderOverviewItemValueDetail:y()((0,t.css)`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:(0,t.css)`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,header:(0,t.css)`
      label: TracePageHeader;
      background-color: ${At.colors.background.primary};
      padding: 0.5em 0 0 0;
      position: sticky;
      top: 0;
      z-index: 5;
    `,titleRow:(0,t.css)`
      align-items: flex-start;
      display: flex;
      padding: 0 8px;
    `,title:(0,t.css)`
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:(0,t.css)`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 0.75em 0.5em;
    `,tag:(0,t.css)`
      margin: 0 0.5em 0 0;
    `,duration:(0,t.css)`
      color: #aaa;
      margin: 0 0.75em;
    `,timestamp:(0,t.css)`
      vertical-align: middle;
    `,tagMeta:(0,t.css)`
      margin: 0 0.75em;
      vertical-align: text-top;
    `,url:(0,t.css)`
      margin: -2.5px 0.3em;
      height: 15px;
      overflow: hidden;
      word-break: break-all;
      line-height: 20px;
    `,TracePageHeaderTraceId:(0,t.css)`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `});var pt=e(32042),It=e(66798);class Qt{constructor(Rt){const{isTagsOpen:Mt,isProcessOpen:$t,isReferencesOpen:Pn,isWarningsOpen:tn,isStackTracesOpen:Un,logs:$n,references:kn}=Rt||{};this.isTagsOpen=!!Mt,this.isProcessOpen=!!$t,this.isReferencesOpen=!!Pn,this.isWarningsOpen=!!tn,this.isStackTracesOpen=!!Un,this.logs={isOpen:!!($n&&$n.isOpen),openedItems:$n&&$n.openedItems?new Set($n.openedItems):new Set},this.references={isOpen:!!(kn&&kn.isOpen),openedItems:kn&&kn.openedItems?new Set(kn.openedItems):new Set}}toggleTags(){const Rt=new Qt(this);return Rt.isTagsOpen=!this.isTagsOpen,Rt}toggleProcess(){const Rt=new Qt(this);return Rt.isProcessOpen=!this.isProcessOpen,Rt}toggleReferences(){const Rt=new Qt(this);return Rt.references.isOpen=!this.references.isOpen,Rt}toggleReferenceItem(Rt){const Mt=new Qt(this);return Mt.references.openedItems.has(Rt)?Mt.references.openedItems.delete(Rt):Mt.references.openedItems.add(Rt),Mt}toggleWarnings(){const Rt=new Qt(this);return Rt.isWarningsOpen=!this.isWarningsOpen,Rt}toggleStackTraces(){const Rt=new Qt(this);return Rt.isStackTracesOpen=!this.isStackTracesOpen,Rt}toggleLogs(){const Rt=new Qt(this);return Rt.logs.isOpen=!this.logs.isOpen,Rt}toggleLogItem(Rt){const Mt=new Qt(this);return Mt.logs.openedItems.has(Rt)?Mt.logs.openedItems.delete(Rt):Mt.logs.openedItems.add(Rt),Mt}}var rn=e(75892);class un{static iterFunction(Rt,Mt=0){return $t=>Rt($t.value,$t,Mt)}static searchFunction(Rt){return typeof Rt=="function"?Rt:(Mt,$t)=>Rt instanceof un?$t===Rt:Mt===Rt}constructor(Rt,Mt=[]){this.value=Rt,this.children=Mt}get depth(){return this.children?.reduce((Rt,Mt)=>Math.max(Mt.depth+1,Rt),1)}get size(){let Rt=0;return this.walk(()=>Rt++),Rt}addChild(Rt){return this.children?.push(Rt instanceof un?Rt:new un(Rt)),this}find(Rt){if(un.iterFunction(un.searchFunction(Rt))(this))return this;for(let $t=0;$t<this.children.length;$t++){const Pn=this.children[$t].find(Rt);if(Pn)return Pn}return null}getPath(Rt){const Mt=un.iterFunction(un.searchFunction(Rt)),$t=(Pn,tn)=>{const Un=tn.concat([Pn]);if(Mt(Pn))return Un;for(let $n=0;$n<Pn.children.length;$n++){const kn=Pn.children[$n],Fn=$t(kn,Un);if(Fn)return Fn}return null};return $t(this,[])}walk(Rt,Mt=0){const $t=[];let Pn=Mt;for($t.push({node:this,depth:Pn});$t.length;){const tn=$t.pop();if(tn){const{node:Un,depth:$n}=tn;Rt(Un.value,Un,$n),Pn=($n||0)+1;let kn=Un.children.length-1;for(;kn>=0;)$t.push({node:Un.children[kn],depth:Pn}),kn--}}}}const xn=At=>At.spanID,Kn=At=>At.references||[],_n=(0,rn.P1)((0,rn.P1)(({span:At})=>At,Kn),({type:At})=>At,(At,Rt)=>At.find(Mt=>Mt.refType===Rt)),Ma=(0,rn.P1)(At=>_n({span:At,type:"CHILD_OF"}),At=>At?At.spanID:null),la=At=>At.spans,aa=(0,rn.P1)(la,At=>At.reduce((Rt,Mt)=>Rt.set(xn(Mt),Mt),new Map)),ba="__root__";function ga(At){const Rt=new Map(At.spans.map(tn=>[tn.spanID,new un(tn.spanID)])),Mt=new Map(At.spans.map(tn=>[tn.spanID,tn])),$t=new un(ba);At.spans.forEach(tn=>{const Un=Rt.get(tn.spanID);if(Array.isArray(tn.references)&&tn.references.length){const{refType:$n,spanID:kn}=tn.references[0];if($n==="CHILD_OF"||$n==="FOLLOWS_FROM")(Rt.get(kn)||$t).children?.push(Un);else throw new Error(`Unrecognized ref type: ${$n}`)}else $t.children.push(Un)});const Pn=(tn,Un)=>{const $n=tn?.value?Mt.get(tn.value.toString()):void 0,kn=Un?.value?Mt.get(Un.value.toString()):void 0;return+($n?.startTime>kn?.startTime)||+($n?.startTime===kn?.startTime)-1};return At.spans.forEach(tn=>{const Un=Rt.get(tn.spanID);Un.children.length>1&&Un?.children.sort(Pn)}),$t.children.sort(Pn),$t}const Ca=(0,rn.P1)(({spans:At})=>At,(0,rn.P1)(({trace:At})=>At,ga),({collapsed:At})=>At,(At,Rt,Mt)=>{const $t=Mt.reduce((Pn,tn)=>(Rt.find(tn).walk(Un=>Un!==tn&&Pn.add(Un)),Pn),new Set);return $t.size>0?At.filter(Pn=>!$t.has(xn(Pn))):At});function Ha(At){const Rt=new Map,Mt=At.reduce((Pn,tn)=>(Pn.some(Un=>Un.key===tn.key&&Un.value===tn.value)?Rt.set(`${tn.key}:${tn.value}`,`Duplicate tag "${tn.key}:${tn.value}"`):Pn.push(tn),Pn),[]),$t=Array.from(Rt.values());return{dedupedTags:Mt,warnings:$t}}function ka(At,Rt){const Mt=At?.slice()??[],$t=(Rt||[]).map(Pn=>Pn.toLowerCase());return Mt.sort((Pn,tn)=>{const Un=Pn.key.toLowerCase(),$n=tn.key.toLowerCase();for(let kn=0;kn<$t.length;kn++){const Fn=$t[kn];if(Un.startsWith(Fn)&&!$n.startsWith(Fn))return-1;if(!Un.startsWith(Fn)&&$n.startsWith(Fn))return 1}return Un>$n?1:Un<$n?-1:0}),Mt}function ma(At){if(!At?.traceID)return null;const Rt=At.traceID.toLowerCase();let Mt=0,$t=Number.MAX_SAFE_INTEGER;const Pn=new Map,tn=new Map;At.spans=At.spans.filter(ca=>!!ca.startTime),At.processes=Object.entries(At.processes).reduce((ca,[Sa,Yt])=>(ca[Sa]={...Yt,tags:ka(Yt.tags)},ca),{});const Un=At.spans.length;for(let ca=0;ca<Un;ca++){const Sa=At.spans[ca],{startTime:Yt,duration:Kt,processID:hn}=Sa;let Mn=Sa.spanID;Yt<$t&&($t=Yt),Yt+Kt>Mt&&(Mt=Yt+Kt);const Hn=Pn.get(Mn);Hn!=null?(console.warn(`Dupe spanID, ${Hn+1} x ${Mn}`,Sa,tn.get(Mn)),(0,de.isEqual)(Sa,tn.get(Mn))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),Pn.set(Mn,Hn+1),Mn=`${Mn}_${Hn}`,Sa.spanID=Mn):Pn.set(Mn,1),Sa.process=At.processes[hn],tn.set(Mn,Sa)}const $n=ga(At),kn=[],Fn={};$n.walk((ca,Sa,Yt=0)=>{if(ca==="__root__"||typeof ca!="string")return;const Kt=tn.get(ca);if(!Kt)return;const{serviceName:hn}=Kt.process;Fn[hn]=(Fn[hn]||0)+1,Kt.relativeStartTime=Kt.startTime-$t,Kt.depth=Yt-1,Kt.hasChildren=Sa.children.length>0,Kt.childSpanCount=Sa.children.length,Kt.warnings=Kt.warnings||[],Kt.tags=Kt.tags||[],Kt.references=Kt.references||[];const Mn=Ha(Kt.tags);Kt.tags=ka(Mn.dedupedTags,Ue("topTagPrefixes")),Kt.warnings=Kt.warnings.concat(Mn.warnings),Kt.references.forEach((Hn,Jn)=>{const Qn=tn.get(Hn.spanID);Qn&&(Hn.span=Qn,Jn>0&&(Qn.subsidiarilyReferencedBy=Qn.subsidiarilyReferencedBy||[],Qn.subsidiarilyReferencedBy.push({spanID:ca,traceID:Rt,span:Kt,refType:Hn.refType})))}),kn.push(Kt)});const Da=Le(kn);return{services:Object.keys(Fn).map(ca=>({name:ca,numberOfSpans:Fn[ca]})),spans:kn,traceID:Rt,traceName:Da,processes:At.processes,duration:Mt-$t,startTime:$t,endTime:Mt}}},32042:(j,I,e)=>{"use strict";e.d(I,{Hn:()=>c,Kg:()=>f,th:()=>h,vc:()=>v});var t=e(42844),n=e(27702),i=e(81078),s=e(17312),r=e(78102),m=e(66310),d=e(71107),o=e(48024),l=e(28580),a=e(1128),g=e(47449);const c="None",h="Duration",f="Tag";function b({options:E,onOptionsChange:C}){const u=(0,m.wW)(y),D=[c,h,f].map(i.E);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement(d.Z,{className:u.row},n.createElement(o._,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},n.createElement(l.Ph,{inputId:"label",options:D,value:E.jsonData.spanBar?.type||"",onChange:P=>{(0,s.tp)({onOptionsChange:C,options:E},"spanBar",{...E.jsonData.spanBar,type:P?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),E.jsonData.spanBar?.type===f&&n.createElement(d.Z,{className:u.row},n.createElement(o._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},n.createElement(a.I,{type:"text",placeholder:"Enter tag key",onChange:P=>(0,s.tp)({onOptionsChange:C,options:E},"spanBar",{...E.jsonData.spanBar,tag:P.currentTarget.value}),value:E.jsonData.spanBar?.tag||"",width:40}))))}const v=({options:E,onOptionsChange:C})=>n.createElement(r._,{title:"Span bar",description:n.createElement(g.W,{description:"Add additional info next to the service and operation on a span bar row in the trace view.",suffix:`${E.type}/#span-bar`,feature:"the span bar"})},n.createElement(b,{options:E,onOptionsChange:C})),y=E=>({infoText:(0,t.css)`
    label: infoText;
    padding-bottom: ${E.spacing(2)};
    color: ${E.colors.text.secondary};
  `,row:(0,t.css)`
    label: row;
    align-items: baseline;
  `})},66798:(j,I,e)=>{"use strict";e.d(I,{u:()=>t});var t=(n=>(n.Logs="log",n.Traces="trace",n.Metrics="metric",n.Unknown="unknown",n))(t||{})},90170:(j,I,e)=>{"use strict";e.d(I,{GL:()=>d,H3:()=>m,Im:()=>f,K9:()=>v,WW:()=>n,b$:()=>h,bi:()=>i,h2:()=>r,im:()=>s,oD:()=>o,ty:()=>b,xb:()=>c});var t=e(42844);const n=(0,t.css)`
  position: relative;
`,i=(0,t.css)`
  margin-bottom: 0.25rem;
`,s=(0,t.css)`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,r=(0,t.css)`
  margin: 0;
`,m=(0,t.css)`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,d=(0,t.css)`
  padding-bottom: 0.5rem;
`,o=(0,t.css)`
  display: flex;
`,l=(0,t.css)`
  align-items: center;
`,a=(0,t.css)`
  align-items: start;
`,g=(0,t.css)`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,c=(0,t.css)`
  text-align: right;
`,h=(0,t.css)`
  display: inline-block;
`,f=(0,t.css)`
  margin: -0.2rem 0.25rem 0 0;
`,b=(0,t.css)`
  text-overflow: ellipsis;
`,v=(0,t.css)`
  width: 100%;
`,y=(0,t.css)`
  color: #aaa;
`,E=(0,t.css)`
  justify-content: flex-end;
`},8033:(j,I,e)=>{"use strict";e.d(I,{EUpdateTypes:()=>n,default:()=>r});var t=(m=>(m.DragEnd="DragEnd",m.DragMove="DragMove",m.DragStart="DragStart",m.MouseEnter="MouseEnter",m.MouseLeave="MouseLeave",m.MouseMove="MouseMove",m))(t||{});const n=t;var i=e(89949);const s=0;class r{constructor({getBounds:d,tag:o,resetBoundsOnResize:l=!0,...a}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=g=>{const{button:c,clientX:h,type:f}=g;if(this._isDragging||c!==s)return;let b=null,v;if(f==="mouseenter")b=n.MouseEnter,v=this._onMouseEnter;else if(f==="mouseleave")b=n.MouseLeave,v=this._onMouseLeave;else if(f==="mousemove")b=n.MouseMove,v=this._onMouseMove;else throw new Error(`invalid event type: ${f}`);if(!v)return;const{value:y,x:E}=this._getPosition(h);v({event:g,type:b,value:y,x:E,manager:this,tag:this.tag})},this._handleDragEvent=g=>{const{button:c,clientX:h,type:f}=g;let b=null,v;if(f==="mousedown"){if(this._isDragging||c!==s)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const C=(0,i.get)(document,"body.style");C&&(C.userSelect="none"),this._isDragging=!0,b=n.DragStart,v=this._onDragStart}else if(f==="mousemove"){if(!this._isDragging)return;b=n.DragMove,v=this._onDragMove}else if(f==="mouseup"){if(!this._isDragging)return;this._stopDragging(),b=n.DragEnd,v=this._onDragEnd}else throw new Error(`invalid event type: ${f}`);if(!v)return;const{value:y,x:E}=this._getPosition(h);v({event:g,type:b,value:y,x:E,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=d,this.tag=o,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=!!l,this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=a.onMouseEnter,this._onMouseLeave=a.onMouseLeave,this._onMouseMove=a.onMouseMove,this._onDragStart=a.onDragStart,this._onDragMove=a.onDragMove,this._onDragEnd=a.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(d){const{clientXLeft:o,maxValue:l,minValue:a,width:g}=this._getBounds();let c=d-o,h=c/g;return a!=null&&h<a?(h=a,c=a*g):l!=null&&h>l&&(h=l,c=l*g),{value:h,x:c}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const d=(0,i.get)(document,"body.style");d&&(d.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}},84720:(j,I,e)=>{"use strict";e.d(I,{_K:()=>o,e6:()=>l});var t=e(82152),n=e(71685),i=e(5354);function s(g){if(g.length!==7)return[0,0,0];const c=g.slice(1,3),h=g.slice(3,5),f=g.slice(5);return[parseInt(c,16),parseInt(h,16),parseInt(f,16)]}class r{constructor(c,h){const f=a(c,h);this.colorsHex=f,this.colorsRgb=f.map(s),this.cache=new Map}_getColorIndex(c){let h=this.cache.get(c);if(h==null){const f=this.hashCode(c.toLowerCase());h=Math.abs(f%this.colorsHex.length);const b=Array.from(this.cache).pop();if(b&&b[1]){b[1]===h&&(h=this.getNextIndex(h));const v=this.colorsHex[b[1]];if(n.Z.readability(v,this.colorsHex[h])<1.5){let y=h;for(let E=0;E<this.colorsHex.length;E++)if(y=this.getNextIndex(y),n.Z.readability(v,this.colorsHex[y])>1.5){h=y;break}}}this.cache.set(c,h)}return h}getNextIndex(c){return c+1<this.colorsHex.length?c+1:0}hashCode(c){let h=0,f,b;for(f=0;f<c.length;f++)b=c.charCodeAt(f),h=(h<<5)-h+b;return h}getColorByKey(c){const h=this._getColorIndex(c);return this.colorsHex[h]}getRgbColorByKey(c){const h=this._getColorIndex(c);return this.colorsRgb[h]}clear(){this.cache.clear()}}const m=(0,t.Z)((g,c)=>new r(g,c));function d(g){m([],g)}function o(g,c){return m(i.O9,c).getColorByKey(g)}function l(g,c){return m(i.O9,c).getRgbColorByKey(g)}function a(g,c){const h=[...g],f=h.indexOf("#E24D42");f>-1&&h.splice(f,1);const b=g.indexOf("#BF1B00");b>-1&&h.splice(b,1);let v=[];for(const y of h)n.Z.readability(c.colors.background.primary,y)>=3&&v.push(y);return v}},25985:(j,I,e)=>{"use strict";e.d(I,{LU:()=>C});var t=e(89949),n=e.n(t),i=e(24588),s=e.n(i);const r="YYYY-MM-DD",m="HH:mm",d=1e3,o=1e3*d,l=60*o,a=60*l,g=24*a,c=Math.log10(d),h=[{unit:"d",microseconds:g,ofPrevious:24},{unit:"h",microseconds:a,ofPrevious:60},{unit:"m",microseconds:l,ofPrevious:60},{unit:"s",microseconds:o,ofPrevious:1e3},{unit:"ms",microseconds:d,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],f=(u,D,P)=>toFloatPrecision(u/P,D)*P;function b(u){return moment(u/d).format(r)}function v(u){return moment(u/d).format(m)}function y(u){const D=f(u,c,d);return`${moment.duration(D/d).asMilliseconds()}ms`}function E(u){const D=f(u,c,o);return`${moment.duration(D/d).asSeconds()}s`}function C(u){const[D,P]=(0,t.dropWhile)(h,({microseconds:O},T)=>T<h.length-1&&O>u);if(D.ofPrevious===1e3)return`${(0,t.round)(u/D.microseconds,2)}${D.unit}`;const x=`${Math.floor(u/D.microseconds)}${D.unit}`,M=Math.round(u/P.microseconds%D.ofPrevious),R=`${M}${P.unit}`;return M===0?x:`${x} ${R}`}},24540:(j,I,e)=>{"use strict";e.d(I,{Rx:()=>d,js:()=>m,kb:()=>s});var t=e(27702),n=e(66117),i=e(28382);const s=()=>(0,n.Z)().slice(0,12),m={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[{id:s(),operator:"="}]};function d(o){const[l,a]=(0,t.useState)(m),g=(0,t.useMemo)(()=>o&&(0,i.filterSpans)(l,o),[l,o]);return{search:l,setSearch:a,spanFilterMatches:g}}},12361:(j,I,e)=>{"use strict";e.d(I,{N:()=>i});var t=e(27938),n=e(28382);function i(r){if(!r)return null;let m=r.fields.length===1?r.fields[0].values[0]:s(r);return(0,n.transformTraceData)(m)}function s(r){const m=new t.U(r),d={};for(let o=0;o<m.length;o++){const l=m.get(o);d[l.spanID]||(d[l.spanID]={serviceName:l.serviceName,tags:l.serviceTags})}return{traceID:m.get(0).traceID,processes:d,spans:m.toArray().map((o,l)=>{const a=[];return o.parentSpanID&&a.push({refType:"CHILD_OF",spanID:o.parentSpanID,traceID:o.traceID}),o.references&&a.push(...o.references.map(g=>({refType:"FOLLOWS_FROM",...g}))),{...o,duration:o.duration*1e3,startTime:o.startTime*1e3,processID:o.spanID,flags:0,references:a,logs:o.logs?.map(g=>({...g,timestamp:g.timestamp*1e3}))||[],dataFrameRowIndex:l}})}}},46181:(j,I,e)=>{"use strict";e.d(I,{U:()=>L});var t=e(89949),n=e(27702),i=e(46089),s=e(94469),r=e(86312),m=e(26129),d=e(34667),o=e(16310),l=e(22209),a=e(40705),g=e(63439),c=e(13741),h=e(66670),f=e(81290),b=e(91368),v=e(54195),y=e(18771),E=e(85378),C=e(45937),u=(V=>(V.FETCH_DASHBOARD="fetch-dashboard",V.SET_DASHBOARD_LS="set-dashboard-ls-error",V))(u||{});function D(){const V=(0,v.ZQ)();return V.dashboard.panels=[],V}async function P(V){const w=M(V.queries,V.queryResponse),K={targets:V.queries,type:w,title:"New Panel",gridPos:{x:0,y:0,w:12,h:8},datasource:V.datasource};let B;if(V.dashboardUid)try{B=await C.ae.getDashboardByUid(V.dashboardUid)}catch{throw"fetch-dashboard"}else B=D();B.dashboard.panels=[K,...B.dashboard.panels??[]];try{(0,v.$M)(B)}catch{throw"set-dashboard-ls-error"}}const S=V=>!V.hide,x=V=>w=>w.refId===V;function M(V,w){for(const{refId:K}of V.filter(S)){const B=x(K);if(w.flameGraphFrames.some(B))return"flamegraph";if(w.graphFrames.some(B))return"timeseries";if(w.logsFrames.some(B))return"logs";if(w.nodeGraphFrames.some(B))return"nodeGraph";if(w.traceFrames.some(B))return"traces";if(w.customFrames.some(B))return w.customFrames.find(B)?.meta?.preferredVisualisationPluginId??"table"}return"table"}var R=(V=>(V.NewDashboard="new-dashboard",V.ExistingDashboard="existing-dashboard",V))(R||{});function O(V){}function T(V){return V?`d/${V}`:"dashboard/new"}var U=(V=>(V.UNKNOWN="unknown-error",V.NAVIGATION="navigation-error",V))(U||{});function L(V){const{exploreId:w,onClose:K}=V,B=(0,y.useSelector)((0,E.F9)(w)),[W,_]=(0,n.useState)(),{handleSubmit:k,control:A,formState:{errors:z},watch:H}=(0,i.cI)({defaultValues:{saveTarget:"new-dashboard"}}),Q=b.contextSrv.hasAccess(y.AccessControlAction.DashboardsCreate,b.contextSrv.isEditor),X=b.contextSrv.hasAccess(y.AccessControlAction.DashboardsWrite,b.contextSrv.isEditor),te=[];Q&&te.push({label:"New dashboard",value:"new-dashboard"}),X&&te.push({label:"Existing dashboard",value:"existing-dashboard"});const oe=te.length>1?H("saveTarget"):te[0].value,Z=async(le,ce)=>{_(void 0);const q=ce.saveTarget==="existing-dashboard"?ce.dashboardUid:void 0;(0,r.ff)("e_2_d_submit",{newTab:le,saveTarget:ce.saveTarget,queries:B.queries.length});try{await P({dashboardUid:q,datasource:B.datasourceInstance?.getRef(),queries:B.queries,queryResponse:B.queryResponse})}catch(re){switch(re){case u.FETCH_DASHBOARD:_({error:re,message:"Could not fetch dashboard information. Please try again."});break;case u.SET_DASHBOARD_LS:_({error:re,message:"Could not add panel to dashboard. Please try again."});break;default:_({error:"unknown-error",message:"Something went wrong. Please try again."})}return}const ne=T(q);if(!le){K(),m.E1.push(s.u.stripBaseFromUrl(ne));return}if(!!!e.g.open(d.config.appUrl+ne,"_blank")){_({error:"navigation-error",message:"Could not navigate to the selected dashboard. Please try again."}),(0,v.f1)();return}K()};return(0,n.useEffect)(()=>{(0,r.ff)("e_2_d_open")},[]),n.createElement("form",null,te.length>1&&n.createElement(o.g,{control:A,render:({field:{ref:le,...ce}})=>n.createElement(l.g,{label:"Target dashboard",description:"Choose where to add the panel."},n.createElement(a.S,{options:te,...ce,id:"e2d-save-target"})),name:"saveTarget"}),oe==="existing-dashboard"&&(()=>n.createElement(o.g,{render:({field:{ref:le,value:ce,onChange:q,...ne}})=>n.createElement(l.g,{label:"Dashboard",description:"Select in which dashboard the panel will be created.",error:z.dashboardUid?.message,invalid:!!z.dashboardUid},n.createElement(f.o,{...ne,inputId:"e2d-dashboard-picker",defaultOptions:!0,onChange:pe=>q(pe?.uid)})),control:A,name:"dashboardUid",shouldUnregister:!0,rules:{required:{value:!0,message:"This field is required."}}}))(),W&&n.createElement(g.b,{severity:"error",title:"Error adding the panel"},W.message),n.createElement(c.u.ButtonRow,null,n.createElement(h.zx,{type:"reset",onClick:K,fill:"outline",variant:"secondary"},"Cancel"),n.createElement(h.zx,{type:"submit",variant:"secondary",onClick:k((0,t.partial)(Z,!0)),icon:"external-link-alt"},"Open in new tab"),n.createElement(h.zx,{type:"submit",variant:"primary",onClick:k((0,t.partial)(Z,!1)),icon:"apps"},"Open dashboard")))}},80219:(j,I,e)=>{"use strict";e.d(I,{k:()=>i});var t=e(91368),n=e(18771);function i(){const s=t.contextSrv.hasAccess(n.AccessControlAction.DashboardsCreate,t.contextSrv.isEditor),r=t.contextSrv.hasAccess(n.AccessControlAction.DashboardsWrite,t.contextSrv.isEditor);return s&&!r?"Add panel to new dashboard":r&&!s?"Add panel to existing dashboard":"Add panel to dashboard"}},1185:(j,I,e)=>{"use strict";e.d(I,{eX:()=>h,zU:()=>c});var t=e(34099),n=e(86312),i=e(26862),s=e(89024),r=e(64077),m=e(22061),d=e(92662),o=e(9110),l=e(90274),a=e(96866);const g=(0,t.PH)("explore/updateDatasourceInstance");function c(f,b,v){return async(y,E)=>{const C=E().user.orgId,{history:u,instance:D}=await(0,a.r_)(C,b),P=E().explore.panes[f].datasourceInstance;(0,n.ff)("explore_change_ds",{from:(P?.meta?.mixed?"mixed":P?.type)||"unknown",to:D.meta.mixed?"mixed":D.type,exploreId:f}),y(g({exploreId:f,datasourceInstance:D,history:u}));const S=E().explore.panes[f].queries,x=(0,a.e1)(D.uid,S),M=await(0,r.r)(x);y((0,d.CL)({exploreId:f,correlations:M.correlations||[]})),v?.importQueries&&await y((0,o.GJ)(f,S,P,D)),E().explore.panes[f].isLive&&y((0,l.oz)({exploreId:f,refreshInterval:i.dP.offOption.value})),v?.importQueries&&y((0,o.aA)({exploreId:f}))}}const h=(f,b)=>{if(g.match(b)){const{datasourceInstance:v,history:y}=b.payload;return(0,s.RZ)(f.querySubscription),{...f,datasourceInstance:v,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,m.DK)(),queryResponse:(0,a.lp)(),queryKeys:[],history:y}}return f}},92662:(j,I,e)=>{"use strict";e.d(I,{CK:()=>C,CL:()=>y,iz:()=>u,km:()=>f,qN:()=>E});var t=e(34099),n=e(89024),i=e(64077),s=e(6327),r=e(18771),m=e(1185),d=e(86744),o=e(29739),l=e(9110),a=e(90274),g=e(96866);const c=(0,t.PH)("explore/changeSize"),h=(0,t.PH)("explore/changePanels");function f(D,P,S){return async(x,M)=>{const R=M().explore.panes[D];if(R===void 0)return;const{panelsState:O}=R;x(h({exploreId:D,panelsState:{...O,[P]:S}}))}}const b=(0,t.PH)("explore/initializeExploreAction"),v=(0,t.PH)("explore/setUrlReplaced"),y=(0,t.PH)("explore/saveCorrelationsAction");function E(D,{width:P}){return c({exploreId:D,width:P})}const C=(0,r.createAsyncThunk)("explore/initializeExplore",async({exploreId:D,datasource:P,queries:S,range:x,panelsState:M},{dispatch:R,getState:O,fulfillWithValue:T})=>{let U,L=[];if(P){const V=O().user.orgId,w=await(0,g.r_)(V,P);U=w.instance,L=w.history}if(R(b({exploreId:D,queries:S,range:(0,g.rx)(x,(0,s.Z)(O().user)),datasourceInstance:U,history:L})),M!==void 0&&R(h({exploreId:D,panelsState:M})),R((0,a.b3)({exploreId:D})),U){const V=(0,g.e1)(U.uid,S),w=await(0,i.r)(V);R(y({exploreId:D,correlations:w.correlations||[]})),R((0,l.aA)({exploreId:D}))}return T({exploreId:D,state:O().explore.panes[D]})}),u=(D=(0,g.t5)(),P)=>{if(D=(0,l.Y)(D,P),D=(0,m.eX)(D,P),D=(0,a.ok)(D,P),D=(0,d.Oo)(D,P),o.ZU.match(P)){const{richHistory:S,total:x}=P.payload.richHistoryResults;return{...D,richHistory:S,richHistoryTotal:x}}if(o.Zy.match(P)){const S=P.payload.filters;return{...D,richHistorySearchFilters:S}}if(c.match(P)){const S=P.payload.width;return{...D,containerWidth:S}}if(h.match(P)){const{panelsState:S}=P.payload;return{...D,panelsState:S}}if(y.match(P))return{...D,correlations:P.payload.correlations};if(b.match(P)){const{queries:S,range:x,datasourceInstance:M,history:R}=P.payload;return{...D,range:x,queries:S,initialized:!0,queryKeys:(0,n.$$)(S),datasourceInstance:M,history:R,queryResponse:(0,g.lp)(),cache:[],correlations:[]}}return D}},86744:(j,I,e)=>{"use strict";e.d(I,{Cs:()=>v,Ff:()=>g,KZ:()=>C,NV:()=>c,Oo:()=>u,TV:()=>f,WY:()=>l,ch:()=>E,ev:()=>a,fM:()=>m,ik:()=>h,io:()=>b,sO:()=>y});var t=e(34099),n=e(87715),i=e(19889),s=e(29739),r=e(85378);const m=(0,t.PH)("explore/historyUpdated"),d=({updatedQuery:D,deletedId:P})=>async(S,x)=>{o(x().explore,(M,R)=>{const O=M.richHistory.map(U=>U.id===D?.id?D:U).filter(U=>U.id!==P),T=M.richHistory.length-O.length;S((0,s.ZU)({richHistoryResults:{richHistory:O,total:M.richHistoryTotal-T},exploreId:R}))})},o=(D,P)=>{Object.entries(D.panes).forEach(([S,x])=>{x&&P(x,S)})},l=(D,P,S)=>async(x,M)=>{const{richHistoryStorageFull:R,limitExceeded:O}=await(0,n.au)(D,P,S,!1,"",!M().explore.richHistoryStorageFull,!M().explore.richHistoryLimitExceededWarningShown);R&&x((0,s.fm)()),O&&x((0,s.QN)())},a=(D,P)=>async(S,x)=>{const M=await(0,n.VI)(D,P);S(d({updatedQuery:M}))},g=(D,P)=>async S=>{const x=await(0,n.gt)(D,P);S(d({updatedQuery:x}))},c=D=>async P=>{const S=await(0,n.y9)(D);P(d({deletedId:S}))},h=()=>async(D,P)=>{await(0,n.HK)(),(0,r.M)(P()).forEach(([S])=>{D((0,s.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:S})),D((0,s.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:S}))})},f=D=>async(P,S)=>{const x=S().explore.panes[D].richHistorySearchFilters;if(x){const M=await(0,n.ub)(x);P((0,s.ZU)({richHistoryResults:M,exploreId:D}))}},b=D=>async(P,S)=>{const x=S().explore.panes[D]?.richHistorySearchFilters,M=S().explore.panes[D]?.richHistory;if(x&&M){const R={...x,page:(x?.page||1)+1},O=await(0,n.ub)(R),T=[...M,...O.richHistory];P((0,s.Zy)({filters:R,exploreId:D})),P((0,s.ZU)({richHistoryResults:{richHistory:T,total:O.total},exploreId:D}))}},v=D=>async P=>{P((0,s.Zy)({filters:void 0,exploreId:D})),P((0,s.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:D}))},y=()=>async(D,P)=>{let S=P().explore.richHistorySettings;S||(S=await(0,n.di)(),D((0,s.e8)(S)))},E=D=>async P=>{P((0,s.e8)(D)),await(0,n.kg)(D)},C=(D,P)=>async(S,x)=>{await S((0,s.Zy)({exploreId:D,filters:{...P}}));const M=x().explore.richHistorySettings;(0,i.X)().lastUsedDataSourcesAvailable&&await S(E({...M,lastUsedDatasourceFilters:P.datasourceFilters}))},u=(D,P)=>m.match(P)?{...D,history:P.payload.history}:D},29739:(j,I,e)=>{"use strict";e.d(I,{AP:()=>v,QN:()=>g,Sx:()=>f,VY:()=>C,YV:()=>y,ZP:()=>R,ZU:()=>l,Zy:()=>h,bW:()=>u,e8:()=>c,fm:()=>a,m$:()=>P,nL:()=>b,tl:()=>o});var t=e(34099),n=e(26129),i=e(89024),s=e(18771),r=e(18886),m=e(92662),d=e(96866);const o=(0,t.PH)("explore/syncTimes"),l=(0,t.PH)("explore/richHistoryUpdated"),a=(0,t.PH)("explore/richHistoryStorageFullAction"),g=(0,t.PH)("explore/richHistoryLimitExceededAction"),c=(0,t.PH)("explore/richHistorySettingsUpdated"),h=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),f=(0,t.PH)("explore/splitSizeUpdateAction"),b=(0,t.PH)("explore/maximizePaneAction"),v=(0,t.PH)("explore/evenPaneResizeAction"),y=(0,t.PH)("explore/splitClose"),E=(0,t.PH)("explore/setPaneState"),C=(0,t.PH)("explore/clearPanes"),u=(0,s.createAsyncThunk)("explore/splitOpen",async(O,{getState:T,dispatch:U,requestId:L})=>{const V=Object.values(T().explore.panes)[0],w=O?.queries??(O?.query?[O?.query]:V?.queries||[]);Object.keys(T().explore.panes).forEach((K,B)=>{B>=1&&U(y(K))}),await U(D({exploreId:L,datasource:O?.datasourceUid||V?.datasourceInstance?.getRef(),queries:(0,r.Z)(w),range:O?.range||V?.range.raw||d.UI,panelsState:O?.panelsState||V?.panelsState}))},{idGenerator:i.z0}),D=(0,s.createAsyncThunk)("explore/createNewSplitOpen",async(O,{dispatch:T})=>{await T((0,m.CK)(O))}),P=(O,T)=>async U=>{const{getDataSourceSrv:L,getTimeSrv:V,getExploreUrl:w,openInNewWindow:K}=T,B=L(),W=await w({panel:O,datasourceSrv:B,timeSrv:V()});if(K&&W){K(W);return}n.E1.push(W)},S=(0,d.t5)(),x={syncedTimes:!1,panes:{},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},R={explore:(O=x,T)=>{if(y.match(T)){const{[T.payload]:L,...V}={...O.panes};return{...O,panes:V,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(f.match(T)){const{largerExploreId:L}=T.payload;return{...O,largerExploreId:L,maxedExploreId:void 0,evenSplitPanes:L===void 0}}if(b.match(T)){const{exploreId:L}=T.payload;return{...O,largerExploreId:L,maxedExploreId:L,evenSplitPanes:!1}}if(v.match(T))return{...O,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(o.match(T))return{...O,syncedTimes:T.payload.syncedTimes};if(a.match(T))return{...O,richHistoryStorageFull:!0};if(g.match(T))return{...O,richHistoryLimitExceededWarningShown:!0};if(c.match(T)){const L=T.payload;return{...O,richHistorySettings:L}}if(D.pending.match(T))return{...O,panes:{...O.panes,[T.meta.arg.exploreId]:S}};if(m.CK.pending.match(T)){const L=Object.entries(O.panes),V=L.slice(0,T.meta.arg.position),w=L.slice(V.length),K=[...V,[T.meta.arg.exploreId,S],...w].reduce((B,[W,_])=>({...B,[W]:_}),{});return{...O,panes:K}}if(C.match(T))return{...O,panes:{}};const U=T.payload?.exploreId;return typeof U=="string"?{...O,panes:Object.entries(O.panes).reduce((L,[V,w])=>({...L,[V]:V===U?(0,m.iz)(w,T):w}),{})}:O}}},9110:(j,I,e)=>{"use strict";e.d(I,{CS:()=>Nt,K8:()=>ue,ci:()=>Bt,qV:()=>ct,LK:()=>xe,Sv:()=>We,GJ:()=>ge,W1:()=>Ve,sK:()=>Be,Y:()=>fe,aA:()=>he,EA:()=>Re,P4:()=>st,$9:()=>re,sQ:()=>De,KO:()=>Te,SE:()=>lt,z0:()=>Ne});var t=e(34099),n=e(52131),i=e.n(n),s=e(89949),r=e(10409),m=e(45383),d=e(42250),o=e(48592),l=e(22479),a=e(44727),g=e(53933),c=e(69376),h=e(51451),f=e(68246),b=e(3935),v=e(32053),y=e(10864),E=e(86312),C=e(34667),u=e(89024),D=e(15476),P=e(64077),S=e(6327),x=e(32159),M=e(84749),R=e(18771),O=e(33877),T=e(73807),U=e(46809),L=e(39343),V=e(44885),w=e(61965),K=e(29241),B=e(30209),W=e(22833),_=e(59882);const k=Oe=>{const Fe=[],Ge=[],nt=[],Xe=[],ut=[],ht=[],wt=[],mn=[];for(const vn of Oe.series){if(Z(vn)){mn.push(vn);continue}switch(vn.meta?.preferredVisualisationType){case"logs":Xe.push(vn);break;case"graph":Fe.push(vn);break;case"trace":ut.push(vn);break;case"table":Ge.push(vn);break;case"rawPrometheus":nt.push(vn);break;case"nodeGraph":ht.push(vn);break;case"flamegraph":wt.push(vn);break;default:oe(vn)&&Fe.push(vn),Ge.push(vn)}}return{...Oe,graphFrames:Fe,tableFrames:Ge,logsFrames:Xe,traceFrames:ut,nodeGraphFrames:ht,customFrames:mn,flameGraphFrames:wt,rawPrometheusFrames:nt,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},A=({queries:Oe,correlations:Fe})=>Ge=>{if(Oe?.length&&Fe?.length){const nt=(0,s.mapValues)((0,s.groupBy)(Oe,"refId"),"0.datasource.uid");(0,P.n)(Ge.series,Fe,nt)}return Ge},z=Oe=>Oe.graphFrames.length?{...Oe,graphResult:Oe.graphFrames}:{...Oe,graphResult:null},H=Oe=>{if(Oe.tableFrames.length===0)return(0,m.of)({...Oe,tableResult:null});Oe.tableFrames.sort((Xe,ut)=>{const ht=Xe.refId,wt=ut.refId;return ht>wt?1:ht<wt?-1:0});const Fe=Oe.tableFrames.every(Xe=>oe(Xe)),Ge={interpolate:Xe=>Xe};return(Fe?(0,m.of)(Oe.tableFrames).pipe(V.Y.joinByFieldTransformer.operator({},Ge)):(0,m.of)(Oe.tableFrames).pipe(V.Y.mergeTransformer.operator({},Ge))).pipe((0,L.U)(Xe=>{for(const ut of Xe)for(const ht of ut.fields)ht.display=ht.display??(0,w.U)({field:ht,theme:C.config.theme2,timeZone:Oe.request?.timezone??"browser"});return{...Oe,tableResult:Xe}}))},Q=Oe=>{const Fe=Oe.rawPrometheusFrames;if(!Fe||Fe.length===0)return(0,m.of)({...Oe,tableResult:null});Fe.sort((ut,ht)=>{const wt=ut.refId,mn=ht.refId;return wt>mn?1:wt<mn?-1:0});const Ge=Fe.every(ut=>oe(ut)),nt={interpolate:ut=>ut};return(Ge?(0,m.of)(Fe).pipe(V.Y.joinByFieldTransformer.operator({},nt)):(0,m.of)(Fe).pipe(V.Y.mergeTransformer.operator({},nt))).pipe((0,L.U)(ut=>{const ht=ut[0];for(const wt of ht.fields)wt.display=wt.display??(0,w.U)({field:wt,theme:C.config.theme2,timeZone:Oe.request?.timezone??"browser"});return{...Oe,rawPrometheusResult:ht}}))},X=(Oe={})=>Fe=>{if(Fe.logsFrames.length===0)return{...Fe,logsResult:null};const Ge=Fe.request?.intervalMs,nt=(0,B.aB)(Fe.logsFrames,Ge,Oe.absoluteRange,Oe.queries),Xe=(0,u.Oy)(Oe.refreshInterval),ut=(0,W.j0)(nt,Xe),ht=ut.rows,wt=ut.series,mn={...ut,rows:ht,series:wt};return{...Fe,logsResult:mn}};function te(Oe,Fe,Ge,nt,Xe,ut){return(0,m.of)(Oe).pipe((0,L.U)(ht=>(0,v.zR)(ht,Fe)),(0,L.U)(A({queries:Xe,correlations:ut})),(0,L.U)(k),(0,L.U)(z),(0,L.U)(X({absoluteRange:Ge,refreshInterval:nt,queries:Xe})),(0,l.z)(Q),(0,l.z)(H))}function oe(Oe){const Fe=(0,s.groupBy)(Oe.fields,Ge=>Ge.type);return!!(Object.keys(Fe).length===2&&Fe[K.fS.time]?.length===1&&Fe[K.fS.number])}function Z(Oe){return Oe.meta?.preferredVisualisationPluginId?(0,_.eD)(Oe.meta?.preferredVisualisationPluginId):!1}var le=e(22061),ce=e(92662),q=e(86744),ne=e(90274),pe=e(96866);const re=Oe=>Fe=>{const Ge=Fe.explore.panes[Oe];return Ge&&Ge.queryResponse?Ge.queryResponse.state===g.Gu.Loading||Ge.queryResponse.state===g.Gu.Streaming:!1},ie=(0,t.PH)("explore/addQueryRow"),Se=(0,t.PH)("explore/changeQueries"),ye=(0,t.PH)("explore/cancelQueries"),Ce=(0,t.PH)("explore/queriesImported"),de=(0,t.PH)("explore/queryStoreSubscription"),we=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),_e=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),Je=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),Ue=(0,t.PH)("explore/cleanSupplementaryQueryAction"),$e=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Qe=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),tt=(0,t.PH)("explore/queryStreamUpdated"),lt=(0,t.PH)("explore/setQueries"),Me=(0,t.PH)("changeLoadingState"),De=(0,t.PH)("explore/setPausedState"),We=(0,t.PH)("explore/clearLogs"),qe=(0,t.PH)("explore/scanStart"),st=(0,t.PH)("explore/scanStop"),dt=(0,t.PH)("explore/addResultsToCache"),Tt=(0,t.PH)("explore/clearCache");function Nt(Oe,Fe){return async(Ge,nt)=>{const Xe=nt().explore.panes[Oe];let ut;Xe.datasourceInstance?.meta.mixed?ut=(0,s.findLast)(Xe.queries,wt=>!!wt.datasource)?.datasource||void 0:ut=Xe.datasourceInstance?.getRef();const ht=await(0,u.Xk)(Xe.queries,Fe,ut);Ge(ie({exploreId:Oe,index:Fe,query:ht}))}}function Bt(Oe){return(Fe,Ge)=>{Fe(st({exploreId:Oe})),Fe(ye({exploreId:Oe}));const nt=Ge().explore.panes[Oe].supplementaryQueries;for(const Xe of le.SY)Fe(Je({exploreId:Oe,type:Xe})),nt[Xe]?.data?.state!==g.Gu.Done&&Fe(Ue({exploreId:Oe,type:Xe}))}}const yt=(Oe,Fe)=>{const Ge=Oe.getRef();return Fe.map(nt=>({...nt,datasource:Ge}))},ft=async(Oe,Fe,Ge)=>{let nt=[];if(Fe.meta?.id===Oe.meta?.id)nt=Ge;else if((0,c.p)(Fe)&&(0,c.CZ)(Oe)){const Xe=await Fe.exportToAbstractQueries(Ge);nt=await Oe.importFromAbstractQueries(Xe)}else Oe.importQueries&&(nt=await Oe.importQueries(Ge,Fe));return yt(Oe,nt)},ct=(0,R.createAsyncThunk)("explore/changeQueries",async({queries:Oe,exploreId:Fe},{getState:Ge,dispatch:nt})=>{let Xe=!1;const ut=Ge().explore.panes[Fe].queries,ht=Ge().explore.panes[Fe].datasourceInstance?.uid;for(const wt of Oe)for(const mn of ut){if(wt.refId===mn.refId&&wt.datasource?.type!==mn.datasource?.type){const vn=await(0,y.F)().get(mn.datasource),gn=await(0,y.F)().get({uid:wt.datasource?.uid});await nt(ge(Fe,ut,vn,gn,wt.refId)),Xe=!0}if(ht===x.D&&wt.refId===mn.refId&&wt.datasource?.uid!==mn.datasource?.uid){const vn=(0,pe.e1)(x.D,Oe),gn=await(0,P.r)(vn);nt((0,ce.CL)({exploreId:Fe,correlations:gn.correlations||[]}))}}Xe||nt(Se({queries:Oe,exploreId:Fe})),Oe.length<ut.length&&nt(he({exploreId:Fe}))}),ge=(Oe,Fe,Ge,nt,Xe)=>async ut=>{if(!Ge){ut(Ce({exploreId:Oe,queries:Fe}));return}let ht=Fe;if(nt.uid===x.D)ht=Fe.map(mn=>({...mn,datasource:Ge.getRef()}));else if(Ge.uid===x.D){const mn=(0,s.groupBy)(Fe,gn=>gn.datasource?.uid),vn=await Promise.all(Object.keys(mn).map(async gn=>{const Sn=await(0,y.F)().get({uid:gn});return await ft(nt,Sn,mn[gn])}));ht=(0,s.flatten)(vn.filter(gn=>gn.length>0))}else{let mn=Fe;if(Xe!==void 0){const vn=Fe.find(gn=>gn.refId===Xe);vn&&(mn=[vn])}ht=await ft(nt,Ge,mn)}let wt=await(0,u.Z8)(ht,nt.getRef());if(Xe!==void 0){ht.length===0&&(ht=[await(0,u.Xk)([],void 0,nt.getRef())]);const mn=Fe.findIndex(gn=>gn.refId===Xe),vn={...wt[0],refId:Fe[mn].refId};wt=[...Fe],wt[mn]=vn}return ut(Ce({exploreId:Oe,queries:wt})),wt};function Be(Oe,Fe,Ge){return async(nt,Xe)=>{const ut=Xe().explore.panes[Oe],{queries:ht}=ut,mn=(await Promise.all(ht.map(vn=>Ge({...vn},Fe)))).map((vn,gn)=>(0,u.fR)(vn,ht,gn));nt(lt({exploreId:Oe,queries:mn})),Fe.preventSubmit||nt(he({exploreId:Oe}))}}async function Le(Oe,Fe,Ge,nt,Xe,ut){const ht=nt.meta.id,wt=(0,u._Q)(Ge,ht,Xe);Oe((0,q.fM)({exploreId:ut,history:wt})),Oe((0,q.WY)(nt.uid,nt.name,Xe));for(const mn in Fe.panes)await Oe((0,q.TV)(mn))}const he=(0,R.createAsyncThunk)("explore/runQueries",async({exploreId:Oe,preserveCache:Fe},{dispatch:Ge,getState:nt})=>{Ge((0,ne.b3)({exploreId:Oe}));const Xe=ve(Oe);Fe!==!0&&Ge(xe(Oe));const ut=nt().explore.panes[Oe],{datasourceInstance:ht,containerWidth:wt,isLive:mn,range:vn,scanning:gn,queryResponse:Sn,querySubscription:Cn,refreshInterval:pn,absoluteRange:nn,cache:Ct,supplementaryQueries:bt}=ut;let Ut,_t;const Gt=ut.queries.map(sn=>({...sn,datasource:sn.datasource||ht?.getRef()}));ht!=null&&Le(Ge,nt().explore,ut.history,ht,Gt,Oe);const jt=(0,pe.M0)(Ct,nn);if(jt)Ut=(0,r.a)([(0,m.of)(jt),Xe]).pipe((0,l.z)(([sn,St])=>te(sn,Sn,nn,pn,Gt,St))),_t=Ut.subscribe(sn=>{Ge(tt({exploreId:Oe,response:sn}))});else{if(!(0,u.z_)(Gt)||!ht)return;const sn=ht?.interval;(0,u.RZ)(Cn);const St={minInterval:sn,maxDataPoints:wt,liveStreaming:mn},mt=(0,S.Z)(nt().user),kt=(0,u.Zf)(Oe,Gt,St,vn,gn,mt);if(Ge(Me({exploreId:Oe,loadingState:g.Gu.Loading})),Ut=(0,r.a)([(0,U.v7)(ht,kt.request).pipe(mn?(0,a.p)(500):d.y),Xe]).pipe((0,l.z)(([it,pt])=>te(it,Sn,nn,pn,Gt,pt))),_t=Ut.subscribe({next(it){if(it.logsResult!==null&&(0,E.ff)("grafana_explore_logs_result_displayed",{datasourceType:ht.type}),Ge(tt({exploreId:Oe,response:it})),nt().explore.panes[Oe].scanning)if(it.state===g.Gu.Done&&it.series.length===0){const pt=(0,D.e)(-1,nt().explore.panes[Oe].range);Ge((0,ne.b3)({exploreId:Oe,absoluteRange:pt})),Ge(he({exploreId:Oe}))}else Ge(st({exploreId:Oe}))},error(it){Ge((0,O.$l)((0,T.t_)("Query processing error",it))),Ge(Me({exploreId:Oe,loadingState:g.Gu.Error})),console.error(it)},complete(){nt().explore.panes[Oe].queryResponse.state===g.Gu.Loading&&Ge(Me({exploreId:Oe,loadingState:g.Gu.Done}))}}),mn)for(const it of le.SY)Ge(Je({exploreId:Oe,type:it})),Ge(Ue({exploreId:Oe,type:it}));else Ge(Pe({exploreId:Oe,datasourceInstance:ht,transaction:kt,newQuerySource:Ut,supplementaryQueries:bt,queries:Gt,absoluteRange:nn}))}Ge(de({exploreId:Oe,querySubscription:_t}))}),He=async(Oe,Fe)=>{const Ge=Oe.filter(Xe=>Xe.datasource?.uid!==x.D),nt=(0,s.groupBy)(Ge,"datasource.uid");return await Promise.all(Object.values(nt).map(async Xe=>({datasource:await(0,y.F)().get(Xe[0].datasource,Fe),targets:Xe})))},Pe=(0,R.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:Oe,exploreId:Fe,transaction:Ge,newQuerySource:nt,supplementaryQueries:Xe,queries:ut,absoluteRange:ht},{dispatch:wt})=>{let mn;Oe.meta.mixed?mn=await He(Ge.request.targets,Ge.request.scopedVars):mn=[{datasource:Oe,targets:Ge.request.targets}];for(const vn of le.SY){const gn=(0,le.Z9)(mn,vn,{...Ge.request,requestId:`${Ge.request.requestId}_${(0,s.snakeCase)(vn)}`},nt);gn?(wt(_e({exploreId:Fe,type:vn,dataProvider:gn})),Ie(Xe[vn].data,ut,ht)||(wt(Ue({exploreId:Fe,type:vn})),Xe[vn].enabled&&wt(Ve(Fe,vn)))):wt(Je({exploreId:Fe,type:vn}))}});function Ie(Oe,Fe,Ge){if(!Oe)return!1;const nt=(0,s.zipObject)((0,s.map)(Fe,"refId"),Fe),Xe=(0,s.mapValues)((0,s.groupBy)(Oe.data.map(mn=>mn.meta?.custom?.sourceQuery),"refId"),s.head),ut=Oe.data.every(mn=>mn.meta?.custom?.logsVolumeType===h.o8.FullRange),ht=i()(nt,Xe),wt=Oe.data.every(mn=>{const vn=mn.meta?.custom?.absoluteRange;return vn?vn&&vn.from<=Ge.from&&Ge.to<=vn.to:!0});return ut&&ht&&wt}function Te(Oe,Fe){return(Ge,nt)=>{const Xe=nt().explore.panes[Oe].queries,ut=Fe.map((ht,wt)=>(0,u.fR)(ht,Xe,wt));Ge(lt({exploreId:Oe,queries:ut})),Ge(he({exploreId:Oe}))}}function Re(Oe){return(Fe,Ge)=>{Fe(qe({exploreId:Oe}));const nt=(0,D.e)(-1,Ge().explore.panes[Oe].range);Fe((0,ne.b3)({exploreId:Oe,absoluteRange:nt})),Fe(he({exploreId:Oe}))}}function ue(Oe){return(Fe,Ge)=>{const nt=Ge().explore.panes[Oe].queryResponse,Xe=Ge().explore.panes[Oe].absoluteRange,ut=(0,pe.M7)(Xe);nt.state===g.Gu.Done&&Fe(dt({exploreId:Oe,cacheKey:ut,queryResponse:nt}))}}function xe(Oe){return(Fe,Ge)=>{Fe(Tt({exploreId:Oe}))}}function Ve(Oe,Fe){return(Ge,nt)=>{const{supplementaryQueries:Xe}=nt().explore.panes[Oe],ut=Xe[Fe].dataProvider;if(ut){const ht=ut.subscribe({next:wt=>{Ge(Qe({exploreId:Oe,type:Fe,data:wt}))}});Ge($e({exploreId:Oe,type:Fe,dataSubscription:ht}))}}}function Ne(Oe,Fe,Ge){return(nt,Xe)=>{nt(we({exploreId:Oe,enabled:Fe,type:Ge})),(0,le.B9)(Fe,Ge),Fe&&nt(Ve(Oe,Ge))}}const fe=(Oe,Fe)=>{if(ie.match(Fe)){const{queries:Ge}=Oe,{index:nt,query:Xe}=Fe.payload,ut=[...Ge.slice(0,nt+1),{...Xe},...Ge.slice(nt+1)];return{...Oe,queries:ut,queryKeys:(0,u.$$)(ut)}}if(Se.match(Fe)){const{queries:Ge}=Fe.payload;return{...Oe,queries:Ge}}if(ye.match(Fe))return(0,u.RZ)(Oe.querySubscription),{...Oe,queryResponse:{...Oe.queryResponse,state:g.Gu.Done}};if(lt.match(Fe)){const{queries:Ge}=Fe.payload;return{...Oe,queries:Ge.slice(),queryKeys:(0,u.$$)(Ge)}}if(de.match(Fe)){const{querySubscription:Ge}=Fe.payload;return{...Oe,querySubscription:Ge}}if(we.match(Fe)){const{enabled:Ge,type:nt}=Fe.payload,{supplementaryQueries:Xe}=Oe,ut=Xe[nt].dataSubscription;!Ge&&ut&&ut.unsubscribe();const ht={...Xe,[nt]:{...Xe[nt],enabled:Ge,data:void 0}};return{...Oe,supplementaryQueries:ht}}if(_e.match(Fe)){const{dataProvider:Ge,type:nt}=Fe.payload,{supplementaryQueries:Xe}=Oe,ut=Xe[nt];ut?.dataSubscription&&ut.dataSubscription.unsubscribe();const ht={...Xe,[nt]:{...ut,dataProvider:Ge,dataSubscription:void 0}};return{...Oe,supplementaryQueries:ht}}if(Je.match(Fe)){const{type:Ge}=Fe.payload,{supplementaryQueries:nt}=Oe,Xe=nt[Ge];Xe?.dataSubscription&&Xe.dataSubscription.unsubscribe();const ut={...nt,[Ge]:{...Xe,dataProvider:void 0,dataSubscription:void 0}};return{...Oe,supplementaryQueries:ut}}if(Ue.match(Fe)){const{type:Ge}=Fe.payload,{supplementaryQueries:nt}=Oe,Xe={...nt,[Ge]:{...nt[Ge],data:void 0}};return{...Oe,supplementaryQueries:Xe}}if($e.match(Fe)){const{dataSubscription:Ge,type:nt}=Fe.payload,{supplementaryQueries:Xe}=Oe,ut={...Xe,[nt]:{...Xe[nt],dataSubscription:Ge}};return{...Oe,supplementaryQueries:ut}}if(Qe.match(Fe)){let{data:Ge,type:nt}=Fe.payload;const{supplementaryQueries:Xe}=Oe,ut={...Xe,[nt]:{...Xe[nt],data:Ge}};return{...Oe,supplementaryQueries:ut}}if(tt.match(Fe))return ze(Oe,Fe);if(Ce.match(Fe)){const{queries:Ge}=Fe.payload;return{...Oe,queries:Ge,queryKeys:(0,u.$$)(Ge)}}if(Me.match(Fe)){const{loadingState:Ge}=Fe.payload;return{...Oe,queryResponse:{...Oe.queryResponse,state:Ge}}}if(De.match(Fe)){const{isPaused:Ge}=Fe.payload;return{...Oe,isPaused:Ge}}if(qe.match(Fe))return{...Oe,scanning:!0};if(st.match(Fe))return{...Oe,scanning:!1,scanRange:void 0};if(dt.match(Fe)){const{cache:nt}=Oe,{queryResponse:Xe,cacheKey:ut}=Fe.payload;let ht=[...nt];return ht.some(mn=>mn.key===ut)||(ht=[{key:ut,value:Xe},...ht].slice(0,5)),{...Oe,cache:ht}}if(Tt.match(Fe))return{...Oe,cache:[]};if(We.match(Fe)){if(!Oe.logsResult)return{...Oe,clearedAtIndex:null};if(Oe.queryResponse.state===g.Gu.Loading)return{...Oe,clearedAtIndex:null,logsResult:{...Oe.logsResult,rows:[]}};const Ge=Oe.clearedAtIndex?Oe.clearedAtIndex+Oe.logsResult.rows.length:Oe.logsResult.rows.length-1;return{...Oe,clearedAtIndex:Ge,logsResult:{...Oe.logsResult,rows:[]}}}return Oe},ve=Oe=>new o.y(Fe=>{const Ge=M.h.getState().explore.panes[Oe]?.correlations;if(Ge)Fe.next(Ge),Fe.complete();else{const nt=M.h.subscribe(()=>{const Xe=M.h.getState().explore.panes[Oe]?.correlations;Xe&&(nt(),Fe.next(Xe),Fe.complete())})}}),ze=(Oe,Fe)=>{const{response:Ge}=Fe.payload,{request:nt,series:Xe,error:ut,graphResult:ht,logsResult:wt,tableResult:mn,rawPrometheusResult:vn,traceFrames:gn,nodeGraphFrames:Sn,flameGraphFrames:Cn,rawPrometheusFrames:pn,customFrames:nn}=Ge;if(ut){if(ut.type===f.eA.Timeout||ut.type===f.eA.Cancelled)return{...Oe};C.config.angularSupportEnabled&&Oe.datasourceInstance?.components?.QueryCtrl&&Oe.eventBridge.emit(b.Kh.dataError,ut)}if(!nt)return{...Oe};if(C.config.angularSupportEnabled&&Oe.datasourceInstance?.components?.QueryCtrl){const Ct=Xe.map(bt=>(0,v.Zr)(bt));Oe.eventBridge.emit(b.Kh.dataReceived,Ct)}return{...Oe,queryResponse:Ge,graphResult:ht,tableResult:mn,rawPrometheusResult:vn,logsResult:Oe.isLive&&wt?{...wt,rows:(0,pe.bG)(Oe.clearedAtIndex,wt.rows)}:wt,showLogs:!!wt,showMetrics:!!ht,showTable:!!mn?.length,showTrace:!!gn.length,showNodeGraph:!!Sn.length,showRawPrometheus:!!pn.length,showFlameGraph:!!Cn.length,showCustom:!!nn?.length,clearedAtIndex:Oe.isLive?Oe.clearedAtIndex:null}}},85378:(j,I,e)=>{"use strict";e.d(I,{F9:()=>r,Ky:()=>n,M:()=>i,pd:()=>s});var t=e(75892);const n=m=>m.explore.panes,i=(0,t.P1)(n,Object.entries),s=(0,t.P1)(i,m=>m.length>1),r=m=>(0,t.P1)(n,d=>d[m])},90274:(j,I,e)=>{"use strict";e.d(I,{F9:()=>y,b3:()=>b,cD:()=>f,mG:()=>v,oW:()=>c,ok:()=>E,oz:()=>h});var t=e(34099),n=e(99633),i=e(53933),s=e(39317),r=e(26862),m=e(89024),d=e(22833),o=e(6327),l=e(26858),a=e(29739),g=e(9110);const c=(0,t.PH)("explore/changeRange"),h=(0,t.PH)("explore/changeRefreshInterval"),f=C=>(u,D)=>{const{syncedTimes:P}=D().explore;P?Object.keys(D().explore.panes).forEach(S=>{u(b({...C,exploreId:S})),u((0,g.aA)({exploreId:S,preserveCache:!0}))}):(u(b({...C})),u((0,g.aA)({exploreId:C.exploreId,preserveCache:!0})))},b=C=>(u,D)=>{const{exploreId:P,absoluteRange:S,rawRange:x}=C,M=D().explore.panes[P],R=(0,o.Z)(D().user),O=(0,o.i)(D().user),{range:T}=M;let U=T.raw;S&&(U={from:(0,n.GY)(R,S.from),to:(0,n.GY)(R,S.to)}),x&&(U=x);const L=(0,m.OQ)(R,U,O),V={from:L.from.valueOf(),to:L.to.valueOf()},w={time:L.raw,refresh:!1,timepicker:{},getTimezone:()=>R,timeRangeUpdated:K=>{u(f({exploreId:P,rawRange:K}))}};(0,l.$t)().init(w),(0,s.J)().updateTimeRange((0,l.$t)().timeRange()),u(c({exploreId:P,range:L,absoluteRange:V}))};function v(C){return(u,D)=>{const P=D().explore.panes[C].range.raw;Object.keys(D().explore.panes).filter(x=>x!==C).forEach(x=>{u(f({exploreId:x,rawRange:P}))});const S=D().explore.syncedTimes;u((0,a.tl)({syncedTimes:!S}))}}function y(){return(C,u)=>{const D=(0,o.Z)(u().user),P=(0,o.i)(u().user);Object.entries(u().explore.panes).forEach(([S,x])=>{const M=(0,m.OQ)(D,x.range.raw,P),R={from:M.from.valueOf(),to:M.to.valueOf()};C(b({exploreId:S,absoluteRange:R}))})}}const E=(C,u)=>{if(h.match(u)){const{refreshInterval:D}=u.payload,P=r.dP.isLive(D),S=(0,m.Oy)(D),x=(0,d.j0)(C.logsResult,S);return r.dP.isLive(C.refreshInterval)&&!P&&(0,m.RZ)(C.querySubscription),{...C,refreshInterval:D,queryResponse:{...C.queryResponse,state:P?i.Gu.Streaming:i.Gu.Done},isLive:P,isPaused:P?!1:C.isPaused,logsResult:x}}if(c.match(u)){const{range:D,absoluteRange:P}=u.payload;return{...C,range:D,absoluteRange:P}}return C}},96866:(j,I,e)=>{"use strict";e.d(I,{FG:()=>f,Jt:()=>P,M0:()=>C,M7:()=>E,UI:()=>c,bG:()=>x,dc:()=>D,e1:()=>M,lp:()=>v,r_:()=>y,rx:()=>u,t5:()=>b});var t=e(89949),n=e.n(t),i=e(53933),s=e(8508),r=e(1726),m=e(99633),d=e(32159),o=e(56812),l=e(89024),a=e(5926),g=e(22061);const c={from:"now-6h",to:"now"},h="grafana.explore.style.graph",f=R=>{o.Z.set(h,R)},b=()=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:c},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:v(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,g.DK)(),panelsState:{},correlations:void 0}),v=()=>({state:i.Gu.NotStarted,series:[],timeRange:(0,s.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function y(R,O){let T;try{T=await(0,a.ak)().get(O)}catch{T=await(0,a.ak)().get()}if(T.init)try{T.init()}catch(V){console.error(V)}const U=`grafana.explore.history.${T.meta?.id}`,L=o.Z.getObject(U,[]);return(0,l.ET)(R,T.uid),{history:L,instance:T}}function E(R){const O={from:R.from,to:R.to};return Object.entries(O).map(([U,L])=>`${encodeURIComponent(U)}=${encodeURIComponent(L.toString())}`).join("&")}function C(R,O){const T=E(O),U=R.findIndex(V=>V.key===T);return U>=0?R[U].value:void 0}function u(R,O){const T={from:S(R.from),to:S(R.to)};return{from:r.parse(T.from,!1,O),to:r.parse(T.to,!0,O),raw:T}}function D(R){let O=c,T={from:S(R.from),to:S(R.to)};return T.from!==null&&T.to!==null&&(O={from:T.from,to:T.to}),O}const P=R=>{let O=R.from;(0,m.v9)(O)&&(O=O.valueOf().toString());let T=R.to;return(0,m.v9)(T)&&(T=T.valueOf().toString()),{from:O,to:T}};function S(R){if(R===null)return null;if((0,m.v9)(R)||R.indexOf("now")!==-1)return R;if(R.length===8)return(0,m.zh)(R,"YYYYMMDD");if(R.length===15)return(0,m.zh)(R,"YYYYMMDDTHHmmss");if(R.length===19)return(0,m.zh)(R,"YYYY-MM-DD HH:mm:ss");if(R.match(/^\d+$/)){const T=parseInt(R,10);return(0,m.zh)(T)}const O=(0,m.zh)(R);return O.isValid()?O:null}const x=(R,O)=>O?R?O.slice(R+1):O:[],M=(R,O)=>R===d.D?(0,t.uniq)(O.map(T=>T.datasource?.uid).filter(T=>!!T)):[R]},747:(j,I,e)=>{"use strict";e.d(I,{T:()=>n,u:()=>i});var t=e(21609);const n=" ",i=s=>{const r={},m=[],d=s.fields.filter(a=>!["Time"].includes(a.name));let o=d.find(a=>a.name==="__name__")?.values??[];!o.length&&d.length&&d[0].values.length&&(o=Array(d[0].values.length).fill(""));const l=s.fields.filter(a=>!["__name__"].includes(a.name));return o.forEach(function(a,g){r[a]={};const c=r[a][g]??{};for(const h of l){const f=h.name;if(f!=="Time")if(typeof h?.display=="function"){const b=h?.display(h.values[g]);if(!isNaN(b.numeric))c[f]=b.numeric.toString(10);else{const v=(0,t.zc)(b);v?c[f]=v:f.includes("Value #")&&(c[f]=n)}}else console.warn("Field display method is missing!")}m.push({...c,__name__:a})}),m}},20205:(j,I,e)=>{"use strict";e.d(I,{a_:()=>E,Rb:()=>C,lt:()=>P,u8:()=>u});var t=e(89949),n=e(27702),i=e(70732),s=e(24094),r=e(62247),m=e(3569),d=e(39317),o=e(86312),l=e(91368),a=e(69442),g=e.n(a),c=e(89024);const h=(x,M,R)=>{let O={},T={};if(x.type===s.sN.Regex&&x.expression){const U=new RegExp(x.expression,"gi"),V=(typeof M=="string"?M:(0,c.Xh)(M)).matchAll(U);for(const w of V)w.groups?T=w.groups:T[x.mapValue||R]=w[1]||w[0]}else x.type===s.sN.Logfmt&&(T=g().parse(M));return Object.keys(T).forEach(U=>{const L=typeof T[U]=="string"?T[U]:(0,c.Xh)(T[U]);O[U]={value:L}}),O};var f=e(89897);const v=[x=>!x.internal||l.contextSrv.hasAccessToExplore()],y="grafana_data_link_clicked",E=x=>{const{field:M,vars:R,splitOpenFn:O,range:T,rowIndex:U,dataFrame:L}=x,V={...R||{}};V.__value={value:{raw:M.values[U]},text:"Raw value"};let w;return L&&(w=(0,i.z)({frame:L,rowIndex:U}),V.__data={value:{name:L.name,refId:L.refId,fields:w},text:"Data"},L.fields.forEach(K=>{w&&w[K.name]&&(V[K.name]={value:w[K.name]})}),V.__targetField={value:w[M.name]}),M.config.links?M.config.links.filter(W=>v.every(_=>_(W,V))).map(W=>{if(W.internal){let _={};W.internal?.transformations&&W.internal?.transformations.forEach(Q=>{let X;Q.field?X=L?.fields.find(oe=>oe.name===Q.field)?.values[U]:X=M.values[U],_={..._,...h(Q,X,M.name)}});const k={...V,..._},A=P(W,k);let z=[];if(A.variables.length===0){const Q=M.name.toString();z.push({variableName:Q,value:"",match:""})}else z=A.variables;const H=Q=>{(0,o.ff)(y,{origin:W.origin||s.n1.Datasource,app:r.zj.Explore,internal:!0}),O?.(Q)};return A.allVariablesDefined?{...(0,m._)({link:W,internalLink:W.internal,scopedVars:k,range:T,field:M,onClickFn:x.splitOpenFn?X=>H(X):void 0,replaceVariables:(0,d.J)().replace.bind((0,d.J)())}),variables:z}:void 0}else{const _=(A,z)=>(0,d.J)().replace(A,{...z,...V}),k=(0,f.Bq)().getDataLinkUIModel(W,_,M);return k.title||(k.title=C(k.href)),k}}).filter(W=>!!W):[]};function C(x){x.indexOf("://")<0&&(x=`http://${x}`);let M;try{M=new URL(x).hostname}catch{M=x}return M}function u(x,M){return(0,n.useCallback)((R,O)=>R.fields.flatMap(T=>T.config?.links&&T.config?.links.length?E({field:T,rowIndex:O,range:x,dataFrame:R,splitOpenFn:M}):[]),[x,M])}const D=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function P(x,M){let R=[];return(0,d.J)().replace.bind((0,d.J)())(S(x),M,void 0,R),R=(0,t.uniqBy)(R,"variableName"),{variables:R,allVariablesDefined:R.filter(T=>!D.includes(T.variableName)).every(T=>T.found)}}function S(x){let M="",R;for(R in x)typeof x[R]=="string"?M+=" "+x[R]:typeof x[R]=="object"&&(M+=" "+S(x[R]));return M}},18886:(j,I,e)=>{"use strict";e.d(I,{Z:()=>n});var t=e(76897);function n(i){const s=new Set(i.map(r=>r.refId).filter(Boolean));return s.size===i.length?i:(s.clear(),i.map(r=>{if(r.refId&&!s.has(r.refId))return s.add(r.refId),r;const m=(0,t.Hs)(i);return s.add(m),{...r,refId:m}}))}},22061:(j,I,e)=>{"use strict";e.d(I,{B9:()=>h,DK:()=>f,SY:()=>g,Z9:()=>y});var t=e(89949),n=e.n(t),i=e(48592),s=e(6857),r=e(95502),m=e(91729),d=e(51451),o=e(53933),l=e(56812),a=e(30209);const g=[d.v8.LogsVolume,d.v8.LogsSample],c=E=>`grafana.explore.logs.enable${E}`,h=(E,C)=>{l.Z.set(c(C),E?"true":"false")},f=()=>{let E={[d.v8.LogsVolume]:{enabled:!0},[d.v8.LogsSample]:{enabled:!1}};for(const C of g){if(C===d.v8.LogsSample)continue;l.Z.get(c(C))==="false"&&(E[C]={enabled:!1})}return E},b=(E,C,u)=>new i.y(D=>E.subscribe(P=>{if(P.logsResult&&P.logsResult.rows&&P.logsResult.visibleRange&&P.logsResult.bucketSize!==void 0&&P.state===o.Gu.Done){const S=P.logsResult.bucketSize,x=C.map(O=>O.refId),M=(0,t.groupBy)(P.logsResult.rows,"dataFrame.refId");let R=[];x.forEach(O=>{if(M[O]?.length){const T=(0,a.Nw)(M[O],S);R=[...R,...T];const U={logsVolumeType:d.o8.Limited,absoluteRange:P.logsResult?.visibleRange,datasourceName:u,sourceQuery:C.find(L=>L.refId===O)};D.next({data:R.map(L=>{const V=L.meta?.custom||{};return{...L,meta:{custom:{...V,...U}}}}),state:P.state})}}),D.complete()}})),v=(E,C,u,D)=>{if(E===d.v8.LogsVolume)return b(C,u,D)},y=(E,C,u,D)=>{const S=E.map(({datasource:x,targets:M},R)=>{const O=(0,t.cloneDeep)(u);return O.requestId=`${O.requestId||""}_${R}`,O.targets=M,(0,d.mN)(x,C)?x.getDataProvider(C,O):v(C,D,M,x.name)}).filter(o.fQ);if(S.length!==0)return S.length===1?S[0]:(0,s.T)(...S).pipe((0,m.R)((x,M)=>x.errors&&x.errors.length||M.state===o.Gu.NotStarted?x:M.state===o.Gu.Loading&&x.state===o.Gu.NotStarted?{...x,state:o.Gu.Loading}:M.state&&M.state!==o.Gu.Done?x:{...x,data:[...x.data,...M.data],state:o.Gu.Done},{data:[],state:o.Gu.NotStarted}),(0,r.E)())}},11122:(j,I,e)=>{"use strict";e.d(I,{mV:()=>P,bE:()=>D});var t=e(91053),n=e(22479),i=e(9232),s=e(42751),r=e(39317),m=e(10864),d=e(27702),o=e(48024),l=e(28580),a=e(19239),g=e(10124),c=e(74667),h=e(32291),f=e(33305),b=e(65946),v=e(22283);const y=15;function E(){const S=(0,d.useRef)({}),x=(0,d.useCallback)(R=>{switch(R){case b.Us.math:case b.Us.reduce:case b.Us.resample:case b.Us.threshold:return S.current[R];case b.Us.classic:return}},[]),M=(0,d.useCallback)((R,O)=>{switch(R){case b.Us.math:S.current.math=O;break;case b.Us.reduce:case b.Us.resample:case b.Us.resample:S.current.reduce=O,S.current.resample=O,S.current.threshold=O;break}},[]);return{getCachedExpression:x,setCachedExpression:M}}function C(S){const{query:x,queries:M,onRunQuery:R,onChange:O}=S,{getCachedExpression:T,setCachedExpression:U}=E();(0,d.useEffect)(()=>{U(x.type,x.expression)},[x.expression,x.type,U]);const L=(0,d.useCallback)(K=>{const B=T(K.value),W=(0,v.J)({...x,type:K.value});O({...W,expression:B??W.expression})},[x,O,T]),V=()=>{const K=M.filter(B=>x.refId!==B.refId).map(B=>({value:B.refId,label:B.refId}));switch(x.type){case b.Us.math:return d.createElement(g.Z,{onChange:O,query:x,labelWidth:y,onRunQuery:R});case b.Us.reduce:return d.createElement(c.v,{refIds:K,onChange:O,labelWidth:y,query:x});case b.Us.resample:return d.createElement(h.p,{query:x,labelWidth:y,onChange:O,refIds:K});case b.Us.classic:return d.createElement(a.I,{onChange:O,query:x,refIds:K});case b.Us.threshold:return d.createElement(f.M,{onChange:O,query:x,labelWidth:y,refIds:K})}},w=b.EJ.find(K=>K.value===x.type);return d.createElement("div",null,d.createElement(o._,{label:"Operation",labelWidth:y},d.createElement(l.Ph,{options:b.EJ,value:w,onChange:L,width:25})),V())}class u extends s.CK{constructor(x){super(x),this.instanceSettings=x}applyTemplateVariables(x,M){const R=(0,r.J)();return{...x,expression:R.replace(x.expression,M),window:R.replace(x.window,M)}}getCollapsedText(x){return`Expression: ${x.type}`}query(x){let M=x.targets.map(async O=>{const T=await(0,m.F)().get(O.datasource);return T.interpolateVariablesInQueries?T?.interpolateVariablesInQueries([O],x.scopedVars)[0]:O});return(0,t.D)(Promise.all(M)).pipe((0,n.z)(O=>super.query({...x,targets:O})))}newQuery(x){return{refId:"--",datasource:s.hr,type:x?.type??b.Us.math,...x}}}const D={id:-100,uid:b.Yq,name:s.hr.name,type:s.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:i.zV.datasource,name:s.hr.type,id:s.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},P=new u(D);P.meta={id:s.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},P.components={QueryEditor:C}},19239:(j,I,e)=>{"use strict";e.d(I,{I:()=>C});var t=e(27702),n=e(71107),i=e(48024),s=e(66670),r=e(73453),m=e(22283),d=e(42844),o=e(23852),l=e(66310),a=e(70725),g=e(28580),c=e(1128),h=e(43609);const f=h.Z.reducerTypes.map(u=>({label:u.text,value:u.value})),b=h.Z.evalOperators.map(u=>({label:u.text,value:u.value})),v=h.Z.evalFunctions.map(u=>({label:u.text,value:u.value})),y=({condition:u,index:D,onChange:P,onRemoveCondition:S,refIds:x})=>{const M=(0,l.wW)(E),R=K=>{P({...u,operator:{type:K.value}})},O=K=>{P({...u,reducer:{type:K.value,params:[]}})},T=K=>{P({...u,query:{params:[K.value]}})},U=K=>{P({...u,evaluator:{params:u.evaluator.params,type:K.value}})},L=(K,B)=>{const W=parseFloat(K.currentTarget.value),_=[...u.evaluator.params];_[B]=W,P({...u,evaluator:{...u.evaluator,params:_}})},V=(0,d.css)`
    width: 60px;
  `,w=u.evaluator.type===h.$.IsWithinRange||u.evaluator.type===h.$.IsOutsideRange;return t.createElement(o.K,{direction:"row"},t.createElement("div",{style:{flex:1}},t.createElement(n.Z,null,D===0?t.createElement("div",{className:(0,d.cx)(M.button,V)},"WHEN"):t.createElement(a.d,{className:(0,d.cx)(M.buttonSelectText,V),options:b,onChange:R,value:b.find(K=>K.value===u.operator.type)}),t.createElement(g.Ph,{options:f,onChange:O,width:20,value:f.find(K=>K.value===u.reducer.type)}),t.createElement("div",{className:M.button},"OF"),t.createElement(g.Ph,{onChange:T,options:x,width:"auto",value:x.find(K=>K.value===u.query.params[0])})),t.createElement(n.Z,null,t.createElement(a.d,{className:M.buttonSelectText,options:v,onChange:U,value:v.find(K=>K.value===u.evaluator.type)}),w?t.createElement(t.Fragment,null,t.createElement(c.I,{type:"number",width:10,onChange:K=>L(K,0),value:u.evaluator.params[0]}),t.createElement("div",{className:M.button},"TO"),t.createElement(c.I,{type:"number",width:10,onChange:K=>L(K,1),value:u.evaluator.params[1]})):u.evaluator.type!==h.$.HasNoValue?t.createElement(c.I,{type:"number",width:10,onChange:K=>L(K,0),value:u.evaluator.params[0]}):null)),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:()=>S(D)},t.createElement(r.J,{name:"trash-alt"})))},E=u=>{const D=(0,d.css)`
    color: ${u.colors.primary.text};
    font-size: ${u.typography.bodySmall.fontSize};
  `;return{buttonSelectText:D,button:(0,d.cx)((0,d.css)`
        display: flex;
        align-items: center;
        border-radius: ${u.shape.borderRadius(1)};
        font-weight: ${u.typography.fontWeightMedium};
        border: 1px solid ${u.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${u.spacing(1)};
        background-color: ${u.colors.background.canvas};
      `,D)}},C=({onChange:u,query:D,refIds:P})=>{const S=(R,O)=>{D.conditions&&u({...D,conditions:[...D.conditions.slice(0,O),R,...D.conditions.slice(O+1)]})},x=()=>{if(D.conditions){const R=D.conditions.at(-1)?.query?.params??[],O={...m.R,query:{params:R}};u({...D,conditions:D.conditions.length>0?[...D.conditions,O]:[O]})}},M=R=>{if(D.conditions){const O=D.conditions[R],T=D.conditions.filter(U=>U!==O).map((U,L)=>L===0?{...U,operator:{type:"when"}}:U);u({...D,conditions:T})}};return t.createElement("div",null,t.createElement(n.Z,null,t.createElement(i._,{label:"Conditions",labelWidth:14},t.createElement("div",null,D.conditions?.map((R,O)=>{if(R)return t.createElement(y,{key:O,index:O,condition:R,onChange:T=>S(T,O),onRemoveCondition:M,refIds:P})})))),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:x},t.createElement(r.J,{name:"plus-circle"})))}},10124:(j,I,e)=>{"use strict";e.d(I,{Z:()=>g});var t=e(42844),n=e(27702),i=e(23852),s=e(66310),r=e(48024),m=e(53901),d=e(16532),o=e(73453),l=e(60105);const a="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",g=({labelWidth:b,onChange:v,query:y,onRunQuery:E})=>{const C=P=>{v({...y,expression:P.target.value})},u=(0,s.wW)(h),D=()=>{y.expression&&E()};return n.createElement(i.K,{direction:"row"},n.createElement(r._,{label:n.createElement(m.W,{width:"auto"},n.createElement(d.P,{fitContent:!0,content:n.createElement("div",{className:u.documentationContainer},n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:u.documentationHeader},"Available Math functions"),n.createElement("div",{className:u.documentationFunctions},n.createElement(c,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(c,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(c,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(c,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(c,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(c,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(c,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(c,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."}))),title:n.createElement(i.K,{gap:1,direction:"row"},n.createElement(o.J,{name:"book-open"})," Math operator"),footer:n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:u.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(o.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."),closeButton:!0,placement:"bottom-start"},n.createElement("div",{className:u.info},"Expression ",n.createElement(o.J,{name:"info-circle"})))),labelWidth:b,grow:!0,shrink:!0},n.createElement(l.K,{value:y.expression,onChange:C,rows:1,placeholder:a,onBlur:D,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},c=({name:b,description:v})=>{const y=(0,s.wW)(f);return n.createElement(n.Fragment,null,n.createElement("span",{className:y.name},b),n.createElement("span",{className:y.description},v))},h=b=>({documentationHeader:(0,t.css)`
    font-size: ${b.typography.h5.fontSize};
    font-weight: ${b.typography.h5.fontWeight};
  `,documentationLink:(0,t.css)`
    color: ${b.colors.text.link};
  `,documentationContainer:(0,t.css)`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${b.spacing(2)};

    padding: ${b.spacing(1)} ${b.spacing(2)};
  `,documentationFunctions:(0,t.css)`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${b.spacing(2)};
  `,info:(0,t.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    cursor: pointer;
    gap: ${b.spacing(1)};
  `}),f=b=>({name:(0,t.css)`
    font-weight: ${b.typography.fontWeightBold};
  `,description:(0,t.css)`
    font-size: ${b.typography.bodySmall.fontSize};
    color: ${b.colors.text.disabled};
  `})},74667:(j,I,e)=>{"use strict";e.d(I,{v:()=>d});var t=e(27702),n=e(48024),i=e(1128),s=e(71107),r=e(28580),m=e(65946);const d=({labelWidth:o="auto",onChange:l,refIds:a,query:g})=>{const c=m.SQ.find(u=>u.value===g.reducer),h=u=>{l({...g,expression:u.value})},f=u=>{l({...g,reducer:u.value})},b=u=>{l({...g,settings:u})},v=u=>{let D;switch(u.value){case m.kN.ReplaceNonNumbers:let P=0;g.settings?.mode===m.kN.ReplaceNonNumbers&&(P=g.settings?.replaceWithValue??0),D={mode:m.kN.ReplaceNonNumbers,replaceWithValue:P};break;default:D={mode:u.value}}b(D)},y=u=>{const D=u.currentTarget.valueAsNumber;b({mode:m.kN.ReplaceNonNumbers,replaceWithValue:D??0})},E=g.settings?.mode??m.kN.Strict,C=()=>{if(E===m.kN.ReplaceNonNumbers)return t.createElement(n._,{label:"Replace With",labelWidth:o},t.createElement(i.I,{type:"number",width:10,onChange:y,value:g.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.Z,null,t.createElement(n._,{label:"Input",labelWidth:o},t.createElement(r.Ph,{onChange:h,options:a,value:g.expression,width:"auto"}))),t.createElement(s.Z,null,t.createElement(n._,{label:"Function",labelWidth:o},t.createElement(r.Ph,{options:m.SQ,value:c,onChange:f,width:20})),t.createElement(n._,{label:"Mode",labelWidth:o},t.createElement(r.Ph,{onChange:v,options:m.YM,value:E,width:25})),C()))}},32291:(j,I,e)=>{"use strict";e.d(I,{p:()=>d});var t=e(27702),n=e(71107),i=e(48024),s=e(28580),r=e(1128),m=e(65946);const d=({labelWidth:o="auto",onChange:l,refIds:a,query:g})=>{const c=m.Fr.find(E=>E.value===g.downsampler),h=m.r8.find(E=>E.value===g.upsampler),f=E=>{l({...g,window:E.target.value})},b=E=>{l({...g,expression:E.value})},v=E=>{l({...g,downsampler:E.value})},y=E=>{l({...g,upsampler:E.value})};return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(i._,{label:"Input",labelWidth:o},t.createElement(s.Ph,{onChange:b,options:a,value:g.expression,width:20}))),t.createElement(n.Z,null,t.createElement(i._,{label:"Resample to",labelWidth:o,tooltip:"10s, 1m, 30m, 1h"},t.createElement(r.I,{onChange:f,value:g.window,width:15})),t.createElement(i._,{label:"Downsample"},t.createElement(s.Ph,{options:m.Fr,value:c,onChange:v,width:25})),t.createElement(i._,{label:"Upsample"},t.createElement(s.Ph,{options:m.r8,value:h,onChange:y,width:25}))))}},33305:(j,I,e)=>{"use strict";e.d(I,{M:()=>c});var t=e(42844),n=e(27702),i=e(66310),s=e(71107),r=e(48024),m=e(28580),d=e(70725),o=e(1128),l=e(43609),a=e(65946);const g=l.$.IsAbove,c=({labelWidth:b,onChange:v,refIds:y,query:E})=>{const C=(0,i.wW)(f),u={type:"query",evaluator:{type:g,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},D=E.conditions?.length?E.conditions:[u],P=D[0],S=a.Mi.find(T=>T.value===D[0].evaluator?.type),x=T=>{v({...E,expression:T.value})},M=T=>{const U=T.value??g;v({...E,conditions:h(D,{type:U})})},R=(T,U)=>{const L=parseFloat(T.currentTarget.value),V=[...P.evaluator.params];V[U]=L,v({...E,conditions:h(D,{params:V})})},O=P.evaluator.type===l.$.IsWithinRange||P.evaluator.type===l.$.IsOutsideRange;return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(r._,{label:"Input",labelWidth:b},n.createElement(m.Ph,{onChange:x,options:y,value:E.expression,width:20}))),n.createElement(s.Z,null,n.createElement(d.d,{className:C.buttonSelectText,options:a.Mi,onChange:M,value:S}),O?n.createElement(n.Fragment,null,n.createElement(o.I,{type:"number",width:10,onChange:T=>R(T,0),defaultValue:P.evaluator.params[0]}),n.createElement("div",{className:C.button},"TO"),n.createElement(o.I,{type:"number",width:10,onChange:T=>R(T,1),defaultValue:P.evaluator.params[1]})):n.createElement(o.I,{type:"number",width:10,onChange:T=>R(T,0),defaultValue:D[0].evaluator.params[0]||0})))};function h(b,v){return[{...b[0],evaluator:{...b[0].evaluator,...v}}]}const f=b=>({buttonSelectText:(0,t.css)`
    color: ${b.colors.primary.text};
    font-size: ${b.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:(0,t.css)`
    height: 32px;

    color: ${b.colors.primary.text};
    font-size: ${b.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${b.shape.borderRadius(1)};
    font-weight: ${b.typography.fontWeightBold};
    border: 1px solid ${b.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${b.spacing(1)};
    background-color: ${b.colors.background.primary};
  `})},65946:(j,I,e)=>{"use strict";e.d(I,{EJ:()=>m,Fr:()=>a,Mi:()=>c,SQ:()=>d,Us:()=>s,YM:()=>l,Yq:()=>i,hF:()=>r,kN:()=>o,r8:()=>g});var t=e(66656),n=e(43609);const i="__expr__";var s=(h=>(h.math="math",h.reduce="reduce",h.resample="resample",h.classic="classic_conditions",h.threshold="threshold",h))(s||{});const r=h=>{switch(h){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition";case"threshold":return"Threshold"}},m=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],d=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var o=(h=>(h.Strict="",h.ReplaceNonNumbers="replaceNN",h.DropNonNumbers="dropNN",h))(o||{});const l=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],a=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],g=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],c=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},22283:(j,I,e)=>{"use strict";e.d(I,{J:()=>s,R:()=>r});var t=e(66656),n=e(43609),i=e(65946);const s=m=>{switch(m.type){case i.Us.reduce:m.reducer||(m.reducer=t.gz.mean);break;case i.Us.resample:m.downsampler||(m.downsampler=t.gz.mean),m.upsampler||(m.upsampler="fillna"),m.reducer=void 0;break;case i.Us.math:m.expression=void 0;break;case i.Us.classic:m.conditions||(m.conditions=[r]);break;default:m.reducer=void 0}return m},r={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.$.IsAbove}}},35381:(j,I,e)=>{"use strict";e.d(I,{Go:()=>h,J6:()=>b,OD:()=>c,Pb:()=>g,Uk:()=>E,W7:()=>u,a:()=>f,pz:()=>C,v7:()=>y});var t=e(78209),n=e(94469),i=e(26129),s=e(73289),r=e(33877),m=e(73807),d=e(66574),o=e(45937),l=e(40127),a=e(62225);function g(D){return async P=>{const S=await o.ae.getFolderByUid(D);return P((0,a.G3)(S)),P((0,r.RL)((0,l.B1)(S))),S}}function c(D){return async P=>{const S=await o.ae.put(`/api/folders/${D.uid}`,{title:D.title,version:D.version});P((0,r.$l)((0,m.AT)("Folder saved"))),P((0,a.G3)(S)),i.E1.push(n.u.stripBaseFromUrl(`${S.url}/settings`))}}function h(D){return async()=>{await o.ae.delete(`/api/folders/${D}?forceDeleteRules=false`),i.E1.push("/dashboards")}}function f(D){return async P=>{const S=await o.ae.get(`/api/folders/${D}/permissions`);P((0,a.R7)(S))}}function b(D){return async P=>{try{await(0,t.n)(o.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${D}/permissions`})),P((0,a.$$)(!0))}catch(S){(0,s.kW)(S)&&S.status!==403&&P((0,r.$l)((0,m.ZR)("Error checking folder permissions",S.data?.message))),P((0,a.$$)(!1))}}}function v(D){return{userId:D.userId,teamId:D.teamId,role:D.role,permission:D.permission}}function y(D,P){return async(S,x)=>{const M=x().folder,R=[];for(const O of M.permissions){if(O.inherited)continue;const T=v(O);D===O&&(T.permission=P),R.push(T)}await o.ae.post(`/api/folders/${M.uid}/permissions`,{items:R}),await S(f(M.uid))}}function E(D){return async(P,S)=>{const x=S().folder,M=[];for(const R of x.permissions)R.inherited||R===D||M.push(v(R));await o.ae.post(`/api/folders/${x.uid}/permissions`,{items:M}),await P(f(x.uid))}}function C(D){return async(P,S)=>{const x=S().folder,M=[];for(const R of x.permissions)R.inherited||M.push(v(R));M.push({userId:D.userId,teamId:D.teamId,role:D.role,permission:D.permission}),await o.ae.post(`/api/folders/${x.uid}/permissions`,{items:M}),await P(f(x.uid))}}function u(D,P){return async S=>{const x=await(0,s.i)().post("/api/folders",{title:D,parentUid:P});await d.contextSrv.fetchUserPermissions(),S((0,r.$l)((0,m.AT)("Folder Created","OK"))),i.E1.push(n.u.stripBaseFromUrl(x.url))}}},40127:(j,I,e)=>{"use strict";e.d(I,{AZ:()=>o,B1:()=>c,Pr:()=>d,W3:()=>l,_l:()=>h,y3:()=>m});var t=e(34667),n=e(51391),i=e(65322),s=e(91368),r=e(18771);const m="manage-folder",d=f=>`folder-dashboards-${f}`,o=f=>`folder-library-panels-${f}`,l=f=>`folder-alerting-${f}`,a=f=>`folder-permissions-${f}`,g=f=>`folder-settings-${f}`;function c(f,b=f.parents){const v={icon:"folder",id:m,subTitle:(0,n.L)("manage-folder"),url:f.url,text:f.title,children:[{active:!1,icon:"apps",id:d(f.uid),text:(0,i.t)("browse-dashboards.manage-folder-nav.dashboards","Dashboards"),url:f.url}]};if(b&&b.length>0){const y=b[b.length-1],E=b.slice(0,b.length-1);v.parentItem=c(y,E)}return v.children.push({active:!1,icon:"library-panel",id:o(f.uid),text:(0,i.t)("browse-dashboards.manage-folder-nav.panels","Panels"),url:`${f.url}/library-panels`}),s.contextSrv.hasPermission(r.AccessControlAction.AlertingRuleRead)&&t.config.unifiedAlertingEnabled&&v.children.push({active:!1,icon:"bell",id:l(f.uid),text:(0,i.t)("browse-dashboards.manage-folder-nav.alert-rules","Alert rules"),url:`${f.url}/alerting`}),t.config.featureToggles.nestedFolders||(f.canAdmin&&v.children.push({active:!1,icon:"lock",id:a(f.uid),text:(0,i.t)("browse-dashboards.manage-folder-nav.permissions","Permissions"),url:`${f.url}/permissions`}),f.canSave&&v.children.push({active:!1,icon:"cog",id:g(f.uid),text:(0,i.t)("browse-dashboards.manage-folder-nav.settings","Settings"),url:`${f.url}/settings`})),v}function h(f){const b=c({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return b.children[f].active=!0,{main:b,node:b.children[f]}}},62225:(j,I,e)=>{"use strict";e.d(I,{$$:()=>a,G3:()=>o,R7:()=>d,Ss:()=>l,ZP:()=>c});var t=e(34099),n=e(58198),i=e(67572);const s={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},r=(h,f)=>({...h,...f.payload,hasChanged:!1}),m=(0,t.oM)({name:"folder",initialState:s,reducers:{loadFolder:r,setFolderTitle:(h,f)=>({...h,title:f.payload,hasChanged:f.payload.trim().length>0}),loadFolderPermissions:(h,f)=>({...h,permissions:(0,n.A)(f.payload)}),setCanViewFolderPermissions:(h,f)=>(h.canViewFolderPermissions=f.payload,h)},extraReducers:h=>{h.addMatcher(i.Hv.getFolder.matchFulfilled,r)}}),{loadFolderPermissions:d,loadFolder:o,setFolderTitle:l,setCanViewFolderPermissions:a}=m.actions,c={folder:m.reducer}},58514:(j,I,e)=>{"use strict";e.d(I,{Q:()=>l});var t=e(42844),n=e(27702),i=e(66310),s=e(28580),r=e(63439),m=e(80402),d=e(92886);const o=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:d.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],l=({value:g,onChange:c,context:h,item:f})=>{const b=a((0,i.l4)()),[v,y]=(0,n.useState)(),E=f.settings;(0,n.useEffect)(()=>{async function D(){const P=await(0,d.so)(g);y(P)}D()},[g,y]);const{current:C,options:u}=(0,n.useMemo)(()=>{let D=E?.options?[...E.options]:[...o],P=D?.find(S=>S.value===v?.path);return!P&&v&&(P={label:v.path,value:v.path},D.push(P)),{options:D,current:P}},[v,E?.options]);return n.createElement(n.Fragment,null,n.createElement(s.Ph,{value:C,options:u,onChange:D=>c(D.value),allowCustomValue:!0,formatCreateLabel:D=>`Load from URL: ${D}`}),v&&n.createElement(n.Fragment,null,v.error&&n.createElement(r.b,{title:v.error,severity:"warning"}),v.count&&n.createElement("div",{className:b.keys},n.createElement("b",null,"(",v.count,")"),v.examples(10).map(D=>n.createElement("span",{key:D},D,",")),v.count>10&&" ...")))},a=(0,m.B)(g=>({keys:(0,t.css)`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},79357:(j,I,e)=>{"use strict";e.d(I,{C:()=>y});var t=e(29241),n=e(64167),i=e(58514),s=e(42844),r=e(27702),m=e(74639),d=e(66310),o=e(63439),l=e(73453),a=e(28580),g=e(64022),c=e(83612);const h=[{value:n.q1.Auto,label:"Auto",ariaLabel:m.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.q1.Coords,label:"Coords",ariaLabel:m.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.q1.Geohash,label:"Geohash",ariaLabel:m.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.q1.Lookup,label:"Lookup",ariaLabel:m.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],f="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",b=({value:E,onChange:C,context:u,item:D})=>{const[P,S]=(0,r.useState)();(0,r.useEffect)(()=>{D.settings?.source&&D.settings?.data?.length&&D.settings.data[0]&&(0,c.cJ)(D.settings.source).then(R=>{D.settings&&D.settings.data&&S((0,c.g6)(D.settings.data[0],R))})},[D.settings]);const x=(0,d.wW)(v),M=()=>{if(P){if(P.warning)return r.createElement(o.b,{title:P.warning,severity:"warning",buttonContent:r.createElement(l.J,{name:"question-circle",size:"xl"}),className:x.alert,onRemove:()=>{const R=window.open(f,"_blank","noopener,noreferrer");R&&(R.opener=null)}});if(E===n.q1.Auto&&P.description)return r.createElement("span",null,P.description)}return null};return r.createElement(r.Fragment,null,r.createElement(a.Ph,{options:h,value:E,onChange:R=>{C(R.value)}}),r.createElement(g.Lh,{className:x.hGroup},M()))},v=E=>({alert:(0,s.css)`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:(0,s.css)`
      & div {
        width: 100%;
      }
    `});function y(E,C,u,D,P){switch(u.addCustomEditor({id:"modeEditor",path:`${C}mode`,name:"Location Mode",editor:b,settings:{data:P,source:D}}),D?.mode){case n.q1.Coords:u.addFieldNamePicker({path:`${C}latitude`,name:"Latitude field",settings:{filter:S=>S.type===t.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${C}longitude`,name:"Longitude field",settings:{filter:S=>S.type===t.fS.number,noFieldsMessage:"No numeric fields found"}});break;case n.q1.Geohash:u.addFieldNamePicker({path:`${C}geohash`,name:"Geohash field",settings:{filter:S=>S.type===t.fS.string,noFieldsMessage:"No strings fields found"}});break;case n.q1.Lookup:u.addFieldNamePicker({path:`${C}lookup`,name:"Lookup field",settings:{filter:S=>S.type===t.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${C}gazetteer`,name:"Gazetteer",editor:i.Q})}}},62236:(j,I,e)=>{"use strict";e.d(I,{EK:()=>c,Fh:()=>h,ie:()=>g,uZ:()=>l,zS:()=>a});var t=e(10680),n=e(87419),i=e(84570),s=e(29209),r=e(29241),m=e(62129);function d(b){if(!b?.length)return;const v=[16,8,4,2,1],y="0123456789bcdefghjkmnpqrstuvwxyz";let E=!0;const C=[],u=[];C[0]=-90,C[1]=90,u[0]=-180,u[1]=180;let D;b.split("").forEach(x=>{D=y.indexOf(x),v.forEach(M=>{o(E?u:C,D,M),E=!E})});const P=(C[0]+C[1])/2;return[(u[0]+u[1])/2,P]}function o(b,v,y){v&y?b[0]=(b[0]+b[1])/2:b[1]=(b[0]+b[1])/2}function l(b){return{name:b.name??"Point",type:r.fS.geo,values:b.values.map(v=>{const y=d(v);if(y)return new t.Z((0,s.mi)(y))}),config:f}}function a(b,v){const y=new Array(b.values.length);for(let E=0;E<b.values.length;E++){const C=b.values[E],u=v.values[E];C===null||u===null||(y[E]=new t.Z((0,s.mi)([C,u])))}return{name:"Point",type:r.fS.geo,values:y,config:f}}function g(b,v){const y=v.values.length,E=new Array(y);for(let C=0;C<y;C++)E[C]=b.find(v.values[C])?.geometry();return{name:"Geometry",type:r.fS.geo,values:E,config:f}}function c(b,v){const y=b.values,E=v.values;if(!y||!E)throw"missing src/dest";if(y.length!==E.length)throw"Source and destination field lengths do not match";const C=b.values.length,u=new Array(C);for(let D=0;D<C;D++){const P=y[D],S=E[D];P&&S?u[D]=new n.Z([P,S]):P?u[D]=P:S&&(u[D]=S)}return{name:"Geometry",type:r.fS.geo,values:u,config:f}}function h(b,v){const y=b.values,E=v.values;if(!y||!E)throw"missing src/dest";if(y.length!==E.length)throw"Source and destination field lengths do not match";const C=b.values.length,u=new Array(C);for(let D=0;D<C;D++){const P=y[D],S=E[D];P&&S&&(u[D]=new i.Z([(0,m.Lb)(P),(0,m.Lb)(S)]))}return{name:"Geometry",type:r.fS.geo,values:u,config:f}}const f=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},92886:(j,I,e)=>{"use strict";e.d(I,{LI:()=>b,so:()=>v});var t=e(70328),n=e(10680),i=e(32053),s=e(29241),r=e(73289),m=e(7954);function d(y){const E=new m.Z().readFeatures(y,{featureProjection:"EPSG:3857"}),C=E.length,u=new Array(C).fill(null),D=[],P=new Map,S=O=>{let T=P.get(O);return T||(T={types:new Set,values:new Array(C).fill(null),count:0},D.push(O),P.set(O,T)),T},x=(...O)=>{for(const T of O)if(!P.has(T))return T;return"___"+O[0]},M={types:new Set,values:new Array(C).fill(null),count:0};for(let O=0;O<C;O++){const T=E[O];u[O]=T.getGeometry();const U=T.getId();U!=null&&(M.values[O]=U,M.types.add((0,i.DP)(U)),M.count++);for(const L of T.getKeys()){const V=T.get(L);if(V===u[O]||V==null)continue;const w=S(L);w.values[O]=V,w.types.add((0,i.DP)(V)),w.count++}}const R=[];if(M.count>0){const O=o(M);R.push({name:x("id","_id","__id"),type:O,values:M.values,config:{}})}R.push({name:x("geo","geometry"),type:s.fS.geo,values:u,config:{}});for(const O of D){const T=P.get(O);if(!T)continue;const U=o(T);R.push({name:O,type:U,values:T.values,config:{}})}return{fields:R,length:C}}function o(y){return y.count<1?s.fS.other:y.types.size>1?(y.values=y.values.map(E=>E!=null?`${E}`:E),s.fS.string):y.types.values().next().value}var l=e(62236),a=e(29209);function g(y,E){let C=0;const u=new Map;for(const D of E){const P=new n.Z((0,a.mi)([D.longitude,D.latitude])),S={point:()=>P,geometry:()=>P};if(D.name&&(u.set(D.name,S),u.set(D.name.toUpperCase(),S)),D.key&&(u.set(D.key,S),u.set(D.key.toUpperCase(),S)),D.keys)for(const x of D.keys)u.set(x,S),u.set(x.toUpperCase(),S);C++}return{path:y,find:D=>{let P=u.get(D);return!P&&typeof D=="string"&&(P=u.get(D.toUpperCase())),P},count:C,examples:D=>{const P=[];if(u.size<1)P.push("no values found");else for(const S of u.keys())if(P.push(S),P.length>=D)break;return P}}}function c(y,E){let C;if(Array.isArray(E)){const u=E[0];if(u.latitude&&u.longitude&&(u.key||u.keys))return g(y,E)}else Array.isArray(E?.features)&&E?.type==="FeatureCollection"&&(C=d(E));if(!C)try{C=(0,i.g0)(E)}catch(u){return{path:y,error:`${u}`,find:D=>{},examples:D=>[]}}return h(C,{path:y})}function h(y,E){const C=[];let u,D,P,S,x;for(const O of y.fields)if(O.type===s.fS.geo&&(u=O),!x&&O.type===s.fS.string&&(x=O),O.name){E.keys&&E.keys.includes(O.name)&&C.push(O);const T=O.name.toUpperCase();switch(T){case"LAT":case"LATITUTE":D=O;break;case"LON":case"LNG":case"LONG":case"LONGITUE":P=O;break;case"GEOHASH":S=O;break;case"ID":case"UID":case"KEY":case"CODE":E.keys||C.push(O);break;default:E.keys||(T.endsWith("_ID")||T.endsWith("_CODE"))&&C.push(O)}}!C.length&&x&&C.push(x);let M=!1;u?M=u.values[0]?.getType()==="Point":S?(u=(0,l.uZ)(S),M=!0):D&&P&&(u=(0,l.zS)(P,D),M=!0);const R=new Map;return C.forEach(O=>{O.values.forEach((T,U)=>{const L=`${T}`;R.set(L.toUpperCase(),U),R.set(L,U)})}),{path:E.path,find:O=>{const T=R.get(O);if(T!=null){const U=u?.values[T];return{frame:y,index:T,point:()=>!U||M?U:new n.Z((0,t.qg)(U.getExtent())),geometry:()=>U}}},examples:O=>{const T=[];for(let U of R.keys())if(T.push(U),T.length>O)break;return T},frame:()=>y,count:y.length}}const f={},b="public/gazetteer/countries.json";async function v(y){y||(y=b);let E=f[y];if(!E){try{const C=await(0,r.i)().get(y);E=c(y,C)}catch(C){console.warn("Error loading placename lookup",y,C),E={path:y,error:"Error loading URL",find:u=>{},examples:u=>[]}}f[y]=E}return E}},83612:(j,I,e)=>{"use strict";e.d(I,{cJ:()=>g,g6:()=>h});var t=e(75578),n=e(29241),i=e(76178),s=e(19221),r=e(64167),m=e(62236),d=e(92886);function o(f){return b=>{for(const v of b.fields)if(f(v,b,[]))return v}}function l(f){return b=>{for(const v of b.fields){if(f.has(v.name.toLowerCase()))return v;const y=(0,t.CZ)(v,b);if(f.has(y))return v}}}const a={mode:r.q1.Auto,geohash:l(new Set(["geohash"])),latitude:l(new Set(["latitude","lat"])),longitude:l(new Set(["longitude","lon","lng"])),h3:l(new Set(["h3"])),wkt:l(new Set(["wkt"])),lookup:l(new Set(["lookup"])),geo:f=>f.fields.find(b=>b.type===n.fS.geo)};async function g(f){const b={...a,mode:f?.mode??r.q1.Auto};switch(b.gazetteer=await(0,d.so)(f?.gazetteer),b.mode){case r.q1.Geohash:f?.geohash?b.geohash=o((0,i.sq)({id:s.mi.byName,options:f.geohash})):b.geohash=()=>{};break;case r.q1.Lookup:const v=f?.lookup?.length?(0,i.sq)({id:s.mi.byName,options:f.lookup}):(0,i.sq)({id:s.mi.byType,options:n.fS.string});b.lookup=o(v);break;case r.q1.Coords:f?.latitude?b.latitude=o((0,i.sq)({id:s.mi.byName,options:f.latitude})):b.latitude=()=>{},f?.longitude?b.longitude=o((0,i.sq)({id:s.mi.byName,options:f.longitude})):b.longitude=()=>{};break}return b}function c(f,b){const v={mode:b.mode??r.q1.Auto};if(v.mode===r.q1.Auto){if(v.geo=b.geo(f),v.geo)return v;if(v.latitude=b.latitude(f),v.longitude=b.longitude(f),v.latitude&&v.longitude)return v.mode=r.q1.Coords,v;if(v.geohash=b.geohash(f),v.geohash)return v.mode=r.q1.Geohash,v;if(v.lookup=b.lookup(f),v.lookup)return v.mode=r.q1.Lookup,v}switch(v.mode){case r.q1.Coords:v.latitude=b.latitude(f),v.longitude=b.longitude(f);break;case r.q1.Geohash:v.geohash=b.geohash(f);break;case r.q1.Lookup:v.lookup=b.lookup(f);break}return v}function h(f,b){const v=c(f,b);switch(v.mode){case r.q1.Auto:return v.geo?{field:v.geo}:{warning:"Unable to find location fields"};case r.q1.Coords:return v.latitude&&v.longitude?{field:(0,m.zS)(v.longitude,v.latitude),derived:!0,description:`${v.mode}: ${v.latitude.name}, ${v.longitude.name}`}:{warning:"Select latitude/longitude fields"};case r.q1.Geohash:return v.geohash?{field:(0,m.uZ)(v.geohash),derived:!0,description:`${v.mode}`}:{warning:"Select geohash field"};case r.q1.Lookup:return v.lookup?b.gazetteer?{field:(0,m.ie)(b.gazetteer,v.lookup),derived:!0,description:`${v.mode}: ${b.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},49516:(j,I,e)=>{"use strict";e.d(I,{q:()=>t});var t=(n=>(n.Data="data",n.Meta="meta",n.Error="error",n.Stats="stats",n.JSON="json",n.Query="query",n.Help="help",n))(t||{})},31783:(j,I,e)=>{"use strict";e.d(I,{Fc:()=>a,KO:()=>c,gb:()=>h,gv:()=>g});var t=e(49086),n=e.n(t),i=e(60956),s=e(14544),r=e(92827),m=e(72164),d=e(10315),o=e(71523),l=e(66288);function a(f,b){let v="";f.meta?.forEach(C=>{const u=`${C.label}: ${JSON.stringify(C.value)}
`;v=v+u}),v=v+`

`,f.rows.forEach(C=>{const u=(0,i.lf)(C.timeEpochMs)+"	"+C.entry+`
`;v=v+u});const y=new Blob([v],{type:"text/plain;charset=utf-8"}),E=`${b}-logs-${(0,i.dq)(new Date)}.txt`;n()(y,E)}function g(f,b,v,y=s.W.noop){const E=(0,r.MJ)([f],v),C=new Blob([String.fromCharCode(65279),E],{type:"text/csv;charset=utf-8"}),u=y!==s.W.noop?"-as-"+y.toLocaleLowerCase():"",D=`${b}-data${u}-${(0,i.dq)(new Date)}.csv`;n()(C,D)}function c(f,b){const v=new Blob([JSON.stringify(f)],{type:"application/json"}),y=`${b}-${(0,i.dq)(new Date)}.json`;n()(v,y)}function h(f,b){let v="otlp";switch(f.meta?.custom?.traceFormat){case"jaeger":{let y=(0,d.c6)(new m.v(f));c(y,b),v="jaeger";break}case"zipkin":{let y=(0,l.H)(new m.v(f));c(y,b),v="zipkin";break}case"otlp":default:{let y=(0,o.g9)(new m.v(f));c(y,b);break}}return v}},54422:(j,I,e)=>{"use strict";e.d(I,{GY:()=>m,MA:()=>r,nW:()=>s});var t=e(73289),n=e(66574),i=e(18771);const s=(0,i.createAsyncThunk)("users/fetchInvitees",async()=>n.contextSrv.hasPermission(i.AccessControlAction.OrgUsersAdd)?await(0,t.i)().get("/api/org/invites"):[]),r=(0,i.createAsyncThunk)("users/addInvitee",async(d,{dispatch:o})=>{await(0,t.i)().post("/api/org/invites",d),await o(s())}),m=(0,i.createAsyncThunk)("users/revokeInvite",async d=>(await(0,t.i)().patch(`/api/org/invites/${d}/revoke`,{}),d))},67198:(j,I,e)=>{"use strict";e.d(I,{ZP:()=>o,selectors:()=>s});var t=e(34099),n=e(54422);const i=(0,t.HF)({selectId:l=>l.code}),s=i.getSelectors(),r=i.getInitialState({status:"idle"}),o={invites:(0,t.oM)({name:"invites",initialState:r,reducers:{},extraReducers:l=>{l.addCase(n.nW.pending,a=>{a.status="loading"}).addCase(n.nW.fulfilled,(a,{payload:g})=>{i.setAll(a,g),a.status="succeeded"}).addCase(n.nW.rejected,a=>{a.status="failed"}).addCase(n.GY.fulfilled,(a,{payload:g})=>{i.removeOne(a,g),a.status="succeeded"})}}).reducer}},14673:(j,I,e)=>{"use strict";e.d(I,{T:()=>h,c:()=>f});var t=e(27702),n=e(29956),i=e(25111),s=e(73289),r=e(22209),m=e(1128),d=e(13741),o=e(66670),l=e(41482),a=e(65322),g=e(75766),c=e(37024);const h=({panel:b,initialFolderUid:v,onDismiss:y})=>{const[E,C]=(0,t.useState)(v),[u,D]=(0,t.useState)(b.title),[P,S]=(0,t.useState)(b.title),[x,M]=(0,t.useState)(!1);(0,t.useEffect)(()=>M(!0),[u]),(0,n.Z)(()=>S(u),350,[u]);const{saveLibraryPanel:R}=(0,c.E)(),O=(0,t.useCallback)(()=>{b.libraryPanel={uid:"",name:u},R(b,E).then(L=>{L instanceof Error||y()})},[b,u,E,y,R]),T=(0,i.Z)(async()=>{try{return!(await(0,g.jh)(u)).some(L=>L.folderUid===E)}catch(L){return(0,s.kW)(L)&&(L.isHandled=!0),!0}finally{M(!1)}},[P,E]),U=!T?.value&&T.value!==void 0&&u===P&&!x;return t.createElement(t.Fragment,null,t.createElement(r.g,{label:(0,a.t)("library-panel.add-modal.name","Library panel name"),invalid:U,error:U?(0,a.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(m.I,{id:"share-panel-library-panel-name-input",name:"name",value:u,onChange:L=>D(L.currentTarget.value)})),t.createElement(r.g,{label:(0,a.t)("library-panel.add-modal.folder","Save in folder"),description:(0,a.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(l.Fz,{onChange:({uid:L})=>C(L),initialFolderUid:v,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(d.u.ButtonRow,null,t.createElement(o.zx,{variant:"secondary",onClick:y,fill:"outline"},t.createElement(a.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(o.zx,{onClick:O,disabled:U},t.createElement(a.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},f=({isOpen:b=!1,panel:v,initialFolderUid:y,...E})=>t.createElement(d.u,{title:"Create library panel",isOpen:b,onDismiss:E.onDismiss},t.createElement(h,{panel:v,initialFolderUid:y,onDismiss:E.onDismiss}))},97816:(j,I,e)=>{"use strict";e.d(I,{i:()=>i});var t=e(27702),n=e(3613);const i=({isOpen:s,onConfirm:r,onDismiss:m})=>t.createElement(n.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{r(),m()},onDismiss:m,isOpen:s})},73668:(j,I,e)=>{"use strict";e.d(I,{V:()=>t});function t(n){return!!n.libraryPanel?.uid}},75766:(j,I,e)=>{"use strict";e.d(I,{E8:()=>h,Ef:()=>c,Kq:()=>l,Mh:()=>d,Ob:()=>a,Pq:()=>m,UO:()=>g,jh:()=>o});var t=e(78209),n=e(48414),i=e(73170),s=e(45937),r=e(41139);async function m({searchString:f="",perPage:b=100,page:v=1,excludeUid:y="",sortDirection:E="",typeFilter:C=[],folderFilterUIDs:u=[]}={}){const D=new URLSearchParams;D.append("searchString",f),D.append("sortDirection",E),D.append("typeFilter",C.join(",")),D.append("folderFilterUIDs",u.join(",")),D.append("excludeUid",y),D.append("perPage",b.toString(10)),D.append("page",v.toString(10)),D.append("kind",r.V.Panel.toString(10));const{result:P}=await(0,s.i)().get(`/api/library-elements?${D.toString()}`);return P}async function d(f,b=!1){const v=await(0,t.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${f}`,showSuccessAlert:!b,showErrorAlert:!b})),{result:y}=v.data,E=new i.f({...n.Ql,schemaVersion:35,panels:[y.model]}),{scopedVars:C,...u}=E.panels[0].getSaveModel();return E.destroy(),{...y,model:u}}async function o(f){const{result:b}=await(0,s.i)().get(`/api/library-elements/name/${f}`);return b}async function l(f,b){const{result:v}=await(0,s.i)().post("/api/library-elements",{folderUid:b,name:f.libraryPanel.name,model:f,kind:r.V.Panel});return v}async function a(f){const{libraryPanel:b,...v}=f,{uid:y,name:E,version:C,folderUid:u}=b,D=r.V.Panel,{result:P}=await(0,s.i)().patch(`/api/library-elements/${y}`,{folderUid:u,name:E,model:v,version:C,kind:D});return P}function g(f){return(0,s.i)().delete(`/api/library-elements/${f}`)}async function c(f){const{result:b}=await(0,s.i)().get(`/api/library-elements/${f}/connections`);return b}async function h(f){const b=await c(f);return b.length===0?[]:await(0,s.i)().search({dashboardUIDs:b.map(y=>y.connectionUid)})}},41139:(j,I,e)=>{"use strict";e.d(I,{V:()=>t});var t=(i=>(i[i.Panel=1]="Panel",i))(t||{}),n=(i=>(i[i.Dashboard=1]="Dashboard",i))(n||{})},37024:(j,I,e)=>{"use strict";e.d(I,{E:()=>b});var t=e(27702),n=e(58281),i=e(73289),s=e(33877),r=e(65322),m=e(18771),d=e(73807),o=e(75766);function l(v){return(0,d.t_)(v)}function a(v){return(0,d.AT)(v)}async function g(v,y){const E=c(v),C=await f(E,y);return h(v,C),C}function c(v){let{scopedVars:y,...E}=v.getSaveModel();return E={libraryPanel:{name:v.title,uid:void 0},...E},E}function h(v,y){v.restoreModel({...y.model,configRev:0,libraryPanel:y,title:v.title}),v.hasSavedPanelEditChange=!0,v.refresh()}function f(v,y){return v.libraryPanel?v.libraryPanel&&v.libraryPanel.uid===""?(0,o.Kq)(v,y):(0,o.Ob)(v):Promise.reject()}const b=()=>{const v=(0,m.useDispatch)(),[y,E]=(0,n.default)(async(C,u)=>{try{return await g(C,u)}catch(D){throw(0,i.kW)(D)?(D.isHandled=!0,new Error(D.data.message)):D}},[]);return(0,t.useEffect)(()=>{if(y.error){const C=y.error.message;v((0,s.$l)(l((0,r.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:C}))))}y.value&&v((0,s.$l)(a((0,r.t)("library-panels.save.success","Library panel saved"))))},[v,y]),{state:y,saveLibraryPanel:E}}},284:(j,I,e)=>{"use strict";e.d(I,{H:()=>u});var t=e(66117),n=e(81087),i=e(3935),s=e(43685),r=e(26129),m=e(66574),d=e(43620),o=e(75261),l=e(42844),a=e(27702),g=e(66310),c=e(13741),h=e(66670),f=e(80402),b=(D=>(D.Saved="saved",D.EditingStarted="editing-started",D.EditingCanceled="editing-cancelled",D.Deleted="deleted",D))(b||{});function v({onDismiss:D,event:P}){const S=(0,g.wW)(y),x=()=>{if(P?.action===b.Deleted){r.E1.push("/");return}u.reloadPage(),D()};return a.createElement(c.u,{isOpen:!0,title:"Dashboard changed",icon:"copy",onDismiss:D,onClickBackdrop:()=>{},className:S.modal},a.createElement("div",{className:S.description},"The dashboad has been updated by another session. Do you want to continue editing or discard your local changes?"),a.createElement(c.u.ButtonRow,null,a.createElement(h.zx,{onClick:D,variant:"secondary",fill:"outline"},"Continue editing"),a.createElement(h.zx,{onClick:x,variant:"destructive"},"Discard local changes")))}const y=(0,f.B)(D=>({modal:(0,l.css)({width:"600px"}),description:(0,l.css)({color:D.colors.text.secondary,paddingBottom:D.spacing(1)})})),E=(0,t.Z)();class C{constructor(){this.editing=!1,this.observer={next:P=>{if((0,n.se)(P)&&this.editing&&P.state===n.yS.Connected&&this.sendEditingState(),(0,n.RL)(P)){if(P.message.sessionId===E)return;const{action:S}=P.message;switch(S){case b.EditingStarted:case b.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const x=(0,o.h4)().getCurrent();if(x?.uid!==P.message.uid){console.log("dashboard event for different dashboard?",P,x);return}const M=this.editing||x.hasUnsavedChanges();if(S===b.Saved)M?m.h$.publish(new d.Dn({component:v,props:{event:P}})):(m.h$.emit(i.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(M&&S===b.EditingStarted&&!this.hasSeenNotice){const R=P.message,O=this.getRecentEditingEvent();(!O||O.message!==R.message)&&(this.hasSeenNotice=!0,m.h$.emit(i.SI.alertWarning,["Another session is editing this dashboard",R.message])),this.lastEditing=R}return}}}}}}setEditingState(P){const S=this.editing=P;this.editing=P,this.hasSeenNotice=!1,S&&m.contextSrv.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:P,uid:S}=this;P&&S&&(0,s.gj)().publish(P,{sessionId:E,uid:S,action:this.editing?b.EditingStarted:b.EditingCanceled,timestamp:Date.now()})}watch(P){const S=(0,s.gj)();S&&P!==this.uid&&(this.channel={scope:n.z.Grafana,namespace:"dashboard",path:`uid/${P}`},this.leave(),P&&(this.subscription=S.getStream(this.channel).subscribe(this.observer)),this.uid=P)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){r.E1.reload()}}const u=new C},87755:(j,I,e)=>{"use strict";e.d(I,{A1:()=>i,g0:()=>n,iL:()=>m});var t=e(32053),n=(d=>(d.NewValuesSameSchema="NewValuesSameSchema",d.FullFrame="FullFrame",d))(n||{});const i=(d,o)=>"type"in d&&d.type===o,s=Object.values(n),r=d=>"type"in d&&s.includes(d.type),m=d=>(0,t.aY)(d)&&"packetInfo"in d},21932:(j,I,e)=>{"use strict";e.d(I,{j:()=>r});var t=e(42844),n=e(27702),i=e(66310);const s=["level","lvl","filename"],r=({labels:d})=>{const o=(0,i.wW)(m),l=Object.keys(d).filter(a=>!a.startsWith("_")&&!s.includes(a));return l.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},l.sort().map(a=>{const g=d[a];if(!g)return;const c=`${a}: ${g}`;return n.createElement("span",{key:a,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:c},g))}))},m=d=>({logsLabels:(0,t.css)`
      display: flex;
      flex-wrap: wrap;
      font-size: ${d.typography.size.xs};
    `,logsLabel:(0,t.css)`
      label: logs-label;
      display: flex;
      padding: ${d.spacing(0,.25)};
      background-color: ${d.colors.background.secondary};
      border-radius: ${d.shape.borderRadius(1)};
      margin: ${d.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:(0,t.css)`
      label: logs-label__value;
      display: inline-block;
      max-width: ${d.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},62346:(j,I,e)=>{"use strict";e.d(I,{Q:()=>l});var t=e(79690),n=e(27702),i=e(3819),s=e.n(i),r=e(61329),m=e(66310);function d(a,g){return g.split(/;\s*/).reduce((c,h)=>{if(h==="color:rgba(0,0,0,0.5)")return{color:a.colors.text.secondary};const f=h.match(/([^:\s]+)\s*:\s*(.+)/);if(f&&f[1]&&f[2]){const b=f[1].replace(/-([a-z])/g,(v,y)=>y.toUpperCase());c[b]=f[2]}return c},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(g,c){return g.value===c.prevValue?null:{chunks:t.ZP.parse(g.value).spans.map(f=>f.css?{style:d(g.theme,f.css),text:f.text}:{text:f.text}),prevValue:g.value}}render(){const{chunks:g}=this.state;return g.map((c,h)=>{const f=this.props.highlight?.searchWords?n.createElement(s(),{key:h,textToHighlight:c.text,searchWords:this.props.highlight.searchWords,findChunks:r.Xt,highlightClassName:this.props.highlight.highlightClassName}):c.text;return c.style?n.createElement("span",{key:h,style:c.style,"data-testid":"ansiLogLine"},f):f})}}const l=(0,m.HE)(o);l.displayName="LogMessageAnsi"},25666:(j,I,e)=>{"use strict";e.d(I,{t:()=>s});var t=e(27702),n=e(67437),i=e(71585);const s=t.memo(({logText:r,onOpenContext:m,onPermalinkClick:d,onPinLine:o,onUnpinLine:l,pinned:a,row:g,showContextToggle:c,styles:h,mouseIsOver:f})=>{const b=c?c(g):!1,v=(0,t.useCallback)(C=>{C.stopPropagation()},[]),y=(0,t.useCallback)(C=>{C.stopPropagation(),m(g)},[m,g]),E=(0,t.useCallback)(()=>r,[r]);return t.createElement("span",{className:`log-row-menu ${h.rowMenu}`,onClick:v},a&&!f&&t.createElement(n.h,{className:h.unPinButton,size:"md",name:"gf-pin",onClick:()=>l&&l(g),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line"}),f&&t.createElement(t.Fragment,null,b&&t.createElement(n.h,{size:"md",name:"gf-show-context",onClick:y,tooltip:"Show context",tooltipPlacement:"top","aria-label":"Show context"}),t.createElement(i.m,{className:h.copyLogButton,icon:"copy",variant:"secondary",fill:"text",size:"md",getText:E,tooltip:"Copy to clipboard",tooltipPlacement:"top"}),a&&l&&t.createElement(n.h,{className:h.unPinButton,size:"md",name:"gf-pin",onClick:()=>l&&l(g),tooltip:"Unpin line",tooltipPlacement:"top","aria-label":"Unpin line"}),!a&&o&&t.createElement(n.h,{className:h.unPinButton,size:"md",name:"gf-pin",onClick:()=>o&&o(g),tooltip:"Pin line",tooltipPlacement:"top","aria-label":"Pin line"}),d&&g.rowId!==void 0&&g.uid&&t.createElement(n.h,{tooltip:"Copy shortlink","aria-label":"Copy shortlink",tooltipPlacement:"top",size:"md",name:"share-alt",onClick:()=>d(g)})))});s.displayName="LogRowMenuCell"},5686:(j,I,e)=>{"use strict";e.d(I,{n:()=>d,r:()=>a});var t=e(27702),n=e(3819),i=e.n(n),s=e(61329),r=e(62346),m=e(25666);const d=1e5,o=({hasAnsi:g,entry:c,highlights:h,styles:f})=>{const b=h&&h.length>0&&h[0]&&h[0].length>0&&c.length<d,v=h??[];if(g){const y=b?{searchWords:v,highlightClassName:f.logsRowMatchHighLight}:void 0;return t.createElement(r.Q,{value:c,highlight:y})}else if(b)return t.createElement(i(),{textToHighlight:c,searchWords:v,findChunks:s.Xt,highlightClassName:f.logsRowMatchHighLight});return t.createElement(t.Fragment,null,c)},l=(g,c)=>{if(c)try{return JSON.stringify(JSON.parse(g),void 0,2)}catch{return g}return g},a=t.memo(g=>{const{row:c,wrapLogMessage:h,prettifyLogMessage:f,showContextToggle:b,styles:v,onOpenContext:y,onPermalinkClick:E,onUnpinLine:C,onPinLine:u,pinned:D,mouseIsOver:P}=g,{hasAnsi:S,raw:x}=c,M=(0,t.useMemo)(()=>l(x,f),[x,f]),R=(0,t.useMemo)(()=>P||D,[P,D]);return t.createElement(t.Fragment,null,t.createElement("td",{className:v.logsRowMessage},t.createElement("div",{className:h?v.positionRelative:v.horizontalScroll},t.createElement("button",{className:`${v.logLine} ${v.positionRelative}`},t.createElement(o,{hasAnsi:S,entry:M,highlights:c.searchWords,styles:v})))),t.createElement("td",{className:`log-row-menu-cell ${v.logRowMenuCell}`},R&&t.createElement(m.t,{logText:M,row:c,showContextToggle:b,onOpenContext:y,onPermalinkClick:E,onPinLine:u,onUnpinLine:C,pinned:D,styles:v,mouseIsOver:P})))});a.displayName="LogRowMessage"},66236:(j,I,e)=>{"use strict";e.d(I,{w:()=>Q});var t=e(82152),n=e(27702),i=e(64167),s=e(66310);class r{constructor(){this.seen=new Set,this.count=0}getKey(te){this.count+=1;const oe=`k_${te}`;return this.seen.has(oe)?`i_${this.count}`:(this.seen.add(oe),oe)}}var m=e(22833),d=e(42844),o=e(89949),l=e(60956),a=e(86312),g=e(80011),c=e(73453),h=e(34667),f=e(71585),b=e(67437),v=e(73e3),y=e(80402);const E=X=>({logsStatsRow:(0,d.css)`
    label: logs-stats-row;
    margin: ${parseInt(X.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:(0,d.css)`
    label: logs-stats-row--active;
    color: ${X.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:(0,d.css)`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:(0,d.css)`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:(0,d.css)`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${X.spacing(.75)};
  `,logsStatsRowPercent:(0,d.css)`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${X.spacing(.75)};
    width: ${X.spacing(4.5)};
  `,logsStatsRowBar:(0,d.css)`
    label: logs-stats-row__bar;
    height: ${X.spacing(.5)};
    overflow: hidden;
    background: ${X.colors.text.disabled};
  `,logsStatsRowInnerBar:(0,d.css)`
    label: logs-stats-row__innerbar;
    height: ${X.spacing(.5)};
    overflow: hidden;
    background: ${X.colors.primary.main};
  `}),C=({active:X,count:te,proportion:oe,value:Z})=>{const le=(0,s.wW)(E),ce=`${Math.round(oe*100)}%`,q={width:ce},ne=X?(0,d.cx)([le.logsStatsRow,le.logsStatsRowActive]):(0,d.cx)([le.logsStatsRow]);return n.createElement("div",{className:ne},n.createElement("div",{className:(0,d.cx)([le.logsStatsRowLabel])},n.createElement("div",{className:(0,d.cx)([le.logsStatsRowValue]),title:Z},Z),n.createElement("div",{className:(0,d.cx)([le.logsStatsRowCount])},te),n.createElement("div",{className:(0,d.cx)([le.logsStatsRowPercent])},ce)),n.createElement("div",{className:(0,d.cx)([le.logsStatsRowBar])},n.createElement("div",{className:(0,d.cx)([le.logsStatsRowInnerBar]),style:q})))};C.displayName="LogLabelStatsRow";const u=5,D=(0,y.B)(X=>({logsStats:(0,d.css)`
      label: logs-stats;
      background: inherit;
      color: ${X.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:(0,d.css)`
      label: logs-stats__header;
      border-bottom: 1px solid ${X.colors.border.medium};
      display: flex;
    `,logsStatsTitle:(0,d.css)`
      label: logs-stats__title;
      font-weight: ${X.typography.fontWeightMedium};
      padding-right: ${X.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:(0,d.css)`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:(0,d.css)`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class P extends n.PureComponent{render(){const{label:te,rowCount:oe,stats:Z,value:le,theme:ce,isLabel:q}=this.props,ne=D(ce),pe=Z.slice(0,u);let re=pe.find(_e=>_e.value===le),ie=Z.slice(u);const Se=!re;Se&&(re=ie.find(_e=>_e.value===le),ie=ie.filter(_e=>_e.value!==le));const ye=ie.reduce((_e,Je)=>_e+Je.count,0),de=pe.reduce((_e,Je)=>_e+Je.count,0)+ye,we=ye/de;return n.createElement("div",{className:ne.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:ne.logsStatsHeader},n.createElement("div",{className:ne.logsStatsTitle},te,": ",de," of ",oe," rows have that ",q?"label":"field")),n.createElement("div",{className:ne.logsStatsBody},pe.map(_e=>n.createElement(C,{key:_e.value,..._e,active:_e.value===le})),Se&&re&&n.createElement(C,{key:re.value,...re,active:!0}),ye>0&&n.createElement(C,{key:"__OTHERS__",count:ye,value:"Other",proportion:we})))}}const S=(0,s.HE)(P);S.displayName="LogLabelStats";var x=e(79645);const M=(0,t.Z)(X=>({wordBreakAll:(0,d.css)`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:(0,d.css)`
      & > button {
        color: ${X.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: ${X.shape.radius.circle};
        height: ${X.spacing(X.components.height.sm)};
        width: ${X.spacing(X.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${X.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:(0,d.css)`
      margin-left: ${X.spacing(1)};
    `,wrapLine:(0,d.css)`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:(0,d.css)`
      padding: 0 ${X.spacing(1)};
    `,logDetailsValue:(0,d.css)`
      display: flex;
      align-items: center;
      line-height: 22px;

      .show-on-hover {
        display: inline;
        visibility: hidden;
      }
      &:hover {
        .show-on-hover {
          visibility: visible;
        }
      }
    `,buttonRow:(0,d.css)`
      display: flex;
      flex-direction: row;
      gap: ${X.spacing(.5)};
      margin-left: ${X.spacing(.5)};
    `}));class R extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:te,parsedKeys:oe,row:Z}=this.props;te&&te(oe[0]),(0,a.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:Z.datasourceType,logRowUid:Z.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:te,parsedKeys:oe,row:Z}=this.props;te&&te(oe[0]),(0,a.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:Z.datasourceType,logRowUid:Z.uid,type:"disable"})},this.isFilterLabelActive=async()=>{const{isFilterLabelActive:te,parsedKeys:oe,parsedValues:Z}=this.props;return te?await te(oe[0],Z[0]):!1},this.filterLabel=()=>{const{onClickFilterLabel:te,parsedKeys:oe,parsedValues:Z,row:le}=this.props;te&&te(oe[0],Z[0]),(0,a.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:le.datasourceType,filterType:"include",logRowUid:le.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:te,parsedKeys:oe,parsedValues:Z,row:le}=this.props;te&&te(oe[0],Z[0]),(0,a.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:le.datasourceType,filterType:"exclude",logRowUid:le.uid})},this.updateStats=()=>{const{getStats:te}=this.props,oe=te(),Z=oe?oe.reduce((le,ce)=>le+ce.count,0):0;(!(0,o.isEqual)(this.state.fieldStats,oe)||Z!==this.state.fieldCount)&&this.setState({fieldStats:oe,fieldCount:Z})},this.showStats=()=>{const{isLabel:te,row:oe,app:Z}=this.props,{showFieldsStats:le}=this.state;le||this.updateStats(),this.toggleFieldsStats(),(0,a.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:oe.datasourceType,fieldType:te?"label":"detectedField",type:le?"close":"open",logRowUid:oe.uid,app:Z})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(te=>({showFieldsStats:!te.showFieldsStats}))}generateClipboardButton(te){const{theme:oe}=this.props,Z=M(oe);return n.createElement("div",{className:(0,d.cx)("show-on-hover",Z.copyButton)},n.createElement(f.m,{getText:()=>te,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(te,oe){return n.createElement("table",null,n.createElement("tbody",null,te?.map((Z,le)=>n.createElement("tr",{key:`${Z}-${le}`},n.createElement("td",null,Z,oe&&Z!==""&&this.generateClipboardButton(Z))))))}render(){const{theme:te,parsedKeys:oe,parsedValues:Z,isLabel:le,links:ce,displayedFields:q,wrapLogMessage:ne,onClickFilterLabel:pe,onClickFilterOutLabel:re,disableActions:ie}=this.props,{showFieldsStats:Se,fieldStats:ye,fieldCount:Ce}=this.state,de=M(te),we=(0,x.h)(te),_e=oe==null?!1:oe.length===1,Je=Z==null?!1:Z.length===1,Ue=!ie&&pe&&re,$e=!Je&&Z!=null&&!Z.every(tt=>tt===""),Qe=q&&oe!=null&&q.includes(oe[0])?n.createElement(b.h,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):n.createElement(b.h,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return n.createElement(n.Fragment,null,n.createElement("tr",{className:(0,d.cx)(we.logDetailsValue)},n.createElement("td",{className:we.logsDetailsIcon},n.createElement("div",{className:de.buttonRow},Ue&&n.createElement(n.Fragment,null,h.config.featureToggles.toggleLabelsInLogsUI&&n.createElement(O,{name:"search-plus",onClick:this.filterLabel,isActive:this.isFilterLabelActive}),!h.config.featureToggles.toggleLabelsInLogsUI&&n.createElement(b.h,{name:"search-plus",onClick:this.filterLabel,tooltip:"Filter for value"}),n.createElement(b.h,{name:"search-minus",tooltip:"Filter out value",onClick:this.filterOutLabel})),!ie&&q&&Qe,!ie&&n.createElement(b.h,{variant:Se?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!_e,onClick:this.showStats}))),n.createElement("td",{className:we.logDetailsLabel},_e?oe[0]:this.generateMultiVal(oe)),n.createElement("td",{className:(0,d.cx)(de.wordBreakAll,ne&&de.wrapLine)},n.createElement("div",{className:de.logDetailsValue},Je?Z[0]:this.generateMultiVal(Z,!0),Je&&this.generateClipboardButton(Z[0]),n.createElement("div",{className:(0,d.cx)((Je||$e)&&de.adjoiningLinkButton)},ce?.map((tt,lt)=>n.createElement("span",{key:`${tt.title}-${lt}`},n.createElement(v.k,{link:tt}))))))),Se&&_e&&Je&&n.createElement("tr",null,n.createElement("td",null,n.createElement(b.h,{variant:Se?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),n.createElement("td",{colSpan:2},n.createElement("div",{className:de.logDetailsStats},n.createElement(S,{stats:ye,label:oe[0],value:Z[0],rowCount:Ce,isLabel:le})))))}}const O=({isActive:X,...te})=>{const[oe,Z]=(0,n.useState)(!1);return X().then(Z),n.createElement(b.h,{...te,variant:oe?"primary":void 0,tooltip:oe?"Remove filter":"Filter for value"})},T=(0,s.HE)(R);T.displayName="LogDetailsRow";var U=e(32871);class L extends n.PureComponent{render(){const{app:te,row:oe,theme:Z,hasError:le,onClickFilterOutLabel:ce,onClickFilterLabel:q,getRows:ne,showDuplicates:pe,className:re,onClickShowField:ie,onClickHideField:Se,displayedFields:ye,getFieldLinks:Ce,wrapLogMessage:de,styles:we}=this.props,_e=(0,x.p)(Z,oe.logLevel),Je=oe.labels?oe.labels:{},Ue=Object.keys(Je).length>0,$e=(0,U.YD)(oe,Ce);let Qe=$e.filter(dt=>dt.links?.length);const tt=Qe.filter(dt=>dt.fieldIndex!==oe.entryFieldIndex).sort(),lt=Qe.filter(dt=>dt.fieldIndex===oe.entryFieldIndex).sort(),Me=(0,U.DC)(lt),De=$e.filter(dt=>dt.links?.length===0&&dt.fieldIndex!==oe.entryFieldIndex).sort(),We=De&&De.length>0,qe=tt&&tt.length>0||Me&&Me.length>0,st=le?"":`${_e.logsRowLevelColor} ${we.logsRowLevel} ${we.logsRowLevelDetails}`;return n.createElement("tr",{className:(0,d.cx)(re,we.logDetails)},pe&&n.createElement("td",null),n.createElement("td",{className:st,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:we.logDetailsContainer},n.createElement("table",{className:we.logDetailsTable},n.createElement("tbody",null,(Ue||We)&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:we.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(Je).sort().map((dt,Tt)=>{const Nt=Je[dt];return n.createElement(T,{key:`${dt}=${Nt}-${Tt}`,parsedKeys:[dt],parsedValues:[Nt],isLabel:!0,getStats:()=>(0,m.lL)(ne(),dt),onClickFilterOutLabel:ce,onClickFilterLabel:q,onClickShowField:ie,onClickHideField:Se,row:oe,app:te,wrapLogMessage:de,displayedFields:ye,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),De.map((dt,Tt)=>{const{keys:Nt,values:Bt,fieldIndex:yt}=dt;return n.createElement(T,{key:`${Nt[0]}=${Bt[0]}-${Tt}`,parsedKeys:Nt,parsedValues:Bt,onClickShowField:ie,onClickHideField:Se,onClickFilterOutLabel:ce,onClickFilterLabel:q,getStats:()=>(0,m.i6)(oe.dataFrame.fields[yt].values),displayedFields:ye,wrapLogMessage:de,row:oe,app:te,disableActions:!1,isFilterLabelActive:this.props.isFilterLabelActive})}),qe&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:we.logDetailsHeading,"aria-label":"Data Links"},"Links")),tt.map((dt,Tt)=>{const{keys:Nt,values:Bt,links:yt,fieldIndex:ft}=dt;return n.createElement(T,{key:`${Nt[0]}=${Bt[0]}-${Tt}`,parsedKeys:Nt,parsedValues:Bt,links:yt,onClickShowField:ie,onClickHideField:Se,getStats:()=>(0,m.i6)(oe.dataFrame.fields[ft].values),displayedFields:ye,wrapLogMessage:de,row:oe,app:te,disableActions:!1})}),Me?.map((dt,Tt)=>{const{keys:Nt,values:Bt,links:yt,fieldIndex:ft}=dt;return n.createElement(T,{key:`${Nt[0]}=${Bt[0]}-${Tt}`,parsedKeys:Nt,parsedValues:Bt,links:yt,onClickShowField:ie,onClickHideField:Se,getStats:()=>(0,m.i6)(oe.dataFrame.fields[ft].values),displayedFields:ye,wrapLogMessage:de,row:oe,app:te,disableActions:!0})}),!We&&!Ue&&!qe&&n.createElement("tr",null,n.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const V=(0,s.HE)(L);V.displayName="LogDetails";var w=e(21932),K=e(5686),B=e(25666);const W=n.memo(X=>{const{row:te,detectedFields:oe,getFieldLinks:Z,wrapLogMessage:le,styles:ce,mouseIsOver:q,pinned:ne,...pe}=X,re=(0,U.YD)(te,Z),ie=le?"":_.noWrap,Se=(0,n.useMemo)(()=>oe.map(Ce=>{const de=re.find(we=>{const{keys:_e}=we;return _e[0]===Ce});return de!=null?`${Ce}=${de.values}`:te.labels[Ce]!==void 0&&te.labels[Ce]!==null?`${Ce}=${te.labels[Ce]}`:null}).filter(Ce=>Ce!==null).join(" "),[oe,re,te.labels]),ye=(0,n.useMemo)(()=>q||ne,[q,ne]);return n.createElement(n.Fragment,null,n.createElement("td",{className:ce.logsRowMessage},n.createElement("div",{className:ie},Se)),n.createElement("td",{className:`log-row-menu-cell ${ce.logRowMenuCell}`},ye&&n.createElement(B.t,{logText:Se,row:te,styles:ce,pinned:ne,...pe,mouseIsOver:q})))}),_={noWrap:(0,d.css)`
    white-space: nowrap;
  `};W.displayName="LogRowMessageDisplayedFields";class k extends n.PureComponent{constructor(te){super(te),this.state={highlightBackround:!1,showDetails:!1,mouseIsOver:!1},this.debouncedContextClose=(0,o.debounce)(()=>{this.setState({highlightBackround:!1})},3e3),this.onOpenContext=oe=>{this.setState({highlightBackround:!0}),this.props.onOpenContext(oe,this.debouncedContextClose)},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,a.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(oe=>({showDetails:!oe.showDetails})))},this.onMouseEnter=()=>{this.setState({mouseIsOver:!0}),this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseLeave=()=>{this.setState({mouseIsOver:!1}),this.props.onLogRowHover&&this.props.onLogRowHover(void 0)},this.scrollToLogRow=(oe,Z=!1)=>{const{row:le,permalinkedRowId:ce,scrollIntoView:q}=this.props;if(ce!==le.uid){(oe.highlightBackround||Z)&&this.setState({highlightBackround:!1});return}this.state.highlightBackround||(this.logLineRef.current&&q&&q(this.logLineRef.current),(0,a.ff)("grafana_explore_logs_permalink_opened",{datasourceType:le.datasourceType??"unknown",logRowUid:le.uid}),this.setState({highlightBackround:!0}))},this.logLineRef=n.createRef()}renderTimeStamp(te){return(0,l.dq)(te,{timeZone:this.props.timeZone,defaultWithMS:!0})}componentDidMount(){this.scrollToLogRow(this.state,!0)}componentDidUpdate(te,oe){this.scrollToLogRow(oe)}render(){const{getRows:te,onClickFilterLabel:oe,onClickFilterOutLabel:Z,onClickShowField:le,onClickHideField:ce,enableLogDetails:q,row:ne,showDuplicates:pe,showContextToggle:re,showLabels:ie,showTime:Se,displayedFields:ye,wrapLogMessage:Ce,prettifyLogMessage:de,theme:we,getFieldLinks:_e,forceEscape:Je,app:Ue,styles:$e}=this.props,{showDetails:Qe,highlightBackround:tt}=this.state,lt=(0,x.p)(we,ne.logLevel),{errorMessage:Me,hasError:De}=(0,m.Mi)(ne),We=(0,d.cx)($e.logsRow,{[$e.errorLogRow]:De,[$e.highlightBackground]:tt}),qe=(0,d.cx)($e.logsRow,{[$e.errorLogRow]:De,[$e.highlightBackground]:tt&&!this.state.showDetails}),st=ne.hasUnescapedContent&&Je?{...ne,entry:(0,m.l3)(ne.entry),raw:(0,m.l3)(ne.raw)}:ne;return n.createElement(n.Fragment,null,n.createElement("tr",{ref:this.logLineRef,className:We,onClick:this.toggleDetails,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},pe&&n.createElement("td",{className:$e.logsRowDuplicates},st.duplicates&&st.duplicates>0?`${st.duplicates+1}x`:null),n.createElement("td",{className:De?"":`${lt.logsRowLevelColor} ${$e.logsRowLevel}`},De&&n.createElement(g.u,{content:`Error: ${Me}`,placement:"right",theme:"error"},n.createElement(c.J,{className:$e.logIconError,name:"exclamation-triangle",size:"xs"}))),q&&n.createElement("td",{title:Qe?"Hide log details":"See log details",className:$e.logsRowToggleDetails},n.createElement(c.J,{className:$e.topVerticalAlign,name:Qe?"angle-down":"angle-right"})),Se&&n.createElement("td",{className:$e.logsRowLocalTime},this.renderTimeStamp(ne.timeEpochMs)),ie&&st.uniqueLabels&&n.createElement("td",{className:$e.logsRowLabels},n.createElement(w.j,{labels:st.uniqueLabels})),ye&&ye.length>0?n.createElement(W,{row:st,showContextToggle:re,detectedFields:ye,getFieldLinks:_e,wrapLogMessage:Ce,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,styles:$e,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver}):n.createElement(K.r,{row:st,showContextToggle:re,wrapLogMessage:Ce,prettifyLogMessage:de,onOpenContext:this.onOpenContext,onPermalinkClick:this.props.onPermalinkClick,app:Ue,styles:$e,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinned,mouseIsOver:this.state.mouseIsOver})),this.state.showDetails&&n.createElement(V,{className:qe,showDuplicates:pe,getFieldLinks:_e,onClickFilterLabel:oe,onClickFilterOutLabel:Z,onClickShowField:le,onClickHideField:ce,getRows:te,row:st,wrapLogMessage:Ce,hasError:De,displayedFields:ye,app:Ue,styles:$e,isFilterLabelActive:this.props.isFilterLabelActive}))}}const A=(0,s.HE)(k);A.displayName="LogRow";const z=100;class H extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.openContext=(te,oe)=>{this.props.onOpenContext&&this.props.onOpenContext(te,oe)},this.makeGetRows=(0,t.Z)(te=>()=>te),this.sortLogs=(0,t.Z)((te,oe)=>(0,m.$u)(te,oe))}componentDidMount(){const{logRows:te,previewLimit:oe}=this.props,le=(te?te.length:0)<=oe*2;le?this.setState({renderAll:le}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{deduplicatedRows:te,logRows:oe,dedupStrategy:Z,theme:le,logsSortOrder:ce,previewLimit:q,...ne}=this.props,{renderAll:pe}=this.state,re=(0,x.h)(le),ie=te||oe,Se=oe&&oe.length>0,ye=ie?ie.reduce((Qe,tt)=>tt.duplicates?Qe+tt.duplicates:Qe,0):0,Ce=Z!==i.Y4.none&&ye>0,de=ie||[],we=ce?this.sortLogs(de,ce):de,_e=we.slice(0,q),Je=we.slice(q,we.length),Ue=this.makeGetRows(we),$e=new r;return n.createElement("table",{className:re.logsRowsTable},n.createElement("tbody",null,Se&&_e.map(Qe=>n.createElement(A,{key:$e.getKey(Qe.uid),getRows:Ue,row:Qe,showDuplicates:Ce,logsSortOrder:ce,onOpenContext:this.openContext,styles:re,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Qe.uid,isFilterLabelActive:this.props.isFilterLabelActive,...ne})),Se&&pe&&Je.map(Qe=>n.createElement(A,{key:$e.getKey(Qe.uid),getRows:Ue,row:Qe,showDuplicates:Ce,logsSortOrder:ce,onOpenContext:this.openContext,styles:re,onPermalinkClick:this.props.onPermalinkClick,scrollIntoView:this.props.scrollIntoView,permalinkedRowId:this.props.permalinkedRowId,onPinLine:this.props.onPinLine,onUnpinLine:this.props.onUnpinLine,pinned:this.props.pinnedRowId===Qe.uid,isFilterLabelActive:this.props.isFilterLabelActive,...ne})),Se&&!pe&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",we.length-q," rows..."))))}}H.defaultProps={previewLimit:z};const Q=(0,s.HE)(H);Q.displayName="LogsRows"},79645:(j,I,e)=>{"use strict";e.d(I,{h:()=>l,p:()=>o});var t=e(42844),n=e(82152),i=e(71685),s=e(51451),r=e(96750),m=e(34667),d=e(97289);const o=(a,g)=>{let c=a.isLight?a.v1.palette.gray5:a.v1.palette.gray2;switch(g){case s.in.crit:case s.in.critical:c="#705da0";break;case s.in.error:case s.in.err:c="#e24d42";break;case s.in.warning:case s.in.warn:c=a.colors.warning.main;break;case s.in.info:c="#7eb26d";break;case s.in.debug:c="#1f78c1";break;case s.in.trace:c="#6ed0e0";break}return{logsRowLevelColor:(0,t.css)`
      &::after {
        background-color: ${c};
      }
    `}},l=(0,n.Z)(a=>{const g=d.hoverColor(a.colors.background.secondary,a),c=(0,i.Z)(a.components.dashboard.background).setAlpha(.7).toRgbString(),h=m.config.featureToggles.exploreScrollableLogsContainer;return{logsRowLevel:(0,t.css)`
      label: logs-row__level;
      max-width: ${a.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${a.spacing(.5)};
      }
    `,logsRowMatchHighLight:(0,t.css)`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${a.components.textHighlight.text}
      background-color: ${a.components.textHighlight};
    `,logsRowsTable:(0,t.css)`
      label: logs-rows;
      font-family: ${a.typography.fontFamilyMonospace};
      font-size: ${a.typography.bodySmall.fontSize};
      width: 100%;
      ${!h&&`margin-bottom: ${a.spacing(2.25)};`}
    `,highlightBackground:(0,t.css)`
      background-color: ${(0,i.Z)(a.colors.info.transparent).setAlpha(.25).toString()};
    `,logsRow:(0,t.css)`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          z-index: 1;
        }

        background: ${g};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${a.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:(0,t.css)`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:(0,t.css)`
      color: ${a.colors.warning.main};
    `,logsRowToggleDetails:(0,t.css)`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:(0,t.css)`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:(0,t.css)`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:(0,t.css)`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,copyLogButton:(0,t.css)`
      padding: 0 0 0 ${a.spacing(.5)};
      height: ${a.spacing(3)};
      width: ${a.spacing(3.25)};
      line-height: ${a.spacing(2.5)};
      overflow: hidden;
      &:hover {
          background-color: ${r.alpha(a.colors.text.primary,.12)};
        }
      }
    `,logDetailsContainer:(0,t.css)`
      label: logs-row-details-table;
      border: 1px solid ${a.colors.border.medium};
      padding: 0 ${a.spacing(1)} ${a.spacing(1)};
      border-radius: ${a.shape.radius.default};
      margin: ${a.spacing(2.5)} ${a.spacing(1)} ${a.spacing(2.5)} ${a.spacing(2)};
      cursor: default;
    `,logDetailsTable:(0,t.css)`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:(0,t.css)`
      label: logs-row-details__icon;
      position: relative;
      color: ${a.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${a.spacing(.75)};
    `,logDetailsLabel:(0,t.css)`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${a.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:(0,t.css)`
      label: logs-row-details__heading;
      font-weight: ${a.typography.fontWeightBold};
      padding: ${a.spacing(1)} 0 ${a.spacing(.5)};
    `,logDetailsValue:(0,t.css)`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${g};
      }
    `,topVerticalAlign:(0,t.css)`
      label: topVerticalAlign;
      margin-top: -${a.spacing(.9)};
      margin-left: -${a.spacing(.25)};
    `,detailsOpen:(0,t.css)`
      &:hover {
        background-color: ${d.hoverColor(a.colors.background.primary,a)};
      }
    `,errorLogRow:(0,t.css)`
      label: erroredLogRow;
      color: ${a.colors.text.secondary};
    `,positionRelative:(0,t.css)`
      label: positionRelative;
      position: relative;
    `,rowWithContext:(0,t.css)`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${c};
      display: inherit;
    `,horizontalScroll:(0,t.css)`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:(0,t.css)`
      display: block;
      margin-left: 0px;
    `,rowMenu:(0,t.css)`
      label: rowMenu;
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      background: ${a.colors.background.primary};
      box-shadow: ${a.shadows.z3};
      padding: ${a.spacing(.5,1,.5,1)};
      z-index: 100;
      gap: ${a.spacing(.5)};

      & > button {
        margin: 0;
      }
    `,logRowMenuCell:(0,t.css)`
      position: sticky;
      z-index: ${a.zIndex.dropdown};
      margin-top: -${a.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:(0,t.css)`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${a.typography.fontFamilyMonospace};
      font-size: ${a.typography.bodySmall.fontSize};
      letter-spacing: ${a.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:(0,t.css)`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:(0,t.css)`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${a.colors.background.primary};
      }
    `,visibleRowMenu:(0,t.css)`
      label: visibleRowMenu;
      aspect-ratio: 1/1;
      z-index: 90;
    `,linkButton:(0,t.css)`
      label: linkButton;
      > button {
        padding-top: ${a.spacing(.5)};
      }
    `,hidden:(0,t.css)`
      label: hidden;
      visibility: hidden;
    `,unPinButton:(0,t.css)`
      height: ${a.spacing(3)};
      line-height: ${a.spacing(2.5)};
    `}})},32871:(j,I,e)=>{"use strict";e.d(I,{B2:()=>o,DC:()=>d,YD:()=>m,i2:()=>a});var t=e(89949),n=e.n(t),i=e(82152),s=e(89024),r=e(14237);const m=(0,i.Z)((g,c)=>{const h=o(g,c);return Object.values(h)}),d=(0,i.Z)(g=>{let c=[];return g.forEach(h=>{h.links?.forEach(f=>{if(f.variables){const b=f.variables.map(y=>{const E=y.variableName,C=y.fieldPath?`.${y.fieldPath}`:"";return`${E}${C}`}),v=f.variables.map(y=>y.found?y.value:"");c.push({keys:b,values:v,links:[f],fieldIndex:h.fieldIndex})}})}),c}),o=(0,i.Z)((g,c)=>a(g.dataFrame).visible.filter(b=>b.values[g.rowIndex]!=null).map(b=>{const v=c?c(b,g.rowIndex,g.dataFrame):[],y=b.values[g.rowIndex],E=typeof y=="string"||typeof y=="number"?y.toString():(0,s.Xh)(y);return{keys:[b.name],values:[E],links:v,fieldIndex:b.index}}));function l(g,c){const h=(0,r.L)(g);if(h===null)return new Set;const f=new Set(h.extraFields.map(b=>b.index));return h.severityField!==null&&f.add(h.severityField.index),c.keepBody&&f.add(h.bodyField.index),c.keepTimestamp&&f.add(h.timeField.index),f}function a(g,c){const h=g.fields.map((y,E)=>({...y,index:E})),f=l(g,c??{}),[b,v]=(0,t.partition)(h,y=>y.config.custom?.hidden?!1:(y.config.links??[]).length>0?!0:f.has(y.index));return{visible:b,hidden:v}}},14237:(j,I,e)=>{"use strict";e.d(I,{L:()=>b});var t=e(31832),n=e(29241),i=e(43987);function s(v,y){const E=v.labels;if(E!==void 0){const C=new Array(y);return C.fill(E),C}else return null}function r(v,y,E){if(E.meta?.custom?.frameType==="LabeledTimeValues"){const C=v.getFieldByName("labels");return C===void 0?[null,()=>null]:[C,()=>C.values]}else return[null,()=>s(y,E.length)]}function m(v){const y=new t.N(v),E=y.getFields(n.fS.time)[0],C=y.getFields(n.fS.string)[0];if(E===void 0||C===void 0)return null;const u=y.getFieldByName("tsNs")??null,D=y.getFieldByName("level")??null,P=y.getFieldByName("id")??null,[S,x]=r(y,C,v),M=y.fields.filter((R,O)=>O!==E.index&&O!==C.index&&O!==u?.index&&O!==D?.index&&O!==P?.index&&O!==S?.index);return{timeField:E,bodyField:C,timeNanosecondField:u,severityField:D,idField:P,getAttributes:x,getAttributesAsLabels:x,extraFields:M}}function d(v,y,E){const C=v.getFieldByName(y);if(C!==void 0)return C.type===E?C:void 0}const o="timestamp",l="body",a="severity",g="id",c="attributes";function h(v){const y={};return Object.entries(v).forEach(([E,C])=>{y[E]=typeof C=="string"?C:JSON.stringify(C)}),y}function f(v){const y=new t.N(v),E=d(y,o,n.fS.time),C=d(y,l,n.fS.string);if(E===void 0||C===void 0)return null;const u=d(y,a,n.fS.string)??null,D=d(y,g,n.fS.string)??null,P=d(y,c,n.fS.other)??null,S=P===null?null:P.values,x=y.fields.filter((M,R)=>R!==E.index&&R!==C.index&&R!==u?.index&&R!==D?.index&&R!==P?.index);return{timeField:E,bodyField:C,severityField:u,idField:D,getAttributes:()=>S,timeNanosecondField:null,getAttributesAsLabels:()=>S!==null?S.map(h):null,extraFields:x}}function b(v){return v.meta?.type===i.P.LogLines?f(v):m(v)}},30209:(j,I,e)=>{"use strict";e.d(I,{Qp:()=>M,aB:()=>A,UW:()=>B,nu:()=>W,Nw:()=>_,Ce:()=>ce,Bz:()=>le});var t=e(89949),n=e(48592),i=e(7536),s=e(91053),r=e(51451),m=e(64167),d=e(32053),o=e(31832),l=e(29241),a=e(93666),g=e(99633),c=e(14951),h=e(48154),f=e(60956),b=e(76305),v=e(53933),y=e(51455),E=e(5354),C=e(79690),u=e(12308);function D(ne,pe){return u.default.bootData.user.lightTheme?pe:ne}var P=e(14237),S=e(22833);const x="Line limit",M="Common labels",R={[r.in.critical]:E.O9[7],[r.in.warning]:E.O9[1],[r.in.error]:E.O9[4],[r.in.info]:E.O9[0],[r.in.debug]:E.O9[5],[r.in.trace]:E.O9[2],[r.in.unknown]:D("#8e8e8e","#bdc4cd")},O=1,T=1e3*O,U=60*T,L=60*U,V=24*L,w=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function K(ne,pe,re){switch(re){case m.Y4.exact:return ne.entry.replace(w,"")===pe.entry.replace(w,"");case m.Y4.numbers:return ne.entry.replace(/\d/g,"")===pe.entry.replace(/\d/g,"");case m.Y4.signature:return ne.entry.replace(/\w/g,"")===pe.entry.replace(/\w/g,"");default:return!1}}function B(ne,pe){return pe===m.Y4.none?ne:ne.reduce((re,ie,Se)=>{const ye={...ie},Ce=re[re.length-1];return Se>0&&K(ie,Ce,pe)?Ce.duplicates++:(ye.duplicates=0,re.push(ye)),re},[])}function W(ne,pe){return pe.size===0?ne:ne.filter(re=>!pe.has(re.logLevel))}function _(ne,pe){const re={},ie=[];for(const Se of ne){let ye=re[Se.logLevel];ye||(re[Se.logLevel]=ye={lastTs:null,datapoints:[],target:Se.logLevel,color:R[Se.logLevel]},ie.push(ye));const Ce=Math.floor(Se.timeEpochMs/pe)*pe;Ce===ye.lastTs?ye.datapoints[ye.datapoints.length-1][0]++:(ye.datapoints.push([1,Ce]),ye.lastTs=Ce);for(const de of ie)de!==ye&&de.lastTs!==Ce&&(de.datapoints.push([0,Ce]),de.lastTs=Ce)}return ie.map((Se,ye)=>{Se.datapoints.sort((_e,Je)=>_e[1]-Je[1]);const Ce=(0,d.g0)(Se),we=new o.N(Ce).getFirstFieldOfType(l.fS.number);return Ce.fields[we.index].config.min=0,Ce.fields[we.index].config.decimals=0,Ce.fields[we.index].config.color={mode:a.S.Fixed,fixedColor:Se.color},Ce.fields[we.index].config.custom={drawStyle:m.l8.Bars,barAlignment:m.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:Se.color,pointColor:Se.color,fillColor:Se.color,lineWidth:0,fillOpacity:100,stacking:{mode:m.o0.Normal,group:"A"}},Ce})}function k(ne){return ne.fields.some(pe=>pe.type===l.fS.time)&&ne.fields.some(pe=>pe.type===l.fS.string)}function A(ne,pe,re,ie){const{logSeries:Se}=H(ne),ye=X(Se,ie);if(ye){if(pe&&ye.rows.length>0){const Ce=ye.rows.sort(S.DA),{visibleRange:de,bucketSize:we,visibleRangeMs:_e,requestedRangeMs:Je}=z(Ce,pe,re);ye.visibleRange=de,ye.bucketSize=we,ye.series=_(Ce,we),ye.meta&&(ye.meta=te(ye,_e,Je))}else ye.series=[];return ye.queries=ie,ye}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:ie}}function z(ne,pe,re,ie=20,Se=1e3){let ye=re,Ce=pe,de=Math.max(Ce*ie,Se),we,_e;if(re){const Je=ne[0].timeEpochMs;if(_e=re.to-re.from,we=re.to-Je,we>0){const Ue=we/_e;Ce*=Ue,de=Math.max(Math.ceil(Ce*ie),Se),ye={from:Math.floor(Je/de)*de,to:re.to}}else we=1}return{bucketSize:de,visibleRange:ye,visibleRangeMs:we,requestedRangeMs:_e}}function H(ne){const pe=[],re=[];for(const ie of ne){if(k(ie)||!ie.fields.length){re.push(ie);continue}ie.length>0&&pe.push(ie)}return{logSeries:re,metricSeries:pe}}function Q(ne,pe,re){const ie=ne.values[re],ye=(0,g.zh)(ie).valueOf();if(pe)return{ts:ie,timeEpochMs:ye,timeEpochNs:pe.values[re]};if(ne.nanos!==void 0){const Ce=ne.nanos[re].toString().padStart(6,"0"),de=`${ye}${Ce}`;return{ts:ie,timeEpochMs:ye,timeEpochNs:de}}return{ts:ie,timeEpochMs:ye,timeEpochNs:ye+"000000"}}function X(ne,pe=[]){if(ne.length===0)return;const re=[];let ie=[];const Se=ne.filter(Me=>Me.fields.length);Se.length&&Se.forEach(Me=>{const De=(0,P.L)(Me);if(De!=null){const We=De.getAttributesAsLabels()??void 0,qe={rawFrame:Me,logsFrame:De,frameLabels:We};ie.push(qe),We&&We.length>0&&re.push(We)}});const ye=re.flat(),Ce=ye.length>0?(0,c.FT)(ye):{},de=[];let we=!1;for(const Me of ie){const{logsFrame:De,rawFrame:We,frameLabels:qe}=Me,{timeField:st,timeNanosecondField:dt,bodyField:Tt,severityField:Nt,idField:Bt}=De;for(let yt=0;yt<We.length;yt++){const{ts:ft,timeEpochMs:ct,timeEpochNs:ge}=Q(st,dt??void 0,yt),Be=Tt.values[yt]??"",Le=typeof Be=="string"?Be:JSON.stringify(Be),he=h.QX.hasAnsiCodes(Le),He=!!Le.match(/\\n|\\t|\\r/),Pe=We.meta?.custom?.searchWords??We.meta?.searchWords??[],Ie=he?C._J.strip(Le):Le,Te=qe?.[yt],Re=(0,c.IU)(Te,Ce);Object.keys(Re).length>0&&(we=!0);let ue=r.in.unknown;const xe=Nt&&Nt.values[yt]||Te&&Te.level;xe?ue=(0,S.jx)(xe):ue=(0,S.ZO)(Ie);const Ve=pe.find(fe=>fe.refId===We.refId)?.datasource?.type,Ne={entryFieldIndex:Tt.index,rowIndex:yt,dataFrame:We,logLevel:ue,timeFromNow:(0,f.E8)(ft),timeEpochMs:ct,timeEpochNs:ge,timeLocal:(0,f.dq)(ft,{timeZone:"browser"}),timeUtc:(0,f.dq)(ft,{timeZone:"utc"}),uniqueLabels:Re,hasAnsi:he,hasUnescapedContent:He,searchWords:Pe,entry:Ie,raw:Le,labels:Te||{},uid:`${We.refId}_${Bt?Bt.values[yt]:yt.toString()}`,datasourceType:Ve};Bt!==null&&(Ne.rowId=Bt.values[yt]),de.push(Ne)}}const _e=[];(0,t.size)(Ce)>0&&_e.push({label:M,value:Ce,kind:r.Ku.LabelsMap});const Ue=ne.filter(Me=>Me?.meta?.custom?.limit??Me?.meta?.limit).reduce((Me,De)=>(Me[De.refId??""]=De.meta?.custom?.limit??De.meta?.limit??0,Me),{}),$e=Object.values(Ue).reduce((Me,De)=>Me+=De,0);$e>0&&_e.push({label:x,value:$e,kind:r.Ku.Number});let Qe=0;const tt={};let lt=!1;for(const Me of ne){const De=Me.meta?.custom?.lokiQueryStatKey,{refId:We}=Me;if(!lt&&Me.meta?.custom?.error&&(_e.push({label:"",value:Me.meta?.custom.error,kind:r.Ku.Error}),lt=!0),We&&!tt[We]){if(De&&Me.meta?.stats){const qe=Me.meta.stats.find(st=>st.displayName===De);qe&&(Qe+=qe.value)}tt[We]=!0}}if(Qe>0){const{text:Me,suffix:De}=(0,y.i7)("B")(Qe);_e.push({label:"Total bytes processed",value:`${Me} ${De}`,kind:r.Ku.String})}return{hasUniqueLabels:we,meta:_e,rows:de}}function te(ne,pe,re){let ie=[...ne.meta];const Se=ie.findIndex(Ce=>Ce.label===x),ye=Se>=0&&ie[Se]?.value;if(ye&&ye>0){let Ce;if(ye===ne.rows.length&&pe&&re){const de=(pe/re*100).toFixed(2);Ce=`${ye} reached, received logs cover ${de}% (${b.msRangeToTimeString(pe)}) of your selected time range (${b.msRangeToTimeString(re)})`}else Ce=`${ye} (${ne.rows.length} returned)`;ie[Se]={label:x,value:Ce,kind:r.Ku.String}}return ie}function oe(ne,pe){const re=pe&&ne===r.in.unknown?"logs":ne,ie=R[ne];return{displayNameFromDS:re,color:{mode:a.S.Fixed,fixedColor:ie},custom:{drawStyle:m.l8.Bars,barAlignment:m.pu.Center,lineColor:ie,pointColor:ie,fillColor:ie,lineWidth:1,fillOpacity:100,stacking:{mode:m.o0.Normal,group:"A"}}}}const Z=(ne,pe,re)=>(ne.fields=ne.fields.map(ie=>(ie.type===l.fS.number&&(ie.config={...ie.config,...oe(pe(ne),re)}),ie)),ne);function le(ne,pe,re){const ie=re.range.to.valueOf()-re.range.from.valueOf(),Se=q(pe.scopedVars,ie);return pe.interval=Se.interval,pe.scopedVars.__interval={value:Se.interval,text:Se.interval},Se.intervalMs!==void 0&&(pe.intervalMs=Se.intervalMs,pe.scopedVars.__interval_ms={value:Se.intervalMs,text:Se.intervalMs}),pe.hideFromInspector=!0,new n.y(ye=>{let Ce=[];ye.next({state:v.Gu.Loading,error:void 0,data:[]});const de=ne.query(pe),_e=((0,i.b)(de)?de:(0,s.D)(de)).subscribe({complete:()=>{ye.complete()},next:Je=>{const{error:Ue}=Je;if(Ue!==void 0)ye.next({state:v.Gu.Error,error:Ue,data:[]}),ye.error(Ue);else{const $e=(0,t.groupBy)(Je.data,"refId");Ce=Je.data.map(Qe=>{let tt=Qe.refId||"";tt.startsWith("log-volume-")&&(tt=tt.substr(11));const lt={logsVolumeType:r.o8.FullRange,absoluteRange:{from:re.range.from.valueOf(),to:re.range.to.valueOf()},datasourceName:ne.name,sourceQuery:re.targets.find(Me=>Me.refId===tt)};return Qe.meta={...Qe.meta,custom:{...Qe.meta?.custom,...lt}},Z(Qe,re.extractLevel,$e[Qe.refId].length===1)}),ye.next({state:Je.state,error:void 0,data:Ce})}},error:Je=>{ye.next({state:v.Gu.Error,error:Je,data:[]}),ye.error(Je)}});return()=>{_e?.unsubscribe()}})}function ce(ne,pe){return pe.hideFromInspector=!0,new n.y(re=>{let ie=[];re.next({state:v.Gu.Loading,error:void 0,data:[]});const Se=ne.query(pe),Ce=((0,i.b)(Se)?Se:(0,s.D)(Se)).subscribe({complete:()=>{re.next({state:v.Gu.Done,error:void 0,data:ie}),re.complete()},next:de=>{const{error:we}=de;we!==void 0?(re.next({state:v.Gu.Error,error:we,data:[]}),re.error(we)):ie=de.data.map(_e=>{const Je=(0,d.g0)(_e),{timeIndex:Ue}=(0,d.sV)(Je);return(0,d.aK)(Je,Ue)})},error:de=>{re.next({state:v.Gu.Error,error:de,data:[]}),re.error(de)}});return()=>{Ce?.unsubscribe()}})}function q(ne,pe){if(ne.__interval_ms){let re=ne.__interval_ms.value,ie="";return pe<T*5?(re=O,ie="1ms"):re>L?(re=V,ie="1d"):re>U?(re=L,ie="1h"):re>T?(re=U,ie="1m"):(re=T,ie="1s"),{interval:ie,intervalMs:re}}else return{interval:"$__interval"}}},22833:(j,I,e)=>{"use strict";e.d(I,{$u:()=>y,DA:()=>f,Di:()=>u,FP:()=>x,Js:()=>S,Mi:()=>E,ZO:()=>l,_c:()=>P,hY:()=>D,i6:()=>c,j0:()=>v,jx:()=>a,l3:()=>C,lL:()=>g});var t=e(89949),n=e.n(t),i=e(51451),s=e(64167),r=e(31832),m=e(29241),d=e(72164),o=e(32871);function l(M){if(!M)return i.in.unknown;let R=i.in.unknown,O;for(const T of Object.keys(i.in)){const L=new RegExp(`\\b${T}\\b`,"i").exec(M);L&&(O===void 0||L.index<O)&&(R=i.in[T],O=L.index)}return R}function a(M){const R=i.in[M.toString().toLowerCase()];return R||i.in.unknown}function g(M,R){const O=M.filter(L=>L.labels[R]!==void 0),T=O.length,U=(0,t.countBy)(O,L=>L.labels[R]);return h(U,T)}function c(M){const R=M.filter(T=>T!=null),O=(0,t.countBy)(R);return h(O,R.length)}const h=(M,R)=>(0,t.chain)(M).map((O,T)=>({count:O,value:T,proportion:O/R})).sortBy("count").reverse().value(),f=(M,R)=>M.timeEpochMs<R.timeEpochMs?-1:M.timeEpochMs>R.timeEpochMs?1:M.timeEpochNs<R.timeEpochNs?-1:M.timeEpochNs>R.timeEpochNs?1:0,b=(M,R)=>M.timeEpochMs>R.timeEpochMs?-1:M.timeEpochMs<R.timeEpochMs?1:M.timeEpochNs>R.timeEpochNs?-1:M.timeEpochNs<R.timeEpochNs?1:0,v=(M,R)=>{const O=M?y(M.rows,R):[];return M?{...M,rows:O}:{hasUniqueLabels:!1,rows:O}},y=(M,R)=>R===s.UV.Ascending?M.sort(f):M.sort(b),E=M=>M.labels.__error__?{hasError:!0,errorMessage:M.labels.__error__}:{hasError:!1},C=M=>M.replace(/\\r\\n|\\n|\\t|\\r/g,R=>R.slice(1)==="t"?"	":`
`);function u(M){return M.map(R=>{const O=(0,o.B2)(R).reduce((T,U)=>{const L=U.keys[0];return T[L]=U.values[0],T},{});return{line:R.entry,timestamp:R.timeEpochNs,fields:{...O,...R.labels}}})}const D=M=>{let R={from:1/0,to:-1/0};return M.forEach(O=>{const T=O.meta?.custom||{};T.absoluteRange?.from&&T.absoluteRange?.to&&(R={from:Math.min(R.from,T.absoluteRange.from),to:Math.max(R.to,T.absoluteRange.to)})}),R},P=M=>{if(M.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const R={},O={};let T=-1/0;const U={};let L=[];return M.forEach(V=>{const w=new r.N(V),K=w.getFirstFieldOfType(m.fS.time),B=w.getFirstFieldOfType(m.fS.number);if(!K)throw new Error("Missing time field");if(!B)throw new Error("Missing value field");const W=B.config.displayNameFromDS||V.name||"logs",_=B.values.length;U[W]={meta:V.meta,valueFieldConfig:B.config,timeFieldConfig:K.config};for(let k=0;k<_;k++){const A=K.values[k],z=B.values[k];R[W]??={},R[W][A]=(R[W][A]||0)+z,O[A]=(O[A]||0)+z,T=Math.max(O[A],T)}}),Object.keys(R).forEach(V=>{const w=new d.v,{meta:K,timeFieldConfig:B,valueFieldConfig:W}=U[V];w.name=V,w.meta=K,w.addField({name:"Time",type:m.fS.time,config:B}),w.addField({name:"Value",type:m.fS.number,config:W});for(const _ in R[V]){const k=R[V][_];w.add({Time:Number(_),Value:k})}L.push(w)}),{dataFrames:L,maximum:T}},S=M=>{const R=M[0]?.meta?.custom;return R&&R.datasourceName?{name:R.datasourceName}:null},x=M=>M[0]?.meta?.custom?.logsVolumeType===i.o8.Limited},92983:(j,I,e)=>{"use strict";e.d(I,{H:()=>g});var t=e(27702),n=e(60729),i=e(66670),s=e(39705),r=e(42844),m=e(66310),d=e(3613);const o=({title:c})=>{const h=(0,m.wW)(a);return t.createElement("p",{className:h.description},c?"Are you sure you want to revoke this URL? The dashboard will no longer be public.":"Orphaned public dashboard will no longer be public.")},l=({dashboardTitle:c,onConfirm:h,onDismiss:f})=>t.createElement(d.s,{isOpen:!0,body:t.createElement(o,{title:c}),onConfirm:h,onDismiss:f,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL"}),a=c=>({title:(0,r.css)`
    margin-bottom: ${c.spacing(1)};
  `,description:(0,r.css)`
    font-size: ${c.typography.body.fontSize};
  `}),g=({dashboard:c,publicDashboard:h,loader:f,children:b,onDismiss:v,...y})=>{const[E,{isLoading:C}]=(0,s.bS)(),u=(D,P)=>{E({dashboard:c,uid:D.uid,dashboardUid:D.dashboardUid}),P()};return t.createElement(n.JY,null,({showModal:D,hideModal:P})=>t.createElement(i.zx,{"aria-label":"Revoke public URL",title:"Revoke public URL",onClick:()=>D(l,{dashboardTitle:h.title,onConfirm:()=>u(h,P),onDismiss:()=>{v?v():P()}}),...y},C&&f?f:b))}},39345:(j,I,e)=>{"use strict";e.d(I,{t:()=>s});var t=e(63064);class n extends Error{constructor(m,d){super(d),this.type=m}}class i{constructor(){this.rootName="general"}validateNewDashboardName(m,d){return this.validate(m,d,"A dashboard or a folder with the same name already exists")}validateNewFolderName(m){return this.validate(this.rootName,m,"A folder or dashboard in the general folder with the same name already exists")}async validate(m,d,o){d=(d||"").trim();const l=d.toLowerCase();if(d.length===0)throw new n("REQUIRED","Name is required");if(l===this.rootName)throw new n("EXISTING","This is a reserved name and cannot be used for a folder.");const g=await(0,t.getGrafanaSearcher)().search({kind:["dashboard"],query:d,location:m||"general"});for(const c of g.view)if(l===c.name.toLowerCase())throw new n("EXISTING",o)}}const s=new i},77799:(j,I,e)=>{"use strict";e.d(I,{$j:()=>y,EW:()=>V,Fd:()=>S,Jx:()=>C,L6:()=>R,Pb:()=>L,ZL:()=>U,ct:()=>u,iM:()=>w,nQ:()=>h,q_:()=>c,uC:()=>x,ys:()=>v});var t=e(94469),n=e(73289),i=e(26129),s=e(10864),r=e(33877),m=e(73807),d=e(284),o=e(18771),l=e(75766),a=e(41139),g=e(91399);function c(B){return async W=>{try{W((0,g.AK)());const _=await(0,n.i)().get(`/api/gnet/dashboards/${B}`);W((0,g.S9)(_)),W(f(_.json)),W(b(_.json))}catch(_){W((0,g.eh)()),(0,n.kW)(_)&&W((0,r.$l)((0,m.t_)(_.data.message||_)))}}}function h(B){return async W=>{W((0,g.Nw)(B)),W(f(B)),W(b(B))}}function f(B){return W=>{if(B&&B.__inputs){const _=[];B.__inputs.forEach(k=>{const A={name:k.name,label:k.label,info:k.description,value:k.value,type:k.type,pluginId:k.pluginId,options:[]};k.type===g.n$.DataSource?E(k,A):A.info||(A.info="Specify a string constant"),_.push(A)}),W((0,g.Zc)(_))}}}function b(B){return async function(W){if(!B||!B.__elements)return;const _=[];for(const k of Object.values(B.__elements)){if(k.kind!==a.V.Panel)continue;const A=k.model,{type:z,description:H}=A,{uid:Q,name:X}=k,te={model:{model:A,uid:Q,name:X,version:0,type:z,kind:a.V.Panel,description:H},state:g.KQ.New};try{const oe=await(0,l.Mh)(Q,!0);te.state=g.KQ.Exists,te.model=oe}catch(oe){if(oe.status!==404)throw oe}_.push(te)}W((0,g.C2)(_))}}function v(){return B=>{B((0,g.MO)())}}function y(B){return async(W,_)=>{const k=_().importDashboard.dashboard,A=_().importDashboard.inputs;let z=[];B.dataSources?.forEach((X,te)=>{const oe=A.dataSources[te];z.push({name:oe.name,type:oe.type,pluginId:oe.pluginId,value:X.uid})}),B.constants?.forEach((X,te)=>{const oe=A.constants[te];z.push({value:X,name:oe.name,type:oe.type})});const H=await(0,n.i)().post("api/dashboards/import",{dashboard:{...k,title:B.title,uid:B.uid||k.uid},overwrite:!0,inputs:z,folderUid:B.folder.uid}),Q=t.u.stripBaseFromUrl(H.importedUrl);i.E1.push(Q)}}const E=(B,W)=>{(0,s.F)().getList({pluginId:B.pluginId}).length===0?W.info="No data sources of type "+B.pluginName+" found":W.info||(W.info="Select a "+B.pluginName+" data source")};async function C(B,W){const _={totalCount:B.length,successCount:0};for(const k of B)try{await O(k,W)!==null&&(_.successCount+=1)}catch(A){console.error("Failed to move a folder",A)}return _}function u(B,W){const _=[];for(const k of B)_.push(P(D,!0,k,W));return K(_).then(k=>({totalCount:k.length,successCount:k.filter(A=>A.succeeded).length,alreadyInFolderCount:k.filter(A=>A.alreadyInFolder).length}))}async function D(B,W){const _=await(0,n.i)().get(`/api/dashboards/uid/${B}`);if((_.meta.folderUid===void 0||_.meta.folderUid===null)&&W.uid===""||_.meta.folderUid===W.uid)return{alreadyInFolder:!0};const k={dashboard:_.dashboard,folderUid:W.uid,overwrite:!1};try{return await x(k),{succeeded:!0}}catch(A){if((0,n.kW)(A)){if(A.data?.status!=="plugin-dashboard")return{succeeded:!1};A.isHandled=!0}k.overwrite=!0;try{return await x(k),{succeeded:!0}}catch{return{succeeded:!1}}}}function P(B,W,..._){return async k=>{try{const A=await B(..._);return Array.prototype.concat(k,[A])}catch(A){if(W)return k;throw A}}}function S(B,W){const _=[];for(const k of B)_.push(P(M,!0,k,!0));for(const k of W)_.push(P(w,!0,k,!0));return K(_)}function x(B){return d.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:B.dashboard,message:B.message??"",overwrite:B.overwrite??!1,folderUid:B.folderUid})}function M(B,W){return(0,n.i)().delete(`/api/folders/${B}?forceDeleteRules=false`,void 0,{showSuccessAlert:W})}function R(B){return(0,n.i)().post("/api/folders",B)}function O(B,W){const _={parentUid:W.uid};return(0,n.i)().post(`/api/folders/${B}/move`,_,{showErrorAlert:!1})}const T=1e3;function U(B,W,_=o.SearchQueryType.Folder){return(0,n.i)().get("/api/search",{query:B,type:_,permission:W,limit:T})}function L(B){return(0,n.i)().get(`/api/folders/${B}`)}function V(B){return(0,n.i)().get(`/api/folders/id/${B}`)}function w(B,W){return(0,n.i)().delete(`/api/dashboards/uid/${B}`,{showSuccessAlert:W})}function K(B){return B.reduce((W,_)=>Promise.resolve(W).then(_),[])}},91399:(j,I,e)=>{"use strict";e.d(I,{AK:()=>f,C2:()=>c,G7:()=>i,KQ:()=>r,MO:()=>o,Nw:()=>g,S9:()=>a,ZP:()=>v,Zc:()=>l,eh:()=>h,n$:()=>s,wg:()=>m});var t=e(34099),n=e(53933),i=(y=>(y[y.Gcom=0]="Gcom",y[y.Json=1]="Json",y))(i||{}),s=(y=>(y.DataSource="datasource",y.Constant="constant",y.LibraryPanel="libraryPanel",y))(s||{}),r=(y=>(y.New="new",y.Exists="exists",y.Different="different",y))(r||{});const m={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},d=(0,t.oM)({name:"manageDashboards",initialState:m,reducers:{setGcomDashboard:(y,E)=>{y.dashboard={...E.payload.json,id:null},y.meta={updatedAt:E.payload.updatedAt,orgName:E.payload.orgName},y.source=0,y.state=n.Gu.Done},setJsonDashboard:(y,E)=>{y.dashboard={...E.payload,id:null},y.meta=m.meta,y.source=1,y.state=n.Gu.Done},clearDashboard:y=>{y.dashboard={},y.state=n.Gu.NotStarted},setInputs:(y,E)=>{y.inputs={dataSources:E.payload.filter(C=>C.type==="datasource"),constants:E.payload.filter(C=>C.type==="constant"),libraryPanels:[]}},setLibraryPanelInputs:(y,E)=>{y.inputs.libraryPanels=E.payload},fetchFailed:y=>{y.dashboard={},y.state=n.Gu.Error},fetchDashboard:y=>{y.state=n.Gu.Loading}}}),{clearDashboard:o,setInputs:l,setGcomDashboard:a,setJsonDashboard:g,setLibraryPanelInputs:c,fetchFailed:h,fetchDashboard:f}=d.actions,v={importDashboard:d.reducer}},30284:(j,I,e)=>{"use strict";e.d(I,{FV:()=>r,JE:()=>o,Q$:()=>m,RF:()=>s,Yi:()=>d});var t=e(73289),n=e(33877),i=e(73796);function s(l={getBackendSrv:t.i}){return async a=>{const g=await l.getBackendSrv().get("/api/org");return a((0,i.jR)(g)),g}}function r(l={getBackendSrv:t.i}){return async(a,g)=>{const c=g().organization.organization;await l.getBackendSrv().put("/api/org",{name:c.name}),a((0,n.H7)(c.name)),a(s(l))}}function m(l,a={getBackendSrv:t.i}){return async g=>{const c=await a.getBackendSrv().post("/api/user/using/"+l);g((0,n.H7)(c.name))}}function d(l,a={getBackendSrv:t.i}){return async g=>{const c=await a.getBackendSrv().post("/api/orgs/",l);g(m(c.orgId))}}function o(l={getBackendSrv:t.i}){return async a=>{const g=await l.getBackendSrv().get("/api/user/orgs");return a((0,i.IM)(g)),g}}},73796:(j,I,e)=>{"use strict";e.d(I,{IM:()=>m,ZP:()=>o,jR:()=>r,xR:()=>s});var t=e(34099);const n={organization:{},userOrgs:[]},i=(0,t.oM)({name:"organization",initialState:n,reducers:{organizationLoaded:(l,a)=>({...l,organization:a.payload}),setOrganizationName:(l,a)=>({...l,organization:{...l.organization,name:a.payload}}),userOrganizationsLoaded:(l,a)=>({...l,userOrgs:a.payload})}}),{setOrganizationName:s,organizationLoaded:r,userOrganizationsLoaded:m}=i.actions,o={organization:i.reducer}},55905:(j,I,e)=>{"use strict";e.d(I,{Z:()=>v});var t=e(42844),n=e(27702),i=e(90482),s=e(62247),r=e(26129),m=e(66310),d=e(70823),o=e(2480),l=e(97957),a=e(56812),g=e(45743),c=e(25374),h=e(75261),f=e(18771),b=e(32195);function v(C){const u=(0,m.wW)(E),D=(0,d.R9)(),P=new i.mi(C.data),{dataSummary:S}=P,x=y(C,S),M=(0,f.useDispatch)(),R=(0,h.h4)().getCurrent()?.getPanelById(C.panelId),O=()=>{a.Z.setObject(l.FL,c.Ok.Suggestions),M((0,g.g_)(!0))},T=()=>{R&&M((0,b.Kc)({panel:R,pluginId:"table"}))},U=L=>{R&&(M((0,b.Kc)({...L,panel:R})),L.transformations&&setTimeout(()=>{r.E1.partial({tab:"transform"})},100))};return n.createElement("div",{className:u.wrapper},n.createElement("div",{className:u.message},x),D.app===s.zj.PanelEditor&&S.hasData&&R&&n.createElement("div",{className:u.actions},C.suggestions&&n.createElement(n.Fragment,null,C.suggestions.map(L=>n.createElement(o.x,{key:L.name,icon:"process",onClick:()=>U(L)},L.name))),n.createElement(o.x,{icon:"table",onClick:T},"Switch to table"),n.createElement(o.x,{icon:"chart-line",onClick:O},"Open visualization suggestions")))}function y({data:C,fieldConfig:u,message:D,needsNumberField:P,needsTimeField:S,needsStringField:x},M){return D||(!C.series||C.series.length===0||C.series.every(R=>R.length===0)?u?.defaults.noValue??"No data":x&&!M.hasStringField?"Data is missing a string field":P&&!M.hasNumberField?"Data is missing a number field":S&&!M.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const E=C=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:C.colors.text.secondary,fontSize:C.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:C.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:C.spacing(1),rowGap:C.spacing(1),width:"100%",maxWidth:"600px"})})},59307:(j,I,e)=>{"use strict";e.d(I,{F:()=>d,X:()=>o});var t=e(27702),n=e(97585),i=e(9232),s=e(63439),r=e(18771);class m extends t.PureComponent{constructor(a){super(a)}render(){const a={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:a},t.createElement(s.b,{severity:r.AppNotificationSeverity.Error,...this.props}))}}function d(l,a){const g=class extends t.PureComponent{render(){const f=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(m,{title:`Error loading: ${l.id}`,text:f})}},c=new n.c(g);return c.meta=l,c.loadError=!0,c}function o(l,a){const g=class extends t.PureComponent{render(){return t.createElement(m,{title:`Panel plugin not found: ${l}`})}},c=new n.c(a?()=>null:g);return c.meta={id:l,name:l,sort:100,type:i.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},c}},24084:(j,I,e)=>{"use strict";e.d(I,{$:()=>c});var t=e(27702),n=e(31317),i=e(21708),s=e(90665),r=e(83335),m=e(39317),d=e(66310),o=e(37647),l=e(66574),a=e(59882);const g={defaults:{},overrides:[]};function c(f){const{pluginId:b,data:v,timeZone:y=(0,n.Z)(),options:E={},width:C,height:u,title:D,onOptionsChange:P=()=>{},onChangeTimeRange:S=()=>{},onFieldConfigChange:x=()=>{},fieldConfig:M=g}=f,R=(0,d.l4)(),O=(0,m.J)(),T=(0,t.useMemo)(()=>O.replace.bind(O),[O]),[U,L]=(0,t.useState)((0,a.q1)(b)),[V,w]=(0,t.useState)(),K=h(U,E,M),B=(0,i.Cc)(U,K?.fieldConfig,v,y,R,T);if((0,t.useEffect)(()=>{U&&U.hasPluginId(b)||(0,a.Ub)(b).then(_=>L(_)).catch(_=>{w(_.message)})},[b,U]),V)return t.createElement("div",null,"Failed to load plugin: ",V);if(!U||!U.hasPluginId(b))return t.createElement("div",null,"Loading plugin panel...");if(!U.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!B)return t.createElement("div",null,"No panel data");const W=U.panel;return t.createElement(o.z4,{dependencies:[U,v]},t.createElement(s.b,{meta:U.meta},t.createElement(W,{id:1,data:B,title:D,timeRange:B.timeRange,timeZone:y,options:K.options,fieldConfig:M,transparent:!1,width:C,height:u,renderCounter:0,replaceVariables:_=>_,onOptionsChange:P,onFieldConfigChange:x,onChangeTimeRange:S,eventBus:l.h$})))}function h(f,b,v){return(0,t.useMemo)(()=>{if(f)return(0,r.d4)({plugin:f,currentOptions:b,currentFieldConfig:v,isAfterPluginChange:!1})},[f,v,b])}},36676:(j,I,e)=>{"use strict";e.d(I,{H:()=>m,n:()=>r});var t=e(32053),n=e(21609),i=e(70732),s=e(89897);const r=d=>{const o=d.field.links;if(!(!o||o.length===0))return{getLinks:l=>{const a={};if(d.view){const{dataFrame:c}=d.view;a.__series={value:{name:c.name,refId:c.refId},text:"Series"};const h=d.colIndex!==void 0?c.fields[d.colIndex]:void 0;if(h){if(a.__field={value:{name:h.name,labels:h.labels},text:"Field"},d.rowIndex!==void 0&&d.rowIndex>=0){const{timeField:f}=(0,t.sV)(c);a.__value={value:{raw:h.values[d.rowIndex],numeric:d.display.numeric,text:(0,n.zc)(d.display),time:f?f.values[d.rowIndex]:void 0},text:"Value"}}d.view&&(a.__data={value:{name:c.name,refId:c.refId,fields:(0,i.z)({frame:c,rowIndex:d.rowIndex})},text:"Data"})}else a.__value={value:{raw:d.display.numeric,numeric:d.display.numeric,text:(0,n.zc)(d.display),calc:d.name},text:"Value"}}else console.log("VALUE",d);const g=(c,h,f)=>{const b={...a,...h};return l(c,b,f)};return o.map(c=>(0,s.Bq)().getDataLinkUIModel(c,g,d))}}},m=d=>{const o=d.links;if(!(!o||o.length===0))return{getLinks:()=>o.map(l=>(0,s.Bq)().getDataLinkUIModel(l,d.replaceVariables,d))}}},89897:(j,I,e)=>{"use strict";e.d(I,{Bq:()=>T,PR:()=>u,PW:()=>S});var t=e(89949),n=e.n(t),i=e(3569),s=e(24094),r=e(75578),m=e(29241),d=e(94469),o=e(48154),l=e(78968),a=e(58939),g=e(39317),c=e(64167),h=e(12308),f=e(26858),b=e(75627);const v=[{value:`${i.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.L8.BuiltIn},{value:`${i.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.L8.BuiltIn},{value:`${i.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.L8.BuiltIn}],y=[{value:`${i.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.L8.Series}],E=[{value:`${i.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.L8.Value},{value:`${i.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.L8.Value},{value:`${i.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.L8.Value}],C=U=>U.includes(".")||U.trim().includes(" ")?`["${U}"]`:`.${U}`,u=()=>[...(0,g.J)().getVariables().map(U=>({value:U.name,label:U.name,origin:s.L8.Template})),{value:`${i.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.L8.Template},...v],D=U=>{const L=[];for(const w of U)for(const K of w.fields)if(K.labels)for(const B of Object.keys(K.labels))L.push(B);const V=(0,t.chain)(L).flatten().uniq().value();return[{value:`${i.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.L8.Field},...V.map(w=>({value:`__field.labels${C(w)}`,label:`labels.${w}`,documentation:`${w} label value`,origin:s.L8.Field}))]},P=U=>{let L,V;const w=[],K={};if(U.length!==1)return[];const B=U[0];for(const W of B.fields){const _=(0,r.CZ)(W,B,U);K[_]||(w.push({value:`__data.fields${C(_)}`,label:`${_}`,documentation:`Formatted value for ${_} on the same row`,origin:s.L8.Fields}),K[_]=!0,!L&&W.type===m.fS.number&&(L={...W,name:_}),!V&&W.config.displayName&&W.config.displayName!==W.name&&(V={...W,name:_}))}return w.length&&w.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.L8.Fields}),L&&(w.push({value:`__data.fields${C(L.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.L8.Fields}),w.push({value:`__data.fields${C(L.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.L8.Fields})),V&&w.push({value:`__data.fields${C(V.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.L8.Fields}),w},S=(U,L)=>{const V={value:`${i.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.L8.Value};return L===s.o3.Values?[...y,...D(U),...E,V,...P(U),...u()]:[...y,...D(U),...P(U),...u()]},x=U=>{const L=D(U),V={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...y,...L,...E,V,...u()]};class M{constructor(){this.getDataLinkUIModel=(L,V,w)=>{let K=L.url;L.onBuildUrl&&(K=L.onBuildUrl({origin:w,replaceVariables:V}));const B={href:d.u.assureBaseUrl(K.replace(/\n/g,"")),title:L.title??"",target:L.targetBlank?"_blank":void 0,origin:w};return V&&(B.href=V(B.href,void 0,c.b8.UriEncode),B.title=V(L.title)),L.onClick&&(B.onClick=W=>{L.onClick({origin:w,replaceVariables:V,e:W})}),B.href=(0,h.iE)().disableSanitizeHtml?B.href:o.QX.sanitizeUrl(B.href),B}}getLinkUrl(L){let V=d.u.assureBaseUrl((0,g.J)().replace(L.url||"")),w={};if(L.keepTime){const K=(0,f.$t)().timeRangeForUrl();w.from=K.from,w.to=K.to}return L.includeVars&&(w={...w,...(0,b.c)()}),V=l.Cj.appendQueryToUrl(V,l.Cj.toUrlParams(w)),(0,h.iE)().disableSanitizeHtml?V:o.QX.sanitizeUrl(V)}getAnchorInfo(L){const V=(0,g.J)(),w={};return w.href=this.getLinkUrl(L),w.title=V.replace(L.title||""),w.tooltip=V.replace(L.tooltip||""),w}getPanelLinkAnchorInfo(L,V){(0,a.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const w=(K,B,W)=>(0,g.J)().replace(K,{...V,...B},W);return this.getDataLinkUIModel(L,w,{})}}let R;function O(U){R=U}function T(){return R||(R=new M),R}},32195:(j,I,e)=>{"use strict";e.d(I,{JI:()=>d,Kc:()=>l,ih:()=>a,qj:()=>o});var t=e(83335),n=e(75766),i=e(59307),s=e(30235),r=e(43620),m=e(47875);function d(c){return async(h,f)=>{if(c.libraryPanel?.uid&&!("model"in c.libraryPanel)){h(g(c));return}let b=c.type,v=f().plugins.panels[b];if(!v)try{v=await h((0,s.Ro)(b))}catch{v=(0,i.X)(b,b==="row")}c.plugin||c.pluginLoaded(v),h((0,m.bc)({key:c.key,plugin:v}))}}function o(c){return h=>{h((0,m.WJ)({key:c}))}}function l({panel:c,pluginId:h,options:f,fieldConfig:b,transformations:v}){return async(y,E)=>{if(c.type===h&&!f&&!b&&!v)return;let u=E().plugins.panels[h];if(u||(u=await y((0,s.Ro)(h))),c.type!==h&&c.changePlugin(u),f||b||v){const D=(0,t.d4)({plugin:u,currentOptions:f||c.options,currentFieldConfig:b||c.fieldConfig,isAfterPluginChange:!1});c.options=D.options,c.fieldConfig=D.fieldConfig,c.transformations=v||c.transformations,c.configRev++}c.generateNewKey(),y((0,m.bc)({key:c.key,plugin:u}))}}function a(c,h){return async(f,b)=>{const v=h.model.type,y=c.type;if(c.restoreModel({...h.model,gridPos:c.gridPos,id:c.id,libraryPanel:h}),c.getQueryRunner().clearLastResult(),y!==v){let C=b().plugins.panels[v];C||(C=await f((0,s.Ro)(v))),c.pluginLoaded(C),c.generateNewKey(),await f((0,m.bc)({key:c.key,plugin:C}))}else{const E=c.key;c.generateNewKey(),f((0,m.mr)({oldKey:E,newKey:c.key}))}c.configRev=0,c.hasSavedPanelEditChange=!0,c.refresh(),c.events.publish(r.pO),c.events.publish(r.Wj)}}function g(c){return async(h,f)=>{const b=c.libraryPanel.uid;try{const v=await(0,n.Mh)(b,!0);c.initLibraryPanel(v),await h(d(c));const y=f().dashboard.getModel();if(c.repeat&&y){const E=y.panels.findIndex(C=>C.id===c.id);y.repeatPanel(c,E),y.sortPanelsByGridPos(),y.events.publish(new r._B)}}catch(v){console.log("ERROR: ",v),h((0,m.bc)({key:c.key,plugin:(0,i.X)("Unable to load library panel: "+b,!1)}))}}}},47875:(j,I,e)=>{"use strict";e.d(I,{Vl:()=>l,WJ:()=>o,ZP:()=>g,bc:()=>s,mr:()=>d,o8:()=>r,pC:()=>m});var t=e(34099);const n={},i=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(c,h)=>{c[h.payload.key]={plugin:h.payload.plugin}},changePanelKey:(c,h)=>{c[h.payload.newKey]=c[h.payload.oldKey],delete c[h.payload.oldKey]},removePanel:(c,h)=>{delete c[h.payload.key]},removeAllPanels:c=>{Object.keys(c).forEach(h=>delete c[h])},setPanelInstanceState:(c,h)=>{c[h.payload.key].instanceState=h.payload.value},setPanelAngularComponent:(c,h)=>{const f=c[h.payload.key];f.angularComponent=h.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:r,setPanelInstanceState:m,changePanelKey:d,removePanel:o,removeAllPanels:l}=i.actions,g={panels:i.reducer}},69037:(j,I,e)=>{"use strict";e.d(I,{i:()=>t});function t(n,i){return n.panels[i.key]}},79517:(j,I,e)=>{"use strict";e.d(I,{r0:()=>a});var t=e(89949),n=e.n(t),i=e(94469),s=e(78968),r=e(76305),m=e(26129),d=e(60086);const o={kiosk:!0,autofitpanels:!0,orgId:!0};class l{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const h=this.urls[this.index],f=m.E1.getSearchObject(),b=(0,t.pickBy)(f,(y,E)=>o[E]),v=i.u.stripBaseFromUrl(h);this.index++,this.validPlaylistUrl=v,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),m.E1.push(v+"?"+s.Cj.toUrlParams(b))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(c){c.pathname!==this.validPlaylistUrl&&this.stop()}async start(c){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=m.E1.getHistory().listen(this.locationUpdated);const h=[];let f=await(0,d.A5)(c);if(!f.items?.length)return;this.interval=r.intervalToMs(f.interval);const b=await(0,d.jc)(f.items);for(const v of b)if(v.dashboards)for(const y of v.dashboards)h.push(y.url);h.length&&(this.urls=h,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),m.E1.getSearchObject().kiosk&&m.E1.partial({kiosk:null}))}}const a=new l},60086:(j,I,e)=>{"use strict";e.d(I,{A5:()=>f,CE:()=>c,Ds:()=>C,Dv:()=>b,cg:()=>g,d5:()=>E,jc:()=>y,l8:()=>h});var t=e(78209),n=e(27938),i=e(73289),s=e(34667),r=e(33877),m=e(73807),d=e(28062),o=e(89050),l=e(84749),a=e(63064);async function g(u){await v(()=>(0,i.i)().post("/api/playlists",u))}async function c(u,D){await v(()=>(0,i.i)().put(`/api/playlists/${u}`,D))}async function h(u){await v(()=>(0,i.i)().delete(`/api/playlists/${u}`),"Playlist deleted")}async function f(u){const D=await(0,i.i)().get(`/api/playlists/${u}`);if(D.items){for(const P of D.items)if(P.type==="dashboard_by_id"){P.type="dashboard_by_uid";const S=await(0,i.i)().get(`/api/dashboards/ids/${P.value}`);S.length&&(P.value=S[0])}}return D}async function b(){return(0,i.i)().get("/api/playlists/")}async function v(u,D="Playlist saved"){try{await u(),(0,l.WI)((0,r.$l)((0,m.AT)(D)))}catch(P){P instanceof Error&&(0,l.WI)((0,r.$l)((0,m.t_)("Unable to save playlist",P)))}}async function y(u){let D=0;if(!u?.length)return[];const P=[];for(const M of u){const R={query:"*",kind:["dashboard"],limit:1e3};switch(M.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":R.uid=[M.value];break;case"dashboard_by_tag":R.tags=[M.value];break}P.push({refId:`${D++}`,queryType:o.hR.Search,search:R})}if(!s.config.featureToggles.panelTitleSearch){const M=(0,a.getGrafanaSearcher)(),R=[];for(let O=0;O<P.length;O++){const T=(await M.search(P[O].search)).view;R.push({...u[O],dashboards:T.map(U=>({...U}))})}return R}const S=await(0,d.e)(),x=await(0,t.n)(S.query({targets:P}));if(x.data.length!==u.length)throw new Error("unexpected result size");return u.map((M,R)=>{const O=new n.U(x.data[R]);return{...M,dashboards:O.map(T=>({...T}))}})}function E(){return{items:[],interval:"5m",name:"",uid:""}}function C(u,D){return D?.length?(D=D.toLowerCase(),u.filter(P=>P.name.toLowerCase().includes(D))):u}},68723:(j,I,e)=>{"use strict";e.d(I,{$F:()=>d,E1:()=>c,GP:()=>f,GV:()=>m,P6:()=>b,Tk:()=>h,jL:()=>o});var t=e(18112),n=e(73289),i=e(92317),s=e(5194),r=e(67972);async function m(y){const E=await l(y),C=!!E,[u,D,P]=await Promise.all([c(),a(y,C),g(y)]),S=u.find(M=>M.id===y),x=S?.dependencies||E?.json?.dependencies;return{grafanaDependency:x?.grafanaDependency??x?.grafanaVersion??"",pluginDependencies:x?.plugins||[],links:S?.info.links||E?.json?.info.links||[],readme:P||E?.readme,versions:D}}async function d(){const{items:y}=await(0,n.i)().get(`${s.tB}/plugins`);return y.filter(r.wB)}async function o(){try{return await(0,n.i)().get(`${s.O2}/errors`)}catch{return[]}}async function l(y){try{return await(0,n.i)().get(`${s.tB}/plugins/${y}`,{})}catch(E){(0,n.kW)(E)&&(E.isHandled=!0);return}}async function a(y,E){try{return E?((await(0,n.i)().get(`${s.tB}/plugins/${y}/versions`)).items||[]).map(u=>({version:u.version,createdAt:u.createdAt,isCompatible:u.isCompatible,grafanaDependency:u.grafanaDependency})):[]}catch(C){return(0,n.kW)(C)&&(C.isHandled=!0),[]}}async function g(y){try{const E=await(0,n.i)().get(`${s.O2}/${y}/markdown/README`);return E?(0,t.a)(E):""}catch(E){return(0,n.kW)(E)&&(E.isHandled=!0),""}}async function c(){return(await(0,n.i)().get(`${s.O2}`,(0,i.y)({embedded:0}))).filter(r.EP)}async function h(y){return await(0,n.i)().post(`${s.O2}/${y}/install`,void 0,{showErrorAlert:!1})}async function f(y){return await(0,n.i)().post(`${s.O2}/${y}/uninstall`)}async function b(y,E){return(await(0,n.i)().datasourceRequest({url:`/api/plugins/${y}/settings`,method:"POST",data:E}))?.data}const v={getRemotePlugins:d,getInstalledPlugins:c,installPlugin:h,uninstallPlugin:f}},58083:(j,I,e)=>{"use strict";e.d(I,{L:()=>s});var t=e(42844),n=e(27702),i=e(66310);const s=({children:m,wrap:d,className:o})=>{const l=(0,i.l4)(),a=r(l,d);return n.createElement("div",{className:(0,t.cx)(a.container,o)},m)},r=(m,d)=>({container:(0,t.css)`
    display: flex;
    flex-direction: row;
    flex-wrap: ${d?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${m.spacing()};
      margin-right: ${m.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},67704:(j,I,e)=>{"use strict";e.d(I,{a:()=>i});var t=e(27702),n=e(52419);const i=({text:s="Loading..."})=>t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:s}))},5194:(j,I,e)=>{"use strict";e.d(I,{O2:()=>t,tB:()=>n,uJ:()=>i});const t="/api/plugins",n="/api/gnet",i="plugins"},67972:(j,I,e)=>{"use strict";e.d(I,{AA:()=>v,EP:()=>S,HT:()=>P,Nh:()=>b,RU:()=>u,Uj:()=>f,XB:()=>C,ZG:()=>c,fG:()=>D,uR:()=>l,wB:()=>x});var t=e(9232),n=e(58018),i=e(34667),s=e(80978),r=e(66574),m=e(45937),d=e(18771),o=e(309);function l(T=[],U=[],L){const V=[],w=y(L);return T.forEach(K=>{const B=U.find(_=>_.slug===K.id),W=w[K.id];B||V.push(a(K,void 0,W))}),U.forEach(K=>{const B=T.find(_=>_.id===K.slug),W=w[K.slug];V.push(a(B,K,W))}),V}function a(T,U,L){return!T&&U?g(U,L):T&&!U?c(T,L):h(T,U,L)}function g(T,U){const{name:L,slug:V,description:w,version:K,orgName:B,popularity:W,downloads:_,typeCode:k,updatedAt:A,createdAt:z,status:H,angularDetected:Q}=T,X=!!U||R(k);return{description:w,downloads:_,id:V,info:{logos:{small:`https://grafana.com/api/plugins/${V}/versions/${K}/logos/small`,large:`https://grafana.com/api/plugins/${V}/versions/${K}/logos/large`}},name:L,orgName:B,popularity:W,publishedAt:z,signature:E({remote:T,error:U}),updatedAt:A,hasUpdate:!1,isPublished:!0,isInstalled:X,isDisabled:X,isCore:T.internal,isDev:!1,isEnterprise:H==="enterprise",type:k,error:U?.errorCode,angularDetected:Q}}function c(T,U){const{name:L,info:{description:V,version:w,logos:K,updated:B,author:W},id:_,dev:k,type:A,signature:z,signatureOrg:H,signatureType:Q,hasUpdate:X,accessControl:te,angularDetected:oe}=T,Z=!!U||R(A);return{description:V,downloads:0,id:_,info:{logos:K},name:L,orgName:W.name,popularity:0,publishedAt:"",signature:E({local:T,error:U}),signatureOrg:H,signatureType:Q,updatedAt:B,installedVersion:w,hasUpdate:X,isInstalled:!0,isDisabled:Z,isCore:z==="internal",isPublished:!1,isDev:!!k,isEnterprise:!1,type:A,error:U?.errorCode,accessControl:te,angularDetected:oe}}function h(T,U,L){const V=T?.info.version,w=U?.slug||T?.id||"",K=T?.type||U?.typeCode,B=!!L||R(K);let W={small:`/public/img/icn-${K}.svg`,large:`/public/img/icn-${K}.svg`};return U?W={small:`https://grafana.com/api/plugins/${w}/versions/${U.version}/logos/small`,large:`https://grafana.com/api/plugins/${w}/versions/${U.version}/logos/large`}:T&&T.info.logos&&(W=T.info.logos),{description:T?.info.description||U?.description||"",downloads:U?.downloads||0,hasUpdate:T?.hasUpdate||!1,id:w,info:{logos:W},isCore:!!(U?.internal||T?.signature===t.Xy.internal),isDev:!!T?.dev,isEnterprise:U?.status==="enterprise",isInstalled:!!T||B,isDisabled:B,isPublished:!0,name:U?.name||T?.name||"",orgName:U?.orgName||T?.info.author.name||"",popularity:U?.popularity||0,publishedAt:U?.createdAt||"",type:K,signature:E({local:T,remote:U,error:L}),signatureOrg:T?.signatureOrg||U?.versionSignedByOrgName,signatureType:T?.signatureType||U?.versionSignatureType||U?.signatureType||void 0,updatedAt:U?.updatedAt||T?.info.updated||"",installedVersion:V,error:L?.errorCode,accessControl:T?.accessControl,angularDetected:T?.angularDetected||U?.angularDetected}}const f=T=>`${i.config.pluginCatalogURL}${T}`;var b=(T=>(T.nameAsc="nameAsc",T.nameDesc="nameDesc",T.updated="updated",T.published="published",T.downloads="downloads",T))(b||{});const v=(T,U)=>{const L={nameAsc:(V,w)=>V.name.localeCompare(w.name),nameDesc:(V,w)=>w.name.localeCompare(V.name),updated:(V,w)=>(0,n.J)(w.updatedAt).valueOf()-(0,n.J)(V.updatedAt).valueOf(),published:(V,w)=>(0,n.J)(w.publishedAt).valueOf()-(0,n.J)(V.publishedAt).valueOf(),downloads:(V,w)=>w.downloads-V.downloads};return L[U]?T.sort(L[U]):T};function y(T=[]){return T.reduce((U,L)=>(U[L.pluginId]=L,U),{})}function E(T){const{error:U,local:L,remote:V}=T;if(U)switch(U.errorCode){case t.w2.invalidSignature:return t.Xy.invalid;case t.w2.missingSignature:return t.Xy.missing;case t.w2.modifiedSignature:return t.Xy.modified}return L?.signature?L.signature:V?.signatureType||V?.versionSignatureType?t.Xy.valid:t.Xy.missing}const C=()=>(0,m.i)().get("/api/frontend/settings").then(T=>{i.config.panels=T.panels});function u(T){if(!T)return;const[U]=T.filter(L=>!!L.isCompatible);return U}const D=()=>i.config.pluginAdminEnabled,P=(T,U,L)=>{const V=i.config.pluginAdminExternalManageEnabled,w=r.contextSrv.hasAccess(d.AccessControlAction.PluginsInstall,(0,o.bO)()),K=!!L;return T.type===t.zV.renderer||T.type===t.zV.secretsmanager||T.isEnterprise&&!(0,s.v)("enterprise.plugins")||T.isDev||!w&&!V||!T.isPublished||!K||!U},S=T=>M(T.id),x=T=>M(T.slug);function M(T){const{pluginCatalogHiddenPlugins:U}=i.config;return!U.includes(T)}function R(T){return T===t.zV.secretsmanager&&!i.config.secretsManagerPluginEnabled}function O(T){return T?.signature==="internal"}},309:(j,I,e)=>{"use strict";e.d(I,{Gg:()=>m,RN:()=>r,bO:()=>s});var t=e(12308),n=e(91368),i=e(18771);function s(){return t.config.bootData.user.isGrafanaAdmin}function r(){return n.contextSrv.hasRole("Admin")}function m(){return n.contextSrv.hasPermission(i.AccessControlAction.DataSourcesCreate)&&n.contextSrv.hasPermission(i.AccessControlAction.DataSourcesWrite)}},30235:(j,I,e)=>{"use strict";e.d(I,{DD:()=>g,LP:()=>v,N9:()=>c,Qd:()=>o,Ro:()=>y,Tz:()=>f,bQ:()=>h,bp:()=>l,m3:()=>b,tQ:()=>a});var t=e(34099),n=e(73289),i=e(59882),s=e(43799),r=e(68723),m=e(5194),d=e(67972);const o=(0,t.hg)(`${m.uJ}/fetchAll`,async(E,C)=>{try{const{dispatch:u}=C,[D,P,{payload:S}]=await Promise.all([(0,r.E1)(),(0,r.jL)(),u(a())]);return(0,d.uR)(D,S,P)}catch{return C.rejectWithValue("Unknown error.")}}),l=(0,t.hg)(`${m.uJ}/fetchAllLocal`,async(E,C)=>{try{return(await(0,r.E1)()).map(D=>(0,d.ZG)(D))}catch{return C.rejectWithValue("Unknown error.")}}),a=(0,t.hg)(`${m.uJ}/fetchRemotePlugins`,async(E,C)=>{try{return await(0,r.$F)()}catch(u){return(0,n.kW)(u)&&(u.isHandled=!0),C.rejectWithValue([])}}),g=(0,t.hg)(`${m.uJ}/fetchDetails`,async(E,C)=>{try{const u=await(0,r.GV)(E);return{id:E,changes:{details:u}}}catch{return C.rejectWithValue("Unknown error.")}}),c=(0,t.hg)(`${m.uJ}/install`,async({id:E,version:C,isUpdating:u=!1},D)=>{const P=u?{isInstalled:!0,installedVersion:C,hasUpdate:!1}:{isInstalled:!0,installedVersion:C};try{return await(0,r.Tk)(E),await(0,d.XB)(),u&&(0,s.Hl)(E),{id:E,changes:P}}catch(S){return console.error(S),(0,n.kW)(S)?D.rejectWithValue(S.data):D.rejectWithValue("Unknown error.")}}),h=(0,t.hg)(`${m.uJ}/install`,async()=>({})),f=(0,t.hg)(`${m.uJ}/uninstall`,async(E,C)=>{try{return await(0,r.GP)(E),await(0,d.XB)(),(0,s.Hl)(E),{id:E,changes:{isInstalled:!1,installedVersion:void 0}}}catch(u){return console.error(u),C.rejectWithValue("Unknown error.")}}),b=(0,t.hg)(`${m.uJ}/loadPluginDashboards`,async(E,C)=>{const P=`api/plugins/${C.getState().dataSources.dataSource.type}/dashboards`;return(0,n.i)().get(P)}),v=(0,t.PH)(`${m.uJ}/panelPluginLoaded`),y=E=>async(C,u)=>{let D=u().plugins.panels[E];return D||(D=await(0,i.Ub)(E),u().plugins.panels[E]||C(v(D))),D}},64248:(j,I,e)=>{"use strict";e.d(I,{iY:()=>W,bt:()=>U,ZV:()=>T,Pj:()=>u,UQ:()=>S,bJ:()=>D,x3:()=>x,IS:()=>L,y9:()=>O,S1:()=>R,wq:()=>V,kH:()=>M});var t=e(27702),n=e(18771),i=e(67972),s=e(30235),r=e(6752),m=e(75892),d=e(95676),o=e(95948);const l=_=>_.plugins,a=(0,m.P1)(l,({items:_})=>_),g=(0,m.P1)(l,({settings:_})=>_.displayMode),{selectAll:c,selectById:h}=r.CD.getSelectors(a),f=_=>(0,m.P1)(c,k=>{const A=_.keyword?(0,d.x6)(_.keyword.toLowerCase()):"";return k.filter(z=>{const H=[z.name,z.orgName].filter(Boolean).map(Q=>Q.toLowerCase());return!(A&&!H.some(Q=>Q.includes(A))||_.type&&z.type!==_.type||_.isInstalled!==void 0&&z.isInstalled!==_.isInstalled||_.isCore!==void 0&&z.isCore!==_.isCore||_.isEnterprise!==void 0&&z.isEnterprise!==_.isEnterprise)})}),b=(0,m.P1)(c,_=>_?_.filter(k=>!!k.error).map(k=>({pluginId:k.id,errorCode:k.error})):[]),v=_=>(0,m.P1)(l,({requests:k={}})=>k[_]),y=_=>(0,m.P1)(v(_),k=>k?.status===o.eE.Pending),E=_=>(0,m.P1)(v(_),k=>k?.status===o.eE.Rejected?k?.error:null),C=_=>(0,m.P1)(v(_),k=>k===void 0),u=(_,k=i.Nh.nameAsc)=>{w();const A=(0,t.useMemo)(()=>f(_),[_]),z=(0,n.useSelector)(A),{isLoading:H,error:Q}=T(),X=(0,i.AA)(z,k);return{isLoading:H,error:Q,plugins:X}},D=_=>(w(),B(_),(0,n.useSelector)(k=>h(k,_))),P=_=>(K(),useSelector(k=>selectById(k,_))),S=()=>(w(),(0,n.useSelector)(b)),x=()=>{const _=(0,n.useDispatch)();return(k,A,z)=>_((0,s.N9)({id:k,version:A,isUpdating:z}))},M=()=>{const _=(0,n.useDispatch)();return()=>_((0,s.bQ)())},R=()=>{const _=(0,n.useDispatch)();return k=>_((0,s.Tz)(k))},O=()=>(0,n.useSelector)(E(s.tQ.typePrefix))===null,T=()=>{const _=(0,n.useSelector)(y(s.Qd.typePrefix)),k=(0,n.useSelector)(E(s.Qd.typePrefix));return{isLoading:_,error:k}},U=()=>{const _=(0,n.useSelector)(y(s.DD.typePrefix)),k=(0,n.useSelector)(E(s.DD.typePrefix));return{isLoading:_,error:k}},L=()=>{const _=(0,n.useSelector)(y(s.N9.typePrefix)),k=(0,n.useSelector)(E(s.N9.typePrefix));return{isInstalling:_,error:k}},V=()=>{const _=(0,n.useSelector)(y(s.Tz.typePrefix)),k=(0,n.useSelector)(E(s.Tz.typePrefix));return{isUninstalling:_,error:k}},w=()=>{const _=(0,n.useDispatch)(),k=(0,n.useSelector)(C(s.Qd.typePrefix));(0,t.useEffect)(()=>{k&&_((0,s.Qd)())},[])},K=()=>{const _=useDispatch(),k=useSelector(selectIsRequestNotFetched(fetchAllLocal.typePrefix));useEffect(()=>{k&&_(fetchAllLocal())},[])},B=_=>{const k=(0,n.useDispatch)(),A=(0,n.useSelector)(Q=>h(Q,_)),H=!(0,n.useSelector)(y(s.DD.typePrefix))&&A&&!A.details;(0,t.useEffect)(()=>{H&&k((0,s.DD)(_))},[A])},W=()=>{const _=(0,n.useDispatch)();return{displayMode:(0,n.useSelector)(g),setDisplayMode:A=>_((0,r.UC)(A))}}},6752:(j,I,e)=>{"use strict";e.d(I,{CD:()=>r,I6:()=>h,UC:()=>c});var t=e(34099),n=e(5194),i=e(95948),s=e(30235);const r=(0,t.HF)(),m=f=>new RegExp(`${n.uJ}/(.*)/pending`).test(f.type),d=f=>new RegExp(`${n.uJ}/(.*)/fulfilled`).test(f.type),o=f=>new RegExp(`${n.uJ}/(.*)/rejected`).test(f.type),l=f=>{const b=f.lastIndexOf("/");return f.substring(0,b)},a={items:r.getInitialState(),requests:{},settings:{displayMode:i.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},g=(0,t.oM)({name:"plugins",initialState:a,reducers:{setDisplayMode(f,b){f.settings.displayMode=b.payload}},extraReducers:f=>f.addCase(s.Qd.fulfilled,(b,v)=>{r.upsertMany(b.items,v.payload)}).addCase(s.bp.fulfilled,(b,v)=>{r.upsertMany(b.items,v.payload)}).addCase(s.DD.fulfilled,(b,v)=>{r.updateOne(b.items,v.payload)}).addCase(s.N9.fulfilled,(b,v)=>{r.updateOne(b.items,v.payload)}).addCase(s.Tz.fulfilled,(b,v)=>{r.updateOne(b.items,v.payload)}).addCase(s.LP,(b,v)=>{b.panels[v.payload.meta.id]=v.payload}).addCase(s.m3.pending,(b,v)=>{b.isLoadingPluginDashboards=!0,b.dashboards=[]}).addCase(s.m3.fulfilled,(b,v)=>{b.isLoadingPluginDashboards=!1,b.dashboards=v.payload}).addMatcher(m,(b,v)=>{b.requests[l(v.type)]={status:i.eE.Pending}}).addMatcher(d,(b,v)=>{b.requests[l(v.type)]={status:i.eE.Fulfilled}}).addMatcher(o,(b,v)=>{b.requests[l(v.type)]={status:i.eE.Rejected,error:v.payload}})}),{setDisplayMode:c}=g.actions,h=g.reducer},95948:(j,I,e)=>{"use strict";e.d(I,{Co:()=>i,cd:()=>n,eE:()=>d,lL:()=>t,tu:()=>m,vF:()=>s,xc:()=>r});var t=(o=>(o.Grid="grid",o.List="list",o))(t||{}),n=(o=>(o.Home="plugins-home",o.Browse="plugins-browse",o.Details="plugins-details",o))(n||{}),i=(o=>(o.app="apps",o.datasource="database",o.panel="credit-card",o.renderer="capture",o.secretsmanager="key-skeleton-alt",o))(i||{}),s=(o=>(o.INSTALL="INSTALL",o.UNINSTALL="UNINSTALL",o.UPDATE="UPDATE",o.REINSTALL="REINSTALL",o))(s||{}),r=(o=>(o.OVERVIEW="Overview",o.VERSIONS="Version history",o.CONFIG="Config",o.DASHBOARDS="Dashboards",o.USAGE="Usage",o))(r||{}),m=(o=>(o.OVERVIEW="overview",o.VERSIONS="version-history",o.CONFIG="config",o.DASHBOARDS="dashboards",o.USAGE="usage",o))(m||{}),d=(o=>(o.Pending="Pending",o.Fulfilled="Fulfilled",o.Rejected="Rejected",o))(d||{})},74161:(j,I,e)=>{"use strict";e.d(I,{a:()=>s,v:()=>n});var t=e(27702);const n=t.createContext(i());n.displayName="PluginPageContext";function i(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(r){return{sectionNav:r??i().sectionNav}}},5926:(j,I,e)=>{"use strict";e.d(I,{ND:()=>h,ak:()=>v});var t=e(68246),n=e(3935),i=e(39317),s=e(32416),r=e(73289),m=e(10864),d=e(42751),o=e(5933),l=e(12308),a=e(11122),g=e(65946),c=e(8929);class h{constructor(E=(0,i.J)()){this.templateSrv=E,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(E,C){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=E,this.defaultName=C;for(const u of Object.values(E))u.uid||(u.uid=u.name),this.settingsMapByUid[u.uid]=u,this.settingsMapById[u.id]=u;this.datasources[d.hr.type]=a.mV,this.datasources[g.Yq]=a.mV,this.settingsMapByUid[d.hr.uid]=a.bE,this.settingsMapByUid[g.Yq]=a.bE}getDataSourceSettingsByUid(E){return this.settingsMapByUid[E]}getInstanceSettings(E,C){let u=f(E);if((0,d.Pr)(u))return a.bE;if(u==="default"||u==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(u[0]==="$"){const D=this.templateSrv.replace(u,C,b);let P;return D==="default"?P=this.settingsMapByName[this.defaultName]:P=this.settingsMapByUid[D]??this.settingsMapByName[D],P?{...P,isDefault:!1,name:u,uid:u,rawRef:{type:P.type,uid:P.uid}}:void 0}return this.settingsMapByUid[u]??this.settingsMapByName[u]??this.settingsMapById[u]}get(E,C){let u=f(E);if(!u)return this.get(this.defaultName);if((0,d.Pr)(E))return Promise.resolve(this.datasources[g.Yq]);const D=this.settingsMapByName[u];return D&&(u=D.uid),this.datasources[u]?Promise.resolve(this.datasources[u]):(u=this.templateSrv.replace(u,C,b),u==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[u]?Promise.resolve(this.datasources[u]):this.loadDatasource(u))}async loadDatasource(E){if(this.datasources[E])return Promise.resolve(this.datasources[E]);const C=this.getInstanceSettings(E);if(!C)return Promise.reject({message:`Datasource ${E} was not found`});try{const u=await(0,c.nL)(C.meta);if(this.datasources[E])return this.datasources[E];const D=u.DataSourceClass.length!==1;let P;if(D?P=(0,s.V)().instantiate(u.DataSourceClass,{instanceSettings:C}):P=new u.DataSourceClass(C),P.components=u.components,!(P instanceof t.MF)){const S=P;S.name=C.name,S.id=C.id,S.type=C.type,S.meta=C.meta,S.uid=C.uid,P.getRef=t.MF.prototype.getRef}return this.datasources[E]=P,this.datasources[P.uid]=P,P}catch(u){return u instanceof Error&&o.Z.emit(n.SI.alertError,[C.name+" plugin failed",u.toString()]),Promise.reject({message:`Datasource: ${E} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(E={}){const C=Object.values(this.settingsMapByName).filter(D=>!(D.meta.id==="grafana"||D.meta.id==="mixed"||D.meta.id==="dashboard"||E.metrics&&!D.meta.metrics||E.tracing&&!D.meta.tracing||E.logs&&D.meta.category!=="logging"&&!D.meta.logs||E.annotations&&!D.meta.annotations||E.alerting&&!D.meta.alerting||E.pluginId&&D.meta.id!==E.pluginId||E.filter&&!E.filter(D)||E.type&&(Array.isArray(E.type)?!E.type.includes(D.type):E.type!==D.type)||!E.all&&D.meta.metrics!==!0&&D.meta.annotations!==!0&&D.meta.tracing!==!0&&D.meta.logs!==!0&&D.meta.alerting!==!0));if(E.variables)for(const D of this.templateSrv.getVariables()){if(D.type!=="datasource")continue;let P=D.current.value==="default"?this.defaultName:D.current.value;Array.isArray(P)&&P.length===1&&(P=P[0]);const S=!Array.isArray(P)&&(this.settingsMapByName[P]||this.settingsMapByUid[P]);if(S){const x=`\${${D.name}}`;C.push({...S,name:x,uid:x})}}const u=C.sort((D,P)=>D.name.toLowerCase()>P.name.toLowerCase()?1:D.name.toLowerCase()<P.name.toLowerCase()?-1:0);if(!E.pluginId&&!E.alerting){if(E.mixed){const D=this.getInstanceSettings("-- Mixed --");D&&C.push(D)}if(E.dashboard){const D=this.getInstanceSettings("-- Dashboard --");D&&C.push(D)}if(!E.tracing){const D=this.getInstanceSettings("-- Grafana --");D&&C.push(D)}}return u}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(E=>({name:E.name,value:E.name,meta:E.meta}))}getMetricSources(E){return this.getList({metrics:!0,variables:!E?.skipVariables}).map(C=>({name:C.name,value:C.name,meta:C.meta}))}async reload(){const E=await(0,r.i)().get("/api/frontend/settings");l.default.datasources=E.datasources,l.default.defaultDatasource=E.defaultDatasource,this.init(E.datasources,E.defaultDatasource)}}function f(y){return(0,d.Pr)(y)?d.hr.uid:typeof y=="string"?y:y?.uid}function b(y){return Array.isArray(y)?y[0]:y}const v=()=>(0,m.F)()},63245:(j,I,e)=>{"use strict";e.d(I,{CR:()=>u,Ch:()=>c,IX:()=>l,KE:()=>o,_A:()=>f,eP:()=>a,ew:()=>P,fD:()=>y,lu:()=>b});var t=e(89949),n=e.n(t),i=e(27702),s=e(15766),r=e(13741),m=e(5933),d=e(43620);function o(S){console.warn(`[Plugin Extensions] ${S}`)}function l(S){return typeof S=="object"&&"type"in S&&S.type===s.D.link}function a(S){return typeof S=="object"&&"type"in S&&S.type===s.D.component}function g(S,x=""){return(...M)=>{try{return S(...M)}catch(R){R instanceof Error&&console.warn(`${x}${R.message}`)}}}function c(S){return{openModal:({title:M,body:R})=>{m.Z.publish(new d.Dn({component:h({title:M,body:R})}))},context:S}}const h=({title:S,body:x})=>({onDismiss:R})=>i.createElement(r.u,{title:S,isOpen:!0,onDismiss:R,onClickBackdrop:R},i.createElement(x,{onDismiss:R}));function f(S,x=new Map){if(!S||typeof S!="object"||Object.isFrozen(S))return S;const M=Array.isArray(S)?[...S]:{...S};if(x.has(S))return x.get(S);x.set(S,M);const R=Reflect.ownKeys(M);for(const O of R){const T=Array.isArray(M)?M[Number(O)]:M[O];T&&(typeof T=="object"||typeof T=="function")&&(Array.isArray(M)?M[Number(O)]=f(T,x):M[O]=f(T,x))}return Object.freeze(M)}function b(S,x){const M=`${S}${x.extensionPointId}${x.title}`;return Array.from(M).reduce((R,O)=>Math.imul(31,R)+O.charCodeAt(0)|0,0).toString()}const v=Symbol("isReadOnlyProxy");function y(S){if(!S||typeof S!="object"||C(S))return S;const x=new WeakMap;return new Proxy(S,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(M,R,O){if(R===v)return!0;const T=Reflect.get(M,R,O);return(0,t.isObject)(T)||(0,t.isArray)(T)?(x.has(T)||x.set(T,y(T)),x.get(T)):T}})}function E(S){return typeof S=="object"&&S!==null}function C(S){return E(S)&&S[v]===!0}function u(S){const x={type:s.D.link,...S};return D(x),x}function D(S){if(S.type!==s.D.link)throw Error("config is not a extension link")}function P(S,x){return S.length<x?S:`${S.slice(0,x-3).trimEnd()}...`}},59882:(j,I,e)=>{"use strict";e.d(I,{Ub:()=>d,_2:()=>a,eD:()=>o,pv:()=>l,q1:()=>g});var t=e(97585),n=e(12308),i=e(59307),s=e(8929);const r={},m={};function d(h){const f=r[h];if(f)return f;const b=l(h);if(!b)throw new Error(`Plugin ${h} not found`);return r[h]=c(b),h!==b.type&&(r[b.type]=r[h]),r[h]}function o(h){return!!l(h)}function l(h){return n.default.panels[h]||Object.values(n.default.panels).find(f=>f.alias===h)}function a(h){return c(h)}function g(h){return m[h]}function c(h){return(0,s.N$)({path:h.module,version:h.info?.version,isAngular:h.angularDetected,pluginId:h.id}).then(f=>{if(f.plugin)return f.plugin;if(f.PanelCtrl){const b=new t.c(null);return b.angularPanelCtrl=f.PanelCtrl,b}throw new Error("missing export: plugin or PanelCtrl")}).then(f=>(f.meta=h,m[h.id]=f,f)).catch(f=>(console.warn("Error loading panel plugin: "+h.id,f),(0,i.F)(h,f)))}},67821:(j,I,e)=>{"use strict";e.d(I,{Z:()=>s,a:()=>i});var t=e(73289);const n={};function i(r,m){const d=n[r];return d?Promise.resolve(d):(0,t.i)().get(`/api/plugins/${r}/settings`,void 0,void 0,m).then(o=>(n[r]=o,o)).catch(o=>Promise.reject(new Error("Unknown Plugin")))}const s=r=>r?delete n[r]:Object.keys(n).forEach(m=>delete n[m])},8929:(j,I,e)=>{"use strict";e.d(I,{kY:()=>rs,Av:()=>Ag,nL:()=>Rg,N$:()=>Lm});var t={};e.r(t),e.d(t,{plugin:()=>ve});var n={};e.r(n),e.d(n,{plugin:()=>Pa});var i={};e.r(i),e.d(i,{plugin:()=>on});var s={};e.r(s),e.d(s,{plugin:()=>Fs});var r={};e.r(r),e.d(r,{plugin:()=>yo});var m={};e.r(m),e.d(m,{plugin:()=>du});var d={};e.r(d),e.d(d,{plugin:()=>Di});var o={};e.r(o),e.d(o,{plugin:()=>gl});var l={};e.r(l),e.d(l,{plugin:()=>El});var a={};e.r(a),e.d(a,{plugin:()=>Du});var g={};e.r(g),e.d(g,{plugin:()=>sd});var c={};e.r(c),e.d(c,{plugin:()=>ro});var h={};e.r(h),e.d(h,{plugin:()=>oo});var f={};e.r(f),e.d(f,{plugin:()=>ai});var b={};e.r(b),e.d(b,{plugin:()=>Jr});var v={};e.r(v),e.d(v,{plugin:()=>So});var y={};e.r(y),e.d(y,{plugin:()=>am});var E={};e.r(E),e.d(E,{plugin:()=>zl});var C={};e.r(C),e.d(C,{plugin:()=>om});var u={};e.r(u),e.d(u,{plugin:()=>gm});var D={};e.r(D),e.d(D,{plugin:()=>Qa});var P={};e.r(P),e.d(P,{plugin:()=>ym});var S={};e.r(S),e.d(S,{plugin:()=>wf});var x={};e.r(x),e.d(x,{plugin:()=>Ff});var M={};e.r(M),e.d(M,{plugin:()=>zf});var R={};e.r(R),e.d(R,{plugin:()=>tg});var O=e(42844),T=e(46219),U=e(45306),L=e(7610),V=e.n(L),w=e(89949),K=e.n(w),B=e(79913),W=e.n(B),_=e(6570),k=e.n(_),A=e(27702),z=e(27473),H=e(27173),Q=e(85014),X=e(66920),te=e(33199),oe=e(19826),Z=e(37102),le=e(45273),ce=e(10418),q=e(73817),ne=e(97585),pe=e(68246),re=e(62247),ie=e(13597),Se=e(1726),ye=e(97073),Ce=e(80549),de=e(65469),we=e(28291),_e=e(12308),Je=e(66574),Ue=e(45937),$e=e(6872),Qe=e(7999),tt=e(44380),lt=e(13216),Me=e(86628),De=e(22513),We=e(34667),qe=e(29372),st=e(10027),dt=e(47702),Tt=e(76658),Nt=e(33555),Bt=e(84369),yt=e(18771),ft=e(32082),ct=e(66310),ge=e(66670),Be=e(8254),Le=e(10759),he=e(33273),He=e(14117),Pe=e(39036),Ie=e(62862);const Te=({alertManagerSourceName:p,group:N,expandAll:F})=>{const[G,J]=(0,A.useState)(F),se=(0,ct.wW)(Re),me=(0,ct.wW)(He.r);return(0,A.useEffect)(()=>J(F),[F]),A.createElement("div",{className:se.group,"data-testid":"alert-group"},Object.keys(N.labels).length>0?A.createElement(Be.s,{labels:N.labels,size:"sm"}):A.createElement("div",{className:se.noGroupingText},"No grouping"),A.createElement("div",{className:se.row},A.createElement(Le.U,{isCollapsed:!G,onToggle:()=>J(!G)})," ",A.createElement(he.Z,{group:N})),G&&A.createElement("div",{className:se.alerts},N.alerts.map((be,Ae)=>{const Ke=be.status.state.toUpperCase(),Ye=(0,ft.vT)({start:new Date(be.startsAt),end:Date.now()});return A.createElement("div",{"data-testid":"alert-group-alert",className:se.alert,key:`${be.fingerprint}-${Ae}`},A.createElement("div",null,A.createElement("span",{className:me[be.status.state]},Ke," "),"for ",Ye),A.createElement("div",null,A.createElement(Be.s,{labels:be.labels,size:"sm"})),A.createElement("div",{className:se.actionsRow},be.status.state===Ie.Z9.Suppressed&&A.createElement(ge.Qj,{href:`${(0,Pe.eQ)("/alerting/silences",p)}&silenceIds=${be.status.silencedBy.join(",")}`,className:se.button,icon:"bell",size:"sm"},"Manage silences"),be.status.state===Ie.Z9.Active&&A.createElement(ge.Qj,{href:(0,Pe.VN)(p,be.labels),className:se.button,icon:"bell-slash",size:"sm"},"Silence"),be.generatorURL&&A.createElement(ge.Qj,{className:se.button,href:be.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},Re=p=>({noGroupingText:(0,O.css)`
    height: ${p.spacing(4)};
  `,group:(0,O.css)`
    background-color: ${p.colors.background.secondary};
    margin: ${p.spacing(.5,1,.5,1)};
    padding: ${p.spacing(1)};
  `,row:(0,O.css)`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${p.spacing(1)};
  `,alerts:(0,O.css)`
    margin: ${p.spacing(0,2,0,4)};
  `,alert:(0,O.css)`
    padding: ${p.spacing(1,0)};
    & + & {
      border-top: 1px solid ${p.colors.border.medium};
    }
  `,button:(0,O.css)`
    & + & {
      margin-left: ${p.spacing(1)};
    }
  `,actionsRow:(0,O.css)`
    padding: ${p.spacing(1,0)};
  `}),ue=(p,N)=>(0,A.useMemo)(()=>p.filter(F=>(0,Tt.eD)(F.labels,N)||F.alerts.some(G=>(0,Tt.eD)(G.labels,N))),[p,N]),xe=p=>{const N=(0,yt.useDispatch)(),F=We.config.unifiedAlertingEnabled,G=p.options.expandAll,J=p.options.alertmanager,me=((0,st._)(Ye=>Ye.amAlertGroups)||Bt.oq)[J||""]?.result||[],be=p.options.labels?(0,Tt.Zh)(p.options.labels):[],Ae=ue(me,be);(0,A.useEffect)(()=>{function Ye(){J&&N((0,dt.mS)(J))}Ye();const Ze=setInterval(Ye,Nt.iF);return()=>{clearInterval(Ze)}},[N,J]);const Ke=Ae.length>0;return A.createElement(qe.$,{autoHeightMax:"100%",autoHeightMin:"100%"},F&&A.createElement("div",null,Ke&&Ae.map(Ye=>A.createElement(Te,{alertManagerSourceName:J,key:JSON.stringify(Ye.labels),group:Ye,expandAll:G})),!Ke&&"No alerts"))};var Ve=e(28580);function Ne(p){return p.name===De.GC?"Grafana":p.name.slice(0,37)}const fe=({onChange:p,current:N,dataSources:F})=>{const G=(0,A.useMemo)(()=>F.map(J=>({label:Ne(J),value:J.name,imgUrl:J.imgUrl,meta:J.meta})),[F]);return A.createElement(Ve.Ph,{"aria-label":"Choose Alertmanager",width:29,backspaceRemovesValue:!1,onChange:J=>J.value&&p(J.value),options:G,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:N,getOptionLabel:J=>J.label})},ve=new ne.c(xe).setPanelOptions(p=>p.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:De.GC,category:["Options"],editor:function(F){const G=(0,A.useMemo)(De.z3,[]);return A.createElement(fe,{current:F.value,onChange:J=>F.onChange(J),dataSources:G})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var ze=e(72699),Oe=e(41482),Fe=e(56027),Ge=e.n(Fe),nt=e(74639),Xe=e(15758),ut=e(77799);async function ht({query:p,permissionLevel:N}){return(await(0,ut.ZL)(p,N)).map(J=>({id:J.id,title:J.title,url:J.url}))}async function wt({query:p,permissionLevel:N,extraFolders:F}){const G=await ht({query:p,permissionLevel:N}),J=F??[],se=p?J.filter(me=>me.title?.toLowerCase().includes(p.toLowerCase())):J;return G?se.concat(G):se}async function mn({query:p,permissionLevel:N=yt.PermissionLevelString.View,extraFolders:F=[]}){return(await wt({query:p,permissionLevel:N,extraFolders:F})).map(J=>({value:J,label:J.title}))}function vn(p,N){return p?.find(F=>F.value?.id===N)}async function gn(p){if(p!=null)try{const{id:N,title:F}=await(0,ut.EW)(p);return{value:{id:N,title:F},label:F}}catch{console.error(`Could not find folder with id:${p}`)}}const Sn={id:void 0,title:"All"},Cn={id:Xe.pW,title:Xe.fy};function pn({onChange:p,extraFolders:N=[],initialFolderId:F,permissionLevel:G=yt.PermissionLevelString.View}){const[J,se]=(0,A.useState)(!1),[me,be]=(0,A.useState)(void 0),[Ae,Ke]=(0,A.useState)(void 0),Ye=(0,A.useCallback)(async gt=>{let Pt=vn(gt,F);Pt||(Pt=await gn(F)??gt[0],p(Pt.value)),se(!0),Ke(gt),be(Pt)},[F,p]),Ze=(0,A.useCallback)(async gt=>{const Pt=await mn({query:gt,permissionLevel:G,extraFolders:N});return J||await Ye(Pt),Pt},[G,N,J,Ye]),ot=Ge()(Ze,300,{leading:!0}),rt=(0,A.useCallback)(({value:gt})=>{const Pt=vn(Ae,gt?.id);be(Pt),p(gt)},[Ae,p]);return A.createElement("div",{"data-testid":nt.wl.components.ReadonlyFolderPicker.container},A.createElement(Ve.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:me,value:me,loadOptions:ot,onChange:rt}))}var nn=e(53229),Ct=e(25111),bt=e(99633),Ut=e(39317),_t=e(73289),Gt=e(50230),jt=e(73453),sn=e(43609),St=e(75261),mt=e(57183);function kt(p){const[N,F]=(0,A.useState)(""),G=(0,Ct.Z)(async()=>{if(p.options.showOptions!==mt.kx.Current)return;const me={state:pt(p.options.stateFilter)},be=(0,St.h4)().getCurrent()?.getPanelById(p.id);p.options.alertName&&(me.query=(0,Ut.J)().replace(p.options.alertName,be.scopedVars)),p.options.folderId>=0&&(me.folderId=p.options.folderId),p.options.dashboardTitle&&(me.dashboardQuery=p.options.dashboardTitle),p.options.dashboardAlerts&&(me.dashboardId=(0,St.h4)().getCurrent()?.id),p.options.tags&&(me.dashboardTag=p.options.tags);const Ae=await(0,_t.i)().get("/api/alerts",me,`alert-list-get-current-alert-state-${p.id}`);let Ke=it(p.options.sortOrder,Ae.map(Ye=>({...Ye,stateModel:sn.Z.getStateDisplayModel(Ye.state),newStateDateAgo:(0,bt.CQ)(Ye.newStateDate).locale("en").fromNow(!0)})));return Ke.length>p.options.maxItems&&(Ke=Ke.slice(0,p.options.maxItems)),F(Ke.length===0?"No alerts":""),Ke},[p.options.showOptions,p.options.stateFilter.alerting,p.options.stateFilter.execution_error,p.options.stateFilter.no_data,p.options.stateFilter.ok,p.options.stateFilter.paused,p.options.stateFilter.pending,p.options.maxItems,p.options.tags,p.options.dashboardAlerts,p.options.dashboardTitle,p.options.folderId,p.options.alertName,p.options.sortOrder,p.timeRange]),J=(0,Ct.Z)(async()=>{if(p.options.showOptions!==mt.kx.RecentChanges)return;const me={limit:p.options.maxItems,type:"alert",newState:pt(p.options.stateFilter)},be=(0,St.h4)().getCurrent();p.options.dashboardAlerts&&(me.dashboardId=be?.id),me.from=Se.parse(be?.time.from).unix()*1e3,me.to=Se.parse(be?.time.to).unix()*1e3;const Ae=await(0,_t.i)().get("/api/annotations",me,`alert-list-get-state-changes-${p.id}`),Ke=it(p.options.sortOrder,Ae.map(Ye=>({...Ye,time:be?.formatDate(Ye.time,"MMM D, YYYY HH:mm:ss"),stateModel:sn.Z.getStateDisplayModel(Ye.newState),info:sn.Z.getAlertAnnotationInfo(Ye)})));return F(Ke.length===0?"No alerts in current time range":""),Ke},[p.options.showOptions,p.options.maxItems,p.options.stateFilter.alerting,p.options.stateFilter.execution_error,p.options.stateFilter.no_data,p.options.stateFilter.ok,p.options.stateFilter.paused,p.options.stateFilter.pending,p.options.dashboardAlerts,p.options.sortOrder]),se=(0,ct.wW)(It);return A.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},A.createElement("div",{className:se.container},N&&A.createElement("div",{className:se.noAlertsMessage},N),A.createElement("section",null,A.createElement("ol",{className:se.alertRuleList},p.options.showOptions===mt.kx.Current?!G.loading&&G.value&&G.value.map(me=>A.createElement("li",{className:se.alertRuleItem,key:`alert-${me.id}`},A.createElement(Gt.Z,{href:`${me.url}?viewPanel=${me.panelId}`,className:se.cardContainer},A.createElement(Gt.Z.Heading,null,me.name),A.createElement(Gt.Z.Figure,{className:(0,O.cx)(se.alertRuleItemIcon,me.stateModel.stateClass)},A.createElement(jt.J,{name:me.stateModel.iconClass,size:"xl",className:se.alertIcon})),A.createElement(Gt.Z.Meta,null,A.createElement("div",{className:se.alertRuleItemText},A.createElement("span",{className:me.stateModel.stateClass},me.stateModel.text),A.createElement("span",{className:se.alertRuleItemTime}," for ",me.newStateDateAgo)))))):!J.loading&&J.value&&J.value.map(me=>A.createElement("li",{className:se.alertRuleItem,key:`alert-${me.id}`},A.createElement(Gt.Z,{className:se.cardContainer},A.createElement(Gt.Z.Heading,null,me.alertName),A.createElement(Gt.Z.Figure,{className:(0,O.cx)(se.alertRuleItemIcon,me.stateModel.stateClass)},A.createElement(jt.J,{name:me.stateModel.iconClass,size:"xl"})),A.createElement(Gt.Z.Meta,null,A.createElement("span",{className:(0,O.cx)(se.alertRuleItemText,me.stateModel.stateClass)},me.stateModel.text),A.createElement("span",null,me.time),me.info&&A.createElement("span",{className:se.alertRuleItemInfo},me.info)))))))))}function it(p,N){if(p===mt.As.Importance)return(0,w.sortBy)(N,G=>sn.Z.alertStateSortScore[G.state||G.newState]);if(p===mt.As.TimeAsc)return(0,w.sortBy)(N,G=>new Date(G.newStateDate||G.time));if(p===mt.As.TimeDesc)return(0,w.sortBy)(N,G=>new Date(G.newStateDate||G.time)).reverse();const F=(0,w.sortBy)(N,G=>(G.name||G.alertName).toLowerCase());return p===mt.As.AlphaDesc&&F.reverse(),F}function pt(p){return Object.entries(p).filter(([N,F])=>F).map(([N,F])=>N)}const It=p=>({cardContainer:(0,O.css)`
    padding: ${p.spacing(.5)} 0 ${p.spacing(.25)} 0;
    line-height: ${p.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,O.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,O.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,O.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${p.colors.background.secondary};
    padding: ${p.spacing(.5)} ${p.spacing(1)};
    border-radius: ${p.shape.borderRadius()};
    margin-bottom: ${p.spacing(.5)};
  `,alertRuleItemIcon:(0,O.css)`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${p.spacing(4)};
    padding: 0 ${p.spacing(.5)} 0 ${p.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:(0,O.css)`
    font-weight: ${p.typography.fontWeightBold};
    font-size: ${p.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:(0,O.css)`
    color: ${p.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,O.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,O.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,O.css)`
    margin-right: ${p.spacing(.5)};
  `}),Qt=p=>{const N={showOptions:p.options.showOptions??p.show??mt.kx.Current,maxItems:p.options.maxItems??p.limit??10,sortOrder:p.options.sortOrder??p.sortOrder??mt.As.AlphaAsc,dashboardAlerts:p.options.dashboardAlerts??p.onlyAlertsOnDashboard??!1,alertName:p.options.alertName??p.nameFilter??"",dashboardTitle:p.options.dashboardTitle??p.dashboardFilter??"",folderId:p.options.folderId??p.folderId,tags:p.options.tags??p.dashboardTags??[],stateFilter:p.options.stateFilter??p.stateFilter?.reduce((G,J)=>({...G,[J]:!0}),{})??{}};return parseFloat(p.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(J=>delete p[J]),N};var rn=e(18447),un=e(68093);function xn(p,N){const F=(0,Tt.Zh)(p);return(0,Tt.eD)(N,F)}function Kn(p,N){const{stateFilter:F,alertInstanceLabelFilter:G}=p;return(0,w.isEmpty)(F)?N:N.filter(J=>(F.firing&&((0,un.j)(J,rn.bj.Alerting)||(0,un.j)(J,rn.x_.Firing))||F.pending&&((0,un.j)(J,rn.bj.Pending)||(0,un.j)(J,rn.x_.Pending))||F.noData&&(0,un.j)(J,rn.bj.NoData)||F.normal&&(0,un.j)(J,rn.bj.Normal)||F.error&&(0,un.j)(J,rn.bj.Error)||F.inactive&&(0,un.j)(J,rn.x_.Inactive))&&(G?xn(p.alertInstanceLabelFilter,J.labels):!0))}function _n(p){return!(p.startsWith("__")&&p.endsWith("__"))}const Ma=p=>{const{onChange:N,id:F,defaultValue:G,dataSource:J}=p,se=(0,yt.useDispatch)();(0,A.useEffect)(()=>{J?J&&se((0,dt.y6)({rulesSourceName:J})):se((0,dt.lB)())},[se,J]);const me=(0,st._)(Ye=>Ye.promRules),be=(0,Bt.PE)(me),Ae=(0,Bt.yR)(me),Ke=(0,A.useMemo)(()=>{if((0,w.isEmpty)(me))return[];if(!be)return[];const Ye=Object.keys(me).flatMap(Ze=>me[Ze].result??[]).flatMap(Ze=>Ze.groups).flatMap(Ze=>Ze.rules.filter(ot=>ot.type===rn.pz.Alerting)).flatMap(Ze=>Ze.alerts??[]).map(Ze=>Object.keys(Ze.labels??{})).flatMap(Ze=>Ze.filter(_n));return(0,w.uniq)(Ye)},[be,me]);return A.createElement(Ve.NU,{id:F,isLoading:Ae,defaultValue:G,"aria-label":"group by label keys",placeholder:"Group by",prefix:A.createElement(jt.J,{name:"tag-alt"}),onChange:Ye=>{N(Ye.map(Ze=>Ze.value??""))},options:Ke.map(Ye=>({label:Ye,value:Ye}))})};var la=e(73195),aa=e(19559),ba=e(32713),ga=e(63439),Ca=e(52419),Ha=e(50323),ka=e(91368),ma=e(85096),At=e(93764),Rt=e(52467),Mt=e(22446),$t=e(21915),Pn=e(6772),tn=e.n(Pn),Un=e(61404),$n=e(97957);const kn=({alerts:p,options:N,grafanaTotalInstances:F,handleInstancesLimit:G,limitInstances:J,grafanaFilteredInstancesTotal:se})=>{const me=N.groupMode===mt.LM.Custom?!0:N.showInstances,[be,Ae]=(0,A.useState)(me),Ke=(0,ct.wW)(Fn),Ye=(0,ct.wW)(ge.gN),Ze=(0,A.useCallback)(()=>{Ae(Xn=>!Xn)},[]),ot=(0,A.useMemo)(()=>Kn(N,(0,Pe.Zl)(N.sortOrder,p))??[],[p,N]),rt=F!==void 0,gt=F&&se?F-se:0,Pt=p.length-ot.length,vt=rt?gt:Pt,Dt=ot.length>0,Vt=Dt?Ze:w.noop;(0,A.useEffect)(()=>{ot.length===0&&Ae(!1)},[ot]);const en=async()=>{G&&(G(!1),Ae(!0))},zt=async()=>{G&&(G(!0),Ae(!0))},an=J?se:ot.length,Jt=ot.length,ln=rt?an:Jt,yn=J?`Showing ${At.gr} of ${F} instances`:`Showing all ${F} instances`,En=J?"View all instances":`Limit the result to ${At.gr} instances`,In=F&&At.gr===ot.length&&F>ot.length,Wn=F&&At.gr<ot.length&&!J,On=In||Wn?A.createElement("div",{className:Ke.footerRow},A.createElement("div",null,yn),A.createElement(ge.zx,{size:"sm",variant:"secondary",onClick:J?en:zt},En)):void 0;return A.createElement("div",null,N.groupMode===mt.LM.Default&&A.createElement("button",{className:(0,O.cx)(Ye,Dt?Ke.clickable:""),onClick:()=>Vt()},Dt&&A.createElement(jt.J,{name:be?"angle-down":"angle-right",size:"md"}),A.createElement("span",null,`${ln} ${tn()("instance",ln)}`),vt>0&&A.createElement("span",null,", ",`${vt} hidden by filters`)),be&&A.createElement(Un.o,{instances:ot,pagination:{itemsPerPage:2*$n.gN},footerRow:On}))},Fn=p=>({clickable:(0,O.css)`
    cursor: pointer;
  `,footerRow:(0,O.css)`
    display: flex;
    flex-direction: column;
    gap: ${p.spacing(1)};
    justify-content: space-between;
    align-items: center;
    width: 100%;
  `}),Da="__ungrouped__",Ta=({rules:p,options:N})=>{const F=(0,ct.wW)(Ns),G=N.groupBy,J=(0,A.useMemo)(()=>{const se=new Map,me=Ke=>G?Yt(Ke,G):!0;p.forEach(Ke=>{const Ye=(0,Mt.Re)(Ke),Ze=me(Ke);(Ye?.alerts??[]).forEach(ot=>{const rt=Ze?ca(G,ot.labels):Da,gt=se.get(rt)??[];se.set(rt,[...gt,ot])})});const be=se.get(Da)??[];return se.delete(Da),se.set(Da,be),Array.from(se.entries()).reduce((Ke,[Ye,Ze])=>{const ot=Kn(N,Ze);return ot.length>0&&Ke.set(Ye,ot),Ke},new Map)},[G,p,N]);return A.createElement(A.Fragment,null,Array.from(J).map(([se,me])=>A.createElement("li",{className:F.alertRuleItem,key:se,"data-testid":se},A.createElement("div",null,A.createElement("div",{className:F.customGroupDetails},A.createElement("div",{className:F.alertLabels},se!==Da&&Sa(se).map(([be,Ae])=>A.createElement($t.i,{key:be,labelKey:be,value:Ae})),se===Da&&"No grouping")),A.createElement(kn,{alerts:me,options:N})))))};function ca(p,N){return new URLSearchParams(p.map(F=>[F,N[F]])).toString()}function Sa(p){return[...new URLSearchParams(p)]}function Yt(p,N){const F=(0,Mt.Re)(p);return N.every(G=>(F?.alerts??[]).some(J=>J.labels[G]))}const Kt=Ta;var hn=e(75136),Mn=e(23852),Hn=e(67045),Jn=e(96437),Qn=e(59597);function va(p){return Object.values(p).filter(N=>N!==void 0).reduce((N,F)=>N+F,0)}const Ga=({rules:p,options:N,handleInstancesLimit:F,limitInstances:G,hideViewRuleLinkText:J})=>{const se=(0,ct.wW)(Ns),me=(0,ct.wW)(La),{href:be}=(0,hn.Z)(),Ae=p.length<=N.maxItems?p:p.slice(0,N.maxItems);return A.createElement(A.Fragment,null,A.createElement("ol",{className:se.alertRuleList},Ae.map((Ke,Ye)=>{const{namespaceName:Ze,groupName:ot,dataSourceName:rt}=Ke,gt=(0,Mt.x_)(Ke.promRule)?Ke.promRule:void 0,Pt=(0,Mt.ub)(gt),vt=(0,Jn.Yd)(Ke.dataSourceName,Ke),Dt=(0,Jn.$V)(vt),Vt=Ke.dataSourceName===De.GC?va(Ke.instanceTotals):void 0,en=Ke.dataSourceName===De.GC?va(Ke.filteredInstanceTotals):void 0,zt=(0,Qn.u)(`/alerting/${encodeURIComponent(rt)}/${encodeURIComponent(Dt)}/view`,{returnTo:be??""});return gt?A.createElement("li",{className:se.alertRuleItem,key:`alert-${Ze}-${ot}-${Ke.name}-${Ye}`},A.createElement("div",{className:me.icon},A.createElement(jt.J,{name:sn.Z.getStateDisplayModel(gt.state).iconClass,className:me[(0,Mt.Aq)(gt.state)],size:"lg"})),A.createElement("div",{className:se.alertNameWrapper},A.createElement("div",{className:se.instanceDetails},A.createElement(Mn.K,{direction:"row",gap:1,wrap:!1},A.createElement("div",{className:se.alertName,title:Ke.name},Ke.name),A.createElement(Hn.L,null),zt&&A.createElement("a",{href:zt,target:"__blank",className:se.link,rel:"noopener","aria-label":"View alert rule"},A.createElement("span",{className:(0,O.cx)({[se.hidden]:J})},"View alert rule"),A.createElement(jt.J,{name:"external-link-alt",size:"sm"}))),A.createElement("div",{className:se.alertDuration},A.createElement("span",{className:me[(0,Mt.Aq)(gt.state)]},(0,Mt.SS)(gt.state))," ",Pt&&gt.state!==rn.x_.Inactive&&A.createElement(A.Fragment,null,"for"," ",A.createElement("span",null,(0,ft.vT)({start:Pt,end:Date.now()}))))),A.createElement(kn,{alerts:gt.alerts??[],options:N,grafanaTotalInstances:Vt,grafanaFilteredInstancesTotal:en,handleInstancesLimit:F,limitInstances:G}))):null})))},La=p=>({common:(0,O.css)`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${p.shape.borderRadius()};
    font-size: ${p.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:(0,O.css)`
    margin-top: ${p.spacing(2.5)};
    align-self: flex-start;
  `,good:(0,O.css)`
    color: ${p.colors.success.main};
  `,bad:(0,O.css)`
    color: ${p.colors.error.main};
  `,warning:(0,O.css)`
    color: ${p.colors.warning.main};
  `,neutral:(0,O.css)`
    color: ${p.colors.secondary.main};
  `,info:(0,O.css)`
    color: ${p.colors.primary.main};
  `}),Ia=Ga;function Ka(p){const N=(F,[G,J])=>J?[...F,G]:F;return Object.entries(p).reduce(N,[])}const qa=({dispatch:p,limitInstances:N,matcherList:F,dataSourceName:G,stateList:J})=>{p(G?(0,dt.dn)({rulesSourceName:G,limitAlerts:N?At.gr:void 0,matcher:F,state:J}):(0,dt.ei)(!1,{limitAlerts:N?At.gr:void 0,matcher:F,state:J}))};function hs(p){const N=(0,yt.useDispatch)(),[F,G]=(0,la.Z)(!0),{usePrometheusRulesByNamespaceQuery:J}=ma.alertRuleApi,se=(0,st._)(Ln=>Ln.promRules),me=(0,st._)(Ln=>Ln.rulerRules),be=(0,Bt.wt)(se),Ae=p.width<320;(0,A.useEffect)(()=>{p.options.stateFilter.inactive===!0&&(p.options.stateFilter.normal=!0),p.options.stateFilter.inactive=void 0},[p.options.stateFilter]);let Ke;(0,aa.Z)(()=>{Ke=(0,St.h4)().getCurrent()});const Ye=(0,A.useMemo)(()=>Ka(p.options.stateFilter),[p.options.stateFilter]),{options:Ze,replaceVariables:ot}=p,rt=Ze.datasource===De.JY?De.GC:Ze.datasource,gt={...p.options,alertName:ot(Ze.alertName),alertInstanceLabelFilter:ot(Ze.alertInstanceLabelFilter)},Pt=(0,A.useMemo)(()=>(0,Tt.Zh)(gt.alertInstanceLabelFilter),[gt.alertInstanceLabelFilter]),vt=!rt||rt===De.GC,{currentData:Dt=[],isLoading:Vt,refetch:en}=J({limitAlerts:F?At.gr:void 0,matcher:Pt,state:Ye},{skip:!vt});(0,A.useEffect)(()=>{se.loading||qa({dispatch:N,limitInstances:F,matcherList:Pt,dataSourceName:rt,stateList:Ye});const Ln=Ke?.events.subscribe(ba.md,()=>{vt&&en(),(!rt||rt!==De.GC)&&qa({dispatch:N,limitInstances:F,matcherList:Pt,dataSourceName:rt,stateList:Ye})});return()=>{Ln?.unsubscribe()}},[N,Ke,Pt,Ye,F,rt,en,vt,se.loading]);const zt=Ln=>{Ln?(qa({dispatch:N,limitInstances:F,matcherList:Pt,dataSourceName:rt,stateList:Ye}),G(!0)):(qa({dispatch:N,limitInstances:!1,matcherList:Pt,dataSourceName:rt,stateList:Ye}),G(!1))},an=(0,Rt.Zo)(void 0,Dt),Jt=(0,Bt.wt)(me),ln=(0,Bt.I7)(se),yn=be||Jt,En=(0,Bt.yR)(se),In=(0,ct.wW)(Ns),Wn=(0,Mt.C7)(an),On=p.options.sortOrder,Xn=(0,A.useMemo)(()=>zs(p,$s(On,Wn)),[Wn,On,p]),jn=Xn.length===0?"No alerts matching filters":void 0;return!ka.contextSrv.hasPermission(yt.AccessControlAction.AlertingRuleRead)&&!ka.contextSrv.hasPermission(yt.AccessControlAction.AlertingRuleExternalRead)?A.createElement(ga.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):A.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},A.createElement("div",{className:In.container},(Vt||yn&&En&&!ln)&&A.createElement(Ca.u,{text:"Loading..."}),jn&&A.createElement("div",{className:In.noAlertsMessage},jn),A.createElement("section",null,p.options.viewMode===mt.wO.Stat&&ln&&A.createElement(Ha.w6,{width:p.width,height:p.height,graphMode:Ha.IG.None,textMode:Ha.jG.Auto,justifyMode:Ha.ap.Auto,theme:_e.config.theme2,value:{text:`${Xn.length}`,numeric:Xn.length}}),p.options.viewMode===mt.wO.List&&p.options.groupMode===mt.LM.Custom&&ln&&A.createElement(Kt,{rules:Xn,options:gt}),p.options.viewMode===mt.wO.List&&p.options.groupMode===mt.LM.Default&&ln&&A.createElement(Ia,{rules:Xn,options:gt,handleInstancesLimit:zt,limitInstances:F,hideViewRuleLinkText:Ae}))))}function $s(p,N){if(p===mt.As.Importance)return(0,w.sortBy)(N,G=>sn.Z.alertStateSortScore[G.state]);if(p===mt.As.TimeAsc)return(0,w.sortBy)(N,G=>{const J=(0,Mt.Re)(G)??void 0;return(0,Mt.ub)(J)||new Date});if(p===mt.As.TimeDesc)return(0,w.sortBy)(N,G=>{const J=(0,Mt.Re)(G)??void 0;return(0,Mt.ub)(J)||new Date}).reverse();const F=(0,w.sortBy)(N,G=>G.name.toLowerCase());return p===mt.As.AlphaDesc&&F.reverse(),F}function zs(p,N){const{options:F,replaceVariables:G}=p;let J=[...N];if(F.dashboardAlerts){const se=(0,St.h4)().getCurrent()?.uid;J=J.filter(({annotations:me={}})=>Object.entries(me).some(([be,Ae])=>be===Nt.q6.dashboardUID&&Ae===se))}if(F.alertName){const se=G(F.alertName);J=J.filter(({name:me})=>me.toLocaleLowerCase().includes(se.toLocaleLowerCase()))}if(J=J.filter(se=>{const me=(0,Mt.Re)(se);return me?F.stateFilter.firing&&me.state===rn.x_.Firing||F.stateFilter.pending&&me.state===rn.x_.Pending||F.stateFilter.normal&&me.state===rn.x_.Inactive:!1}),F.folder&&(J=J.filter(se=>se.namespaceName===F.folder.title)),F.datasource){const se=F.datasource===De.JY;J=J.filter(se?({dataSourceName:me})=>me===De.GC:({dataSourceName:me})=>me===F.datasource)}return J=J.reduce((se,me)=>{const be=(0,Mt.Re)(me);return(be?Kn({stateFilter:F.stateFilter,alertInstanceLabelFilter:G(F.alertInstanceLabelFilter)},be.alerts??[]):[]).length&&se.push(me),se},[]),J}const Ns=p=>({cardContainer:(0,O.css)`
    padding: ${p.spacing(.5)} 0 ${p.spacing(.25)} 0;
    line-height: ${p.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:(0,O.css)`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:(0,O.css)`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:(0,O.css)`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${p.colors.background.secondary};
    padding: ${p.spacing(.5)} ${p.spacing(1)};
    border-radius: ${p.shape.borderRadius()};
    margin-bottom: ${p.spacing(.5)};

    gap: ${p.spacing(2)};
  `,alertName:(0,O.css)`
    font-size: ${p.typography.h6.fontSize};
    font-weight: ${p.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:(0,O.css)`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:(0,O.css)`
    > * {
      margin-right: ${p.spacing(.5)};
    }
  `,alertDuration:(0,O.css)`
    font-size: ${p.typography.bodySmall.fontSize};
  `,alertRuleItemText:(0,O.css)`
    font-weight: ${p.typography.fontWeightBold};
    font-size: ${p.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:(0,O.css)`
    color: ${p.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:(0,O.css)`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:(0,O.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:(0,O.css)`
    margin-right: ${p.spacing(.5)};
  `,instanceDetails:(0,O.css)`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:(0,O.css)`
    margin-bottom: ${p.spacing(.5)};
  `,link:(0,O.css)`
    word-break: break-all;
    color: ${p.colors.primary.text};
    display: flex;
    align-items: center;
    gap: ${p.spacing(1)};
  `,hidden:(0,O.css)`
    display: none;
  `});class Xs{getSuggestionsForData(N){const{dataSummary:F}=N;if(F.hasData)return;N.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function ys(p){return p.showOptions===mt.kx.Current}const ua=new ne.c(kt).setPanelOptions(p=>{p.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:mt.kx.Current},{label:"Recent state changes",value:mt.kx.RecentChanges}]},defaultValue:mt.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:mt.As.AlphaAsc},{label:"Alphabetical (desc)",value:mt.As.AlphaDesc},{label:"Importance",value:mt.As.Importance},{label:"Time (asc)",value:mt.As.TimeAsc},{label:"Time (desc)",value:mt.As.TimeDesc}]},defaultValue:mt.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:ys}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:ys}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:F,onChange:G}){return A.createElement(pn,{initialFolderId:F,onChange:J=>G(J?.id),extraFolders:[Sn,Cn]})},category:["Filter"],showIf:ys}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(N){return A.createElement(ze.B,{tags:N.value,onChange:N.onChange})},category:["Filter"],showIf:ys}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:ys}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:ys}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:ys}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:ys}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:ys}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:ys})}).setMigrationHandler(Qt).setSuggestionsSupplier(new Xs),ja=new ne.c(hs).setPanelOptions(p=>{p.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:mt.wO.List,settings:{options:[{label:"List",value:mt.wO.List},{label:"Stat",value:mt.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:mt.LM.Default,settings:{options:[{value:mt.LM.Default,label:"Default grouping"},{value:mt.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:N=>N.groupMode===mt.LM.Custom,category:["Options"],editor:N=>A.createElement(Ma,{id:N.id??"groupBy",defaultValue:N.value.map(F=>({label:F,value:F})),onChange:N.onChange,dataSource:N.context.options.datasource})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:mt.As.AlphaAsc},{label:"Alphabetical (desc)",value:mt.As.AlphaDesc},{label:"Importance",value:mt.As.Importance},{label:"Time (asc)",value:mt.As.TimeAsc},{label:"Time (desc)",value:mt.As.TimeDesc}]},defaultValue:mt.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(F){return A.createElement(nn.q,{...F,type:["prometheus","loki","grafana"],noDefault:!0,current:F.value,onChange:G=>F.onChange(G.name),onClear:()=>F.onChange(null)})},category:["Filter"]}).addCustomEditor({showIf:N=>N.datasource===De.JY||!N.datasource,path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(F){return A.createElement(Oe.Fz,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:F.value?.title,initialFolderUid:F.value?.uid,permissionLevel:yt.PermissionLevelString.View,onClear:()=>F.onChange(""),...F})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),Pa=We.config.unifiedAlertingEnabled?ja:ua;var Ya=e(19973),_s=e(94469),Us=e(3935),ds=e(84714),cn=e(26129),os=e(86004),qs=e(80402),Dr=e(20868),dr=e(5933),Fr=e(20540),As=e(80011);const Qs=({options:p,annotation:N,formatDate:F,onClick:G,onAvatarClick:J,onTagClick:se})=>{const me=(0,ct.wW)(ps),{showUser:be,showTags:Ae,showTime:Ke}=p,{text:Ye="",login:Ze,email:ot,avatarUrl:rt,tags:gt,time:Pt,timeEnd:vt}=N,Dt=()=>{G(N)},Vt=()=>{J(N)},en=Ze&&be,zt=Pt&&Ke,an=vt&&vt!==Pt&&Ke;return A.createElement(Gt.Z,{className:me.card,onClick:Dt},A.createElement(Gt.Z.Heading,null,A.createElement(Fr.D,{className:me.heading,onClick:Jt=>{Jt.stopPropagation()},content:Ye})),zt&&A.createElement(Gt.Z.Description,{className:me.timestamp},A.createElement(ws,{formatDate:F,time:Pt}),an&&A.createElement(A.Fragment,null,A.createElement("span",{className:me.time},"-"),A.createElement(ws,{formatDate:F,time:vt})," ")),en&&A.createElement(Gt.Z.Meta,{className:me.meta},A.createElement(Ls,{email:ot,login:Ze,avatarUrl:rt,onClick:Vt})),Ae&&gt&&A.createElement(Gt.Z.Tags,null,A.createElement(os.P,{tags:gt,onClick:Jt=>se(Jt,!1)})))},Ls=({onClick:p,avatarUrl:N,login:F,email:G})=>{const J=(0,ct.wW)(ps),se=be=>{be.stopPropagation(),p()},me=A.createElement("span",null,"Created by:",A.createElement("br",null)," ",G);return A.createElement(As.u,{content:me,theme:"info",placement:"top"},A.createElement("button",{onClick:se,className:J.avatar,"aria-label":`Created by ${G}`},A.createElement("img",{src:N,alt:"avatar icon"})))},ws=({time:p,formatDate:N})=>{const F=(0,ct.wW)(ps);return A.createElement("span",{className:F.time},A.createElement("span",null,N(p)))};function ps(p){return{card:(0,O.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:p.spacing(1),margin:p.spacing(.5),width:"inherit"}),heading:(0,O.css)({a:{zIndex:1,position:"relative",color:p.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,O.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,O.css)({margin:0,alignSelf:"center"}),time:(0,O.css)({marginLeft:p.spacing(1),marginRight:p.spacing(1),fontSize:p.typography.bodySmall.fontSize,color:p.colors.text.secondary}),avatar:(0,O.css)({border:"none",background:"inherit",margin:0,padding:p.spacing(.5),img:{borderRadius:p.shape.radius.circle,width:p.spacing(2),height:p.spacing(2)}})}}class Sr extends A.PureComponent{constructor(N){super(N),this.style=Lt(We.config.theme2),this.subs=new Ya.w0,this.tagListRef=A.createRef(),this.onAnnoClick=async F=>{if(!F.time)return;const{options:G}=this.props,se=(0,St.h4)().getCurrent(),me={from:this._timeOffset(F.time,G.navigateBefore,!0),to:this._timeOffset(F.timeEnd??F.time,G.navigateAfter,!1)};if(G.navigateToPanel&&(me.viewPanel=F.panelId),se?.uid===F.dashboardUID){cn.E1.partial(me);return}const be=await(0,_t.i)().get("/api/search",{dashboardUIDs:F.dashboardUID});if(be&&be.length&&be[0].uid===F.dashboardUID){const Ae=be[0],Ke=new URL(Ae.url,window.location.origin);Ke.searchParams.set("from",me.from),Ke.searchParams.set("to",me.to),cn.E1.push(_s.u.stripBaseFromUrl(Ke.toString()));return}dr.Z.emit(Us.SI.alertWarning,["Unknown Dashboard: "+F.dashboardUID])},this.onTagClick=(F,G)=>{if(!G&&this.state.queryTags.includes(F))return;const J=G?this.state.queryTags.filter(me=>me!==F):[...this.state.queryTags,F];let se;if(G){const me=document.activeElement,be=me?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(me)&&be){const Ae=Number.parseInt(be,10),Ke=this.tagListRef.current.querySelector(`[data-tag-id="${Ae+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${Ae-1}"]`);Ke instanceof HTMLElement&&(se=Ke)}}this.setState({queryTags:J},()=>se?.focus())},this.onUserClick=F=>{this.setState({queryUser:{id:F.userId,login:F.login,email:F.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(F,G)=>{const{options:J}=this.props,se=(0,St.h4)().getCurrent();return se?A.createElement(Qs,{annotation:F,formatDate:se.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:J}):A.createElement(A.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(ds.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(N,F){const{options:G,timeRange:J}=this.props;(G!==N.options||this.state.queryTags!==F.queryTags||this.state.queryUser!==F.queryUser||N.renderCounter!==this.props.renderCounter||G.onlyInTimeRange&&J!==N.timeRange)&&this.doSearch()}async doSearch(){const{options:N}=this.props,{queryUser:F,queryTags:G}=this.state,J={tags:N.tags,limit:N.limit,type:"annotation"};N.onlyFromThisDashboard&&(J.dashboardUID=(0,St.h4)().getCurrent()?.uid);let se="";if(N.onlyInTimeRange){const{timeRange:be}=this.props;J.from=be.from.valueOf(),J.to=be.to.valueOf()}else se="All Time";F&&(J.userId=F.id),N.tags&&N.tags.length&&(J.tags=N.tags.map(be=>this.props.replaceVariables(be))),G.length&&(J.tags=J.tags?[...J.tags,...G]:G);const me=await(0,_t.i)().get("/api/annotations",J,`anno-list-panel-${this.props.id}`);this.setState({annotations:me,timeInfo:se,loaded:!0})}_timeOffset(N,F,G=!1){let J=5,se="m";const me=/^(\d+)(\w)/.exec(F);me&&me.length===3&&(J=parseInt(me[1],10),se=me[2]);const be=(0,bt.CQ)(N);return G&&(J*=-1),be.add(J,se).valueOf()}render(){const{loaded:N,annotations:F,queryUser:G,queryTags:J}=this.state;if(!N)return A.createElement("div",null,"loading...");const se=G||J.length>0;return A.createElement(qe.$,{autoHeightMin:"100%"},se&&A.createElement("div",{className:this.style.filter},A.createElement("b",null,"Filter:"),G&&A.createElement(ge.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${G.email}`},G.email),J.length>0&&A.createElement(os.P,{icon:"times",tags:J,onClick:me=>this.onTagClick(me,!0),getAriaLabel:me=>`Remove ${me} tag`,className:this.style.tagList,ref:this.tagListRef})),F.length<1&&A.createElement("div",{className:this.style.noneFound},"No Annotations Found"),A.createElement(Dr.L,{items:F,renderItem:this.renderItem,getItemKey:me=>`${me.id}`}))}}const Lt=(0,qs.B)(p=>({noneFound:(0,O.css)`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,O.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:p.spacing(.5),padding:p.spacing(.5)}),tagList:(0,O.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),Ot={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},on=new ne.c(Sr).setPanelOptions(p=>{p.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:Ot.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:Ot.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(N){return A.createElement(ze.B,{tags:N.value,onChange:N.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:Ot.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:Ot.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:Ot.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:Ot.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Ot.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:Ot.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:Ot.navigateAfter,description:""})}).setPanelChangeHandler((p,N,F)=>N==="ryantxu-annolist-panel"?F:p.options);var Xt=e(25587),Dn=e(93666),wn=e(27001),Bn=e(75578),Gn=e(90482),Tn=e(29241),xt=e(64167),Nn=e(55219),Fa=e(53387),us=e(56617),Ts=e(74928),vs=e(1505),Ws=e(77148),xr=e(62575),Mr=e(64987),Za=e(72566),Ps=e(70823),ur=e(11724),Xa=e(59685),Es=e(34072),er=e(71982),Mo=e(30797),Kr=e(18869),vr=e(52995),$r=e(97695),je=e(79248),Zt=e(11921);const Ht=({config:p,onUPlotClick:N,setFocusedSeriesIdx:F,setFocusedPointIdx:G,setCoords:J,setHover:se,isToolTipOpen:me,isActive:be,setIsActive:Ae,sync:Ke})=>{me.current=!1;const Ye=()=>{Ae&&Ae(!0)},Ze=()=>{me.current||(J(null),Ae&&Ae(!1))};let ot=null,rt=null;p.addHook("init",Dt=>{ot=Dt.root.parentElement,rt=Dt.over,ot?.addEventListener("click",N),rt.addEventListener("mouseleave",Ze),rt.addEventListener("mouseenter",Ye),Ke&&Ke()===je.m.Crosshair&&Dt.root.classList.add("shared-crosshair")});const gt=()=>{me.current&&(J(null),N())};p.addHook("drawClear",gt),p.addHook("destroy",()=>{ot?.removeEventListener("click",N),rt?.removeEventListener("mouseleave",Ze),rt?.removeEventListener("mouseenter",Ye),gt()});let Pt;p.addHook("syncRect",(Dt,Vt)=>{Pt=Vt});const vt=p.getTooltipInterpolator();return vt&&p.addHook("setCursor",Dt=>{me.current||vt(F,G,Vt=>{if(Vt){J(null);return}if(!Pt)return;const{x:en,y:zt}=(0,Zt._)(Dt,Pt);en!==void 0&&zt!==void 0&&J({canvas:{x:Dt.cursor.left,y:Dt.cursor.top},viewport:{x:en,y:zt}})},Dt)}),p.addHook("setLegend",Dt=>{if(!me.current&&!vt&&G(Dt.legend.idx),Dt.cursor.idxs!=null)for(let Vt=0;Vt<Dt.cursor.idxs.length;Vt++){const en=Dt.cursor.idxs[Vt];if(en!=null){const zt={xIndex:en,yIndex:0,pageX:Pt.left+Dt.cursor.left,pageY:Pt.top+Dt.cursor.top};(!me.current||!zt)&&se(zt);return}}}),p.addHook("setSeries",(Dt,Vt)=>{me.current||F(Vt)}),p};var fn=e(35952),bn=e(55879),An=e(16546),Vn=e(26712),qn=e(21609),Yn=e(58192),ta=e(48962),pa=e(61965),ms=e(19345),Na=e(48473),Ea=e(82382),Oa=e(96750),za=e(59479),es=e(94876);const tr=za.Gj,nr=za.Gj,gi=8,To=30,go=.65,tc=.1,jd=.15,nc=5,po=10,ac=.1;function Oo(p,N,F,G,J){const se=(0,ur.X1)(p,14),me=N/(se.width+2)*14,be=F/G,Ae=Math.min(be,me);return{fontSize:Math.min(Ae,J??Ae),textMetrics:se}}function ho(p,N){const{xOri:F,xDir:G,rawValue:J,getColor:se,formatValue:me,formatShortValue:be,fillOpacity:Ae=1,showValue:Ke,xSpacing:Ye=0}=p,Ze=F===xt.wN.Horizontal,ot=!p.text?.valueSize,rt=p.stacking!==xt.o0.None,gt=p.stacking===xt.o0.Percent;let{groupWidth:Pt,barWidth:vt,barRadius:Dt=0}=p;rt&&([Pt,vt]=[vt,Pt]);let Vt,en;const zt=Zn=>Array.from(Zn.data[0].map((ra,da)=>da)),an=Ye===0?void 0:(Zn,ra)=>{const da=Zn.bbox.width,Aa=G*(Ze?1:-1);let Wa=ra.length,as=Wa-1,Ja=0,Js=da/Vn.Z.pxRatio,Vs=Math.abs(Math.floor(Js/Ye));Ja=Wa<Vs?0:Math.ceil(Wa/Vs);let xo=ra.map((cr,mi)=>Ja!==0&&(Ye>0?mi:as-mi)%Ja>0?null:cr);return Aa===1?xo:xo.reverse()},Jt=(Zn,ra,da,Aa,Wa)=>{if(p.xTimeAuto){let as=Zn.scales.x,Ja=as.min,Js=as.max;as.min=Zn.data[0][0],as.max=Zn.data[0][Zn.data[0].length-1];let Vs=(0,Xa.mr)(Zn,ra,da,Aa,Wa);return as.min=Ja,as.max=Js,Vs}return ra.map(as=>Ze?be(0,as):me(0,as))},ln=(Zn,ra,da)=>{ra=0,da=Math.max(1,Zn.data[0].length-1);let Aa=0;(0,za.Qm)(Zn.data[0].length,Pt,tr,0,(as,Ja,Js)=>{Aa=Ja+Js/2});let Wa=da-ra;if(Aa===.5)ra-=Wa;else{let Ja=(1/(1-Aa*2)*Wa-Wa)/2;ra-=Ja,da+=Ja}return[ra,da]};let yn=(Zn,ra)=>{let da=Array.from({length:ra},()=>({offs:Array(Zn).fill(0),size:Array(Zn).fill(0)}));return(0,za.Qm)(Zn,Pt,tr,null,(Aa,Wa,as)=>{(0,za.Qm)(ra,vt,nr,null,(Ja,Js,Vs)=>{da[Ja].offs[Aa]=Wa+as*Js,da[Ja].size[Aa]=as*Vs})}),da},En=(Zn,ra)=>{let da=Array.from({length:ra},()=>({offs:Array(Zn).fill(0),size:Array(Zn).fill(0)}));return(0,za.Qm)(Zn,Pt,tr,null,(Aa,Wa,as)=>{(0,za.Qm)(ra,vt,nr,null,(Ja,Js,Vs)=>{da[Ja].offs[Aa]=Wa,da[Ja].size[Aa]=as})}),da};const In=Ze?tc:jd,Wn=Ze?nc:po;let On=[],Xn=[],jn=1,Ln,na=p.text?.valueSize??To,ia=Wn,$a=1/0,Va=1/0,ya=se!=null,_a=ya?{fill:{unit:3,values:(Zn,ra)=>Xn[ra].fill},stroke:{unit:3,values:(Zn,ra)=>Xn[ra].stroke}}:{},fa=Vn.Z.paths.bars({radius:gt?0:rt?(Zn,ra)=>ra===Zn.data.length-1?[Dt,0]:[0,0]:Dt,disp:{x0:{unit:2,values:(Zn,ra)=>On[ra].offs},size:{unit:2,values:(Zn,ra)=>On[ra].size},..._a},each:(Zn,ra,da,Aa,Wa,as,Ja)=>{Aa-=Zn.bbox.left,Wa-=Zn.bbox.top;let Js=Zn.data[ra][da];Ze?($a=Math.min($a,Js<0?Zn.bbox.height-(Wa+Ja):Wa),Va=as):($a=Ja,Va=Math.min(Va,Js<0?Aa:Zn.bbox.width-(Aa+as)));let Vs={x:Aa,y:Wa,w:as,h:Ja,sidx:ra,didx:da};if(p.fullHighlight&&(p.xOri===xt.wN.Horizontal?(Vs.y=0,Vs.h=Zn.bbox.height):(Vs.x=0,Vs.w=Zn.bbox.width)),Vt.add(Vs),Ke!==xt.Jp.Never){const xo=J(ra,da);let cr=1;gt&&ls[ra][da]&&(cr=ls[ra][da]);const mi=cr===0?0:xo/cr,zi=me(ra,mi);if(ia=Math.min(ia,Math.round(In*(Ze?as:Ja))),Ln[da]===void 0&&(Ln[da]={}),Ln[da][ra]={text:zi,value:J(ra,da),hidden:!1},ot){const{fontSize:fo,textMetrics:hr}=Oo(Ln[da][ra].text,Va*(Ze?go:1)-(Ze?0:ia),$a*(Ze?1:go)-(Ze?ia:0),1);Ln[da][ra].textMetrics=hr;let Rs=Math.round(Math.min(na,To,fo));jn=Rs/na*(Rs/14),na=Rs}else Ln[da][ra].textMetrics=(0,ur.X1)(Ln[da][ra].text,na);let Gd=Ze?0:-Math.round(ac*na),Wr=J(ra,da);if(p.negY?.[ra]&&Wr!=null&&(Wr*=-1),Wr!=null){const fo=Zn.bbox.left+(Ze?Aa+as/2:Wr<0?Aa-ia:Aa+as+ia),hr=Zn.bbox.top+(Ze?Wr<0?Wa+Ja+ia:Wa-ia:Wa+Ja/2-Gd),{textMetrics:Rs={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=Ln[da][ra];let fi=0,_o=0;Ze?(fi=Rs.width*jn/2,_o=Wr>0?(Rs.actualBoundingBoxAscent+Rs.actualBoundingBoxDescent)*jn:0):(_o=(Rs.actualBoundingBoxAscent+Rs.actualBoundingBoxDescent)*jn/2,fi=Wr<0?Rs.width*jn:0),Ln[da][ra].x=fo,Ln[da][ra].y=hr,Ln[da][ra].bbox={x:fo-fi,y:hr-_o,w:Rs.width*jn,h:(Rs.actualBoundingBoxAscent+Rs.actualBoundingBoxDescent)*jn}}}}});const ea=Zn=>{let ra=Zn.over;ra.style.overflow="hidden",Zn.root.querySelectorAll(".u-cursor-pt").forEach(da=>{da instanceof HTMLElement&&(da.style.borderRadius="0",p.fullHighlight&&(da.style.zIndex="-1"))})},ha={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(Zn,ra)=>{if(ra===1){en=null;let da=Zn.cursor.left*Vn.Z.pxRatio,Aa=Zn.cursor.top*Vn.Z.pxRatio;Vt.get(da,Aa,1,1,Wa=>{(0,es.Pn)(da,Aa,Wa.x,Wa.y,Wa.x+Wa.w,Wa.y+Wa.h)&&(rt?(en==null||Wa.h*Wa.w<en.h*en.w)&&(en=Wa):en=Wa)})}return en&&ra===en.sidx?en.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(Zn,ra)=>{let da=en&&ra===en.sidx,Aa=0,Wa=0;if(rt&&da){const as=en&&en.sidx>1&&(0,es.zZ)(Vt,en.sidx-1,en.didx);as&&(Ze?Aa=as.h:Wa=as.w)}return{left:da?(en.x+Wa)/Vn.Z.pxRatio:-10,top:da?en.y/Vn.Z.pxRatio:-10,width:da?(en.w-Wa)/Vn.Z.pxRatio:0,height:da?(en.h-Aa)/Vn.Z.pxRatio:0}}}},Ra=Zn=>{if(Vt=Vt||new es.lW(0,0,Zn.bbox.width,Zn.bbox.height),Vt.clear(),Zn.series.forEach(ra=>{ra._paths=null}),rt?On=[null].concat(En(Zn.data[0].length,Zn.data.length-1)):On=[null].concat(yn(Zn.data[0].length,Zn.data.length-1)),ya){Xn=[null];for(let ra=1;ra<Zn.data.length;ra++){let da=Zn.data[ra].map((Aa,Wa)=>Aa!=null?se(ra,Wa,Aa):null);Xn.push({fill:Ae<1?da.map(Aa=>Aa!=null?(0,Oa.alpha)(Aa,Ae):null):da,stroke:da})}}Ln={},na=p.text?.valueSize??To,ia=Wn,$a=Va=1/0},wa=Zn=>{if(Ke===xt.Jp.Never||na<gi)return;Zn.ctx.save(),Zn.ctx.fillStyle=N.colors.text.primary,Zn.ctx.font=`${na}px ${N.typography.fontFamily}`;let ra,da;for(const Aa in Ln){let Wa=!0;for(const as in Ln[Aa]){const Ja=Ln[Aa][as],{text:Js,x:Vs=0,y:xo=0}=Ja;let{value:cr}=Ja;p.negY?.[as]&&cr!=null&&(cr*=-1);let mi=Ze?"center":cr!==null&&cr<0?"right":"left",zi=Ze?cr!==null&&cr<0?"top":"alphabetic":"middle";if(mi!==ra&&(Zn.ctx.textAlign=ra=mi),zi!==da&&(Zn.ctx.textBaseline=da=zi),Ke===xt.Jp.Always)Zn.ctx.fillText(Js,Vs,xo);else if(Ke===xt.Jp.Auto){let{bbox:Gd}=Ja,Wr=!1;if(Gd==null)Wr=!0,Ja.hidden=!0;else if(!Wa)for(const fo in Ln[Aa]){if(fo===as)continue;const hr=Ln[Aa][fo],{bbox:Rs,hidden:fi}=hr;if(!fi&&Rs&&(0,es.kK)(Gd,Rs)){Wr=!0,Ja.hidden=!0;break}}Wa=!1,!Wr&&Zn.ctx.fillText(Js,Vs,xo)}}}Zn.ctx.restore()},Ba=(Zn,ra,da,Aa)=>{en?(Zn(en.sidx),ra(en.didx),da()):da(!0)};let ls=null;function ts(Zn,ra){return ls=null,(0,Na.Bj)(Zn[0],ra,({totals:da})=>{ls=da})}return{cursor:ha,xRange:ln,xValues:Jt,xSplits:zt,hFilter:an,barsBuilder:fa,init:ea,drawClear:Ra,draw:wa,interpolateTooltip:Ba,prepData:ts}}const Vr={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:xt.wm.Auto,showValue:xt.Jp.Auto,stacking:xt.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},_i={fillOpacity:80,gradientMode:xt.FI.None,lineWidth:1};function Bm(p){return p===Gn.wm.Vertical?{xOri:xt.wN.Horizontal,xDir:xt.bQ.Right,yOri:xt.wN.Vertical,yDir:xt.bQ.Up}:{xOri:xt.wN.Vertical,xDir:xt.bQ.Down,yOri:xt.wN.Horizontal,yDir:xt.bQ.Right}}const ko=({frame:p,theme:N,orientation:F,showValue:G,groupWidth:J,barWidth:se,barRadius:me=0,stacking:be,text:Ae,rawValue:Ke,getColor:Ye,fillOpacity:Ze,allFrames:ot,xTickLabelRotation:rt,xTickLabelMaxLength:gt,xTickLabelSpacing:Pt=0,legend:vt,timeZone:Dt,fullHighlight:Vt})=>{const en=new ms.U,zt=(jn,Ln)=>(0,qn.zc)(p.fields[jn].display(Ln)),an=(jn,Ln)=>Ar(zt(jn,Ln),gt),Jt=Bm(F);p.fields.length===2&&(J=se,se=1);const ln={xOri:Jt.xOri,xDir:Jt.xDir,groupWidth:J,barWidth:se,barRadius:me,stacking:be,rawValue:Ke,getColor:Ye,fillOpacity:Ze,formatValue:zt,formatShortValue:an,timeZone:Dt,text:Ae,showValue:G,legend:vt,xSpacing:Pt,xTimeAuto:p.fields[0]?.type===Tn.fS.time&&!p.fields[0].config.unit?.startsWith("time:"),negY:p.fields.map(jn=>jn.config.custom?.transform===xt.pR.NegativeY),fullHighlight:Vt},yn=ho(ln,N);if(en.setCursor(yn.cursor),en.addHook("init",yn.init),en.addHook("drawClear",yn.drawClear),en.addHook("draw",yn.draw),en.setTooltipInterpolator(yn.interpolateTooltip),rt!==0){let jn=50,Ln=Jt.xOri===xt.wN.Horizontal?14:5;en.setPadding(Qd(p,rt,gt,jn,Ln))}en.setPrepData(yn.prepData),en.addScale({scaleKey:"x",isTime:!1,range:yn.xRange,distribution:xt.wf.Ordinal,orientation:Jt.xOri,direction:Jt.xDir});const En=p.fields[0].config.custom?.axisPlacement!==xt.LB.Hidden?Jt.xOri===xt.wN.Horizontal?xt.LB.Bottom:xt.LB.Left:xt.LB.Hidden,In=p.fields[0].config.custom?.axisPlacement!==xt.LB.Hidden;en.addAxis({scaleKey:"x",isTime:!1,placement:En,label:p.fields[0].config.custom?.axisLabel,splits:yn.xSplits,filter:Jt.xOri===0?yn.hFilter:void 0,values:yn.xValues,timeZone:Dt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:Jt.xOri===0?rt*-1:0,theme:N,show:In});let Wn=0;const On=zr(vt);for(let jn=1;jn<p.fields.length;jn++){const Ln=p.fields[jn];Wn++;const na={..._i,...Ln.config.custom},ia=Ln.config.unit||Kr.j,$a=(0,Yn.fD)(Ln),ya=(0,Yn.YO)(Ln,N).color;let _a=na.axisSoftMin,fa=na.axisSoftMax;if(_a==null&&Ln.config.min==null&&(_a=0),fa==null&&Ln.config.max==null&&(fa=0),na.thresholdsStyle&&Ln.config.thresholds&&(na.thresholdsStyle.mode??xt.i3.Off)!==xt.i3.Off&&en.addThresholds({config:na.thresholdsStyle,thresholds:Ln.config.thresholds,scaleKey:ia,theme:N,hardMin:Ln.config.min,hardMax:Ln.config.max,softMin:na.axisSoftMin,softMax:na.axisSoftMax}),en.addSeries({scaleKey:ia,pxAlign:!0,lineWidth:na.lineWidth,lineColor:ya,fillOpacity:na.fillOpacity,theme:N,colorMode:$a,pathBuilder:yn.barsBuilder,show:!na.hideFrom?.viz,gradientMode:na.gradientMode,thresholds:Ln.config.thresholds,hardMin:Ln.config.min,hardMax:Ln.config.max,softMin:_a,softMax:fa,dataFrameFieldIndex:{fieldIndex:On?jn:ot[0].fields.findIndex(ea=>ea.type===Tn.fS.number&&ea.state?.seriesIndex===Wn-1),frameIndex:0}}),en.addScale({scaleKey:ia,min:Ln.config.min,max:Ln.config.max,softMin:_a,softMax:fa,orientation:Jt.yOri,direction:Jt.yDir,distribution:na.scaleDistribution?.type,log:na.scaleDistribution?.log}),na.axisPlacement!==xt.LB.Hidden){let ea=na.axisPlacement;(!ea||ea===xt.LB.Auto)&&(ea=xt.LB.Left),Jt.xOri===1&&(ea===xt.LB.Left&&(ea=xt.LB.Bottom),ea===xt.LB.Right&&(ea=xt.LB.Top)),en.addAxis({scaleKey:ia,label:na.axisLabel,size:na.axisWidth,placement:ea,formatValue:(ha,Ra)=>(0,qn.zc)(Ln.display(ha,Ra)),filter:Jt.yOri===0?yn.hFilter:void 0,tickLabelRotation:Jt.xOri===1?rt*-1:0,theme:N,grid:{show:na.axisGridShow}})}}let Xn=(0,Na.i7)(p);return en.setStackingGroups(Xn),en};function Ar(p,N){return p.length>N?p.substring(0,N).concat("..."):p}function Qd(p,N,F,G=0,J=0){const se=p.fields[0].values,me=Xa.gD,be=p.fields[0].display,Ae=rt=>be?be(se[rt]):se[rt];let Ke=0;for(let rt=0;rt<se.length;rt++){let gt=(0,ur.X1)(Ar((0,qn.zc)(Ae(rt)),F),me);Ke=gt.width>Ke?gt.width:Ke}const Ye=N>0?Math.cos(N*Math.PI/180)*(0,ur.X1)(Ar((0,qn.zc)(Ae(se.length-1)),F),me).width:0,Ze=N<0?Math.cos(N*-1*Math.PI/180)*(0,ur.X1)(Ar((0,qn.zc)(Ae(0)),F),me).width:0,ot=Math.sin((N>=0?N:N*-1)*Math.PI/180)*Ke-J;return[Math.round(Xa.gD*Vn.Z.pxRatio),Ye,ot,Math.max(0,Ze-G)]}function sc(p,N,F){if(!p?.length)return{warn:"No data in response"};(0,Bn.UY)(p);const G=p.length===1?(0,ta.Y3)(p[0],p[0].fields.findIndex(Ze=>Ze.type===Tn.fS.time)):(0,ta._9)({frames:p});if(!G)return{warn:"Unable to join data"};let J;if(F.colorByField&&(J=(0,Ea.findField)(G,F.colorByField),!J))return{warn:"Color field not found"};let se;if(F.xField&&(se=(0,Ea.findField)(G,F.xField),!se))return{warn:"Configured x field not found"};let me,be,Ae=[];for(const Ze of G.fields)if(Ze!==se)switch(Ze.type){case Tn.fS.string:me||(me=Ze);break;case Tn.fS.time:be||(be=Ze);break;case Tn.fS.number:{const ot={...Ze,state:{...Ze.state,seriesIndex:Ae.length},config:{...Ze.config,custom:{...Ze.config.custom,stacking:{group:"_",mode:F.stacking}}},values:Ze.values.map(rt=>Number.isFinite(rt)||rt==null?rt:null)};F.stacking===xt.o0.Percent&&(ot.config.unit="percentunit",ot.display=(0,pa.U)({field:ot,theme:N})),Ae.push(ot)}}let Ke=se;if(Ke||(Ke=me||be),!Ke)return{warn:"Bar charts requires a string or time field"};if(!Ae.length)return{warn:"No numeric fields found"};if(J&&Ae.length>1){const Ze=Ae.find(ot=>ot!==J);Ze&&(Ae=[Ze])}let Ye=Ae;return F.stacking===xt.o0.Percent&&(Ye=Ae.map(Ze=>{const ot=G.fields.find(gt=>gt.state?.displayName===Ze.state?.displayName),rt={...Ze,config:{...ot.config},values:Ze.values};return rt.display=(0,pa.U)({field:rt,theme:N}),rt}),Ye.unshift(Ke)),Ae.unshift(Ke),{aligned:G,colorByField:J,viz:[{length:Ke.values.length,fields:Ae}],legend:{fields:Ye,length:Ke.values.length}}}const zr=p=>!!(p?.sortBy&&p.sortDesc!==null),Ua=10,vo=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(p,N)=>N.text?.valueSize===p.text?.valueSize],ks=({data:p,options:N,fieldConfig:F,width:G,height:J,timeZone:se,id:me})=>{const be=(0,ct.l4)(),{eventBus:Ae}=(0,Ps.R9)(),Ke=(0,A.useRef)(void 0),Ye=(0,A.useRef)(!1),[Ze,ot]=(0,A.useState)(void 0),[rt,gt]=(0,A.useState)(null),[Pt,vt]=(0,A.useState)(null),[Dt,Vt]=(0,A.useState)(null),[en,zt]=(0,A.useState)(!1),[an,Jt]=(0,A.useState)(!1),ln=()=>{Ye.current=!1,gt(null),Jt(!1)},yn=()=>{Ye.current=!Ye.current,Jt(Ye.current)},En=(0,A.useRef)(),In=(0,A.useRef)(),Wn=(0,A.useMemo)(()=>sc(p.series,be,N),[p.series,be,N]),On="viz"in Wn?Wn:null;In.current=On?.colorByField;const Xn=(0,A.useRef)(1e4);(0,A.useMemo)(()=>{Xn.current++},[N]);const jn=(0,A.useMemo)(()=>{const ea=On?.viz[0],ha=En.current;return ea&&ha&&(0,Mr.Ch)(ea,ha,!0)||Xn.current++,En.current=ea,(p.structureRev??0)+Xn.current},[On,p.structureRev]),Ln=(0,A.useMemo)(()=>!N.orientation||N.orientation===Gn.wm.Auto?G<J?Gn.wm.Horizontal:Gn.wm.Vertical:N.orientation,[G,J,N.orientation]),na=(0,A.useMemo)(()=>{if(N.xTickLabelMaxLength)return N.xTickLabelMaxLength;{const ea=N.xTickLabelRotation,ha=(0,ur.X1)("M",Xa.gD).width;return J/2/(Math.sin((ea>=0?ea:ea*-1)*Math.PI/180)*ha)-3}},[J,N.xTickLabelRotation,N.xTickLabelMaxLength]);if("warn"in Wn)return A.createElement(Za.Z,{panelId:me,fieldConfig:F,data:p,message:Wn.warn,needsNumberField:!0});const ia=(ea,ha,Ra)=>{const wa=ha==null?null:ea.fields[ha];if(wa){const ts=(0,Bn.CZ)(wa,ea);ha=Wn.aligned.fields.findIndex(Zn=>ts===(0,Bn.CZ)(Zn,Wn.aligned))}const Ba=N.fullHighlight&&N.stacking!==xt.o0.None?xt.f3.Multi:N.tooltip.mode,ls=N.tooltip.mode===xt.f3.Multi?N.tooltip.sort:xt.As.None;return A.createElement(A.Fragment,null,an&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(fn.P,{onClick:ln,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(An.H,{data:Wn.aligned,rowIndex:Ra,columnIndex:ha,sortOrder:ls,mode:Ba}))},$a=ea=>{const{legend:ha}=N;if(!ea||ha.showLegend===!1)return null;if(Wn.colorByField){const Ra=(0,bn.$m)([Wn.colorByField],be);if(Ra?.length)return A.createElement(Es.AY.Legend,{placement:ha.placement},A.createElement(er.l,{placement:ha.placement,items:Ra,displayMode:ha.displayMode}))}return A.createElement(Mo.l,{data:[Wn.legend],config:ea,maxHeight:"35%",maxWidth:"60%",...N.legend})},Va=(ea,ha)=>En.current.fields[ea].values[ha];let ya,_a=1;if(Wn.colorByField){const ea=Wn.colorByField,ha=ea.display;_a=(ea.config.custom.fillOpacity??100)/100,ya=(Ra,wa)=>ha(In.current?.values[wa]).color}else En.current.fields.some(ha=>ha.config.custom?.gradientMode===xt.FI.Scheme&&ha.config.color?.mode===Dn.S.Thresholds||ha.config.mappings?.some(wa=>wa.type==="value"?Object.values(wa.options).some(Ba=>Ba.color!=null):wa.options.result.color!=null))&&(_a=(En.current.fields.find(Ra=>Ra.type===Tn.fS.number).config.custom.fillOpacity??100)/100,ya=(Ra,wa)=>{let Ba=En.current.fields[Ra];return Ba.display(Ba.values[wa]).color});const fa=(ea,ha,Ra)=>{const{barWidth:wa,barRadius:Ba=0,showValue:ls,groupWidth:ts,stacking:Zn,legend:ra,tooltip:da,text:Aa,xTickLabelRotation:Wa,xTickLabelSpacing:as,fullHighlight:Ja}=N;return ko({frame:ea,getTimeRange:Ra,timeZone:se,theme:be,timeZones:[se],eventBus:Ae,orientation:Ln,barWidth:wa,barRadius:Ba,showValue:ls,groupWidth:ts,xTickLabelRotation:Wa,xTickLabelMaxLength:na,xTickLabelSpacing:as,stacking:Zn,legend:ra,tooltip:da,text:Aa,rawValue:Va,getColor:ya,fillOpacity:_a,allFrames:Wn.viz,fullHighlight:Ja})};return A.createElement(Kr.d,{theme:be,frames:Wn.viz,prepConfig:fa,propsToDiff:vo,preparePlotFrame:ea=>ea[0],renderLegend:$a,legend:N.legend,timeZone:se,timeRange:{from:1,to:1},structureRev:jn,width:G,height:J},ea=>(Ke.current!==ea&&(Ke.current=Ht({config:ea,onUPlotClick:yn,setFocusedSeriesIdx:vt,setFocusedPointIdx:Vt,setCoords:gt,setHover:ot,isToolTipOpen:Ye,isActive:en,setIsActive:zt})),N.tooltip.mode===xt.f3.None?null:A.createElement(vr.h_,null,Ze&&rt&&Pt&&A.createElement($r.S,{position:{x:rt.viewport.x,y:rt.viewport.y},offset:{x:Ua,y:Ua},allowPointerEvents:Ye.current},ia(Wn.viz[0],Pt,Dt)))))};var ar=e(64022),pi=e(40705),rc=e(83967);const hi=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],ki=p=>{let N=p.value??0;const F=N<0;F&&(N*=-1);let G=hi[0];for(const me of hi)if(G=me,N<=G.value)break;const J=me=>{p.onChange(me*(F?-1:1))},se=()=>{p.onChange(p.value*-1)};return A.createElement(ar.Lh,null,A.createElement(pi.S,{value:G.value,options:hi,onChange:J}),N!==0&&A.createElement(As.u,{content:"Require space from the right side",placement:"top"},A.createElement("div",null,A.createElement(rc.X,{value:F,onChange:se,label:"RTL"}))))};var ns=e(7641);class Hi{getListWithDefaults(N){return N.getListAppender({name:ns.y.BarChart,pluginId:"barchart",options:{showValue:xt.Jp.Never,legend:{calcs:[],displayMode:xt.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:F=>{F.options.barWidth=.8}}})}getSuggestionsForData(N){const F=this.getListWithDefaults(N),{dataSummary:G}=N;G.frameCount===1&&(!G.hasNumberField||!G.hasStringField||G.rowCountTotal>50||(F.append({name:ns.y.BarChart}),G.numberFieldCount>1&&(F.append({name:ns.y.BarChartStacked,options:{stacking:xt.o0.Normal}}),F.append({name:ns.y.BarChartStackedPercent,options:{stacking:xt.o0.Percent}})),F.append({name:ns.y.BarChartHorizontal,options:{orientation:Gn.wm.Horizontal}}),G.numberFieldCount>1&&(F.append({name:ns.y.BarChartHorizontalStacked,options:{stacking:xt.o0.Normal,orientation:Gn.wm.Horizontal}}),F.append({name:ns.y.BarChartHorizontalStackedPercent,options:{orientation:Gn.wm.Horizontal,stacking:xt.o0.Percent}}))))}}const Fs=new ne.c(ks).useFieldConfig({standardOptions:{[Xt.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Dn.S.PaletteClassic}}},useCustomConfig:p=>{const N=_i;p.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:N.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:N.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Nn.q.fillGradient[0].value,settings:{options:Nn.q.fillGradient}}),p.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:xt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:xt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),p.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:xt.i3.Off},settings:{options:Nn.q.thresholdsDisplayModes},editor:xr.F,override:xr.F,process:wn.kG,shouldApply:()=>!0}),Fa.r(p,N,!1),us.B(p)}}).setPanelOptions((p,N)=>{const F=sc(N.data,We.config.theme2,N.options??{});let G="First string or time field";const J="viz"in F?F.viz[0]:void 0;if(J?.fields?.length){const se=J.fields[0];G+=` (${(0,Bn.CZ)(se,J)})`}p.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:G}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:Gn.wm.Auto,label:"Auto"},{value:Gn.wm.Horizontal,label:"Horizontal"},{value:Gn.wm.Vertical,label:"Vertical"}]},defaultValue:Vr.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Vr.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:se=>se.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Vr.xTickLabelSpacing,editor:ki}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xt.Jp.Auto,label:"Auto"},{value:xt.Jp.Always,label:"Always"},{value:xt.Jp.Never,label:"Never"}]},defaultValue:Vr.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:Nn.q.stacking},defaultValue:Vr.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Vr.groupWidth,settings:{min:0,max:1,step:.01},showIf:(se,me)=>se.stacking&&se.stacking!==xt.o0.None?!1:oc(me)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Vr.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Vr.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Vr.fullHighlight}),p.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!N.options?.fullHighlight||N.options?.stacking===xt.o0.None)&&Ts.L(p),vs.J(p),Ws.Z(p,!1)}).setSuggestionsSupplier(new Hi);function oc(p){let N=0;if(p)for(const F of p)for(const G of F.fields)G.type===Tn.fS.number&&N++;return N}var Eo=e(50250),Ho=e(14035);const Gi=p=>(0,Eo.rD)(p);var ic=e(72082);const Io={displayMode:xt.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0,valueMode:xt.M8.Color};class ji{getSuggestionsForData(N){const{dataSummary:F}=N;if(!F.hasData||!F.hasNumberField)return;const G=N.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});F.numberFieldCount>50||(F.hasStringField&&F.frameCount===1&&F.rowCountTotal<30?(G.append({name:ns.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:xt.QH.Basic,orientation:Gn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),G.append({name:ns.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:xt.QH.Lcd,orientation:Gn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(G.append({name:ns.y.BarGaugeBasic,options:{displayMode:xt.QH.Basic,orientation:Gn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),G.append({name:ns.y.BarGaugeLCD,options:{displayMode:xt.QH.Lcd,orientation:Gn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const yo=new ne.c(ic.M).useFieldConfig().setPanelOptions(p=>{(0,Ho.j)(p),(0,Ho.h)(p),Ws.Z(p),p.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:xt.QH.Gradient,label:"Gradient"},{value:xt.QH.Lcd,label:"Retro LCD"},{value:xt.QH.Basic,label:"Basic"}]},defaultValue:Io.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:xt.M8.Color,label:"Value color"},{value:xt.M8.Text,label:"Text color"},{value:xt.M8.Hidden,label:"Hidden"}]},defaultValue:Io.valueMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Io.showUnfilled,showIf:N=>N.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:Io.minVizWidth,showIf:N=>N.orientation===Gn.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:Io.minVizHeight,showIf:N=>N.orientation===Gn.wm.Horizontal})}).setPanelChangeHandler(Eo.ZH).setMigrationHandler(Gi).setSuggestionsSupplier(new ji);var _r=e(2643),Qi=e(21708),Ro=e(25181),bo=e(67151),Go=e(20205),Yd=e(93562),vi=e(76566),Ao=e(5354);const jo=p=>N=>{const F=p.visualization.getColorByName(N?.color||Ao.Jx);return{markerTriangle:(0,O.css)`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${F};
      `,markerBar:(0,O.css)`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${F};
      `}};var lc=e(58281),Zd=e(79812),Jd=e(23839),fs=e(22209),cc=e(60105),Xd=e(16310),Yi=e(1041),dc=e(11285);const Zi=A.forwardRef(({annotation:p,onSave:N,onDismiss:F,timeFormatter:G,className:J,...se},me)=>{const be=(0,ct.wW)(Er),Ae=(0,Ps.R9)(),Ke=(0,A.useRef)(null);(0,Zd.Z)(Ke,()=>{F()});const[Ye,Ze]=(0,lc.default)(async an=>{const Jt=await Ae.onAnnotationCreate(an);return N&&N(),Jt}),[ot,rt]=(0,lc.default)(async an=>{const Jt=await Ae.onAnnotationUpdate(an);return N&&N(),Jt}),gt=p.id!==void 0,Pt=p.time!==p.timeEnd,vt=gt?rt:Ze,Dt=gt?ot:Ye,Vt=Pt?`${G(p.time)} - ${G(p.timeEnd)}`:G(p.time),en=({tags:an,description:Jt})=>{vt({id:p.id,tags:an,description:Jt,from:Math.round(p.time),to:Math.round(p.timeEnd)})},zt=A.createElement("div",{ref:me,className:(0,O.cx)(be.editor,J),...se},A.createElement("div",{className:be.header},A.createElement(ar.Lh,{justify:"space-between",align:"center"},A.createElement("div",{className:be.title},"Add annotation"),A.createElement("div",{className:be.ts},Vt))),A.createElement("div",{className:be.editorForm},A.createElement(Jd.l,{onSubmit:en,defaultValues:{description:p?.text,tags:p?.tags||[]}},({register:an,errors:Jt,control:ln})=>A.createElement(A.Fragment,null,A.createElement(fs.g,{label:"Description",invalid:!!Jt.description,error:Jt?.description?.message},A.createElement(cc.K,{...an("description",{required:"Annotation description is required"})})),A.createElement(fs.g,{label:"Tags"},A.createElement(Xd.g,{control:ln,name:"tags",render:({field:{ref:yn,onChange:En,...In}})=>A.createElement(Yi.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:En,tagOptions:dc.lK,tags:In.value})})),A.createElement(ar.Lh,{justify:"flex-end"},A.createElement(ge.zx,{size:"sm",variant:"secondary",onClick:F,fill:"outline"},"Cancel"),A.createElement(ge.zx,{size:"sm",type:"submit",disabled:Dt?.loading},Dt?.loading?"Saving":"Save"))))));return A.createElement(A.Fragment,null,A.createElement("div",{className:be.backdrop}),A.createElement("div",{ref:Ke},zt))});Zi.displayName="AnnotationEditorForm";const Er=p=>({backdrop:(0,O.css)`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${p.zIndex.navbarFixed};
    `,editorContainer:(0,O.css)`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:(0,O.css)`
      background: ${p.colors.background.primary};
      box-shadow: ${p.shadows.z3};
      z-index: ${p.zIndex.dropdown};
      border: 1px solid ${p.colors.border.weak};
      border-radius: ${p.shape.borderRadius()};
      width: 460px;
    `,editorForm:(0,O.css)`
      padding: ${p.spacing(1)};
    `,header:(0,O.css)`
      border-bottom: 1px solid ${p.colors.border.weak};
      padding: ${p.spacing(1.5,1)};
    `,title:(0,O.css)`
      font-weight: ${p.typography.fontWeightMedium};
    `,ts:(0,O.css)`
      font-size: ${p.typography.bodySmall.fontSize};
      color: ${p.colors.text.secondary};
    `}),uc=({onDismiss:p,onSave:N,timeZone:F,data:G,selection:J,annotation:se,style:me})=>{const be=(0,ct.l4)(),Ae=(0,ct.wW)(qd),Ke=(0,ct.wW)(jo),[Ye,Ze]=(0,A.useState)(null),[ot,rt]=(0,A.useState)(null),gt=(0,vi.D)(Ye,ot,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let Pt=G.fields[0];if(!Pt)return null;const vt=Pt.display||(0,pa.U)({field:Pt,timeZone:F,theme:be}),Dt=J.min!==J.max;return A.createElement(vr.h_,null,A.createElement(A.Fragment,null,A.createElement("div",{style:me},A.createElement("div",{className:(0,O.cx)((0,O.css)`
                position: absolute;
                top: ${J.bbox.top}px;
                left: ${J.bbox.left}px;
                width: ${J.bbox.width}px;
                height: ${J.bbox.height}px;
              `,Dt?Ae.overlayRange(se):Ae.overlay(se))},A.createElement("div",{ref:Ze,className:Dt?(0,O.cx)(Ke(se).markerBar,Ae.markerBar):(0,O.cx)(Ke(se).markerTriangle,Ae.markerTriangle)}))),A.createElement(Zi,{annotation:se||{time:J.min,timeEnd:J.max},timeFormatter:Vt=>vt(Vt).text,onSave:N,onDismiss:p,ref:rt,style:gt.styles.popper,...gt.attributes.popper})))},qd=p=>({overlay:N=>{const F=p.visualization.getColorByName(N?.color||Ao.Jx);return(0,O.css)`
        border-left: 1px dashed ${F};
      `},overlayRange:N=>{const F=p.visualization.getColorByName(N?.color||Ao.Jx);return(0,O.css)`
        background: ${Oa.alpha(F,.1)};
        border-left: 1px dashed ${F};
        border-right: 1px dashed ${F};
      `},markerTriangle:(0,O.css)`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:(0,O.css)`
      top: 100%;
      left: 0;
      position: absolute;
    `}),mr=({data:p,timeZone:N,config:F,children:G})=>{const J=(0,A.useRef)(),[se,me]=(0,A.useState)(),[be,Ae]=(0,A.useState)(!1),[Ke,Ye]=(0,A.useState)(null),Ze=(0,Yd.Z)(),ot=(0,A.useCallback)(()=>{Ye(null),J.current&&J.current.setSelect({top:0,left:0,width:0,height:0}),Ae(!1)},[Ae,Ye]);(0,A.useLayoutEffect)(()=>{let gt=!1;F.addHook("init",vt=>{J.current=vt;const Dt=vt.hooks.setSelect;if(Dt)for(let Vt=0;Vt<Dt.length;Vt++){const en=Dt[Vt];en!==Pt&&(Dt[Vt]=(...zt)=>{!gt&&en(...zt)})}}),F.addHook("syncRect",(vt,Dt)=>{Ze()&&me(Dt)});const Pt=vt=>{gt&&(Ae(!0),Ye({min:vt.posToVal(vt.select.left,"x"),max:vt.posToVal(vt.select.left+vt.select.width,"x"),bbox:{left:vt.select.left,top:0,height:vt.select.height,width:vt.select.width}}),gt=!1)};F.addHook("setSelect",Pt),F.setCursor({bind:{mousedown:(vt,Dt,Vt)=>en=>(gt=en.button===0&&(en.metaKey||en.ctrlKey),Vt(en),null),mouseup:(vt,Dt,Vt)=>en=>(gt&&vt.select.width===0&&(vt.select.left=vt.cursor.left,vt.select.height=vt.bbox.height/window.devicePixelRatio),Vt(en),null)}})},[F,me,Ze]);const rt=(0,A.useCallback)(({coords:gt})=>{if(!J.current||!se||!gt)return;const Pt=J.current.posToVal(gt.plotCanvas.x,"x");Pt&&(Ye({min:Pt,max:Pt,bbox:{left:gt.plotCanvas.x,top:0,height:se.height,width:0}}),Ae(!0))},[se]);return A.createElement(A.Fragment,null,be&&Ke&&se&&A.createElement(uc,{selection:Ke,onDismiss:ot,onSave:ot,data:p,timeZone:N,style:{position:"absolute",top:`${se.top}px`,left:`${se.left}px`,width:`${se.width}px`,height:`${se.height}px`}}),G?G({startAnnotating:rt}):null)};var Ji=e(27938),Ei=e(42341),Qo=e(60956),mc=e(65347),yi=e(97289),Xi=e(48154),Po=e(67437),qi=e(65333);const fc=({annotation:p,timeFormatter:N,canEdit:F,canDelete:G,onEdit:J,onDelete:se})=>{const me=(0,ct.wW)(eu),be=N(p.time),Ae=N(p.timeEnd);let Ke=p.text;const Ye=p.tags;let Ze="",ot,rt,gt=null;const Pt=A.createElement("span",{className:me.time},p.isRegion?`${be} - ${Ae}`:be);if(p.login&&p.avatarUrl&&(ot=A.createElement("img",{className:me.avatar,alt:"Annotation avatar",src:p.avatarUrl})),p.alertId!==void 0&&p.newState){const vt=sn.Z.getStateDisplayModel(p.newState);gt=A.createElement("div",{className:me.alertState},A.createElement("i",{className:vt.stateClass},vt.text)),Ze=sn.Z.getAlertAnnotationInfo(p)}else p.title&&(Ke=p.title+"<br />"+(typeof Ke=="string"?Ke:""));return(F||G)&&(rt=A.createElement("div",{className:me.editControls},F&&A.createElement(Po.h,{name:"pen",size:"sm",onClick:J,tooltip:"Edit"}),G&&A.createElement(Po.h,{name:"trash-alt",size:"sm",onClick:se,tooltip:"Delete"}))),A.createElement("div",{className:me.wrapper},A.createElement("div",{className:me.header},A.createElement(ar.Lh,{justify:"space-between",align:"center",spacing:"md"},A.createElement("div",{className:me.meta},A.createElement("span",null,ot,gt),Pt),rt)),A.createElement("div",{className:me.body},Ke&&A.createElement("div",{dangerouslySetInnerHTML:{__html:Xi.QX.sanitize(Ke)}}),Ze,A.createElement(A.Fragment,null,A.createElement(ar.Lh,{spacing:"xs",wrap:!0},Ye?.map((vt,Dt)=>A.createElement(qi.V,{name:vt,key:`${vt}-${Dt}`}))))))};fc.displayName="AnnotationTooltip";const eu=p=>({wrapper:(0,O.css)`
      max-width: 400px;
    `,commentWrapper:(0,O.css)`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:(0,O.css)`
      padding: ${p.spacing(.5,1)};
      border-bottom: 1px solid ${p.colors.border.weak};
      font-size: ${p.typography.bodySmall.fontSize};
      display: flex;
    `,meta:(0,O.css)`
      display: flex;
      justify-content: space-between;
    `,editControls:(0,O.css)`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:(0,O.css)`
      border-radius: ${p.shape.radius.circle};
      width: 16px;
      height: 16px;
      margin-right: ${p.spacing(1)};
    `,alertState:(0,O.css)`
      padding-right: ${p.spacing(1)};
      font-weight: ${p.typography.fontWeightMedium};
    `,time:(0,O.css)`
      color: ${p.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:(0,O.css)`
      padding: ${p.spacing(1)};

      a {
        color: ${p.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),gc=6,sr={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function el({annotation:p,timeZone:N,width:F}){const{canAddAnnotations:G,canEditAnnotations:J,canDeleteAnnotations:se,...me}=(0,Ps.R9)(),be=(0,ct.wW)(jo),Ae=(0,ct.wW)(no),[Ke,Ye]=(0,A.useState)(!1),[Ze,ot]=(0,A.useState)(!1),[rt,gt]=(0,A.useState)(null),[Pt,vt]=(0,A.useState)(null),[Dt,Vt]=(0,A.useState)(null),en=(0,A.useRef)(),zt=(0,vi.D)(rt,Pt,sr),an=(0,vi.D)(rt,Dt,sr),Jt=(0,A.useCallback)(()=>{ot(!0),Ye(!1)},[ot,Ye]),ln=(0,A.useCallback)(()=>{me.onAnnotationDelete&&me.onAnnotationDelete(p.id)},[p,me]),yn=(0,A.useCallback)(()=>{en.current&&clearTimeout(en.current),Ye(!0)},[Ye]),En=(0,A.useCallback)(()=>{en.current&&clearTimeout(en.current)},[]),In=(0,A.useCallback)(()=>{en.current=setTimeout(()=>{Ye(!1)},100)},[Ye]),Wn=(0,A.useCallback)(na=>(0,Qo.dq)(na,{format:mc.U6.fullDate,timeZone:N}),[N]),On=(0,A.useCallback)(()=>A.createElement(fc,{annotation:p,timeFormatter:Wn,onEdit:Jt,onDelete:ln,canEdit:J(p.dashboardUID),canDelete:se(p.dashboardUID)}),[J,se,ln,Jt,Wn,p]),Xn=!!p.isRegion&&F>gc;let jn=`${F/2}px`,Ln=A.createElement("div",{className:be(p).markerTriangle,style:{left:jn,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return Xn&&(Ln=A.createElement("div",{className:be(p).markerBar,style:{width:`${F}px`,transform:"translate3d(0,-50%, 0)"}})),A.createElement(A.Fragment,null,A.createElement("div",{ref:gt,onMouseEnter:yn,onMouseLeave:In,className:Xn?void 0:Ae.markerWrapper,"data-testid":nt.wl.pages.Dashboard.Annotations.marker},Ln),Ke&&A.createElement(vr.h_,null,A.createElement("div",{ref:vt,style:zt.styles.popper,...zt.attributes.popper,className:Ae.tooltip,onMouseEnter:En,onMouseLeave:In},On())),Ze&&A.createElement(vr.h_,null,A.createElement(Zi,{onDismiss:()=>ot(!1),onSave:()=>ot(!1),timeFormatter:Wn,annotation:p,ref:Vt,style:an.styles.popper,...an.attributes.popper})))}const no=p=>({markerWrapper:(0,O.css)`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:(0,O.css)`
      max-width: 400px;
    `,tooltip:(0,O.css)`
      ${(0,yi.getTooltipContainerStyles)(p)};
      padding: 0;
    `}),is=({annotations:p,timeZone:N,config:F})=>{const G=(0,ct.l4)(),J=(0,A.useRef)(),se=(0,A.useRef)();(0,A.useEffect)(()=>{const Ae=[];for(const Ke of p)Ae.push(new Ji.U(Ke));return se.current=Ae,()=>{se.current=[]}},[p]),(0,A.useLayoutEffect)(()=>{F.addHook("init",Ae=>{J.current=Ae}),F.addHook("draw",Ae=>{if(!se.current)return null;const Ke=Ae.ctx;if(!Ke)return;Ke.save(),Ke.beginPath(),Ke.rect(Ae.bbox.left,Ae.bbox.top,Ae.bbox.width,Ae.bbox.height),Ke.clip();const Ye=(Ze,ot)=>{Ke.beginPath(),Ke.lineWidth=2,Ke.strokeStyle=ot,Ke.setLineDash([5,5]),Ke.moveTo(Ze,Ae.bbox.top),Ke.lineTo(Ze,Ae.bbox.top+Ae.bbox.height),Ke.stroke(),Ke.closePath()};for(let Ze=0;Ze<se.current.length;Ze++){const ot=se.current[Ze];for(let rt=0;rt<ot.length;rt++){const gt=ot.get(rt);if(!gt.time)continue;let Pt=Ae.valToPos(gt.time,"x",!0);const vt=G.visualization.getColorByName(gt.color);if(Ye(Pt,vt),gt.isRegion&&gt.timeEnd){let Dt=Ae.valToPos(gt.timeEnd,"x",!0);Ye(Dt,vt),Ke.fillStyle=Oa.alpha(vt,.1),Ke.rect(Pt,Ae.bbox.top,Dt-Pt,Ae.bbox.height),Ke.fill()}}}Ke.restore()})},[F,G]);const me=(0,A.useCallback)((Ae,Ke)=>{const Ze=new Ji.U(Ae).get(Ke.fieldIndex);if(!Ze.time||!J.current)return;let ot=J.current.valToPos(Ze.time,"x");return ot<0&&(ot=0),{x:ot,y:J.current.bbox.height/window.devicePixelRatio+4}},[]),be=(0,A.useCallback)((Ae,Ke)=>{let Ye=0;const ot=new Ji.U(Ae).get(Ke.fieldIndex);if(!!ot.isRegion&&J.current){let gt=J.current.valToPos(ot.time,"x"),Pt=J.current.valToPos(ot.timeEnd,"x");gt<0&&(gt=0),Pt>J.current.bbox.width/window.devicePixelRatio&&(Pt=J.current.bbox.width/window.devicePixelRatio),Ye=Pt-gt}return A.createElement(el,{annotation:ot,timeZone:N,width:Ye})},[N]);return A.createElement(Ei.T,{id:"annotations",config:F,events:p,renderEventMarker:be,mapEventToXYCoords:me})};var pc=e(76808),tu=e(78089),hc=e(36149),tl=e(66711),rr=e(79655),bi=e(14986);const Lr=({data:p,config:N,onClose:F,timeZone:G,replaceVariables:J,...se})=>{const me=(0,A.useRef)(),[be,Ae]=(0,A.useState)(null),[Ke,Ye]=(0,A.useState)(null),[Ze,ot]=(0,A.useState)(!1),rt=(0,A.useCallback)(()=>{ot(!0)},[ot]),gt=(0,A.useCallback)(()=>{ot(!1)},[ot]),Pt=(0,A.useCallback)(()=>{(0,Na.Zp)("ContextMenuPlugin",!1,"clearing click selection"),Ye(null)},[Ye]);(0,A.useLayoutEffect)(()=>{let Dt;const Vt=en=>{let zt={viewport:{x:en.clientX,y:en.clientY},plotCanvas:{x:0,y:0}};Dt&&(zt={...zt,plotCanvas:{x:en.clientX-Dt.left,y:en.clientY-Dt.top}}),Ae(zt)};N.addHook("syncRect",(en,zt)=>{Dt=zt}),N.addHook("init",en=>{const zt=en.over;me.current=zt||void 0,me.current?.addEventListener("mousedown",Vt),(0,Na.Zp)("ContextMenuPlugin",!1,"init");let an=!1,Jt=Array.from(en.root.querySelectorAll(".u-cursor-pt"));me.current?.addEventListener("mousedown",()=>{an=!0}),me.current?.addEventListener("mousemove",()=>{an=!1}),me.current?.addEventListener("mouseup",ln=>{if(!an||ln.metaKey||ln.ctrlKey){Ye(null);return}an=!0,ln.target instanceof HTMLElement&&(ln.target.classList.contains("u-cursor-pt")||((0,Na.Zp)("ContextMenuPlugin",!1,"canvas click"),Ye({seriesIdx:null,dataIdx:null}))),rt()}),Jt.length>0&&Jt.forEach((ln,yn)=>{ln.addEventListener("click",()=>{const En=yn+1,In=en.cursor.idx;(0,Na.Zp)("ContextMenuPlugin",!1,En,In),Ye({seriesIdx:En,dataIdx:In??null})})})})},[N,rt,Ae,Ye]);const vt=(0,A.useMemo)(()=>se.defaultItems?se.defaultItems.map(Dt=>({...Dt,items:Dt.items.map(Vt=>({...Vt,onClick:en=>{be&&Vt.onClick?.(en,{coords:be})}}))})):[],[be,se.defaultItems]);return A.createElement(A.Fragment,null,A.createElement(pc.Global,{styles:(0,pc.css)`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),Ze&&be&&A.createElement(nu,{data:p,frames:se.frames,defaultItems:vt,timeZone:G,selection:{point:Ke,coords:be},replaceVariables:J,onClose:()=>{Pt(),gt(),F&&F()}}))},nu=({selection:p,timeZone:N,defaultItems:F,replaceVariables:G,data:J,...se})=>{const me=(0,A.useRef)(null),be=()=>{se.onClose&&se.onClose()};(0,tu.Z)(me,()=>{be()});const Ae=J.fields[0];if(!Ae)return null;const Ke=F?[...F]:[];let Ye=()=>null;if(p.point){const{seriesIdx:ot,dataIdx:rt}=p.point,gt=Ae.display;if(ot&&rt!==null){const Pt=J.fields[ot],vt=Pt.display(Pt.values[rt]);Pt.config.links&&Pt.config.links.length>0&&Pt.getLinks&&Ke.push({items:Pt.getLinks({valueRowIndex:rt}).map(Vt=>({label:Vt.title,ariaLabel:Vt.title,url:Vt.href,target:Vt.target,icon:Vt.target==="_self"?"link":"external-link-alt",onClick:Vt.onClick}))}),Ye=()=>A.createElement(hc.b,{timestamp:gt(Ae.values[rt]).text,displayValue:vt,seriesColor:vt.color,displayName:(0,Bn.CZ)(Pt,J,se.frames)})}}const Ze=()=>Ke?.map((ot,rt)=>A.createElement(tl.k,{key:`${ot.label}${rt}`,label:ot.label},(ot.items||[]).map(gt=>A.createElement(rr.s,{key:gt.label,url:gt.url,label:gt.label,target:gt.target,icon:gt.icon,active:gt.active,onClick:gt.onClick}))));return A.createElement(bi.x,{renderMenuItems:Ze,renderHeader:Ye,x:p.coords.viewport.x,y:p.coords.viewport.y,onClose:be})};var vc=e(90282),Pi=e(8379);const Ec=({timeZone:p,dataFrame:N,dataFrameFieldIndex:F,config:G,getFieldLinks:J,exemplarColor:se,clickedExemplarFieldIndex:me,setClickedExemplarFieldIndex:be})=>{const Ae=(0,ct.wW)(yc),[Ke,Ye]=(0,A.useState)(!1),[Ze,ot]=(0,A.useState)(!1),[rt,gt]=A.useState(null),[Pt,vt]=A.useState(null),{styles:Dt,attributes:Vt}=(0,vi.D)(rt,Pt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),en=(0,A.useRef)();(0,A.useEffect)(()=>{me?.fieldIndex===F.fieldIndex&&me?.frameIndex===F.frameIndex||ot(!1)},[me,F]);const zt=()=>{const In=[A.createElement("rect",{fill:se,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),A.createElement("path",{fill:se,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),A.createElement("path",{fill:se,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),A.createElement("rect",{fill:se,key:"rectangle",width:"5",height:"5"}),A.createElement("path",{fill:se,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),A.createElement("path",{fill:se,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return In[F.frameIndex%In.length]},an=(0,A.useCallback)(()=>{me===void 0&&(en.current&&clearTimeout(en.current),Ye(!0))},[Ye,me]),Jt=()=>{ot(!0)},ln=(0,A.useCallback)(()=>{en.current=setTimeout(()=>{Ye(!1)},150)},[Ye]),yn=(0,A.useCallback)(()=>{const In=N.fields.find(jn=>jn.name==="traceID")||N.fields[0],Wn=[In,...N.fields.filter(jn=>In!==jn)],On=jn=>(0,Qo.dq)(jn,{format:mc.U6.fullDate,timeZone:p}),Xn=()=>{ot(!1),Ye(!1),be(void 0)};return A.createElement("div",{onMouseEnter:an,onMouseLeave:ln,className:Ae.tooltip,ref:vt,style:Dt.popper,...Vt.popper},A.createElement("div",{className:Ae.wrapper},Ze&&A.createElement(Pi.o,{onClick:Xn}),A.createElement("div",{className:Ae.body},A.createElement("div",{className:Ae.header},A.createElement("span",{className:Ae.title},"Exemplars")),A.createElement("div",null,A.createElement("table",{className:Ae.exemplarsTable},A.createElement("tbody",null,Wn.map((jn,Ln)=>{const na=jn.values[F.fieldIndex],ia=jn.config.links?.length?J(jn,F.fieldIndex):void 0;return A.createElement("tr",{key:Ln},A.createElement("td",{valign:"top"},jn.name),A.createElement("td",null,A.createElement("div",{className:Ae.valueWrapper},A.createElement("span",null,jn.type===Tn.fS.time?On(na):na),ia&&A.createElement(vc.Z,{links:ia}))))})))))))},[Vt.popper,N.fields,J,F,an,ln,Dt.popper,Ae,p,Ze,be]),En=G.getSeries().find(In=>In.props.dataFrameFieldIndex?.frameIndex===F.frameIndex)?.props.lineColor;return A.createElement(A.Fragment,null,A.createElement("div",{ref:gt,onClick:()=>{be(F),Jt()},onMouseEnter:an,onMouseLeave:ln,className:Ae.markerWrapper,"aria-label":nt.wl.components.DataSource.Prometheus.exemplarMarker},A.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:En},className:(0,O.cx)(Ae.marble,(Ke||Ze)&&Ae.activeMarble)},zt())),(Ke||Ze)&&A.createElement(vr.h_,null,yn()))},yc=p=>{const N=p.isDark?p.v1.palette.dark2:p.v1.palette.white,F=p.isDark?p.v1.palette.dark9:p.v1.palette.gray5,G=p.isDark?p.v1.palette.black:p.v1.palette.white,J=p.isDark?p.v1.palette.dark3:p.v1.palette.gray6;return{markerWrapper:(0,O.css)`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:(0,O.css)`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${p.v1.palette.red};
      pointer-events: none;
    `,wrapper:(0,O.css)`
      background: ${N};
      border: 1px solid ${F};
      border-radius: ${p.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${G};
      padding: ${p.spacing(1)};
    `,exemplarsTable:(0,O.css)`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${p.components.panel.background};
      }

      tr {
        background-color: ${p.colors.background.primary};

        &:nth-child(even) {
          background-color: ${J};
        }
      }
    `,valueWrapper:(0,O.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${p.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:(0,O.css)`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:(0,O.css)`
      background: ${F};
      padding: 6px 10px;
      display: flex;
    `,title:(0,O.css)`
      font-weight: ${p.typography.fontWeightMedium};
      padding-right: ${p.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:(0,O.css)`
      font-weight: ${p.typography.fontWeightMedium};
      border-radius: ${p.shape.borderRadius(2)};
      overflow: hidden;
    `,marble:(0,O.css)`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:(0,O.css)`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},bc=({exemplars:p,timeZone:N,getFieldLinks:F,config:G,visibleSeries:J})=>{const se=(0,A.useRef)(),[me,be]=(0,A.useState)();(0,A.useLayoutEffect)(()=>{G.addHook("init",Ye=>{se.current=Ye})},[G]);const Ae=(0,A.useCallback)((Ye,Ze)=>{const ot=Ye.fields.find(Vt=>Vt.name===Tn.Ls),rt=Ye.fields.find(Vt=>Vt.name===Tn.M5);if(!ot||!rt||!se.current)return;const gt=Object.keys(se.current.scales).find(Vt=>!["x","y"].some(en=>en===Vt))??Kr.j,Pt=se.current.scales[gt].min,vt=se.current.scales[gt].max;let Dt=rt.values[Ze.fieldIndex];return Pt!=null&&Dt<Pt&&(Dt=Pt),vt!=null&&Dt>vt&&(Dt=vt),{x:se.current.valToPos(ot.values[Ze.fieldIndex],"x"),y:se.current.valToPos(Dt,gt)}},[]),Ke=(0,A.useCallback)((Ye,Ze)=>{const ot=J!==void 0?Pc(J,Ye,Ze):!0,rt=J!==void 0?Df(Ye,Ze,J):void 0;return ot?A.createElement(Ec,{setClickedExemplarFieldIndex:be,clickedExemplarFieldIndex:me,timeZone:N,getFieldLinks:F,dataFrame:Ye,dataFrameFieldIndex:Ze,config:G,exemplarColor:rt}):A.createElement(A.Fragment,null)},[G,N,F,J,be,me]);return A.createElement(Ei.T,{config:G,id:"exemplars",events:p,renderEventMarker:Ke,mapEventToXYCoords:Ae})},au=(p,N)=>{const F=p.series.filter(J=>J.props.show),G=[];return N?.length&&F.forEach(J=>{const se=J.props?.dataFrameFieldIndex?.frameIndex,me=J.props?.dataFrameFieldIndex?.fieldIndex;if(se!==void 0&&me!==void 0){const be=N[se]?.fields[me];be?.labels&&G.push({labels:be.labels,color:J.props?.lineColor??""})}}),{labels:G,totalSeriesCount:p.series.length}},Df=(p,N,F)=>{let G;return F.labels.some(J=>{const se=Object.keys(J.labels),me=p.fields.filter(be=>se.find(Ae=>Ae===be.name));return me.length&&me.every((Ae,Ke,Ye)=>{const Ze=Ae.values[N.fieldIndex];return J.labels[Ae.name]===Ze})?(G=J.color,!0):!1}),G},Pc=(p,N,F)=>{let G=!1;return p.labels.length===p.totalSeriesCount?G=!0:p.labels.some(J=>{const se=Object.keys(J.labels);if(Object.keys(J.labels).length===0)G=!0;else{const me=N.fields.filter(be=>se.find(Ae=>Ae===be.name));me.length&&(G=p.labels.some(be=>Object.keys(be.labels).every(Ae=>{const Ke=be.labels[Ae];return me.find(Ye=>Ye.values[F.fieldIndex]===Ke)})))}return G}),G},kr=({config:p,onChangeTimeRange:N})=>{const F=(0,A.useRef)(),[G,J]=(0,A.useState)([]),[se,me]=(0,A.useState)();if((0,A.useLayoutEffect)(()=>{p.addHook("init",rt=>{F.current=rt}),p.addHook("setScale",rt=>{J(rt.data?.[0]??[]),me(rt.scales.x??void 0)})},[p]),G.length<2||!N||!se||!se.time||!se.min||!se.max)return null;let be=0,Ae=G.length-1;for(;be<=Ae&&G[be]==null;)be++;for(;Ae>=0&&G[Ae]==null;)Ae--;const Ke=G[be],Ye=G[Ae],Ze=se.min,ot=se.max;return Ke==null||Ye==null||Ke<=ot&&Ye>=Ze?null:A.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},A.createElement("div",null,A.createElement("div",null,"Data outside time range"),A.createElement(ge.zx,{onClick:rt=>N({from:Ke,to:Ye}),variant:"secondary","data-testid":"time-series-zoom-to-data"},"Zoom to data")))};kr.displayName="OutsideRangePlugin";var nl=e(90537),Hs=e(13334),Cc=e.n(Hs);const Lo=({step:p,y:N,dragBounds:F,mapPositionToValue:G,formatValue:J,onChange:se})=>{const me=(0,ct.l4)();let be=N,Ae="none";N<(F.top??0)&&(Ae="top"),N>(F.bottom??0)+22&&(Ae="bottom"),Ae==="bottom"&&(be=F.bottom??N),Ae==="top"&&(be=F.top??N);const Ke=typeof se!="function",Ye=(0,ct.wW)(gt=>Ci(gt,p,Ae,Ke)),[Ze,ot]=(0,A.useState)(p.value),rt=(0,A.useMemo)(()=>me.colors.getContrastText(me.visualization.getColorByName(p.color)),[p.color,me]);return A.createElement(Cc(),{axis:"y",grid:[1,1],disabled:Ke,onStop:Ke?w.noop:(gt,Pt)=>(se(G(Pt.lastY)),!1),onDrag:(gt,Pt)=>ot(G(Pt.lastY)),position:{x:0,y:be},bounds:F},A.createElement("div",{className:Ye.handle,style:{color:rt}},A.createElement("span",{className:Ye.handleText},J(Ze))))};Lo.displayName="ThresholdDragHandle";const Ci=(p,N,F,G)=>{const J=p.visualization.getColorByName(N.color),se=su(F),me=F!=="none";return{handle:(0,O.css)`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${J};
      cursor: ${G?"initial":"grab"};
      border-top-right-radius: ${p.shape.borderRadius(1)};
      border-bottom-right-radius: ${p.shape.borderRadius(1)};
      ${me&&(0,O.css)`
        margin-top: 0;
        border-radius: ${p.shape.borderRadius(1)};
      `}
      background: ${J};
      font-size: ${p.typography.bodySmall.fontSize};
      &:before {
        ${se};
      }
    `,handleText:(0,O.css)`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function su(p){const N=p==="none",F=G=>(0,O.css)`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${G}px;
    border-right-color: inherit;
    border-top: ${G}px solid transparent;
    border-bottom: ${G}px solid transparent;
  `;return N?(0,O.css)`
      ${F(9)};
      left: -9px;
    `:p==="top"?(0,O.css)`
      ${F(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:p==="bottom"?(0,O.css)`
      ${F(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const Dc=60,al=({config:p,fieldConfig:N,onThresholdsChange:F})=>{const G=(0,A.useRef)(),[J,se]=(0,A.useState)(0);(0,A.useLayoutEffect)(()=>{p.setPadding([0,Dc,0,0]),p.addHook("init",be=>{G.current=be}),p.addHook("draw",()=>{se(be=>be+1)})},[p]);const me=(0,A.useMemo)(()=>{const be=G.current;if(!be)return null;const Ae=N.defaults.thresholds;if(!Ae)return null;const Ke=(0,nl.z1)(N.defaults,Tn.fS.number),Ye=N.defaults.decimals,Ze=[];for(let ot=0;ot<Ae.steps.length;ot++){const rt=Ae.steps[ot],gt=be.valToPos(rt.value,Ke);if(Number.isNaN(gt)||!Number.isFinite(gt))continue;const Pt=be.bbox.height/window.devicePixelRatio,Dt=typeof F=="function"?en=>{const zt=[...Ae.steps.slice(0,ot),...Ae.steps.slice(ot+1),{...Ae.steps[ot],value:en}].sort((an,Jt)=>an.value-Jt.value);F({...Ae,steps:zt})}:void 0,Vt=A.createElement(Lo,{key:`${rt.value}-${ot}`,step:rt,y:gt,dragBounds:{top:0,bottom:Pt},mapPositionToValue:en=>be.posToVal(en,Ke),formatValue:en=>(0,qn.Cf)(Ke)(en,Ye).text,onChange:Dt});Ze.push(Vt)}return Ze},[J,N,F]);return G.current?A.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(G.current.bbox.left+G.current.bbox.width)/window.devicePixelRatio}px`,top:`${G.current.bbox.top/window.devicePixelRatio}px`,width:`${Dc}px`,height:`${G.current.bbox.height/window.devicePixelRatio}px`}},me):null};al.displayName="ThresholdControlsPlugin";var ru=e(21066),Sc=e(93882),xc=e(95381),Mc=e(39596),Tc=e(26453);function Nm(p){let N=new Map;return p.map(G=>({...G,fields:G.fields.map(J=>{if(J.type===Tn.fS.enum){let se=(0,nl.z1)(J.config,J.type),me=N.get(se);me||(me=[],N.set(se,me));let be=J.values.toArray().slice(),Ae=J.config.type.enum.text;if(me.length>0)for(let Ke=0;Ke<be.length;Ke++)be[Ke]+=me.length;return me.push(...Ae),J.config.type.enum.text=me,{...J,values:new ru.G(be)}}return J})}))}function Co(p,N,F,G){if(!p?.length)return null;let J=G!=null;G!=null&&G>0&&(p=[{...p[0],fields:[p[0].fields[G],...p[0].fields.filter((Ae,Ke)=>Ke!==G)]}]);for(let Ae of p)for(let Ke of Ae.fields)Ke.type===Tn.fS.time&&typeof Ke.values[0]!="number"&&(Ke.values=(0,xc.p8)(Ke,{destinationType:Tn.fS.time}).values);let se=0;e:for(let Ae of p)for(let Ke of Ae.fields)if(Ke.type===Tn.fS.enum&&++se>1){p=Nm(p);break e}let me;const be=[];for(let Ae of p){const Ke=[];let Ye=!1,Ze=!1,ot=J?Ae:(0,Mc.w)({frame:Ae,refFieldPseudoMin:F?.from.valueOf(),refFieldPseudoMax:F?.to.valueOf()});const rt=(0,Tc.I)(ot).fields;for(let gt=0;gt<rt?.length;gt++){const Pt=rt[gt];switch(Pt.type){case Tn.fS.time:Ye=!0,Ke.push(Pt);break;case Tn.fS.number:Ze=J?gt>0:!0,me={...Pt,values:Pt.values.map(Vt=>Number.isFinite(Vt)||Vt==null?Vt:null)},Ke.push(me);break;case Tn.fS.enum:Ze=!0;case Tn.fS.string:me={...Pt,values:Pt.values},Ke.push(me);break;case Tn.fS.boolean:Ze=!0;const vt=Pt.config?.custom??{},Dt={...Pt.config,max:1,min:0,custom:vt};vt.lineInterpolation!==xt.KC.StepBefore&&(vt.lineInterpolation=xt.KC.StepAfter),me={...Pt,config:Dt,type:Tn.fS.number,values:Pt.values.map(Vt=>Vt==null?Vt:Vt?1:0)},(0,qn.br)(Dt.unit)||(Dt.unit="bool",me.display=(0,pa.U)({field:me,theme:N})),Ke.push(me);break}}(J||Ye)&&Ze&&be.push({...Ae,length:ot.length,fields:Ke})}return be.length?(xf(be,N,0),Sf(be,N),be):null}const Sf=(p,N)=>{const{palette:F}=N.visualization;for(const G of p)for(const J of G.fields)if(J.type===Tn.fS.enum){const se=F[J.state?.seriesIndex%F.length],me=N.visualization.getColorByName(se),be=J.config.type.enum;be.color=Array(be.text.length).fill(me),J.display=(0,pa.U)({field:J,theme:N})}},xf=(p,N,F)=>{let G=0;p.forEach(J=>{J.fields.forEach((se,me)=>{me!==F&&(se.type===Tn.fS.number||se.type===Tn.fS.boolean||se.type===Tn.fS.enum)&&(se.state={...se.state,seriesIndex:G++},se.display=(0,pa.U)({field:se,theme:N}))})})};function Oc(p,N){return!p||!p.length?[N]:p.map(F=>F?.length?F:N)}function sl(p,N,F,G){return p.fields.forEach(J=>{if(J.state?.origin?.frameIndex===void 0||N[J.state?.origin?.frameIndex]===void 0)return;const se=[];for(const be of N[J.state?.origin?.frameIndex].fields)if(be.type===Tn.fS.string)if(J.values instanceof Sc.o){const Ae={...be};Ae.values=new Sc.o(be.values,J.values.getOrderArray()),se.push(Ae)}else se.push(be);const me={fields:[...p.fields,...se],length:p.fields.length+se.length};J.getLinks=(0,Qi.oB)(me,J,J.state.scopedVars,F,G)}),p}var fr=(p=>(p.Candles="candles",p.CandlesVolume="candles+volume",p.Volume="volume",p))(fr||{}),Hr=(p=>(p.Candles="candles",p.OHLCBars="ohlcbars",p))(Hr||{}),Gr=(p=>(p.CloseClose="close-close",p.OpenClose="open-close",p))(Gr||{});const ao={down:"red",flat:"gray",up:"green"},Tr={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:xt.jK.List,showLegend:!0,placement:"bottom",calcs:[]}},so={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function ol(p,N,F){const G=(0,Ea.findField)(p,F[N.key]);if(!G)for(const J of p.fields){const se=(0,Bn.CZ)(J,p).toLowerCase();if(N.defaults.includes(se)||N.defaults.includes(J.name))return J}return G}function Yo(p,N,F,G){if(!p?.length)return null;const J=N.fields??{},se=p.length===1?(0,ta.Y3)(p[0],p[0].fields.findIndex(rt=>rt.type===Tn.fS.time)):(0,ta._9)({frames:p});if(!se?.length)return null;const me={aligned:se,frame:se,names:{}},be=Co([se],F,G);if(!be)return null;const Ae=me.frame=be[0],Ke=Ae.fields.findIndex(rt=>rt.type===Tn.fS.time);if(Ke<0)return null;const Ye=new Set;for(const rt of Object.values(so)){const gt=ol(Ae,rt,J);gt&&(me[rt.key]=gt,Ye.add(gt))}if(!me.open&&!me.close&&(me.open=Ae.fields.find(rt=>rt.type===Tn.fS.number),me.open&&Ye.add(me.open)),me.open&&!me.close&&!J.close){const rt=me.open.values.slice(1);rt.push(rt[rt.length-1]),me.close={...me.open,values:rt,name:"Next open",state:void 0},Ye.add(me.close),Ae.fields.push(me.close),me.autoOpenClose=!0}if(me.close&&!me.open&&!J.open){const rt=me.close.values.slice();rt.unshift(rt[0]),rt.length=Ae.length,me.open={...me.close,values:rt,name:"Previous close",state:void 0},Ye.add(me.open),Ae.fields.push(me.open),me.autoOpenClose=!0}!me.high&&!J.high&&(me.high=me.open),!me.low&&!J.low&&(me.low=me.open),N.mode===fr.Volume?(me.high&&(me.high!==me.open&&Ye.delete(me.high),me.high=void 0),me.low&&(me.low!==me.open&&Ye.delete(me.low),me.low=void 0)):N.mode===fr.Candles&&me.volume&&(Ye.delete(me.volume),me.volume=void 0);for(const rt of Object.values(so)){const gt=me[rt.key];gt&&(me.names[rt.key]=(0,Bn.CZ)(gt,me.frame))}const Ze=Ae.fields[Ke],ot=[Ze];N.includeAllFields?ot.push(...Ae.fields.filter(rt=>rt!==Ze)):ot.push(...Ye),me.frame={...me.frame,fields:ot};for(let rt=0;rt<me.frame.fields.length;rt++){const gt=me.frame.fields[rt];gt.state={...gt.state,seriesIndex:rt-1,origin:{fieldIndex:rt,frameIndex:0}}}return me}const{alpha:il}=Oa;function Ic(p){let{mode:N,candleStyle:F,fields:G,colorStrategy:J,upColor:se,downColor:me,flatColor:be,volumeAlpha:Ae,flatAsUp:Ke=!0}=p;const Ye=N!==fr.Volume&&G.high!=null&&G.low!=null,Ze=Ye&&F===Hr.Candles,ot=N!==fr.Candles&&G.volume!=null;function rt(zt,an,Jt,ln,yn){return zt>0?Jt:zt<0?ln:yn?Jt:an}let gt=0,Pt=G.open,vt=G.high,Dt=G.low,Vt=G.close,en=G.volume;return zt=>{let an,Jt,ln,yn,En,In;Ye&&(ln=new Path2D,Jt=new Path2D,an=new Path2D),ot&&(yn=new Path2D,En=new Path2D,In=new Path2D);let Wn=new Path2D,On=zt.ctx,Xn=zt.data[gt],jn=zt.data[Pt],Ln=zt.data[Vt],na=Ye?zt.data[vt]:null,ia=Ye?zt.data[Dt]:null,$a=ot?zt.data[en]:null,Va=en!=null?Math.round(zt.valToPos(0,zt.series[en].scale,!0)):null,[ya,_a]=zt.series[0].idxs,fa=zt.data[0],ea=jn,ha=zt.bbox.width;if(fa.length>1){let ts=null;for(let Zn=0,ra=1/0;Zn<fa.length;Zn++)if(ea[Zn]!==void 0){if(ts!=null){let da=Math.abs(fa[Zn]-fa[ts]);da<ra&&(ra=da,ha=Math.abs(zt.valToPos(fa[Zn],"x",!0)-zt.valToPos(fa[ts],"x",!0)))}ts=Zn}}let Ra=Math.round(.6*ha),wa=2,Ba=2;Ra<=12&&(wa=Ba=1);let ls=Math.floor(Ra/2);for(let ts=ya;ts<=_a;ts++){let Zn=Math.round(zt.valToPos(Xn[ts],"x",!0)),ra=ts===ya?0:Math.sign(Ln[ts]-Ln[ts-1]),da=Math.sign(Ln[ts]-jn[ts]);if(ot){let Aa=rt(J===Gr.CloseClose?ra:da,In,En,yn,ts===ya&&Gr.CloseClose?!1:Ke),Wa=Math.round(zt.valToPos($a[ts],zt.series[en].scale,!0));Aa.rect(Zn-ls,Wa,Ra,Va-Wa)}if(Ye){let Aa=rt(J===Gr.CloseClose?ra:da,ln,Jt,an,ts===ya&&Gr.CloseClose?!1:Ke),Wa=Math.round(zt.valToPos(na[ts],zt.series[vt].scale,!0)),as=Math.round(zt.valToPos(ia[ts],zt.series[Dt].scale,!0));Aa.rect(Zn-Math.floor(wa/2),Wa,wa,as-Wa);let Ja=Math.round(zt.valToPos(jn[ts],zt.series[Pt].scale,!0)),Js=Math.round(zt.valToPos(Ln[ts],zt.series[Vt].scale,!0));if(Ze){let Vs=Math.min(Ja,Js),xo=Math.max(Ja,Js),cr=Math.max(1,xo-Vs);Aa.rect(Zn-ls,Vs,Ra,cr),J===Gr.CloseClose&&da>=0&&cr>Ba*2&&Wn.rect(Zn-ls+Ba,Vs+Ba,Ra-Ba*2,cr-Ba*2)}else Aa.rect(Zn-ls,Ja,ls,wa),Aa.rect(Zn,Js,ls,wa)}}On.save(),On.rect(zt.bbox.left,zt.bbox.top,zt.bbox.width,zt.bbox.height),On.clip(),ot&&(On.fillStyle=il(se,Ae),On.fill(En),On.fillStyle=il(me,Ae),On.fill(yn),On.fillStyle=il(be,Ae),On.fill(In)),Ye&&(On.fillStyle=se,On.fill(Jt),On.fillStyle=me,On.fill(an),On.fillStyle=be,On.fill(ln),On.globalCompositeOperation="destination-out",On.fill(Wn)),On.restore()}}const ou=({data:p,id:N,timeRange:F,timeZone:G,width:J,height:se,options:me,fieldConfig:be,onChangeTimeRange:Ae,replaceVariables:Ke})=>{const{sync:Ye,canAddAnnotations:Ze,onThresholdsChange:ot,canEditThresholds:rt,showThresholds:gt,onSplitOpen:Pt}=(0,Ps.R9)(),vt=(yn,En)=>(0,Go.a_)({field:yn,rowIndex:En,splitOpenFn:Pt,range:F}),Dt=(0,ct.l4)(),Vt=(0,A.useMemo)(()=>Yo(p.series,me,Dt,F),[p.series,me,Dt,F]),{renderers:en,tweakScale:zt,tweakAxis:an,shouldRenderPrice:Jt}=(0,A.useMemo)(()=>{let yn=(Ba,ls)=>Ba,En=(Ba,ls)=>Ba,In={renderers:[],tweakScale:yn,tweakAxis:En,shouldRenderPrice:!1};if(!Vt)return In;const Wn=Vt.names;if(!Object.keys(Wn).length)return In;const{mode:On,candleStyle:Xn,colorStrategy:jn}=me,Ln={...ao,...me.colors};let{open:na,high:ia,low:$a,close:Va,volume:ya}=Wn;if(na==null||Va==null)return In;let _a=.5,fa=-1,ea=!1;if(ya!=null&&On!==fr.Candles){let Ba=Vt.volume;if(Ba!=null){ea=!0;let{fillOpacity:ls}=Ba.config.custom;ls&&(_a=ls/100),On!==fr.Volume&&(Ba.config={...Ba.config},Ba.config.unit="short",Ba.display=(0,pa.U)({field:Ba,theme:_e.config.theme2}),En=(ts,Zn)=>{if(Zn.name===Vt.volume?.name){let ra=(da,Aa)=>{let Wa=[],as=da.series[fa].max;for(let Ja=0;Ja<Aa.length&&(Wa.push(Aa[Ja]),!(Aa[Ja]>as));Ja++);return Wa};ts.space=20,ts.filter=ra,ts.ticks={...ts.ticks,filter:ra}}return ts},yn=(ts,Zn)=>(Zn.name===Vt.volume?.name&&(ts.range=(ra,da,Aa)=>[0,Aa*7]),ts))}}let ha=On!==fr.Volume&&ia!=null&&$a!=null;if(!ha&&!ea)return In;let Ra={},wa=[];return ha?Ra={open:na,high:ia,low:$a,close:Va}:wa.push(na,Va),ea&&(Ra.volume=ya,Ra.open=na,Ra.close=Va),{shouldRenderPrice:ha,renderers:[{fieldMap:Ra,indicesOnly:wa,init:(Ba,ls)=>{fa=ls.volume,Ba.addHook("drawAxes",Ic({mode:On,fields:ls,upColor:_e.config.theme2.visualization.getColorByName(Ln.up),downColor:_e.config.theme2.visualization.getColorByName(Ln.down),flatColor:_e.config.theme2.visualization.getColorByName(Ln.flat),volumeAlpha:_a,colorStrategy:jn,candleStyle:Xn,flatAsUp:!0}))}}],tweakScale:yn,tweakAxis:En}},[me,p.structureRev,p.series.length]);if(!Vt)return A.createElement(Za.Z,{panelId:N,fieldConfig:be,data:p,needsTimeField:!0,needsNumberField:!0});if(Jt)for(let yn in en[0].fieldMap){let En=Vt[yn];En.config={...En.config,custom:{...En.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const ln=!!(Ze&&Ze());return A.createElement(Ro.p,{frames:[Vt.frame],structureRev:p.structureRev,timeRange:F,timeZone:G,width:J,height:se,legend:me.legend,renderers:en,tweakAxis:an,tweakScale:zt,options:me},(yn,En)=>(En.fields.forEach(In=>{In.getLinks=(0,Qi.oB)(En,In,In.state.scopedVars,Ke,G)}),A.createElement(A.Fragment,null,A.createElement(bo.R,{config:yn,onZoom:Ae}),A.createElement(Zt.i,{data:En,config:yn,mode:xt.f3.Multi,sync:Ye,timeZone:G}),p.annotations&&A.createElement(is,{annotations:p.annotations,config:yn,timeZone:G}),ln?A.createElement(mr,{data:En,timeZone:G,config:yn},({startAnnotating:In})=>A.createElement(Lr,{data:En,config:yn,timeZone:G,replaceVariables:Ke,defaultItems:ln?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Wn,On)=>{On&&In({coords:On.coords})}}]}]:[]})):A.createElement(Lr,{data:En,config:yn,timeZone:G,replaceVariables:Ke,defaultItems:[]}),p.annotations&&A.createElement(bc,{config:yn,exemplars:p.annotations,timeZone:G,getFieldLinks:vt}),(rt&&ot||gt)&&A.createElement(al,{config:yn,fieldConfig:be,onThresholdsChange:rt?ot:void 0}),A.createElement(kr,{config:yn,onChangeTimeRange:Ae}))))};class iu{getSuggestionsForData(N){const{dataSummary:F}=N;if(!N.data?.series||!F.hasData||F.timeFieldCount<1||F.numberFieldCount<2||F.numberFieldCount>10)return;const G=Yo(N.data.series,Tr,We.config.theme2);if(!G||G.open===G.high&&G.open===G.low)return;N.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:ns.y.Candlestick,options:Tr,fieldConfig:{defaults:{},overrides:[]},score:G.autoOpenClose?Gn._.Good:Gn._.Best})}}const lu=[{label:"Candles",value:fr.Candles},{label:"Volume",value:fr.Volume},{label:"Both",value:fr.CandlesVolume}],Um=[{label:"Candles",value:Hr.Candles},{label:"OHLC Bars",value:Hr.OHLCBars}],Zo=[{label:"Since Open",value:Gr.OpenClose},{label:"Since Prior Close",value:Gr.CloseClose}],cu=p=>p.type===Tn.fS.number;function Jo(p,N,F){let G="Auto ";if(F){const J=F[N.key];J?.config?(G+="= "+(0,Bn.CZ)(J),J===F?.open&&N.key!=="open"&&(G+=` (${N.defaults.join(",")})`)):G+=`(${N.defaults.join(",")})`}p.addFieldNamePicker({path:`fields.${N.key}`,name:N.name,description:N.description,settings:{filter:cu,placeholderText:G}})}const du=new ne.c(ou).useFieldConfig((0,_r.F)(_r.r)).setPanelOptions((p,N)=>{const F=N.options??Tr,G=Yo(N.data,F,We.config.theme2);p.addRadio({path:"mode",name:"Mode",description:"",defaultValue:Tr.mode,settings:{options:lu}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:Tr.candleStyle,settings:{options:Um},showIf:J=>J.mode!==fr.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:Tr.colorStrategy,settings:{options:Zo}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:ao.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:ao.down}),Jo(p,so.open,G),F.mode!==fr.Volume&&(Jo(p,so.high,G),Jo(p,so.low,G)),Jo(p,so.close,G),F.mode!==fr.Candles&&Jo(p,so.volume,G),p.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:Tr.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),vs.J(p)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new iu);var Rc=e(78968),uu=e(78467),ll=e(26858),mu=e(75627);const cl=p=>({dashlistSectionHeader:(0,O.css)`
    padding: ${p.spacing(.25,1)};
    margin-right: ${p.spacing(1)};
  `,dashlistSection:(0,O.css)`
    margin-bottom: ${p.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:(0,O.css)`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${p.colors.border.weak};
    margin-right: ${p.spacing(1)};
    padding: ${p.spacing(1)};

    &:hover {
      a {
        color: ${p.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistStar:(0,O.css)`
    align-self: center;
    margin-right: 0px;
    color: ${p.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:(0,O.css)`
    color: ${p.colors.text.secondary};
    font-size: ${p.typography.bodySmall.fontSize};
    line-height: ${p.typography.body.lineHeight};
  `,dashlistTitle:(0,O.css)`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:(0,O.css)`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:(0,O.css)`
    position: relative;
    list-style: none;
  `,gridContainer:(0,O.css)`
    display: grid;
    gap: ${p.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${p.spacing(1)};
  `});async function Do(p,N){let F=Promise.resolve([]);if(p.showStarred){const Ye={limit:p.maxItems,starred:"true"};F=(0,Ue.i)().search(Ye)}let G=Promise.resolve([]),J=[];if(p.showRecentlyViewed){let Ye=await $e.Z.getDashboardOpened();J=(0,w.take)(Ye,p.maxItems),G=(0,Ue.i)().search({dashboardUIDs:J,limit:p.maxItems})}let se=Promise.resolve([]);if(p.showSearch){const Ye={limit:p.maxItems,query:N(p.query,{},"text"),folderIds:p.folderId,tag:p.tags.map(Ze=>N(Ze,{},"text")),type:"dash-db"};se=(0,Ue.i)().search(Ye)}const[me,be,Ae]=await Promise.all([F,se,G]);let Ke=new Map;for(const Ye of J){const Ze=Ae.find(ot=>ot.uid===Ye);Ze&&Ke.set(Ye,{...Ze,isRecent:!0})}return be.forEach(Ye=>{Ye.uid&&(Ke.has(Ye.uid)?Ke.get(Ye.uid).isSearchResult=!0:Ke.set(Ye.uid,{...Ye,isSearchResult:!0}))}),me.forEach(Ye=>{Ye.uid&&(Ke.has(Ye.uid)?Ke.get(Ye.uid).isStarred=!0:Ke.set(Ye.uid,{...Ye,isStarred:!0}))}),Ke}function Ac(p){const[N,F]=(0,A.useState)(new Map),G=(0,yt.useDispatch)();(0,A.useEffect)(()=>{Do(p.options,p.replaceVariables).then(Pt=>{F(Pt)})},[p.options,p.replaceVariables,p.renderCounter]);const J=async(Pt,vt)=>{const{uid:Dt,title:Vt,url:en}=vt;Pt.preventDefault(),Pt.stopPropagation();const zt=await(0,St.h4)().starDashboard(vt.uid,vt.isStarred),an=new Map(N);an.set(vt?.uid??"",{...vt,isStarred:zt}),F(an),G((0,uu.OQ)({id:Dt??"",title:Vt,url:en,isStarred:zt}))},[se,me,be]=(0,A.useMemo)(()=>{const Pt=[...N.values()];return[Pt.filter(vt=>vt.isStarred).sort((vt,Dt)=>vt.title.localeCompare(Dt.title)),Pt.filter(vt=>vt.isRecent),Pt.filter(vt=>vt.isSearchResult).sort((vt,Dt)=>vt.title.localeCompare(Dt.title))]},[N]),{showStarred:Ae,showRecentlyViewed:Ke,showHeadings:Ye,showSearch:Ze}=p.options,ot=[{header:"Starred dashboards",dashboards:se,show:Ae},{header:"Recently viewed dashboards",dashboards:me,show:Ke},{header:"Search",dashboards:be,show:Ze}],rt=(0,ct.wW)(cl),gt=Pt=>A.createElement("ul",null,Pt.map(vt=>{let Dt=vt.url,Vt={};if(p.options.keepTime){const en=(0,ll.$t)().timeRangeForUrl();Vt.from=en.from,Vt.to=en.to}return p.options.includeVars&&(Vt={...Vt,...(0,mu.c)()}),Dt=Rc.Cj.appendQueryToUrl(Dt,Rc.Cj.toUrlParams(Vt)),Dt=(0,_e.iE)().disableSanitizeHtml?Dt:Xi.QX.sanitizeUrl(Dt),A.createElement("li",{className:rt.dashlistItem,key:`dash-${vt.uid}`},A.createElement("div",{className:rt.dashlistLink},A.createElement("div",{className:rt.dashlistLinkBody},A.createElement("a",{className:rt.dashlistTitle,href:Dt},vt.title),vt.folderTitle&&A.createElement("div",{className:rt.dashlistFolder},vt.folderTitle)),A.createElement(Lc,{"aria-label":`Star dashboard "${vt.title}".`,className:rt.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:vt.isStarred,onClick:en=>J(en,vt)})))}));return A.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},ot.map(({show:Pt,header:vt,dashboards:Dt},Vt)=>Pt&&A.createElement("div",{className:rt.dashlistSection,key:`dash-group-${Vt}`},Ye&&A.createElement("h6",{className:rt.dashlistSectionHeader},vt),gt(Dt))))}function Lc({enabled:p,disabled:N,checked:F,onClick:G,className:J,"aria-label":se,...me}){const be=(0,A.useCallback)(Ze=>{Ze.preventDefault(),Ze.stopPropagation(),G?.(Ze)},[G]),Ke={...me,...F?p:N},Ye=(0,ct.wW)(Bc);return A.createElement("label",{className:Ye.wrapper},A.createElement("input",{type:"checkbox",defaultChecked:F,onClick:be,className:Ye.checkBox,"aria-label":se}),A.createElement(jt.J,{className:(0,O.cx)(Ye.icon,J),...Ke}))}const Bc=(0,qs.B)(p=>({wrapper:(0,O.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,O.css)({appearance:"none","&:focus-visible + *":{...(0,yi.getFocusStyles)(p),borderRadius:p.shape.borderRadius(1)}}),icon:(0,O.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})),yr={includeVars:!1,keepTime:!1,maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Di=new ne.c(Ac).setPanelOptions(p=>{p.addBooleanSwitch({path:"keepTime",name:"Include current time range",defaultValue:yr.keepTime}).addBooleanSwitch({path:"includeVars",name:"Include current template variable values",defaultValue:yr.includeVars}).addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:yr.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:yr.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:yr.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:yr.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:yr.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:yr.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:F,onChange:G}){return A.createElement(pn,{initialFolderId:F,onChange:J=>G(J?.id),extraFolders:[Sn,Cn]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:yr.tags,editor(N){return A.createElement(ze.B,{tags:N.value,onChange:N.onChange})}})}).setMigrationHandler(p=>{const N={showStarred:p.options.showStarred??p.starred,showRecentlyViewed:p.options.showRecentlyViewed??p.recent,showSearch:p.options.showSearch??p.search,showHeadings:p.options.showHeadings??p.headings,maxItems:p.options.maxItems??p.limit,query:p.options.query??p.query,folderId:p.options.folderId??p.folderId,tags:p.options.tags??p.tags};return parseFloat(p.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(J=>delete p[J]),N});var gr=e(18240),Os=e(86312),Mf=e(45908);const fu=({onBlur:p,placeholder:N})=>{const F=(0,A.useRef)(null);(0,A.useEffect)(()=>{F.current&&F.current.focus()});const G=J=>{J.key==="Enter"&&J.currentTarget.blur()};return A.createElement("input",{type:"text",placeholder:N,onBlur:p,ref:F,onKeyDown:G,"data-testid":"column-input"})},dl=({divStyle:p,onColumnInputBlur:N})=>{const[F,G]=(0,A.useState)(!1),J=()=>{G(!0)},se=me=>{const be=me.target.value;be&&N(be),G(!1)};return A.createElement("div",{className:p},F?A.createElement(fu,{placeholder:"Column Name",onBlur:se}):A.createElement("button",{onClick:J},"+"))};var xs=e(53709);const Ks=()=>We.config.featureToggles.enableDatagridEditing,wm="600 13px Inter",Nc="400 13px Inter",Uc=document.createElement("canvas"),gu=20,wc=300,Bo=65,pu="both",Wc="number",hu={isContextMenuOpen:!1},Fc={isInputOpen:!1},Cs="datagrid_panel",Is={EDIT_CELL:"edit_cell",GRID_SELECTED:"grid_selected",APPEND_ROW:"append_row",APPEND_COLUMN:"append_column",DELETE_BTN_PRESSED:"delete_btn_pressed",COLUMN_RESIZE:"column_resize",COLUMN_REORDER:"column_reorder",ROW_REORDER:"row_reorder",CONTEXT_MENU_ACTION:"context_menu_action",HEADER_MENU_ACTION:"header_menu_action"},Kc={name:"A",fields:[],length:0},ul={kind:gr.p6.Text,data:"",allowOverlay:!0,readonly:!1,displayData:""},$c={columns:gr.EV.empty(),rows:gr.EV.empty()},ml={sticky:!1,tint:!0},Wm={fill:!0,sticky:!1};async function jr(p,N){if(N&&Ks()){for(let F=0;F<p.fields.length;F++)delete p.fields[F].config.displayName,delete p.fields[F].config.displayNameFromDS;return await N([p])}return!1}const Vc=(p,N=!1)=>{const F=Uc.getContext("2d");return F.font=N?wm:Nc,F.measureText(p).width},zc=p=>Math.max(Vc(p.name,!0)+Bo,Math.min(wc,p.values.toArray().reduce((N,F)=>{const G=Vc(F?.toString()??"");return G>N?G:N},0)+gu)),Br=(p,N,F=!1)=>{const G={...p,fields:p.fields.map(J=>({...J,values:J.values.slice()}))};for(const J of G.fields){const se=J.values.toArray();for(let me=N.length-1;me>=0;me--)F?se.splice(N[me],1):se.splice(N[me],1,null);J.values=[...se]}return{...G,length:G.fields[0]?.values.length??0}},vu=(p,N)=>{const F=N.x,G=N.y,J=N.x+N.width-1,se={...p,fields:p.fields.map(me=>({...me,values:me.values.slice()}))};for(let me=F;me<=J;me++){const be=se.fields[me],Ae=be.values.toArray();Ae.splice(G,N.height,...new Array(N.height).fill(null)),be.values=[...Ae]}return{...se,length:se.fields[0]?.values.length??0}},_c=p=>{const N=p.values.toArray();p.values=N.map(F=>F==="undefined"||F==="null"?null:F)};function Si(p){return{accentColor:p.colors.primary.main,accentFg:p.colors.secondary.main,textDark:p.colors.text.primary,textMedium:p.colors.text.secondary,textLight:p.colors.text.secondary,textBubble:p.colors.text.primary,textHeader:p.colors.text.primary,bgCell:p.colors.background.primary,bgCellMedium:p.colors.background.primary,bgHeader:p.colors.background.primary,bgHeaderHasFocus:p.colors.background.secondary,bgHeaderHovered:p.colors.background.secondary,linkColor:p.colors.text.link,fontFamily:p.typography.fontFamily,headerFontStyle:`${p.typography.fontWeightMedium} ${p.typography.fontSize}px`,fgIconHeader:p.colors.secondary.contrastText,bgIconHeader:p.colors.secondary.main}}const No=(p,N,F=!1)=>{const G=p.values.get(N);switch(p.type){case Tn.fS.boolean:return{kind:gr.p6.Boolean,data:G||!1,allowOverlay:!1,readonly:!1};case Tn.fS.number:return{kind:gr.p6.Number,data:G||0,allowOverlay:Ks()&&!F,readonly:!1,displayData:G!=null?G.toString():""};case Tn.fS.string:return{kind:gr.p6.Text,data:G||"",allowOverlay:Ks()&&!F,readonly:!1,displayData:G!=null?G.toString():""};default:return{kind:gr.p6.Text,data:G||"",allowOverlay:Ks()&&!F,readonly:!1,displayData:G!=null?G.toString():""}}},xi=(p,N)=>({dataEditor:(0,O.css)`
      .dvn-scroll-inner > div:nth-child(2) {
        pointer-events: none !important;
      }
      scrollbar-color: ${p.colors.background.secondary} ${p.colors.background.primary};
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: ${p.colors.background.primary};
      }
      ::-webkit-scrollbar-thumb {
        border-radius: 10px;
      }
      ::-webkit-scrollbar-corner {
        display: none;
      }
    `,addColumnDiv:(0,O.css)`
      width: 120px;
      display: flex;
      flex-direction: column;
      background-color: ${p.colors.background.primary};
      button {
        pointer-events: ${N?"none":"auto"};
        border: none;
        outline: none;
        height: 37px;
        font-size: 20px;
        background-color: ${p.colors.background.primary};
        color: ${p.colors.text.primary};
        border-right: 1px solid ${p.components.panel.borderColor};
        border-bottom: 1px solid ${p.components.panel.borderColor};
        transition: background-color 200ms;
        cursor: pointer;
        :hover {
          background-color: ${p.colors.background.secondary};
        }
      }
      input {
        height: 37px;
        border: 1px solid ${p.colors.primary.main};
        :focus {
          outline: none;
        }
      }
    `,renameColumnInput:(0,O.css)`
      height: 37px;
      border: 1px solid ${p.colors.primary.main};
      :focus {
        outline: none;
      }
    `}),kc=p=>p.rows.length||p.columns.length?!0:p.current===void 0?!1:p.current.range&&!(p.current.range.height===1&&p.current.range.width===1);var Bs=(p=>(p.columnResizeStart="columnResizeStart",p.columnResizeEnd="columnResizeEnd",p.columnMove="columnMove",p.updateColumns="updateColumns",p.showColumnRenameInput="showColumnRenameInput",p.hideColumnRenameInput="hideColumnRenameInput",p.openCellContextMenu="openCellContextMenu",p.openHeaderContextMenu="openHeaderContextMenu",p.openHeaderDropdownMenu="openHeaderDropdownMenu",p.closeContextMenu="closeContextMenu",p.multipleCellsSelected="multipleCellsSelected",p.gridSelectionCleared="gridSelectionCleared",p.columnFreezeReset="columnFreezeReset",p.columnFreezeChanged="columnFreezeChanged",p.openSearch="openSearch",p.closeSearch="closeSearch",p))(Bs||{});const Xo={columns:[],contextMenuData:hu,renameColumnInputData:Fc,gridSelection:$c,columnFreezeIndex:0,toggleSearch:!1,isResizeInProgress:!1},fl=new Map([[Tn.fS.number,gr.PE.HeaderNumber],[Tn.fS.string,gr.PE.HeaderTextTemplate],[Tn.fS.boolean,gr.PE.HeaderBoolean],[Tn.fS.time,gr.PE.HeaderDate],[Tn.fS.other,gr.PE.HeaderReference]]),Eu=(p,N)=>{let F=[];switch(N.type){case"columnResizeStart":F=[...p.columns];const G=N.payload;return F[G.columnIndex]={...p.columns[G.columnIndex],width:G.width},{...p,columns:F,isResizeInProgress:!0};case"columnMove":F=[...p.columns];const J=N.payload,se=p.columns[J.from].width;let me=F.splice(J.from,1)[0];return me={...me,width:se},F.splice(J.to,0,me),{...p,columns:F};case"columnResizeEnd":return{...p,isResizeInProgress:!1};case"updateColumns":const be=N.payload;return F=[...be.frame.fields.map((Dt,Vt)=>{const en=p.columns.find(an=>an.title===Dt.name)?.width;return{title:(0,Bn.CZ)(Dt,be.frame),width:en??zc(Dt),icon:fl.get(Dt.type),hasMenu:Ks(),trailingRowOptions:{targetColumn:--Vt}}})],{...p,columns:F};case"showColumnRenameInput":return{...p,renameColumnInputData:{...p.renameColumnInputData,isInputOpen:!0}};case"hideColumnRenameInput":return{...p,renameColumnInputData:{...p.renameColumnInputData,isInputOpen:!1}};case"openCellContextMenu":const Ae=N.payload,Ke=Ae.event,Ye=Ae.cell;return{...p,contextMenuData:{x:Ke.bounds.x+Ke.localEventX,y:Ke.bounds.y+Ke.localEventY,column:Ye[0]===-1?void 0:Ye[0],row:Ye[1],isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderContextMenu":const Ze=N.payload,ot=Ze.event;return{...p,contextMenuData:{x:ot.bounds.x+ot.localEventX,y:ot.bounds.y+ot.localEventY,column:Ze.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!1}};case"openHeaderDropdownMenu":const rt=N.payload,gt=rt.screenPosition;return{...p,contextMenuData:{x:gt.x+gt.width,y:gt.y+gt.height,column:rt.columnIndex,row:void 0,isContextMenuOpen:!0,isHeaderMenu:!0},renameColumnInputData:{x:gt.x,y:gt.y,width:gt.width,height:gt.height,columnIdx:rt.columnIndex,isInputOpen:!1,inputValue:rt.value}};case"closeContextMenu":return{...p,contextMenuData:{isContextMenuOpen:!1}};case"closeSearch":return{...p,toggleSearch:!1};case"openSearch":return{...p,toggleSearch:!0};case"multipleCellsSelected":const Pt=N.payload;return{...p,gridSelection:Pt.selection};case"gridSelectionCleared":return{...p,gridSelection:$c};case"columnFreezeReset":return{...p,columnFreezeIndex:0};case"columnFreezeChanged":const vt=N.payload;return{...p,columnFreezeIndex:vt.columnIndex};default:return p}},Gs=({menuData:p,data:N,saveData:F,closeContextMenu:G,dispatch:J,gridSelection:se,columnFreezeIndex:me,renameColumnClicked:be})=>{let Ae=[],Ke=[];const{row:Ye,column:Ze,x:ot,y:rt,isHeaderMenu:gt}=p;se.rows&&(Ae=se.rows.toArray()),se.columns&&(Ke=se.columns.toArray());let Pt="Delete row";Ae.length&&Ae.length>1&&(Pt=`Delete ${Ae.length} rows`);let vt="Delete column";Ke.length&&Ke.length>1&&(vt=`Delete ${Ke.length} columns`);const Dt=Ye!==void 0&&Ye>=0||Ae.length,Vt=Ze!==void 0&&Ze>=0&&Ye!==void 0||Ke.length,en=Ye!==void 0&&Ye>=0&&!Ae.length,zt=Ze!==void 0&&Ze>=0&&Ye!==void 0&&!Ke.length,an=()=>A.createElement(A.Fragment,null,Dt?A.createElement(rr.s,{label:Pt,onClick:()=>{if(Ae.length){F(Br(N,Ae,!0)),J({type:Bs.gridSelectionCleared});return}Ye!==void 0&&Ye>=0&&((0,Os.ff)(Cs,{item:Is.CONTEXT_MENU_ACTION,menu_action:"row_delete"}),F(Br(N,[Ye],!0)))}}):null,Vt?A.createElement(rr.s,{label:vt,onClick:()=>{if(Ke.length){F({...N,fields:N.fields.filter((ln,yn)=>!Ke.includes(yn))}),J({type:Bs.gridSelectionCleared});return}Ze!==void 0&&Ze>=0&&((0,Os.ff)(Cs,{item:Is.CONTEXT_MENU_ACTION,menu_action:"column_delete"}),F({...N,fields:N.fields.filter((ln,yn)=>yn!==Ze)}))}}):null,Vt||Dt?A.createElement(xs.R,null):null,en?A.createElement(rr.s,{label:"Clear row",onClick:()=>{(0,Os.ff)(Cs,{item:Is.CONTEXT_MENU_ACTION,menu_action:"row_clear"}),F(Br(N,[Ye]))}}):null,zt?A.createElement(rr.s,{label:"Clear column",onClick:()=>{const ln=N.fields[Ze];ln.values=ln.values.map(()=>null),(0,Os.ff)(Cs,{item:Is.CONTEXT_MENU_ACTION,menu_action:"column_clear"}),F({...N})}}):null,en||zt?A.createElement(xs.R,null):null,A.createElement(rr.s,{label:"Remove all data",onClick:()=>{(0,Os.ff)(Cs,{item:Is.CONTEXT_MENU_ACTION,menu_action:"remove_all"}),F(Kc)}}),A.createElement(rr.s,{label:"Search...",onClick:()=>{(0,Os.ff)(Cs,{item:Is.CONTEXT_MENU_ACTION,menu_action:"open_search"}),J({type:Bs.openSearch})}})),Jt=()=>{if(Ze==null)return null;const ln=N.fields[Ze].type,yn=[],En=On=>{yn.push({label:(0,w.capitalize)(On),options:{targetField:N.fields[Ze].name,destinationType:On}})};ln===Tn.fS.string?(En(Tn.fS.number),En(Tn.fS.boolean)):ln===Tn.fS.number?(En(Tn.fS.string),En(Tn.fS.boolean)):ln===Tn.fS.boolean?(En(Tn.fS.number),En(Tn.fS.string)):(En(Tn.fS.string),En(Tn.fS.number),En(Tn.fS.boolean));let In="Set column freeze position";const Wn=Ze+1;return me===Wn&&(In="Unset column freeze"),A.createElement(A.Fragment,null,yn.length?A.createElement(tl.k,{label:"Set field type"},yn.map((On,Xn)=>A.createElement(rr.s,{key:Xn,label:On.label,onClick:()=>{const jn=(0,xc.p8)(N.fields[Ze],On.options);On.options.destinationType===Tn.fS.string&&_c(jn);const Ln={name:N.name,fields:[...N.fields],length:N.length};Ln.fields[Ze]=jn,(0,Os.ff)(Cs,{item:Is.HEADER_MENU_ACTION,menu_action:"convert_field"}),F(Ln)}}))):null,A.createElement(xs.R,null),A.createElement(rr.s,{label:In,onClick:()=>{(0,Os.ff)(Cs,{item:Is.HEADER_MENU_ACTION,menu_action:"column_freeze"}),J(me===Wn?{type:Bs.columnFreezeReset}:{type:Bs.columnFreezeChanged,payload:{columnIndex:Wn}})}}),A.createElement(rr.s,{label:"Rename column",onClick:be}),A.createElement(xs.R,null),A.createElement(rr.s,{label:"Delete column",onClick:()=>{(0,Os.ff)(Cs,{item:Is.HEADER_MENU_ACTION,menu_action:"delete_column"}),F({...N,fields:N.fields.filter((On,Xn)=>Xn!==Ze)}),J({type:Bs.gridSelectionCleared})}}),A.createElement(rr.s,{label:"Clear column",onClick:()=>{const On=N.fields[Ze];On.values=On.values.map(()=>null),(0,Os.ff)(Cs,{item:Is.HEADER_MENU_ACTION,menu_action:"clear_column"}),F({...N})}}))};return A.createElement(bi.x,{renderMenuItems:gt?Jt:an,x:ot,y:rt,onClose:G})},Mi=({renameColumnData:p,onColumnInputBlur:N,classStyle:F})=>{const{x:G,y:J,width:se,height:me,inputValue:be,columnIdx:Ae}=p,[Ke,Ye]=(0,A.useState)({}),[Ze,ot]=(0,A.useState)(be),rt=(0,A.useRef)(null);(0,A.useLayoutEffect)(()=>{rt.current?.focus();const Dt=rt.current?.getBoundingClientRect();if(Dt){const Vt={right:window.innerWidth<G+Dt.width,bottom:window.innerHeight<J+Dt.height};Ye({position:"fixed",left:Vt.right?G-Dt.width:G,top:Vt.bottom?J-Dt.height:J,width:se,height:me})}},[me,se,G,J]);const gt=Dt=>{const Vt=Dt.target.value;Vt&&N(Vt,Ae)},Pt=Dt=>{ot(Dt.target.value)},vt=Dt=>{Dt.key==="Enter"&&Dt.currentTarget.blur()};return A.createElement(vr.h_,null,A.createElement("input",{type:"text",className:F,value:Ze,onBlur:gt,ref:rt,style:Ke,onChange:Pt,onKeyDown:vt}))};function yu({options:p,data:N,id:F,fieldConfig:G,width:J,height:se}){const[me,be]=(0,A.useReducer)(Eu,Xo),{onUpdateData:Ae}=(0,Ps.R9)(),{columns:Ke,contextMenuData:Ye,renameColumnInputData:Ze,gridSelection:ot,columnFreezeIndex:rt,toggleSearch:gt,isResizeInProgress:Pt}=me,vt=N.series[p.selectedSeries??0],Dt=(0,ct.l4)(),Vt=Si(Dt);(0,A.useEffect)(()=>{vt&&be({type:Bs.updateColumns,payload:{frame:vt}})},[vt]);const en=([fa,ea])=>{const ha=vt.fields[fa];return!ha||ea>vt.length?ul:No(ha,ea,kc(ot))},zt=(fa,ea)=>{if(kc(ot))return;const[ha,Ra]=fa,wa={...vt,fields:vt.fields.map(ts=>({...ts,values:[...ts.values]}))},Ba=wa.fields[ha];if(!Ba)return;const ls=Ba.values.toArray();ls[Ra]=ea.data,Ba.values=[...ls],(0,Os.ff)(Cs,{item:Is.EDIT_CELL}),jr(wa,Ae)},an=fa=>{const ea=vt.length??0;(0,Os.ff)(Cs,{item:Is.APPEND_COLUMN}),jr({...vt,fields:[...vt.fields,{name:fa,type:Tn.fS.string,config:{},values:new Array(ea).fill("")}]},Ae)},Jt=()=>{const fa=vt.fields.map(ea=>{const ha=ea.values.slice();return ha.push(null),{...ea,values:ha}});(0,Os.ff)(Cs,{item:Is.APPEND_ROW}),jr({...vt,fields:fa,length:vt.length+1},Ae)},ln=(fa,ea,ha,Ra)=>{(0,Os.ff)(Cs,{item:Is.COLUMN_RESIZE}),be({type:Bs.columnResizeStart,payload:{columnIndex:ha,width:ea}})},yn=(fa,ea,ha,Ra)=>{be({type:Bs.columnResizeEnd})},En=()=>{be({type:Bs.closeContextMenu})},In=fa=>{if(fa.current&&fa.current.range)return(0,Os.ff)(Cs,{item:Is.DELETE_BTN_PRESSED,selection:"grid-cell"}),jr(vu(vt,fa.current.range),Ae),!0;const ea=fa.rows.toArray(),ha=fa.columns.toArray();if(ea.length)return(0,Os.ff)(Cs,{item:Is.DELETE_BTN_PRESSED,selection:"rows"}),jr(Br(vt,ea),Ae),!0;if(ha.length){const Ra={...vt,fields:vt.fields.map((wa,Ba)=>ha.includes(Ba)?{...wa,values:new Array(vt.length).fill(null)}:wa)};return(0,Os.ff)(Cs,{item:Is.DELETE_BTN_PRESSED,selection:"columns"}),jr(Ra,Ae),!0}return!1},Wn=(fa,ea)=>{ea.preventDefault(),be({type:Bs.openCellContextMenu,payload:{event:ea,cell:fa}})},On=(fa,ea)=>{ea.preventDefault(),be({type:Bs.openHeaderContextMenu,payload:{event:ea,columnIndex:fa}})},Xn=(fa,ea)=>{be({type:Bs.openHeaderDropdownMenu,payload:{screenPosition:ea,columnIndex:fa,value:me.columns[fa].title}})},jn=async(fa,ea)=>{const ha=vt.fields.map(Ba=>Ba),Ra=ha[fa];ha.splice(fa,1),ha.splice(ea,0,Ra),await jr({...vt,fields:ha},Ae)&&((0,Os.ff)(Cs,{item:Is.COLUMN_REORDER}),be({type:Bs.columnMove,payload:{from:fa,to:ea}}))},Ln=(fa,ea)=>{const ha=vt.fields.map(Ra=>({...Ra,values:Ra.values.slice()}));for(const Ra of ha){const wa=Ra.values[fa];Ra.values.splice(fa,1),Ra.values.splice(ea,0,wa)}(0,Os.ff)(Cs,{item:Is.ROW_REORDER}),jr({...vt,fields:ha},Ae)},na=()=>{(0,Os.ff)(Cs,{item:Is.HEADER_MENU_ACTION,menu_action:"rename_column"}),be({type:Bs.showColumnRenameInput})},ia=(fa,ea)=>{const ha=vt.fields.map(Ra=>Ra);ha[ea].name=fa,be({type:Bs.hideColumnRenameInput}),jr({...vt,fields:ha},Ae)},$a=()=>{be({type:Bs.closeSearch})},Va=fa=>{(0,Os.ff)(Cs,{item:Is.GRID_SELECTED}),be({type:Bs.multipleCellsSelected,payload:{selection:fa}})},ya=fa=>{jr(fa,Ae)};if(!vt)return A.createElement(Za.Z,{panelId:F,fieldConfig:G,data:N});if(!Ks())return A.createElement(Za.Z,{panelId:F,message:"Datagrid is not enabled",fieldConfig:G,data:N});if(!document.getElementById("portal")){const fa=document.createElement("div");fa.id="portal",document.body.appendChild(fa)}const _a=xi(Dt,Pt);return A.createElement(A.Fragment,null,A.createElement(gr.ZP,{className:_a.dataEditor,getCellContent:en,columns:Ke,rows:vt.length,width:J,height:se,initialSize:[J,se],theme:Vt,smoothScrollX:!0,smoothScrollY:!0,overscrollY:50,onCellEdited:Ks()?zt:void 0,getCellsForSelection:Ks()?!0:void 0,showSearch:Ks()?gt:!1,onSearchClose:$a,gridSelection:ot,onGridSelectionChange:Ks()?Va:void 0,onRowAppended:Ks()?Jt:void 0,onDelete:Ks()?In:void 0,rowMarkers:Ks()?pu:Wc,onColumnResize:ln,onColumnResizeEnd:yn,onCellContextMenu:Ks()?Wn:void 0,onHeaderContextMenu:Ks()?On:void 0,onHeaderMenuClick:Ks()?Xn:void 0,trailingRowOptions:ml,rightElement:Ks()?A.createElement(dl,{onColumnInputBlur:an,divStyle:_a.addColumnDiv}):null,rightElementProps:Wm,freezeColumns:rt,onRowMoved:Ks()?Ln:void 0,onColumnMoved:Ks()?jn:void 0}),Ye.isContextMenuOpen&&A.createElement(Gs,{menuData:Ye,data:vt,saveData:ya,closeContextMenu:En,dispatch:be,gridSelection:ot,columnFreezeIndex:rt,renameColumnClicked:na}),Ze.isInputOpen?A.createElement(Mi,{onColumnInputBlur:ia,renameColumnData:Ze,classStyle:_a.renameColumnInput}):null)}const Hc={selectedSeries:0},gl=new ne.c(yu).setPanelOptions((p,N)=>{const F=N.data.map((G,J)=>({value:J,label:G.refId}));return N.options&&!F.map(G=>G.value).includes(N.options.selectedSeries??0)&&(N.options.selectedSeries=Hc.selectedSeries),p.addSelect({path:"selectedSeries",name:"Select series",defaultValue:Hc.selectedSeries,settings:{options:F}})});class pl extends A.Component{constructor(){super(...arguments),this.subscription=new Ya.w0,this.state={}}componentDidMount(){const{eventBus:N}=this.props;this.subscription.add(N.subscribe(ds.es,F=>{this.setState({event:F})})),this.subscription.add(N.subscribe(ds.xH,F=>{this.setState({event:F})})),this.subscription.add(N.subscribe(Us.IA,F=>{this.setState({event:F})})),this.subscription.add(N.subscribe(Us.oi,F=>{this.setState({event:F})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:N}=this.state;if(!N)return A.createElement("div",null,"no events yet");const{type:F,payload:G,origin:J}=N;return A.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},A.createElement("h3",null,"Origin: ",J?.path),A.createElement("span",null,"Type: ",F),!!G&&A.createElement(A.Fragment,null,A.createElement("pre",null,JSON.stringify(G.point,null,"  ")),G.data&&A.createElement(An.H,{data:G.data,rowIndex:G.rowIndex,columnIndex:G.columnIndex})))}}var bu=e(64282);let hl=100;class qo extends A.PureComponent{constructor(N){super(N),this.history=new bu.d({capacity:40,append:"head"}),this.eventObserver={next:G=>{const J=G.origin;this.history.add({key:hl++,type:G.type,path:J?.path,payload:G.payload}),this.setState({counter:hl})}},this.state={counter:hl};const F=[];F.push(N.eventBus.getStream(ds.es).subscribe(this.eventObserver)),F.push(N.eventBus.getStream(ds.xH).subscribe(this.eventObserver)),F.push(N.eventBus.getStream(ds.v9).subscribe(this.eventObserver)),this.subs=F}componentWillUnmount(){for(const N of this.subs)N.unsubscribe()}render(){return A.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((N,F)=>A.createElement("div",{key:N.key},JSON.stringify(N.path)," ",N.type," / X:",JSON.stringify(N.payload.x)," / Y:",JSON.stringify(N.payload.y))))}}var oa=e(66656);class Gc extends A.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(N){const{data:F,options:G}=this.props;if(N.data!==F&&(this.counters.dataChanged++,G.counters?.schemaChanged)){const J=N.data?.series,se=F.series;se&&J&&((0,Mr.nl)(se,J,Mr.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:N,options:F}=this.props,G=F.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const J=Date.now(),se=J-this.lastRender;this.lastRender=J;const me=oa.TB.get(oa.gz.lastNotNull);return A.createElement("div",null,A.createElement("div",null,A.createElement(Po.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters,tooltip:"Step back"}),A.createElement("span",null,G.render&&A.createElement("span",null,"Render: ",this.counters.render,"\xA0"),G.dataChanged&&A.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),G.schemaChanged&&A.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),A.createElement("span",null,"TIME: ",se,"ms"))),N.series&&N.series.map((be,Ae)=>A.createElement("div",{key:`${Ae}/${be.refId}`},A.createElement("h4",null,(0,Bn.nf)(be,Ae)," (",be.length,")"),A.createElement("table",{className:"filter-table"},A.createElement("thead",null,A.createElement("tr",null,A.createElement("td",null,"Field"),A.createElement("td",null,"Type"),A.createElement("td",null,"Last"))),A.createElement("tbody",null,be.fields.map((Ke,Ye)=>{const Ze=me.reduce(Ke,!1,!1)[me.id];return A.createElement("tr",{key:`${Ye}/${Ke.name}`},A.createElement("td",null,(0,Bn.CZ)(Ke,be,N.series)),A.createElement("td",null,Ke.type),A.createElement("td",null,`${Ze}`))}))))))}}var vl=e(1128);function pr(p){const N=(0,Ps.R9)(),F=G=>{N.onInstanceStateChange({name:G.currentTarget.value})};return A.createElement(A.Fragment,null,A.createElement(fs.g,{label:"State name"},A.createElement(vl.I,{value:N.instanceState?.name??"",onChange:F})))}function Qr({value:p,context:N,onChange:F,item:G}){return A.createElement("div",null,"Current value: ",N.instanceState?.name," ")}var js=(p=>(p.Cursor="cursor",p.Events="events",p.Render="render",p.State="State",p.ThrowError="ThrowError",p))(js||{});class jc extends A.Component{render(){const{options:N}=this.props;switch(N.mode){case js.Events:return A.createElement(qo,{eventBus:this.props.eventBus});case js.Cursor:return A.createElement(pl,{eventBus:this.props.eventBus});case js.State:return A.createElement(pr,{...this.props});case js.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return A.createElement(Gc,{...this.props})}}}const El=new ne.c(jc).useFieldConfig().setPanelOptions(p=>{p.addSelect({path:"mode",name:"Mode",defaultValue:js.Render,settings:{options:[{label:"Render",value:js.Render},{label:"Events",value:js.Events},{label:"Cursor",value:js.Cursor},{label:"Cursor",value:js.Cursor},{label:"Share state",value:js.State},{label:"Throw error",value:js.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:N})=>N===js.State,editor:Qr}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:N})=>N===js.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:N})=>N===js.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:N})=>N===js.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var ss=e(78088);const ei=p=>A.createElement(ss.Z,{data:p.data.series[0],app:re.zj.Unknown});var Pu=e(15301);class Cu{getListWithDefaults(N){return N.getListAppender({name:ns.y.FlameGraph,pluginId:"flamegraph"})}getSuggestionsForData(N){if(!N.data)return;const F=N.data.series[0];try{new Pu.S(F)}catch{return}this.getListWithDefaults(N).append({name:ns.y.FlameGraph})}}const Du=new ne.c(ei).setSuggestionsSupplier(new Cu);var Qc=e(3133),Su=e(62108);const Yc=(p,N)=>{const F="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",G=N?F:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",J=N?F:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",se=p.isDark?G:J;return`
      background-color: ${p.colors.background.secondary};
      margin-right: ${p.spacing(4)};
      border: 1px solid ${p.colors.border.weak};
      border-bottom-left-radius: ${p.shape.borderRadius(2)};
      border-bottom-right-radius: ${p.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${p.breakpoints.down("xxl")} {
        margin-right: ${p.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${se};
      }
`},Zc=(p,N)=>(0,O.css)`
  color: ${N?p.v1.palette.blue95:p.colors.text.secondary};

  ${p.breakpoints.down("sm")} {
    display: none;
  }
`,Jc=(0,O.css)`
  padding: 16px;
`,Xc=({card:p})=>{const N=(0,ct.wW)((0,A.useCallback)(G=>qc(G,p.done),[p.done])),F=(0,ct.wW)((0,A.useCallback)(G=>Zc(G,p.done),[p.done]));return A.createElement("div",{className:N.card},A.createElement("div",{className:Jc},A.createElement("a",{href:`${p.href}?utm_source=grafana_gettingstarted`,className:N.url},A.createElement("div",{className:N.heading},p.done?"complete":p.heading),A.createElement("h4",{className:N.title},p.title),A.createElement("div",null,A.createElement(jt.J,{className:F,name:p.icon,size:"xxl"})))),A.createElement("a",{href:`${p.learnHref}?utm_source=grafana_gettingstarted`,className:N.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",A.createElement(jt.J,{name:"external-link-alt"})))},qc=(p,N)=>({card:(0,O.css)`
      ${Yc(p,N)}

      min-width: 230px;

      ${p.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:(0,O.css)`
      text-transform: uppercase;
      color: ${N?p.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${p.spacing(2)};
    `,title:(0,O.css)`
      margin-bottom: ${p.spacing(2)};
    `,url:(0,O.css)`
      display: inline-block;
    `,learnUrl:(0,O.css)`
      border-top: 1px solid ${p.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var ti=e(56812);const xu=({card:p})=>{const N=(0,ct.wW)((0,A.useCallback)(G=>Tu(G,p.done),[p.done])),F=(0,ct.wW)((0,A.useCallback)(G=>Zc(G,p.done),[p.done]));return A.createElement("a",{className:N.card,target:"_blank",rel:"noreferrer",href:`${p.href}?utm_source=grafana_gettingstarted`,onClick:G=>Mu(G,p)},A.createElement("div",{className:Jc},A.createElement("div",{className:N.type},p.type),A.createElement("div",{className:N.heading},p.done?"complete":p.heading),A.createElement("h4",{className:N.cardTitle},p.title),A.createElement("div",{className:N.info},p.info),A.createElement(jt.J,{className:F,name:p.icon,size:"xxl"})))},Mu=(p,N)=>{p.preventDefault(),ti.Z.get(N.key)||ti.Z.set(N.key,!0)},Tu=(p,N)=>({card:(0,O.css)`
      ${Yc(p,N)}
      width: 460px;
      min-width: 460px;

      ${p.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${p.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:(0,O.css)`
      color: ${p.colors.primary.text};
      text-transform: uppercase;
    `,heading:(0,O.css)`
      text-transform: uppercase;
      color: ${p.colors.primary.text};
      margin-bottom: ${p.spacing(1)};
    `,cardTitle:(0,O.css)`
      margin-bottom: ${p.spacing(2)};
    `,info:(0,O.css)`
      margin-bottom: ${p.spacing(2)};
    `,status:(0,O.css)`
      display: flex;
      justify-content: flex-end;
    `}),Ou=({step:p})=>{const N=(0,ct.wW)(Iu);return A.createElement("div",{className:N.setup},A.createElement("div",{className:N.info},A.createElement("h2",{className:N.title},p.title),A.createElement("p",null,p.info)),A.createElement("div",{className:N.cards},p.cards.map((F,G)=>{const J=`${F.title}-${G}`;return F.type==="tutorial"?A.createElement(xu,{key:J,card:F}):A.createElement(Xc,{key:J,card:F})})))},Iu=p=>({setup:(0,O.css)`
      display: flex;
      width: 95%;
    `,info:(0,O.css)`
      width: 172px;
      margin-right: 5%;

      ${p.breakpoints.down("xxl")} {
        margin-right: ${p.spacing(4)};
      }
      ${p.breakpoints.down("sm")} {
        display: none;
      }
    `,title:(0,O.css)`
      color: ${p.v1.palette.blue95};
    `,cards:(0,O.css)`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${p.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var yl=e(5926);const ed="Grafana fundamentals",bl="Create users and teams",td="getting.started.",nd=`${td}${ed.replace(" ","-").trim().toLowerCase()}`,ad=`${td}${bl.replace(" ","-").trim().toLowerCase()}`,Ys=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:ed,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(ti.Z.get(nd)),key:nd,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(p=>{p((0,yl.ak)().getMetricSources().filter(N=>N.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Ue.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:ad,check:()=>Promise.resolve(ti.Z.get(ad)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const p=await(0,Ue.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(p.length>0)},done:!1}]}];class bs extends A.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:Ys()},this.onForwardClick=()=>{this.setState(N=>({currentStep:N.currentStep+1}))},this.onPreviousClick=()=>{this.setState(N=>({currentStep:N.currentStep-1}))},this.dismiss=()=>{const{id:N}=this.props,F=(0,St.h4)().getCurrent(),G=F?.getPanelById(N);F?.removePanel(G),Ue.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(J=>{Je.contextSrv.user.helpFlags1=J.helpFlags1})}}async componentDidMount(){const{steps:N}=this.state,F=N.map(async J=>{const se=J.cards.map(async be=>be.check().then(Ae=>({...be,done:Ae}))),me=await Promise.all(se);return{...J,done:me.every(be=>be.done),cards:me}}),G=await Promise.all(F);this.setState({currentStep:G[0].done?1:0,steps:G,checksDone:!0})}render(){const{checksDone:N,currentStep:F,steps:G}=this.state,J=Pl(),se=G[F];return A.createElement("div",{className:J.container},N?A.createElement(A.Fragment,null,A.createElement(ge.zx,{variant:"secondary",fill:"text",className:J.dismiss,onClick:this.dismiss},"Remove this panel"),F===G.length-1&&A.createElement(ge.zx,{className:(0,O.cx)(J.backForwardButtons,J.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),A.createElement("div",{className:J.content},A.createElement(Ou,{step:se})),F<G.length-1&&A.createElement(ge.zx,{className:(0,O.cx)(J.backForwardButtons,J.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):A.createElement("div",{className:J.loading},A.createElement("div",{className:J.loadingText},"Checking completed setup steps"),A.createElement(Su.$,{size:24,inline:!0})))}}const Pl=(0,qs.B)(()=>{const p=We.config.theme2;return{container:(0,O.css)`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${p.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${p.spacing(4)} ${p.spacing(2)} 0;
    `,content:(0,O.css)`
      label: content;
      display: flex;
      justify-content: center;

      ${p.breakpoints.down("xxl")} {
        margin-left: ${p.spacing(3)};
        justify-content: flex-start;
      }
    `,header:(0,O.css)`
      label: header;
      margin-bottom: ${p.spacing(3)};
      display: flex;
      flex-direction: column;

      ${p.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:(0,O.css)`
      height: 58px;
      padding-right: ${p.spacing(2)};
      display: none;

      ${p.breakpoints.up("md")} {
        display: block;
      }
    `,heading:(0,O.css)`
      label: heading;
      margin-right: ${p.spacing(3)};
      margin-bottom: ${p.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${p.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:(0,O.css)`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:(0,O.css)`
      left: 10px;

      ${p.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:(0,O.css)`
      right: 10px;

      ${p.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:(0,O.css)`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${p.spacing(1)};
    `,loading:(0,O.css)`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:(0,O.css)`
      margin-right: ${p.spacing(1)};
    `}}),sd=new ne.c(bs).setNoPadding();var lr=e(35596),ni=e(81144);const rd={bucketOffset:0},od={fillOpacity:80,gradientMode:xt.FI.None,lineWidth:1};function id(p,N){return Math.floor(p/N)*N}function Ru(p,N){return Math.ceil(p/N)*N}function ld(p){return p.fields[1].values[0]-p.fields[0].values[0]}const Cl=(p,N)=>{let{min:F,max:G}=p.fields[2].config,J=new ms.U,se=ld(p),me=(rt,gt,Pt,vt,Dt,Vt)=>{let en=rt.axes[gt]._space,zt=rt.valToPos(rt.data[0][0]+se,"x")-rt.valToPos(rt.data[0][0],"x"),an=id(F??rt.data[0][0],se),Jt=Ru(G??rt.data[0][rt.data[0].length-1]+se,se),ln=[],yn=Math.ceil(en/zt);for(let En=0,In=an;In<=Jt;En++,In+=se)!(En%yn)&&ln.push(In);return ln};J.addScale({scaleKey:"x",isTime:!1,distribution:xt.wf.Linear,orientation:xt.wN.Horizontal,direction:xt.bQ.Right,range:(rt,gt,Pt)=>{F!=null&&(gt=F),G!=null&&(Pt=G);let vt=rt.data[0][0],Dt=rt.data[0][rt.data[0].length-1];return Pt===Dt?Pt+=se:Pt=Ru(Pt,se),gt>vt&&(gt=id(gt,se)),[gt,Pt]}}),J.addScale({scaleKey:"y",isTime:!1,distribution:xt.wf.Linear,orientation:xt.wN.Vertical,direction:xt.bQ.Up});const be=p.fields[0].display,Ae=rt=>(0,qn.zc)(be(rt));J.addAxis({scaleKey:"x",isTime:!1,placement:xt.LB.Bottom,incrs:lr.Zi,splits:me,values:(rt,gt)=>{const Pt=gt.map(Ae),vt=Pt.reduce((zt,an)=>Math.max((0,ur.X1)(an,Xa.gD).width,zt),0),Dt=10,Vt=rt.bbox.width/((vt+Dt)*devicePixelRatio),en=Math.ceil(Pt.length/Vt);return Pt.map((zt,an)=>an%en===0?zt:null)},theme:N});let Ye=p.fields[2].display;J.addAxis({scaleKey:"y",isTime:!1,placement:xt.LB.Left,formatValue:(rt,gt)=>(0,qn.zc)(Ye(rt,gt)),theme:N}),J.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let Ze=Vn.Z.paths.bars({align:1,size:[1,1/0]}),ot=0;for(let rt=2;rt<p.fields.length;rt++){const gt=p.fields[rt];gt.state=gt.state??{},gt.state.seriesIndex=ot++;const Pt={...od,...gt.config.custom},vt="y",Dt=(0,Yn.fD)(gt),en=(0,Yn.YO)(gt,N).color;J.addSeries({scaleKey:vt,lineWidth:Pt.lineWidth,lineColor:en,fillOpacity:Pt.fillOpacity,theme:N,colorMode:Dt,pathBuilder:Ze,show:!Pt.hideFrom?.viz,gradientMode:Pt.gradientMode,thresholds:gt.config.thresholds,hardMin:gt.config.min,hardMax:gt.config.max,softMin:Pt.axisSoftMin,softMax:Pt.axisSoftMax,dataFrameFieldIndex:gt.state.origin})}return J},Ds=p=>{let N=[];for(const F of p.fields)F.name!==lr.cO&&N.push(F.values);for(let F=1;F<N.length;F++){let G=N[F];for(let J=0;J<G.length;J++)G[J]===0&&(G[J]=null)}return N};class Ms extends A.Component{constructor(N){super(N),this.state=this.prepState(N)}prepState(N,F=!0){let G=null;const{alignedFrame:J}=N;return J&&(G={alignedData:Ds(J)},F&&(G.config=Cl(J,this.props.theme))),G}renderLegend(N){const{legend:F}=this.props;return!N||F.showLegend===!1?null:A.createElement(Mo.l,{data:this.props.rawSeries,config:N,maxHeight:"35%",maxWidth:"60%",...F})}componentDidUpdate(N){const{structureRev:F,alignedFrame:G,bucketSize:J}=this.props;if(G!==N.alignedFrame){let se=this.prepState(this.props,!1);se&&(J!==N.bucketSize||this.props.options!==N.options||this.state.config===void 0||F!==N.structureRev||!F)&&(se.config=Cl(G,this.props.theme)),se&&this.setState(se)}}render(){const{width:N,height:F,children:G,alignedFrame:J}=this.props,{config:se}=this.state;return se?A.createElement(Es.AY,{width:N,height:F,legend:this.renderLegend(se)},(me,be)=>A.createElement(ni.N,{config:this.state.config,data:this.state.alignedData,width:me,height:be},G?G(se,J):null)):null}}const cs=({data:p,options:N,width:F,height:G})=>{const J=(0,ct.l4)(),se=(0,A.useMemo)(()=>{if(!p.series.length)return;if(p.series.forEach((Ae,Ke)=>{Ae.fields.forEach((Ye,Ze)=>{Ye.state={...Ye.state,origin:{frameIndex:Ke,fieldIndex:Ze}}})}),p.series.length===1){const Ae=(0,lr.qr)(p.series[0]);if(Ae)return(0,lr.zM)(Ae)}const be=(0,lr.gY)(p.series,N);if(be)return(0,lr.zM)(be,J)},[p.series,N,J]);if(!se||!se.fields.length)return A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"No histogram found in response"));const me=ld(se);return A.createElement(Ms,{options:N,theme:J,legend:N.legend,rawSeries:p.series,structureRev:p.structureRev,width:F,height:G,alignedFrame:se,bucketSize:me},(be,Ae)=>null)};function Yr(p){if(p?.length!==1)return!1;const N=p[0];if(N.fields.length<3||!(0,lr.Ok)(N.fields[0].name)||!(0,lr.kl)(N.fields[1].name))return!1;for(const F of N.fields)if(F.type!==Tn.fS.number)return!1;return!0}const ro=new ne.c(cs).setPanelOptions(p=>{p.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(N,F)=>Yr(F)}).addNumberInput({path:"bucketSize",name:lr.py.bucketSize.name,description:lr.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:rd.bucketSize,showIf:(N,F)=>!Yr(F)}).addNumberInput({path:"bucketOffset",name:lr.py.bucketOffset.name,description:lr.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:rd.bucketOffset,showIf:(N,F)=>!Yr(F)}).addBooleanSwitch({path:"combine",name:lr.py.combine.name,description:lr.py.combine.description,defaultValue:rd.combine,showIf:(N,F)=>!Yr(F)}),vs.J(p)}).useFieldConfig({standardOptions:{[Xt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Dn.S.PaletteClassic}}},useCustomConfig:p=>{const N=od;p.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:N.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:N.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:Nn.q.fillGradient[0].value,settings:{options:Nn.q.fillGradient}}),us.B(p)}});var or=e(81087),Dl=e(79978);const cd=[{label:"Grafana",value:or.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:or.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:or.z.Plugin,description:"Plugins with live support"}];class Au extends A.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=N=>{N.value&&this.props.onChange({scope:N.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=N=>{const F={scope:this.props.value?.scope,path:void 0};N.value&&(F.namespace=N.value),this.props.onChange(F)},this.onPathChanged=N=>{const{value:F,onChange:G}=this.props,J={scope:F.scope,namespace:F.namespace};N.value&&(J.path=N.value),G(J)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(N){this.props.value!==N.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:N,paths:F}=this.state,{scope:G,namespace:J,path:se}=this.props.value,me=Fm(_e.config.theme2);return A.createElement(A.Fragment,null,A.createElement(ga.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),A.createElement("div",null,A.createElement("div",{className:me.dropWrap},A.createElement(Dl._,null,"Scope"),A.createElement(Ve.Ph,{options:cd,value:cd.find(be=>be.value===G),onChange:this.onScopeChanged})),G&&A.createElement("div",{className:me.dropWrap},A.createElement(Dl._,null,"Namespace"),A.createElement(Ve.Ph,{options:N,value:N.find(be=>be.value===J)??(J?{label:J,value:J}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),G&&J&&A.createElement("div",{className:me.dropWrap},A.createElement(Dl._,null,"Path"),A.createElement(Ve.Ph,{options:F,value:Lu(F,se),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function Lu(p,N){const F=p.find(G=>G.value===N);if(F)return F;if(N)return{label:N,value:N}}const Fm=(0,qs.B)(p=>({dropWrap:(0,O.css)`
    margin-bottom: ${p.spacing(1)};
  `}));var Bu=e(47838),dd=e(53933),Sl=e(43685),ud=e(78838),xl=e(11649),br=e(19221),Nu=e(95066);function Ml(p){const{data:N,height:F,width:G,options:J,fieldConfig:se,id:me,timeRange:be}=p,Ae=(0,ct.l4)(),Ke=(0,Ps.R9)(),Ye=N.series,Ze=Ye.filter(an=>an.meta?.custom?.parentRowIndex===void 0),ot=Ye.filter(an=>an.meta?.custom?.parentRowIndex!==void 0),rt=Ze?.length,gt=Ze[0]?.fields.length,Pt=md(Ze,J),vt=Ze[Pt];let Dt=F,Vt=ot;if(!rt||!gt)return A.createElement(Za.Z,{panelId:me,fieldConfig:se,data:N});if(rt>1){const an=Ae.spacing.gridSize*Ae.components.height.md,Jt=Ae.spacing.gridSize;Dt=F-an-Jt,Vt=ot.filter(ln=>ln.refId===vt.refId)}const en=A.createElement(Nu.i,{height:Dt,width:G,data:vt,noHeader:!J.showHeader,showTypeIcons:J.showTypeIcons,resizable:!0,initialSortBy:J.sortBy,onSortByChange:an=>wu(an,p),onColumnResize:(an,Jt)=>Uu(an,Jt,p),onCellFilterAdded:Ke.onAddAdHocFilter,footerOptions:J.footer,enablePagination:J.footer?.enablePagination,subData:Vt,cellHeight:J.cellHeight,timeRange:be});if(rt===1)return en;const zt=Ze.map((an,Jt)=>({label:(0,Bn.nf)(an),value:Jt}));return A.createElement("div",{className:Uo.wrapper},en,A.createElement("div",{className:Uo.selectWrapper},A.createElement(Ve.Ph,{options:zt,value:zt[Pt],onChange:an=>Wu(an,p)})))}function md(p,N){return N.frameIndex>0&&N.frameIndex<p.length?N.frameIndex:0}function Uu(p,N,F){const{fieldConfig:G}=F,{overrides:J}=G,se=br.mi.byName,me="custom.width",be=J.find(Ae=>Ae.matcher.id===se&&Ae.matcher.options===p);if(be){const Ae=be.properties.find(Ke=>Ke.id===me);Ae?Ae.value=N:be.properties.push({id:me,value:N})}else J.push({matcher:{id:se,options:p},properties:[{id:me,value:N}]});F.onFieldConfigChange({...G,overrides:J})}function wu(p,N){N.onOptionsChange({...N.options,sortBy:p})}function Wu(p,N){N.onOptionsChange({...N.options,frameIndex:p.value||0})}const Uo={wrapper:(0,O.css)`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:(0,O.css)`
    padding: 8px 8px 0px 8px;
  `};var Or=(p=>(p.Raw="raw",p.JSON="json",p.Auto="auto",p.None="none",p))(Or||{});class Tl extends A.PureComponent{constructor(N){super(N),this.styles=wo(We.config.theme2),this.streamObserver={next:F=>{(0,or.se)(F)?this.setState({status:F,changed:Date.now()}):(0,or.RL)(F)?this.setState({message:F.message,changed:Date.now()}):console.log("ignore",F)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=F=>{const{options:G,onOptionsChange:J}=this.props;try{const se=JSON.parse(F);J({...G,json:se})}catch(se){console.log("Error reading JSON",se)}},this.onPublishClicked=async()=>{const{addr:F}=this.state;if(!F){console.log("invalid address");return}const G=this.props.options?.json;if(!G){console.log("nothing to publish");return}const J=await(0,Sl.gj)().publish(F,G);console.log("onPublishClicked (response from publish)",J)},this.isValid=!!(0,Sl.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(N){this.props.options?.channel!==N.options?.channel&&this.loadChannel()}async loadChannel(){const N=this.props.options?.channel;if(!(0,or.nU)(N)){console.log("INVALID",N),this.unsubscribe(),this.setState({addr:void 0});return}if((0,w.isEqual)(N,this.state.addr)){console.log("Same channel",this.state.addr);return}const F=(0,Sl.gj)();if(!F){console.log("INVALID",N),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",N);try{this.subscription=F.getStream(N).subscribe(this.streamObserver),this.setState({addr:N,error:void 0})}catch(G){this.setState({addr:void 0,error:G})}}renderNotEnabled(){const N=`[feature_toggles]
    enable = live`;return A.createElement(ga.b,{title:"Grafana Live",severity:"info"},A.createElement("p",null,"Grafana live requires a feature flag to run"),A.createElement("b",null,"custom.ini:"),A.createElement("pre",null,N))}renderMessage(N){const{options:F}=this.props,{message:G}=this.state;if(!G)return A.createElement("div",null,A.createElement("h4",null,"Waiting for data:"),F.channel?.scope,"/",F.channel?.namespace,"/",F.channel?.path);if(F.message===Or.JSON)return A.createElement(ud.g,{json:G,open:5});if(F.message===Or.Auto&&G instanceof Bu.Av){const J={series:(0,Qi.SM)({data:[G],theme:We.config.theme2,replaceVariables:me=>me,fieldConfig:{defaults:{},overrides:[]}}),state:dd.Gu.Streaming},se={...this.props,options:{frameIndex:0,showHeader:!0}};return A.createElement(Ml,{...se,data:J,height:N})}return A.createElement("pre",null,JSON.stringify(G))}renderPublish(N){const{options:F}=this.props;return A.createElement(A.Fragment,null,A.createElement(xl.p,{height:N-32,language:"json",value:F.json?JSON.stringify(F.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),A.createElement("div",{style:{height:32}},A.createElement(ge.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:N}=this.state;if(N?.state===or.yS.Connected)return;let F="";return N&&(F=this.styles.status[N.state]),A.createElement("div",{className:(0,O.cx)(F,this.styles.statusWrap)},N?.state)}renderBody(){const{status:N}=this.state,{options:F,height:G}=this.props;if(F.publish){if(F.message===Or.None)return A.createElement("div",null,this.renderPublish(G));const J=G/2;return A.createElement("div",null,A.createElement("div",{style:{height:J,overflow:"hidden"}},A.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(J))),A.createElement("div",null,this.renderPublish(J)))}return F.message===Or.None?A.createElement("pre",null,JSON.stringify(N)):A.createElement("div",{style:{overflow:"hidden",height:G}},A.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(G)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:N,error:F}=this.state;return N?F?A.createElement("div",null,A.createElement("h2",null,"ERROR"),A.createElement("div",null,JSON.stringify(F))):A.createElement(A.Fragment,null,this.renderStatus(),this.renderBody()):A.createElement(ga.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const wo=(0,qs.B)(p=>({statusWrap:(0,O.css)`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${p.components.panel.background};
    padding: 10px;
    z-index: ${p.zIndex.modal};
  `,status:{[or.yS.Pending]:(0,O.css)`
      border: 1px solid ${p.v1.palette.orange};
    `,[or.yS.Connected]:(0,O.css)`
      border: 1px solid ${p.colors.success.main};
    `,[or.yS.Connecting]:(0,O.css)`
      border: 1px solid ${p.v1.palette.brandWarning};
    `,[or.yS.Disconnected]:(0,O.css)`
      border: 1px solid ${p.colors.warning.main};
    `,[or.yS.Shutdown]:(0,O.css)`
      border: 1px solid ${p.colors.error.main};
    `,[or.yS.Invalid]:(0,O.css)`
      border: 1px solid red;
    `}})),oo=new ne.c(Tl).setPanelOptions(p=>{p.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Au,defaultValue:{}}),p.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Or.Raw,label:"Raw Text"},{value:Or.JSON,label:"JSON"},{value:Or.Auto,label:"Auto"},{value:Or.None,label:"None"}]},defaultValue:Or.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var Zr=e(51451),Ol=e(55905),io=e(21932),fd=e(66236),Ti=e(30209);const Fu=({data:p,timeZone:N,fieldConfig:F,options:{showLabels:G,showTime:J,wrapLogMessage:se,showCommonLabels:me,prettifyLogMessage:be,sortOrder:Ae,dedupStrategy:Ke,enableLogDetails:Ye},title:Ze,id:ot})=>{const rt=Ae===xt.UV.Ascending,gt=(0,ct.wW)(gd),[Pt,vt]=(0,A.useState)(0),Dt=(0,A.useRef)(null),{eventBus:Vt}=(0,Ps.R9)(),en=(0,A.useCallback)(En=>{En?Vt.publish(new ds.es({point:{time:En.timeEpochMs}})):Vt.publish(new ds.xH)},[Vt]),[zt,an,Jt]=(0,A.useMemo)(()=>{const En=p?(0,Ti.aB)(p.series,p.request?.intervalMs,void 0,p.request?.targets):null,In=En?.rows||[],Wn=En?.meta?.find(Xn=>Xn.label===Ti.Qp),On=(0,Ti.UW)(In,Ke);return[In,On,Wn]},[p,Ke]);(0,A.useLayoutEffect)(()=>{rt&&Dt.current?vt(Dt.current.offsetHeight):vt(0)},[rt,zt]);const ln=(0,A.useCallback)((En,In)=>(0,Go.a_)({field:En,rowIndex:In,range:p.timeRange}),[p]);if(!p||zt.length===0)return A.createElement(Ol.Z,{fieldConfig:F,panelId:ot,data:p,needsStringField:!0});const yn=()=>A.createElement("div",{className:(0,O.cx)(gt.labelContainer,rt&&gt.labelContainerAscending)},A.createElement("span",{className:gt.label},"Common labels:"),A.createElement(io.j,{labels:Jt?Jt.value:{labels:"(no common labels)"}}));return A.createElement(qe.$,{autoHide:!0,scrollTop:Pt},A.createElement("div",{className:gt.container,ref:Dt},me&&!rt&&yn(),A.createElement(fd.w,{logRows:zt,deduplicatedRows:an,dedupStrategy:Ke,showLabels:G,showTime:J,wrapLogMessage:se,prettifyLogMessage:be,timeZone:N,getFieldLinks:ln,logsSortOrder:Ae,enableLogDetails:Ye,previewLimit:rt?zt.length:void 0,onLogRowHover:en,app:re.zj.Dashboard}),me&&rt&&yn()))},gd=p=>({container:(0,O.css)({marginBottom:p.spacing(1.5)}),labelContainer:(0,O.css)({margin:p.spacing(0,0,.5,.5),display:"flex",alignItems:"center"}),labelContainerAscending:(0,O.css)({margin:p.spacing(.5,0,.5,0)}),label:(0,O.css)({marginRight:p.spacing(.5),fontSize:p.typography.bodySmall.fontSize,fontWeight:p.typography.fontWeightMedium})});class Ku{getSuggestionsForData(N){const F=N.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:G}=N;!G.hasData||!G.hasTimeField||!G.hasStringField||(G.preferredVisualisationType==="logs"?F.append({name:ns.y.Logs,score:Gn._.Best}):F.append({name:ns.y.Logs}))}}const ai=new ne.c(Fu).setPanelOptions(p=>{p.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:xt.Y4.none,label:"None",description:Zr.Uv[xt.Y4.none]},{value:xt.Y4.exact,label:"Exact",description:Zr.Uv[xt.Y4.exact]},{value:xt.Y4.numbers,label:"Numbers",description:Zr.Uv[xt.Y4.numbers]},{value:xt.Y4.signature,label:"Signature",description:Zr.Uv[xt.Y4.signature]}]},defaultValue:xt.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:xt.UV.Descending,label:"Newest first"},{value:xt.UV.Ascending,label:"Oldest first"}]},defaultValue:xt.UV.Descending})}).setSuggestionsSupplier(new Ku);var pd=e(54945),Oi=e(42349),$u=e(5008);function Ii(p){const{width:N,options:{feedUrl:F=Oi.k,showImage:G}}=p,{state:J,getNews:se}=(0,$u.j)(F);return(0,A.useEffect)(()=>{const me=p.eventBus.subscribe(ba.U5,se);return()=>{me.unsubscribe()}},[se,p.eventBus]),(0,A.useEffect)(()=>{se()},[se]),J.error?A.createElement(ga.b,{title:"Error loading RSS feed"},"Make sure that the feed URL is correct and that CORS is configured correctly on the server. See"," ",A.createElement("a",{style:{textDecoration:"underline"},href:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/news/"},"News panel documentation. ",A.createElement(jt.J,{name:"external-link-alt"}))):J.loading?A.createElement("div",null,"Loading..."):J.value?A.createElement(qe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},J.value.map((me,be)=>A.createElement(pd.S,{key:be,index:be,width:N,showImage:G,data:J.value}))):null}const Il={showImage:!0},Jr=new ne.c(Ii).setPanelOptions(p=>{p.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:Oi.k},defaultValue:Il.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:Il.showImage})});var Ir=e(82152),Vu=e(47760),zu=e(11995);const _u=({width:p,height:N,data:F,options:G})=>{const J=(0,Go.u8)(F.timeRange);if(!F||!F.series.length)return A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"No data found in response"));const se=(0,Ir.Z)(zu.Ee);return A.createElement("div",{style:{width:p,height:N}},A.createElement(Vu.E,{dataFrames:se(F.series,G),getLinks:J}))};var Ri=e(56025),Rl=e(86912);const hd=({value:p,onChange:N,context:F})=>{const G=(0,ct.wW)(ku),J=()=>{const be={field:"",color:""};N(p?[...p,be]:[be])},se=be=>{const Ae=p?.slice();Ae.splice(be,1),N(Ae)},me=(be,Ae,Ke)=>{let Ye=p?.slice()??[];Ye[be][Ae]=Ke,N(Ye)};return A.createElement(A.Fragment,null,p?.map((be,Ae)=>A.createElement("div",{className:G.section,key:Ae},A.createElement(Rl.b,{context:F,value:be.field??"",onChange:Ke=>{me(Ae,"field",Ke)},item:{settings:{filter:Ke=>Ke.name.includes("arc__")},id:`arc-field-${Ae}`,name:`arc-field-${Ae}`,editor:()=>null}}),A.createElement(Ri.zH,{color:be.color||"#808080",onChange:Ke=>{me(Ae,"color",Ke)}}),A.createElement(ge.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>se(Ae),title:"Remove arc"}))),A.createElement(ge.zx,{size:"sm",icon:"plus",onClick:J,variant:"secondary"},"Add arc"))},ku=()=>({section:(0,O.css)`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),So=new ne.c(_u).setPanelOptions((p,N)=>{p.addNestedOptions({category:["Nodes"],path:"nodes",build:F=>{F.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),F.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),F.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:hd})}}),p.addNestedOptions({category:["Edges"],path:"edges",build:F=>{F.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),F.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var vd=e(91466),si=e(43765),Wo=e(58061),Hu=e(68748),Gu=e(10994),Al=e(66763),ju=e(3344),Ed=e(67692),Ll=e(71685),Qu=e(50741),Bl=e(73014);let Yu=0;const Nl=()=>Yu++;function Ai(p){const N=(0,A.useRef)(null);return N.current===null&&(N.current=p+Nl()),N.current.toString()}var Nr=(p=>(p.Donut="donut",p.Pie="pie",p))(Nr||{}),Pr=(p=>(p.Name="name",p.Percent="percent",p.Value="value",p))(Pr||{}),lo=(p=>(p.Percent="percent",p.Value="value",p))(lo||{});const Km={values:[]},$m={displayLabels:[]};function Ul(p){return!p.field.custom?.hideFrom?.viz&&!isNaN(p.display.numeric)}function wl(p,N){return N.display.numeric+p}const Zu=({fieldDisplayValues:p,pieType:N,width:F,height:G,highlightedTitle:J,displayLabels:se=[],tooltipOptions:me})=>{const be=(0,ct.l4)(),Ae=Ai("PieChart"),Ke=(0,ct.wW)(Kl),Ye=(0,ju.Z)(),{containerRef:Ze,TooltipInPortal:ot}=(0,Ed.Z)({detectBounds:!0,scroll:!0}),rt=p.filter(Ul),gt=Jt=>Jt.display.numeric,Pt=Jt=>`${Ae}-${(0,Ll.Z)(Jt).toHex()}`,vt=Jt=>`url(#${Pt(Jt)})`,Dt=se.length>0,Vt=me.mode!=="none"&&Ye.tooltipOpen,en=rt.reduce(wl,0),zt=Ju(F,G,N),an=[...new Set(rt.map(Jt=>Jt.display.color??Dn.R))];return A.createElement("div",{className:Ke.container},A.createElement("svg",{width:zt.size,height:zt.size,ref:Ze,style:{overflow:"visible"}},A.createElement(Gu.Z,{top:zt.position,left:zt.position},an.map(Jt=>A.createElement(Hu.Z,{key:Jt,id:Pt(Jt),from:Bi(Jt,be),to:Fl(Jt,be),fromOffset:zt.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:zt.outerRadius})),A.createElement(Al.Z,{data:rt,pieValue:gt,outerRadius:zt.outerRadius,innerRadius:zt.innerRadius,cornerRadius:3,padAngle:.005},Jt=>A.createElement(A.Fragment,null,Jt.arcs.map(ln=>{const yn=ln.data.display.color??Dn.R,En=bd(J,ln);return ln.data.hasLinks&&ln.data.getLinks?A.createElement(Qu.V,{key:ln.index,links:ln.data.getLinks},In=>A.createElement(yd,{tooltip:Ye,highlightState:En,arc:ln,pie:Jt,fill:vt(yn),openMenu:In.openMenu,tooltipOptions:me})):A.createElement(yd,{key:ln.index,highlightState:En,tooltip:Ye,arc:ln,pie:Jt,fill:vt(yn),tooltipOptions:me})}),Dt&&Jt.arcs.map(ln=>{const yn=bd(J,ln);return A.createElement(Wl,{arc:ln,key:ln.index,highlightState:yn,outerRadius:zt.outerRadius,innerRadius:zt.innerRadius,displayLabels:se,total:en,color:be.colors.text.primary})}))))),Vt?A.createElement(ot,{key:Math.random(),top:Ye.tooltipTop,className:Ke.tooltipPortal,left:Ye.tooltipLeft,unstyled:!0,applyPositionStyle:!0},A.createElement(Bl.c,{series:Ye.tooltipData})):null)};function yd({arc:p,pie:N,highlightState:F,openMenu:G,fill:J,tooltip:se,tooltipOptions:me}){const be=(0,ct.l4)(),Ae=(0,ct.wW)(Kl),{eventBus:Ke}=(0,Ps.R9)(),Ye=(0,A.useCallback)(rt=>{Ke?.publish({type:ds.xH.type,payload:{raw:rt,x:0,y:0,dataId:p.data.display.title}}),se.hideTooltip()},[Ke,p,se]),Ze=(0,A.useCallback)(rt=>{Ke?.publish({type:ds.es.type,payload:{raw:rt,x:0,y:0,dataId:p.data.display.title}});const gt=rt.currentTarget.ownerSVGElement;if(gt){const Pt=(0,Wo.Z)(gt,rt);se.showTooltip({tooltipLeft:Pt.x,tooltipTop:Pt.y,tooltipData:Li(N,p,me)})}},[Ke,p,se,N,me]),ot=Ni(F,Ae);return A.createElement("g",{key:p.data.display.title,className:ot,onMouseMove:me.mode!=="none"?Ze:void 0,onMouseOut:Ye,onClick:G,"aria-label":nt.wl.components.Panels.Visualization.PieChart.svgSlice},A.createElement("path",{d:N.path({...p}),fill:J,stroke:be.colors.background.primary,strokeWidth:1}))}function Wl({arc:p,outerRadius:N,innerRadius:F,displayLabels:G,total:J,color:se,highlightState:me}){const be=(0,ct.wW)(Kl),Ae=F===0?N/6:F,[Ke,Ye]=Fo(p,N,Ae);if(!(p.endAngle-p.startAngle>=.3))return null;let ot=G.includes(Pr.Name)?Math.min(Math.max(N/150*14,12),30):Math.min(Math.max(N/100*14,12),36);return A.createElement("g",{className:Ni(me,be)},A.createElement("text",{fill:se,x:Ke,y:Ye,dy:".33em",fontSize:ot,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},G.includes(Pr.Name)&&A.createElement("tspan",{x:Ke,dy:"1.2em"},p.data.display.title),G.includes(Pr.Value)&&A.createElement("tspan",{x:Ke,dy:"1.2em"},(0,qn.zc)(p.data.display)),G.includes(Pr.Percent)&&A.createElement("tspan",{x:Ke,dy:"1.2em"},(p.data.display.numeric/J*100).toFixed(p.data.field.decimals??0)+"%")))}function Li(p,N,F){return F.mode==="multi"?p.arcs.filter(G=>{const J=G.data.field;return J&&!J.custom?.hideFrom?.tooltip&&!J.custom?.hideFrom?.viz}).map(G=>({color:G.data.display.color??Dn.R,label:G.data.display.title,value:(0,qn.zc)(G.data.display),isActive:G.index===N.index})):[{color:N.data.display.color??Dn.R,label:N.data.display.title,value:(0,qn.zc)(N.data.display)}]}function Fo(p,N,F){const G=(N+F)/2,J=(+p.startAngle+ +p.endAngle)/2-Math.PI/2;return[Math.cos(J)*G,Math.sin(J)*G]}function Bi(p,N){return(0,Ll.Z)(p).darken(20*(N.isDark?1:-.7)).spin(4).toRgbString()}function Fl(p,N){return(0,Ll.Z)(p).darken(10*(N.isDark?1:-.7)).spin(-4).toRgbString()}function Ju(p,N,F,G=16){const J=Math.min(N,p),se=(J-G*2)/2,me=F===Nr.Pie?se:Math.max(se/3,20),be=se-me,Ae=(J-G*2)/2,Ke=1-(se-be)/se;return{position:Ae+G,size:J,outerRadius:se,innerRadius:be,gradientFromOffset:Ke}}var Xu=(p=>(p[p.Highlighted=0]="Highlighted",p[p.Deemphasized=1]="Deemphasized",p[p.Normal=2]="Normal",p))(Xu||{});function bd(p,N){return p?p===N.data.display.title?0:1:2}function Ni(p,N){switch(p){case 0:return N.svgArg.highlighted;case 1:return N.svgArg.deemphasized;case 2:default:return N.svgArg.normal}}const Kl=p=>({container:(0,O.css)`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:(0,O.css)`
        transition: all 200ms ease-in-out;
      `,highlighted:(0,O.css)`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:(0,O.css)`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:(0,O.css)`
      ${(0,yi.getTooltipContainerStyles)(p)}
    `}),qu={displayMode:xt.jK.List,showLegend:!0,placement:"right",calcs:[],values:[lo.Percent]};function Pd(p){const{data:N,timeZone:F,fieldConfig:G,replaceVariables:J,width:se,height:me,options:be,id:Ae}=p,Ke=(0,ct.l4)(),Ye=tm(),Ze=(0,vd.nG)({fieldConfig:G,reduceOptions:be.reduceOptions,data:N.series,theme:Ke,replaceVariables:J,timeZone:F});return Cd(Ze)?A.createElement(Es.AY,{width:se,height:me,legend:em(p,Ze)},(ot,rt)=>A.createElement(Zu,{width:ot,height:rt,highlightedTitle:Ye,fieldDisplayValues:Ze,tooltipOptions:be.tooltip,pieType:be.pieType,displayLabels:be.displayLabels})):A.createElement(Za.Z,{panelId:Ae,fieldConfig:G,data:N})}function em(p,N){const F=p.options.legend??qu;if(F.showLegend===!1)return;const G=N.filter(Ul).reduce(wl,0),J=N.sort((se,me)=>isNaN(se.display.numeric)?1:isNaN(me.display.numeric)?-1:me.display.numeric-se.display.numeric).map((se,me)=>{const be=se.field.custom?.hideFrom??{};if(be.legend)return;const Ae=!!be.viz,Ke=se.display;return{label:Ke.title??"",color:Ke.color??Dn.R,yAxis:1,disabled:Ae,getItemKey:()=>(Ke.title??"")+me,getDisplayValues:()=>{const Ye=F.values??[];let Ze=[];if(Ye.includes(lo.Value)&&Ze.push({numeric:Ke.numeric,text:(0,qn.zc)(Ke),title:"Value"}),Ye.includes(lo.Percent)){const ot=Ae?0:Ke.numeric/G,rt=ot*100;Ze.push({numeric:ot,percent:rt,text:Ae||isNaN(ot)?p.fieldConfig.defaults.noValue??"-":rt.toFixed(se.field.decimals??0)+"%",title:Ye.length>1?"Percent":""})}return Ze}}}).filter(se=>!!se);return A.createElement(Es.AY.Legend,{placement:F.placement,width:F.width},A.createElement(er.l,{items:J,seriesVisibilityChangeBehavior:si.Y.Hide,placement:F.placement,displayMode:F.displayMode}))}function Cd(p){return p.some(N=>N.view?.dataFrame.length)}function tm(){const[p,N]=(0,A.useState)(),{eventBus:F}=(0,Ps.R9)();return(0,A.useEffect)(()=>{const G=me=>{N(me.payload.dataId)},J=me=>{N(void 0)},se=new Ya.w0;return se.add(F.getStream(ds.es).subscribe({next:G})),se.add(F.getStream(ds.xH).subscribe({next:J})),()=>{se.unsubscribe()}},[N,F]),p}const Dd=(p,N,F)=>{if(N==="grafana-piechart-panel"&&F.angular){const G=F.angular,J=[];let se=p.options;if(G.aliasColors)for(const me of Object.keys(G.aliasColors)){const be=G.aliasColors[me];be&&J.push({matcher:{id:br.mi.byName,options:me},properties:[{id:Xt.qb.Color,value:{mode:Dn.S.Fixed,fixedColor:be}}]})}if(p.fieldConfig={overrides:J,defaults:{unit:G.format,decimals:G.decimals?G.decimals:0}},se.legend={placement:"right",values:[],displayMode:xt.jK.Table,showLegend:!0,calcs:[]},G.valueName)switch(se.reduceOptions={calcs:[]},G.valueName){case"current":se.reduceOptions.calcs=["lastNotNull"];break;case"min":se.reduceOptions.calcs=["min"];break;case"max":se.reduceOptions.calcs=["max"];break;case"avg":se.reduceOptions.calcs=["mean"];break;case"total":se.reduceOptions.calcs=["sum"];break}switch(G.legendType){case"Under graph":se.legend.placement="bottom";break;case"Right side":se.legend.placement="right";break}switch(G.pieType){case"pie":se.pieType=Nr.Pie;break;case"donut":se.pieType=Nr.Donut;break}return G.legend&&(G.legend.show||(se.legend.showLegend=!1),G.legend.values&&se.legend.values.push(lo.Value),G.legend.percentage&&se.legend.values.push(lo.Percent)),G.legendType==="On graph"&&(se.legend.showLegend=!1,se.displayLabels=[Pr.Name],G.legend.values&&se.displayLabels.push(Pr.Value),G.legend.percentage&&se.displayLabels.push(Pr.Percent)),se}return{}};class nm{getSuggestionsForData(N){const F=N.getListAppender({name:ns.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[Pr.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:J=>{J.options.legend.showLegend=!1}}}),{dataSummary:G}=N;if(G.hasNumberField){if(G.hasStringField&&G.frameCount===1){if(G.rowCountTotal>30||G.rowCountTotal<2)return;F.append({name:ns.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),F.append({name:ns.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:Nr.Donut}});return}G.numberFieldCount>30||G.numberFieldCount<2||(F.append({name:ns.y.PieChart}),F.append({name:ns.y.PieChartDonut,options:{pieType:Nr.Donut}}))}}}const am=new ne.c(Pd).setPanelChangeHandler(Dd).useFieldConfig({disableStandardOptions:[Xt.qb.Thresholds],standardOptions:{[Xt.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Dn.S.PaletteClassic}}},useCustomConfig:p=>{us.B(p)}}).setPanelOptions(p=>{(0,Ho.j)(p),p.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:Nr.Pie,label:"Pie"},{value:Nr.Donut,label:"Donut"}]},defaultValue:Nr.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:Pr.Percent,label:"Percent"},{value:Pr.Name,label:"Name"},{value:Pr.Value,label:"Value"}]}}),Ts.L(p),vs.J(p,!1),p.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:lo.Percent,label:"Percent"},{value:lo.Value,label:"Value"}]},showIf:N=>N.legend.showLegend!==!1})}).setSuggestionsSupplier(new nm);var $l=e(24830),Vl=e(49183),Sd=e(95668),xd=e(43801);const Md=({data:p,alignedData:N,seriesIdx:F,datapointIdx:G,timeZone:J,onAnnotationAdd:se})=>{const me=(0,ct.l4)();if(!p||G==null)return null;const be=N.fields[F],Ae=[],Ke=new Set;if(be.getLinks){const Jt=be.values[G],ln=be.display?be.display(Jt):{text:`${Jt}`,numeric:+Jt};be.getLinks({calculatedValue:ln,valueRowIndex:G}).forEach(yn=>{const En=`${yn.title}/${yn.href}`;Ke.has(En)||(Ae.push(yn),Ke.add(En))})}const Ye=N.fields[0],Ze=Ye.display||(0,pa.U)({field:Ye,timeZone:J,theme:me}),ot=be.state?.origin,rt=be.display||(0,pa.U)({field:be,timeZone:J,theme:me}),gt=be.values[G],Pt=rt(gt),vt=ot?(0,Bn.CZ)(p[ot.frameIndex].fields[ot.fieldIndex],p[ot.frameIndex],p):null,Dt=(0,bn.iK)(be,G);let Vt;Dt&&(Vt=Ye.values[Dt]);const en=Ye.values[G];let zt=null,an=null;if(Vt){const Jt=Vt&&(0,bn.Y)(Vt-en);an=A.createElement(A.Fragment,null,A.createElement("br",null),A.createElement("strong",null,"Duration:")," ",Jt),zt=A.createElement(A.Fragment,null," to"," ",A.createElement("strong",null,Ze(Ye.values[Dt]).text))}return A.createElement("div",null,A.createElement("div",{style:{fontSize:me.typography.bodySmall.fontSize}},vt,A.createElement("br",null),A.createElement(Bl.V,{label:Pt.text,color:Pt.color||Dn.R,isActive:!0}),"From ",A.createElement("strong",null,Ze(Ye.values[G]).text),zt,an),A.createElement("div",{style:{margin:me.spacing(1,-1,-1,-1),borderTop:`1px solid ${me.colors.border.weak}`}},se&&A.createElement(rr.s,{label:"Add annotation",icon:"comment-alt",onClick:se}),Ae.length>0&&Ae.map((Jt,ln)=>A.createElement(rr.s,{key:ln,icon:"external-link-alt",target:Jt.target,label:Jt.title,url:Jt.href,onClick:Jt.onClick}))))};Md.displayName="StateTimelineTooltip";const ri=10,sm=({data:p,timeRange:N,timeZone:F,options:G,width:J,height:se,replaceVariables:me,onChangeTimeRange:be})=>{const Ae=(0,ct.l4)(),Ke=(0,A.useRef)(void 0),Ye=(0,A.useRef)(!1),[Ze,ot]=(0,A.useState)(void 0),[rt,gt]=(0,A.useState)(null),[Pt,vt]=(0,A.useState)(null),[Dt,Vt]=(0,A.useState)(null),[en,zt]=(0,A.useState)(!1),[an,Jt]=(0,A.useState)(!1),{sync:ln,canAddAnnotations:yn}=(0,Ps.R9)(),En=()=>{Ye.current=!1,gt(null),Jt(!1)},In=()=>{Ye.current=!Ye.current,Jt(Ye.current)},{frames:Wn,warn:On}=(0,A.useMemo)(()=>(0,bn.AR)(p.series,G.mergeValues??!0,N,Ae),[p.series,G.mergeValues,N,Ae]),Xn=(0,A.useMemo)(()=>(0,bn.SA)(Wn,G.legend,Ae),[Wn,G.legend,Ae]),jn=(0,A.useMemo)(()=>Oc(G.timezone,F),[G.timezone,F]),Ln=(0,A.useCallback)((ia,$a,Va,ya)=>{const _a=Wn??[],fa=_a.reduce((ea,ha)=>ea+ha.fields.filter(Ra=>Ra.type!==Tn.fS.time).length,0);return $a===null||Va===null||!ia.meta?.transformations?.length&&ia.fields.length-1!==fa||!ia.fields[$a]?null:A.createElement(A.Fragment,null,an&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(fn.P,{onClick:En,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(Md,{data:_a,alignedData:ia,seriesIdx:$a,datapointIdx:Va,timeZone:F,onAnnotationAdd:ya}))},[F,Wn,an]);if(!Wn||On)return A.createElement("div",{className:"panel-empty"},A.createElement("p",null,On??"No data found in response"));if(Wn.length===1){const ia=(0,Bu.MB)(Wn[0])}const na=!!(yn&&yn());return A.createElement(xd.K,{theme:Ae,frames:Wn,structureRev:p.structureRev,timeRange:N,timeZone:jn,width:J,height:se,legendItems:Xn,...G,mode:bn.KN.Changes},(ia,$a)=>(Ke.current!==ia&&(Ke.current=Ht({config:ia,onUPlotClick:In,setFocusedSeriesIdx:vt,setFocusedPointIdx:Vt,setCoords:gt,setHover:ot,isToolTipOpen:Ye,isActive:en,setIsActive:zt,sync:ln})),A.createElement(A.Fragment,null,A.createElement(bo.R,{config:ia,onZoom:be}),A.createElement(kr,{config:ia,onChangeTimeRange:be}),p.annotations&&A.createElement(is,{annotations:p.annotations,config:ia,timeZone:F}),na?A.createElement(mr,{data:$a,timeZone:F,config:ia},({startAnnotating:Va})=>G.tooltip.mode===xt.f3.None||Dt===null||!en&&ln&&ln()===je.m.Crosshair?null:A.createElement(vr.h_,null,Ze&&rt&&Pt&&A.createElement($r.S,{position:{x:rt.viewport.x,y:rt.viewport.y},offset:{x:ri,y:ri},allowPointerEvents:Ye.current},Ln($a,Pt,Dt,()=>{Va({coords:{plotCanvas:rt.canvas,viewport:rt.viewport}}),En()})))):A.createElement(vr.h_,null,G.tooltip.mode!==xt.f3.None&&Ze&&rt&&A.createElement($r.S,{position:{x:rt.viewport.x,y:rt.viewport.y},offset:{x:ri,y:ri},allowPointerEvents:Ye.current},Ln($a,Pt,Dt))))))};var Td=e(51046);const rm=(p,N,F)=>{let G=p.options??{};if(N==="natel-discrete-panel"&&F.angular){const J=F.angular,se=p.fieldConfig??{defaults:{},overrides:[]};J.units&&(se.defaults.unit=J.units);const me={fillOpacity:100,lineWidth:0};se.defaults.custom=me,G.mergeValues=!0;const be={type:Td.H.ValueToText,options:{}};if(se.defaults.mappings=[be],(0,w.isArray)(J.colorMaps))for(const Ae of J.colorMaps){const Ke=Ae.color;Ke&&(be.options[Ae.text]={color:Ke})}if((0,w.isArray)(J.valueMaps))for(const Ae of J.valueMaps){const Ke=Ae.text,Ye=Ae.value;if(Ke&&Ye){let Ze=be.options[Ye];Ze?Ze.text=Ke:be.options[Ye]={text:Ke}}}if((0,w.isArray)(J.rangeMaps))for(const Ae of J.rangeMaps){let Ke=+Ae.from,Ye=+Ae.to;const Ze=Ae.text;Ze&&se.defaults.mappings.push({type:Td.H.RangeToText,options:{from:Ke,to:Ye,result:{text:Ze}}})}p.fieldConfig=se}return G},Ko={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:xt.Jp.Auto},Od={fillOpacity:70,lineWidth:0};class Id{getSuggestionsForData(N){const{dataSummary:F}=N;if(!F.hasData||!F.hasTimeField||!F.hasStringField&&!F.hasNumberField||F.numberFieldCount>=30||F.preferredVisualisationType==="logs")return;N.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:ns.y.StateTimeline})}}const zl=new ne.c(sm).setPanelChangeHandler(rm).useFieldConfig({standardOptions:{[Xt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Dn.S.ContinuousGrYlRd}}},useCustomConfig:p=>{p.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Od.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Od.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:Sd.c,override:Sd.c,shouldApply:N=>N.type!==Tn.fS.time,process:wn.kG,settings:{isTime:!0}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",defaultValue:!1,editor:Vl.M,override:Vl.M,shouldApply:N=>N.type!==Tn.fS.time,process:wn.kG,settings:{isTime:!0}}),us.B(p)}}).setPanelOptions(p=>{p.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:Ko.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xt.Jp.Auto,label:"Auto"},{value:xt.Jp.Always,label:"Always"},{value:xt.Jp.Never,label:"Never"}]},defaultValue:Ko.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:Ko.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:Ko.rowHeight}),vs.J(p,!1),Ts.L(p,!0)}).setSuggestionsSupplier(new Id).setDataSupport({annotations:!0}),Rd=({data:p,alignedData:N,seriesIdx:F,datapointIdx:G,timeZone:J})=>{const se=(0,ct.l4)();if(!p||G==null)return null;const me=N.fields[F],be=[],Ae=new Set;if(me.getLinks){const vt=me.values[G],Dt=me.display?me.display(vt):{text:`${vt}`,numeric:+vt};me.getLinks({calculatedValue:Dt,valueRowIndex:G}).forEach(Vt=>{const en=`${Vt.title}/${Vt.href}`;Ae.has(en)||(be.push(Vt),Ae.add(en))})}const Ke=N.fields[0],Ye=Ke.display||(0,pa.U)({field:Ke,timeZone:J,theme:se}),Ze=me.state?.origin,ot=me.display||(0,pa.U)({field:me,timeZone:J,theme:se}),rt=me.values[G],gt=ot(rt),Pt=Ze?(0,Bn.CZ)(p[Ze.frameIndex].fields[Ze.fieldIndex],p[Ze.frameIndex],p):null;return A.createElement("div",null,A.createElement("div",{style:{fontSize:se.typography.bodySmall.fontSize}},A.createElement("strong",null,Ye(Ke.values[G]).text),A.createElement("br",null),A.createElement(Bl.V,{label:gt.text,color:gt.color||Dn.R,isActive:!0}),Pt),be.length>0&&A.createElement("div",{style:{margin:se.spacing(1,-1,-1,-1),borderTop:`1px solid ${se.colors.border.weak}`}},be.map((vt,Dt)=>A.createElement(rr.s,{key:Dt,icon:"external-link-alt",target:vt.target,label:vt.title,url:vt.href,onClick:vt.onClick}))))};Rd.displayName="StatusHistoryTooltip";const Ui=10,_l=({data:p,timeRange:N,timeZone:F,options:G,width:J,height:se,onChangeTimeRange:me})=>{const be=(0,ct.l4)(),Ae=(0,A.useRef)(void 0),Ke=(0,A.useRef)(!1),[Ye,Ze]=(0,A.useState)(void 0),[ot,rt]=(0,A.useState)(null),[gt,Pt]=(0,A.useState)(null),[vt,Dt]=(0,A.useState)(null),[Vt,en]=(0,A.useState)(!1),[zt,an]=(0,A.useState)(!1),{sync:Jt}=(0,Ps.R9)(),ln=()=>{Ke.current=!1,rt(null),an(!1)},yn=()=>{Ke.current=!Ke.current,an(Ke.current)},{frames:En,warn:In}=(0,A.useMemo)(()=>(0,bn.AR)(p.series,!1,N,be),[p.series,N,be]),Wn=(0,A.useMemo)(()=>(0,bn.SA)(En,G.legend,be),[En,G.legend,be]),On=(0,A.useCallback)((Ln,na,ia)=>{const $a=En??[],Va=$a.reduce((ya,_a)=>ya+_a.fields.filter(fa=>fa.type!==Tn.fS.time).length,0);return na===null||ia===null||!Ln.meta?.transformations?.length&&Ln.fields.length-1!==Va||!Ln.fields[na]?null:A.createElement(A.Fragment,null,zt&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(fn.P,{onClick:ln,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(Rd,{data:$a,alignedData:Ln,seriesIdx:na,datapointIdx:ia,timeZone:F}))},[F,En,zt]),Xn=Ln=>G.tooltip.mode===xt.f3.None||vt===null||!Vt&&Jt&&Jt()===je.m.Crosshair?null:A.createElement(vr.h_,null,Ye&&ot&&gt&&A.createElement($r.S,{position:{x:ot.viewport.x,y:ot.viewport.y},offset:{x:Ui,y:Ui},allowPointerEvents:Ke.current},On(Ln,gt,vt))),jn=(0,A.useMemo)(()=>Oc(G.timezone,F),[G.timezone,F]);return!En||In?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,In??"No data found in response")):En[0].length>J/2?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"Too many points to visualize properly. ",A.createElement("br",null),"Update the query to return fewer points. ",A.createElement("br",null),"(",En[0].length," points received)")):A.createElement(xd.K,{theme:be,frames:En,structureRev:p.structureRev,timeRange:N,timeZone:jn,width:J,height:se,legendItems:Wn,...G,mode:bn.KN.Samples},(Ln,na)=>(Ae.current!==Ln&&(Ae.current=Ht({config:Ln,onUPlotClick:yn,setFocusedSeriesIdx:Pt,setFocusedPointIdx:Dt,setCoords:rt,setHover:Ze,isToolTipOpen:Ke,isActive:Vt,setIsActive:en})),A.createElement(A.Fragment,null,A.createElement(bo.R,{config:Ln,onZoom:me}),Xn(na),A.createElement(kr,{config:Ln,onChangeTimeRange:me}))))},oi={colWidth:.9,rowHeight:.9,showValue:xt.Jp.Auto},kl={fillOpacity:70,lineWidth:1};class Ad{getSuggestionsForData(N){const{dataSummary:F}=N;if(!F.hasData||!F.hasTimeField||!F.hasStringField&&!F.hasNumberField||F.numberFieldCount>=30||F.rowCountMax>100||F.preferredVisualisationType==="logs")return;N.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:Dn.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:J=>{J.options.colWidth=.7}}}).append({name:ns.y.StatusHistory})}}const om=new ne.c(_l).useFieldConfig({standardOptions:{[Xt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Dn.S.Thresholds}}},useCustomConfig:p=>{p.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:kl.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:kl.fillOpacity,settings:{min:0,max:100,step:1}}),us.B(p)}}).setPanelOptions(p=>{p.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xt.Jp.Auto,label:"Auto"},{value:xt.Jp.Always,label:"Always"},{value:xt.Jp.Never,label:"Never"}]},defaultValue:xt.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),vs.J(p,!1),Ts.L(p,!0)}).setSuggestionsSupplier(new Ad);var im=e(41199);const $o={align:"auto",inspect:!1,cellOptions:{type:xt.h2.Auto}};var Hl=e(42074);function Gl({onChange:p,value:N,context:F}){const G=J=>{J?.currentTarget.checked&&(F.options.footer.show=!1),p(J?.currentTarget.checked)};return A.createElement(Hl.r,{value:!!N,onChange:G})}function Cr({cellOptions:p,onChange:N}){const F=J=>{p.mode=J,N(p)},G=J=>{p.valueDisplayMode=J,N(p)};return A.createElement(Mn.K,{direction:"column",gap:0},A.createElement(fs.g,{label:"Gauge display mode"},A.createElement(pi.S,{value:p?.mode??xt.QH.Gradient,onChange:F,options:lm})),A.createElement(fs.g,{label:"Value display"},A.createElement(pi.S,{value:p?.valueDisplayMode??xt.M8.Text,onChange:G,options:wi})))}const lm=[{value:xt.QH.Basic,label:"Basic"},{value:xt.QH.Gradient,label:"Gradient"},{value:xt.QH.Lcd,label:"Retro LCD"}],wi=[{value:xt.M8.Color,label:"Value color"},{value:xt.M8.Text,label:"Text color"},{value:xt.M8.Hidden,label:"Hidden"}],Wi=[{value:xt.v7.Basic,label:"Basic"},{value:xt.v7.Gradient,label:"Gradient"}],cm=({cellOptions:p,onChange:N})=>{const F=G=>{p.mode=G,N(p)};return A.createElement(fs.g,{label:"Background display mode"},A.createElement(pi.S,{value:p?.mode??xt.v7.Gradient,onChange:F,options:Wi}))};var Ld=e(26946),jl=e(42100);const dm=["drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"],Xr=p=>{const{cellOptions:N,onChange:F}=p,G=(0,A.useMemo)(()=>{const me=(0,_r.F)(jl.U);return(0,Ld.j)(me,"ChartCell")},[]),J=(0,ct.wW)(ii),se={...jl.U,...N};return A.createElement(ar.wc,null,G.list(dm.map(me=>`custom.${me}`)).map(me=>{if(me.showIf&&!me.showIf(se))return null;const be=me.editor,Ae=me.path;return A.createElement(fs.g,{label:me.name,key:me.id,className:J.field},A.createElement(be,{onChange:Ke=>F({...N,[Ae]:Ke}),value:(Fi(Ae,se)?se[Ae]:void 0)??me.defaultValue,item:me,context:{data:[]}}))}))};function Fi(p,N){return p in N}const ii=()=>({field:(0,O.css)`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),um=({value:p,onChange:N})=>{const F=p.type,G=(0,ct.wW)(Ud),J=Nd.find(Ke=>Ke.value.type===F);let[se,me]=(0,A.useState)({});const be=Ke=>{Ke.value!==void 0&&(p=Ke.value,se[p.type]!==void 0&&Object.keys(se[p.type]).length>1&&(p=(0,w.merge)(p,se[p.type])),N(p))},Ae=Ke=>{se[p.type]=(0,w.merge)(p,Ke),me(se),N(se[p.type])};return A.createElement("div",{className:G.fixBottomMargin},A.createElement(fs.g,null,A.createElement(Ve.Ph,{options:Nd,value:J,onChange:be})),F===xt.h2.Gauge&&A.createElement(Cr,{cellOptions:p,onChange:Ae}),F===xt.h2.ColorBackground&&A.createElement(cm,{cellOptions:p,onChange:Ae}),F===xt.h2.Sparkline&&A.createElement(Xr,{cellOptions:p,onChange:Ae}))},Bd={value:{type:xt.h2.Sparkline},label:"Sparkline"},Nd=[{value:{type:xt.h2.Auto},label:"Auto"},...We.config.featureToggles.timeSeriesTable?[Bd]:[],{value:{type:xt.h2.ColorText},label:"Colored text"},{value:{type:xt.h2.ColorBackground},label:"Colored background"},{value:{type:xt.h2.Gauge},label:"Gauge"},{value:{type:xt.h2.JSONView},label:"JSON View"},{value:{type:xt.h2.Image},label:"Image"}],Ud=p=>({fixBottomMargin:(0,O.css)({marginBottom:p.spacing(-2)})});var li=e(5168);const mm=p=>(!p.pluginVersion&&p.columns&&console.log("Was angular table",p),p.options),wd={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Wd={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},Fd={cell:"color-background",row:"color-background",value:"color-text"},Ql=(p,N)=>[-1/0,...p].map((F,G)=>({color:N[G],value:(0,w.isNumber)(F)?F:parseInt(F,10)})),Ki=(p,N)=>{const F=p.transformations??[];if(Object.keys(wd).includes(N.transform)){const G={reducers:[]};N.transform==="timeseries_aggregations"&&(G.includeTimeField=!1,G.reducers=N.columns.map(J=>Wd[J.value])),F.push({id:wd[N.transform],options:G})}return F},ci=p=>{const F={matcher:{id:/^\/.*\/$/.test(p.pattern)?br.mi.byRegexp:br.mi.byName,options:p.pattern},properties:[]};return p.alias&&F.properties.push({id:"displayName",value:p.alias}),p.unit&&F.properties.push({id:"unit",value:p.unit}),p.decimals&&F.properties.push({id:"decimals",value:p.decimals}),p.type==="date"&&F.properties.push({id:"unit",value:`time: ${p.dateFormat}`}),p.link&&F.properties.push({id:"links",value:[{title:(0,w.defaultTo)(p.linkTooltip,""),url:(0,w.defaultTo)(p.linkUrl,""),targetBlank:(0,w.defaultTo)(p.linkTargetBlank,!1)}]}),p.colorMode&&F.properties.push({id:"custom.cellOptions",value:{type:Fd[p.colorMode]}}),p.align&&F.properties.push({id:"custom.align",value:p.align==="auto"?null:p.align}),p.thresholds?.length&&F.properties.push({id:"thresholds",value:{mode:li.H.Absolute,steps:Ql(p.thresholds,p.colors)}}),F},$i=p=>{let N={custom:{}};if(p){if(N=(0,w.omitBy)({unit:p.unit,decimals:p.decimals,displayName:p.alias,custom:{align:p.align==="auto"?null:p.align}},w.isNil),p.thresholds.length){const F={mode:li.H.Absolute,steps:Ql(p.thresholds,p.colors)};N.thresholds=F}p.colorMode&&(N.custom.cellOptions={type:Fd[p.colorMode]})}return N},Kd=(p,N,F)=>{if(N==="table-old"&&F.angular){const G=F.angular,J=Ki(p,G),se=G.styles.find(Ae=>Ae.pattern==="/.*/"),me=$i(se),be=G.styles.filter(Ae=>Ae.pattern!=="/.*/").map(ci);p.transformations=J,p.fieldConfig={defaults:me,overrides:be}}return{}},di={cellHeight:xt.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class fm{getSuggestionsForData(N){const F=N.getListAppender({name:ns.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:G=>{G.fieldConfig.defaults.custom.minWidth=50}}});N.dataSummary.fieldCount===0?F.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):F.append({})}}const Vi="Table footer",qr=["Cell options"],gm=new ne.c(Ml).setPanelChangeHandler(Kd).setMigrationHandler(mm).useFieldConfig({useCustomConfig:p=>{p.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:$o.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:$o.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:$o.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:um,override:um,defaultValue:$o.cellOptions,process:wn.kG,category:qr,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:qr,showIf:N=>N.cellOptions.type===xt.h2.Auto||N.cellOptions.type===xt.h2.JSONView||N.cellOptions.type===xt.h2.ColorText||N.cellOptions.type===xt.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:$o.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(p=>{p.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:di.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:di.cellHeight,settings:{options:[{value:xt.Ss.Sm,label:"Small"},{value:xt.Ss.Md,label:"Medium"},{value:xt.Ss.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[Vi],name:"Show table footer",defaultValue:di.footer?.show}).addCustomEditor({id:"footer.reducer",category:[Vi],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:im.S.get("stats-picker").editor,defaultValue:[oa.gz.sum],showIf:N=>N.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[Vi],name:"Count rows",description:"Display a single count for all data rows",defaultValue:di.footer?.countRows,showIf:N=>N.footer?.reducer?.length===1&&N.footer?.reducer[0]===oa.gz.count}).addMultiSelect({path:"footer.fields",category:[Vi],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async N=>{const F=[];if(N&&N.data&&N.data.length>0){const G=N.data[0];for(const J of G.fields)if(J.type===Tn.fS.number){const se=(0,Bn.CZ)(J,G,N.data),me=J.name;F.push({value:me,label:se})}}return F}},defaultValue:"",showIf:N=>N.footer?.show&&!N.footer?.countRows||N.footer?.reducer?.length===1&&N.footer?.reducer[0]!==oa.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:Gl})}).setSuggestionsSupplier(new fm);var ee=e(63812),Y=e(29956),ae=e(18112),Ee=(p=>(p.Code="code",p.HTML="html",p.Markdown="markdown",p))(Ee||{}),ke=(p=>(p.Go="go",p.Html="html",p.Json="json",p.Markdown="markdown",p.Plaintext="plaintext",p.Sql="sql",p.Typescript="typescript",p.Xml="xml",p.Yaml="yaml",p))(ke||{});const et="plaintext",at={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},Et={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function Wt(p){const N=(0,ct.wW)(qt),[F,G]=(0,A.useState)({mode:p.options.mode,content:Ft(p.options,p.replaceVariables,_e.default.disableSanitizeHtml)});if((0,Y.Z)(()=>{const{options:J,replaceVariables:se}=p,me=Ft(J,se,_e.default.disableSanitizeHtml);(me!==F.content||J.mode!==F.mode)&&G({mode:J.mode,content:me})},100,[p]),F.mode===Ee.Code){const J=p.options.code??at;return A.createElement(xl.p,{key:`${J.showLineNumbers}/${J.showMiniMap}`,value:F.content,language:J.language??at.language,width:p.width,height:p.height,containerStyles:N.codeEditorContainer,showMiniMap:J.showMiniMap,showLineNumbers:J.showLineNumbers,readOnly:!0})}return A.createElement(qe.$,{autoHeightMin:"100%"},A.createElement(ee.Z,{html:F.content,className:N.markdown,"data-testid":"TextPanel-converted-content"}))}function Ft(p,N,F){let{mode:G,content:J}=p;if(!J)return"";switch(J=N(J,{},p.code?.language==="json"?"json":"html"),G){case Ee.Code:break;case Ee.HTML:F||(J=Xi.QX.sanitizeTextPanelContent(J));break;case Ee.Markdown:default:J=(0,ae.x)(J,{noSanitize:F})}return J}const qt=p=>({codeEditorContainer:(0,O.css)`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${p.colors.background.primary};
    }
  `,markdown:(0,O.cx)("markdown-html",(0,O.css)`
      height: 100%;
    `)});var dn=e(55925),Rn=e(16640);const zn=({value:p,onChange:N,context:F})=>{const G=(0,A.useMemo)(()=>F.options?.mode??Ee.Markdown,[F]),J=(0,ct.wW)(sa),se=()=>F.getSuggestions?F.getSuggestions().map(me=>(0,Rn.T)(me)):[];return A.createElement("div",{className:(0,O.cx)(J.editorBox)},A.createElement(dn.Z,{disableHeight:!0},({width:me})=>me===0?null:A.createElement(xl.p,{value:p,onBlur:N,onSave:N,language:G,width:me,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:se})))},sa=p=>({editorBox:(0,O.css)`
    label: editorBox;
    border: 1px solid ${p.colors.border.medium};
    border-radius: ${p.shape.borderRadius(1)};
    margin: ${p.spacing(.5)} 0;
    width: 100%;
  `}),xa=p=>{const N=parseFloat(p.pluginVersion||"6.1");let F=p.options;if(p.hasOwnProperty("content")&&p.hasOwnProperty("mode")){const J=p,se=J.content,me=J.mode;delete J.content,delete J.mode,N<7.1&&(F={content:se,mode:me})}return[Ee.Code,Ee.HTML,Ee.Markdown].find(J=>J===F.mode)||(F={...F,mode:Ee.Markdown}),F},Qa=new ne.c(Wt).setPanelOptions(p=>{p.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Ee.Markdown,label:"Markdown"},{value:Ee.HTML,label:"HTML"},{value:Ee.Code,label:"Code"}]},defaultValue:Et.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(ke).map(N=>({value:N,label:N}))},defaultValue:at.language,showIf:N=>N.mode===Ee.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:at.showLineNumbers,showIf:N=>N.mode===Ee.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:at.showMiniMap,showIf:N=>N.mode===Ee.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:zn,defaultValue:Et.content})}).setMigrationHandler(xa);var Zs=e(43987),Ss=e(28482),gs=e(14544);class Rr{getSuggestionsForData(N){const{dataSummary:F}=N;if(!F.hasTimeField||!F.hasNumberField||F.rowCountTotal<2)return;const G=N.getListAppender({name:ns.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:se=>{se.options.legend.showLegend=!1,se.fieldConfig?.defaults.custom?.drawStyle!==xt.l8.Bars&&(se.fieldConfig.defaults.custom.lineWidth=Math.max(se.fieldConfig.defaults.custom.lineWidth??1,2))}}}),J=100;if(G.append({name:ns.y.LineChart}),F.rowCountMax<200&&G.append({name:ns.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:xt.KC.Smooth}},overrides:[]}}),F.numberFieldCount===1){G.append({name:ns.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),G.append({name:ns.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Dn.S.ContinuousGrYlRd},custom:{gradientMode:xt.FI.Scheme,lineInterpolation:xt.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),F.rowCountMax<J&&(G.append({name:ns.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:xt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:xt.FI.Hue}},overrides:[]}}),G.append({name:ns.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Dn.S.ContinuousGrYlRd},custom:{drawStyle:xt.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:xt.FI.Scheme}},overrides:[]}}));return}G.append({name:ns.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:xt.o0.Normal,group:"A"}}},overrides:[]}}),G.append({name:ns.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:xt.o0.Percent,group:"A"}}},overrides:[]}}),F.rowCountTotal/F.numberFieldCount<J&&(G.append({name:ns.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:xt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:xt.FI.Hue,stacking:{mode:xt.o0.Normal,group:"A"}}},overrides:[]}}),G.append({name:ns.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:xt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:xt.FI.Hue,stacking:{mode:xt.o0.Percent,group:"A"}}},overrides:[]}}))}}function ui(p){const N=(0,St.h4)().getCurrent()?.getPanelById(p);if(N){const F=N.transformations?[...N.transformations]:[];return F.push({id:gs.W.prepareTimeSeries,options:{format:"wide"}}),{name:"Transform to wide time series format",pluginId:"timeseries",transformations:F}}}const Yl=({data:p,timeRange:N,timeZone:F,width:G,height:J,options:se,fieldConfig:me,onChangeTimeRange:be,replaceVariables:Ae,id:Ke})=>{const{sync:Ye,canAddAnnotations:Ze,onThresholdsChange:ot,canEditThresholds:rt,showThresholds:gt,onSplitOpen:Pt}=(0,Ps.R9)(),vt=(an,Jt)=>(0,Go.a_)({field:an,rowIndex:Jt,splitOpenFn:Pt,range:N}),Dt=(0,A.useMemo)(()=>Co(p.series,_e.config.theme2,N),[p.series,N]),Vt=(0,A.useMemo)(()=>Oc(se.timezone,F),[se.timezone,F]),en=(0,A.useMemo)(()=>{if(Dt?.length&&Dt.every(an=>an.meta?.type===Zs.P.TimeSeriesLong)){const an=ui(Ke);return{message:"Long data must be converted to wide",suggestions:an?[an]:void 0}}},[Dt,Ke]);if(!Dt||en)return A.createElement(Za.Z,{panelId:Ke,message:en?.message,fieldConfig:me,data:p,needsTimeField:!0,needsNumberField:!0,suggestions:en?.suggestions});const zt=!!(Ze&&Ze());return A.createElement(Ro.p,{frames:Dt,structureRev:p.structureRev,timeRange:N,timeZone:Vt,width:G,height:J,legend:se.legend,options:se},(an,Jt)=>(Jt.fields.some(ln=>!!ln.config.links?.length)&&(Jt=sl(Jt,Dt,Ae,F)),A.createElement(A.Fragment,null,A.createElement(Ss.C,{config:an}),A.createElement(bo.R,{config:an,onZoom:be}),se.tooltip.mode===xt.f3.None||A.createElement(Zt.i,{frames:Dt,data:Jt,config:an,mode:se.tooltip.mode,sortOrder:se.tooltip.sort,sync:Ye,timeZone:F}),p.annotations&&A.createElement(is,{annotations:p.annotations,config:an,timeZone:F}),zt?A.createElement(mr,{data:Jt,timeZone:F,config:an},({startAnnotating:ln})=>A.createElement(Lr,{data:Jt,config:an,timeZone:F,replaceVariables:Ae,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(yn,En)=>{En&&ln({coords:En.coords})}}]}]})):A.createElement(Lr,{data:Jt,frames:Dt,config:an,timeZone:F,replaceVariables:Ae,defaultItems:[]}),p.annotations&&A.createElement(bc,{visibleSeries:au(an,Dt),config:an,exemplars:p.annotations,timeZone:F,getFieldLinks:vt}),(rt&&ot||gt)&&A.createElement(al,{config:an,fieldConfig:me,onThresholdsChange:rt?ot:void 0}),A.createElement(kr,{config:an,onChangeTimeRange:be}))))};var pm=e(80369),Vm=e(15672);const Tf=({value:p,onChange:N})=>{const F=(0,ct.wW)(Of);(!p||p.length<1)&&(p=[""]);const G=()=>{N([...p,pm.RQ.default])},J=me=>{const be=p.slice();be.splice(me,1),N(be)},se=(me,be)=>{const Ae=p.slice();Ae[me]=be??pm.RQ.default,Ae.length===0||Ae.length===1&&Ae[0]===""?N(void 0):N(Ae)};return A.createElement("div",null,p.map((me,be)=>A.createElement("div",{className:F.wrapper,key:`${be}.${me}`},A.createElement("span",{className:F.first},A.createElement(Vm.O,{onChange:Ae=>se(be,Ae),includeInternal:!0,value:me??pm.RQ.default})),be===p.length-1?A.createElement(Po.h,{name:"plus",onClick:G,tooltip:"Add timezone"}):A.createElement(Po.h,{name:"times",onClick:()=>J(be),tooltip:"Remove timezone"}))))},Of=p=>({wrapper:(0,O.css)`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:(0,O.css)`
    margin-right: 8px;
    flex-grow: 2;
  `});var Zl=e(89050);let hm=null;const If=(p,N,F,G)=>{if(N==="graph"&&F.angular){const{fieldConfig:J,options:se,annotations:me}=zm({...F.angular,fieldConfig:G,panel:p}),be=(0,St.h4)().getCurrent();return be&&me?.length>0&&(be.annotations.list=[...be.annotations.list,...me],hm==null&&(hm=setTimeout(()=>{hm=null,(0,ll.$t)().refreshTimeModel()}))),p.fieldConfig=J,p.alert=F.angular.alert,se}return Af(p),{}};function zm(p){let N=[];const F=p.fieldConfig?.overrides??[],G=p.yaxes??[];let J=vm(G[0]);p.fieldConfig?.defaults&&(J={...p.fieldConfig?.defaults,...J});const se={fill:p.dashes?"dash":"solid",dash:[p.dashLength??10,p.spaceLength??10]};if(p.aliasColors)for(const Ze of Object.keys(p.aliasColors)){const ot=p.aliasColors[Ze];ot&&F.push({matcher:{id:br.mi.byName,options:Ze},properties:[{id:Xt.qb.Color,value:{mode:Dn.S.Fixed,fixedColor:ot}}]})}let me=!1;if(p.seriesOverrides?.length)for(const Ze of p.seriesOverrides){if(!Ze.alias)continue;const rt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(Ze.alias)?br.mi.byRegexp:br.mi.byName,options:Ze.alias},properties:[]};let gt;for(const Pt of Object.keys(Ze)){const vt=Ze[Pt];switch(Pt){case"alias":case"$$hashKey":break;case"yaxis":if(vt===2){const Dt=vm(G[1]);Rf(J,Dt,rt.properties)}break;case"fill":rt.properties.push({id:"custom.fillOpacity",value:vt*10});break;case"fillBelowTo":me=!0,rt.properties.push({id:"custom.fillBelowTo",value:vt});break;case"fillGradient":vt&&(rt.properties.push({id:"custom.fillGradient",value:"opacity"}),rt.properties.push({id:"custom.fillOpacity",value:vt*10}));break;case"points":rt.properties.push({id:"custom.showPoints",value:vt?xt.Jp.Always:xt.Jp.Never});break;case"bars":vt?(rt.properties.push({id:"custom.drawStyle",value:xt.l8.Bars}),rt.properties.push({id:"custom.fillOpacity",value:100})):rt.properties.push({id:"custom.drawStyle",value:xt.l8.Line});break;case"lines":rt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":rt.properties.push({id:"custom.lineWidth",value:vt});break;case"pointradius":rt.properties.push({id:"custom.pointSize",value:2+vt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(gt||(gt={fill:se.fill,dash:[...se.dash]}),Pt){case"dashLength":gt.dash[0]=vt;break;case"spaceLength":gt.dash[1]=vt;break;case"dashes":gt.fill=vt?"dash":"solid";break}break;case"stack":rt.properties.push({id:"custom.stacking",value:Lf(vt)});break;case"color":rt.properties.push({id:"color",value:{fixedColor:vt,mode:Dn.S.Fixed}});break;case"transform":rt.properties.push({id:"custom.transform",value:vt==="negative-Y"?xt.pR.NegativeY:xt.pR.Constant});break;default:console.log("Ignore override migration:",Ze.alias,Pt,vt)}}gt&&rt.properties.push({id:"custom.lineStyle",value:gt}),rt.properties.length&&F.push(rt)}const be=J.custom??{};be.drawStyle=p.bars?xt.l8.Bars:p.lines?xt.l8.Line:xt.l8.Points,p.points?(be.showPoints=xt.Jp.Always,(0,w.isNumber)(p.pointradius)&&(be.pointSize=2+p.pointradius*2)):be.drawStyle!==xt.l8.Points&&(be.showPoints=xt.Jp.Never),be.lineWidth=p.linewidth,se.fill!=="solid"&&(be.lineStyle=se),me?be.fillOpacity=35:(0,w.isNumber)(p.fill)&&(be.fillOpacity=p.fill*10),(0,w.isNumber)(p.fillGradient)&&p.fillGradient>0&&(be.gradientMode=xt.FI.Opacity,be.fillOpacity=p.fillGradient*10),be.spanNulls=p.nullPointMode===dd.Gl.Ignore,p.steppedLine&&(be.lineInterpolation=xt.KC.StepAfter),be.drawStyle===xt.l8.Bars&&(be.fillOpacity=100),p.stack&&(be.stacking={mode:xt.o0.Normal,group:_r.r.stacking.group}),J.custom=(0,w.omitBy)(be,w.isNil),J.nullValueMode=p.nullPointMode;const Ae={legend:{displayMode:xt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:xt.f3.Single,sort:xt.As.None}},Ke=p.legend;if(Ke){if(Ke.show?Ae.legend.displayMode=Ke.alignAsTable?xt.jK.Table:xt.jK.List:Ae.legend.showLegend=!1,Ke.rightSide&&(Ae.legend.placement="right"),p.legend.values){const Ze=(0,w.pickBy)(p.legend);Ae.legend.calcs=_m(Ze)}p.legend.sideWidth&&(Ae.legend.width=p.legend.sideWidth),Ke.hideZero&&F.push(Em(oa.gz.allIsZero)),Ke.hideEmpty&&F.push(Em(oa.gz.allIsNull))}p.timeRegions?.length&&p.timeRegions.map((ot,rt)=>({name:`T${rt+1}`,color:ot.colorMode!=="custom"?ot.colorMode:ot.fillColor,line:ot.line,fill:ot.fill,fromDayOfWeek:ot.fromDayOfWeek,toDayOfWeek:ot.toDayOfWeek,from:ot.from,to:ot.to})).forEach((ot,rt)=>{const gt={datasource:{type:"datasource",uid:"grafana"},enable:!0,hide:!0,filter:{exclude:!1,ids:[p.panel.id]},iconColor:ot.fillColor??ot.color,name:`T${rt+1}`,target:{queryType:Zl.hR.TimeRegions,refId:"Anno",timeRegion:{fromDayOfWeek:ot.fromDayOfWeek,toDayOfWeek:ot.toDayOfWeek,from:ot.from,to:ot.to,timezone:"utc"}}};ot.fill?N.push(gt):ot.line&&(gt.iconColor=ot.lineColor??"white",N.push(gt))});const Ye=p.tooltip;if(Ye&&(Ye.shared!==void 0&&(Ae.tooltip.mode=Ye.shared?xt.f3.Multi:xt.f3.Single),Ye.sort!==void 0&&Ye.shared))switch(Ye.sort){case 1:Ae.tooltip.sort=xt.As.Ascending;break;case 2:Ae.tooltip.sort=xt.As.Descending;break;default:Ae.tooltip.sort=xt.As.None}if(p.thresholds&&p.thresholds.length>0){let Ze=[],ot=!1,rt=!1;const gt=p.thresholds.sort((vt,Dt)=>vt.value>Dt.value?1:-1);for(let vt=0;vt<gt.length;vt++){const Dt=gt[vt],Vt=gt.length>vt+1?gt[vt+1]:null;Dt.fill&&(ot=!0),Dt.line&&(rt=!0),Dt.op==="gt"&&Ze.push({value:Dt.value,color:Jl(Dt)}),Dt.op==="lt"&&(Ze.length===0&&Ze.push({value:-1/0,color:Jl(Dt)}),Vt&&Vt.op==="gt"&&Vt.value>Dt.value?Ze.push({value:Dt.value,color:"transparent"}):Vt&&Vt.op==="lt"?Ze.push({value:Dt.value,color:Jl(Vt)}):Ze.push({value:Dt.value,color:"transparent"}))}Ze.length>0&&Ze[0].value!==-1/0&&Ze.unshift({color:"transparent",value:-1/0});let Pt=ot?xt.i3.Area:xt.i3.Line;rt&&ot&&(Pt=xt.i3.LineAndArea),J.custom.thresholdsStyle={mode:Pt},J.thresholds={mode:li.H.Absolute,steps:Ze}}return p.xaxis&&p.xaxis.show===!1&&p.xaxis.mode==="time"&&F.push({matcher:{id:br.mi.byType,options:Tn.fS.time},properties:[{id:"custom.axisPlacement",value:xt.LB.Hidden}]}),{fieldConfig:{defaults:(0,w.omitBy)(J,w.isNil),overrides:F},options:Ae,annotations:N}}function Jl(p){return p.colorMode==="critical"?"red":p.colorMode==="warning"?"orange":p.colorMode==="custom"?p.fillColor||p.lineColor:"red"}function vm(p){if(!p)return{};const N={axisPlacement:p.show?xt.LB.Auto:xt.LB.Hidden};if(p.label&&(N.axisLabel=p.label),p.logBase){const F=p.logBase;(F===2||F===10)&&(N.scaleDistribution={type:xt.wf.Log,log:F})}return(0,w.omitBy)({unit:p.format,decimals:Xl(p.decimals),min:Xl(p.min),max:Xl(p.max),custom:N},w.isNil)}function Rf(p,N,F){for(const se of Object.keys(N)){const me=N[se];se!=="custom"&&me!==p[se]&&F.push({id:se,value:me})}const G=p.custom??{},J=N.custom??{};for(const se of Object.keys(J)){const me=J[se];me!==G[se]&&F.push({id:`custom.${se}`,value:me})}}function Xl(p){if((0,w.isNumber)(p))return p;if((0,w.isString)(p)){const N=Number(p);if(!isNaN(N))return N}}function _m(p){const N=[];for(const F of Object.keys(p)){const G=oa.TB.getIfExists(F);G&&N.push(G.id)}return N}function Af(p){p.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(p.fieldConfig.defaults.custom.hideFrom.viz=p.fieldConfig.defaults.custom.hideFrom.graph,delete p.fieldConfig.defaults.custom.hideFrom.graph),p.fieldConfig?.overrides&&(p.fieldConfig.overrides=p.fieldConfig.overrides.map(N=>(N.properties=N.properties.map(F=>(F.id==="custom.hideFrom"&&F.value.graph&&(F.value.viz=F.value.graph,delete F.value.graph),F)),N)))}function Em(p){return{matcher:{id:br.mi.byValue,options:{reducer:p,op:xt.Bd.GTE,value:0}},properties:[{id:"custom.hideFrom",value:{tooltip:!0,viz:!1,legend:!0}}]}}function Lf(p){const N=_r.r.stacking?.group;return{mode:p?xt.o0.Normal:xt.o0.None,group:(0,w.isString)(p)?p:N}}const ym=new ne.c(Yl).setPanelChangeHandler(If).useFieldConfig((0,_r.F)(_r.r)).setPanelOptions(p=>{Ts.L(p),vs.J(p),p.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:Tf,defaultValue:void 0})}).setSuggestionsSupplier(new Rr).setDataSupport({annotations:!0,alertStates:!0});var km=e(10864),Hm=e(67066),Bf=e(62227),Nf=e(12361);const Gm={wrapper:(0,O.css)`
    height: 100%;
    overflow: scroll;
  `},Uf=({data:p})=>{const N=(0,A.createRef)(),F=(0,A.useMemo)(()=>(0,Nf.N)(p.series[0]),[p.series]),G=(0,Ct.Z)(async()=>await(0,km.F)().get(p.request?.targets[0].datasource?.uid));return!p||!p.series.length||!F?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,"No data found in response")):A.createElement("div",{className:Gm.wrapper},A.createElement("div",{ref:N}),A.createElement(Hm.m,{dataFrames:p.series,scrollElementClass:Gm.wrapper,traceProp:F,queryResponse:p,datasource:G.value,topOfViewRef:N,topOfViewRefType:Bf.l4.Panel}))},wf=new ne.c(Uf),Wf=({data:p,timeRange:N,timeZone:F,width:G,height:J,options:se,fieldConfig:me,replaceVariables:be,id:Ae})=>{const{sync:Ke}=(0,Ps.R9)(),Ye=se.xField??p.series[0].fields.find(rt=>rt.type===Tn.fS.number)?.name,Ze=(rt,gt,Pt)=>(gt={...gt,x:(vt,Dt,Vt)=>(0,Bn.CZ)(vt,Dt,Vt)===Ye},(0,nl.Rn)(rt,gt)),ot=(0,A.useMemo)(()=>{if(p.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:p.series};let rt=p.series,gt;if(se.xField){if(gt=(0,Ea.findFieldIndex)(rt[0],se.xField),gt==null)return{warning:"Unable to find field: "+se.xField,frames:p.series}}else if(gt=rt[0].fields.findIndex(Pt=>Pt.type===Tn.fS.number),gt===-1)return{warning:"No numeric fields found for X axis",frames:rt};if(gt!=null){const Pt=rt[0].fields[gt];if(Pt.type===Tn.fS.number&&!(0,ta.lP)(Pt.values))return{warning:"Values must be in ascending order",frames:rt}}return{frames:Co(rt,We.config.theme2,void 0,gt)}},[p.series,se.xField]);return ot.warning||!ot.frames?A.createElement(Za.Z,{panelId:Ae,fieldConfig:me,data:p,message:ot.warning,needsNumberField:!0}):A.createElement(Ro.p,{frames:ot.frames,structureRev:p.structureRev,timeRange:N,timeZone:F,width:G,height:J,legend:se.legend,options:se,preparePlotFrame:Ze},(rt,gt)=>(gt.fields.some(Pt=>!!Pt.config.links?.length)&&(gt=sl(gt,ot.frames,be,F)),A.createElement(A.Fragment,null,A.createElement(Ss.C,{config:rt}),se.tooltip.mode===xt.f3.None||A.createElement(Zt.i,{frames:ot.frames,data:gt,config:rt,mode:se.tooltip.mode,sortOrder:se.tooltip.sort,sync:Ke,timeZone:F}),A.createElement(Lr,{data:gt,frames:ot.frames,config:rt,timeZone:F,replaceVariables:be,defaultItems:[]}))))};class jm{getSuggestionsForData(N){const{dataSummary:F}=N;return F.numberFieldCount<2||F.rowCountTotal<2||F.rowCountTotal<2?void 0:N.getListAppender({name:ns.y.LineChart,pluginId:"trend",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:J=>{J.options.legend.showLegend=!1,J.fieldConfig?.defaults.custom?.drawStyle!==xt.l8.Bars&&(J.fieldConfig.defaults.custom.lineWidth=Math.max(J.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const Ff=new ne.c(Wf).useFieldConfig((0,_r.F)(_r.r,!1)).setPanelOptions(p=>{const N=["X Axis"];p.addFieldNamePicker({path:"xField",name:"X Field",description:"An increasing numeric value",category:N,defaultValue:void 0,settings:{isClearable:!0,placeholderText:"First numeric value",filter:F=>F.type===Tn.fS.number}}),Ts.L(p),vs.J(p)}).setSuggestionsSupplier(new jm),Kf=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],$f=()=>{const p=(0,ct.wW)(Vf);return A.createElement("div",{className:p.container},A.createElement("h1",{className:p.title},"Welcome to Grafana"),A.createElement("div",{className:p.help},A.createElement("h3",{className:p.helpText},"Need help?"),A.createElement("div",{className:p.helpLinks},Kf.map((N,F)=>A.createElement("a",{key:`${N.label}-${F}`,className:p.helpLink,href:`${N.href}?utm_source=grafana_gettingstarted`},N.label)))))},Vf=p=>({container:(0,O.css)`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${p.spacing(3)};

      ${p.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${p.breakpoints.down("sm")} {
        padding: 0 ${p.spacing(1)};
      }
    `,title:(0,O.css)`
      margin-bottom: 0;

      ${p.breakpoints.down("lg")} {
        margin-bottom: ${p.spacing(1)};
      }

      ${p.breakpoints.down("md")} {
        font-size: ${p.typography.h2.fontSize};
      }
      ${p.breakpoints.down("sm")} {
        font-size: ${p.typography.h3.fontSize};
      }
    `,help:(0,O.css)`
      display: flex;
      align-items: baseline;
    `,helpText:(0,O.css)`
      margin-right: ${p.spacing(2)};
      margin-bottom: 0;

      ${p.breakpoints.down("md")} {
        font-size: ${p.typography.h4.fontSize};
      }

      ${p.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:(0,O.css)`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:(0,O.css)`
      margin-right: ${p.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${p.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),zf=new ne.c($f).setNoPadding();var _f=(p=>(p[p.NoData=0]="NoData",p[p.BadFrameSelection=1]="BadFrameSelection",p[p.XNotFound=2]="XNotFound",p))(_f||{});function Vo(p){return p.type===Tn.fS.number}function kf(p,N){if(!N||!N.length)return{error:0};p||(p={frame:0});let F=N[p.frame??0];if(!F)return{error:1};let G=-1;for(let be=0;be<F.fields.length;be++){const Ae=F.fields[be];if(p.x&&p.x===(0,Bn.CZ)(Ae,F,N)){G=be;break}if(Vo(Ae)&&!p.x){G=be;break}}let J=!1;const se=F.fields[G],me=[se];for(const be of F.fields)if(be.type===Tn.fS.time&&(J=!0),!(be===se||!Vo(be))){if(p.exclude){const Ae=(0,Bn.CZ)(be,F,N);if(p.exclude.includes(Ae))continue}me.push(be)}return{x:se,fields:{x:Qm(se),y:Lg(se)},frame:{...F,fields:me},hasData:F.fields.length>0,hasTime:J}}function Qm(p){return p?N=>p===N||!!(p.state&&p.state===N.state):()=>!1}function Lg(p){if(!p)return()=>!1;const N=Qm(p);return F=>!N(F,void 0,void 0)}const Bg=({value:p,onChange:N,context:F})=>{const G=(0,A.useMemo)(()=>F?.data?.length?F.data.map((be,Ae)=>({value:Ae,label:(0,Bn.nf)(be,Ae)})):[{value:0,label:"First result"}],[F.data]),J=(0,A.useMemo)(()=>kf(p,F.data),[F.data,p]),se=(0,A.useMemo)(()=>{const be={label:"?",value:void 0},Ae={numberFields:[be],yFields:[],xAxis:p?.x?{label:`${p.x} (Not found)`,value:p.x}:be},Ke=F.data?F.data[p?.frame??0]:void 0;if(Ke){const Ye=J.x?(0,Bn.CZ)(J.x,J.frame,F.data):void 0;for(let Ze of Ke.fields)if(Vo(Ze)){const ot=(0,Bn.CZ)(Ze,Ke,F.data),rt={label:ot,value:ot};Ae.numberFields.push(rt),be.label==="?"&&(be.label=`${ot} (First)`),p?.x&&ot===p.x&&(Ae.xAxis=rt),Ye!==ot&&Ae.yFields.push({label:ot,value:p?.exclude?.includes(ot)})}}return Ae},[J,F.data,p]),me=(0,ct.wW)(Hf);return F.data?A.createElement("div",null,A.createElement(fs.g,{label:"Data"},A.createElement(Ve.Ph,{options:G,value:G.find(be=>be.value===p?.frame)??G[0],onChange:be=>{N({...p,frame:be.value})}})),A.createElement(fs.g,{label:"X Field"},A.createElement(Ve.Ph,{options:se.numberFields,value:se.xAxis,onChange:be=>{N({...p,x:be.value})}})),A.createElement(fs.g,{label:"Y Fields"},A.createElement("div",null,se.yFields.map(be=>A.createElement("div",{key:be.label,className:me.row},A.createElement(Po.h,{name:be.value?"eye-slash":"eye",onClick:()=>{const Ae=p?.exclude?[...p.exclude]:[];let Ke=Ae.indexOf(be.label);Ke<0?Ae.push(be.label):Ae.splice(Ke,1),N({...p,exclude:Ae})},tooltip:be.value?"Disable":"Enable"}),be.label))))):A.createElement("div",null,"No data...")},Hf=p=>({sorter:(0,O.css)`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:(0,O.css)`
    padding: ${p.spacing(.5,1)};
    border-radius: ${p.shape.borderRadius(1)};
    background: ${p.colors.background.secondary};
    min-height: ${p.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${p.components.input.borderColor};
  `});var Ym=e(84270),Zm=e(78276),$d=(p=>(p.Auto="auto",p.Manual="manual",p))($d||{}),co=(p=>(p.Lines="lines",p.Points="points",p.PointsAndLines="points+lines",p))(co||{});const Gf={exclude:[]},bm={label:xt.Jp.Auto,show:"points"},jf={series:[]},Jm=({value:p,onChange:N,context:F})=>{const[G,J]=(0,A.useState)(0),se=(0,ct.wW)(Pm),me=(Ye,Ze,ot)=>{N(p.map((rt,gt)=>gt===Ze?{...rt,[ot]:Ye}:rt))},be=()=>{N([...p,{pointColor:{},pointSize:bm.pointSize}]),J(p.length)};(0,A.useEffect)(()=>{p?.length||be()},[]);const Ae=Ye=>{N(p.filter((Ze,ot)=>ot!==Ye))},Ke=Ye=>Ye===G?`${se.row} ${se.sel}`:se.row;return A.createElement(A.Fragment,null,A.createElement(ge.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:be,className:se.marginBot},"Add series"),A.createElement("div",{className:se.marginBot},p.map((Ye,Ze)=>A.createElement("div",{key:`series/${Ze}`,className:Ke(Ze),onMouseDown:()=>J(Ze)},A.createElement(Ym.X,{name:Ye.name??`Series ${Ze+1}`,onChange:ot=>me(ot,Ze,"name")}),A.createElement(Po.h,{name:"trash-alt",title:"remove",className:(0,O.cx)(se.actionIcon),onClick:()=>Ae(Ze),tooltip:"Delete series"})))),G>=0&&p[G]&&A.createElement(A.Fragment,null,A.createElement("div",{key:`series/${G}`},A.createElement(fs.g,{label:"X Field"},A.createElement(Rl.b,{value:p[G].x??"",context:F,onChange:Ye=>me(Ye,G,"x"),item:{}})),A.createElement(fs.g,{label:"Y Field"},A.createElement(Rl.b,{value:p[G].y??"",context:F,onChange:Ye=>me(Ye,G,"y"),item:{}})),A.createElement(fs.g,{label:"Point color"},A.createElement(Zm.Lm,{value:p[G].pointColor,context:F,onChange:Ye=>me(Ye,G,"pointColor"),item:{}})),A.createElement(fs.g,{label:"Point size"},A.createElement(Zm.cL,{value:p[G].pointSize,context:F,onChange:Ye=>me(Ye,G,"pointSize"),item:{settings:{min:1,max:100}}})))))},Pm=p=>({marginBot:(0,O.css)`
    margin-bottom: 20px;
  `,row:(0,O.css)`
    padding: ${p.spacing(.5,1)};
    border-radius: ${p.shape.borderRadius(1)};
    background: ${p.colors.background.secondary};
    min-height: ${p.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${p.components.input.borderColor};
    &:hover {
      border: 1px solid ${p.components.input.borderHover};
    }
  `,sel:(0,O.css)`
    border: 1px solid ${p.colors.primary.border};
    &:hover {
      border: 1px solid ${p.colors.primary.border};
    }
  `,actionIcon:(0,O.css)`
    color: ${p.colors.text.secondary};
    &:hover {
      color: ${p.colors.text};
    }
  `});var eo=e(24077);const Xm=({allSeries:p,data:N,manualSeriesConfigs:F,seriesMapping:G,rowIndex:J,hoveredPointIndex:se,options:me})=>{const be=(0,ct.wW)(Qf);if(!p||J==null)return null;const Ae=p[se],Ke=Ae.frame(N),Ye=Ae.x(Ke),Ze=Ae.y(Ke);let ot;if(Ze.getLinks){const vt=Ze.values[J],Dt=Ze.display?Ze.display(vt):{text:`${vt}`,numeric:+vt};ot=Ze.getLinks({calculatedValue:Dt,valueRowIndex:J}).map(Vt=>(Vt.title||(Vt.title=(0,Go.Rb)(Vt.href)),Vt))}let rt=Ke.fields.filter(vt=>vt!==Ye&&vt!==Ze),gt=null,Pt=null;if(G===$d.Manual&&F){const vt=F[se]?.pointColor?.field??"",Dt=F[se]?.pointSize?.field??"",Vt=vt?(0,Ea.findField)(Ke,vt):void 0,en=Dt?(0,Ea.findField)(Ke,Dt):void 0;Pt={colorFacetFieldName:vt,sizeFacetFieldName:Dt,colorFacetValue:Vt?.values[J],sizeFacetValue:en?.values[J]},rt=rt.filter(zt=>zt!==Vt&&zt!==en)}return gt={name:(0,Bn.CZ)(Ze,Ke),val:Ze.values[J],field:Ze,color:Ae.pointColor(Ke)},A.createElement(A.Fragment,null,A.createElement("table",{className:be.infoWrap},A.createElement("tr",null,A.createElement("th",{colSpan:2,style:{backgroundColor:gt.color}})),A.createElement("tbody",null,A.createElement("tr",null,A.createElement("th",null,(0,Bn.CZ)(Ye,Ke)),A.createElement("td",null,Cm(Ye,Ye.values[J]))),A.createElement("tr",null,A.createElement("th",null,gt.name,":"),A.createElement("td",null,Cm(gt.field,gt.val))),Pt!==null&&Pt.colorFacetFieldName&&A.createElement("tr",null,A.createElement("th",null,Pt.colorFacetFieldName,":"),A.createElement("td",null,Pt.colorFacetValue)),Pt!==null&&Pt.sizeFacetFieldName&&A.createElement("tr",null,A.createElement("th",null,Pt.sizeFacetFieldName,":"),A.createElement("td",null,Pt.sizeFacetValue)),rt.map((vt,Dt)=>A.createElement("tr",{key:Dt},A.createElement("th",null,(0,Bn.CZ)(vt,Ke),":"),A.createElement("td",null,Cm(vt,vt.values[J])))),ot&&ot.length>0&&A.createElement("tr",null,A.createElement("td",{colSpan:2},A.createElement(ar.wc,null,ot.map((vt,Dt)=>A.createElement(ge.Qj,{key:Dt,icon:"external-link-alt",target:vt.target,href:vt.href,onClick:vt.onClick,fill:"text",style:{width:"100%"}},vt.title))))))))};function Cm(p,N){return p.display?(0,qn.zc)(p.display(N)):`${N}`}const Qf=p=>({infoWrap:(0,O.css)`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${p.typography.fontWeightMedium};
      padding: ${p.spacing(.25,2)};
    }
  `,highlight:(0,O.css)`
    background: ${p.colors.action.hover};
  `,xVal:(0,O.css)`
    font-weight: ${p.typography.fontWeightBold};
  `,icon:(0,O.css)`
    margin-right: ${p.spacing(1)};
    vertical-align: middle;
  `});var qm=e(25236);const ef=5;function Yf(p){return{standardOptions:{[Xt.qb.Min]:{hideFromDefaults:!0},[Xt.qb.Max]:{hideFromDefaults:!0},[Xt.qb.Unit]:{hideFromDefaults:!0},[Xt.qb.Decimals]:{hideFromDefaults:!0},[Xt.qb.NoValue]:{hideFromDefaults:!0},[Xt.qb.DisplayName]:{hideFromDefaults:!0},[Xt.qb.Thresholds]:{hideFromDefaults:!0},[Xt.qb.Mappings]:{hideFromDefaults:!0},[Xt.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Dn.S.PaletteClassic}}},useCustomConfig:N=>{N.addRadio({path:"show",name:"Show",defaultValue:p.show,settings:{options:[{label:"Points",value:co.Points},{label:"Lines",value:co.Lines},{label:"Both",value:co.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:p.pointSize?.fixed??ef,settings:{min:1,max:100,step:1},showIf:F=>F.show!==co.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:F=>F.show!==co.Points,editor:qm.j,override:qm.j,process:wn.kG,shouldApply:F=>F.type===Tn.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:p.lineWidth,settings:{min:0,max:10,step:1},showIf:F=>F.show!==co.Points}),Fa.r(N,p),us.B(N)}}}function Zf(p,N,F,G,J,se){let me,be;try{me=Jf(p,N()),be=nf(N,me,F,G,J,se)}catch(Ae){let Ke="Unknown error in prepScatter";return typeof Ae=="string"?Ke=Ae:Ae instanceof Error&&(Ke=Ae.message),{error:Ke,series:[]}}return{series:me,builder:be}}function tf(p,N,F,G,J,se){const me=N[F],be=me.fields[J];let Ae=be.state??{};Ae.seriesIndex=p,be.state=Ae;let Ke=se.pointColorFixed?We.config.theme2.visualization.getColorByName(se.pointColorFixed):(0,Yn.YO)(be,We.config.theme2).color,Ye=()=>Ke;const Ze={...bm,...be.config.custom};let ot=Yn.WO.get(Dn.S.PaletteClassic);if(se.pointColorIndex){const Dt=N[F].fields[se.pointColorIndex];if(Dt)if(ot=(0,Yn.fD)(be),ot.isByValue){const Vt=se.pointColorIndex;Ye=en=>{const zt=en.fields[Vt];return zt.state?.range&&(zt.state.range=void 0),zt.display=(0,pa.U)({field:zt,theme:We.config.theme2}),zt.values.map(an=>zt.display(an).color)}}else Ke=ot.getCalculator(Dt,We.config.theme2)(Dt.values[0],1),Ye=()=>Ke}let rt=se.pointSizeConfig,gt=se.pointSizeConfig?.fixed??be.config.custom?.pointSize?.fixed??ef,Pt=()=>gt;se.pointSizeIndex?Pt=Dt=>{const Vt=(0,Ea.getScaledDimensionForField)(Dt.fields[se.pointSizeIndex],se.pointSizeConfig,xt.B5.Quad),en=Array(Dt.length);for(let zt=0;zt<Dt.length;zt++)en[zt]=Vt.get(zt);return en}:rt={fixed:gt,min:gt,max:gt};const vt=(0,Bn.CZ)(be,me,N);return{name:vt,frame:Dt=>Dt[F],x:Dt=>Dt.fields[G],y:Dt=>Dt.fields[J],legend:()=>[{label:vt,color:Ke,getItemKey:()=>vt,yAxis:J}],showLine:Ze.show!==co.Points,lineWidth:Ze.lineWidth??2,lineStyle:Ze.lineStyle,lineColor:()=>Ke,showPoints:Ze.show!==co.Lines?xt.Jp.Always:xt.Jp.Never,pointSize:Pt,pointColor:Ye,pointSymbol:(Dt,Vt)=>"circle",label:xt.Jp.Never,labelValue:()=>"",show:!me.fields[J].config.custom.hideFrom?.viz,hints:{pointSize:rt,pointColor:{mode:ot}}}}function Jf(p,N){let F=0;if(!N.length)throw"Missing data";if(p.seriesMapping==="manual"){if(!p.series?.length)throw"Missing series config";const Ae=[];for(const Ke of p.series){if(!Ke?.x)throw"Select X dimension";if(!Ke?.y)throw"Select Y dimension";for(let Ye=0;Ye<N.length;Ye++){const Ze=N[Ye],ot=(0,Ea.findFieldIndex)(Ze,Ke.x);if(ot!=null){const rt=(0,Ea.findFieldIndex)(Ze,Ke.y);if(rt==null)throw"Y must be in the same frame as X";const gt={pointColorFixed:Ke.pointColor?.fixed,pointColorIndex:(0,Ea.findFieldIndex)(Ze,Ke.pointColor?.field),pointSizeConfig:Ke.pointSize,pointSizeIndex:(0,Ea.findFieldIndex)(Ze,Ke.pointSize?.field)};Ae.push(tf(F++,N,Ye,ot,rt,gt))}}}return Ae}const G=p.dims??{},J=G.frame??0,se=N[J],me=[];let be=(0,Ea.findFieldIndex)(se,G.x);for(let Ae=0;Ae<se.fields.length;Ae++)if(Vo(se.fields[Ae])){if(be==null||Ae===be){be=Ae;continue}if(G.exclude&&G.exclude.includes((0,Bn.CZ)(se.fields[Ae],se,N)))continue;me.push(Ae)}if(be==null)throw"Missing X dimension";if(!me.length)throw"No Y values";return me.map(Ae=>tf(F++,N,J,be,Ae,{}))}const nf=(p,N,F,G,J,se)=>{let me,be;function Ae(zt){return(Jt,ln,yn,En)=>(Vn.Z.orient(Jt,ln,(In,Wn,On,Xn,jn,Ln,na,ia,$a,Va,ya,_a,fa,ea,ha)=>{const Ra=Vn.Z.pxRatio,wa=N[ln-1];let Ba=Jt.data[ln],ls=wa.showLine,ts=wa.showPoints===xt.Jp.Always;!ts&&wa.showPoints===xt.Jp.Auto&&(ts=Ba[0].length<1e3),!ts&&!ls&&(ls=!0);let Zn=1;Jt.ctx.save(),Jt.ctx.rect(Jt.bbox.left,Jt.bbox.top,Jt.bbox.width,Jt.bbox.height),Jt.ctx.clip(),Jt.ctx.fillStyle=In.fill(),Jt.ctx.strokeStyle=In.stroke(),Jt.ctx.lineWidth=Zn;let ra=2*Math.PI,da=Xn.key,Aa=jn.key,Wa=wa.hints.pointSize;const as=wa.hints.pointColor.mode.isByValue;let Ja=(Wa.max??Wa.fixed)*Ra,Js=Jt.posToVal(-Ja/2,da),Vs=Jt.posToVal(Jt.bbox.width/Ra+Ja/2,da),xo=Jt.posToVal(Jt.bbox.height/Ra+Ja/2,Aa),cr=Jt.posToVal(-Ja/2,Aa),mi=zt.disp.size.values(Jt,ln),zi=zt.disp.color.values(Jt,ln),Gd=zt.disp.color.alpha,Wr=ls?new Path2D:null,fo=null;for(let hr=0;hr<Ba[0].length;hr++){let Rs=Ba[0][hr],fi=Ba[1][hr],_o=mi[hr]*Ra;if(Rs>=Js&&Rs<=Vs&&fi>=xo&&fi<=cr){let Pf=Ln(Rs,Xn,Va,ia),Cf=na(fi,jn,ya,$a);ls&&Wr.lineTo(Pf,Cf),ts&&(Jt.ctx.moveTo(Pf+_o/2,Cf),Jt.ctx.beginPath(),Jt.ctx.arc(Pf,Cf,_o/2,0,ra),as&&zi[hr]!==fo&&(fo=zi[hr],Jt.ctx.fillStyle=(0,Oa.alpha)(fo,Gd),Jt.ctx.strokeStyle=fo),Jt.ctx.fill(),Jt.ctx.stroke(),zt.each(Jt,ln,hr,Pf-_o/2-Zn/2,Cf-_o/2-Zn/2,_o+Zn,_o+Zn))}}if(ls){let hr=wa.frame(p());Jt.ctx.strokeStyle=wa.lineColor(hr),Jt.ctx.lineWidth=wa.lineWidth*Ra;const{lineStyle:Rs}=wa;Rs&&Rs.fill!=="solid"&&(Rs.fill==="dot"&&(Jt.ctx.lineCap="round"),Jt.ctx.setLineDash(Rs.dash??[10,10])),Jt.ctx.stroke(Wr)}Jt.ctx.restore()}),null)}let Ke=Ae({disp:{size:{values:(zt,an)=>zt.data[an][2]},color:{values:(zt,an)=>zt.data[an][3],alpha:.5}},each:(zt,an,Jt,ln,yn,En,In)=>{ln-=zt.bbox.left,yn-=zt.bbox.top,me.add({x:ln,y:yn,w:En,h:In,sidx:an,didx:Jt})}});const Ye=new ms.U;Ye.setCursor({drag:{setScale:!0},dataIdx:(zt,an)=>{if(an===1){const Jt=Vn.Z.pxRatio;be=null;let ln=1/0,yn=zt.cursor.left*Jt,En=zt.cursor.top*Jt;me.get(yn,En,1,1,In=>{if((0,es.Pn)(yn,En,In.x,In.y,In.x+In.w,In.y+In.h)){let Wn=In.x+In.w/2,On=In.y+In.h/2,Xn=Wn-yn,jn=On-En,Ln=Math.sqrt(Xn**2+jn**2);Ln<=In.w/2&&Ln<=ln&&(ln=Ln,be=In)}})}return be&&an===be.sidx?be.didx:null},points:{size:(zt,an)=>be&&an===be.sidx?be.w/Vn.Z.pxRatio:0,fill:(zt,an)=>"rgba(255,255,255,0.4)"}});const Ze=()=>{se.current&&(G(void 0),J&&J())};let ot=null;Ye.addHook("init",(zt,an)=>{zt.over.style.overflow="hidden",ot=zt.root.parentElement,J&&ot?.addEventListener("click",J)}),Ye.addHook("destroy",zt=>{J&&(ot?.removeEventListener("click",J),Ze())});let rt;Ye.addHook("syncRect",(zt,an)=>{rt=an}),Ye.addHook("setLegend",zt=>{if(zt.cursor.idxs!=null)for(let an=0;an<zt.cursor.idxs.length;an++){const Jt=zt.cursor.idxs[an];if(Jt!=null&&!se.current){G({scatterIndex:an-1,xIndex:Jt,pageX:rt.left+zt.cursor.left,pageY:rt.top+zt.cursor.top});return}}se.current||G(void 0)}),Ye.addHook("drawClear",zt=>{Ze(),me=me||new es.lW(0,0,zt.bbox.width,zt.bbox.height),me.clear(),zt.series.forEach((an,Jt)=>{Jt>0&&(an._paths=null)})}),Ye.setMode(2);const gt=p();let Pt=N[0].x(N[0].frame(gt)),vt=Pt.config,Dt=vt.custom,Vt=Dt?.scaleDistribution;Ye.addScale({scaleKey:"x",isTime:!1,orientation:xt.wN.Horizontal,direction:xt.bQ.Right,distribution:Vt?.type,log:Vt?.log,linearThreshold:Vt?.linearThreshold,min:vt.min,max:vt.max,softMin:Dt?.axisSoftMin,softMax:Dt?.axisSoftMax,centeredZero:Dt?.axisCenteredZero,decimals:vt.decimals});let en=Dt.axisLabel;return Ye.addAxis({scaleKey:"x",placement:Dt?.axisPlacement!==xt.LB.Hidden?xt.LB.Bottom:xt.LB.Hidden,show:Dt?.axisPlacement!==xt.LB.Hidden,theme:F,label:en==null||en===""?(0,Bn.CZ)(Pt,N[0].frame(gt),gt):en,formatValue:(zt,an)=>(0,qn.zc)(Pt.display(zt,an))}),N.forEach((zt,an)=>{let Jt=zt.frame(gt),ln=zt.y(Jt);const yn=zt.lineColor(Jt),En=qf(Jt,zt.pointColor);let In=ln.config.unit??"y",Wn=ln.config,On=Wn.custom,Xn=On?.scaleDistribution;if(Ye.addScale({scaleKey:In,orientation:xt.wN.Vertical,direction:xt.bQ.Up,distribution:Xn?.type,log:Xn?.log,linearThreshold:Xn?.linearThreshold,min:Wn.min,max:Wn.max,softMin:On?.axisSoftMin,softMax:On?.axisSoftMax,centeredZero:On?.axisCenteredZero,decimals:Wn.decimals}),On?.axisPlacement!==xt.LB.Hidden){let jn=On?.axisLabel;Ye.addAxis({scaleKey:In,theme:F,placement:On?.axisPlacement,label:jn==null||jn===""?(0,Bn.CZ)(ln,N[an].frame(gt),gt):jn,formatValue:(Ln,na)=>(0,qn.zc)(ln.display(Ln,na))})}Ye.addSeries({facets:[{scale:"x",auto:!0},{scale:In,auto:!0}],pathBuilder:Ke,theme:F,scaleKey:"",lineColor:yn,fillColor:(0,Oa.alpha)(En,.5),show:!On.hideFrom?.viz})}),Ye};function Dm(p,N,F){return p.error||!N.length?[null]:[null,...p.series.map((G,J)=>{const se=G.frame(N);let me;const be=G.pointColor(se);return Array.isArray(be)?me=be:me=Array(se.length).fill(be),[G.x(se).values,G.y(se).values,Xf(se,G.pointSize),me]})]}function Xf(p,N){const F=N(p);return Array.isArray(F)?F:Array(p.length).fill(F)}function qf(p,N){const F=N(p);return Array.isArray(F)?F[0]:F}const af=10,eg=p=>{const[N,F]=(0,A.useState)(),[G,J]=(0,A.useState)([]),[se,me]=(0,A.useState)(),[be,Ae]=(0,A.useState)(),[Ke,Ye]=(0,A.useState)(),[Ze,ot]=(0,A.useState)(!1),rt=(0,A.useRef)(!1),gt=(0,eo.Z)(p.options),Pt=(0,eo.Z)(p.data),vt=()=>{rt.current=!1,ot(!1),Vt(void 0)},Dt=()=>{rt.current=!rt.current,ot(rt.current)},Vt=Jt=>{Ye(Jt)},en=(0,A.useCallback)(()=>{const Jt=()=>p.data.series,ln=Zf(p.options,Jt,We.config.theme2,Vt,Dt,rt);ln.error?F(ln.error):ln.series.length&&p.data.series&&(me(ln.builder),J(ln.series),Ae(()=>Dm(ln,p.data.series)),F(void 0))},[p.data.series,p.options]),zt=(0,A.useCallback)(()=>{Ae(()=>Dm({error:N,series:G},p.data.series))},[p.data.series,N,G]);(0,A.useEffect)(()=>{gt!==p.options||Pt?.structureRev!==p.data.structureRev?en():Pt?.series!==p.data.series&&zt()},[p]);const an=()=>{const Jt=[],ln=In=>In==null?"-":In.toFixed(1),yn=We.config.theme2;for(let In=0;In<G.length;In++){const Wn=G[In],On=Wn.frame(p.data.series);if(On)for(const Xn of Wn.legend())Xn.getDisplayValues=()=>{const jn=p.options.legend.calcs;if(!jn?.length)return[];const Ln=Wn.y(On),na=Ln.display??ln;let ia=null;const $a=(0,oa.Kx)({field:Ln,reducers:jn});return jn.map(Va=>{const ya=oa.TB.get(Va);let _a=na;return ya.id===oa.gz.diffperc&&(_a=(0,pa.U)({field:{...Ln,config:{...Ln.config,unit:"percent"}},theme:yn})),(ya.id===oa.gz.count||ya.id===oa.gz.changeCount||ya.id===oa.gz.distinctCount)&&(ia||(ia=(0,pa.U)({field:{...Ln,config:{...Ln.config,unit:"none"}},theme:yn})),_a=ia),{..._a($a[Va]),title:ya.name,description:ya.description}})},Xn.disabled=!(Wn.show??!0),p.options.seriesMapping===$d.Manual&&(Xn.label=p.options.series?.[In]?.name??`Series ${In+1}`),Jt.push(Xn)}if(!p.options.legend.showLegend)return null;const En={flexStart:(0,O.css)`
        div {
          justify-content: flex-start !important;
        }
      `};return A.createElement(Es.AY.Legend,{placement:p.options.legend.placement,width:p.options.legend.width},A.createElement(er.l,{className:En.flexStart,placement:p.options.legend.placement,items:Jt,displayMode:p.options.legend.displayMode}))};return N||!se||!be?A.createElement("div",{className:"panel-empty"},A.createElement("p",null,N)):A.createElement(A.Fragment,null,A.createElement(Es.AY,{width:p.width,height:p.height,legend:an()},(Jt,ln)=>A.createElement(ni.N,{config:se,data:be,width:Jt,height:ln})),A.createElement(vr.h_,null,Ke&&p.options.tooltip.mode!==xt.f3.None&&A.createElement($r.S,{position:{x:Ke.pageX,y:Ke.pageY},offset:{x:af,y:af},allowPointerEvents:rt.current},Ze&&A.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},A.createElement(fn.P,{onClick:vt,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),A.createElement(Xm,{options:p.options.tooltip,allSeries:G,manualSeriesConfigs:p.options.series,seriesMapping:p.options.seriesMapping,rowIndex:Ke.xIndex,hoveredPointIndex:Ke.scatterIndex,data:p.data.series}))))},tg=new ne.c(eg).useFieldConfig(Yf(bm)).setPanelOptions(p=>{p.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:Bg,showIf:N=>N.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:Jm,showIf:N=>N.seriesMapping==="manual"}),Ts.L(p),vs.J(p)}),ag={"app/plugins/datasource/graphite/module":async()=>await e.e(7494).then(e.bind(e,23621)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([e.e(9095),e.e(8831)]).then(e.bind(e,19782)),"app/plugins/datasource/dashboard/module":async()=>await e.e(7348).then(e.bind(e,97348)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([e.e(2787),e.e(9897)]).then(e.bind(e,2787)),"app/plugins/datasource/opentsdb/module":async()=>await e.e(3168).then(e.bind(e,37684)),"app/plugins/datasource/grafana/module":async()=>await e.e(7537).then(e.bind(e,24794)),"app/plugins/datasource/influxdb/module":async()=>await e.e(5783).then(e.bind(e,16756)),"app/plugins/datasource/loki/module":async()=>await Promise.all([e.e(3565),e.e(5305),e.e(760),e.e(1598)]).then(e.bind(e,50760)),"app/plugins/datasource/jaeger/module":async()=>await e.e(890).then(e.bind(e,9203)),"app/plugins/datasource/zipkin/module":async()=>await e.e(4023).then(e.bind(e,48561)),"app/plugins/datasource/mixed/module":async()=>await e.e(2001).then(e.bind(e,11138)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([e.e(5216),e.e(4251)]).then(e.bind(e,98534)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([e.e(5216),e.e(534)]).then(e.bind(e,79634)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([e.e(5216),e.e(5032)]).then(e.bind(e,52709)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([e.e(5305),e.e(7004)]).then(e.bind(e,8842)),"app/plugins/datasource/testdata/module":async()=>await e.e(319).then(e.bind(e,34750)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([e.e(8695),e.e(3549)]).then(e.bind(e,26943)),"app/plugins/datasource/azuremonitor/module":async()=>await Promise.all([e.e(1109),e.e(2340),e.e(2364)]).then(e.bind(e,62340)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([e.e(7963),e.e(295)]).then(e.bind(e,7963)),"app/plugins/datasource/alertmanager/module":async()=>await Promise.all([e.e(1109),e.e(6795)]).then(e.bind(e,8654)),"app/plugins/datasource/grafana-pyroscope-datasource/module":async()=>await e.e(8693).then(e.bind(e,86105)),"app/plugins/datasource/parca/module":async()=>await e.e(2015).then(e.bind(e,48170)),"app/plugins/panel/text/module":D,"app/plugins/panel/timeseries/module":P,"app/plugins/panel/trend/module":x,"app/plugins/panel/state-timeline/module":E,"app/plugins/panel/status-history/module":C,"app/plugins/panel/candlestick/module":m,"app/plugins/panel/graph/module":async()=>await Promise.all([e.e(1189),e.e(1260)]).then(e.bind(e,1648)),"app/plugins/panel/xychart/module":R,"app/plugins/panel/geomap/module":async()=>await Promise.all([e.e(2421),e.e(8096)]).then(e.bind(e,41670)),"app/plugins/panel/canvas/module":async()=>await Promise.all([e.e(7307),e.e(3330)]).then(e.bind(e,22294)),"app/plugins/panel/dashlist/module":d,"app/plugins/panel/alertlist/module":n,"app/plugins/panel/annolist/module":i,"app/plugins/panel/heatmap/module":async()=>await e.e(6987).then(e.bind(e,50738)),"app/plugins/panel/table/module":u,"app/plugins/panel/table-old/module":async()=>await e.e(6784).then(e.bind(e,84332)),"app/plugins/panel/news/module":b,"app/plugins/panel/live/module":h,"app/plugins/panel/stat/module":$l,"app/plugins/panel/datagrid/module":o,"app/plugins/panel/debug/module":l,"app/plugins/panel/flamegraph/module":a,"app/plugins/panel/gettingstarted/module":g,"app/plugins/panel/gauge/module":Qc,"app/plugins/panel/piechart/module":y,"app/plugins/panel/bargauge/module":r,"app/plugins/panel/barchart/module":s,"app/plugins/panel/logs/module":f,"app/plugins/panel/traces/module":S,"app/plugins/panel/welcome/module":M,"app/plugins/panel/nodeGraph/module":v,"app/plugins/panel/histogram/module":c,"app/plugins/panel/alertGroups/module":t},Vd="plugin-cdn",df=new Map([]);var sg=e(55403),rg=e(67821);function Sm(p){const F=new URL(p).pathname.split("/");return{id:F[3],version:F[4]}}function zd({pluginId:p,version:N,source:F}){const G=`${We.config.pluginsCDNBaseURL}/${p}/${N}`;let J=F;return J=F.replace(/(\/?)(public\/plugins)/g,`${G}/$2`),J=J.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${G}/public/$2$3`),J=J.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${G}/public/plugins/${p}/$2.map`),J}function xm(p){const N=p.split(`/public/${Vd}/`);return`${We.config.pluginsCDNBaseURL}/${N[1]}`}function _d(p){const N=new URL(window.location.href),F=new URL(p);return N.host===F.host}async function og(p,N,F){let G="";if(_d(p))G=await(await fetch(p)).text(),G=Mm(N,G);else if(p.includes(Vd)){G=await(await fetch(p)).text();const se=xm(`/public/${N.module}`)+".js",{version:me}=Sm(se);G=zd({pluginId:N.id,version:me,source:G})}if(G.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");F.evaluate(G)}async function ig(p){if(p.module.includes(`${Vd}/`)){const N=xm(`/public/${p.module}`)+".js";let G=await(await fetch(N)).text();const{version:J}=Sm(N);return G=zd({pluginId:p.id,version:J,source:G}),G}else{let F=await(await fetch("public/"+p.module+".js")).text();return F=Mm(p,F),F}}function Mm(p,N){if(N.includes("//# sourceMappingURL=module.js.map")){let F="";(!N.includes("//# sourceURL")||!N.includes("//@ sourceUrl"))&&(F+=`//# sourceURL=module.js
`);const G=`/public/${p.module}.js.map`;return F+=`//# sourceMappingURL=${G}`,N.replace("//# sourceMappingURL=module.js.map",F)}return N}const zo=["iframe"];var Tm=e(91106);const uf=!!We.config.featureToggles.frontendSandboxMonitorOnly;function mf(p){return!!p&&typeof p=="object"&&p?.hasOwnProperty("plugin")}function tp(p){throw new Error(`Unexpected object: ${p}. This should never happen.`)}function ir(p){return p instanceof A.Component}function uo(p,N){N={...N,source:"sandbox",monitorOnly:String(uf)},(0,Tm.KE)(p,N)}function Om(p,N){N={...N,source:"sandbox",monitorOnly:String(uf)},(0,Tm.H)(p,N)}const to=new Map,mo=!!We.config.featureToggles.frontendSandboxMonitorOnly;function lg(){return to.size===0&&(cg(to),ff(to),dg(to),gg(to),fg(to),ug(to),mg(to),np(to),ap(to)),to}function kd(p,N){return uo(`Plugin ${N.id} tried to set a sandboxed property`,{pluginId:N.id,attrOrMethod:String(p),entity:"window"}),mo?p:()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function cg(p){const N=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const G of N){const J=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,G);if(J){let se=function(me,be){const Ae=be.id;return uo(`Plugin ${Ae} tried to access iframe.${G}`,{pluginId:Ae,attrOrMethod:G,entity:"iframe"}),mo?me:()=>{throw new Error("iframe."+G+" is not allowed in sandboxed plugins")}};var F=se;J.value&&p.set(J.value,se),J.set&&p.set(J.set,se),J.get&&p.set(J.get,se)}}}function ff(p){const N=Object.getOwnPropertyDescriptor(window,"console");if(N?.value){let G=function(J,se){const me=se.id;if(mo)return J;function be(...Ae){console.log(`[plugin ${me}]`,...Ae)}return{log:be,warn:be,error:be,info:be,debug:be,table:be}};var F=G;p.set(N.value,G)}N?.set&&p.set(N.set,kd)}function dg(p){function N(G,J){const se=J.id;return uo(`Plugin ${se} accessed window.alert`,{pluginId:se,attrOrMethod:"alert",entity:"window"}),mo?G:function(...me){console.log(`[plugin ${se}]`,...me)}}const F=Object.getOwnPropertyDescriptor(window,"alert");F?.value&&p.set(F.value,N),F?.set&&p.set(F.set,kd)}function ug(p){function N(G,J){const se=J.id;return function(...be){for(const Ae of be){const Ke=Ae?.toLowerCase()||"";for(const Ye of zo)if(Ke.includes("<"+Ye)){if(uo(`Plugin ${se} tried to set ${Ye} in innerHTML`,{pluginId:se,attrOrMethod:"innerHTML",param:Ye,entity:"HTMLElement"}),mo)continue;throw new Error("<"+Ye+"> is not allowed in sandboxed plugins")}}(0,w.isFunction)(G)&&G.apply(this,be)}}const F=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const G of F)G?.set&&p.set(G.set,N),G?.value&&p.set(G.value,N)}function mg(p){function N(G,J){const se=J.id;return function(be,Ae){if(be&&zo.includes(be)&&(uo(`Plugin ${se} tried to create ${be}`,{pluginId:se,attrOrMethod:"createElement",param:be,entity:"document"}),!mo))return document.createDocumentFragment();if((0,w.isFunction)(G))return G.apply(this,[be,Ae])}}const F=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");F?.value&&p.set(F.value,N)}function fg(p){function N(se,me){const be=me.id;return function(Ke,Ye){const Ze=Ke?.nodeName?.toLowerCase()||"";if(Ke&&zo.includes(Ze)&&(uo(`Plugin ${be} tried to insert ${Ze}`,{pluginId:be,attrOrMethod:"insertChild",param:Ze,entity:"HTMLElement"}),!mo))return document.createDocumentFragment();if((0,w.isFunction)(se))return se.call(this,Ke,Ye)}}function F(se,me){const be=me.id;return function(Ke,Ye){const Ze=Ye?.nodeName?.toLowerCase()||"";if(Ye&&zo.includes(Ze)&&(uo(`Plugin ${be} tried to insert ${Ze}`,{pluginId:be,attrOrMethod:"insertAdjacentElement",param:Ze,entity:"HTMLElement"}),!mo))return document.createDocumentFragment();if((0,w.isFunction)(se))return se.call(this,Ke,Ye)}}const G=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const se of G)se?.value&&p.set(se.set,N);const J=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");J?.value&&p.set(J.set,F)}function gg(p){function N(se,me){const be=me.id;return function(...Ke){let Ye=Ke;const Ze=Ke?.filter(ot=>!zo.includes(ot.nodeName.toLowerCase()));mo||(Ye=Ze),Ye.length!==Ze.length&&uo(`Plugin ${be} tried to append fobiddenElements`,{pluginId:be,attrOrMethod:"append",param:Ke?.filter(ot=>zo.includes(ot.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,w.isFunction)(se)&&se.apply(this,Ye)}}function F(se,me,be){const Ae=me.id;return function(Ye){const Ze=Ye?.nodeName?.toLowerCase()||"";if(Ye&&zo.includes(Ze)&&(uo(`Plugin ${Ae} tried to append ${Ze}`,{pluginId:Ae,attrOrMethod:"appendChild",param:Ze,entity:"HTMLElement"}),!mo))return document.createDocumentFragment();if(be&&Ye&&Ze==="script"&&Ye instanceof HTMLScriptElement){og(Ye.src,me,be).then(()=>{Ye.onload?.call(Ye,new Event("load"))}).catch(ot=>{Ye.onerror?.call(Ye,new ErrorEvent("error",{error:ot}))});return}if((0,w.isFunction)(se))return se.call(this,Ye)}}const G=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const se of G)se?.value&&p.set(se.value,N);const J=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");J?.value&&p.set(J.value,F)}function np(p){const N=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function F(G){return function(...se){try{const me=(0,w.cloneDeep)(se);(0,w.isFunction)(G)&&G.apply(this,me)}catch{throw new Error("postMessage arguments are invalid objects")}}}N?.value&&p.set(N.value,F)}function ap(p){const N=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");N?.get&&p.set(N.get,()=>()=>window);const F=["write"];for(const G of F){const J=Object.getOwnPropertyDescriptor(Document.prototype,G);J?.set&&p.set(J.set,kd),J?.value&&p.set(J.value,kd)}}var gf=e(99723);const ql=Symbol.for("@@SANDBOX_LIVE_VALUE"),pf=!!We.config.featureToggles.frontendSandboxMonitorOnly;function pg(p,N){const F=Reflect.get(p,"nodeName");if(F==="body"||p===document.body)return document.body;if(F==="head"||p===document.head||p===document.documentElement)return p;if(zo.includes(F)&&(uo("<"+F+"> is not allowed in sandboxed plugins",{pluginId:N,param:F}),!pf))throw new Error("<"+F+"> is not allowed in sandboxed plugins");if(Eg(p,N)||p.parentNode===document.body||p.closest("#reactRoot")===null||pf)return p;{const G=document.createElement(F);return G.dataset.grafanaPluginSandboxElement="true",G}}function hf(p){if(typeof p=="object"&&p instanceof Element)try{return p.nodeName!==void 0}catch{return!1}return!1}function hg(p){const N=Reflect.get(p,"style");Object.hasOwn(N,ql)||Reflect.defineProperty(N,ql,{})}function vg(p){p&&!Object.hasOwn(p,ql)&&(0,gf.qD)(p)&&!(p instanceof Function)&&(ir(p)||p instanceof pe.MF)&&Reflect.defineProperty(p,ql,{})}function vf(p){return Object.hasOwn(p,ql)}function Eg(p,N){return!document.contains(p)||p.closest(`[data-plugin-sandbox=${N}]`)!==null}let Ur;function sp(){return Ur||(Ur=document.createElement("div"),Ur.setAttribute("id","grafana-plugin-sandbox-body"),Ur.setAttribute("data-plugin-sandbox","true"),Ur.dataset.pluginSandbox="sandboxed-plugin",Ur.style.width="100%",Ur.style.height="0%",Ur.style.overflow="hidden",Ur.style.top="0",Ur.style.left="0",document.body.appendChild(Ur)),Ur}var yg=e(9232);async function rp(p,N){if(!mf(p))return p;const F=await Promise.resolve(p.plugin);if(Reflect.has(F,"panel")&&Reflect.set(F,"panel",Hd(Reflect.get(F,"panel"),N)),Reflect.has(F,"components")){const G=Reflect.get(F,"components");Object.entries(G).forEach(([J,se])=>{Reflect.set(G,J,Hd(se,N))}),Reflect.set(F,"components",G)}if(Reflect.has(F,"root")&&Reflect.set(F,"root",Hd(Reflect.get(F,"root"),N)),Reflect.has(F,"extensionConfigs")){const G=Reflect.get(F,"extensionConfigs");for(const J of G)Reflect.has(J,"component")&&Reflect.set(J,"component",Hd(Reflect.get(J,"component"),N));Reflect.set(F,"extensionConfigs",G)}if(Reflect.has(F,"configPages")){const G=Reflect.get(F,"configPages");for(const[J,se]of Object.entries(G))!se.body||!(0,w.isFunction)(se.body)||Reflect.set(G,J,{...se,body:Hd(se.body,N)});Reflect.set(F,"configPages",G)}return p}const Hd=(p,N)=>{const F=A.memo(G=>A.createElement("div",{"data-plugin-sandbox":N.id,style:{height:N.type===yg.zV.app?"100%":"auto"}},A.createElement(p,{...G})));return F.displayName=`GrafanaSandbox(${p.displayName||p.name||"Component"})`,F},Im=new Map;async function bg({pluginId:p}){try{const N=await(0,rg.a)(p);return Im.has(p)||Im.set(p,Pg(N)),Im.get(p)}catch(N){const F=new Error(`Could not import plugin ${p} inside sandbox: `+N);throw Om(F,{pluginId:p,error:String(N)}),F}}async function Pg(p){return new Promise(async(N,F)=>{const G=lg();let J;function se(be){if(hf(be)){const Ke=pg(be,p.id);return hg(Ke),Ke}else vg(be);const Ae=G.get(be);return Ae?Ae(be,p,J):be}J=(0,sg.Z)(window,{distortionCallback:se,liveTargetCallback:vf,endowments:Object.getOwnPropertyDescriptors({async define(be,Ae,Ke){let Ye,Ze;Array.isArray(be)?(Ye=be,Ze=Ae):(Ye=Ae,Ze=Ke);try{const ot=Dg(Ye),rt=Ze.apply(null,ot),gt=await rp(rt,p);N(gt)}catch(ot){const rt=new Error(`Could not execute plugin's define ${p.id}: `+ot);Om(rt,{pluginId:p.id,error:String(ot)}),F(rt)}}}),instrumentation:{startActivity(){return{stop:()=>{},error:Cg(p.id)}},log:()=>{},error:()=>{}}});let me="";try{me=await ig(p)}catch(be){throw new Error(`Could not load plugin ${p.id}: `+be)}try{J.evaluate(me)}catch(be){const Ae=new Error(`Could not run plugin ${p.id} inside sandbox: `+be);Om(Ae,{pluginId:p.id,error:String(be)}),F(Ae)}})}function Cg(p){return async function(F){if(!F)return;F.sandboxError=!0;const G=new Error(F.message.toString());G.name=F.name.toString(),G.stack=F.stack||"",console.log(`[sandbox] Error from plugin ${p}`),console.error(G)}}function Dg(p){const N=[];for(const F of p){const G=df.get(F);if(!G)throw new Error(`[sandbox] Could not resolve dependency ${F}`);N.push(G)}return N}function Rm(p){const{address:N}=p;return xm(N)}function Am(p){const{id:N,version:F}=Sm(p.name);return zd({pluginId:N,version:F,source:p.source})}function Ef(p){return p.metadata.loader==="cdn-loader"&&p.address.startsWith(`${location.origin}/public/plugin-cdn`)&&(p.address=p.address.replace(`${location.origin}/public/plugin-cdn`,We.config.pluginsCDNBaseURL)),p.address}function Sg(p){const N=document.getElementsByTagName("link");return Array.from(N).map(G=>G.href).includes(p.address)?"":Mg(p.address)}const xg="?_cache="+Date.now(),yf=100;function Mg(p){return new Promise(function(N,F){const G=setTimeout(function(){F("Unable to load CSS")},yf*1e3),J=function(me){clearTimeout(G),se.onload=se.onerror=w.noop,setTimeout(function(){me?F(me):N("")},7)},se=document.createElement("link");se.type="text/css",se.rel="stylesheet",se.href=p,se.href.startsWith(We.config.pluginsCDNBaseURL)||(se.href=se.href+xg),se.onload=function(){J()},se.onerror=function(me){J(me instanceof ErrorEvent?me.message:new Error("Error loading CSS file."))},document.head.appendChild(se)})}var bf=e(43799),Tg=e(89377),op=e(4027),ip=e(59554),fp=e(65103),lp=e(85095),cp=e(28844),dp=e(26189),wr=e(47825),up=e(7540);const ec=de;ec.PanelPlugin=ne.c,ec.DataSourcePlugin=pe.hf,ec.AppPlugin=re.k8,ec.DataSourceApi=pe.MF,ye.i3.registry.set("css",ye.i3.newModule({locate:Ef,fetch:Sg})),ye.i3.registry.set("plugin-loader",ye.i3.newModule({locate:bf.hf})),ye.i3.registry.set("cdn-loader",ye.i3.newModule({locate:Rm,translate:Am})),ye.i3.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"},"plugin-cdn":{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"},"*.css":{loader:"css"},[`${Vd}/*`]:{esModule:!0,authorization:!1,loader:"cdn-loader"}}});function rs(p,N){ye.i3.registerDynamic(p,[],!0,(F,G,J)=>{J.exports=N}),df.set(p,N)}rs("@grafana/data",ie),rs("@grafana/ui",ec),rs("@grafana/runtime",Ce),rs("lodash",K()),rs("moment",W()),rs("jquery",V()),rs("d3",U),rs("rxjs",oe),rs("rxjs/operators",Z),rs("react-router",X),rs("react-router-dom",Q),rs("prismjs",k()),rs("slate",le.ZP),rs("slate-react",q.ZP),rs("@grafana/slate-react",q.ZP),rs("slate-plain-serializer",ce.Z),rs("react",A),rs("react-dom",z),rs("react-redux",H),rs("redux",te),rs("emotion",O),rs("@emotion/css",O),rs("@emotion/react",T),rs("app/features/dashboard/impression_store",{impressions:$e.Z,__esModule:!0}),rs("app/core/services/backend_srv",{BackendSrv:Ue.y$,getBackendSrv:Ue.i}),rs("app/core/utils/datemath",Se),rs("app/core/utils/flatten",tt),rs("app/core/utils/kbn",lt.Z),rs("app/core/utils/ticks",Me),rs("app/core/config",_e.default),rs("app/core/time_series",Qe.Z),rs("app/core/time_series2",Qe.Z),rs("app/core/table_model",we.Z),rs("app/core/app_events",Je.h$),rs("app/core/core",{appEvents:Je.h$,contextSrv:Je.contextSrv,__esModule:!0});const Og=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const p of Og)rs(p,{fakeDep:1});async function Lm({path:p,version:N,isAngular:F,pluginId:G}){N&&(0,bf.Vf)({path:p,version:N});const J=ag[p];return J?typeof J=="function"?await J():J:Ig({isAngular:F,pluginId:G})?bg({pluginId:G}):ye.i3.import(p)}function Ig({isAngular:p,pluginId:N}){const F=location.search.includes("nosandbox")&&_e.default.buildInfo.env==="development",G=_e.default.disableFrontendSandboxForPlugins.includes(N);return!p&&!!_e.default.featureToggles.pluginsFrontendSandbox&&!0&&!G&&!F}function Rg(p){return Lm({path:p.module,version:p.info?.version,isAngular:p.angularDetected,pluginId:p.id}).then(N=>{if(N.plugin){const F=N.plugin;return F.meta=p,F}if(N.Datasource){const F=new pe.hf(N.Datasource);return F.setComponentsFromLegacyExports(N),F.meta=p,F}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function Ag(p){return Lm({path:p.module,version:p.info?.version,isAngular:p.angularDetected,pluginId:p.id}).then(N=>{const F=N.plugin?N.plugin:new re.k8;return F.init(p),F.meta=p,F.setComponentsFromLegacyExports(N),F})}},43799:(j,I,e)=>{"use strict";e.d(I,{Hl:()=>r,Vf:()=>s,hf:()=>m});var t=e(67821);const n={},i=Date.now();function s({path:o,version:l}){n[o]||(n[o]=encodeURI(l))}function r(o){const l=`plugins/${o}/module`;n[l]&&delete n[l],(0,t.Z)(o)}function m(o,l=i){const{address:a}=o,g=d(a);if(!g)return`${a}?_cache=${l}`;const h=n[g]||l;return`${a}?_cache=${h}`}function d(o){const l=/\/public\/(plugins\/.+\/module)\.js/i.exec(o);if(!l)return;const[a,g]=l;if(g)return g}},37843:(j,I,e)=>{"use strict";e.d(I,{O:()=>r,d:()=>m});var t=e(9232),n=e(59882),i=e(67821),s=e(8929);async function r(d){const o=await(0,i.a)(d);let l;if(o.type===t.zV.app&&(l=await(0,s.Av)(o)),o.type===t.zV.datasource&&(l=await(0,s.nL)(o)),o.type===t.zV.panel&&(l=await(0,n._2)(o)),o.type===t.zV.renderer&&(l={meta:o}),!l)throw new Error("Unknown Plugin type: "+o.type);return l}function m(d,o,l){let a={...d},g;function c(h,f){return!f.startsWith(h.url??"")||g&&(g.url?.length??0)>(h.url?.length??0)?h:(g&&(g.active=!1),g={...h,active:!0},g)}return a.children=(a?.children??[]).map(h=>{if(h.children){const f=h.children.map(b=>c(b,l));return{...c(h,l),children:f}}return c(h,l)}),{main:a,node:g??a}}},83341:(j,I,e)=>{"use strict";e.d(I,{$S:()=>f,Ns:()=>b,PL:()=>y,Uk:()=>u,YT:()=>g,ZP:()=>R,aw:()=>E,p$:()=>C,qD:()=>v,rf:()=>a,z0:()=>D,zW:()=>c,zc:()=>h});var t=e(34099),n=e(89949),i=e.n(n),s=e(60956),r=e(99633),m=e(12308),d=e(66574);const o={orgId:m.default.bootData.user.orgId,timeZone:m.default.bootData.user.timezone,weekStart:m.default.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},l=(0,t.oM)({name:"user/profile",initialState:o,reducers:{updateTimeZone:(O,T)=>{O.timeZone=T.payload.timeZone},updateWeekStart:(O,T)=>{O.weekStart=T.payload.weekStart},updateFiscalYearStartMonth:(O,T)=>{O.fiscalYearStartMonth=T.payload.fiscalYearStartMonth},setUpdating:(O,T)=>{O.isUpdating=T.payload.updating},userLoaded:(O,T)=>{O.user=T.payload.user},initLoadTeams:(O,T)=>{O.teamsAreLoading=!0},teamsLoaded:(O,T)=>{O.teams=T.payload.teams,O.teamsAreLoading=!1},initLoadOrgs:(O,T)=>{O.orgsAreLoading=!0},orgsLoaded:(O,T)=>{O.orgs=T.payload.orgs,O.orgsAreLoading=!1},initLoadSessions:(O,T)=>{O.sessionsAreLoading=!0},sessionsLoaded:(O,T)=>{const U=T.payload.sessions.sort((L,V)=>Number(V.isActive)-Number(L.isActive));O.sessions=U.map(L=>({id:L.id,isActive:L.isActive,seenAt:(0,s.E8)(L.seenAt),createdAt:L.createdAt,clientIp:L.clientIp,browser:L.browser,browserVersion:L.browserVersion,os:L.os,osVersion:L.osVersion,device:L.device})),O.sessionsAreLoading=!1},userSessionRevoked:(O,T)=>{O.sessions=O.sessions.filter(U=>U.id!==T.payload.tokenId),O.isUpdating=!1}}}),a=O=>async T=>{(0,n.set)(d.contextSrv,"user.fiscalYearStartMonth",O),T(x({fiscalYearStartMonth:O}))},g=O=>async T=>{(!(0,n.isString)(O)||(0,n.isEmpty)(O))&&(O=m.default?.bootData?.user?.timezone),(0,n.set)(d.contextSrv,"user.timezone",O),T(P({timeZone:O}))},c=O=>async T=>{(!(0,n.isString)(O)||(0,n.isEmpty)(O))&&(O=m.default?.bootData?.user?.weekStart),(0,n.set)(d.contextSrv,"user.weekStart",O),T(S({weekStart:O})),(0,r.Ls)(O)},{setUpdating:h,initLoadOrgs:f,orgsLoaded:b,initLoadTeams:v,teamsLoaded:y,userLoaded:E,userSessionRevoked:C,initLoadSessions:u,sessionsLoaded:D,updateTimeZone:P,updateWeekStart:S,updateFiscalYearStartMonth:x}=l.actions,M=l.reducer,R={user:l.reducer}},6327:(j,I,e)=>{"use strict";e.d(I,{Z:()=>t,i:()=>n});const t=i=>i.timeZone,n=i=>i.fiscalYearStartMonth},31058:(j,I,e)=>{"use strict";e.d(I,{S:()=>n,f:()=>i});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(r){this.extraRenderActions=this.extraRenderActions.concat(r)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,i=new t},47802:(j,I,e)=>{"use strict";e.d(I,{x:()=>_,t:()=>A});var t=e(89898),n=e.n(t),i=e(89949),s=e(6772),r=e.n(s),m=e(27702),d=e(62247),o=e(61576),l=e(62435),a=e(53933),g=e(32053),c=e(3935),h=e(74639),f=e(10864),b=e(9772),v=e(25357),y=e(64022),E=e(37647),C=e(43567),u=e(984),D=e(10186),P=e(26858),S=e(89167),x=e(31058),M=e(42844),R=e(66310),O=e(73453),T=e(1128),U=e(59904),L=e(53229);const V=z=>{const{query:H,queries:Q,onChange:X,collapsedText:te,renderExtras:oe,disabled:Z}=z,le=(0,R.wW)(K),[ce,q]=(0,m.useState)(!1),[ne,pe]=(0,m.useState)(null),re=we=>{q(!0)},ie=we=>{if(q(!1),ne){pe(null);return}H.refId!==we&&X({...H,refId:we})},Se=we=>{const _e=we.currentTarget.value.trim();if(_e.length===0){pe("An empty query name is not allowed");return}for(const Je of Q)if(Je!==H&&_e===Je.refId){pe("Query name already exists");return}ne&&pe(null)},ye=we=>{ie(we.currentTarget.value.trim())},Ce=we=>{we.key==="Enter"&&ie(we.target.value)},de=we=>{we.target.select()};return m.createElement(m.Fragment,null,m.createElement("div",{className:le.wrapper},!ce&&m.createElement("button",{className:le.queryNameWrapper,"aria-label":h.wl.components.QueryEditorRow.title(H.refId),title:"Edit query name",onClick:re,"data-testid":"query-name-div",type:"button"},m.createElement("span",{className:le.queryName},H.refId),m.createElement(O.J,{name:"pen",className:le.queryEditIcon,size:"sm"})),ce&&m.createElement(m.Fragment,null,m.createElement(T.I,{type:"text",defaultValue:H.refId,onBlur:ye,autoFocus:!0,onKeyDown:Ce,onFocus:de,invalid:ne!==null,onChange:Se,className:le.queryNameInput,"data-testid":"query-name-input"}),ne&&m.createElement(U.S,{horizontal:!0},ne)),w(z,le),oe&&m.createElement("div",{className:le.itemWrapper},oe()),Z&&m.createElement("em",{className:le.contextInfo},"Disabled")),te&&m.createElement("div",{className:le.collapsedText},te))},w=(z,H)=>{const{alerting:Q,dataSource:X,onChangeDataSource:te}=z;return te?m.createElement("div",{className:H.itemWrapper},m.createElement(L.q,{variables:!0,alerting:Q,current:X.name,onChange:te})):m.createElement("em",{className:H.contextInfo},"(",X.name,")")},K=z=>({wrapper:(0,M.css)`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${z.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:(0,M.css)`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${z.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${z.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${z.colors.action.hover};
        border: 1px dashed ${z.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${z.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:(0,M.css)`
      font-weight: ${z.typography.fontWeightMedium};
      color: ${z.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${z.spacing(.5)};
    `,queryEditIcon:(0,M.cx)((0,M.css)`
        margin-left: ${z.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:(0,M.css)`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:(0,M.css)`
      font-weight: ${z.typography.fontWeightRegular};
      font-size: ${z.typography.bodySmall.fontSize};
      color: ${z.colors.text.secondary};
      padding-left: ${z.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:(0,M.css)`
      font-size: ${z.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${z.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:(0,M.css)`
      display: flex;
      margin-left: 4px;
    `});function B({error:z}){const H=(0,R.wW)(W),Q=z?.message??z?.data?.message??"Query error";return m.createElement("div",{className:H.wrapper},m.createElement("div",{className:H.icon},m.createElement(O.J,{name:"exclamation-triangle"})),m.createElement("div",{className:H.message},Q,z.traceId!=null&&m.createElement(m.Fragment,null,m.createElement("br",null)," ",m.createElement("span",null,"(Trace ID: ",z.traceId,")"))))}const W=z=>({wrapper:(0,M.css)({marginTop:z.spacing(.5),background:z.colors.background.secondary,display:"flex"}),icon:(0,M.css)({background:z.colors.error.main,color:z.colors.error.contrastText,padding:z.spacing(1)}),message:(0,M.css)({fontSize:z.typography.bodySmall.fontSize,fontFamily:z.typography.fontFamilyMonospace,padding:z.spacing(1)})});class _ extends m.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,f.F)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const H=(0,b.w)(),Q='<plugin-component type="query-ctrl" />',X={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=H.load(this.element,X,Q),this.angularScope=X.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:H,onChange:Q,queries:X,onRunQuery:te,onAddQuery:oe,app:Z=d.zj.PanelEditor,history:le}=this.props,{datasource:ce,data:q}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(ce?.components?.QueryCtrl)return m.createElement("div",{ref:ne=>this.element=ne});if(ce){let ne=this.getReactQueryEditor(ce);if(ne)return m.createElement(o.n,{instanceSettings:this.props.dataSource},m.createElement(ne,{key:ce?.name,query:H,datasource:ce,onChange:Q,onRunQuery:te,onAddQuery:oe,data:q,range:(0,P.$t)().timeRange(),queries:X,app:Z,history:le}))}return m.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(H,Q)=>{H.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),Q.isOpen||Q.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:H,query:Q,onQueryRemoved:X}=this.props;H(Q),X&&X()},this.onCopyQuery=()=>{const{query:H,onAddQuery:Q,onQueryCopied:X}=this.props,te=(0,i.cloneDeep)(H);Q(te),X&&X()},this.onDisableQuery=()=>{const{query:H,onChange:Q,onRunQuery:X,onQueryToggled:te}=this.props;Q({...H,hide:!H.hide}),X(),te&&te(H.hide)},this.onToggleHelp=()=>{this.setState(H=>({showingHelp:!H.showingHelp}))},this.onClickExample=H=>{H.datasource===void 0&&(H.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...H,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:H,query:Q}=this.props,te=(A(H,Q.refId)?.series??[]).reduce((ce,q)=>{if(!q.meta?.notices)return ce;const ne=(0,i.filter)(q.meta.notices,{severity:"warning"})??[];return ce.concat(ne)},[]),oe=(0,i.uniqBy)(te,"text");if(!(oe.length>0))return null;const le=oe.map(ce=>ce.text).join(`
`);return m.createElement(v.C,{color:"orange",icon:"exclamation-triangle",text:m.createElement(m.Fragment,null,oe.length," ",r()("warning",oe.length)),tooltip:le})},this.renderExtraActions=()=>{const{query:H,queries:Q,data:X,onAddQuery:te,dataSource:oe}=this.props,Z=x.f.getAllExtraRenderAction().map((le,ce)=>le({query:H,queries:Q,timeRange:X.timeRange,onAddQuery:te,dataSource:oe,key:ce})).filter(Boolean);return Z.push(this.renderWarnings()),Z},this.renderActions=H=>{const{query:Q,hideDisableQuery:X=!1}=this.props,{hasTextEditMode:te,datasource:oe,showingHelp:Z}=this.state,le=!!Q.hide,ce=oe?.components?.QueryEditorHelp;return m.createElement(y.Lh,{width:"auto"},ce&&m.createElement(u.V,{title:"Show data source help",icon:"question-circle",onClick:this.onToggleHelp,active:Z}),te&&m.createElement(u.y,{title:"Toggle text edit mode",icon:"pen",onClick:q=>{this.onToggleEditMode(q,H)}}),this.renderExtraActions(),m.createElement(u.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),X?null:m.createElement(u.V,{title:"Disable query",icon:le?"eye-slash":"eye",active:le,onClick:this.onDisableQuery}),m.createElement(u.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=H=>{const{alerting:Q,query:X,dataSource:te,onChangeDataSource:oe,onChange:Z,queries:le,renderHeaderExtras:ce}=this.props;return m.createElement(V,{query:X,queries:le,onChangeDataSource:oe,dataSource:te,disabled:X.hide,onClick:q=>this.onToggleEditMode(q,H),onChange:Z,collapsedText:H.isOpen?null:this.renderCollapsedText(),renderExtras:ce,alerting:Q})}}componentDidMount(){const{data:H,query:Q,id:X}=this.props,te=A(H,Q.refId);this.id=(0,i.uniqueId)(X+"_"),this.setState({data:te}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:H,queries:Q}=this.props,{datasource:X}=this.state,te=new S.rY({targets:Q}),oe={},Z=this;return{datasource:X,target:H,panel:te,dashboard:oe,refresh:()=>{H.hide!==Z.props.query.hide&&(H.hide=Z.props.query.hide),this.props.onChange(H),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new l.F,range:(0,P.$t)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const H=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return H?.rawRef?.uid??H?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let H;const Q=this.getInterpolatedDataSourceUID();try{H=await this.dataSourceSrv.get(Q)}catch{H=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(H),this.setState({datasource:H,queriedDataSourceIdentifier:Q,hasTextEditMode:(0,i.has)(H,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(H){const{datasource:Q,queriedDataSourceIdentifier:X}=this.state,{data:te,query:oe}=this.props;if(H.id!==this.props.id&&(this.id=(0,i.uniqueId)(this.props.id+"_")),te!==H.data){const Z=A(te,oe.refId);this.setState({data:Z}),this.angularScope&&(this.angularScope.range=(0,P.$t)().timeRange()),this.angularQueryEditor&&Z&&k(this.angularScope,Z,this.angularQueryEditor)}if(Q&&X!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(H){if(H)switch(this.props.app){case d.zj.Explore:return H.components?.ExploreMetricsQueryField||H.components?.ExploreLogsQueryField||H.components?.ExploreQueryField||H.components?.QueryEditor;case d.zj.PanelEditor:case d.zj.Dashboard:default:return H.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:H}=this.state;return H?.getQueryDisplayText?H.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:H,index:Q,visualization:X,collapsable:te}=this.props,{datasource:oe,showingHelp:Z,data:le}=this.state,ce=H.hide,q=n()("query-editor-row",{"query-editor-row--disabled":ce,"gf-form-disabled":ce});if(!oe)return null;const ne=this.renderPluginEditor(),pe=oe.components?.QueryEditorHelp;return m.createElement("div",{"data-testid":"query-editor-row","aria-label":h.wl.components.QueryEditorRows.rows},m.createElement(D.t,{id:this.id,draggable:!0,collapsable:te,index:Q,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},m.createElement("div",{className:q,id:this.id},m.createElement(E.z4,null,Z&&pe&&m.createElement(C.h,null,m.createElement(pe,{onClickExample:re=>this.onClickExample(re),query:this.props.query,datasource:oe})),ne),le?.error&&le.error.refId===H.refId&&m.createElement(B,{error:le.error}),X)))}}function k(z,H,Q){if(H.state===a.Gu.Done){const X=H.series.map(te=>(0,g.Zr)(te));z.events.emit(c.Kh.dataReceived,X)}else H.state===a.Gu.Error&&z.events.emit(c.Kh.dataError,H.error);setTimeout(Q.digest)}function A(z,H){const Q=z.series.filter(Z=>Z.refId===H);if(z.state!==a.Gu.Loading&&(z.error||z.errors?.length)&&!z.series.length)return{...z,state:a.Gu.Error};let X=z.state,te=z.errors?.find(Z=>Z.refId===H);!te&&z.error&&(te=z.error.refId===H?z.error:void 0),X!==a.Gu.Loading&&(te?X=a.Gu.Error:z.state===a.Gu.Error&&(X=a.Gu.Done));const oe=z.timeRange;return{...z,state:X,series:Q,error:te,errors:te?[te]:void 0,timeRange:oe}}},77972:(j,I,e)=>{"use strict";e.d(I,{Tl:()=>pe,kt:()=>ce});var t=e(37497),n=e(69966),i=e(19973),s=e(6857),r=e(80852),m=e(39343),d=e(24321),o=e(29655),l=e(60115),a=e(90581),g=e(32900),c=e(58885),h=e(32713),f=e(12308),b=e(89949);function v(re){let ie=[];const Se=(0,b.partition)(re,"id"),ye=(0,b.groupBy)(Se[0],"id");return ie=(0,b.map)(ye,Ce=>Ce.length>1&&!(0,b.every)(Ce,y)?(0,b.find)(Ce,de=>de.eventType!=="panel-alert"):(0,b.head)(Ce)),ie=(0,b.concat)(ie,Se[1]),ie}function y(re){return re.eventType==="panel-alert"}var E=e(26858),C=e(91053),u=e(56469),D=e(73289),P=e(59177);class S{canWork({dashboard:ie,range:Se}){return!(!ie.id||Se.raw.to!=="now"||!ie.panels.find(ye=>!!ye.alert))}work(ie){if(!this.canWork(ie))return(0,P.H_)();const{dashboard:Se}=ie;return(0,C.D)((0,D.i)().get("/api/alerts/states-for-dashboard",{dashboardId:Se.id},`dashboard-query-runner-alert-states-${Se.id}`)).pipe((0,m.U)(ye=>({alertStates:ye,annotations:[]})),(0,u.K)(P.Rc))}}var x=e(45383),M=e(22479),R=e(56361),O=e(10864),T=e(43620),U=e(71183),L=e(92877);class V{canRun(ie){return ie?!!(!ie.annotationQuery||ie.annotations):!1}run({annotation:ie,datasource:Se,dashboard:ye,range:Ce}){if(!this.canRun(Se))return(0,x.of)([]);const de={};return(0,L.r)({dashboard:ye,range:Ce,panel:de},Se,ie).pipe((0,m.U)(we=>we.events??[]),(0,u.K)(P.h1))}}var w=e(97463);class K{canRun(ie){return ie?(0,w.yr)(ie)?!0:!!(ie.annotationQuery&&!ie.annotations):!1}run({annotation:ie,datasource:Se,dashboard:ye,range:Ce}){return this.canRun(Se)?(0,C.D)(Se.annotationQuery({range:Ce,rangeRaw:Ce.raw,annotation:ie,dashboard:ye})).pipe((0,u.K)(P.h1)):(0,x.of)([])}}class B{constructor(ie=[new K,new V]){this.runners=ie}canWork({dashboard:ie}){return!!ie.annotations.list.find(B.getAnnotationsToProcessFilter)}work(ie){if(!this.canWork(ie))return(0,P.H_)();const{dashboard:Se,range:ye}=ie;let Ce=Se.annotations.list.filter(B.getAnnotationsToProcessFilter);Se.meta.publicDashboardAccessToken&&Ce.length>0&&(Ce=[Ce[0]]);const de=Ce.map(we=>{let _e;if((0,f.iE)().isPublicDashboardView){const Je=new U.lh(U.Qi);_e=(0,x.of)(Je).pipe((0,u.K)(P.hs))}else _e=(0,C.D)((0,O.F)().get(we.datasource)).pipe((0,u.K)(P.hs));return _e.pipe((0,M.z)(Je=>{const Ue=this.runners.find($e=>$e.canRun(Je));return Ue?(Se.events.publish(new T.z(we)),Ue.run({annotation:we,datasource:Je,dashboard:Se,range:ye}).pipe((0,d.R)(ce().cancellations().pipe((0,R.h)($e=>$e===we))),(0,m.U)($e=>(Se.snapshot&&(we.snapshotData=(0,b.cloneDeep)($e)),Se.meta.publicDashboardAccessToken?$e:(0,P.pG)(we,$e))),(0,a.x)(()=>{Se.events.publish(new T.RB(we))}))):(0,x.of)([])}))});return(0,s.T)(de).pipe((0,o.J)(),(0,l.u)((we,_e)=>we.concat(_e)),(0,m.U)(we=>({annotations:we,alertStates:[]})))}static getAnnotationsToProcessFilter(ie){return ie.enable&&!ie.snapshotData}}var W=e(75049),_=e(41999),k=e(91368),A=e(33555),z=e(22446),H=e(18771),Q=e(18447);class X{constructor(){this.hasAlertRules={}}canWork({dashboard:ie,range:Se}){return!(!ie.uid||ie.meta.publicDashboardAccessToken||Se.raw.to!=="now"||this.hasAlertRules[ie.uid]===!1||!(k.contextSrv.hasPermission(H.AccessControlAction.AlertingRuleRead)&&k.contextSrv.hasPermission(H.AccessControlAction.AlertingRuleExternalRead)))}work(ie){if(!this.canWork(ie))return(0,P.H_)();const{dashboard:Se}=ie;return(0,C.D)((0,D.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:Se.uid},`dashboard-query-runner-unified-alert-states-${Se.id}`)).pipe((0,m.U)(ye=>{if(ye.status==="success"){this.hasAlertRules[Se.uid]=!1;const Ce={};return ye.data.groups.forEach(de=>de.rules.forEach(we=>{if((0,z.x_)(we)&&we.annotations&&we.annotations[A.q6.panelID]){this.hasAlertRules[Se.uid]=!0;const _e=Number(we.annotations[A.q6.panelID]),Je=te(we.state);Ce[_e]?Je===_.Z.Alerting&&Ce[_e].state!==_.Z.Alerting?Ce[_e].state=_.Z.Alerting:Je===_.Z.Pending&&Ce[_e].state!==_.Z.Alerting&&Ce[_e].state!==_.Z.Pending&&(Ce[_e].state=_.Z.Pending):Ce[_e]={state:Je,id:Object.keys(Ce).length,panelId:_e,dashboardId:Se.id}}})),{alertStates:Object.values(Ce),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,u.K)(P.Rc))}}function te(re){return re===Q.x_.Firing?_.Z.Alerting:re===Q.x_.Pending?_.Z.Pending:_.Z.OK}class oe{constructor(ie,Se=(0,E.$t)(),ye=[f.config.unifiedAlertingEnabled?new X:new S,new W.g,new B]){this.dashboard=ie,this.timeSrv=Se,this.workers=ye,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe(Ce=>this.executeRun(Ce)),this.eventsSubscription=ie.events.subscribe(h.U5,Ce=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(ie){this.runs.next(ie)}getResult(ie){return this.results.asObservable().pipe((0,m.U)(Se=>{const ye=(0,P.tD)(Se.annotations,ie),Ce=Se.alertStates.find(de=>!!ie&&de.panelId===ie);return{annotations:v(ye),alertState:Ce}}))}executeRun(ie){const ye=this.workers.filter(Je=>Je.canWork(ie)).map(Je=>Je.work(ie)),Ce=new i.w0,de=(0,s.T)(ye).pipe((0,d.R)(this.runs.asObservable()),(0,o.J)(),(0,l.u)((Je,Ue)=>(Je.annotations=Je.annotations.concat(Ue.annotations),Je.alertStates=Je.alertStates.concat(Ue.alertStates),Je)),(0,a.x)(()=>{Ce.unsubscribe()}),(0,g.B)()),we=new i.w0,_e=(0,r.H)(200).pipe((0,c.h)({annotations:[],alertStates:[]}),(0,d.R)(de),(0,a.x)(()=>{we.unsubscribe()}));we.add(_e.subscribe(Je=>{this.results.next(Je)})),Ce.add(de.subscribe(Je=>{this.results.next(Je)}))}cancel(ie){this.cancellationStream.next(ie)}cancellations(){return this.cancellationStream.asObservable().pipe((0,g.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let Z;function le(re){Z&&Z.destroy(),Z=re}function ce(){if(!Z)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return Z}let q;function ne(re){q=re}function pe(re){q||(q=({dashboard:Se,timeSrv:ye,workers:Ce})=>new oe(Se,ye,Ce));const ie=q(re);return le(ie),ie}},75049:(j,I,e)=>{"use strict";e.d(I,{g:()=>i});var t=e(45383),n=e(59177);class i{canWork({dashboard:r}){return r?.annotations?.list?.some(m=>m.enable&&!!m.snapshotData)}work(r){if(!this.canWork(r))return(0,n.H_)();const m=this.getAnnotationsFromSnapshot(r.dashboard);return(0,t.of)({annotations:m,alertStates:[]})}getAnnotationsFromSnapshot(r){return(r?.annotations?.list?.filter(l=>l.enable)).filter(l=>!!l.snapshotData).reduce((l,a)=>l.concat((0,n.pG)(a,a.snapshotData)),[])}getAnnotationsInSnapshot(r,m){const d=this.getAnnotationsFromSnapshot(r);return(0,n.tD)(d,m)}}},59177:(j,I,e)=>{"use strict";e.d(I,{H_:()=>c,Rc:()=>h,em:()=>y,h1:()=>a,hs:()=>g,pG:()=>v,tD:()=>b});var t=e(89949),n=e.n(t),i=e(45383),s=e(27938),r=e(40545),m=e(34667),d=e(84749),o=e(73807),l=e(4021);function a(E){return E.cancelled?(0,i.of)([]):(f("AnnotationQueryRunner failed",E),(0,i.of)([]))}function g(E){return f("Failed to retrieve datasource",E),(0,i.of)(void 0)}const c=()=>(0,i.of)({annotations:[],alertStates:[]});function h(E){return E.cancelled||f("DashboardQueryRunner failed",E),c()}function f(E,C){const u=(0,r.P)(C);console.error("handleAnnotationQueryRunnerError",u);const D=(0,o.t_)(E,u.message);(0,d.WI)((0,l.$l)(D))}function b(E,C){return C==null?E:E.filter(u=>{let D;if(D=u.source,!D)return!0;if(D.filter){const P=(D.filter.ids??[]).includes(C);if(D.filter.exclude){if(P)return!1}else if(!P)return!1}return u.panelId&&u.source.type==="dashboard"?u.panelId===C:!0})}function v(E,C){E.snapshotData&&(E=(0,t.cloneDeep)(E),delete E.snapshotData);for(const u of C)switch(u.source=E,u.color=m.config.theme2.visualization.getColorByName(E.iconColor),u.type=E.name,u.isRegion=!!(u.timeEnd&&u.time!==u.timeEnd),u.newState?.toLowerCase()){case"pending":u.color="yellow";break;case"alerting":u.color="red";break;case"ok":u.color="green";break;case"normal":u.color="green";break;case"no_data":u.color="gray";break;case"nodata":u.color="gray";break}return C}function y(E){if(!E||!E.length)return[];const C=[];for(const u of E){const D=new s.U(u);for(let P=0;P<u.length;P++){const S=(0,t.cloneDeep)(D.get(P));C.push(S)}}return C}},76543:(j,I,e)=>{"use strict";e.d(I,{o:()=>T,t:()=>O});var t=e(89949),n=e(37497),i=e(45383),s=e(22479),r=e(39343),m=e(53933),d=e(32053),o=e(8508),l=e(21708),a=e(64987),g=e(83667),c=e(62247),h=e(76305),f=e(39317),b=e(40545),v=e(42751),y=e(87755),E=e(5926),C=e(36617),u=e(71183),D=e(77972),P=e(10409),S=e(46580);function x(L,V){return(0,P.a)([L,V]).pipe((0,s.z)(w=>{const[K,B]=w;if(B.annotations?.length||B.alertState){K.annotations||(K.annotations=[]);const W=K.annotations.concat(new S.i(B.annotations)),_=B.alertState;return(0,i.of)({...K,annotations:W,alertState:_})}return(0,i.of)(K)}))}var M=e(46809);let R=100;function O(){return"Q"+R++}class T{constructor(V){this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new n.t(1),this.dataConfigSource=V}getData(V){const{withFieldConfig:w,withTransforms:K}=V;let B=1,W,_=[],k=[],A,z=!0,H=-1;if(this.dataConfigSource.snapshotData){const Q={state:m.Gu.Done,series:this.dataConfigSource.snapshotData.map(X=>(0,d.g0)(X)),timeRange:(0,o.JK)()};return(0,i.of)(Q)}return this.subject.pipe((0,s.z)(Q=>{let X=this.dataConfigSource.getFieldOverrideOptions(),te=this.dataConfigSource.getTransformations();if(Q.series===k&&W?.fieldConfig===X?.fieldConfig&&A===te)return(0,i.of)({...Q,structureRev:B,series:_});W=X,A=te,k=Q.series;let oe=(0,i.of)(Q);return K&&(oe=this.applyTransformations(Q)),oe.pipe((0,r.U)(Z=>{let le=Z,ce=!1;if(w&&Z.series?.length){if(H===this.dataConfigSource.configRev){const q=Z.series.find(ne=>(0,y.iL)(ne));q&&!q.packetInfo.schemaChanged&&_[0].fields.length===q.fields.length&&(le={...le,series:_.map((ne,pe)=>({...ne,length:Z.series[pe].length,fields:ne.fields.map((re,ie)=>({...re,values:Z.series[pe].fields[ie].values,state:{...re.state,calcs:void 0,range:void 0}}))}))},ce=!0)}X!=null&&(z||!ce)&&(H=this.dataConfigSource.configRev,le={...le,series:(0,l.SM)({timeZone:Z.request?.timezone??"browser",data:le.series,...X})},z=!1)}return!ce&&!(0,a.nl)(_,le.series,a.Ch)&&B++,_=le.series,{...le,structureRev:B}}))}))}applyTransformations(V){const w=this.dataConfigSource.getTransformations();if(!w||w.length===0)return(0,i.of)(V);const K={interpolate:B=>(0,f.J)().replace(B,V?.request?.scopedVars)};return(0,g.H)(w,V.series,K).pipe((0,r.U)(B=>({...V,series:B})))}async run(V){const{queries:w,timezone:K,datasource:B,panelId:W,dashboardUID:_,publicDashboardAccessToken:k,timeRange:A,timeInfo:z,cacheTimeout:H,queryCachingTTL:Q,maxDataPoints:X,scopedVars:te,minInterval:oe,app:Z}=V;if((0,C.yl)(B)){this.pipeToSubject((0,C.AK)(V,w[0]),W,!0);return}const le={app:Z??c.zj.Dashboard,requestId:O(),timezone:K,panelId:W,dashboardUID:_,publicDashboardAccessToken:k,range:A,timeInfo:z,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(w),maxDataPoints:X,scopedVars:te||{},cacheTimeout:H,queryCachingTTL:Q,startTime:Date.now(),rangeRaw:A.raw};try{const ce=await U(B,le.scopedVars,k),q=ce.meta?.mixed;le.targets=le.targets.map(re=>{const ie=re.datasource?.type===v.hr.type;return(!re.datasource||re.datasource.uid!==ce.uid&&!q&&!ie)&&(re.datasource=ce.getRef()),re});const ne=oe?(0,f.J)().replace(oe,le.scopedVars):ce.interval,pe=h.calculateInterval(A,X,ne);le.scopedVars=Object.assign({},le.scopedVars,{__interval:{text:pe.interval,value:pe.interval},__interval_ms:{text:pe.intervalMs.toString(),value:pe.intervalMs}}),le.interval=pe.interval,le.intervalMs=pe.intervalMs,this.lastRequest=le,this.pipeToSubject((0,M.v7)(ce,le),W)}catch(ce){this.pipeToSubject((0,i.of)({state:m.Gu.Error,error:(0,b.P)(ce),series:[],timeRange:le.range}),W)}}pipeToSubject(V,w,K=!1){this.subscription&&this.subscription.unsubscribe();let B=V;const W=this.dataConfigSource.getDataSupport();if(W.alertStates||W.annotations){const _=this.dataConfigSource;B=x(V,(0,D.kt)().getResult(_.id))}this.subscription=B.subscribe({next:_=>{this.lastResult=K?_:(0,d.zR)(_,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===m.Gu.Loading||this.lastResult.state===m.Gu.Streaming)&&this.subject.next({...this.lastResult,state:m.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new n.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(V){this.lastResult=V.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(V){this.lastResult=V}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function U(L,V,w){if(!w&&L&&typeof L=="object"&&"query"in L)return L;const K=await(0,E.ak)().get(L,V);return w?new u.lh(K):K}},45329:(j,I,e)=>{"use strict";e.d(I,{V:()=>n});var t=e(90581);function n(i,s){return(0,t.x)(()=>{s&&i.resolveCancelerIfExists(s)})}},3359:(j,I,e)=>{"use strict";e.d(I,{C:()=>n});var t=e(64987);const n=(i,s)=>{let r=1;return s?.structureRev&&s.series&&(r=s.structureRev,(0,t.nl)(i.series,s.series,t.Ch)||r++),i.structureRev=r,i}},46809:(j,I,e)=>{"use strict";e.d(I,{v7:()=>U});var t=e(89949),n=e(45383),i=e(6857),s=e(80852),r=e(91053),m=e(39343),d=e(56469),o=e(76970),l=e(32900),a=e(58885),g=e(24321),c=e(53933),h=e(69376),f=e(1726),b=e(62247),v=e(40545),y=e(42751),E=e(45937),C=e(76897),u=e(11122),D=e(45329),P=e(78968),S=e(9175),x=e(86312),M=e(75261);function R(V){let w=!1;return W=>{if(!W.request||w||P.Cj.getUrlSearchParams().editPanel!=null||W.state!==c.Gu.Done&&W.state!==c.Gu.Error)return;const k={eventName:S.ct.DataRequest,source:W.request.app,datasourceName:V.name,datasourceId:V.id,datasourceUid:V.uid,datasourceType:V.type,dataSize:0,duration:W.request.endTime-W.request.startTime};W.request.app===b.zj.Explore||W.request.app===b.zj.Correlations?K(k,W):B(k,W),W.series&&W.series.length>0&&(k.dataSize=W.series.length),(0,x.r_)(k),w=!0};function K(W,_){const k=Object.keys(_.series).length;W.totalQueries=k}function B(W,_){const k={};for(let Q=0;Q<_.series.length;Q++){const X=_.series[Q].refId;X&&!k[X]&&(k[X]=_.series[Q].meta?.isCachedResponse??!1)}const A=Object.keys(k).length,z=Object.values(k).filter(Q=>Q===!0).length;W.panelId=_.request.panelId,W.totalQueries=A,W.cachedQueries=z;const H=(0,M.h4)().getCurrent();H&&(W.dashboardId=H.id,W.dashboardName=H.title,W.dashboardUid=H.uid,W.folderName=H.meta.folderTitle),_.error&&(W.error=_.error.message)}}function O(V,w){const K=w.panelData.request,B={...w.packets},W=V.key??V.data?.[0]?.refId??"A";B[W]=V;let _=V.state||c.Gu.Done,k,A;const z=[],H=[];for(const oe in B){const Z=B[oe];if((Z.error||Z.errors?.length)&&(_=c.Gu.Error,k=Z.error,A=Z.errors),Z.data&&Z.data.length)for(const le of Z.data){if(le.meta?.dataTopic===h.w5.Annotations){H.push(le);continue}z.push(le)}}const Q=T(K,_),X={state:_,series:z,annotations:H,error:k,errors:A,request:K,timeRange:Q},te=new Set([...w.panelData.traceIds??[],...V.traceIds??[]]);return te.size>0&&(X.traceIds=Array.from(te)),{packets:B,panelData:X}}function T(V,w){const K=V.range;return!(0,t.isString)(K.raw.from)||w!==c.Gu.Streaming?K:{...K,from:f.parse(K.raw.from,!1),to:f.parse(K.raw.to,!0)}}function U(V,w,K){let B={panelData:{state:c.Gu.Loading,series:[],request:w,timeRange:w.range},packets:{}};if(!w.targets.length)return w.endTime=Date.now(),B.panelData.state=c.Gu.Done,(0,n.of)(B.panelData);const W=L(V,w,K).pipe((0,m.U)(_=>{if(!(0,t.map)(_.data))throw new Error(`Expected response data to be array, got ${typeof _.data}.`);return w.endTime=Date.now(),B=O(_,B),B.panelData}),(0,d.K)(_=>{const k=typeof _=="string"?_:JSON.stringify(_);return console.error("runRequest.catchError",k),(0,n.of)({...B.panelData,state:c.Gu.Error,error:(0,v.P)(_)})}),(0,o.b)(R(V)),(0,D.V)(E.ae,w.requestId),(0,l.B)());return(0,i.T)((0,s.H)(200).pipe((0,a.h)(B.panelData),(0,g.R)(W)),W)}function L(V,w,K){if(w.targets=w.targets.map(W=>(0,C.vH)(W)?{...V?.getDefaultQuery?.(b.zj.PanelEditor),...W}:W),V.type==="public-ds")return(0,r.D)(V.query(w));for(const W of w.targets)if((0,y.Pr)(W.datasource))return u.mV.query(w);const B=K?K(w):V.query(w);return(0,r.D)(B)}},15758:(j,I,e)=>{"use strict";e.d(I,{CN:()=>i,E_:()=>f,YQ:()=>o,fy:()=>l,pW:()=>d,qb:()=>c,qi:()=>m,rh:()=>g,to:()=>a,xb:()=>h,yw:()=>r});var t=e(14172);const n=null,i=58,s=8,r={label:"A\u2013Z",value:"alpha-asc"},m="search.sections",d=0,o="general",l="General",a="grafana.search.include.panels",g="grafana.search.layout",c="grafana.search.sort",h={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},f=1e3},63419:(j,I,e)=>{"use strict";e.d(I,{A:()=>r,v:()=>m});var t=e(27702),n=e(69966),i=e(94469),s=e(26129);function r(){const d=(0,t.useRef)(new n.x);return{keyboardEvents:d.current,onKeyDown:o=>{switch(o.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":d.current.next(o);default:}}}}function m(d,o,l){const a=(0,t.useRef)({x:0,y:-1}),[g,c]=(0,t.useState)({x:0,y:-1}),h=(0,t.useRef)();return(0,t.useEffect)(()=>{h.current=l.view.fields.url,a.current.x=0,a.current.y=-1,c({...a.current})},[l]),(0,t.useEffect)(()=>{const f=d.subscribe({next:b=>{switch(b?.code){case"ArrowDown":{a.current.y++,c({...a.current});break}case"ArrowUp":a.current.y=Math.max(0,a.current.y-1),c({...a.current});break;case"ArrowRight":{o>0&&(a.current.x=Math.min(o,a.current.x+1),c({...a.current}));break}case"ArrowLeft":{o>0&&(a.current.x=Math.max(0,a.current.x-1),c({...a.current}));break}case"Enter":if(!h.current)break;const v=a.current.x*o+a.current.y;if(v<0){a.current.x=0,a.current.y=0,c({...a.current});break}const y=h.current.values?.[v];y&&s.E1.push(i.u.stripBaseFromUrl(y))}}});return()=>f.unsubscribe()},[d,o]),g}},63064:(j,I,e)=>{"use strict";e.d(I,{getGrafanaSearcher:()=>t.O});var t=e(91342)},91342:(j,I,e)=>{"use strict";e.d(I,{O:()=>R});var t=e(34667),n=e(27938),i=e(32053),s=e(61965),r=e(73289),m=e(6092);const d="Loading",o="api/search-v2",l="name_sort";class a{constructor(T){this.fallbackSearcher=T}async search(T){if(T.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(T)}async starred(T){if(T.facet?.length)throw new Error("facets not supported!");const U=await(0,r.i)().get("api/user/stars");return U?.length?this.doSearchQuery({uid:U,query:T.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(L,V)=>{},isItemLoaded:L=>!0}}async tags(T){const U={...T,query:T.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},V=(await(0,r.i)().post(o,U)).frames.map(w=>(0,i.g0)(w));if(V[0]?.name===d)return this.fallbackSearcher.tags(T);for(const w of V)if(w.fields[0].name==="tag")return h(w);return[]}getSortOptions(){const T=[{value:l,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.config.licenseInfo.enabledFeatures.analytics){for(const U of f)T.push({value:`-${U.name}`,label:`${U.display} (most)`}),T.push({value:`${U.name}`,label:`${U.display} (least)`});for(const U of b)T.push({value:`-${U.name}`,label:`${U.display} (recent)`}),T.push({value:`${U.name}`,label:`${U.display} (oldest)`})}return Promise.resolve(T)}async doSearchQuery(T){T=await(0,m.Sd)(T);const U={...T,query:T.query??"*",limit:T.limit??g},V=(await(0,r.i)().post(o,U)).frames.map(A=>(0,i.g0)(A)),w=V.length?(0,i.g0)(V[0]):{fields:[],length:0};if(w.name===d)return this.fallbackSearcher.search(T);for(const A of w.fields)A.display=(0,s.U)({field:A,theme:t.config.theme2});w.meta?.custom||(w.meta={...w.meta,custom:{count:w.length,max_score:1}});const K=w.meta.custom;if(K.locationInfo||(K.locationInfo={}),K.sortBy?.length){const A=w.fields.find(z=>z.name===K.sortBy);if(A){const z=v(A.name);K.sortBy=z,A.name=z}}let B=0,W;const _=async()=>{for(;B>k.dataFrame.length;){const A=k.dataFrame.length;if(A>=K.count)return;const z=await(0,r.i)().post(o,{...U??{},from:A,limit:c}),H=(0,i.g0)(z.frames[0]);if(!H){console.log("no results",H);return}if(H.fields.length!==k.dataFrame.fields.length){console.log("invalid shape",H,k.dataFrame);return}const Q=H.length+k.dataFrame.length;for(let te=0;te<H.fields.length;te++)k.dataFrame.fields[te].values.push(...H.fields[te].values);k.dataFrame.length=Q;const X=H.meta?.custom;if(X?.locationInfo&&K)for(const[te,oe]of Object.entries(X.locationInfo))K.locationInfo[te]=oe}W=void 0},k=new n.U(w);return{totalRows:K.count??w.length,view:k,loadMoreItems:async(A,z)=>(B=Math.max(B,z),W||(W=_()),W),isItemLoaded:A=>A<k.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const g=50,c=100;function h(O){const T=O.fields[0].values,U=O.fields[1].values,L=[];for(let V=0;V<O.length;V++)L.push({term:T[V],count:U[V]});return L}const f=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],b=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function v(O){for(const T of f)if(T.name===O)return T.display;for(const T of b)if(T.name===O)return T.display;return O}var y=e(12354);class E{constructor(T){this.parent=T,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(T){if(T.facet?.length)throw new Error("facets not supported!");if(T.sort!=null)throw new Error("custom sorting is not supported yet");if(T.tags?.length||T.ds_uid?.length)return this.parent.search(T);const L=(await this.getCache(T.kind)).search(T.query);return{isItemLoaded:()=>!0,loadMoreItems:async(V,w)=>{},totalRows:L.length,view:L}}async getCache(T){const U=T?T.sort().join(","):"*",L=this.cache.get(U);if(L)try{return await L}catch{return this.cache.delete(U),new C(new n.U({name:"error",fields:[],length:0}))}const V=this.parent.search({kind:T,limit:5e3}).then(w=>new C(w.view));return this.cache.set(U,V),V}async starred(T){return this.parent.starred(T)}async getSortOptions(){return this.parent.getSortOptions()}async tags(T){return this.parent.tags(T)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class C{constructor(T){this.full=T,this.ufuzzy=new y.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(U=>({...U,values:[]})),length:0})}search(T){if(!T?.length||T==="*")return this.full;const U=this.full.dataFrame.fields,L=this.names,V=U.map(W=>[]);let[w,K,B]=this.ufuzzy.search(L,T,!0);for(let W=0;W<U.length;W++){let _=U[W].values,k=V[W];if(K&&B)for(let A=0;A<B.length;A++){let z=K.idx[B[A]];k.push(_[z])}else if(w)for(let A=0;A<w.length;A++){let z=w[A];k.push(_[z])}}return this.empty.dataFrame.fields.forEach((W,_)=>{W.values=V[_]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var u=e(29241),D=e(45937),P=e(15758),S=e(14172);class x{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(T,U){const L=await(0,m.Sd)(U);if(L.query?.length&&L.query!=="*"&&(T.query=L.query),L.kind?.length===1&&P.xb[L.kind[0]]&&(T.type=P.xb[L.kind[0]]),L.uid)T.dashboardUID=L.uid;else if(L.location?.length){let V=this.locationInfo[L.location];V||(await this.doAPIQuery({type:S.o.DashFolder,limit:999}),V=this.locationInfo[L.location]),T.folderIds=[V?.folderId??0]}return T}async search(T){if(T.facet?.length)throw new Error("facets not supported!");if(T.from!==void 0){if(!T.limit)throw new Error("Must specify non-zero limit parameter when using from");if(T.from/T.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const U=T.limit??(T.from!==void 0?1:P.E_),L=T.from!==void 0?T.from/U+1:void 0,V=await this.composeQuery({limit:U,tag:T.tags,sort:T.sort,page:L},T);return this.doAPIQuery(V)}async starred(T){if(T.facet?.length)throw new Error("facets not supported!");const U=await this.composeQuery({limit:T.limit??P.E_,tag:T.tags,sort:T.sort,starred:T.starred},T);return this.doAPIQuery(U)}async getSortOptions(){return(await D.ae.get("/api/search/sorting")).sortOptions.map(U=>({value:U.name,label:U.displayName}))}async tags(T){return(await D.ae.get("/api/dashboards/tags")).sort((L,V)=>V.count-L.count)}async doAPIQuery(T){const U=await D.ae.get("/api/search",T),L=[],V=[],w=[],K=[],B=[],W=[],_=[];let k;for(let H of U){const Q=H.type==="dash-folder"?"folder":"dashboard";L.push(Q),V.push(H.title),w.push(H.uid),K.push(H.url),B.push(H.tags),_.push(H.sortMeta);let X=H.folderUid;!X&&Q==="dashboard"&&(X="general"),W.push(X),H.sortMetaName?.length&&(k=H.sortMetaName),H.folderUid&&H.folderTitle?this.locationInfo[H.folderUid]={kind:"folder",name:H.folderTitle,url:H.folderUrl,folderId:H.folderId}:Q==="folder"&&(this.locationInfo[H.uid]={kind:Q,name:H.title,url:H.url,folderId:H.id})}const A={fields:[{name:"kind",type:u.fS.string,config:{},values:L},{name:"name",type:u.fS.string,config:{},values:V},{name:"uid",type:u.fS.string,config:{},values:w},{name:"url",type:u.fS.string,config:{},values:K},{name:"tags",type:u.fS.other,config:{},values:B},{name:"location",type:u.fS.string,config:{},values:W}],length:V.length,meta:{custom:{count:V.length,max_score:1,locationInfo:this.locationInfo}}};k?.length&&_.length&&(A.meta.custom.sortBy=k,A.fields.push({name:k,type:u.fS.number,config:{},values:_}));for(const H of A.fields)H.display=(0,s.U)({field:H,theme:t.config.theme2});const z=new n.U(A);return{totalRows:A.length,view:z,loadMoreItems:async(H,Q)=>{},isItemLoaded:H=>!0}}}let M;function R(){if(!M){const O=new x,T=t.config.featureToggles.panelTitleSearch;M=T?new a(O):O,T&&location.search.includes("do-frontend-query")&&(M=new E(M))}return M}},6092:(j,I,e)=>{"use strict";e.d(I,{J6:()=>r,Sd:()=>n,f9:()=>d});var t=e(75261);async function n(o){return o.query&&o.query.indexOf("folder:current")>=0&&(o={...o,location:await i(),query:o.query.replace("folder:current","").trim()},o.query?.length||(o.query="*")),Promise.resolve(o)}async function i(){try{let o=(0,t.h4)().getCurrent();return o||(await s(500),o=(0,t.h4)().getCurrent()),Promise.resolve(o?.meta?.folderUid)}catch(o){console.error(o)}}function s(o){return new Promise(l=>setTimeout(l,o))}function r(o,l){return o==="dashboard"?"apps":o==="folder"?l?"folder-open":"folder":"question-circle"}function m(o){switch(o){case"dashboard":case"folder":case"panel":return o;default:return"dashboard"}}function d(o,l){const a=l?.dataFrame.meta?.custom,g={kind:m(o.kind),uid:o.uid,title:o.name,url:o.url,tags:o.tags??[]},c=a?.sortBy;if(c){const h=o[c];(typeof h=="string"||typeof h=="number")&&(g.sortMetaName=c,g.sortMeta=h)}if(o.location){const h=o.location.split("/"),f=h[h.length-1],b=a?.locationInfo[f];b&&(g.parentTitle=b.name,g.parentKind=b.kind,g.parentUID=f)}return g}},14172:(j,I,e)=>{"use strict";e.d(I,{A:()=>n,o:()=>t});var t=(i=>(i.DashDB="dash-db",i.DashHome="dash-home",i.DashFolder="dash-folder",i))(t||{}),n=(i=>(i.List="list",i.Folders="folders",i))(n||{})},21502:(j,I,e)=>{"use strict";e.d(I,{Dn:()=>v,LA:()=>l,M4:()=>E,P4:()=>m,Ub:()=>b,ZP:()=>u,aj:()=>C,dt:()=>f,e7:()=>d,pN:()=>h,s3:()=>o});var t=e(34099),n=e(18771);const i={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.oM)({name:"serviceaccount",initialState:i,reducers:{serviceAccountFetchBegin:D=>({...D,isLoading:!0}),serviceAccountFetchEnd:D=>({...D,isLoading:!1}),serviceAccountLoaded:(D,P)=>({...D,serviceAccount:P.payload,isLoading:!1}),serviceAccountTokensLoaded:(D,P)=>({...D,tokens:P.payload,isLoading:!1})}}),r=s.reducer,{serviceAccountLoaded:m,serviceAccountTokensLoaded:d,serviceAccountFetchBegin:o,serviceAccountFetchEnd:l}=s.actions,a={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All},g=(0,t.oM)({name:"serviceaccounts",initialState:a,reducers:{serviceAccountsFetched:(D,P)=>{const{totalCount:S,perPage:x,...M}=P.payload,R=Math.ceil(S/x);return{...D,...M,totalPages:R,perPage:x,showPaging:R>1,isLoading:!1}},serviceAccountsFetchBegin:D=>({...D,isLoading:!0}),serviceAccountsFetchEnd:D=>({...D,isLoading:!1}),acOptionsLoaded:(D,P)=>({...D,roleOptions:P.payload}),queryChanged:(D,P)=>({...D,query:P.payload,page:0}),pageChanged:(D,P)=>({...D,page:P.payload}),stateFilterChanged:(D,P)=>({...D,serviceAccountStateFilter:P.payload})}}),c=g.reducer,{serviceAccountsFetchBegin:h,serviceAccountsFetchEnd:f,serviceAccountsFetched:b,acOptionsLoaded:v,pageChanged:y,stateFilterChanged:E,queryChanged:C}=g.actions,u={serviceAccountProfile:r,serviceAccounts:c}},26271:(j,I,e)=>{"use strict";e.d(I,{Ii:()=>r,UW:()=>l,ZP:()=>h,cD:()=>d,fT:()=>g,ik:()=>o,ki:()=>m,rI:()=>a,rW:()=>s});var t=e(34099);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},i=(0,t.oM)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(f,b)=>({...f,supportBundles:b.payload,isLoading:!1}),fetchBegin:f=>({...f,isLoading:!0}),fetchEnd:f=>({...f,isLoading:!1}),collectorsFetchBegin:f=>({...f,createBundlePageLoading:!0}),collectorsFetchEnd:f=>({...f,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(f,b)=>({...f,supportBundleCollectors:b.payload,createBundlePageLoading:!1}),setLoadBundleError:(f,b)=>({...f,loadBundlesError:b.payload,supportBundleCollectors:[]}),setCreateBundleError:(f,b)=>({...f,createBundleError:b.payload})}}),{supportBundlesLoaded:s,fetchBegin:r,fetchEnd:m,supportBundleCollectorsLoaded:d,collectorsFetchBegin:o,collectorsFetchEnd:l,setLoadBundleError:a,setCreateBundleError:g}=i.actions,h={supportBundles:i.reducer}},96444:(j,I,e)=>{"use strict";e.d(I,{PJ:()=>m,PL:()=>s,UD:()=>h,ZP:()=>b,aj:()=>r,iI:()=>g,n2:()=>c,p3:()=>n,y$:()=>a});var t=e(34099);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},i=(0,t.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(v,y)=>{const{totalCount:E,perPage:C,...u}=y.payload,D=Math.ceil(E/C);return{...v,...u,totalPages:D,perPage:C,hasFetched:!0}},queryChanged:(v,y)=>({...v,page:1,query:y.payload}),pageChanged:(v,y)=>({...v,page:y.payload})}}),{teamsLoaded:s,queryChanged:r,pageChanged:m}=i.actions,d=i.reducer,o={team:{},members:[],groups:[],searchMemberQuery:""},l=(0,t.oM)({name:"team",initialState:o,reducers:{teamLoaded:(v,y)=>({...v,team:y.payload}),teamMembersLoaded:(v,y)=>({...v,members:y.payload}),setSearchMemberQuery:(v,y)=>({...v,searchMemberQuery:y.payload}),teamGroupsLoaded:(v,y)=>({...v,groups:y.payload})}}),{teamLoaded:a,teamGroupsLoaded:g,teamMembersLoaded:c,setSearchMemberQuery:h}=l.actions,f=l.reducer,b={teams:d,team:f}},99386:(j,I,e)=>{"use strict";e.d(I,{J:()=>le});var t=e(89949),n=e(58939),i=e(10864),s=e(39317),r=e(80734),m=e(64167),d=e(41355),o=e(80169),l=e(5399),a=e(51824),g=e(81587);let c={};function h(ce){const q=c[ce];return q||(c[ce]=(0,t.property)(ce))}class f{constructor(q,ne,pe){this.state={name:q.name,value:ne,text:pe,type:q.type}}getValue(q){let{value:ne}=this.state;return ne==="string"||ne==="number"||ne==="boolean"?ne:String(ne)}getValueText(){const{value:q,text:ne}=this.state;return typeof ne=="string"?q===o.r2?o.xk:ne:Array.isArray(ne)?ne.join(" + "):(console.log("value",ne),String(ne))}}let b;function v(ce,q,ne){return b?(b.state.name=ce.name,b.state.type=ce.type,b.state.value=q,b.state.text=ne):b=new f(ce,q,ne),b}function y(ce,q,ne,pe){if(ne=ne||{},ce==null||(0,l.Kn)(ne)&&q!==m.b8.QueryParam)return"";if(!Array.isArray(ce)&&typeof ce=="object"&&(ce=`${ce}`),typeof q=="function")return q(ce,ne,y);q||(q=m.b8.Glob);let re=q.split(":");re.length>1?(q=re[0],re=re.slice(1)):re=[];let ie=r.Vl.getIfExists(q);ie||(console.error(`Variable format ${q} not found. Using glob format as fallback.`),ie=r.Vl.get(m.b8.Glob));const Se=v(ne,ce,pe??ce);return ie.formatter(ce,re,Se)}var E=e(24588),C=e.n(E),u=e(3569),D=e(78968),P=e(31317),S=e(26858),x=e(75627),M=e(21609),R=e(29241),O=e(70732),T=e(61965),U=e(75578),L=e(14951);function V(ce,q,ne){return new Proxy({},{get:(pe,re)=>{if(re==="name")return ce.name;if(re==="displayName")return(0,U.CZ)(ce,q,ne);if(re==="labels"||re==="formattedLabels")return ce.labels?{...ce.labels,__values:Object.values(ce.labels).sort().join(", "),toString:()=>(0,L.aA)(ce.labels,"",!0)}:""}})}function w(ce,q,ne,pe){const re=K(ce,q,ne);return y(re,pe)}function K(ce,q,ne){const pe=ne?.__dataContext;if(!pe)return ce;const{frame:re,rowIndex:ie,field:Se,calculatedValue:ye}=pe.value;if(ye)switch(q){case"numeric":return ye.numeric.toString();case"raw":return ye.numeric;case"time":return"";case"text":default:return(0,M.zc)(ye)}if(ie===void 0)return ce;if(q==="time"){const _e=re.fields.find(Je=>Je.type===R.fS.time);return _e?_e.values[ie]:void 0}const Ce=Se.values[ie];if(q==="raw")return Ce;const we=(Se.display??_())(Ce);switch(q){case"numeric":return we.numeric;case"text":return we.text;default:return(0,M.zc)(we)}}function B(ce,q,ne,pe){const re=ne?.__dataContext;if(!re||!q)return ce;const{frame:ie,rowIndex:Se}=re.value;if(Se===void 0||q===void 0)return ce;const ye={name:ie.name,refId:ie.refId,fields:(0,O.z)({frame:ie,rowIndex:Se})},Ce=h(q)(ye)??"";return y(Ce,pe)}let W;function _(){return W||(W=(0,T.U)()),W}function k(ce,q,ne,pe){const re=ne?.__dataContext;if(!re||q!=="name")return ce;const{frame:ie,frameIndex:Se}=re.value,ye=(0,U.nf)(ie,Se);return y(ye,pe)}function A(ce,q,ne,pe){const re=ne?.__dataContext;if(!re||q===void 0||q==="")return ce;const{frame:ie,field:Se,data:ye}=re.value,Ce=V(Se,ie,ye),de=h(q)(Ce)??"";return y(de,pe)}const z={__value:w,__data:B,__series:k,__field:A,[u.W.includeVars]:H,[u.W.keepTime]:Q,__timezone:X};function H(ce,q,ne){const pe=(0,x.c)(ne);return D.Cj.toUrlParams(pe)}function Q(){return D.Cj.toUrlParams((0,S.$t)().timeRangeForUrl())}function X(){const ce=(0,P.Z)({timeZone:(0,S.$t)().timeModel?.getTimezone()});return ce==="browser"?C().tz.guess():ce}const te={getFilteredVariables:a.Q4,getVariables:a.ng,getVariableWithName:a._K};class oe{constructor(q=te){this.dependencies=q,this.regex=g.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this._variables=[]}init(q,ne){this._variables=q,this.timeRange=ne,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const q=ne=>ne||ne==="";if(this.index=this._variables.reduce((ne,pe)=>(pe.current&&(pe.current.isNone||q(pe.current.value))&&(ne[pe.name]=pe),ne),{}),this.timeRange){const ne=this.timeRange.from.valueOf().toString(),pe=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:ne,text:ne}},__to:{current:{value:pe,text:pe}}}}}updateTimeRange(q){this.timeRange=q,this.updateIndex()}variableInitialized(q){this.index[q.name]=q}getAdhocFilters(q){let ne=[],pe=(0,i.F)().getInstanceSettings(q);if(!pe)return[];for(const re of this.getAdHocVariables()){const ie=re.datasource?.uid;(ie===pe.uid||ie?.indexOf("$")===0&&this.replace(ie)===q)&&(ne=ne.concat(re.filters))}return ne}setGrafanaVariable(q,ne){this.grafanaVariables.set(q,ne)}setGlobalVariable(q,ne){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[q]:{current:ne}}}getVariableName(q){this.regex.lastIndex=0;const ne=this.regex.exec(q);return ne?ne.slice(1).find(re=>re!==void 0):null}containsTemplate(q){if(!q)return!1;const ne=this.getVariableName(q),pe=ne&&this.getVariableAtIndex(ne);return pe!=null}variableExists(q){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(q)}highlightVariablesAsHtml(q){return!q||!(0,t.isString)(q)?q:(q=(0,t.escape)(q),this._replaceWithVariableRegex(q,void 0,(ne,pe)=>this.getVariableAtIndex(pe)?'<span class="template-variable">'+ne+"</span>":ne))}getAllValue(q){if(q.allValue)return q.allValue;const ne=[];for(let pe=1;pe<q.options.length;pe++)ne.push(q.options[pe].value);return ne}getVariableValue(q,ne){return ne?h(ne)(q.value):q.value}getVariableText(q,ne){return q.value===ne||typeof ne!="string"?q.text:ne}replace(q,ne,pe,re){return ne&&ne.__sceneObject?r.ep.interpolate(ne.__sceneObject.value,q,ne,pe):q?(this.regex.lastIndex=0,this._replaceWithVariableRegex(q,pe,(ie,Se,ye,Ce)=>{const de=this._evaluateVariableExpression(ie,Se,ye,Ce,ne);return re&&re.push({match:ie,variableName:Se,fieldPath:ye,format:Ce,value:de,found:de!==ie}),de})):q??""}_evaluateVariableExpression(q,ne,pe,re,ie){const Se=this.getVariableAtIndex(ne),ye=ie?.[ne];if(ye){const _e=this.getVariableValue(ye,pe),Je=this.getVariableText(ye,_e);if(_e!=null)return y(_e,re,Se,Je)}if(!Se){const _e=z[ne];return _e?_e(q,pe,ie,re):q}if(re===m.b8.QueryParam||(0,l.Kn)(Se)){const _e=d.z.get(Se.type).getValueForUrl(Se),Je=(0,l.Kn)(Se)?Se.id:Se.current.text;return y(_e,re,Se,Je)}const Ce=this.grafanaVariables.get(Se.current.value);if(Ce)return y(Ce,re,Se);let de=Se.current.value,we=Se.current.text;if(this.isAllValue(de)&&(de=this.getAllValue(Se),we=o.xk,Se.allValue&&re!==m.b8.Text&&re!==m.b8.PercentEncode))return this.replace(de);if(pe){const _e=this.getVariableValue({value:de,text:we},pe);if(_e!=null)return y(_e,re,Se,we)}return y(de,re,Se,we)}_replaceWithVariableRegex(q,ne,pe){return this.regex.lastIndex=0,q.replace(this.regex,(re,ie,Se,ye,Ce,de,we)=>pe(re,ie||Se||Ce,de,ye||we||ne))}isAllValue(q){return q===o.r2||Array.isArray(q)&&q[0]===o.r2}replaceWithText(q,ne){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(q,ne,"text")}getVariableAtIndex(q){if(q)return this.index[q]?this.index[q]:this.dependencies.getVariableWithName(q)}getAdHocVariables(){return this.dependencies.getFilteredVariables(l.Kn)}}const Z=new oe;(0,s.l)(Z);const le=()=>Z},73941:(j,I,e)=>{"use strict";e.d(I,{J:()=>a});var t=e(64167),n=e(53387),i=e(27702),s=e(64022),r=e(40705),m=e(1128);const d=[{label:"Size",value:t.kW.Size,description:"Split the buckets based on size"},{label:"Count",value:t.kW.Count,description:"Split the buckets based on count"}],o=[{label:"Split",value:t.kW.Size,description:"Split the buckets based on size"}],l=({value:g,onChange:c,item:h})=>i.createElement(s.Lh,null,i.createElement(r.S,{value:g?.mode||t.kW.Size,options:g?.scale?.type===t.wf.Log?o:d,onChange:f=>{c({...g,mode:f})}}),i.createElement(m.I,{value:g?.value??"",placeholder:"Auto",onChange:f=>{c({...g,value:f.currentTarget.value})}}));function a(g,c,h,f){c.addCustomEditor({id:"xBuckets",path:`${g}xBuckets`,name:"X Bucket",editor:l,category:f,defaultValue:{mode:t.kW.Size}}),c.addCustomEditor({id:"yBuckets",path:`${g}yBuckets`,name:"Y Bucket",editor:l,category:f,defaultValue:{mode:t.kW.Size}}),c.addCustomEditor({id:"yBuckets-scale",path:`${g}yBuckets.scale`,name:"Y Bucket scale",category:f,editor:n.Y,defaultValue:{type:t.wf.Linear}})}},28635:(j,I,e)=>{"use strict";e.d(I,{xf:()=>_,Oy:()=>U,qJ:()=>K,d8:()=>w,Cj:()=>B});var t=e(39343),n=e(14544),i=e(29241),s=e(75578),r=e(21609),m=e(43987),d=e(32082),o=e(35596),l=e(48962),a=e(64167),g=e(27107);const{abs:c,pow:h}=Math,f=new Map;function b(z,H,Q,X){let te=[],oe=X.map(g.d);for(let Z=H;Z<Q;Z++){let le=c(Z),ce=(0,g.O)(h(z,Z),le);for(let q=0;q<X.length;q++){let ne=X[q]*ce,pe=(ne>=0&&Z>=0?0:le)+(Z>=oe[q]?0:oe[q]),re=(0,g.O)(ne,pe);te.push(re),f.set(re,pe)}}return te}const v=z=>z%1===0,y=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],E=b(10,-16,0,y),C=b(10,0,16,y),u=C.filter(v),D=E.concat(C),P=E.concat(u),S=1*1e3,x=60*S,M=60*x,R=24*M,O=365*R,T=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,S,2*S,4*S,5*S,10*S,15*S,20*S,30*S,x,2*x,4*x,5*x,10*x,15*x,20*x,30*x,M,2*M,4*M,6*M,8*M,12*M,18*M,R,2*R,3*R,4*R,5*R,6*R,7*R,10*R,15*R,30*R,45*R,60*R,90*R,180*R,O,2*O,3*O,4*O,5*O,6*O,7*O,8*O,9*O,10*O],U={id:n.W.heatmap,name:"Create heatmap",description:"Calculate heatmap from source data.",defaultOptions:{},operator:(z,H)=>Q=>Q.pipe((0,t.U)(X=>U.transformer(z,H)(X))),transformer:z=>H=>{const Q=_(H,z);return z.keepOriginalData?[Q,...H]:[Q]}};function L(z){return z==="+Inf"?1/0:z==="-Inf"?-1/0:+(z??0)}function V(z,H){return L(z)-L(H)}function w(z){return z?.meta?.custom??{}}function K(z){let H=!1;for(let Q of z.fields)switch(Q.name){case"y":case"yMin":case"yMax":if(H)return!1;H=!0}return H}function B(z){const H=z.frame.fields[0],Q=H.values,X=z.frame.fields.filter((ie,Se)=>ie.type===i.fS.number&&Se>0),te=Q.length*X.length,oe=new Array(te),Z=new Array(te),le=new Array(te),ce=X.map(ie=>ie.values.slice());ce.forEach((ie,Se)=>{for(let ye=0;ye<ie.length;ye++)le[ce.length*ye+Se]=ie[ye]});const q=Array.from({length:X.length},(ie,Se)=>Se);for(let ie=0,Se=0,ye=0;ie<te;Se=++ie%q.length)Z[ie]=q[Se],Se===0&&ie>=q.length&&ye++,oe[ie]=Q[ye];let ne=X[0].labels?.le!=null?"yMax":"y";switch(z.layout){case a.kv.le:ne="yMax";break;case a.kv.ge:ne="yMin";break;case a.kv.unknown:ne="y";break}const pe={yOrdinalDisplay:X.map(ie=>(0,s.CZ)(ie,z.frame)),yMatchWithLabel:Object.keys(X[0].labels??{})[0]};if(pe.yMatchWithLabel&&(pe.yOrdinalLabel=X.map(ie=>ie.labels?.[pe.yMatchWithLabel]??""),pe.yMatchWithLabel==="le"&&(pe.yMinDisplay="0.0")),z.unit?.length||z.decimals!=null){const ie=(0,r.Cf)(z.unit??"short");pe.yMinDisplay&&(pe.yMinDisplay=(0,r.zc)(ie(0,z.decimals))),pe.yOrdinalDisplay=pe.yOrdinalDisplay.map(Se=>{let ye=+Se;return Number.isNaN(ye)?Se:(0,r.zc)(ie(ye,z.decimals))})}const re={...X[0].config};return re.displayNameFromDS&&delete re.displayNameFromDS,{length:oe.length,refId:z.frame.refId,meta:{type:m.P.HeatmapCells,custom:pe},fields:[{name:H.type===i.fS.time?"xMax":"x",type:H.type,values:oe,config:H.config},{name:ne,type:i.fS.number,values:Z,config:{unit:"short"}},{name:z.value?.length?z.value:"Value",type:i.fS.number,values:le,config:re,display:X[0].display}]}}function W(z){z=z.slice(),z.sort((Q,X)=>V(Q.name,X.name));const H=z.map(Q=>Q.fields[1].values.slice());return H.reverse(),H.forEach((Q,X)=>{if(X<H.length-1)for(let te=0;te<Q.length;te++)Q[te]-=H[X+1][te]}),H.reverse(),z.map((Q,X)=>({...Q,fields:[Q.fields[0],{...Q.fields[1],values:H[X]}]}))}function _(z,H){let Q,X,te=0;for(let ie of z)ie.fields.find(ye=>ye.type===i.fS.time)&&(te+=ie.length);let oe=Array(te),Z=Array(te),le=0;for(let ie of z){const Se=ie.fields.find(Ce=>Ce.type===i.fS.time);if(!Se)continue;Q||(Q=Se);const ye=Se.values;for(let Ce of ie.fields)if(Ce!==Se&&Ce.type===i.fS.number){const de=Ce.values;for(let we=0;we<ye.length;we++,le++)oe[le]=ye[we],Z[le]=de[we];X||(X=Ce)}}if(!Q||!X)throw"no heatmap fields found";if(!oe.length||!Z.length)throw"no values found";const ce=H.xBuckets??{},q=H.yBuckets??{};if(ce.scale?.type===a.wf.Log)throw"X axis only supports linear buckets";const ne=H.yBuckets?.scale??{type:a.wf.Linear},pe=k(oe,Z,{xSorted:(0,l.lP)(oe),xTime:Q.type===i.fS.time,xMode:ce.mode,xSize:ce.mode===a.kW.Size?(0,d.iX)((0,d.RA)(ce.value??"")):ce.value?+ce.value:void 0,yMode:q.mode,ySize:q.value?+q.value:void 0,yLog:ne?.type===a.wf.Log?ne?.log:void 0});return{length:pe.x.length,name:(0,s.CZ)(X),meta:{type:m.P.HeatmapCells},fields:[{name:"xMin",type:Q.type,values:pe.x,config:Q.config},{name:"yMin",type:i.fS.number,values:pe.y,config:{...X.config,custom:{scaleDistribution:ne}}},{name:"Count",type:i.fS.number,values:pe.count,config:{unit:"short"}}]}}function k(z,H,Q){let X=z.length,te=Q?.xSorted??!1,oe=Q?.ySorted??!1,Z=te?z[0]:1/0,le=oe?H[0]:1/0,ce=te?z[X-1]:-1/0,q=oe?H[X-1]:-1/0,ne=Q?.yLog;for(let Me=0;Me<X;Me++)te||(Z=Math.min(Z,z[Me]),ce=Math.max(ce,z[Me])),oe||(!ne||H[Me]>0)&&(le=Math.min(le,H[Me]),q=Math.max(q,H[Me]));let pe=Q?.xSize??0,re=Q?.ySize??0,ie=Q?.xMode,Se=Q?.yMode;if((!Number.isFinite(pe)||pe<=0)&&(ie=a.kW.Count,pe=20),(!Number.isFinite(re)||re<=0)&&(Se=a.kW.Count,re=10),ie===a.kW.Count){let Me=(ce-Z)/Math.max(pe-1,1),De=Q?.xTime?T:P,We=De.findIndex(qe=>qe>Me)-1;pe=De[Math.max(We,0)]}if(Se===a.kW.Count){let Me=(q-le)/Math.max(re-1,1),De=Q?.yTime?T:P,We=De.findIndex(qe=>qe>Me)-1;re=De[Math.max(We,0)]}let ye=Q?.xCeil?Me=>(0,o.UO)(Me,pe):Me=>(0,o.mB)(Me,pe),Ce=Q?.yCeil?Me=>(0,o.UO)(Me,re):Me=>(0,o.mB)(Me,re);if(ne){re=1/(Q?.ySize??1);let Me=ne===2?Math.log2:Math.log10;Ce=Q?.yCeil?De=>(0,o.UO)(Me(De),re):De=>(0,o.mB)(Me(De),re)}let de=ye(Z),we=ye(ce),_e=Ce(le),Je=Ce(q),Ue=Math.round((we-de)/pe)+1,$e=Math.round((Je-_e)/re)+1,[Qe,tt,lt]=A(Ue,$e,de,pe,_e,re,ne);for(let Me=0;Me<X;Me++){if(ne&&H[Me]<=0)continue;const De=(ye(z[Me])-de)/pe,We=(Ce(H[Me])-_e)/re,qe=De*$e+We;lt[qe]++}return{x:Qe,y:tt,count:lt}}function A(z,H,Q,X,te,oe,Z){const le=z*H,ce=new Array(le),q=new Array(le),ne=new Array(le);for(let pe=0,re=0,ie=Q;pe<le;re=++pe%H)ne[pe]=0,Z?q[pe]=Z**(te+re*oe):q[pe]=te+re*oe,re===0&&pe>=H&&(ie+=X),ce[pe]=ie;return[ce,q,ne]}},87746:(j,I,e)=>{"use strict";e.d(I,{Ii:()=>i,JJ:()=>n,ac:()=>s});var t=e(64167),n=(m=>(m.Prepare="prepare",m.Calculate="calculate",m.Modify="modify",m))(n||{}),i=(m=>(m.Heading="heading",m.Distance="distance",m.Area="area",m))(i||{}),s=(m=>(m.AsLine="asLine",m.LineBuilder="lineBuilder",m))(s||{});const r={action:"prepare",source:{mode:t.q1.Auto}}},62129:(j,I,e)=>{"use strict";e.d(I,{Lb:()=>a,Lp:()=>o,N7:()=>c});var t=e(70328),n=e(84570),i=e(10680),s=e(29209),r=e(36334),m=e(29241),d=e(87746);function o(h){const f=[];for(const b of h.values)b&&f.push(a(b));return new n.Z(f)}function l(h){const f=new Array(h.length);if(h.length>1){let b=g(h[0]);for(let v=1;v<h.length;v++){let y=g(h[v]);if(b&&y){let E=Math.atan2(y[0]-b[0],y[1]-b[1])*180/Math.PI;E<0&&(E+=360),f[v-1]=f[v]=E}}}else f.fill(0);return f}function a(h){return h instanceof i.Z?h.getCoordinates():(0,t.qg)(h.getExtent())}function g(h){if(h)return(0,s.bU)(a(h))}function c(h,f){const b=h.values,v=new Array(h.values.length),y=f.calc??d.Ii.Heading,E=f.field??y;switch(y){case d.Ii.Area:{for(let C=0;C<b.length;C++){const u=b[C];u&&(v[C]=(0,r.bg)(u))}return{name:E,type:m.fS.number,config:{unit:"areaM2"},values:v}}case d.Ii.Distance:{for(let C=0;C<b.length;C++){const u=b[C];u&&(v[C]=(0,r.xA)(u))}return{name:E,type:m.fS.number,config:{unit:"lengthm"},values:v}}case d.Ii.Heading:default:return{name:E,type:m.fS.number,config:{unit:"degree"},values:l(b)}}}},30306:(j,I,e)=>{"use strict";e.d(I,{Hg:()=>i,Vx:()=>r,jY:()=>s});var t=e(27702),n=e(75578);function i(m){return(0,t.useMemo)(()=>Array.isArray(m)?Object.keys(m.reduce((d,o)=>!o||!Array.isArray(o.fields)?d:o.fields.reduce((l,a)=>{const g=(0,n.CZ)(a,o,m);return l[g]=!0,l},d),{})):[],[m])}function s(m){const d=new Set;for(const o of m)for(const l of o.fields)if(l.labels)for(const a of Object.keys(l.labels))d.add(a);return d}const r={combine:"Combine",calculateNewFields:"Calculate new fields",createNewVisualization:"Create new visualization",filter:"Filter",performSpatialOperations:"Perform spatial operations",reformat:"Reformat",reorderAndRename:"Reorder and rename"}},17632:(j,I,e)=>{"use strict";e.d(I,{PJ:()=>a,ZP:()=>c,eT:()=>d,k7:()=>l,tZ:()=>o,w4:()=>r});var t=e(34099),n=e(12308);const i={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!n.default.externalUserMngLinkName,externalUserMngInfo:n.default.externalUserMngInfo,externalUserMngLinkName:n.default.externalUserMngLinkName,externalUserMngLinkUrl:n.default.externalUserMngLinkUrl,isLoading:!1},s=(0,t.oM)({name:"users",initialState:i,reducers:{usersLoaded:(h,f)=>{const{totalCount:b,perPage:v,page:y,orgUsers:E}=f.payload,C=Math.ceil(b/v);return{...h,isLoading:!0,users:E,perPage:v,page:y,totalPages:C}},searchQueryChanged:(h,f)=>({...h,searchQuery:f.payload,page:i.page}),setUsersSearchPage:(h,f)=>({...h,page:f.payload}),pageChanged:(h,f)=>({...h,page:f.payload}),usersFetchBegin:h=>({...h,isLoading:!0}),usersFetchEnd:h=>({...h,isLoading:!1})}}),{searchQueryChanged:r,setUsersSearchPage:m,usersLoaded:d,usersFetchBegin:o,usersFetchEnd:l,pageChanged:a}=s.actions,c={users:s.reducer}},41355:(j,I,e)=>{"use strict";e.d(I,{z:()=>n});var t=e(25359);const n=new t.B},74030:(j,I,e)=>{"use strict";e.d(I,{KJ:()=>v,M6:()=>f,Ue:()=>y,Z$:()=>E,ku:()=>b,m2:()=>h});var t=e(89949),n=e.n(t),i=e(5926),s=e(39655),r=e(5399),m=e(4684),d=e(1941),o=e(51824),l=e(60344),a=e(81587),g=e(26333);const c="Filters",h=D=>async(P,S)=>{let x=u(D,S());if(!x&&(P(C(D)),x=u(D,S()),!x))return;const M=x.filters.findIndex(O=>O.key===D.key&&O.value===D.value);if(M===-1){const{value:O,key:T,operator:U}=D,L={value:O,key:T,operator:U,condition:""};return await P(v((0,a.yQ)(x),L))}const R={...x.filters[M],operator:D.operator};return await P(f((0,a.yQ)(x),{index:M,filter:R}))},f=(D,P)=>async(S,x)=>{const M=(0,o.E0)(D,x());S((0,d.mb)(D.rootStateKey,(0,g.e_)((0,a.Y6)(M,P)))),await S((0,m.MB)((0,a.yQ)(M),!0))},b=(D,P)=>async(S,x)=>{const M=(0,o.E0)(D,x());S((0,d.mb)(D.rootStateKey,(0,g.DO)((0,a.Y6)(M,P)))),await S((0,m.MB)((0,a.yQ)(M),!0))},v=(D,P)=>async(S,x)=>{const M=(0,o.E0)(D,x());S((0,d.mb)(D.rootStateKey,(0,g.QL)((0,a.Y6)(M,P)))),await S((0,m.MB)((0,a.yQ)(M),!0))},y=(D,P)=>async(S,x)=>{const M=(0,o.E0)(D,x());S((0,d.mb)(D.rootStateKey,(0,g.aM)((0,a.Y6)(M,P)))),await S((0,m.MB)((0,a.yQ)(M),!0))},E=(D,P)=>async(S,x)=>{const M=(0,o.E0)(D,x());S((0,d.mb)(D.rootStateKey,(0,l.Pl)((0,a.Y6)(M,{propName:"datasource",propValue:P}))));const O=(await(0,i.ak)().get(P))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";S((0,d.mb)(D.rootStateKey,(0,s.z7)({infoText:O})))},C=D=>(P,S)=>{const x=(0,o.S_)(S()),M={...(0,t.cloneDeep)(g.Js),datasource:D.datasource,name:c,id:c,rootStateKey:x},R=!1,O=(0,o.Eo)(x,S()),T={type:"adhoc",id:M.id,rootStateKey:x};P((0,d.mb)(x,(0,l.VN)((0,a.Y6)(T,{global:R,model:M,index:O}))))},u=(D,P)=>{const S=(0,o.S_)(P),x=(0,o.AE)(S,P);return Object.values(x.variables).find(M=>(0,r.Kn)(M)&&M.datasource?.uid===D.datasource.uid)}},80280:(j,I,e)=>{"use strict";e.d(I,{F:()=>D});var t=e(27702),n=e(95578),i=e(65322),s=e(92472),r=e(73453),m=e(5926);const d=90,o=({datasource:P,onChange:S,disabled:x,filterKey:M,getTagKeysOptions:R})=>{const O=()=>c(P,R),T=()=>h(P,R);return M===null?t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},t.createElement(s.V,{disabled:x,className:"query-segment-key",Component:g,value:M,onChange:S,loadOptions:O,inputMinWidth:d})):t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},t.createElement(s.V,{disabled:x,className:"query-segment-key",value:M,onChange:S,loadOptions:T,inputMinWidth:d}))},l="-- remove filter --",a={label:l,value:l},g=t.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},t.createElement(r.J,{name:"plus"})),c=async(P,S)=>{const x=await(0,m.ak)().get(P);return!x||!x.getTagKeys?[]:(await x.getTagKeys(S)).map(R=>({label:R.text,value:R.text}))},h=async(P,S)=>{const x=await c(P,S);return[a,...x]},f=({datasource:P,disabled:S,onChange:x,filterKey:M,filterValue:R,placeHolder:O})=>{const T=()=>b(P,M);return t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},t.createElement(s.V,{className:"query-segment-value",disabled:S,placeholder:O,value:R,onChange:x,loadOptions:T}))},b=async(P,S)=>{const x=await(0,m.ak)().get(P);return!x||!x.getTagValues?[]:(await x.getTagValues({key:S})).map(R=>({label:R.text,value:R.text}))},v=["=","!=","<",">","=~","!~"].map(P=>({label:P,value:P})),y=({value:P,disabled:S,onChange:x})=>t.createElement(n.X,{className:"query-segment-operator",value:P,disabled:S,options:v,onChange:x}),E=({datasource:P,filter:{key:S,operator:x,value:M},onKeyChange:R,onOperatorChange:O,onValueChange:T,placeHolder:U,getTagKeysOptions:L,disabled:V})=>t.createElement(t.Fragment,null,t.createElement(o,{disabled:V,datasource:P,filterKey:S,onChange:R,getTagKeysOptions:L}),t.createElement("div",{className:"gf-form"},t.createElement(y,{disabled:V,value:x,onChange:O})),t.createElement(f,{disabled:V,datasource:P,filterKey:S,filterValue:M,onChange:T,placeHolder:U})),C=({datasource:P,appendBefore:S,onCompleted:x,getTagKeysOptions:M})=>{const[R,O]=(0,t.useState)(null),[T,U]=(0,t.useState)("="),L=(0,t.useCallback)(K=>{if(K.value!==l){O(K.value??"");return}O(null)},[O]),V=(0,t.useCallback)(K=>U(K.value??""),[U]),w=(0,t.useCallback)(K=>{x({value:K.value??"",operator:T,condition:"",key:R}),O(null),U("=")},[x,T,R]);return R===null?t.createElement(o,{datasource:P,filterKey:R,onChange:L,getTagKeysOptions:M}):t.createElement(t.Fragment,{key:"filter-builder"},S,t.createElement(E,{datasource:P,filter:{key:R,value:"",operator:T,condition:""},placeHolder:(0,i.t)("variable.adhoc.placeholder","Select value"),onKeyChange:L,onOperatorChange:V,onValueChange:w,getTagKeysOptions:M}))},u=({label:P})=>t.createElement("div",{className:"gf-form"},t.createElement("span",{className:"gf-form-label query-keyword"},P));class D extends t.PureComponent{constructor(){super(...arguments),this.onChange=(S,x)=>M=>{const{filters:R}=this.props,{value:O}=M;return M.value===l?this.props.removeFilter(S):this.props.changeFilter(S,{...R[S],[x]:O})},this.appendFilterToVariable=S=>{this.props.addFilter(S)}}render(){const{filters:S,disabled:x}=this.props;return t.createElement("div",{className:"gf-form-inline"},this.renderFilters(S,x),!x&&t.createElement(C,{datasource:this.props.datasource,appendBefore:S.length>0?t.createElement(u,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions}))}renderFilters(S,x){return S.length===0&&x?t.createElement(n.X,{disabled:x,value:"No filters",options:[],onChange:()=>{}}):S.reduce((M,R,O)=>(M.length>0&&M.push(t.createElement(u,{label:"AND",key:`condition-${O}`})),M.push(this.renderFilterSegments(R,O,x)),M),[])}renderFilterSegments(S,x,M){return t.createElement(t.Fragment,{key:`filter-${x}`},t.createElement(E,{disabled:M,datasource:this.props.datasource,filter:S,onKeyChange:this.onChange(x,"key"),onOperatorChange:this.onChange(x,"operator"),onValueChange:this.onChange(x,"value"),getTagKeysOptions:this.props.getTagKeysOptions}))}}},26333:(j,I,e)=>{"use strict";e.d(I,{DO:()=>o,Js:()=>r,QL:()=>d,aM:()=>a,e_:()=>l,jo:()=>g});var t=e(34099),n=e(6230),i=e(51824),s=e(18918);const r={...n.Eg,type:"adhoc",datasource:null,filters:[]},m=(0,t.oM)({name:"templating/adhoc",initialState:s.s,reducers:{filterAdded:(c,h)=>{const f=(0,i.ir)(c,h.payload.id);f.type==="adhoc"&&f.filters.push(h.payload.data)},filterRemoved:(c,h)=>{const f=(0,i.ir)(c,h.payload.id);if(f.type!=="adhoc")return;const b=h.payload.data;f.filters.splice(b,1)},filterUpdated:(c,h)=>{const f=(0,i.ir)(c,h.payload.id);if(f.type!=="adhoc")return;const{filter:b,index:v}=h.payload.data;f.filters[v]=b},filtersRestored:(c,h)=>{const f=(0,i.ir)(c,h.payload.id);f.type==="adhoc"&&(f.filters=h.payload.data)}}}),{filterAdded:d,filterRemoved:o,filterUpdated:l,filtersRestored:a}=m.actions,g=m.reducer},80169:(j,I,e)=>{"use strict";e.d(I,{BH:()=>s,IG:()=>m,QX:()=>r,UY:()=>t,r2:()=>i,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",i="$__all",s="None",r="",m="var-"},46241:(j,I,e)=>{"use strict";e.d(I,{R:()=>o,z:()=>d});var t=e(87911),n=e(27702),i=e(74639),s=e(66310),r=e(60105),m=e(62981);const d="Grafana-LegacyVariableQueryEditor",o=({onChange:l,query:a})=>{const g=(0,s.wW)(m.w),[c,h]=(0,n.useState)(a),f=y=>{h(y.currentTarget.value)},b=(0,n.useCallback)(y=>{l(y.currentTarget.value,y.currentTarget.value)},[l]),v=(0,t.Me)();return n.createElement(r.K,{id:v,rows:2,value:c,onChange:f,onBlur:b,placeholder:"Metric name or tags query",required:!0,"aria-label":i.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:g.textarea})};o.displayName=d},95774:(j,I,e)=>{"use strict";e.d(I,{e:()=>r});var t=e(42844),n=e(27702),i=e(66310),s=e(12375);function r({className:d,...o}){const l=(0,i.wW)(m);return n.createElement(s.D,{...o,className:(0,t.cx)(l.legend,d)})}function m(d){return{legend:(0,t.css)({marginTop:d.spacing(3),marginBottom:d.spacing(1)})}}},1781:(j,I,e)=>{"use strict";e.d(I,{u:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(22209),r=e(28580);function m({name:o,description:l,value:a,options:g,onChange:c,testId:h,width:f}){const b=(0,i.wW)(d),v=(0,n.useId)(),y=`variable-select-input-${o}-${v}`;return n.createElement(s.g,{label:o,description:l,htmlFor:y},n.createElement("div",{"data-testid":h},n.createElement(r.Ph,{inputId:y,onChange:c,value:a,width:f??30,options:g,className:b.selectContainer})))}function d(o){return{selectContainer:(0,t.css)`
      margin-right: ${o.spacing(.5)};
    `}}},62981:(j,I,e)=>{"use strict";e.d(I,{W:()=>d,w:()=>o});var t=e(42844),n=e(87911),i=e(27702),s=e(66310),r=e(22209),m=e(60105);function d({value:l,name:a,description:g,placeholder:c,onChange:h,onBlur:f,ariaLabel:b,required:v,width:y,testId:E}){const C=(0,s.wW)(o),u=(0,n.Me)();return i.createElement(r.g,{label:a,description:g,htmlFor:u},i.createElement(m.K,{id:u,rows:2,value:l,onChange:h,onBlur:f,placeholder:c,required:v,"aria-label":b,cols:y,className:C.textarea,"data-testid":E}))}function o(l){return{textarea:(0,t.css)`
      white-space: pre-wrap;
      min-height: ${l.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${l.spacing(.75,1)};
      width: inherit;
    `}}},24446:(j,I,e)=>{"use strict";e.d(I,{V:()=>r});var t=e(87911),n=e(27702),i=e(22209),s=e(1128);function r({value:m,name:d,placeholder:o="",onChange:l,testId:a,width:g,required:c,onBlur:h,grow:f,description:b,invalid:v,error:y,maxLength:E}){const C=(0,t.Me)(d);return n.createElement(i.g,{label:d,description:b,invalid:v,error:y,htmlFor:C},n.createElement(s.I,{type:"text",id:C,placeholder:o,value:m,onChange:l,onBlur:h,width:f?void 0:g??30,"data-testid":a,maxLength:E,required:c}))}},39655:(j,I,e)=>{"use strict";e.d(I,{PF:()=>n,PV:()=>g,QR:()=>c,Sg:()=>a,Yo:()=>r,gl:()=>s,qe:()=>o,wJ:()=>d,y8:()=>m,z7:()=>l});var t=e(34099);const n={id:"",isValid:!0,errors:{},name:"",extended:null},i=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(h,f)=>{h.name=f.payload.name,h.id=f.payload.id},variableEditorUnMounted:(h,f)=>n,changeVariableNameSucceeded:(h,f)=>{h.name=f.payload.data.newName,delete h.errors.name,h.isValid=Object.keys(h.errors).length===0},changeVariableNameFailed:(h,f)=>{h.name=f.payload.newName,h.errors.name=f.payload.errorText,h.isValid=Object.keys(h.errors).length===0},addVariableEditorError:(h,f)=>{h.errors[f.payload.errorProp]=f.payload.errorText,h.isValid=Object.keys(h.errors).length===0},removeVariableEditorError:(h,f)=>{delete h.errors[f.payload.errorProp],h.isValid=Object.keys(h.errors).length===0},changeVariableEditorExtended:(h,f)=>{h.extended={...h.extended,...f.payload}},cleanEditorState:()=>n}}),s=i.reducer,{changeVariableNameSucceeded:r,changeVariableNameFailed:m,variableEditorMounted:d,variableEditorUnMounted:o,changeVariableEditorExtended:l,addVariableEditorError:a,removeVariableEditorError:g,cleanEditorState:c}=i.actions},75627:(j,I,e)=>{"use strict";e.d(I,{c:()=>s});var t=e(39317),n=e(41355),i=e(80169);function s(r){const m={},d=(0,t.J)().getVariables();for(let o=0;o<d.length;o++){const l=d[o],a=r&&r[l.name];l.skipUrlSync||(a?m[i.IG+l.name]=a.value:m[i.IG+l.name]=n.z.get(l.type).getValueForUrl(l))}return m}},5399:(j,I,e)=>{"use strict";e.d(I,{$7:()=>b,Ju:()=>g,Kn:()=>s,Kr:()=>o,NX:()=>f,R:()=>a,U4:()=>m,VC:()=>r,X7:()=>h,Xh:()=>i,d7:()=>c,eL:()=>d});var t=e(79726),n=e(46241);const i=v=>v.type==="query",s=v=>v.type==="adhoc",r=v=>v.type==="constant",m=v=>"multi"in v,d=v=>"options"in v,o=v=>"current"in v;function l(v){return v===null?!1:typeof v=="string"}const a=v=>!!v.metricFindQuery&&!v.variables,g=v=>{if(!v.variables||v.variables.getType()!==t.j2.Standard)return!1;const y=v.variables;return"toDataQuery"in y&&!!y.toDataQuery},c=v=>{if(!v.variables||v.variables.getType()!==t.j2.Custom)return!1;const y=v.variables;return"query"in y&&"editor"in y&&!!y.query&&!!y.editor},h=v=>v.variables?v.variables.getType()===t.j2.Datasource:!1;function f(v,y){return v?v.displayName===n.z||a(y):!1}function b(v,y){return v?v.displayName!==n.z&&(h(y)||g(y)||c(y)):!1}},24877:(j,I,e)=>{"use strict";e.d(I,{Kf:()=>n,iV:()=>s,j4:()=>r});var t=e(34099);const n={usages:[],usagesNetwork:[]},i=(0,t.oM)({name:"templating/inspect",initialState:n,reducers:{initInspect:(m,d)=>{const{usages:o,usagesNetwork:l}=d.payload;m.usages=o,m.usagesNetwork=l}}}),s=i.reducer,{initInspect:r}=i.actions},44068:(j,I,e)=>{"use strict";e.d(I,{MJ:()=>g,GQ:()=>l,V:()=>v,Of:()=>a,PQ:()=>C,dH:()=>R,Yg:()=>y,Rv:()=>x,vI:()=>P});var t=e(3569);function n(O,T){const U=new Set;for(const L of O)U.add(T(L));return U}var i=e(89167),s=e(89024),r=e(73170),m=e(41355),d=e(5399),o=e(81587);const l=O=>{const T=[];for(const U of O)T.push({id:U.id,label:`${U.id}`});return T},a=(O,T)=>O.filter(U=>T.some(L=>L.from===U.id||L.to===U.id)),g=O=>{const T=[];for(const U of O)for(const L of O){if(U===L)continue;m.z.get(U.type).dependsOn(U,L)&&T.push({from:U.id,to:L.id})}return T};function c(O){const T=(0,o.a9)(O);return T?T.slice(1).find(L=>L!==void 0):void 0}const h=(O,T)=>{o.J7.lastIndex=0;const U=[],V=(0,s.Xh)(T,2).match(o.J7);if(!V)return U;for(const w of V){if(!w||w.indexOf("$__")!==-1||w.indexOf("${__")!==-1||w.indexOf("$hashKey")!==-1)continue;const K=c(w);O.some(B=>B.id===K)||U.find(B=>B===K)||K&&U.push(K)}return U},f={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},b=(O,T,U)=>{const L=Object.keys(T.value).reduce((w,K)=>{const B=T.value[K];if(!B||typeof B!="string")return w;const W=f[K]?f[K].find(k=>k.test(O)):void 0;let _=(0,o.QI)(B,O);return K==="repeat"&&B===O&&(_=!0),!W&&_&&(w={...w,[K]:B}),w},{}),V=Object.keys(T.value).reduce((w,K)=>{const B=T.value[K];if(B&&typeof B=="object"&&Object.keys(B).length){let W=B.title||B.name||B.id||K;Array.isArray(T.value)&&T.key==="panels"&&(W=`${W}[${B.id}]`);const _=b(O,{key:K,value:B},{});Object.keys(_).length&&(w={...w,[W]:_})}return w},{});return(Object.keys(L).length||Object.keys(V).length)&&(U={...U,...L,...V}),U},v=(O,T)=>{if(!T)return{unUsed:[],usages:[]};const U=[];let L=[];const V=T.getSaveModelClone();for(const w of O){const K=w.id,B=b(K,{key:"model",value:V},{});!Object.keys(B).length&&!(0,d.Kn)(w)&&U.push(w),Object.keys(B).length&&L.push({variable:w,tree:B})}return{unUsed:U,usages:L}};async function y(O,T){return new Promise((U,L)=>{setTimeout(()=>{try{const V=E(O,T);U(P(V))}catch(V){L(V)}},200)})}function E(O,T){if(!T)return[];let U=[];const L=T.getSaveModelClone(),V=h(O,L);for(const w of V){const K=b(w,{key:"model",value:L},{});if(Object.keys(K).length){const B={id:w,name:w};U.push({variable:B,tree:K})}}return U}function C(O,T,U){const L=n(T.descendants(O),w=>w.name);L.add(t.W.includeVars);for(const w of O)L.add(w);return u([...L],U)}function u(O,T){const U=[];for(const L of O)T[L]&&U.push(...T[L]);return new Set(U)}const D=(O,T)=>{const{id:U,value:L}=T,{nodes:V,edges:w}=O;if(L&&typeof L=="string"){const K=`${T.id}-${L}`;return V.push({id:K,label:L}),w.push({from:K,to:U}),O}if(L&&typeof L=="object"){const K=Object.keys(L);for(const B of K){const W=`${T.id}-${B}`;V.push({id:W,label:B}),w.push({from:W,to:U}),O=D(O,{id:W,value:L[B]})}return O}return O},P=O=>{const T=[];for(const U of O){const{variable:L,tree:V}=U,w={variable:L,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};T.push(D(w,{id:"dashboard",value:V}))}return T},S=O=>Object.values(O).reduce((U,L)=>typeof L=="object"?U+S(L):U+1,0),x=(O,T)=>{const U=T.find(L=>L.variable.id===O);return U?S(U.tree):0};function M(O){const T=[];for(const U of O)T.push(U),U.panels?.length&&T.push(...M(U.panels.map(L=>new PanelModel(L))));return T}function R(O){const T={};for(const U of O){const L=(0,i.Jg)(U),V=[...L.matchAll(/"repeat":"([^"]+)"/g)].map(B=>B[1]),w=L.match(o.J7)?.map(B=>c(B))??[],K=[...V,...w];for(const B of K)B in T?T[B].add(U.id):T[B]=new Set([U.id])}return T}},44042:(j,I,e)=>{"use strict";e.d(I,{XJ:()=>S,nn:()=>y,yy:()=>d,Ew:()=>E,cv:()=>x,aN:()=>v,iQ:()=>C,_M:()=>b,ss:()=>D,wF:()=>P,Ug:()=>u});var t=e(34099),n=e(89949),i=e(83505);const s=(M,...R)=>R.reduce((O,T)=>T(O),M);var r=e(80169),m=e(5399);const d={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},o=1e3,l=M=>Array.isArray(M)?M.reduce((R,O)=>((0,n.isString)(O.value)&&(R[O.value]=O),R),{}):{},a=M=>{if(!Array.isArray(M.options))return M.options=[],M;const R=l(M.selectedValues);return M.selectedValues=Object.values(R),M.options=M.options.map(O=>{if(!(0,n.isString)(O.value))return O;const T=!!R[O.value];return O.selected===T?O:{...O,selected:T}}),M.options=g(M.options),M},g=M=>Array.isArray(M)?M.length<=o?M:M.slice(0,o):[],c=M=>{const{options:R,selectedValues:O}=M;return R.length===0||O.length>0||!R[0]||R[0].value!==r.r2||(M.selectedValues=[{...R[0],selected:!0}]),M},h=M=>{const{selectedValues:R}=M;return R.length>1&&(M.selectedValues=R.filter(O=>O.value!==r.r2)),M},f=(0,t.oM)({name:"templating/optionsPicker",initialState:d,reducers:{showOptions:(M,R)=>{const{query:O,options:T}=R.payload;if(M.highlightIndex=-1,M.options=(0,n.cloneDeep)(T),M.id=R.payload.id,M.queryValue="",M.multi=!1,(0,m.U4)(R.payload)&&(M.multi=R.payload.multi??!1),(0,m.Xh)(R.payload)){const{queryValue:U}=R.payload,L=(0,i.b)(O);M.queryValue=L&&U?U:""}return M.selectedValues=M.options.filter(U=>U.selected),s(M,c,a)},hideOptions:(M,R)=>({...d}),toggleOption:(M,R)=>{const{option:O,clearOthers:T,forceSelect:U}=R.payload,{multi:L,selectedValues:V}=M;if(O){const w=!V.find(K=>K.value===O.value&&K.text===O.text);if(O.value===r.r2||!L||T)return w||U?M.selectedValues=[{...O,selected:!0}]:M.selectedValues=[],s(M,c,h,a);if(U||w)return M.selectedValues.push({...O,selected:!0}),s(M,c,h,a);M.selectedValues=V.filter(K=>K.value!==O.value&&K.text!==O.text)}else M.selectedValues=[];return s(M,c,h,a)},moveOptionsHighlight:(M,R)=>{let O=M.highlightIndex+R.payload;return O<0?O=-1:O>=M.options.length&&(O=M.options.length-1),{...M,highlightIndex:O}},toggleAllOptions:(M,R)=>M.selectedValues.length>0?(M.selectedValues=[],s(M,a)):(M.selectedValues=M.options.filter(O=>O.value!==r.r2).map(O=>({...O,selected:!0})),s(M,a)),updateSearchQuery:(M,R)=>(M.queryValue=R.payload,M),updateOptionsAndFilter:(M,R)=>{const O=(0,n.trimStart)((M.queryValue??"").toLowerCase());return M.options=R.payload.filter(T=>{const U=T.text??"";return(Array.isArray(U)?U.toString():U).toLowerCase().indexOf(O)!==-1}),M.highlightIndex=0,s(M,c,a)},updateOptionsFromSearch:(M,R)=>(M.options=R.payload,M.highlightIndex=0,s(M,c,a)),cleanPickerState:()=>d}}),{toggleOption:b,showOptions:v,hideOptions:y,moveOptionsHighlight:E,toggleAllOptions:C,updateSearchQuery:u,updateOptionsAndFilter:D,updateOptionsFromSearch:P,cleanPickerState:S}=f.actions,x=f.reducer},21791:(j,I,e)=>{"use strict";e.d(I,{x:()=>t});const t=(s,r)=>s&&(r&&!Array.isArray(s.value)?{...s,value:i(s.value),text:i(s.text)}:!r&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,i=s=>Array.isArray(s)?s:[s]},4684:(j,I,e)=>{"use strict";e.d(I,{Ci:()=>X,DU:()=>re,Fz:()=>Z,LX:()=>de,MB:()=>ce,Rk:()=>Ue,Z7:()=>W,kG:()=>_e,wX:()=>Je,xQ:()=>oe,xs:()=>Se});var t=e(89949),n=e.n(t),i=e(59421),s=e(53933),r=e(17312),m=e(26129),d=e(34667),o=e(33877),l=e(91368),a=e(26858),g=e(84749),c=e(73807),h=e(66574),f=e(45937),b=e(2567),v=e(5926),y=e(99386),E=e(41355),C=e(80169),u=e(39655),D=e(5399),P=e(44068),S=e(44042),x=e(21791),M=e(6230),R=e(81587),O=e(1941),T=e(51824),U=e(60344),L=e(67273),V=e(96637);const w=(Me,De)=>(We,qe)=>{let st=0;const dt=De.templating.list;for(let Nt=0;Nt<dt.length;Nt++){const Bt=K(dt[Nt]);Bt.rootStateKey=Me,E.z.getIfExists(Bt.type)&&We((0,O.mb)(Me,(0,U.VN)((0,R.Y6)(Bt,{global:!1,index:st++,model:Bt}))))}(0,y.J)().updateTimeRange((0,a.$t)().timeRange());const Tt=(0,T.gt)(Me,qe());for(const Nt of Tt)We((0,O.mb)(Me,(0,U.Mn)((0,R.Y6)(Nt))))};function K(Me){if(!(0,D.eL)(Me))return Me;let De=!1;for(const We of Me.options)if(We.selected=!1,Array.isArray(Me.current.value))for(const qe of Me.current.value)We.value===qe&&(We.selected=De=!0);else We.value===Me.current.value&&(We.selected=De=!0);return!De&&Me.options.length&&(Me.options[0].selected=!0),Me}const B=(Me,De)=>We=>{const qe={...M.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:M.bU.hideVariable,current:{value:{name:De.title,uid:De.uid,toString:()=>De.title}}};We((0,O.mb)(Me,(0,U.VN)((0,R.Y6)(qe,{global:qe.global,index:qe.index,model:qe}))));const st={...M.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:M.bU.hideVariable,current:{value:{name:l.contextSrv.user.orgName,id:l.contextSrv.user.orgId,toString:()=>l.contextSrv.user.orgId.toString()}}};We((0,O.mb)(Me,(0,U.VN)((0,R.Y6)(st,{global:st.global,index:st.index,model:st}))));const dt={...M.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:M.bU.hideVariable,current:{value:{login:l.contextSrv.user.login,id:l.contextSrv.user.id,email:l.contextSrv.user.email,toString:()=>l.contextSrv.user.id.toString()}}};We((0,O.mb)(Me,(0,U.VN)((0,R.Y6)(dt,{global:dt.global,index:dt.index,model:dt}))))},W=(Me,De)=>(We,qe)=>{const{rootStateKey:st}=Me,dt=(0,T.E0)(Me,qe());if(!(0,D.U4)(dt)||(0,i.Q)(dt.current))return;const Tt=(0,x.x)(dt.current,De);We((0,O.mb)(st,(0,U.Pl)((0,R.Y6)(Me,{propName:"multi",propValue:De})))),We((0,O.mb)(st,(0,U.Pl)((0,R.Y6)(Me,{propName:"current",propValue:Tt}))))},_=async(Me,De)=>{if(!Me.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Me.id}`);if(k(Me,De))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const We=A(Me,De);z(Me.rootStateKey,We,De)&&await new Promise(qe=>{const st=g.h.subscribe(()=>{if(!Me.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${Me.id}`);z(Me.rootStateKey,We,g.h.getState())||(st(),qe())})})},k=(Me,De,We=new Set)=>We.has(Me.id)?!0:(We=new Set([...We,Me.id]),A(Me,De).some(qe=>k(qe,De,We))),A=(Me,De)=>{if(!Me.rootStateKey)return[];const We=[];for(const qe of(0,T.gt)(Me.rootStateKey,De))Me!==qe&&E.z.getIfExists(Me.type)&&E.z.get(Me.type).dependsOn(Me,qe)&&We.push(qe);return We},z=(Me,De,We)=>{if(De.length===0)return!1;const qe=(0,T.gt)(Me,We);return De.filter(dt=>qe.some(Tt=>Tt.id===dt.id&&(Tt.state===s.Gu.NotStarted||Tt.state===s.Gu.Loading))).length>0},H=(Me,De)=>async(We,qe)=>{const st=(0,T.E0)(Me,qe());await _(st,qe());const dt=De[C.IG+st.name];if(dt!==void 0){const Tt=(0,R.Hi)(dt);await E.z.get(st.type).setValueFromUrl(st,Tt);return}if(st.hasOwnProperty("refresh")){const Tt=st;if(Tt.refresh===M.Bd.onDashboardLoad||Tt.refresh===M.Bd.onTimeRangeChanged){await We(Ue((0,R.yQ)(Tt)));return}}We(Qe(Me))},Q=Me=>async(De,We)=>{const qe=m.E1.getSearchObject(),st=(0,T.gt)(Me,We()).map(async dt=>await De(H((0,R.yQ)(dt),qe)));await Promise.all(st)},X=(Me,De)=>async(We,qe)=>{const st=(0,R.Hi)(De),dt=(0,T.E0)(Me,qe());(0,R.iD)(dt)!==M.Bd.never&&await We(Ue((0,R.yQ)(dt)));const Tt=(0,T.E0)((0,R.yQ)(dt),qe());if(!(0,D.eL)(Tt))return;if(!Tt)throw new Error(`Couldn't find variable with name: ${dt.name}`);let Nt=Tt.options.find(Bt=>Bt.text===st||Bt.value===st);if(!Nt&&(0,D.U4)(Tt)&&Tt.allValue&&st===Tt.allValue&&(Nt={text:C.xk,value:C.r2,selected:!1}),!Nt){let Bt=st;const yt=st;Array.isArray(st)&&(Bt=st.reduce((ft,ct)=>{const ge=Tt.options.find(Be=>Be.value===ct);return ge?[].concat(ft,[ge.text]):[].concat(ft,[ct])},[])),Nt={text:Bt,value:yt,selected:!1}}(0,D.U4)(Tt)&&(Nt=(0,x.x)({text:(0,t.castArray)(Nt.text),value:(0,t.castArray)(Nt.value),selected:!1},Tt.multi)),await E.z.get(dt.type).setValue(Tt,Nt)},te=Me=>{let De,We,qe,st;const dt=[];for(De=0;De<Me.options.length;De++)if(st={...Me.options[De]},st.selected=!1,Array.isArray(Me.current.value))for(We=0;We<Me.current.value.length;We++)qe=Me.current.value[We],st.value===qe&&(st.selected=!0,dt.push(st));else st.value===Me.current.value&&(st.selected=!0,dt.push(st));return dt},oe=(Me,De)=>(We,qe)=>{const st=(0,T.E0)(Me,qe());if(!(0,D.eL)(st))return Promise.resolve();const dt=st.current||{},Tt=E.z.get(st.type).setValue;if(Array.isArray(dt.value)){const ft=te(st);if(ft.length===0){const ge=st.options[0];return Tt(st,ge)}const ct={value:ft.map(ge=>ge.value),text:ft.map(ge=>ge.text),selected:!0};return Tt(st,ct)}let Nt=null;const Bt=(0,R.Tt)(st),yt=(0,R.N9)(st);if(Nt=st.options?.find(ft=>ft.text===Bt||ft.value===yt),Nt||De&&(Nt=st.options?.find(ft=>ft.text===De||ft.value===De),Nt))return Tt(st,Nt);if(st.options){const ft=st.options[0];if(ft)return Tt(st,ft)}return Promise.resolve()},Z=(Me,De,We)=>async qe=>{const{rootStateKey:st}=Me;return qe((0,O.mb)(st,(0,U.Q8)((0,R.Y6)(Me,{option:De})))),await qe(ce(Me,We))},le=Me=>{const De=new b.kJ;return Me.forEach(We=>{De.createNode(We.name)}),Me.forEach(We=>{Me.forEach(qe=>{We!==qe&&E.z.get(We.type).dependsOn(We,qe)&&De.link(We.name,qe.name)})}),De},ce=(Me,De,We=h.h$)=>async(qe,st)=>{const dt=st(),{rootStateKey:Tt}=Me,Nt=(0,T.E0)(Me,dt);if((0,T.AE)(Tt,dt).transaction.status===M.LN.Fetching)return(0,R.iD)(Nt)===M.Bd.never&&(await qe(tt((0,R.yQ)(Nt))),qe(Qe(Me))),Promise.resolve();const Bt=(0,T.gt)(Tt,dt),yt=le(Bt),ft=dt.dashboard?.getModel()?.panels??[],ct=(0,P.dH)(ft),ge=(0,D.Kn)(Nt)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,P.PQ)([Nt.id],yt,ct))},Be=yt.getNode(Nt.name);let Le=[];return Be&&(Le=Be.getOptimizedInputEdges().map(he=>{const He=Bt.find(Pe=>Pe.name===he.inputNode?.name);return He?qe(Ue((0,R.yQ)(He))):Promise.resolve()})),Promise.all(Le).then(()=>{De&&(We.publish(new M.x9(ge)),m.E1.partial(Ce(Tt,st)))})},q=(Me,De,We,qe)=>(De.includes(Me.name)||De.push(Me.name),Me.outputEdges.forEach(st=>{const dt=st.outputNode;if(dt&&!De.includes(dt.name)){const Tt=We.find(Nt=>Nt.name===dt.name);Tt&&Tt.refresh===M.Bd.onTimeRangeChanged&&qe.indexOf(Tt)===-1?(qe.push(Tt),De.push(dt.name)):q(dt,De,We,qe)}}),qe),ne=(Me,De)=>{const We=(0,T.gt)(Me,De),qe=le(We),st=[],dt=[];return We.forEach(Tt=>{const Nt=qe.getNode(Tt.name);if(!st.includes(Tt.name)&&Nt){const Bt=We.find(ft=>ft.name===Nt.name),yt=Bt&&Bt.refresh===M.Bd.onTimeRangeChanged;yt&&Nt.outputEdges.length===0&&dt.push(Bt),yt&&dt.includes(Bt)&&Nt.outputEdges.length>0&&(dt.push(Bt),q(Nt,st,We,dt)),Bt&&Bt.refresh&&Bt.refresh!==M.Bd.onTimeRangeChanged&&q(Nt,st,We,dt)}}),dt},pe=(Me,De)=>(0,T.gt)(Me,De).filter(st=>st.hasOwnProperty("refresh")&&st.hasOwnProperty("options")?st.refresh===M.Bd.onTimeRangeChanged:!1),re=(Me,De,We={templateSrv:(0,y.J)(),events:h.h$})=>async(qe,st)=>{We.templateSrv.updateTimeRange(De);let dt=[];d.config.featureToggles.refactorVariablesTimeRange?dt=ne(Me,st()):dt=pe(Me,st());const Tt=dt.map(Bt=>Bt.id),Nt=dt.map(Bt=>qe(ie((0,R.yQ)(Bt))));try{await Promise.all(Nt),We.events.publish(new M.eq({variableIds:Tt}))}catch(Bt){console.error(Bt),qe((0,o.$l)($e("Template variable service failed",Bt)))}},ie=Me=>async(De,We)=>{const qe=(0,T.E0)(Me,We());if(!(0,D.eL)(qe))return;const st=qe.options.slice();await De(Ue((0,R.yQ)(qe),!0));const dt=(0,T.E0)(Me,We());if(!(0,D.eL)(dt))return;const Tt=dt.options;JSON.stringify(st)!==JSON.stringify(Tt)&&We().dashboard.getModel()?.templateVariableValueUpdated()},Se=(Me,De,We=h.h$)=>async(qe,st)=>{const dt=[],Tt=st().dashboard.getModel(),Nt=(0,T.gt)(Me,st());for(const ge of Nt){const Be=C.IG+ge.name;if(!De.hasOwnProperty(Be)||!ye(ge,De[Be].value))continue;let Le=De[Be].value;if(De[Be].removed){const He=Tt?.templating.list.find(Pe=>Pe.name===ge.name);He&&(0,D.Kr)(He)&&(Le=He.current.value),He&&(0,D.VC)(He)&&(Le=He.query)}const he=E.z.get(ge.type).setValueFromUrl(ge,Le);dt.push(he)}const Bt=Nt.filter(ge=>{const Be=C.IG+ge.name;return De.hasOwnProperty(Be)&&ye(ge,De[Be].value)&&!(0,D.Kn)(ge)}),yt=le(Nt),ft=(0,P.dH)(Tt?.panels??[]),ct=(0,P.PQ)(Bt.map(ge=>ge.id),yt,ft);dt.length&&(await Promise.all(dt),We.publish(new M.Wy({refreshAll:ct.size===0,panelIds:Array.from(ct)})))};function ye(Me,De){const We=E.z.get(Me.type).getValueForUrl(Me);let qe=(0,R.Hi)(De);return Array.isArray(We)&&!Array.isArray(qe)&&(qe=[qe]),!(0,t.isEqual)(We,qe)}const Ce=(Me,De)=>{const We=m.E1.getSearchObject(),qe=Object.keys(We).filter(st=>st.indexOf(C.IG)===-1).reduce((st,dt)=>(st[dt]=We[dt],st),{});for(const st of(0,T.gt)(Me,De())){if(st.skipUrlSync)continue;const dt=E.z.get(st.type);qe[C.IG+st.name]=dt.getValueForUrl(st)}return qe},de=(Me,De)=>async(We,qe)=>{try{const st=(0,R.mn)(Me),dt=qe(),Tt=(0,T.cp)(dt);Tt&&(0,T.AE)(Tt,dt).transaction.status===M.LN.Fetching&&We(Je(Tt)),We((0,O.mb)(st,(0,L.Z9)({uid:st}))),We(B(st,De)),We(w(st,De)),We(we(st)),await We(Q(st)),We((0,O.mb)(st,(0,L.iv)({uid:st})))}catch(st){We((0,o.$l)($e("Templating init failed",st))),console.error(st)}};function we(Me,De=v.ak){return(We,qe)=>{const st=(0,T.gt)(Me,qe());for(const dt of st){if(!(0,D.Kn)(dt)&&!(0,D.Xh)(dt))continue;const{datasource:Tt}=dt;if((0,r.cv)(Tt))continue;const Nt=De().getInstanceSettings(Tt),Bt=Nt?(0,r.iU)(Nt):{uid:Tt};We((0,O.mb)(Me,(0,U.Pl)((0,R.Y6)(dt,{propName:"datasource",propValue:Bt}))))}}}const _e=Me=>De=>{De((0,O.mb)(Me,(0,V.S)())),De((0,O.mb)(Me,(0,u.QR)())),De((0,O.mb)(Me,(0,S.XJ)())),De((0,O.mb)(Me,(0,L.p3)()))},Je=(Me,De={getBackendSrv:f.i})=>We=>{De.getBackendSrv().cancelAllInFlightRequests(),We(_e(Me))},Ue=(Me,De=!1)=>async(We,qe)=>{const{rootStateKey:st}=Me;try{if(!(0,R.A3)(st,qe()))return;const dt=(0,T.E0)(Me,qe());We((0,O.mb)(st,(0,U.$M)((0,R.Y6)(dt)))),await We(tt((0,R.yQ)(dt))),await E.z.get(dt.type).updateOptions(dt),We(Qe(Me))}catch(dt){if(We((0,O.mb)(st,(0,U.Le)((0,R.Y6)(Me,{error:dt})))),De||(console.error(dt),We((0,o.$l)($e("Error updating options:",dt,Me)))),De)throw dt}},$e=(Me,De,We)=>(0,c.t_)(`${We?`Templating [${We.id}]`:"Templating"}`,`${Me} ${De.message}`),Qe=Me=>(De,We)=>{const{rootStateKey:qe}=Me;if(!(0,R.A3)(qe,We()))return;const st=(0,T.E0)(Me,We());st.state!==s.Gu.Done&&De((0,O.mb)(Me.rootStateKey,(0,U.qQ)((0,R.Y6)(st))))};function tt(Me,De=v.ak){return async function(We,qe){const{id:st,rootStateKey:dt}=Me;if(!(0,R.A3)(dt,qe()))return;const Tt=(0,T.E0)(Me,qe());if(Tt.type==="query")try{const Nt=await De().get(Tt.datasource??"");if((0,D.R)(Nt)||!(0,D.Ju)(Nt)||lt(Tt.query))return;const Bt={refId:`${Nt.name}-${st}-Variable-Query`,query:Tt.query};We((0,O.mb)(dt,(0,U.Pl)((0,R.Y6)(Me,{propName:"query",propValue:Bt}))))}catch(Nt){We((0,o.$l)($e("Failed to upgrade legacy queries",Nt))),console.error(Nt)}}}function lt(Me){return Me?Me.hasOwnProperty("refId")&&typeof Me.refId=="string":!1}},1941:(j,I,e)=>{"use strict";e.d(I,{ZP:()=>l,mb:()=>m,qM:()=>s});var t=e(81587),n=e(14836),i=e(67273);const s={keys:{}},r=a=>({type:`templating/keyed/${a.action.type.replace(/^templating\//,"")}`,payload:a});function m(a,g){const c=(0,t.mn)(a);return r({key:c,action:g})}const d=a=>typeof a.type=="string"&&a.type.startsWith("templating/keyed")&&"payload"in a&&typeof a.payload.key=="string";function o(a=s,g){if(d(g)){const{key:c,action:h}=g.payload,f=(0,t.mn)(c),b=i.Z9.match(h)?f:a.lastKey,v=(0,n.Q)(),y=a.keys[f],E=v(y,h);return{...a,lastKey:b,keys:{...a.keys,[f]:E}}}return a}const l={templating:o}},14836:(j,I,e)=>{"use strict";e.d(I,{L:()=>a,Q:()=>l});var t=e(33199),n=e(39655),i=e(24877),s=e(44042),r=e(67273),m=e(18918),d=e(96637);let o;function l(){return o||(o=(0,t.combineReducers)({editor:n.gl,variables:d.L,optionsPicker:s.cv,transaction:r.vw,inspect:i.iV})),o}function a(){return{editor:n.PF,variables:m.s,optionsPicker:s.yy,transaction:r.xO,inspect:i.Kf}}},51824:(j,I,e)=>{"use strict";e.d(I,{AE:()=>d,E0:()=>r,Eo:()=>c,IV:()=>a,Q4:()=>y,QT:()=>h,S_:()=>v,_K:()=>C,cp:()=>b,gt:()=>o,ir:()=>u,ng:()=>E,xD:()=>g});var t=e(82152),n=e(84749),i=e(81587),s=e(14836);function r(D,P=(0,n.y0)(),S=!0){const{id:x,rootStateKey:M}=D,O=d(M,P).variables[x];if(!O){if(S)throw new Error(`Couldn't find variable with id:${x}`);return}return O}function m(D,P,S=(0,n.y0)()){return Object.values(d(P,S).variables).filter(D).sort((x,M)=>x.index-M.index)}function d(D,P=(0,n.y0)()){return P.templating.keys[(0,i.mn)(D)]??(0,s.L)()}function o(D,P=(0,n.y0)()){return m(l,D,P)}function l(D){return D.type!=="system"}const a=(0,t.Z)((D,P)=>o(D,(0,n.y0)())),g=(D,P)=>o(D,P);function c(D,P=(0,n.y0)()){return h(Object.values(d(D,P).variables))}function h(D){const P=D.filter(l).sort((S,x)=>S.index-x.index);return P.length>0?P[P.length-1].index+1:0}function f(D,P=getState()){return d(D,P).transaction.isDirty}function b(D=(0,n.y0)()){return D.templating?.lastKey}function v(D=(0,n.y0)()){if(!D.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return D.templating.lastKey}function y(D,P=(0,n.y0)()){const S=b(P);return S?m(D,S,P):[]}function E(D=(0,n.y0)()){const P=b(D);return P?o(P,D):[]}function C(D,P=(0,n.y0)()){const S=b(P);if(S)return r({id:D,rootStateKey:S,type:"query"},P,!1)}function u(D,P){return D[P]}},60344:(j,I,e)=>{"use strict";e.d(I,{$M:()=>D,Be:()=>C,Le:()=>S,Mn:()=>u,Pl:()=>b,Q8:()=>E,VN:()=>f,Y9:()=>y,b5:()=>c,gE:()=>v,mZ:()=>h,qQ:()=>P});var t=e(34099),n=e(89949),i=e.n(n),s=e(53933),r=e(41355),m=e(39655),d=e(5399),o=e(81587),l=e(51824),a=e(18918);const g=(0,t.oM)({name:"templating/shared",initialState:a.s,reducers:{addVariable:(x,M)=>{const R=M.payload.id??M.payload.data.model.name,O=r.z.get(M.payload.type),T=(0,n.cloneDeep)(O.initialState),U=O.beforeAdding?O.beforeAdding(M.payload.data.model):(0,n.cloneDeep)(M.payload.data.model),L={...(0,n.defaults)({},U,T),id:R,index:M.payload.data.index,global:M.payload.data.global};x[R]=L},variableStateNotStarted:(x,M)=>{const R=(0,l.ir)(x,M.payload.id);R.state=s.Gu.NotStarted,R.error=null},variableStateFetching:(x,M)=>{const R=(0,l.ir)(x,M.payload.id);R.state=s.Gu.Loading,R.error=null},variableStateCompleted:(x,M)=>{const R=(0,l.ir)(x,M.payload.id);R&&(R.state=s.Gu.Done,R.error=null)},variableStateFailed:(x,M)=>{const R=(0,l.ir)(x,M.payload.id);R&&(R.state=s.Gu.Error,R.error=M.payload.data.error)},removeVariable:(x,M)=>{if(delete x[M.payload.id],!M.payload.data.reIndex)return;const R=Object.values(x).sort((O,T)=>O.index-T.index);for(let O=0;O<R.length;O++)R[O].index=O},duplicateVariable:(x,M)=>{function R(W){return W.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const O=(0,n.cloneDeep)(x[M.payload.id]),T=new RegExp(`^copy_of_${R(O.name)}(_(\\d+))?$`),U=Object.values(x).map(({name:W})=>W.match(T)).filter(W=>W!=null),L=U.map(W=>W[2]).filter(W=>W!=null),V=(()=>U.length===0?null:L.length===0?1:L.map(W=>+W).sort((W,_)=>_-W)[0]+1)(),w=`copy_of_${O.name}${V?`_${V}`:""}`,K=M.payload.data?.newId??w,B=(0,l.QT)(Object.values(x));x[K]={...(0,n.cloneDeep)(r.z.get(M.payload.type).initialState),...O,id:K,name:w,index:B}},changeVariableOrder:(x,M)=>{const{toIndex:R,fromIndex:O}=M.payload.data,T=Object.values(x);for(let U=0;U<T.length;U++){const L=T[U];L.index===O?L.index=R:L.index>O&&L.index<=R?L.index--:L.index<O&&L.index>=R&&L.index++}},changeVariableType:(x,M)=>{const{id:R}=M.payload,{label:O,name:T,index:U,description:L,rootStateKey:V}=x[R];x[R]={...(0,n.cloneDeep)(r.z.get(M.payload.data.newType).initialState),id:R,rootStateKey:V,label:O,name:T,index:U,description:L}},setCurrentVariableValue:(x,M)=>{if(!M.payload.data.option)return;const R=(0,l.ir)(x,M.payload.id);if(!(0,d.eL)(R))return;const{option:O}=M.payload.data,T={...O,text:(0,o.Hi)(O?.text),value:(0,o.Hi)(O?.value)};R.current=T,R.options=R.options.map(U=>{U.value=(0,o.Hi)(U.value),U.text=(0,o.Hi)(U.text);let L=!1;if(Array.isArray(T.value))for(let V=0;V<T.value.length;V++){const w=T.value[V];if(U.value===w){L=!0;break}}else U.value===T.value&&(L=!0);return U.selected=L,U})},changeVariableProp:(x,M)=>{const R=(0,l.ir)(x,M.payload.id);R[M.payload.data.propName]=M.payload.data.propValue}},extraReducers:x=>x.addCase(m.Yo,(M,R)=>{const O=(0,l.ir)(M,R.payload.id);O.name=R.payload.data.newName})}),c=g.reducer,{removeVariable:h,addVariable:f,changeVariableProp:b,changeVariableOrder:v,duplicateVariable:y,setCurrentVariableValue:E,changeVariableType:C,variableStateNotStarted:u,variableStateFetching:D,variableStateCompleted:P,variableStateFailed:S}=g.actions},67273:(j,I,e)=>{"use strict";e.d(I,{Z9:()=>d,iv:()=>l,p3:()=>o,vw:()=>a,xO:()=>s});var t=e(34099),n=e(6230),i=e(60344);const s={uid:null,status:n.LN.NotStarted,isDirty:!1},r=(0,t.oM)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(g,c)=>{g.uid=c.payload.uid,g.status=n.LN.Fetching},variablesCompleteTransaction:(g,c)=>{g.uid===c.payload.uid&&(g.status=n.LN.Completed)},variablesClearTransaction:(g,c)=>{g.uid=null,g.status=n.LN.NotStarted,g.isDirty=!1}},extraReducers:g=>g.addMatcher(m,(c,h)=>{c.status===n.LN.Completed&&(c.isDirty=!0)})});function m(g){return i.mZ.match(g)||i.VN.match(g)||i.Pl.match(g)||i.gE.match(g)||i.Y9.match(g)||i.Be.match(g)}const{variablesInitTransaction:d,variablesClearTransaction:o,variablesCompleteTransaction:l}=r.actions,a=r.reducer},18918:(j,I,e)=>{"use strict";e.d(I,{s:()=>t});const t={}},96637:(j,I,e)=>{"use strict";e.d(I,{L:()=>m,S:()=>r});var t=e(34099),n=e(41355),i=e(60344),s=e(18918);const r=(0,t.PH)("templating/cleanVariables"),m=(d=s.s,o)=>{if(r.match(o)){const l=Object.values(d).filter(g=>g.global);return l?l.reduce((g,c)=>(g[c.id]=c,g),{}):s.s}return o?.payload?.type&&n.z.getIfExists(o?.payload?.type)?n.z.get(o.payload.type).reducer((0,i.b5)(d,o),o):d}},6230:(j,I,e)=>{"use strict";e.d(I,{$U:()=>t.$U,Bd:()=>t.Bd,Eg:()=>m,LN:()=>r,Wy:()=>l,bU:()=>t.bU,eq:()=>o,x9:()=>d});var t=e(82986),n=e(53933),i=e(96509),s=e(80169),r=(a=>(a.NotStarted="Not started",a.Fetching="Fetching",a.Completed="Completed",a))(r||{});const m={id:s.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class d extends i.R{}d.type="variables-changed";class o extends i.R{}o.type="variables-time-range-process-done";class l extends i.R{}l.type="variables-changed-in-url"},81587:(j,I,e)=>{"use strict";e.d(I,{A3:()=>x,AQ:()=>E,HY:()=>f,Hi:()=>S,J7:()=>g,N9:()=>v,QI:()=>h,Tt:()=>b,Y6:()=>O,a9:()=>c,bi:()=>u,gR:()=>y,iD:()=>C,mn:()=>M,xT:()=>P,yQ:()=>R});var t=e(89949),n=e.n(t),i=e(39317),s=e(89024),r=e(84749),m=e(26858),d=e(41355),o=e(80169),l=e(51824),a=e(6230);const g=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,c=T=>(g.lastIndex=0,g.exec(T));function h(...T){const U=T[T.length-1];T[0]=typeof T[0]=="string"?T[0]:(0,s.Xh)(T[0]);const V=T.slice(0,-1).join(" ").match(g);return!!(V!==null?V.find(K=>{const B=c(K);return B!==null&&B.indexOf(U)>-1}):!1)}const f=T=>{if(!T||!T.current)return!1;if(T.current.value){const U=Array.isArray(T.current.value);if(U&&T.current.value.length&&T.current.value[0]===o.r2||!U&&T.current.value===o.r2)return!0}if(T.current.text){const U=Array.isArray(T.current.text);if(U&&T.current.text.length&&T.current.text[0]===o.xk||!U&&T.current.text===o.xk)return!0}return!1},b=T=>!T||!T.current||!T.current.text?"":Array.isArray(T.current.text)?T.current.text.toString():typeof T.current.text!="string"?"":T.current.text,v=T=>!T||!T.current||T.current.value===void 0||T.current.value===null?null:Array.isArray(T.current.value)?T.current.value.toString():typeof T.current.value!="string"?null:T.current.value;function y(T,U=(0,i.J)()){return!T||!T.regex?"":U.replace(T.regex,{},"regex")}function E(T,U,L=(0,m.$t)()){const V={range:void 0,variable:T,searchFilter:U};return(T.refresh===a.Bd.onTimeRangeChanged||T.refresh===a.Bd.onDashboardLoad)&&(V.range=L.timeRange()),V}function C(T){if(!T||!T.hasOwnProperty("refresh"))return a.Bd.never;const U=T;return U.refresh!==a.Bd.onTimeRangeChanged&&U.refresh!==a.Bd.onDashboardLoad&&U.refresh!==a.Bd.never?a.Bd.never:U.refresh}function u(){return d.z.list().filter(T=>T.id!=="system").map(({id:T,name:U,description:L})=>({label:U,value:T,description:L}))}function D(T){return(0,t.isArray)(T)&&(T.length===0?T=void 0:T.length===1&&(T=T[0])),T}function P(T,U){let L=0;const V={};for(const w in T){if(!w.startsWith(o.IG))continue;let K=D(U[w]),B=D(T[w]);(0,t.isEqual)(B,K)||(V[w]={value:T[w]},L++)}for(const w in U){if(!w.startsWith(o.IG))continue;const K=U[w];(0,t.isArray)(K)&&K.length===0||T.hasOwnProperty(w)||(V[w]={value:"",removed:!0},L++)}return L?V:void 0}function S(T){return Array.isArray(T)?T.map(String):T==null?"":typeof T=="number"?T.toString(10):typeof T=="string"?T:typeof T=="boolean"?T.toString():""}function x(T,U=(0,r.y0)()){return(0,l.AE)(T,U).transaction.status!==a.LN.NotStarted}function M(T){return String(T)}const R=T=>{if(!T.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${T.id}`);return{type:T.type,id:T.id,rootStateKey:T.rootStateKey}};function O(T,U){return{type:T.type,id:T.id,data:U}}},16546:(j,I,e)=>{"use strict";e.d(I,{H:()=>g});var t=e(42844),n=e(27702),i=e(75578),s=e(21609),r=e(99025),m=e(64167),d=e(66310),o=e(64022),l=e(66670),a=e(89628);const g=({data:h,rowIndex:f,columnIndex:b,sortOrder:v,mode:y,header:E=void 0})=>{const C=(0,d.wW)(c);if(!h||f==null)return null;const u=h.fields.map((T,U)=>({...T,hovered:U===b})),D=u.filter(T=>!T.config.custom?.hideFrom?.tooltip),P=D.find(T=>T.name==="traceID")||u[0],S=[];if(D.filter(T=>P===T).length>0&&S.push(P),S.push(...D.filter(T=>P!==T)),S.length===0)return null;const x=[],M=[],R=new Set;for(const T of S){if(y===m.f3.Single&&b!=null&&!T.hovered)continue;const U=T.values[f],L=T.display?T.display(U):{text:`${U}`,numeric:+U};T.getLinks&&T.getLinks({calculatedValue:L,valueRowIndex:f}).forEach(V=>{const w=`${V.title}/${V.href}`;R.has(w)||(M.push(V),R.add(w))}),x.push({name:(0,i.CZ)(T,h),value:U,valueString:(0,s.zc)(L),highlight:T.hovered})}v&&v!==m.As.None&&x.sort((T,U)=>r.sortValues(v)(T.value,U.value));const O=()=>M.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(o.wc,null,M.map((T,U)=>n.createElement(l.Qj,{key:U,icon:"external-link-alt",target:T.target,href:T.href,onClick:T.onClick,fill:"text",style:{width:"100%"}},T.title)))));return n.createElement("div",{className:C.wrapper},E&&n.createElement("div",{className:C.header},n.createElement("span",{className:C.title},E)),n.createElement("table",{className:C.infoWrap},n.createElement("tbody",null,x.map((T,U)=>n.createElement("tr",{key:`${U}/${f}`,className:T.highlight?C.highlight:""},n.createElement("th",null,T.name,":"),n.createElement("td",null,(0,a.Q)(T.valueString)))),O())))},c=h=>{const f=h.isDark?h.v1.palette.dark2:h.v1.palette.white,b=h.isDark?h.v1.palette.dark9:h.v1.palette.gray5,v=h.isDark?h.v1.palette.dark3:h.v1.palette.gray6;return{wrapper:(0,t.css)`
      background: ${f};
      border: 1px solid ${b};
      border-radius: ${h.shape.borderRadius(2)};
    `,header:(0,t.css)`
      background: ${b};
      padding: 6px 10px;
      display: flex;
    `,title:(0,t.css)`
      font-weight: ${h.typography.fontWeightMedium};
      padding-right: ${h.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:(0,t.css)`
      padding: 8px;
      th {
        font-weight: ${h.typography.fontWeightMedium};
        padding: ${h.spacing(.25,2)};
      }
      tr {
        background-color: ${h.colors.background.primary};
        &:nth-child(even) {
          background-color: ${v};
        }
      }
    `,highlight:(0,t.css)`
      /* !important is required to overwrite default table styles */
      background: ${h.colors.action.hover} !important;
    `,link:(0,t.css)`
      color: #6e9fff;
    `}}},59246:(j,I,e)=>{"use strict";var t=e(48154),n=e(34667);const i=n.config.bootData.settings.cspReportOnlyEnabled;n.config.bootData.settings.trustedTypesDefaultPolicyEnabled&&window.trustedTypes&&window.trustedTypes.createPolicy&&window.trustedTypes.createPolicy("default",{createHTML:(ee,Y,ae)=>i?(console.error("[HTML not sanitized with Trusted Types]",ee,Y,ae),ee):ee.replace(/<script/gi,"&lt;script"),createScript:ee=>ee,createScriptURL:(ee,Y,ae)=>i?(console.error("[ScriptURL not sanitized with Trusted Types]",ee,Y,ae),ee):t.QX.sanitizeUrl(ee)});var s=e(65599),r=e(3728),m=e(97908),d=e(23993),o=e(44548),l=e(49086),a=e(7610),g=e(5926),c=e(46823),h=e(75261),f=e(50389),b=e(26711),v=e(7942),y=e(83961),E=e(89949),C=e.n(E),u=e(27702),D=e(68249),P=e(99633),S=e(31317),x=e(41199),M=e(52273),R=e(60519),O=e(94469),T=e(73289),U=e(27380),L=e(26129),V=e(32713),w=e(89633),K=e(97073),B=e(10864),W=e(82123),_=e(77948),k=e(72566),A=e(22323),z=e(1695),H=e(28388),Q=e(12308),X=e(69513),te=e(42844),oe=e(29241),Z=e(76178),le=e(19221),ce=e(75578),q=e(14544),ne=e(44885),pe=e(20371),re=e(40705),ie=e(66670),Se=e(80402),ye=e(28580),Ce=e(25359),de=e(1128);function we(ee,Y){switch(Y.type){case oe.fS.boolean:return(0,E.isUndefined)(ee)?!1:_e(ee);case oe.fS.number:return isNaN(ee)?0:parseFloat(ee);case oe.fS.string:return ee?String(ee):"";default:return ee}}const _e=ee=>(0,E.isString)(ee)?!(ee[0]==="F"||ee[0]==="f"||ee[0]==="0"):!!ee;function Je(ee){return function({options:ae,onChange:Ee,field:ke}){const{validator:et,converter:at=we}=ee,{value:Et}=ae,[Wt,Ft]=(0,u.useState)(!et(Et)),qt=(0,u.useCallback)(Rn=>{Ft(!et(Rn.currentTarget.value))},[Ft,et]),dn=(0,u.useCallback)(Rn=>{if(Wt)return;const{value:zn}=Rn.currentTarget;Ee({...ae,value:at(zn,ke)})},[ae,Ee,Wt,ke,at]);return u.createElement(de.I,{className:"flex-grow-1",invalid:Wt,defaultValue:String(ae.value),placeholder:"Value",onChange:qt,onBlur:dn})}}const Ue=()=>[{name:"Is greater",id:le.mE.greater,component:Je({validator:ee=>!isNaN(ee)})},{name:"Is greater or equal",id:le.mE.greaterOrEqual,component:Je({validator:ee=>!isNaN(ee)})},{name:"Is lower",id:le.mE.lower,component:Je({validator:ee=>!isNaN(ee)})},{name:"Is lower or equal",id:le.mE.lowerOrEqual,component:Je({validator:ee=>!isNaN(ee)})},{name:"Is equal",id:le.mE.equal,component:Je({validator:()=>!0})},{name:"Is not equal",id:le.mE.notEqual,component:Je({validator:()=>!0})},{name:"Regex",id:le.mE.regex,component:Je({validator:()=>!0,converter:ee=>String(ee)})}],$e=()=>null,Qe=()=>[{name:"Is null",id:le.mE.isNull,component:$e},{name:"Is not null",id:le.mE.isNotNull,component:$e}];function tt(ee){return function({options:ae,onChange:Ee,field:ke}){const{validator:et}=ee,[at,Et]=(0,u.useState)({from:!et(ae.from),to:!et(ae.to)}),Wt=(0,u.useCallback)((qt,dn)=>{Et({...at,[dn]:!et(qt.currentTarget.value)})},[Et,et,at]),Ft=(0,u.useCallback)((qt,dn)=>{if(at[dn])return;const{value:Rn}=qt.currentTarget;Ee({...ae,[dn]:we(Rn,ke)})},[ae,Ee,at,ke]);return u.createElement(u.Fragment,null,u.createElement(de.I,{className:"flex-grow-1 gf-form-spacing",invalid:at.from,defaultValue:String(ae.from),placeholder:"From",onChange:qt=>Wt(qt,"from"),onBlur:qt=>Ft(qt,"from")}),u.createElement("div",{className:"gf-form-label"},"and"),u.createElement(de.I,{className:"flex-grow-1",invalid:at.to,defaultValue:String(ae.to),placeholder:"To",onChange:qt=>Wt(qt,"to"),onBlur:qt=>Ft(qt,"to")}))}}const lt=()=>[{name:"Is between",id:le.mE.between,component:tt({validator:ee=>!isNaN(ee)})}],Me=new Ce.B(()=>[...Ue(),...Qe(),...lt()]),De=ee=>{const{onDelete:Y,onChange:ae,filter:Ee,fieldsInfo:ke}=ee,{fieldsAsOptions:et,fieldByDisplayName:at}=ke,Et=st(Ee,et)??"",Wt=at[Et],Ft=Wt?We(Wt):[],qt=qe(Ee,Ft),dn=Me.getIfExists(qt),Rn=(0,u.useCallback)(xa=>{xa?.value&&ae({...Ee,fieldName:xa.value})},[ae,Ee]),zn=(0,u.useCallback)(xa=>{if(!xa?.value)return;const Qa=xa.value,Zs=Z.U8.get(Qa).getDefaultOptions(Wt);ae({...Ee,config:{id:Qa,options:Zs}})},[ae,Ee,Wt]),sa=(0,u.useCallback)(xa=>{ae({...Ee,config:{...Ee.config,options:xa}})},[ae,Ee]);return!Wt||!dn||!dn.component?null:u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form gf-form-spacing"},u.createElement("div",{className:"gf-form-label width-7"},"Field"),u.createElement(ye.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:et,value:Ee.fieldName,onChange:Rn})),u.createElement("div",{className:"gf-form gf-form-spacing"},u.createElement("div",{className:"gf-form-label"},"Match"),u.createElement(ye.Ph,{className:"width-12",placeholder:"Select test",options:Ft,value:qt,onChange:zn})),u.createElement("div",{className:"gf-form gf-form--grow gf-form-spacing"},u.createElement("div",{className:"gf-form-label"},"Value"),u.createElement(dn.component,{field:Wt,options:Ee.config.options??{},onChange:sa})),u.createElement("div",{className:"gf-form"},u.createElement(ie.zx,{icon:"times",onClick:Y,variant:"secondary"})))},We=ee=>{const Y=[];for(const ae of Z.U8.list())!ae.isApplicable(ee)||!Me.getIfExists(ae.id)||Y.push({value:ae.id,label:ae.name,description:ae.description});return Y},qe=(ee,Y)=>{const ae=Y.find(Ee=>Ee.value===ee.config.id);if(ae&&ae.value)return ae.value;if(Y[0]?.value)return Y[0]?.value},st=(ee,Y)=>{const ae=Y.find(Ee=>Ee.value===ee.fieldName);if(ae&&ae.value)return ae.value;if(Y[0]?.value)return Y[0]?.value},dt=[{label:"Include",value:pe.PQ.include},{label:"Exclude",value:pe.PQ.exclude}],Tt=[{label:"Match all",value:pe.ER.all},{label:"Match any",value:pe.ER.any}],Nt=ee=>{const{input:Y,options:ae,onChange:Ee}=ee,ke=yt(),et=ft(Y),at=(0,u.useCallback)(()=>{const dn=Y[0],Rn=dn.fields.find(xa=>xa.type!==oe.fS.time);if(!Rn)return;const zn=(0,E.cloneDeep)(ae.filters),sa=Z.U8.get(le.mE.greater);zn.push({fieldName:(0,ce.CZ)(Rn,dn,Y),config:{id:sa.id,options:sa.getDefaultOptions(Rn)}}),Ee({...ae,filters:zn})},[Ee,ae,Y]),Et=(0,u.useCallback)(dn=>{let Rn=(0,E.cloneDeep)(ae.filters);Rn.splice(dn,1),Ee({...ae,filters:Rn})},[ae,Ee]),Wt=(0,u.useCallback)((dn,Rn)=>{let zn=(0,E.cloneDeep)(ae.filters);zn[Rn]=dn,Ee({...ae,filters:zn})},[ae,Ee]),Ft=(0,u.useCallback)(dn=>{Ee({...ae,type:dn??pe.PQ.include})},[ae,Ee]),qt=(0,u.useCallback)(dn=>{Ee({...ae,match:dn??pe.ER.all})},[ae,Ee]);return u.createElement("div",null,u.createElement("div",{className:"gf-form gf-form-inline"},u.createElement("div",{className:"gf-form-label width-8"},"Filter type"),u.createElement("div",{className:"width-15"},u.createElement(re.S,{options:dt,value:ae.type,onChange:Ft,fullWidth:!0}))),u.createElement("div",{className:"gf-form gf-form-inline"},u.createElement("div",{className:"gf-form-label width-8"},"Conditions"),u.createElement("div",{className:"width-15"},u.createElement(re.S,{options:Tt,value:ae.match,onChange:qt,fullWidth:!0}))),u.createElement("div",{className:ke.conditions},ae.filters.map((dn,Rn)=>u.createElement(De,{key:Rn,filter:dn,fieldsInfo:et,onChange:zn=>Wt(zn,Rn),onDelete:()=>Et(Rn)})),u.createElement("div",{className:"gf-form"},u.createElement(ie.zx,{icon:"plus",size:"sm",onClick:at,variant:"secondary"},"Add condition"))))},Bt={id:q.W.filterByValue,editor:Nt,transformation:ne.Y.filterByValueTransformer,name:ne.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source.",categories:new Set([M.w.Filter])},yt=(0,Se.B)(()=>({conditions:(0,te.css)`
    padding-left: 16px;
  `})),ft=ee=>(0,u.useMemo)(()=>{const Y={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(ee)?ee.reduce((ae,Ee)=>Ee.fields.reduce((ke,et)=>{const at=(0,ce.CZ)(et,Ee,ee);return ke.fieldByDisplayName[at]||(ke.fieldsAsOptions.push({label:at,value:at,type:et.type}),ke.fieldByDisplayName[at]=et),ke},ae),Y):Y},[ee]);var ct=e(9232),ge=e(2471),Be=e(32299),Le=e(26908),he=e(11778);function He(ee,Y){const ae={data:ee.input,options:ee.options},Ee=new Be.j({id:"root",title:"root"}),ke=at=>{if(at?.length){const Et=at[0];let Wt=Ee.categories.find(Ft=>Ft.props.id===Et);return Wt||(Wt=new Be.j({id:Et,title:Et}),Ee.categories.push(Wt)),Wt}return Ee},et={getValue:at=>(0,E.get)(ee.options,at),onChange:(at,Et)=>{ee.onChange((0,he.hs)(ee.options,at,Et))}};return(0,Le.HZ)(Y,et,ke,ae),Ee}function Pe(ee){const Y={data:[],options:{}},ae={},Ee=new ge.rt;ee(Ee,Y);for(const ke of Ee.getItems())ke.defaultValue!=null&&(0,E.set)(ae,ke.path,ke.defaultValue);return ae}var Ie=e(73941),Te=e(28635);const Re=(ee,Y)=>{const ae=Y.options??{};(0,Ie.J)("",ee,ae)},ue=ee=>{(0,u.useEffect)(()=>{if(!ee.options.xBuckets?.mode){const ae=Pe(Re);ee.onChange({...ae,...ee.options}),console.log("geometry useEffect",ae)}});const Y=He(ee,Re);return u.createElement("div",null,u.createElement("div",null,Y.items.map(ae=>ae.render())))},xe={id:Te.Oy.id,editor:ue,transformation:Te.Oy,name:Te.Oy.name,description:Te.Oy.description,state:ct.BV.alpha,categories:new Set([M.w.CreateNewVisualization])};var Ve=e(66310),Ne=e(78425),fe=e(71107),ve=e(48024),ze=e(66656),Oe=e(10133),Fe=e(93666),Ge=e(17373),nt=e(5168),Xe=e(51046);function ut(ee,Y,ae){const Ee={},ke={};for(const et of ee.fields){const at=(0,ce.CZ)(et,ee),Wt=ae.index[at].handler;if(!Wt)continue;const Ft=et.values[Y];if(Ft==null)continue;const qt=Wt.processor(Ft,Ee,ke);qt!=null&&(Ee[Wt.targetProperty??Wt.key]=qt)}return ke.mappingValues&&(Ee.mappings=mn(ke)),Ee}var ht=(ee=>(ee.Name="field.name",ee.Value="field.value",ee.Label="field.label",ee.Ignore="__ignore",ee))(ht||{});const wt=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:Sn},{key:"min",processor:Sn},{key:"unit",processor:ee=>ee.toString()},{key:"decimals",processor:Sn},{key:"displayName",name:"Display name",processor:ee=>ee.toString()},{key:"color",processor:ee=>({fixedColor:ee,mode:Fe.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(ee,Y)=>{const ae=(0,Ge.I)(ee);if(!isNaN(ae))return Y.thresholds||(Y.thresholds={mode:nt.H.Absolute,steps:[{value:-1/0,color:"green"}]}),Y.thresholds.steps.push({value:ae,color:"red"}),Y.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:ze.gz.allValues,processor:(ee,Y,ae)=>{if((0,E.isArray)(ee))return ae.mappingValues=ee,Y.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:ze.gz.allValues,processor:(ee,Y,ae)=>{if((0,E.isArray)(ee))return ae.mappingColors=ee,Y.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:ze.gz.allValues,processor:(ee,Y,ae)=>{if((0,E.isArray)(ee))return ae.mappingTexts=ee,Y.mappings}}];function mn(ee){const Y={type:Xe.H.ValueToText,options:{}};if(!ee.mappingValues)return[];for(let ae=0;ae<ee.mappingValues.length;ae++){const Ee=ee.mappingValues[ae];Ee!=null&&(Y.options[Ee.toString()]={color:ee.mappingColors&&ee.mappingColors[ae],text:ee.mappingTexts&&ee.mappingTexts[ae],index:ae})}return[Y]}let vn=null;function gn(){if(vn===null){vn={};for(const ee of wt)vn[ee.key]=ee}return vn}function Sn(ee){const Y=(0,Ge.I)(ee);if(!isNaN(Y))return Y}function Cn(ee,Y){for(const ae of Y)if(ee===ae.fieldName)return ae.handlerKey;return ee.toLowerCase()}function pn(ee){return ee?gn()[ee]:null}function nn(ee,Y,ae){const Ee={index:{}};let ke=Y.find(at=>at.handlerKey==="field.name"),et=Y.find(at=>at.handlerKey==="field.value");for(const at of ee.fields){const Et=(0,ce.CZ)(at,ee),Wt=Y.find(dn=>dn.fieldName===Et),Ft=Wt?Wt.handlerKey:Et.toLowerCase();let qt=pn(Ft);ae&&(qt?(qt.key==="field.name"&&(Ee.nameField=at),qt.key==="field.value"&&(Ee.valueField=at)):Wt||(!Ee.nameField&&!ke&&at.type===oe.fS.string&&(Ee.nameField=at,qt=pn("field.name")),!Ee.valueField&&!et&&at.type===oe.fS.number&&(Ee.valueField=at,qt=pn("field.value")))),!qt&&ae&&(qt=pn("field.label")),Ee.index[Et]={automatic:!Wt,handler:qt,reducerId:Wt?.reducerId??qt?.defaultReducer??ze.gz.lastNotNull}}return Ee}function Ct({frame:ee,mappings:Y,onChange:ae,withReducers:Ee,withNameAndValue:ke}){const et=(0,Ve.wW)(_t),at=bt(ee,Y,ke),Et=wt.map(qt=>Ut(qt,!1)),Wt=(qt,dn)=>{const Rn=Y.findIndex(zn=>zn.fieldName===qt.fieldName);if(dn)if(Rn!==-1){const zn=[...Y];zn.splice(Rn,1,{...Y[Rn],handlerKey:dn.value}),ae(zn)}else ae([...Y,{fieldName:qt.fieldName,handlerKey:dn.value}]);else ae(Rn!==-1?Y.filter((zn,sa)=>sa!==Rn):[...Y,{fieldName:qt.fieldName,handlerKey:"__ignore"}])},Ft=(qt,dn)=>{const Rn=Y.findIndex(zn=>zn.fieldName===qt.fieldName);if(Rn!==-1){const zn=[...Y];zn.splice(Rn,1,{...Y[Rn],reducerId:dn}),ae(zn)}else ae([...Y,{fieldName:qt.fieldName,handlerKey:qt.handlerKey,reducerId:dn}])};return u.createElement("table",{className:et.table},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",null,"Field"),u.createElement("th",null,"Use as"),Ee&&u.createElement("th",null,"Select"))),u.createElement("tbody",null,at.map(qt=>u.createElement("tr",{key:qt.fieldName},u.createElement("td",{className:et.labelCell},qt.fieldName),u.createElement("td",{className:et.selectCell,"data-testid":`${qt.fieldName}-config-key`},u.createElement(ye.Ph,{options:Et,value:qt.configOption,placeholder:qt.placeholder,isClearable:!0,onChange:dn=>Wt(qt,dn)})),Ee&&u.createElement("td",{"data-testid":`${qt.fieldName}-reducer`,className:et.selectCell},u.createElement(Oe.m,{stats:[qt.reducerId],defaultStat:qt.reducerId,onChange:dn=>Ft(qt,dn[0])}))))))}function bt(ee,Y,ae){const Ee=[],ke=nn(ee,Y??[],ae);for(const et of ee.fields){const at=(0,ce.CZ)(et,ee),Et=ke.index[at],Wt=Ut(Et.handler,Et.automatic);Ee.push({fieldName:at,configOption:Et.automatic?null:Wt,placeholder:Et.automatic?Wt?.label:"Choose",handlerKey:Et.handler?.key??null,reducerId:Et.reducerId})}for(const et of Y)if(!Ee.find(at=>at.fieldName===et.fieldName)){const at=pn(et.handlerKey);Ee.push({fieldName:et.fieldName,handlerKey:et.handlerKey,configOption:Ut(at,!1),missingInFrame:!0,reducerId:et.reducerId??ze.gz.lastNotNull})}return Object.values(Ee)}function Ut(ee,Y){if(!ee)return null;let ae=ee.name??(0,E.capitalize)(ee.key);return Y&&(ae=`${ae} (auto)`),{label:ae,value:ee.key}}const _t=ee=>({table:(0,te.css)`
    margin-top: ${ee.spacing(1)};

    td,
    th {
      border-right: 4px solid ${ee.colors.background.primary};
      border-bottom: 4px solid ${ee.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${ee.typography.bodySmall.fontSize};
      line-height: ${ee.spacing(4)};
      padding: ${ee.spacing(0,1)};
    }
  `,labelCell:(0,te.css)`
    font-size: ${ee.typography.bodySmall.fontSize};
    background: ${ee.colors.background.secondary};
    padding: ${ee.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:(0,te.css)`
    padding: 0;
    min-width: 161px;
  `});var Gt=e(39343);function jt(ee,Y){let ae=null;for(const Et of Y)if(Et.refId===ee.configRefId){ae=Et;break}if(!ae)return Y;const Ee={fields:[],length:1},ke=nn(ae,ee.mappings??[],!1);for(const Et of ae.fields){const Wt={...Et},Ft=(0,ce.CZ)(Et,ae),qt=ke.index[Ft],dn=(0,ze.Kx)({field:Et,reducers:[qt.reducerId]});Wt.values=[dn[qt.reducerId]],Ee.fields.push(Wt)}const et=[],at=(0,Z.sq)(ee.applyTo||{id:le.mi.numeric});for(const Et of Y){if(Et===ae&&Y.length>1)continue;const Wt={fields:[],length:Et.length,refId:Et.refId};for(const Ft of Et.fields)if(at(Ft,Et,Y)){const qt=ut(Ee,0,ke);Wt.fields.push({...Ft,config:{...Ft.config,...qt}})}else Wt.fields.push(Ft);et.push(Wt)}return et}const sn={id:q.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data.",defaultOptions:{configRefId:"config",mappings:[]},operator:ee=>Y=>Y.pipe((0,Gt.U)(ae=>jt(ee,ae)))};function St({input:ee,onChange:Y,options:ae}){const Ee=(0,Ve.wW)(kt),ke=ee.map(zn=>zn.refId).filter(zn=>zn!=null).map(zn=>({label:zn,value:zn})),et=ae.configRefId||"config",at=ae.applyTo??{id:le.mi.byType,options:"number"},Et=Ne.i.get(at.id),Wt=ee.find(zn=>zn.refId===et),Ft=zn=>{Y({...ae,configRefId:zn.value||"config"})},qt=zn=>{Y({...ae,applyTo:{id:zn.value}})},dn=zn=>{Y({...ae,applyTo:{id:at.id,options:zn}})},Rn=Ne.i.list().filter(zn=>!zn.excludeFromPicker).map(zn=>({label:zn.name,value:zn.id,description:zn.description}));return u.createElement(u.Fragment,null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Config query",labelWidth:20},u.createElement(ye.Ph,{onChange:Ft,options:ke,value:et,width:30}))),u.createElement(fe.Z,null,u.createElement(ve._,{label:"Apply to",labelWidth:20},u.createElement(ye.Ph,{onChange:qt,options:Rn,value:at.id,width:30}))),u.createElement(fe.Z,null,u.createElement(ve._,{label:"Apply to options",labelWidth:20,className:Ee.matcherOptions},u.createElement(Et.component,{matcher:Et.matcher,data:ee,options:at.options,onChange:dn}))),u.createElement(fe.Z,null,Wt&&u.createElement(Ct,{frame:Wt,mappings:ae.mappings,onChange:zn=>Y({...ae,mappings:zn}),withReducers:!0})))}const mt={id:sn.id,editor:St,transformation:sn,name:sn.name,description:sn.description,state:ct.BV.beta,categories:new Set([M.w.CalculateNewFields]),help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},kt=ee=>({matcherOptions:(0,te.css)`
    min-width: 404px;
  `});var it=e(45383),pt=e(32338),It=e(18441),Qt=e(64022),rn=e(81520),un=e(82367);const xn=[{value:It.ie.BinaryOperation,label:"Binary operation"},{value:It.ie.ReduceRow,label:"Reduce row"},{value:It.ie.Index,label:"Row index"}],Kn=new Set([oe.fS.time,oe.fS.number,oe.fS.string]);class _n extends u.PureComponent{constructor(Y){super(Y),this.onToggleReplaceFields=()=>{const{options:ae}=this.props;this.props.onChange({...ae,replaceFields:!ae.replaceFields})},this.onModeChanged=ae=>{const{options:Ee,onChange:ke}=this.props,et=ae.value??It.ie.BinaryOperation;ke({...Ee,mode:et})},this.onAliasChanged=ae=>{const{options:Ee}=this.props;this.props.onChange({...Ee,alias:ae.target.value})},this.updateReduceOptions=ae=>{const{options:Ee,onChange:ke}=this.props;ke({...Ee,mode:It.ie.ReduceRow,reduce:ae})},this.onFieldToggle=ae=>{const{selected:Ee}=this.state;Ee.indexOf(ae)>-1?this.onChange(Ee.filter(ke=>ke!==ae)):this.onChange([...Ee,ae])},this.onChange=ae=>{this.setState({selected:ae});const{reduce:Ee}=this.props.options;this.updateReduceOptions({...Ee,include:ae})},this.onStatsChange=ae=>{const Ee=ae.length?ae[0]:ze.gz.sum,{reduce:ke}=this.props.options;this.updateReduceOptions({...ke,reducer:Ee})},this.updateBinaryOptions=ae=>{const{options:Ee,onChange:ke}=this.props;ke({...Ee,mode:It.ie.BinaryOperation,binary:ae})},this.onBinaryLeftChanged=ae=>{const{binary:Ee}=this.props.options;this.updateBinaryOptions({...Ee,left:ae.value})},this.onBinaryRightChanged=ae=>{const{binary:Ee}=this.props.options;this.updateBinaryOptions({...Ee,right:ae.value})},this.onBinaryOperationChanged=ae=>{const{binary:Ee}=this.props.options;this.updateBinaryOptions({...Ee,operator:ae.value})},this.state={include:Y.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(Y){this.props.input!==Y.input&&this.initOptions()}initOptions(){const{options:Y}=this.props,ae=Y?.reduce?.include||[],Ee={interpolate:et=>et},ke=(0,it.of)(this.props.input).pipe(ne.Y.ensureColumnsTransformer.operator(null,Ee),this.extractAllNames(),this.extractNamesAndSelected(ae)).subscribe(({selected:et,names:at})=>{this.setState({names:at,selected:et},()=>ke.unsubscribe())})}extractAllNames(){return Y=>Y.pipe((0,Gt.U)(ae=>{const Ee=[],ke={};for(const et of ae)for(const at of et.fields){if(!Kn.has(at.type))continue;const Et=(0,ce.CZ)(at,et,ae);ke[Et]||(ke[Et]=!0,Ee.push(Et))}return Ee}))}extractNamesAndSelected(Y){return ae=>ae.pipe((0,Gt.U)(Ee=>{if(!Y.length)return{names:Ee,selected:[]};const ke=[],et=[];for(const at of Ee)Y.includes(at)&&et.push(at),ke.push(at);return{names:ke,selected:et}}))}renderReduceRow(Y){const{names:ae,selected:Ee}=this.state;return Y=(0,E.defaults)(Y,{reducer:ze.gz.sum}),u.createElement(u.Fragment,null,u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form gf-form--grow"},u.createElement("div",{className:"gf-form-label width-8"},"Field name"),u.createElement(Qt.Lh,{spacing:"xs",align:"flex-start",wrap:!0},ae.map((ke,et)=>u.createElement(rn.B,{key:`${ke}/${et}`,onClick:()=>{this.onFieldToggle(ke)},label:ke,selected:Ee.indexOf(ke)>-1}))))),u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form"},u.createElement("div",{className:"gf-form-label width-8"},"Calculation"),u.createElement(Oe.m,{allowMultiple:!1,className:"width-18",stats:[Y.reducer],onChange:this.onStatsChange,defaultStat:ze.gz.sum}))))}renderBinaryOperation(Y){Y=(0,E.defaults)(Y,{reducer:ze.gz.sum});let ae=!Y?.left,Ee=!Y?.right;const ke=this.state.names.map(Wt=>(Wt===Y?.left&&(ae=!0),Wt===Y?.right&&(Ee=!0),{label:Wt,value:Wt})),et=ae?ke:[...ke,{label:Y?.left,value:Y?.left}],at=Ee?ke:[...ke,{label:Y?.right,value:Y?.right}],Et=pt.n.list().map(Wt=>({label:Wt.id,value:Wt.id}));return u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form"},u.createElement("div",{className:"gf-form-label width-8"},"Operation")),u.createElement("div",{className:"gf-form"},u.createElement(ye.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:et,className:"min-width-18 gf-form-spacing",value:Y?.left,onChange:this.onBinaryLeftChanged}),u.createElement(ye.Ph,{className:"width-8 gf-form-spacing",options:Et,value:Y.operator??Et[0].value,onChange:this.onBinaryOperationChanged}),u.createElement(ye.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:at,value:Y?.right,onChange:this.onBinaryRightChanged})))}render(){const{options:Y}=this.props,ae=Y.mode??It.ie.BinaryOperation;return u.createElement("div",null,u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form"},u.createElement("div",{className:"gf-form-label width-8"},"Mode"),u.createElement(ye.Ph,{className:"width-18",options:xn,value:xn.find(Ee=>Ee.value===ae),onChange:this.onModeChanged}))),ae===It.ie.BinaryOperation&&this.renderBinaryOperation(Y.binary),ae===It.ie.ReduceRow&&this.renderReduceRow(Y.reduce),u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form"},u.createElement("div",{className:"gf-form-label width-8"},"Alias"),u.createElement(de.I,{className:"width-18",value:Y.alias??"",placeholder:(0,It.h)(Y),onChange:this.onAliasChanged}))),u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form"},u.createElement(un.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!Y.replaceFields,onChange:this.onToggleReplaceFields}))))}}const Ma={id:q.W.calculateField,editor:_n,transformation:ne.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field.",categories:new Set([M.w.CalculateNewFields])};var la=e(2791);const aa=[{value:la.HO.FieldName,label:"Copy frame name to field name"},{value:la.HO.Label,label:"Add a label with the frame name"},{value:la.HO.Drop,label:"Ignore the frame name"}];class ba extends u.PureComponent{constructor(Y){super(Y),this.onModeChanged=ae=>{const{options:Ee,onChange:ke}=this.props,et=ae.value??la.HO.FieldName;ke({...Ee,frameNameMode:et})},this.onLabelChanged=ae=>{const{options:Ee}=this.props;this.props.onChange({...Ee,frameNameLabel:ae.target.value})}}render(){const{options:Y}=this.props,ae=Y.frameNameMode??la.HO.FieldName;return u.createElement("div",null,u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form"},u.createElement("div",{className:"gf-form-label width-8"},"Name"),u.createElement(ye.Ph,{className:"width-18",options:aa,value:aa.find(Ee=>Ee.value===ae),onChange:this.onModeChanged}))),ae===la.HO.Label&&u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form"},u.createElement("div",{className:"gf-form-label width-8"},"Label"),u.createElement(de.I,{className:"width-18",value:Y.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const ga={id:q.W.concatenate,editor:ba,transformation:ne.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",categories:new Set([M.w.Combine])};var Ca=e(86912),Ha=e(27857),ka=e(82382);const ma={settings:{width:24,isClearable:!1}},At=({input:ee,options:Y,onChange:ae})=>{const Ee=Ha.OL.filter(Ft=>Ft.value!==oe.fS.trace),ke=(0,u.useCallback)(Ft=>qt=>{const dn=Y.conversions;dn[Ft]={...dn[Ft],targetField:qt??"",dateFormat:void 0},ae({...Y,conversions:dn})},[ae,Y]),et=(0,u.useCallback)(Ft=>qt=>{const dn=Y.conversions;dn[Ft]={...dn[Ft],destinationType:qt.value},ae({...Y,conversions:dn})},[ae,Y]),at=(0,u.useCallback)(Ft=>qt=>{const dn=Y.conversions;dn[Ft]={...dn[Ft],dateFormat:qt.currentTarget.value},ae({...Y,conversions:dn})},[ae,Y]),Et=(0,u.useCallback)(()=>{ae({...Y,conversions:[...Y.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[ae,Y]),Wt=(0,u.useCallback)(Ft=>{const qt=Y.conversions;qt.splice(Ft,1),ae({...Y,conversions:qt})},[ae,Y]);return u.createElement(u.Fragment,null,Y.conversions.map((Ft,qt)=>u.createElement("div",{key:`${Ft.targetField}-${qt}`},u.createElement(fe.Z,null,u.createElement(ve._,{label:"Field"},u.createElement(Ca.b,{context:{data:ee},value:Ft.targetField??"",onChange:ke(qt),item:ma})),u.createElement(ve._,{label:"as"},u.createElement(ye.Ph,{options:Ee,value:Ft.destinationType,placeholder:"Type",onChange:et(qt),width:18})),Ft.destinationType===oe.fS.time&&u.createElement(ve._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},u.createElement(de.I,{value:Ft.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:at(qt),width:24})),Ft.destinationType===oe.fS.string&&(Ft.dateFormat||(0,ka.findField)(ee?.[0],Ft.targetField)?.type===oe.fS.time)&&u.createElement(ve._,{label:"Date format",tooltip:"Specify the output format."},u.createElement(de.I,{value:Ft.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:at(qt),width:24})),u.createElement(ie.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>Wt(qt),"aria-label":"Remove convert field type transformer"})),Ft.destinationType===oe.fS.enum&&Q.Oh&&u.createElement(fe.Z,null,u.createElement(ve._,{label:"",labelWidth:6},u.createElement("div",null,"TODO... show options here (alpha panels enabled)"))))),u.createElement(ie.zx,{size:"sm",icon:"plus",onClick:Et,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Rt={id:q.W.convertFieldType,editor:At,transformation:ne.Y.convertFieldTypeTransformer,name:ne.Y.convertFieldTypeTransformer.name,description:ne.Y.convertFieldTypeTransformer.description,categories:new Set([M.w.Reformat])};var Mt=e(95676),$t=e(22209);class Pn extends u.PureComponent{constructor(Y){super(Y),this.onFieldToggle=ae=>{const{selected:Ee}=this.state;Ee.indexOf(ae)>-1?this.onChange(Ee.filter(ke=>ke!==ae)):this.onChange([...Ee,ae])},this.onChange=ae=>{const{regex:Ee,isRegexValid:ke}=this.state,et={...this.props.options,include:{names:ae}};Ee&&ke&&(et.include=et.include??{},et.include.pattern=Ee),this.setState({selected:ae},()=>{this.props.onChange(et)})},this.onInputBlur=ae=>{const{selected:Ee,regex:ke}=this.state;let et=!0;try{ke&&(0,Mt.jO)(ke)}catch{et=!1}et?this.props.onChange({...this.props.options,include:{pattern:ke}}):this.props.onChange({...this.props.options,include:{names:Ee}}),this.setState({isRegexValid:et})},this.state={include:Y.options.include?.names||[],regex:Y.options.include?.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(Y){this.props.input!==Y.input&&this.initOptions()}initOptions(){const{input:Y,options:ae}=this.props,Ee=Array.from(ae.include?.names??[]),ke=[],et={};for(const at of Y)for(const Et of at.fields){const Wt=(0,ce.CZ)(Et,at,Y);let Ft=et[Wt];Ft||(Ft=et[Wt]={name:Wt,count:0},ke.push(Ft)),Ft.count++}if(ae.include?.pattern)try{const at=(0,Mt.jO)(ae.include.pattern);for(const Et of ke)at.test(Et.name)&&Ee.push(Et.name)}catch(at){console.error(at)}if(Ee.length){const at=ke.filter(Et=>Ee.includes(Et.name));this.setState({options:ke,selected:at.map(Et=>Et.name),regex:ae.include?.pattern})}else this.setState({options:ke,selected:ke.map(at=>at.name),regex:ae.include?.pattern})}render(){const{options:Y,selected:ae,isRegexValid:Ee}=this.state;return u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form gf-form--grow"},u.createElement("div",{className:"gf-form-label width-8"},"Identifier"),u.createElement(Qt.Lh,{spacing:"xs",align:"flex-start",wrap:!0},u.createElement($t.g,{invalid:!Ee,error:Ee?void 0:"Invalid pattern",className:(0,te.css)`
                margin-bottom: 0;
              `},u.createElement(de.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:ke=>this.setState({regex:ke.currentTarget.value}),onBlur:this.onInputBlur,width:25})),Y.map((ke,et)=>{const at=`${ke.name}${ke.count>1?" ("+ke.count+")":""}`,Et=ae.indexOf(ke.name)>-1;return u.createElement(rn.B,{key:`${ke.name}/${et}`,onClick:()=>{this.onFieldToggle(ke.name)},label:at,selected:Et})}))))}}const tn={id:q.W.filterFieldsByName,editor:Pn,transformation:ne.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive.",categories:new Set([M.w.Filter])};var Un=e(59904);class $n extends u.PureComponent{constructor(Y){super(Y),this.onFieldToggle=ae=>{const{selected:Ee}=this.state;Ee.indexOf(ae)>-1?this.onChange(Ee.filter(ke=>ke!==ae)):this.onChange([...Ee,ae])},this.onChange=ae=>{this.setState({selected:ae}),this.props.onChange({...this.props.options,include:ae.join("|")})},this.state={include:Y.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(Y){this.props.input!==Y.input&&this.initOptions()}initOptions(){const{input:Y,options:ae}=this.props,Ee=ae.include?ae.include.split("|"):[],ke=[],et={};for(const at of Y)if(at.refId){let Et=et[at.refId];Et||(Et=et[at.refId]={refId:at.refId,count:0},ke.push(Et)),Et.count++}if(Ee.length){const at=[],Et=[];for(const Wt of ke)Ee.includes(Wt.refId)&&Et.push(Wt),at.push(Wt);this.setState({options:at,selected:Et.map(Wt=>Wt.refId)})}else this.setState({options:ke,selected:[]})}render(){const{options:Y,selected:ae}=this.state,{input:Ee}=this.props;return u.createElement(u.Fragment,null,Ee.length<=1&&u.createElement("div",null,u.createElement(Un.S,null,"Filter data by query expects multiple queries in the input.")),u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form gf-form--grow"},u.createElement("div",{className:"gf-form-label width-8"},"Series refId"),u.createElement(Qt.Lh,{spacing:"xs",align:"flex-start",wrap:!0},Y.map((ke,et)=>{const at=`${ke.refId}${ke.count>1?" ("+ke.count+")":""}`,Et=ae.indexOf(ke.refId)>-1;return u.createElement(rn.B,{key:`${ke.refId}/${et}`,onClick:()=>{this.onFieldToggle(ke.refId)},label:at,selected:Et})})))))}}const kn={id:q.W.filterByRefId,editor:$n,transformation:ne.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel.",categories:new Set([M.w.Filter])};var Fn=e(42074);function Da({input:ee,options:Y,onChange:ae}){const Ee=[];for(const Et of ee)for(const Wt of Et.fields)if(Wt.type==="time"){const Ft=(0,ce.CZ)(Wt,Et,ee);Ee.push({label:Ft,value:Ft})}const ke=(0,u.useCallback)(Et=>{const Wt=Et?.value!==void 0?Et.value:"";ae({...Y,timeField:Wt})},[ae,Y]),et=(0,u.useCallback)(Et=>{const Wt=Et.target.value;ae({...Y,outputFormat:Wt})},[ae,Y]),at=(0,u.useCallback)(()=>{ae({...Y,useTimezone:!Y.useTimezone})},[ae,Y]);return u.createElement(u.Fragment,null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Time Field",labelWidth:15,grow:!0},u.createElement(ye.Ph,{options:Ee,value:Y.timeField,onChange:ke,placeholder:"time",isClearable:!0})),u.createElement(ve._,{label:"Format",labelWidth:10,tooltip:"The output format for the field specified as a moment.js format string."},u.createElement(de.I,{onChange:et,value:Y.outputFormat})),u.createElement(ve._,{label:"Use Timezone",tooltip:"Use the user's configured timezone when formatting time.",labelWidth:20},u.createElement(Fn.x,{value:Y.useTimezone,transparent:!0,onChange:at}))))}const Ta={id:q.W.formatTime,editor:Da,transformation:ne.Y.formatTimeTransformer,name:ne.Y.formatTimeTransformer.name,state:ct.BV.alpha,description:ne.Y.formatTimeTransformer.description};var ca=e(11770),Sa=e(23852),Yt=e(30306);const Kt=({input:ee,options:Y,onChange:ae})=>{const Ee=(0,Yt.Hg)(ee),ke=(0,u.useCallback)(et=>at=>{ae({...Y,fields:{...Y.fields,[et]:at}})},[ae]);return u.createElement("div",null,Ee.map(et=>u.createElement(Mn,{onConfigChange:ke(et),fieldName:et,config:Y.fields[et],key:et})))},hn=[{label:"Group by",value:ca.x.groupBy},{label:"Calculate",value:ca.x.aggregate}],Mn=({fieldName:ee,config:Y,onConfigChange:ae})=>{const Ee=(0,Ve.l4)(),ke=Hn(Ee),et=(0,u.useCallback)(at=>{ae({aggregations:Y?.aggregations??[],operation:at?.value??null})},[Y,ae]);return u.createElement(ve._,{label:ee,labelWidth:32,grow:!0,shrink:!0},u.createElement(Sa.K,{gap:.5,direction:"row",wrap:!1},u.createElement("div",{className:ke.operation},u.createElement(ye.Ph,{options:hn,value:Y?.operation,placeholder:"Ignored",onChange:et,isClearable:!0})),Y?.operation===ca.x.aggregate&&u.createElement(Oe.m,{className:ke.aggregations,placeholder:"Select Stats",allowMultiple:!0,stats:Y.aggregations,onChange:at=>{ae({...Y,aggregations:at})}})))},Hn=ee=>({operation:(0,te.css)`
      flex-shrink: 0;
      height: 100%;
      width: ${ee.spacing(24)};
    `,aggregations:(0,te.css)`
      flex-grow: 1;
    `}),Jn={id:q.W.groupBy,editor:Kt,transformation:ne.Y.groupByTransformer,name:ne.Y.groupByTransformer.name,description:ne.Y.groupByTransformer.description,categories:new Set([M.w.Combine,M.w.CalculateNewFields,M.w.Reformat])};var Qn=e(49721);const va=({input:ee,options:Y,onChange:ae})=>{const Ee=(0,Yt.Hg)(ee).map(Ft=>({label:Ft,value:Ft})),ke=(0,u.useCallback)(Ft=>{ae({...Y,columnField:Ft?.value})},[ae,Y]),et=(0,u.useCallback)(Ft=>{ae({...Y,rowField:Ft?.value})},[ae,Y]),at=(0,u.useCallback)(Ft=>{ae({...Y,valueField:Ft?.value})},[ae,Y]),Et=[{label:"Null",value:Qn.U.Null,description:"Null value"},{label:"True",value:Qn.U.True,description:"Boolean true value"},{label:"False",value:Qn.U.False,description:"Boolean false value"},{label:"Empty",value:Qn.U.Empty,description:"Empty string"}],Wt=(0,u.useCallback)(Ft=>{ae({...Y,emptyValue:Ft?.value})},[ae,Y]);return u.createElement(u.Fragment,null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Column",labelWidth:8},u.createElement(ye.Ph,{options:Ee,value:Y.columnField,onChange:ke,isClearable:!0})),u.createElement(ve._,{label:"Row",labelWidth:8},u.createElement(ye.Ph,{options:Ee,value:Y.rowField,onChange:et,isClearable:!0})),u.createElement(ve._,{label:"Cell Value",labelWidth:10},u.createElement(ye.Ph,{options:Ee,value:Y.valueField,onChange:at,isClearable:!0})),u.createElement(ve._,{label:"Empty Value"},u.createElement(ye.Ph,{options:Et,value:Y.emptyValue,onChange:Wt,isClearable:!0}))))},Ga={id:q.W.groupingToMatrix,editor:va,transformation:ne.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix.",categories:new Set([M.w.Combine,M.w.Reformat])};var La=e(35596),Ia=e(55093);const Ka=({input:ee,options:Y,onChange:ae})=>{const ke=(0,u.useCallback)(Et=>{ae({...Y,bucketSize:Et})},[ae,Y]),et=(0,u.useCallback)(Et=>{ae({...Y,bucketOffset:Et})},[ae,Y]),at=(0,u.useCallback)(()=>{ae({...Y,combine:!Y.combine})},[ae,Y]);return u.createElement("div",null,u.createElement(fe.Z,null,u.createElement(ve._,{labelWidth:18,label:La.py.bucketSize.name,tooltip:La.py.bucketSize.description},u.createElement(Ia.Y,{value:Y.bucketSize,placeholder:"auto",onChange:ke,min:0}))),u.createElement(fe.Z,null,u.createElement(ve._,{labelWidth:18,label:La.py.bucketOffset.name,tooltip:La.py.bucketOffset.description},u.createElement(Ia.Y,{value:Y.bucketOffset,placeholder:"none",onChange:et,min:0}))),u.createElement(fe.Z,null,u.createElement(ve._,{labelWidth:18,label:La.py.combine.name,tooltip:La.py.combine.description},u.createElement(Fn.x,{value:Y.combine??!1,onChange:at}))))},qa={id:q.W.histogram,editor:Ka,transformation:ne.Y.histogramTransformer,name:ne.Y.histogramTransformer.name,description:ne.Y.histogramTransformer.description,categories:new Set([M.w.CreateNewVisualization])};var hs=e(69811);const $s=[{value:hs.c.outer,label:"OUTER (TIME SERIES)",description:"Keep all rows from any table with a value. Join on distinct field values. Performant and best used for time series."},{value:hs.c.outerTabular,label:"OUTER (TABULAR)",description:"Join on a field value with dupicated values. Non performant outer join best used for tabular(SQL like) data."},{value:hs.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables."}];function zs({input:ee,options:Y,onChange:ae}){const Ee=(0,Yt.Hg)(ee).map(at=>({label:at,value:at})),ke=(0,u.useCallback)(at=>{ae({...Y,byField:at?.value})},[ae,Y]),et=(0,u.useCallback)(at=>{ae({...Y,mode:at?.value})},[ae,Y]);return u.createElement(u.Fragment,null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Mode",labelWidth:8,grow:!0},u.createElement(ye.Ph,{options:$s,value:Y.mode??hs.c.outer,onChange:et}))),u.createElement(fe.Z,null,u.createElement(ve._,{label:"Field",labelWidth:8,grow:!0},u.createElement(ye.Ph,{options:Ee,value:Y.byField,onChange:ke,placeholder:"time",isClearable:!0}))))}const Ns={id:q.W.joinByField,aliasIds:[q.W.seriesToColumns],editor:zs,transformation:ne.Y.joinByFieldTransformer,name:ne.Y.joinByFieldTransformer.name,description:ne.Y.joinByFieldTransformer.description,categories:new Set([M.w.Combine])};var Xs=e(23830);const ys=[{value:Xs.k.Columns,label:"Columns"},{value:Xs.k.Rows,label:"Rows"}],ua=({input:ee,options:Y,onChange:ae})=>{const{labelNames:ke,selected:et}=(0,u.useMemo)(()=>{let Wt=[],Ft={};for(const dn of ee)for(const Rn of dn.fields)if(Rn.labels)for(const zn of Object.keys(Rn.labels))Ft[zn]||(Wt.push({value:zn,label:zn}),Ft[zn]=!0);const qt=new Set(Y.keepLabels?.length?Y.keepLabels:Object.keys(Ft));return{labelNames:Wt,selected:qt}},[Y.keepLabels,ee]),at=Wt=>{ae({...Y,valueLabel:Wt?.value})},Et=Wt=>{if(et.has(Wt)?et.delete(Wt):et.add(Wt),et.size===ke.length||!et.size){const{keepLabels:Ft,...qt}=Y;ae(qt)}else ae({...Y,keepLabels:[...et]})};return u.createElement("div",null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Mode",labelWidth:20},u.createElement(re.S,{options:ys,value:Y.mode??Xs.k.Columns,onChange:Wt=>ae({...Y,mode:Wt})}))),u.createElement(fe.Z,null,u.createElement(ve._,{label:"Labels",labelWidth:20},u.createElement(Sa.K,{gap:1,wrap:!0},ke.map((Wt,Ft)=>{const qt=Wt.label;return u.createElement(rn.B,{key:`${qt}/${Ft}`,onClick:()=>Et(qt),label:qt,selected:et.has(qt)})})))),Y.mode!==Xs.k.Rows&&u.createElement(fe.Z,null,u.createElement(ve._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},u.createElement(ye.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:ke,value:Y?.valueLabel,onChange:at,className:"min-width-16"}))))},ja={id:q.W.labelsToFields,editor:ua,transformation:ne.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column.`,categories:new Set([M.w.Reformat])},Pa=({options:ee,onChange:Y})=>{const ae=(0,u.useCallback)(Ee=>{Y({...ee,limitField:Number(Ee.currentTarget.value)})},[Y,ee]);return u.createElement(u.Fragment,null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Limit",labelWidth:8},u.createElement(de.I,{placeholder:"Limit count",pattern:"[0-9]*",value:ee.limitField,onChange:ae,width:25}))))},Ya={id:q.W.limit,editor:Pa,transformation:ne.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed.",categories:new Set([M.w.Filter])},_s=({input:ee,options:Y,onChange:ae})=>ee.length<=1?u.createElement(Un.S,null,"Merge has no effect when applied on a single frame."):null,Us={id:q.W.merge,editor:_s,transformation:ne.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`,categories:new Set([M.w.Combine])};var ds=e(85532),cn=e(6788),os=e(73453),qs=e(67437);const Dr=({options:ee,input:Y,onChange:ae})=>{const{indexByName:Ee,excludeByName:ke,renameByName:et}=ee,at=(0,Yt.Hg)(Y),Et=(0,u.useMemo)(()=>Qs(at,Ee),[at,Ee]),Wt=(0,u.useCallback)((dn,Rn)=>{ae({...ee,excludeByName:{...ke,[dn]:Rn}})},[ae,ee,ke]),Ft=(0,u.useCallback)(dn=>{if(!dn||!dn.destination)return;const Rn=dn.source.index,zn=dn.destination.index;Rn!==zn&&ae({...ee,indexByName:As(at,Rn,zn)})},[ae,ee,at]),qt=(0,u.useCallback)((dn,Rn)=>{ae({...ee,renameByName:{...ee.renameByName,[dn]:Rn}})},[ae,ee]);return Y.length>1?u.createElement(Un.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):u.createElement(ds.Z5,{onDragEnd:Ft},u.createElement(ds.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},dn=>u.createElement("div",{ref:dn.innerRef,...dn.droppableProps},Et.map((Rn,zn)=>u.createElement(dr,{fieldName:Rn,renamedFieldName:et[Rn],index:zn,onToggleVisibility:Wt,onRenameField:qt,visible:!ke[Rn],key:Rn})),dn.placeholder)))};Dr.displayName="OrganizeFieldsTransformerEditor";const dr=({fieldName:ee,renamedFieldName:Y,index:ae,visible:Ee,onToggleVisibility:ke,onRenameField:et})=>{const at=(0,Ve.wW)(Fr);return u.createElement(ds._l,{draggableId:ee,index:ae},Et=>u.createElement("div",{className:"gf-form-inline",ref:Et.innerRef,...Et.draggableProps},u.createElement("div",{className:"gf-form gf-form--grow"},u.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},u.createElement(os.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:at.draggable,...Et.dragHandleProps}),u.createElement(qs.h,{className:at.toggle,size:"md",name:Ee?"eye":"eye-slash",onClick:()=>ke(ee,Ee),tooltip:Ee?"Disable":"Enable"}),u.createElement("span",{className:at.name,title:ee},ee)),u.createElement(de.I,{className:"flex-grow-1",defaultValue:Y||"",placeholder:`Rename ${ee}`,onBlur:Wt=>et(ee,Wt.currentTarget.value)}))))};dr.displayName="DraggableFieldName";const Fr=ee=>({toggle:(0,te.css)`
    margin: 0 8px;
    color: ${ee.colors.text.secondary};
  `,draggable:(0,te.css)`
    opacity: 0.4;
    &:hover {
      color: ${ee.colors.text.maxContrast};
    }
  `,name:(0,te.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${ee.typography.bodySmall.fontSize};
    font-weight: ${ee.typography.fontWeightMedium};
  `}),As=(ee,Y,ae)=>{const Ee=Array.from(ee),[ke]=Ee.splice(Y,1);return Ee.splice(ae,0,ke),Ee.reduce((et,at,Et)=>(et[at]=Et,et),{})},Qs=(ee,Y={})=>{if(!Y||Object.keys(Y).length===0)return ee;const ae=(0,cn.$)(Y);return ee.sort(ae)},Ls={id:q.W.organize,editor:Dr,transformation:ne.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data.",categories:new Set([M.w.ReorderAndRename])};var ws=e(85722),ps=e(74639);const Sr=({options:ee,onChange:Y})=>{const ae=[{label:"Series to rows",value:ws.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:ws.AL.ReduceFields,description:"Collapse each field into a single value"}],Ee=(0,u.useCallback)(at=>{const Et=at.value;Y({...ee,mode:Et,includeTimeField:Et===ws.AL.ReduceFields?!!ee.includeTimeField:!1})},[Y,ee]),ke=(0,u.useCallback)(()=>{Y({...ee,includeTimeField:!ee.includeTimeField})},[Y,ee]),et=(0,u.useCallback)(()=>{Y({...ee,labelsToFields:!ee.labelsToFields})},[Y,ee]);return u.createElement(u.Fragment,null,u.createElement(ve._,{label:"Mode","aria-label":ps.wl.components.Transforms.Reduce.modeLabel,grow:!0,labelWidth:16},u.createElement(ye.Ph,{options:ae,value:ae.find(at=>at.value===ee.mode)||ae[0],onChange:Ee})),u.createElement(ve._,{label:"Calculations","aria-label":ps.wl.components.Transforms.Reduce.calculationsLabel,grow:!0,labelWidth:16},u.createElement(Oe.m,{placeholder:"Choose Stat",allowMultiple:!0,stats:ee.reducers||[],onChange:at=>{Y({...ee,reducers:at})}})),ee.mode===ws.AL.ReduceFields&&u.createElement(ve._,{htmlFor:"include-time-field",labelWidth:16,label:"Include time"},u.createElement(Fn.x,{id:"include-time-field",value:!!ee.includeTimeField,onChange:ke})),ee.mode!==ws.AL.ReduceFields&&u.createElement(ve._,{htmlFor:"labels-to-fields",labelWidth:16,label:"Labels to fields"},u.createElement(Fn.x,{id:"labels-to-fields",value:!!ee.labelsToFields,onChange:et})))},Lt={id:q.W.reduce,editor:Sr,transformation:ne.Y.reduceTransformer,name:ne.Y.reduceTransformer.name,description:ne.Y.reduceTransformer.description,categories:new Set([M.w.CalculateNewFields])};class Ot extends u.PureComponent{constructor(Y){super(Y),this.handleRegexChange=ae=>{const Ee=ae.currentTarget.value;let ke=!0;if(Ee)try{Ee&&(0,Mt.jO)(Ee)}catch{ke=!1}this.setState(et=>({...et,regex:Ee,isRegexValid:ke}))},this.handleRenameChange=ae=>{const Ee=ae.currentTarget.value;this.setState(ke=>({...ke,renamePattern:Ee}))},this.handleRegexBlur=ae=>{const Ee=ae.currentTarget.value;let ke=!0;try{Ee&&(0,Mt.jO)(Ee)}catch{ke=!1}this.setState({isRegexValid:ke},()=>{ke&&this.props.onChange({...this.props.options,regex:Ee})})},this.handleRenameBlur=ae=>{const Ee=ae.currentTarget.value;this.setState({renamePattern:Ee},()=>this.props.onChange({...this.props.options,renamePattern:Ee}))},this.state={regex:Y.options.regex,renamePattern:Y.options.renamePattern,isRegexValid:!0}}render(){const{regex:Y,renamePattern:ae,isRegexValid:Ee}=this.state;return u.createElement(u.Fragment,null,u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form gf-form--grow"},u.createElement("div",{className:"gf-form-label width-8"},"Match"),u.createElement($t.g,{invalid:!Ee,error:Ee?void 0:"Invalid pattern",className:(0,te.css)`
                margin-bottom: 0;
              `},u.createElement(de.I,{placeholder:"Regular expression pattern",value:Y||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),u.createElement("div",{className:"gf-form-inline"},u.createElement("div",{className:"gf-form gf-form--grow"},u.createElement("div",{className:"gf-form-label width-8"},"Replace"),u.createElement($t.g,{className:(0,te.css)`
                margin-bottom: 0;
              `},u.createElement(de.I,{placeholder:"Replacement pattern",value:ae||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const on={id:q.W.renameByRegex,editor:Ot,transformation:ne.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders.",categories:new Set([M.w.ReorderAndRename])},Xt=({input:ee,options:Y,onChange:ae})=>null,Dn={id:q.W.seriesToRows,editor:Xt,transformation:ne.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`,categories:new Set([M.w.Combine,M.w.Reformat])},wn=({input:ee,options:Y,onChange:ae})=>{const Ee=(0,Yt.Hg)(ee).map(at=>({label:at,value:at})),ke=(0,u.useCallback)((at,Et)=>{ae({...Y,sort:[Et]})},[ae,Y]),et=Y.sort?.length?Y.sort:[{}];return u.createElement("div",null,et.map((at,Et)=>u.createElement(fe.Z,{key:`${at.field}/${Et}`},u.createElement(ve._,{label:"Field",labelWidth:10,grow:!0},u.createElement(ye.Ph,{options:Ee,value:at.field,placeholder:"Select field",onChange:Wt=>{ke(Et,{...at,field:Wt.value})}})),u.createElement(ve._,{label:"Reverse"},u.createElement(Fn.x,{value:!!at.desc,onChange:()=>{ke(Et,{...at,desc:!at.desc})}})))))},Bn={id:q.W.sortBy,editor:wn,transformation:ne.Y.sortByTransformer,name:ne.Y.sortByTransformer.name,description:ne.Y.sortByTransformer.description,categories:new Set([M.w.ReorderAndRename])};function Gn({options:ee,onChange:Y}){const[ae,Ee]=(0,u.useState)(ee),ke=Tn(),et=xt(),at=()=>{ae.push({path:""}),Ee([...ae]),Ft()},Et=qt=>{ae&&(ae.splice(qt,1),Ee([...ae]),Ft())},Wt=(qt,dn,Rn)=>{ae&&(Rn==="alias"?ae[dn].alias=qt.currentTarget.value??"":ae[dn].path=qt.currentTarget.value??"",Ee([...ae]))},Ft=()=>{Y(ae)};return u.createElement("ol",{className:(0,te.cx)(et.list)},ae&&ae.map((qt,dn)=>u.createElement("li",{key:dn},u.createElement(fe.Z,null,u.createElement(ve._,{label:"Field",tooltip:ke.field,grow:!0},u.createElement(de.I,{onBlur:Ft,onChange:Rn=>Wt(Rn,dn,"path"),value:qt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),u.createElement(ve._,{label:"Alias",tooltip:ke.alias},u.createElement(de.I,{width:12,value:qt.alias,onBlur:Ft,onChange:Rn=>Wt(Rn,dn,"alias")})),u.createElement(ve._,{className:(0,te.cx)(et.removeIcon)},u.createElement(qs.h,{onClick:()=>Et(dn),name:"trash-alt",tooltip:"Remove path"}))))),u.createElement(ve._,null,u.createElement(ie.zx,{icon:"plus",onClick:()=>at(),variant:"secondary"},"Add path")))}const Tn=()=>{const ee=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:u.createElement("div",null,"A valid path of an json object.",u.createElement("div",null,u.createElement("strong",null,"JSON Value:")),u.createElement("pre",null,u.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),u.createElement("strong",null,"Valid Paths:"),ee.map((Y,ae)=>u.createElement("p",{key:ae},u.createElement("code",null,Y.path),u.createElement("i",null,Y.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function xt(){return{list:(0,te.css)`
      margin-left: 20px;
    `,removeIcon:(0,te.css)`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var Nn=e(32053),Fa=(ee=>(ee.JSON="json",ee.KeyValues="kvp",ee.Auto="auto",ee))(Fa||{});const us={id:Fa.JSON,name:"JSON",description:"Parse JSON string",parse:ee=>JSON.parse(ee)};function Ts(ee){const Y=[];let ae="",Ee="";const ke={};for(let et=0;et<ee.length;et++){let at=ee[et];at===ae&&(ae="",at=ee[++et]);const Et=at==="\\";if(Et&&(at=ee[++et]),Et||ae.length){Y.push(at);continue}switch((at==='"'||at==="'")&&(ae=at),at){case":":case"=":Y.length&&(Ee&&(ke[Ee]=""),Ee=Y.join(""),Y.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:Y.length&&Ee===""&&(ke[Y.join("")]="",Y.length=0);case",":case";":case"&":case"{":case"}":if(Y.length){const Wt=Y.join("");Ee.length?(ke[Ee]=Wt,Ee=""):Ee=Wt,Y.length=0}break;default:Y.push(at),et===ee.length-1&&Ee===""&&Y.length&&(ke[Y.join("")]="",Y.length=0)}}return Ee.length&&(ke[Ee]=Y.join("")),ke}const vs={id:Fa.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:Ts},Ws=[us,vs],xr={id:Fa.Auto,name:"Auto",description:"parse new fields automatically",parse:ee=>{for(const Y of Ws)try{const ae=Y.parse(ee);if(ae!=null)return ae}catch{}}},Mr=new Ce.B(()=>[...Ws,xr]),Za={id:q.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(ee,Y)=>ae=>ae.pipe((0,Gt.U)(Ee=>Za.transformer(ee,Y)(Ee))),transformer:ee=>Y=>Y.map(ae=>Ps(ae,ee))};function Ps(ee,Y){if(!Y.source)return ee;const ae=(0,ka.findField)(ee,Y.source);if(!ae)return ee;const Ee=Mr.getIfExists(Y.format??Fa.Auto);if(!Ee)throw new Error("unkonwn extractor");const ke=ee.length,et=[],at=new Map;for(let Wt=0;Wt<ke;Wt++){let Ft=ae.values[Wt];if((0,E.isString)(Ft))try{Ft=Ee.parse(Ft)}catch{Ft={}}if(Ft!=null){if(Y.format===Fa.JSON&&Y.jsonPaths&&Y.jsonPaths?.length>0){const qt={},dn=Y.jsonPaths.filter(Rn=>Rn.path);dn.length>0&&(dn.forEach(Rn=>{const zn=Rn.alias&&Rn.alias.length>0?Rn.alias:Rn.path;qt[zn]=(0,E.get)(Ft,Rn.path)??"Not Found"}),Ft=qt)}for(const[qt,dn]of Object.entries(Ft)){let Rn=at.get(qt);Rn==null&&(Rn=new Array(ke),at.set(qt,Rn),et.push(qt)),Rn[Wt]=dn}}}const Et=et.map(Wt=>{const Ft=at.get(Wt);return{name:Wt,values:Ft,type:Ft?(0,Nn.DP)(Ft.find(qt=>qt!=null)):oe.fS.other,config:{}}});if(Y.keepTime){const Wt=(0,ka.findField)(ee,"Time")||(0,ka.findField)(ee,"time");Wt&&Et.unshift(Wt)}return Y.replace||Et.unshift(...ee.fields),{...ee,fields:Et}}const ur={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},Xa=({input:ee,options:Y,onChange:ae})=>{const Ee=Ft=>{ae({...Y,source:Ft})},ke=Ft=>{ae({...Y,format:Ft?.value})},et=Ft=>{ae({...Y,jsonPaths:Ft})},at=()=>{Y.replace&&(Y.keepTime=!1),ae({...Y,replace:!Y.replace})},Et=()=>{ae({...Y,keepTime:!Y.keepTime})},Wt=Mr.selectOptions(Y.format?[Y.format]:void 0);return u.createElement("div",null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Source",labelWidth:16},u.createElement(Ca.b,{context:{data:ee},value:Y.source??"",onChange:Ee,item:ur}))),u.createElement(fe.Z,null,u.createElement(ve._,{label:"Format",labelWidth:16},u.createElement(ye.Ph,{value:Wt.current[0],options:Wt.options,onChange:ke,width:24,placeholder:"Auto"}))),Y.format==="json"&&u.createElement(Gn,{options:Y.jsonPaths??[],onChange:et}),u.createElement(fe.Z,null,u.createElement(ve._,{label:"Replace all fields",labelWidth:16},u.createElement(Fn.x,{value:Y.replace??!1,onChange:at}))),Y.replace&&u.createElement(fe.Z,null,u.createElement(ve._,{label:"Keep time",labelWidth:16},u.createElement(Fn.x,{value:Y.keepTime??!1,onChange:Et}))))},Es={id:q.W.extractFields,editor:Xa,transformation:Za,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc).",categories:new Set([M.w.Reformat])};var er=e(63439),Mo=e(73990);const Kr={id:q.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels.",defaultOptions:{},operator:(ee,Y)=>ae=>ae.pipe((0,Gt.U)(Ee=>Kr.transformer(ee,Y)(Ee))),transformer:ee=>Y=>!Y||!Y.length?Y:[vr(ee,Y)]};function vr(ee,Y){if(!ee.value?.length)return $r("No value labele configured");const ae=(0,Yt.jY)(Y);if(ae.size<1)return $r("No labels in result");if(!ae.has(ee.value))return $r("Value label not found");let Ee=ee.join?.length?ee.join:Array.from(ae);Ee=Ee.filter(dn=>dn!==ee.value);const ke=new Set,et=new Map,at={};for(const dn of Y)for(const Rn of dn.fields)if(Rn.labels&&Rn.type!==oe.fS.time){const zn=Ee.map(gs=>Rn.labels[gs]),sa=zn.join(",");let xa=et.get(sa);xa||(xa={keys:zn,values:{}},et.set(sa,xa));const Qa=Rn.labels[ee.value],Zs=Rn.values,Ss=xa.values[Qa];Ss?xa.values[Qa]=Ss.concat(Zs):xa.values[Qa]=Zs,at[Qa]||(at[Qa]=Rn),ke.add(Qa)}const Et=Array.from(ke),Wt=Ee.map(()=>[]),Ft=Et.map(()=>[]);for(const dn of et.values()){let Rn=-1,zn=!1;for(;!zn;){Rn++,zn=!0;for(let sa=0;sa<Ee.length;sa++)Wt[sa].push(dn.keys[sa]);for(let sa=0;sa<Et.length;sa++){const xa=Et[sa],Qa=dn.values[xa]??[];Ft[sa].push(Qa[Rn]),Qa.length>Rn+1&&(zn=!1)}}}const qt={fields:[],length:Ft[0].length};for(let dn=0;dn<Ee.length;dn++)qt.fields.push({name:Ee[dn],config:{},type:oe.fS.string,values:Wt[dn]});for(let dn=0;dn<Et.length;dn++){const Rn=at[Et[dn]];qt.fields.push({name:Et[dn],config:{},type:Rn.type??oe.fS.number,values:Ft[dn]})}return qt}function $r(ee){return{meta:{notices:[{severity:"error",text:ee}]},fields:[{name:"Error",type:oe.fS.string,config:{},values:[ee]}],length:0}}function je({input:ee,options:Y,onChange:ae}){const Ee=(0,u.useMemo)(()=>{let Wt;const Ft=(0,Yt.jY)(ee),qt=Array.from(Ft).map(Qa=>({label:Qa,value:Qa}));let dn=qt.find(Qa=>Qa.value===Y.value);!dn&&Y.value&&(dn={label:`${Y.value} (not found)`,value:Y.value},qt.push(dn)),ee.length?Ft.size===0&&(Wt=u.createElement(er.b,{title:"No labels found"},"The input does not contain any labels")):Wt=u.createElement(er.b,{title:"No input found"},"No input (or labels) found"),Ft.delete(Y.value);const Rn=Array.from(Ft).map(Qa=>({label:Qa,value:Qa}));let zn=Rn;const sa=!!Y.join?.length;let xa="Join";return sa?zn=Rn.filter(Qa=>!Y.join.includes(Qa.value)):xa=Rn.map(Qa=>Qa.value).join(", "),{warn:Wt,valueOptions:qt,valueOption:dn,joinOptions:Rn,addOptions:zn,addText:xa,hasJoin:sa,key:Date.now()}},[Y,ee]),ke=(Wt,Ft)=>{if(!Y.join)return;const qt=Y.join.slice();if(Ft)qt[Wt]=Ft;else if(qt.splice(Wt,1),!qt.length){ae({...Y,join:void 0});return}const dn=new Set(qt);Y.value&&dn.delete(Y.value),ae({...Y,join:Array.from(dn)})},et=Wt=>{const Ft=Wt?.value;if(!Ft)return;const qt=Y.join?Y.join.slice():[];qt.push(Ft),ae({...Y,join:qt})},at=10,Et="No labels found";return u.createElement("div",null,Ee.warn,u.createElement(fe.Z,null,u.createElement(ve._,{error:"required",invalid:!Y.value?.length,label:"Value",labelWidth:at,tooltip:"Select the label indicating the values name"},u.createElement(ye.Ph,{options:Ee.valueOptions,value:Ee.valueOption,onChange:Wt=>ae({...Y,value:Wt.value}),noOptionsMessage:Et}))),Ee.hasJoin?Y.join.map((Wt,Ft)=>u.createElement(fe.Z,{key:Wt+Ft},u.createElement(ve._,{label:"Join",labelWidth:at,error:"Unable to join by the value label",invalid:Wt===Y.value},u.createElement(Qt.Lh,null,u.createElement(ye.Ph,{options:Ee.joinOptions,value:Ee.joinOptions.find(qt=>qt.value===Wt),isClearable:!0,onChange:qt=>ke(Ft,qt?.value),noOptionsMessage:Et}),!!(Ee.addOptions.length&&Ft===Y.join.length-1)&&u.createElement(Mo.b,{icon:"plus",label:"",options:Ee.addOptions,onChange:et,variant:"secondary"}))))):u.createElement(u.Fragment,null,!!Ee.addOptions.length&&u.createElement(fe.Z,null,u.createElement(ve._,{label:"Join",labelWidth:at},u.createElement(ye.Ph,{options:Ee.addOptions,placeholder:Ee.addText,onChange:et,noOptionsMessage:Et})))))}const Zt={id:Kr.id,editor:je,transformation:Kr,name:Kr.name,description:Kr.description,state:ct.BV.beta,categories:new Set([M.w.Combine])};var Ht=e(58514),fn=e(22479),bn=e(91053),An=e(92886);const Vn={id:q.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:ee=>Y=>Y.pipe((0,fn.z)(ae=>(0,bn.D)(qn(ae,ee))))};async function qn(ee,Y){const ae=Z.Ls.get(le.mi.byName).get(Y?.lookupField),Ee=await(0,An.so)(Y?.gazetteer??An.LI);return Ee.frame?Yn(ee,Ee,ae):Promise.reject("missing frame in gazetteer")}function Yn(ee,Y,ae){const Ee=Y.frame()?.fields;return Ee?ee.map(ke=>{const et=ke.length,at=[];for(const Et of ke.fields)if(at.push(Et),ae(Et,ke,ee)){const Wt=Et.values,Ft=[];for(const qt of Ee){const dn=new Array(et);Ft.push(dn),at.push({...qt,values:dn})}for(let qt=0;qt<Y.count;qt++){const dn=Y.find(Wt[qt]);if(dn?.index!=null)for(let Rn=0;Rn<Ee.length;Rn++)Ft[Rn][qt]=Ee[Rn].values[dn.index]}}return{...ke,fields:at}}):ee}const ta={settings:{width:30,filter:ee=>ee.type===oe.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},pa={settings:{}},ms=({input:ee,options:Y,onChange:ae})=>{const Ee=(0,u.useCallback)(et=>{ae({...Y,lookupField:et})},[ae,Y]),ke=(0,u.useCallback)(et=>{ae({...Y,gazetteer:et})},[ae,Y]);return u.createElement("div",null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Field",labelWidth:12},u.createElement(Ca.b,{context:{data:ee},value:Y?.lookupField??"",onChange:Ee,item:ta}))),u.createElement(fe.Z,null,u.createElement(ve._,{label:"Lookup",labelWidth:12},u.createElement(Ht.Q,{value:Y?.gazetteer??"",context:{data:ee},item:pa,onChange:ke}))))},Na={id:q.W.fieldLookup,editor:ms,transformation:Vn,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source. This currently supports spatial data, but will eventually support more formats.",state:ct.BV.alpha,categories:new Set([M.w.PerformSpatialOperations])};var Ea=e(38588),Oa=e(95312),za=e(31323);const es=(ee,Y,ae=[])=>(Y===0?ae.push(ee):ee.forEach(Ee=>{es(Ee,Y-1,ae)}),ae);function tr(ee){const Y=ee[0].length,ae=ee.length,Ee=new Map;for(let ke=0;ke<Y;ke++){let et=Ee;for(let at=0;at<ae;at++){let Et=ee[at][ke],Wt=et.get(Et);Wt==null&&(Wt=at===ae-1?[]:new Map,et.set(Et,Wt)),et=Wt}et.push(ke)}return es(Ee,ae)}const nr={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function gi(ee,Y,ae){return Y.map((Ee,ke)=>ee.withNames?`${Ee}${ee.separator1}${ae[ke]}`:ae[ke]).join(ee.separator2)}function To(ee,Y){const ae={};return ee.forEach((Ee,ke)=>{ae[Ee]=String(Y[ke])}),ae}const go={id:q.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(ee,Y)=>ae=>ae.pipe((0,Gt.U)(Ee=>go.transformer(ee,Y)(Ee))),transformer:(ee,Y)=>{const ae=(0,Oa.f)({names:ee.fields});if(!ae)return za.d.transformer({},Y);const Ee=(0,Z.sq)(ae);return ke=>ke.length?tc(ke[0],Ee,ee):ke}};function tc(ee,Y,ae){const Ee=ee.fields.filter(Et=>Y(Et,ee,[ee])),ke=Ee.map(Et=>Et.values),et=Ee.map(Et=>Et.name),at={...nr,...ae?.naming};return tr(ke).map(Et=>{let Wt=ee.name,Ft={};if(at.asLabels)Ft=To(et,Ee.map((dn,Rn)=>ke[Rn][Et[0]]));else{let dn=gi(at,et,Ee.map((Rn,zn)=>ke[zn][Et[0]]));at?.append&&ee.name&&(dn=`${ee.name} ${dn}`),Wt=dn}let qt=ee.fields;if(!ae?.keepFields){const dn=new Set(et);qt=ee.fields.filter(Rn=>!dn.has(Rn.name))}return{name:Wt,meta:ee.meta,length:Et.length,fields:qt.map(dn=>{const Rn=dn.values,zn=Array(Et.length);for(let sa=0;sa<Et.length;sa++)zn[sa]=Rn[Et[sa]];return{name:dn.name,type:dn.type,config:dn.config,labels:{...dn.labels,...Ft},values:zn}})}})}function jd({input:ee,options:Y,onChange:ae}){const Ee=(0,Ea.IX)(ee),ke=(0,Ea.nw)(Ee),et=(0,u.useMemo)(()=>{const Ft=new Set(Y.fields);return Ft.size<1?ke:ke.filter(qt=>!Ft.has(qt.value))},[ke,Y]),at=(0,u.useCallback)(Ft=>{if(!Ft.value)return;const qt=new Set(Y.fields);qt.add(Ft.value),ae({...Y,fields:[...qt]})},[ae,Y]),Et=(0,u.useCallback)(Ft=>{if(!Ft)return;const qt=new Set(Y.fields);qt.delete(Ft),ae({...Y,fields:[...qt]})},[ae,Y]);if(ee.length>1)return u.createElement(Un.S,null,"Partition by values only works with a single frame.");const Wt=[...new Set(Y.fields)];return u.createElement("div",null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Field",labelWidth:10,grow:!0},u.createElement(Qt.Lh,null,Wt.map(Ft=>u.createElement(ie.zx,{key:Ft,icon:"times",variant:"secondary",size:"md",onClick:()=>Et(Ft)},Ft)),et.length&&u.createElement(Mo.b,{variant:"secondary",size:"md",options:et,onChange:at,label:"Select field",icon:"plus"})))))}const nc={id:q.W.partitionByValues,editor:jd,transformation:go,name:go.name,description:go.description,state:ct.BV.alpha,categories:new Set([M.w.Reformat])};var po=e(43987),ac=e(72164),Oo=e(48962),ho=(ee=>(ee.TimeSeriesWide="wide",ee.TimeSeriesLong="long",ee.TimeSeriesMulti="multi",ee.TimeSeriesMany="many",ee))(ho||{});function Vr(ee){if(!Array.isArray(ee)||ee.length===0)return ee;const Y=[];for(const ae of _i(ee)){const Ee=ae.fields[0];if(!Ee||Ee.type!==oe.fS.time)continue;const ke=[],et=[];for(const at of ae.fields)switch(at.type){case oe.fS.number:case oe.fS.boolean:ke.push(at);break;case oe.fS.string:et.push(at);break}for(const at of ke)if(et.length){const Et=new Map;for(let Wt=0;Wt<ae.length;Wt++){const Ft=Ee.values[Wt],qt=at.values[Wt];if(qt===void 0||Ft==null)continue;const dn=et.map(zn=>zn.values[Wt]).join("/");let Rn=Et.get(dn);if(!Rn){Rn={key:dn,time:[],value:[],labels:{}};for(const zn of et)Rn.labels[zn.name]=zn.values[Wt];Et.set(dn,Rn)}Rn.time.push(Ft),Rn.value.push(qt)}for(const Wt of Et.values())Y.push({name:ae.name,refId:ae.refId,meta:{...ae.meta,type:po.P.TimeSeriesMulti},fields:[{...Ee,values:Wt.time},{...at,values:Wt.value,labels:Wt.labels}],length:Wt.time.length})}else Y.push({name:ae.name,refId:ae.refId,meta:{...ae.meta,type:po.P.TimeSeriesMulti},fields:[Ee,at],length:ae.length})}return Y}function _i(ee){if(!Array.isArray(ee)||ee.length===0)return ee;const Y=[];for(const ae of ee){let Ee;const ke=[],et={},at={},Et={},Wt={};for(let sa=0;sa<ae.fields.length;sa++){const xa=ae.fields[sa];switch(xa.type){case oe.fS.string:case oe.fS.boolean:xa.name in Wt||(Wt[xa.name]=sa,at[xa.name]=!0);break;case oe.fS.time:if(!Ee){Ee=xa;break}default:if(xa.name in et){const Ss=et[xa.name];if(xa.type!==Ss)continue}else et[xa.name]=xa.type,ke.push(xa.name);const Qa=JSON.stringify(xa.labels),Zs=Et[Qa];if(Zs!==void 0?Zs.push(sa):Et[Qa]=[sa],xa.labels!=null)for(const Ss in xa.labels)at[Ss]=!0}}if(!Ee)continue;const Ft=[],qt=[],dn=[],Rn=[];for(let sa=0;sa<ae.length;sa++)Ft.push({time:Ee.values[sa],wideRowIndex:sa});for(const sa in Et)qt.push(sa);for(const sa in at)dn.push(sa);for(const sa in Wt)Rn.push(sa);Ft.sort((sa,xa)=>sa.time-xa.time),qt.sort(),dn.sort(),ke.sort();const zn=new ac.v({...ae,meta:{...ae.meta,type:po.P.TimeSeriesLong},fields:[{name:Ee.name,type:Ee.type}]});for(const sa of ke)zn.addField({name:sa,type:et[sa]});for(const sa of dn)zn.addField({name:sa,type:oe.fS.string});for(const sa of Ft){const{time:xa,wideRowIndex:Qa}=sa;for(const Zs of qt){const Ss={};for(const Rr of Rn)Ss[Rr]=ae.fields[Wt[Rr]].values[Qa];let gs=0;for(const Rr of Et[Zs]){const ui=ae.fields[Rr];if(gs++===0&&ui.labels!=null)for(const Yl in ui.labels)Ss[Yl]=ui.labels[Yl];Ss[ui.name]=ui.values[Qa]}Ss[Ee.name]=xa,zn.add(Ss)}}Y.push(zn)}return Y}function Bm(ee){return tc(ee,ae=>ae.type===oe.fS.string).map(ae=>(ae.meta||(ae.meta={}),ae.meta.type=po.P.TimeSeriesMulti,ae))}const ko={id:q.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(ee,Y)=>ae=>ae.pipe((0,Gt.U)(Ee=>ko.transformer(ee,Y)(Ee))),transformer:ee=>{const Y=ee?.format??"wide";if(Y==="many"||Y==="multi")return Vr;if(Y==="long")return _i;const ae=Z.Ls.get(le.mi.firstTimeField).get({});return Ee=>{if(!Ee.length)return[];const ke=[];for(const at of Ee)at.meta?.type===po.P.TimeSeriesLong?Bm(at).forEach(Et=>ke.push(Et)):ke.push(at);const et=(0,Oo._9)({frames:ke,joinBy:ae,keepOriginIndices:!0});return et?(et.meta||(et.meta={}),et.meta.type=po.P.TimeSeriesWide,[et]):[]}}},Ar={label:"Wide time series",value:ho.TimeSeriesWide,description:"Creates a single frame joined by time",info:u.createElement("ul",null,u.createElement("li",null,"Single frame"),u.createElement("li",null,"1st field is shared time field"),u.createElement("li",null,"Time in ascending order"),u.createElement("li",null,"Multiple value fields of any type"))},Qd={label:"Multi-frame time series",value:ho.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:u.createElement("ul",null,u.createElement("li",null,"Multiple frames"),u.createElement("li",null,"Each frame has two fields: time, value"),u.createElement("li",null,"Time in ascending order"),u.createElement("li",null,"String values are represented as labels"),u.createElement("li",null,"All values are numeric"))},sc={label:"Long time series",value:ho.TimeSeriesLong,description:"Convert each frame to long format",info:u.createElement("ul",null,u.createElement("li",null,"Single frame"),u.createElement("li",null,"1st field is time field"),u.createElement("li",null,"Time in ascending order, but may have duplictes"),u.createElement("li",null,"String values are represented as separate fields rather than as labels"),u.createElement("li",null,"Multiple value fields may exist"))},zr=[Ar,Qd,sc];function Ua(ee){const{options:Y,onChange:ae}=ee,Ee=(0,Ve.wW)(vo),ke=(0,u.useCallback)(et=>{ae({...Y,format:et.value})},[ae,Y]);return u.createElement(u.Fragment,null,u.createElement(fe.Z,null,u.createElement(ve._,{label:"Format",labelWidth:12},u.createElement(ye.Ph,{width:35,options:zr,value:zr.find(et=>et.value===ho.TimeSeriesMulti&&Y.format===ho.TimeSeriesMany?!0:et.value===Y.format)||zr[0],onChange:ke,className:"flex-grow-1"}))),u.createElement(fe.Z,null,u.createElement(ve._,{label:"Info",labelWidth:12},u.createElement("div",{className:Ee.info},(zr.find(et=>et.value===Y.format)||zr[0]).info))))}const vo=ee=>({info:(0,te.css)`
    margin-left: 20px;
  `}),ks={id:ko.id,editor:Ua,transformation:ko,name:ko.name,description:ko.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `,categories:new Set([M.w.Reformat])},ar={id:q.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config.",defaultOptions:{},operator:ee=>Y=>Y.pipe((0,Gt.U)(ae=>ae.map(Ee=>pi(ee,Ee))))};function pi(ee,Y){const ae=nn(Y,ee.mappings??[],!0),{nameField:Ee,valueField:ke}=ae;if(!Ee||!ke)return Y;const et=[];for(let at=0;at<Ee.values.length;at++){const Et=Ee.values[at],Wt=ke.values[at],Ft=ut(Y,at,ae),qt=rc(Y,at,ae),dn={name:`${Et}`,type:ke.type,values:[Wt],config:Ft,labels:qt};et.push(dn)}return{fields:et,length:1}}function rc(ee,Y,ae){const Ee={...ae.nameField.labels};for(let ke=0;ke<ee.fields.length;ke++){const et=ee.fields[ke],at=(0,ce.CZ)(et,ee),Et=ae.index[at];if(Et.handler&&Et.handler.key!==ht.Label)continue;const Wt=et.values[Y];Wt!=null&&(Ee[at]=Wt)}return Ee}function hi({input:ee,options:Y,onChange:ae}){return ee.length===0?null:u.createElement("div",null,u.createElement(Ct,{frame:ee[0],mappings:Y.mappings??[],onChange:Ee=>ae({...Y,mappings:Ee}),withNameAndValue:!0}))}const ki={id:ar.id,editor:hi,transformation:ar,name:ar.name,description:ar.description,state:ct.BV.beta,categories:new Set([M.w.Reformat]),help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var ns=e(64167),Hi=e(79357),Fs=e(87746),oc=e(62236),Eo=e(83612),Ho=e(62129);const Gi={id:q.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results.",defaultOptions:{},operator:ee=>Y=>Y.pipe((0,fn.z)(ae=>(0,bn.D)(Io(ae,ee))))};function ic(ee){return ee.action===Fs.JJ.Modify&&ee.modify?.op===Fs.ac.LineBuilder}async function Io(ee,Y){const ae=await(0,Eo.cJ)(Y.source);if(ic(Y)){const Ee=await(0,Eo.cJ)(Y.modify?.target);return ee.map(ke=>{const et=(0,Eo.g6)(ke,ae),at=(0,Eo.g6)(ke,Ee);if(et.field&&at.field){const Et=[...ke.fields],Wt=(0,oc.Fh)(et.field,at.field),Ft=Et[0];return Ft.type===oe.fS.geo&&Ft!==et.field&&Ft!==at.field?Et[0]=(0,oc.EK)(Ft,Wt):Et.unshift(Wt),{...ke,fields:Et}}return ke})}return ee.map(Ee=>{let ke=(0,Eo.g6)(Ee,ae);if(ke.field){if(Y.action===Fs.JJ.Modify){switch(Y.modify?.op){case Fs.ac.AsLine:let at=ke.field.name;return(!at||at==="Point")&&(at="Line"),{...Ee,length:1,fields:[{...ke.field,name:at,type:oe.fS.geo,values:[(0,Ho.Lp)(ke.field)]}]}}return Ee}const et=ke.derived?[ke.field,...Ee.fields]:Ee.fields.slice(0);if(Y.action===Fs.JJ.Calculate&&(et.push((0,Ho.N7)(ke.field,Y.calculate??{})),ke.derived=!0),ke.derived)return{...Ee,fields:et}}return Ee})}const ji=(ee,Y)=>{const ae=Y.options??{};ee.addSelect({path:"action",name:"Action",description:"",defaultValue:Fs.JJ.Prepare,settings:{options:[{value:Fs.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:Fs.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:Fs.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),ae.action===Fs.JJ.Calculate?ee.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:Fs.Ii.Heading,settings:{options:[{value:Fs.Ii.Heading,label:"Heading"},{value:Fs.Ii.Area,label:"Area"},{value:Fs.Ii.Distance,label:"Distance"}]}}):ae.action===Fs.JJ.Modify&&ee.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:Fs.ac.AsLine,settings:{options:[{value:Fs.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:Fs.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),ic(ae)?(ee.addNestedOptions({category:["Source"],path:"source",build:(Ee,ke)=>{const et=ae.source??{};et.mode||(et.mode=ns.q1.Auto),(0,Hi.C)("Point","",Ee,et)}}),ee.addNestedOptions({category:["Target"],path:"modify",build:(Ee,ke)=>{const et=ae.modify?.target??{};et.mode||(et.mode=ns.q1.Auto),(0,Hi.C)("Point","target.",Ee,et)}})):(0,Hi.C)("Location","source.",ee,ae.source)},yo=ee=>{(0,u.useEffect)(()=>{if(!ee.options.source?.mode){const Ee=Pe(ji);ee.onChange({...Ee,...ee.options}),console.log("geometry useEffect",Ee)}},[]);const Y=_r((0,Ve.l4)()),ae=He(ee,ji);return u.createElement("div",null,u.createElement("div",null,ae.items.map(Ee=>Ee.render())),u.createElement("div",null,ae.categories.map(Ee=>u.createElement("div",{key:Ee.props.id,className:Y.wrap},u.createElement("h5",null,Ee.props.title),u.createElement("div",{className:Y.item},Ee.items.map(ke=>ke.render()))))))},_r=ee=>({wrap:(0,te.css)`
      margin-bottom: 20px;
    `,item:(0,te.css)`
      border-left: 4px solid ${ee.colors.border.strong};
      padding-left: 10px;
    `}),Qi={id:q.W.spatial,editor:yo,transformation:Gi,name:Gi.name,description:Gi.description,state:ct.BV.alpha,categories:new Set([M.w.PerformSpatialOperations])};var Ro=e(59425);const bo={id:q.W.timeSeriesTable,name:"Time series to table transform",description:"Time series to table rows.",defaultOptions:{},operator:ee=>Y=>Y.pipe((0,Gt.U)(ae=>Go(ee,ae)))};function Go(ee,Y){const ae=Yd(Y),Ee={},ke=[];for(const et of Y){if(!(0,Ro.pP)(et)){ke.push(et);continue}const at=et.refId??"",Et=ae[at]??{};let Wt=Ee[at];if(!Wt){Wt={name:"Trend"+(at&&Object.keys(ae).length>1?` #${at}`:""),type:oe.fS.frame,config:{},values:[]},Ee[at]=Wt;const qt=new ac.v;for(const dn of Object.values(Et))qt.addField(dn);qt.addField(Wt),qt.refId=at,ke.push(qt)}const Ft=et.fields[1].labels;for(const qt of Object.keys(Et)){const dn=Ft?.[qt]??null;Et[qt].values.push(dn)}Wt.values.push(et)}return ke}function Yd(ee){const Y={};for(const ae of ee){if(!(0,Ro.pP)(ae))continue;const Ee=ae.refId??"";Y[Ee]||(Y[Ee]={});for(const ke of ae.fields)if(ke.labels)for(const et of Object.keys(ke.labels))Y[Ee][et]||(Y[Ee][et]={name:et,type:oe.fS.string,config:{},values:[]})}return Y}function vi({input:ee,options:Y,onChange:ae}){return ee.length===0?null:u.createElement("div",null)}const Ao={id:bo.id,editor:vi,transformation:bo,name:bo.name,description:bo.description,state:ct.BV.beta,help:""},jo=()=>[Lt,tn,on,kn,Bt,Ls,Ns,Dn,ga,Ma,ja,Jn,Bn,Us,qa,ki,mt,ks,Rt,Qi,Na,Es,xe,Ga,Ya,Zt,nc,Ta,...n.config.featureToggles.timeSeriesTable?[Ao]:[]];function lc(){return new Promise(ee=>require(["vs/language/kusto/monaco.contribution"],()=>ee()))}function Zd(){return[{id:"kusto",name:"kusto",init:lc}]}var Jd=e(71949),fs=e(5933),cc=e(65217),Xd=e(88646),Yi=e(38192),dc=e(3935),Zi=e(86312),Er=e(65322),uc=e(56812);function qd(ee,Y){if(ee===Y)return!0;if(!(ee instanceof Object)||!(Y instanceof Object))return!1;const ae=Object.keys(ee),Ee=ae.length;for(let ke=0;ke<Ee;ke++)if(!(ae[ke]in Y))return!1;for(let ke=0;ke<Ee;ke++)if(ee[ae[ke]]!==Y[ae[ke]])return!1;return Ee===Object.keys(Y).length}var mr=e(18771);class Ji{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.state=new Xd.X({chromeless:!0,sectionNav:{node:{text:(0,Er.t)("nav.home.title","Home")},main:{text:""}},searchBarHidden:uc.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null,layout:Yi.Q.Canvas}),this.onToggleMegaMenu=()=>{const Y=!this.state.getValue().megaMenuOpen;(0,Zi.ff)("grafana_toggle_menu_clicked",{action:Y?"open":"close"}),this.update({megaMenuOpen:Y})},this.setMegaMenu=Y=>{this.update({megaMenuOpen:Y})},this.onToggleSearchBar=()=>{const{searchBarHidden:Y,kioskMode:ae}=this.state.getValue(),Ee=!Y;uc.Z.set(this.searchBarStorageKey,Ee),ae&&L.E1.partial({kiosk:null}),this.update({searchBarHidden:Ee,kioskMode:null})},this.onToggleKioskMode=()=>{const Y=this.getNextKioskMode();this.update({kioskMode:Y}),L.E1.partial({kiosk:this.getKioskUrlValue(Y)})}}setMatchedRoute(Y){this.currentRoute!==Y&&(this.currentRoute=Y,this.routeChangeHandled=!1)}update(Y){const ae=this.state.getValue(),Ee={...ae};this.routeChangeHandled||(Ee.actions=void 0,Ee.pageNav=void 0,Ee.sectionNav={node:{text:(0,Er.t)("nav.home.title","Home")},main:{text:""}},Ee.chromeless=this.currentRoute?.chromeless,Ee.layout=Yi.Q.Standard,this.routeChangeHandled=!0),Object.assign(Ee,Y),Ee.chromeless=Ee.kioskMode===mr.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(Ee,ae)||this.state.next(Ee)}ignoreStateUpdate(Y,ae){return!!(qd(Y,ae)||(Y.sectionNav!==ae.sectionNav||Y.pageNav!==ae.pageNav)&&Y.actions===ae.actions&&Y.layout===ae.layout&&Ei(Y.sectionNav.node,ae.sectionNav.node)&&Ei(Y.pageNav,ae.pageNav))}useState(){return(0,cc.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),L.E1.partial({kiosk:null})}setKioskModeFromUrl(Y){switch(Y){case"tv":this.update({kioskMode:mr.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:mr.KioskMode.Full})}}getKioskUrlValue(Y){switch(Y){case mr.KioskMode.TV:return"tv";case mr.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:Y,searchBarHidden:ae}=this.state.getValue();return ae||Y===mr.KioskMode.TV?(fs.Z.emit(dc.SI.alertSuccess,[(0,Er.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),mr.KioskMode.Full):Y?null:mr.KioskMode.TV}}function Ei(ee,Y){if(ee===Y)return!0;const ae=ee?.children?.find(ke=>ke.active),Ee=Y?.children?.find(ke=>ke.active);return ee?.text===Y?.text&&ee?.url===Y?.url&&ae?.url===Ee?.url&&Ei(ee?.parentItem,Y?.parentItem)}var Qo=e(53035),mc=e(74161),yi=e(44644);function Xi({actions:ee,children:Y,info:ae,pageNav:Ee,layout:ke,renderTitle:et,subTitle:at}){const Et=(0,u.useContext)(mc.v);return u.createElement(yi.T,{navModel:Et.sectionNav,pageNav:Ee,layout:ke,actions:ee,renderTitle:et,info:ae,subTitle:at},u.createElement(yi.T.Contents,null,Y))}var Po=e(78968);function qi(ee){const Y=ee.target instanceof Element&&fc(ee.target);if(!(ee.ctrlKey||ee.metaKey||ee.defaultPrevented)&&Y){let ae=Y.getAttribute("href");const Ee=Y.getAttribute("target");if(ae&&!Ee){const ke=Po.Cj.parseKeyValue(ae.split("?")[1]),et=ke.orgId&&Number(ke.orgId)!==Q.config.bootData.user.orgId;if((0,L.GQ)("utils",!1,"intercepting link click",ee),ee.preventDefault(),ae=O.u.stripBaseFromUrl(ae),ae[0]!=="/"||et)if(ae.indexOf("://")>0||ae.indexOf("mailto:")===0||et){window.location.href=ae;return}else if(ae.indexOf("#")===0){window.location.hash=ae;return}else ae=`/${ae}`;L.E1.push(ae)}}}function fc(ee){for(;ee!==null&&ee.tagName;){if(ee.tagName.toUpperCase()==="A")return ee;ee=ee.parentElement}return null}var eu=e(3613),gc=e(22377),sr=e(43620),el=e(60729),no=e(27173),is=e(84749);function pc(ee,...Y){const ae=(0,no.connect)(...Y)(ee);return Ee=>u.createElement(ae,{...Ee,store:is.h})}function tu(ee,...Y){const ae=(0,no.connect)(...Y)(ee);return Ee=>u.createElement(no.Provider,{store:is.h},u.createElement(ae,{...Ee,store:is.h}))}const hc=tu(ee=>u.createElement(u.Fragment,null,u.createElement(el.$i,{...ee},u.createElement(el.Y0,null))));var tl=e(94547);class rr{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.root=(0,D.s)(this.reactModalNode),this.onReactModalDismiss=()=>{this.root.render(null),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){fs.Z.subscribe(sr.VJ,Y=>this.showConfirmModal(Y.payload)),fs.Z.subscribe(sr.Dn,Y=>this.showModalReact(Y.payload)),fs.Z.subscribe(V.EK,Y=>(0,gc.bY)(Y.payload))}showModalReact(Y){const{component:ae,props:Ee}=Y,ke={component:ae,props:{...Ee,isOpen:!0,onDismiss:this.onReactModalDismiss}},et=u.createElement((0,tl.E)(hc,n.config.theme2),ke);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(et)}showConfirmModal(Y){const{confirmText:ae,onConfirm:Ee=()=>{},onDismiss:ke,text2:et,altActionText:at,onAltAction:Et,noText:Wt,text:Ft,text2htmlBind:qt,yesText:dn="Yes",icon:Rn,title:zn="Confirm",yesButtonVariant:sa}=Y,xa={confirmText:dn,confirmButtonVariant:sa,confirmationText:ae,icon:Rn,title:zn,body:Ft,description:et&&qt?t.QX.sanitize(et):et,isOpen:!0,dismissText:Wt,onConfirm:()=>{Ee(),this.onReactModalDismiss()},onDismiss:()=>{ke?.(),this.onReactModalDismiss()},onAlternative:Et?()=>{Et(),this.onReactModalDismiss()}:void 0,alternativeText:at},Qa={component:eu.s,props:xa},Zs=u.createElement((0,tl.E)(hc,n.config.theme2),Qa);this.reactModalRoot.appendChild(this.reactModalNode),this.root.render(Zs)}}var bi=e(45937),Lr=e(91368),nu=e(12343),vc=e(46414);function Pi(ee,Y=!1){return new Promise(ae=>{const Ee=document.createElement("script");Ee.onload=ae,Ee.src=ee,Ee.async=Y,document.head.appendChild(Ee)})}const Ec=(0,nu.h)("EchoSrv"),yc=Ec.logger;(0,vc.x)("echo",void 0,Ec);class bc{constructor(Y){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const ae of this.backends)ae.flush()},this.addBackend=ae=>{yc("Adding backend",!1,ae),this.backends.push(ae)},this.addEvent=(ae,Ee)=>{const ke=this.getMeta(),et={...ae,meta:{...ke,...Ee}};for(const at of this.backends)(at.supportedEvents.length===0||at.supportedEvents.indexOf(et.type)>-1)&&at.addEvent(et);yc("Reporting event",!1,et)},this.getMeta=()=>({sessionId:"",userId:Lr.contextSrv.user.id,userLogin:Lr.contextSrv.user.login,userSignedIn:Lr.contextSrv.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...Y},setInterval(this.flush,this.config.flushInterval)}}const au=(ee,Y)=>{(0,_.RP)().addEvent({type:_.ee.Performance,payload:{name:ee,value:Y}})},Df=ee=>faro?.api?.pushError(ee);class Pc{constructor(Y){this.options=Y,this.buffer=[],this.supportedEvents=[_.ee.Performance],this.addEvent=ae=>{this.buffer.push(ae.payload)},this.flush=()=>{this.buffer.length!==0&&(bi.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var kr=e(9175);class nl{constructor(Y){this.options=Y,this.supportedEvents=[_.ee.Pageview,_.ee.Interaction],this.addEvent=ke=>{window.applicationInsights&&((0,kr.Si)(ke)&&window.applicationInsights.trackPageView?.(),(0,kr.fV)(ke)&&window.applicationInsights.trackEvent?.({name:ke.payload.interactionName,properties:ke.payload.properties}))},this.flush=()=>{};const ae={config:{connectionString:Y.connectionString,endpointUrl:Y.endpointUrl}};Pi("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const ke=new window.Microsoft.ApplicationInsights.ApplicationInsights(ae);window.applicationInsights=ke.loadAppInsights()})}}class Hs{constructor(Y){this.options=Y,this.supportedEvents=[_.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=ke=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:ke.payload.page})},this.flush=()=>{};const ae=`https://www.googletagmanager.com/gtag/js?id=${Y.googleAnalyticsId}`;Pi(ae,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const Ee={page_path:window.location.pathname};Y.user&&(Ee.user_id=Y.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=Y.googleAnalytics4SendManualPageViews,window.gtag("config",Y.googleAnalyticsId,Ee)}}class Cc{constructor(Y){this.options=Y,this.supportedEvents=[_.ee.Pageview],this.trackedUserId=null,this.addEvent=ke=>{if(!window.ga)return;window.ga("set",{page:ke.payload.page}),window.ga("send","pageview");const{userSignedIn:et,userId:at}=ke.meta;et&&at!==this.trackedUserId&&(this.trackedUserId=at,window.ga("set","userId",at))},this.flush=()=>{};const ae=`https://www.google-analytics.com/analytics${Y.debug?"_debug":""}.js`;Pi(ae);const Ee=window.ga=window.ga||function(){(Ee.q=Ee.q||[]).push(arguments)};Ee.l=+new Date,Ee("create",Y.googleAnalyticsId,"auto"),Ee("set","anonymizeIp",!0)}}class Lo{constructor(Y){this.options=Y,this.supportedEvents=[_.ee.Pageview,_.ee.Interaction,_.ee.ExperimentView],this.addEvent=et=>{window.rudderanalytics&&((0,kr.Si)(et)&&window.rudderanalytics.page?.(),(0,kr.fV)(et)&&window.rudderanalytics.track?.(et.payload.interactionName,et.payload.properties),(0,kr.mR)(et)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:et.payload.experimentId,experiment_group:et.payload.experimentGroup,experiment_variant:et.payload.experimentVariant}))},this.flush=()=>{};const ae=Y.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";Pi(ae);const Ee=window.rudderanalytics=[],ke=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let et=0;et<ke.length;et++){const at=ke[et];Ee[at]=function(Et){return function(){Ee.push([Et].concat(Array.prototype.slice.call(arguments)))}}(at)}if(window.rudderanalytics?.load?.(Y.writeKey,Y.dataPlaneUrl,{configUrl:Y.configUrl}),Y.user){const{identifier:et,intercomIdentifier:at}=Y.user.analytics,Et={};at&&(Et.Intercom={user_hash:at}),window.rudderanalytics?.identify?.(et,{email:Y.user.email,orgId:Y.user.orgId,language:Y.user.language,version:Y.buildInfo.version,edition:Y.buildInfo.edition},Et)}}}var Ci=e(96991),su=e(2513),Dc=e(31581),al=e(53826),ru=e(24680),Sc=e(52201),xc=e(95392);class Mc extends xc.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=n.config.buildInfo.version}send(Y){(0,_.RP)().addEvent({type:_.ee.GrafanaJavascriptAgent,payload:Y})}isBatched(){return!0}getIgnoreUrls(){return[]}}class Tc{constructor(Y){this.options=Y,this.supportedEvents=[_.ee.GrafanaJavascriptAgent],this.addEvent=ke=>{this.transports.forEach(et=>et.send(ke.payload))},this.flush=()=>{};const ae=[];this.transports=[],Y.customEndpoint&&this.transports.push(new Ci.V({url:Y.customEndpoint,apiKey:Y.apiKey})),Y.errorInstrumentalizationEnabled&&ae.push(new su.w),Y.consoleInstrumentalizationEnabled&&ae.push(new Dc.J),Y.webVitalsInstrumentalizationEnabled&&ae.push(new al.P);const Ee={globalObjectKey:Y.globalObjectKey||"faro",preventGlobalExposure:Y.preventGlobalExposure||!1,app:{version:Y.buildInfo.version,environment:Y.buildInfo.env},instrumentations:ae,transports:[new Mc],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...ru.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,Sc.p)(Ee),Y.user&&this.faroInstance.api.setUser({id:Y.user.id,attributes:{orgId:String(Y.user.orgId)||""}})}}var Nm=e(64044),Co=e.n(Nm),Sf=e(42580),xf=e(49681),Oc=e(89024),sl=e(37778),fr=e(19067),Hr=e(26858),Gr=e(12969),ao=e(66574),rl=e(70828);function Tr(ee){return()=>{const Y=document.querySelectorAll(":hover");for(let ae=Y.length-1;ae>0;ae--){const Ee=Y[ae];Ee instanceof HTMLElement&&Ee.dataset?.panelid&&ee(parseInt(Ee.dataset?.panelid,10))}}}class so{constructor(Y,ae){this.locationService=Y,this.chromeService=ae}clearAndInitGlobalBindings(Y){Co().reset(),Y.chromeless||(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,rl.X)(!1)),this.bind("c r",()=>(0,rl.X)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const ae=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(ae&&ae instanceof HTMLElement&&(ae.nodeName==="INPUT"||ae.nodeName==="TEXTAREA"||ae.hasAttribute("data-slate-editor"))){ae.blur();return}this.exit()}}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}showHelpModal(){fs.Z.publish(new sr.Dn({component:Gr.B}))}exit(){const Y=this.locationService.getSearchObject();if(Y.editview){this.locationService.partial({editview:null,editIndex:null});return}if(Y.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(Y.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(Y.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:ae}=this.chromeService.state.getValue();ae&&this.chromeService.exitKioskMode(),Y.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(Y,ae){Co().bind(Y,Ee=>{Ee.preventDefault(),Ee.stopPropagation(),Ee.returnValue=!1,ae.call(this)},"keydown")}bindGlobal(Y,ae){Co().bindGlobal(Y,Ee=>{Ee.preventDefault(),Ee.stopPropagation(),Ee.returnValue=!1,ae.call(this)},"keydown")}unbind(Y,ae){Co().unbind(Y,ae)}bindWithPanelId(Y,ae){this.bind(Y,Tr(ae))}setupTimeRangeBindings(Y=!0){this.bind("t a",()=>{fs.Z.publish(new sr.QI({updateUrl:Y}))}),this.bind("t z",()=>{fs.Z.publish(new sr.p8({scale:2,updateUrl:Y}))}),this.bind("ctrl+z",()=>{fs.Z.publish(new sr.p8({scale:2,updateUrl:Y}))}),this.bind("t left",()=>{fs.Z.publish(new sr.Qt({direction:sr.Im.Left,updateUrl:Y}))}),this.bind("t right",()=>{fs.Z.publish(new sr.Qt({direction:sr.Im.Right,updateUrl:Y}))})}setupDashboardBindings(Y){this.bind("mod+o",()=>{Y.graphTooltip=(Y.graphTooltip+1)%3,Y.events.publish(new dc.oi),Y.startRefresh()}),this.bind("mod+s",()=>{Y.meta.canSave&&fs.Z.publish(new sr.Dn({component:sl.d,props:{dashboard:Y}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",ae=>{if(Y.canEditPanelById(ae)){const Ee=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:Ee?null:ae})}}),this.bindWithPanelId("v",ae=>{const Ee=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:Ee?null:ae})}),this.bindWithPanelId("p l",ae=>{const Ee=Y.getPanelById(ae),ke={...Ee.options};ke.legend.showLegend?ke.legend.showLegend=!1:ke.legend.showLegend=!0,Ee.updateOptions(ke)}),this.bindWithPanelId("i",ae=>{this.locationService.partial({inspect:ae})}),ao.contextSrv.hasAccessToExplore()&&this.bindWithPanelId("p x",async ae=>{const Ee=Y.getPanelById(ae),ke=await(0,Oc.H6)({panel:Ee,datasourceSrv:(0,g.ak)(),timeSrv:(0,Hr.$t)()});if(ke){const et=O.u.stripBaseFromUrl(ke);et&&this.locationService.push(et)}}),this.bindWithPanelId("p r",ae=>{Y.canEditPanelById(ae)&&!(Y.panelInView||Y.panelInEdit)&&fs.Z.publish(new sr.Eb(ae))}),this.bindWithPanelId("p d",ae=>{if(Y.canEditPanelById(ae)){const Ee=Y.getPanelInfoById(ae).index;Y.duplicatePanel(Y.panels[Ee])}}),this.bindWithPanelId("p s",ae=>{const Ee=Y.getPanelInfoById(ae);fs.Z.publish(new sr.Dn({component:fr.ShareModal,props:{dashboard:Y,panel:Ee?.panel}}))}),this.bind("d l",()=>{Y.toggleLegendsForAll()}),this.bind("d x",()=>{Y.toggleExemplarsForAll()}),this.bind("d shift+c",()=>{Y.collapseRows()}),this.bind("d shift+e",()=>{Y.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{Y.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const Ee=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+Ee})}}function ol(ee){if(performance)try{performance.mark(`${ee}_started`)}catch(Y){console.error(`[Metrics] Failed to startMeasure ${ee}`,Y)}}function Yo(ee){if(performance)try{const Y=`${ee}_started`,ae=`${ee}_completed`,Ee=`${ee}_measured`;performance.mark(ae);const ke=performance.measure(Ee,Y,ae);au(`${ee}_ms`,ke.duration),performance.clearMarks(Y),performance.clearMarks(ae),performance.clearMeasures(Ee)}catch(Y){console.error(`[Metrics] Failed to stopMeasure ${ee}`,Y)}}async function il(){if(window.location.search.indexOf("why-render")!==-1){const{default:ee}=await e.e(1107).then(e.t.bind(e,34990,23));ee(React,{trackAllPureComponents:!0})}}var Ic=e(43685),ou=e(87909),iu=e(59281),lu=e(22575),Um=e(29364),Zo=e(85907),cu=e(54459),Jo=e(85202),du=e(42575);const Rc=()=>new du.q(new URL(e.p+e.u(4282),e.b));var uu=e(48592),ll=e(90996);const mu=ee=>new uu.y(Y=>{const ae=ee.subscribe(Zo.sj(Ee=>{Y.next(Ee)}),Zo.sj(Ee=>{Y.error(Ee)}),Zo.sj(()=>{Y.complete()}));return{unsubscribe:()=>{ae.then(Ee=>Ee.unsubscribe())}}}),cl=ee=>(0,bn.D)(ee).pipe((0,ll.w)(Y=>mu(Y)));class Do{constructor(Y){this.getConnectionState=()=>cl(this.centrifugeWorker.getConnectionState()),this.getDataStream=ae=>cl(this.centrifugeWorker.getDataStream(ae)).pipe((0,cu.Q)(Jo.z)),this.getQueryData=async ae=>{const Ee=JSON.parse(JSON.stringify(ae));return this.centrifugeWorker.getQueryData(Ee)},this.getPresence=ae=>this.centrifugeWorker.getPresence(ae),this.getStream=ae=>cl(this.centrifugeWorker.getStream(ae)),this.centrifugeWorker=Zo.Ud(Rc()),this.centrifugeWorker.initialize(Y,Zo.sj(Y.dataStreamSubscriberReadiness))}}var Ac=e(47838),Lc=e(81087),Bc=e(35306),yr=e(42751),Di=e(87755);class gr{constructor(Y){this.deps=Y,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=ae=>{let Ee;const ke=et=>{const at=et.data[0];if(!Ee&&!(0,Di.A1)(at,Di.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${at?.type}`);return}switch(at.type){case Di.g0.FullFrame:{Ee=Ac.Av.deserialize(at.frame);return}case Di.g0.NewValuesSameSchema:{Ee.pushNewValues(at.values);return}}};return this.deps.centrifugeSrv.getDataStream(ae).pipe((0,Gt.U)(et=>(ke(et),{...et,data:[Ee??Ac.Av.empty()]})))},this.getStream=ae=>this.deps.centrifugeSrv.getStream(ae),this.getQueryData=ae=>(0,bn.D)(this.deps.centrifugeSrv.getQueryData(ae)).pipe((0,ll.w)(Ee=>{const ke=(0,Bc.z1)(Ee,ae.request.targets);return ke.data?.length&&ke.data.find(at=>at.meta?.channel)?(0,yr.B9)(ke,ae.request,yr.PI):(0,it.of)(ke)})),this.publish=async(ae,Ee)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,Lc.Aj)(ae),data:Ee}),this.getPresence=ae=>this.deps.centrifugeSrv.getPresence(ae)}}function Os(){const ee={appUrl:`${window.location.origin}${n.config.appSubUrl}`,orgId:Lr.contextSrv.user.orgId,orgRole:Lr.contextSrv.user.orgRole,liveEnabled:n.config.liveEnabled,dataStreamSubscriberReadiness:ou.A.ok.asObservable(),grafanaAuthToken:(0,iu.v)()},Y=n.config.featureToggles["live-service-web-worker"]?new Do(ee):new lu.R(ee);(0,Ic.cA)(new gr({centrifugeSrv:Y,backendSrv:(0,T.i)()}))}function Mf(){return getGrafanaLiveSrv()}var fu=e(55905),dl=e(24084),xs=e(63245);function Ks(ee,Y="extension is not a link extension"){if(!isPluginExtensionLink(ee))throw new Error(Y)}function wm(ee,Y="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(ee))throw new Error(Y)}function Nc(ee,Y){if(!Wc(ee,Y))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${ee}/" (currently: "${Y}"). Skipping the extension.`)}function Uc(ee){if(!ul(ee))throw new Error('Invalid component extension, the "component" property needs to be a valid React component.')}function gu(ee){if(!hu(ee))throw new Error(`Invalid extension "${ee.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${ee.extensionPointId}"). Skipping the extension.`)}function wc(ee){if(!Fc(ee))throw new Error(`Invalid extension "${ee.title}". The "configure" property must be a function. Skipping the extension.`)}function Bo(ee,Y){for(const ae of Y)if(!Cs(ee[ae]))throw new Error(`Invalid extension "${ee.title}". Property "${ae}" must be a string and cannot be empty. Skipping the extension.`)}function pu(ee,Y="The provided value is a Promise."){if(Kc(ee))throw new Error(Y)}function Wc(ee,Y){return!!(typeof Y=="string"&&Y.length>0&&Y.startsWith(`/a/${ee}/`))}function hu(ee){return!!(ee.extensionPointId?.startsWith("grafana/")||ee.extensionPointId?.startsWith("plugins/"))}function Fc(ee){return ee.configure?typeof ee.configure=="function":!0}function Cs(ee){return typeof ee=="string"&&ee.length>0}function Is(ee,Y){try{if(Bo(Y,["title","description","extensionPointId"]),gu(Y),(0,xs.IX)(Y)){if(wc(Y),!Y.path&&!Y.onClick)return(0,xs.KE)(`Invalid extension "${Y.title}". Either "path" or "onClick" is required.`),!1;Y.path&&Nc(ee,Y.path)}return(0,xs.eP)(Y)&&Uc(Y.component),!0}catch(ae){return ae instanceof Error&&(0,xs.KE)(ae.message),!1}}function Kc(ee){return ee instanceof Promise||typeof ee=="object"&&ee!==null&&"then"in ee&&"catch"in ee}function ul(ee){return typeof ee=="function"}function $c(ee){const Y={};for(const{pluginId:ae,extensionConfigs:Ee,error:ke}of ee){if(ke){(0,xs.KE)(`"${ae}" plugin failed to load, skip registering its extensions.`);continue}for(const et of Ee){const{extensionPointId:at}=et;if(!et||!Is(ae,et))continue;let Et={config:et,pluginId:ae};Array.isArray(Y[at])?Y[at].push(Et):Y[at]=[Et]}}return(0,xs._A)(Y)}var ml=e(15766),Wm=e(46181),jr=e(80219);function Vc(){try{return[(0,xs.CR)({title:"Add to dashboard",description:"Use the query and panel from explore and create/add it to a dashboard",extensionPointId:ml.y.ExploreToolbarAction,icon:"apps",category:"Dashboards",configure:()=>{if(ao.contextSrv.hasAccess(mr.AccessControlAction.DashboardsCreate,ao.contextSrv.isEditor)||ao.contextSrv.hasAccess(mr.AccessControlAction.DashboardsWrite,ao.contextSrv.isEditor))return{}},onClick:(ee,{context:Y,openModal:ae})=>{ae({title:(0,jr.k)(),body:({onDismiss:Ee})=>u.createElement(Wm.U,{onClose:Ee,exploreId:Y?.exploreId})})}})]}catch(ee){return(0,xs.KE)(`Could not configure extensions for Explore due to: "${ee}"`),[]}}function zc(){return[...Vc()]}const Br=({context:ee,extensionPointId:Y,limitPerPlugin:ae,registry:Ee})=>{const ke=ee?(0,xs.fD)(ee):{},et=Ee[Y]??[],at=[],Et={};for(const Wt of et)try{const Ft=Wt.config,{pluginId:qt}=Wt;if(ae&&Et[qt]>=ae)continue;if(Et[qt]===void 0&&(Et[qt]=0),(0,xs.IX)(Ft)){const dn=vu(Wt.pluginId,Ft,ke);if(Ft.configure&&dn===void 0)continue;const Rn={id:(0,xs.lu)(Wt.pluginId,Ft),type:ml.D.link,pluginId:Wt.pluginId,onClick:_c(Ft,ke),icon:dn?.icon||Ft.icon,title:dn?.title||Ft.title,description:dn?.description||Ft.description,path:dn?.path||Ft.path,category:dn?.category||Ft.category};at.push(Rn),Et[qt]+=1}if((0,xs.eP)(Ft)){Uc(Ft.component);const dn={id:(0,xs.lu)(Wt.pluginId,Ft),type:ml.D.component,pluginId:Wt.pluginId,title:Ft.title,description:Ft.description,component:Ft.component};at.push(dn),Et[qt]+=1}}catch(Ft){Ft instanceof Error&&(0,xs.KE)(Ft.message)}return{extensions:at}};function vu(ee,Y,ae){try{const Ee=Y.configure?.(ae);if(Ee===void 0)return;let{title:ke=Y.title,description:et=Y.description,path:at=Y.path,icon:Et=Y.icon,category:Wt=Y.category,...Ft}=Ee;return pu(Ee,`The configure() function for "${Y.title}" returned a promise, skipping updates.`),at&&Nc(ee,at),Bo({title:ke,description:et},["title","description"]),Object.keys(Ft).length>0&&(0,xs.KE)(`Extension "${Y.title}", is trying to override restricted properties: ${Object.keys(Ft).join(", ")} which will be ignored.`),{title:ke,description:et,path:at,icon:Et,category:Wt}}catch(Ee){Ee instanceof Error&&(0,xs.KE)(Ee.message);return}}function _c(ee,Y){const{onClick:ae}=ee;if(ae)return function(ke){try{const et=ae(ke,(0,xs.Ch)(Y));Kc(et)&&et.catch(at=>{at instanceof Error&&(0,xs.KE)(at.message)})}catch(et){et instanceof Error&&(0,xs.KE)(et.message)}}}var Si=e(59882),No=e(8929);async function xi(ee={}){ol("frontend_plugins_preload");const Y=Object.values(ee).filter(Ee=>Ee.preload),ae=await Promise.all(Y.map(kc));return Yo("frontend_plugins_preload"),ae}async function kc(ee){const{path:Y,version:ae,id:Ee}=ee;try{ol(`frontend_plugin_preload_${Ee}`);const{plugin:ke}=await No.N$({path:Y,version:ae,isAngular:ee.angularDetected,pluginId:Ee}),{extensionConfigs:et=[]}=ke;return{pluginId:Ee,extensionConfigs:et}}catch(ke){return console.error(`[Plugins] Failed to preload plugin: ${Y} (version: ${ae})`,ke),{pluginId:Ee,extensionConfigs:[],error:ke}}finally{Yo(`frontend_plugin_preload_${Ee}`)}}var Bs=e(37497),Xo=e(775),fl=e(62247),Eu=e(76305),Gs=e(53933),Mi=e(39317),yu=e(76543),Hc=e(3359),gl=e(46809);class pl{constructor(){this.subject=new Bs.t(1)}get(){return this.subject.asObservable()}run(Y){const{queries:ae,timezone:Ee,datasource:ke,panelId:et,app:at,dashboardUID:Et,timeRange:Wt,timeInfo:Ft,cacheTimeout:qt,queryCachingTTL:dn,maxDataPoints:Rn,scopedVars:zn,minInterval:sa}=Y;this.subscription&&this.subscription.unsubscribe();const xa={app:at??fl.zj.Unknown,requestId:(0,yu.t)(),timezone:Ee,panelId:et,dashboardUID:Et,range:Wt,timeInfo:Ft,interval:"",intervalMs:0,targets:(0,E.cloneDeep)(ae),maxDataPoints:Rn,scopedVars:zn||{},cacheTimeout:qt,queryCachingTTL:dn,startTime:Date.now()};xa.rangeRaw=Wt.raw,(0,bn.D)(bu(ke,xa.scopedVars)).pipe((0,Xo.P)()).subscribe({next:Qa=>{xa.targets=xa.targets.map(gs=>(gs.datasource||(gs.datasource=Qa.getRef()),gs));const Zs=sa?(0,Mi.J)().replace(sa,xa.scopedVars):Qa.interval,Ss=Eu.calculateInterval(Wt,Rn,Zs);xa.scopedVars=Object.assign({},xa.scopedVars,{__interval:{text:Ss.interval,value:Ss.interval},__interval_ms:{text:Ss.intervalMs.toString(),value:Ss.intervalMs}}),xa.interval=Ss.interval,xa.intervalMs=Ss.intervalMs,this.subscription=(0,gl.v7)(Qa,xa).subscribe({next:gs=>{const Rr=(0,Nn.zR)(gs,this.lastResult);this.lastResult=(0,Hc.C)(Rr,this.lastResult),this.subject.next(this.lastResult)}})},error:Qa=>console.error("PanelQueryRunner Error",Qa)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Gs.Gu.Loading&&this.subject.next({...this.lastResult,state:Gs.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function bu(ee,Y){return ee&&"query"in ee?ee:(0,g.ak)().get(ee,Y)}function hl(){window.grafanaRuntime={getDashboardSaveModel:()=>{const ee=(0,h.h4)().getCurrent();if(ee)return ee.getSaveModelClone()},getDashboardTimeRange:()=>{const ee=(0,Hr.$t)().timeRange();return{from:ee.from.valueOf(),to:ee.to.valueOf(),raw:ee.raw}},getPanelData:()=>{const ee=(0,h.h4)().getCurrent();if(ee)return ee.panels.reduce((Y,ae)=>(Y[ae.id]=ae.getQueryRunner().getLastResult(),Y),{})}}}var qo=e(41355),oa=e(81587),Gc=e(17312),vl=e(53229),pr=e(95774),Qr=e(39655);function js(ee){return ee.extended&&"infoText"in ee.extended?ee.extended:null}function jc(ee){return ee.extended&&"dataSourceTypes"in ee.extended?ee.extended:null}function El(ee){return ee.extended&&"dataSource"in ee.extended?ee.extended:null}var ss=e(51824),ei=e(74030);const Pu=(ee,Y)=>{const{rootStateKey:ae}=Y.variable;if(!ae)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:js(Qr.PF)};const{editor:Ee}=(0,ss.AE)(ae,ee);return{extended:js(Ee)}},Cu={changeVariableDatasource:ei.Z$},Du=(0,no.connect)(Pu,Cu);class Qc extends u.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=Y=>{this.props.changeVariableDatasource((0,oa.yQ)(this.props.variable),(0,Gc.iU)(Y))}}componentDidMount(){const{rootStateKey:Y}=this.props.variable;if(!Y){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:Y,extended:ae}=this.props,Ee=ae?.infoText??null;return u.createElement(u.Fragment,null,u.createElement(pr.e,null,"Ad-hoc options"),u.createElement($t.g,{label:"Data source",htmlFor:"data-source-picker"},u.createElement(vl.q,{current:Y.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})),Ee?u.createElement(er.b,{title:Ee,severity:"info"}):null)}}const Su=Du(Qc);var Yc=e(80280);const Zc={addFilter:ei.KJ,removeFilter:ei.ku,changeFilter:ei.M6},Jc=(0,no.connect)(null,Zc);class Xc extends u.PureComponent{constructor(){super(...arguments),this.addFilter=Y=>{this.props.addFilter((0,oa.yQ)(this.props.variable),Y)},this.removeFilter=Y=>{this.props.removeFilter((0,oa.yQ)(this.props.variable),Y)},this.changeFilter=(Y,ae)=>{this.props.changeFilter((0,oa.yQ)(this.props.variable),{index:Y,filter:ae})}}render(){const{filters:Y,datasource:ae}=this.props.variable;return u.createElement(Yc.F,{datasource:ae,filters:Y,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const qc=Jc(Xc);qc.displayName="AdHocPicker";var ti=e(26333);const xu=ee=>ee.map(Y=>Iu(Y).map(Tu).join("|")),Mu=ee=>{if((0,E.isArray)(ee))return ee.map(yl).filter(ed);const Y=yl(ee);return Y===null?[]:[Y]};function Tu(ee){return ee==null?"":/\|/g[Symbol.replace](ee,"__gfp__")}function Ou(ee){return ee==null?"":/__gfp__/g[Symbol.replace](ee,"|")}function Iu(ee){return[ee.key,ee.operator,ee.value]}function yl(ee){if(!(0,E.isString)(ee)||ee.length===0)return null;const Y=ee.split("|").map(Ou);return{key:Y[0],operator:Y[1],value:Y[2],condition:""}}function ed(ee){return ee!==null&&(0,E.isString)(ee.value)}const bl=async()=>{},td=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:ti.Js,reducer:ti.jo,picker:qc,editor:Su,dependsOn:()=>!1,setValue:bl,setValueFromUrl:async(ee,Y)=>{const ae=Mu(Y);await(0,is.WI)((0,ei.Ue)((0,oa.yQ)(ee),ae))},updateOptions:bl,getSaveModel:ee=>{const{index:Y,id:ae,state:Ee,global:ke,rootStateKey:et,...at}=(0,E.cloneDeep)(ee);return at},getValueForUrl:ee=>{const Y=ee?.filters??[];return xu(Y)}});var nd=e(33199),ad=e(8430),Ys=e(80169),bs=e(5399),Pl=e(69966),sd=e(91826),lr=e(6857),ni=e(56361),rd=e(84677),od=e(24321),id=e(56469),Ru=e(90581),ld=e(66117),Cl=e(8508),Ds=e(6230),Ms=e(4684),cs=e(1941),Yr=e(34099),ro=e(18918);const or={...Ds.Eg,type:"query",datasource:null,query:"",regex:"",sort:Ds.$U.disabled,refresh:Ds.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},Dl=(ee,Y)=>{if(Y===Ds.$U.disabled)return ee;const ae=Math.ceil(Y/2),Ee=Y%2===0;return ae===1?ee=(0,E.sortBy)(ee,"text"):ae===2?ee=(0,E.sortBy)(ee,ke=>{if(!ke.text)return-1;const et=ke.text.match(/.*?(\d+).*/);return!et||et.length<2?-1:parseInt(et[1],10)}):ae===3&&(ee=(0,E.sortBy)(ee,ke=>(0,E.toLower)(ke.text))),Ee&&(ee=ee.reverse()),ee},cd=(ee,Y)=>{const ae=[];let Ee=null;Y.lastIndex=0;do Ee=Y.exec(ee),Ee&&ae.push(Ee);while(Y.global&&Ee&&Ee[0]!==""&&Ee[0]!==void 0);return ae},Au=(ee,Y,ae)=>{let Ee,ke=[];ee&&(Ee=(0,Mt.jO)(ee));for(let et=0;et<ae.length;et++){const at=ae[et];let Et=at.text===void 0||at.text===null?at.value:at.text,Wt=at.value===void 0||at.value===null?at.text:at.value;if((0,E.isNumber)(Wt)&&(Wt=Wt.toString()),(0,E.isNumber)(Et)&&(Et=Et.toString()),Ee){const Ft=cd(Wt,Ee);if(!Ft.length)continue;const qt=Ft.find(sa=>sa.groups&&sa.groups.value),dn=Ft.find(sa=>sa.groups&&sa.groups.text),Rn=Ft.find(sa=>sa.length>1),zn=Ft.length>1&&Rn;if(qt||dn)Wt=qt?.groups?.value??dn?.groups?.text,Et=dn?.groups?.text??qt?.groups?.value;else if(zn){for(let sa=0;sa<Ft.length;sa++){const xa=Ft[sa];ke.push({text:xa[1],value:xa[1],selected:!1})}continue}else Rn&&(Et=Rn[1],Wt=Rn[1])}ke.push({text:Et,value:Wt,selected:!1})}return ke=(0,E.uniqBy)(ke,"value"),Dl(ke,Y)},Lu=(0,Yr.oM)({name:"templating/query",initialState:ro.s,reducers:{updateVariableOptions:(ee,Y)=>{const{results:ae,templatedRegex:Ee}=Y.payload.data,ke=(0,ss.ir)(ee,Y.payload.id);if(ke.type!=="query")return;const{includeAll:et,sort:at}=ke,Et=Au(Ee,at,ae);et&&Et.unshift({text:Ys.xk,value:Ys.r2,selected:!1}),Et.length||Et.push({text:Ys.BH,value:Ys.QX,isNone:!0,selected:!1}),ke.options=Et}}}),Fm=Lu.reducer,{updateVariableOptions:Bu}=Lu.actions;function dd(){return ee=>ee.pipe((0,Gt.U)(Y=>{const ae=Y.series;if(!ae||!ae.length)return[];if(xl(ae))return ae;const Ee=(0,Nn.F9)(ae),ke=[];let et=-1,at=-1,Et=-1,Wt=-1;for(const Ft of Ee)for(let qt=0;qt<Ft.fields.length;qt++){const dn=Ft.fields[qt],Rn=(0,ce.CZ)(dn,Ft,ae).toLowerCase();dn.type===oe.fS.string&&Et===-1&&(Et=qt),Rn==="text"&&dn.type===oe.fS.string&&at===-1&&(at=qt),Rn==="value"&&dn.type===oe.fS.string&&et===-1&&(et=qt),Rn==="expandable"&&(dn.type===oe.fS.boolean||dn.type===oe.fS.number)&&Wt===-1&&(Wt=qt)}if(Et===-1)throw new Error("Couldn't find any field of type string in the results.");for(const Ft of ae)for(let qt=0;qt<Ft.length;qt++){const dn=Wt!==-1?Ft.fields[Wt].values[qt]:void 0,Rn=Ft.fields[Et].values[qt],zn=at!==-1?Ft.fields[at].values[qt]:null,sa=et!==-1?Ft.fields[et].values[qt]:null;if(et===-1&&at===-1){ke.push({text:Rn,value:Rn,expandable:dn});continue}if(et===-1&&at!==-1){ke.push({text:zn,value:zn,expandable:dn});continue}if(et!==-1&&at===-1){ke.push({text:sa,value:sa,expandable:dn});continue}ke.push({text:zn,value:sa,expandable:dn})}return ke}))}function Sl(ee){return Y=>Y.pipe((0,Gt.U)(ae=>{const{variable:Ee,dispatch:ke,getTemplatedRegexFunc:et}=ee;if(!Ee.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const at=et(Ee),Et=(0,oa.Y6)(Ee,{results:ae,templatedRegex:at});ke((0,cs.mb)(Ee.rootStateKey,Bu(Et)))}))}function ud(ee){return Y=>Y.pipe((0,fn.z)(()=>{const{dispatch:ae,variable:Ee,searchFilter:ke}=ee;return ke?(0,it.of)():(0,bn.D)(ae((0,Ms.xQ)((0,oa.yQ)(Ee))))}))}function xl(ee){if(!ee)return!1;if(!ee.length)return!0;const Y=ee[0];if((0,Nn.aY)(Y))return!1;for(const ae in Y){if(!Y.hasOwnProperty(ae)||Y[ae]!==null&&typeof Y[ae]!="string"&&typeof Y[ae]!="number")continue;const Ee=ae.toLowerCase();if(Ee==="text"||Ee==="value")return!0}return!1}var br=e(79726);class Nu{constructor(){this.runners=[new Ml,new md,new Uu,new Wu]}getRunnerForDatasource(Y){const ae=this.runners.find(Ee=>Ee.canRun(Y));if(ae)return ae;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class Ml{constructor(){this.type=br.j2.Legacy}canRun(Y){return(0,bs.R)(Y)}getTarget({datasource:Y,variable:ae}){if((0,bs.R)(Y))return ae.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:Y,variable:ae,searchFilter:Ee,timeSrv:ke},et){if(!(0,bs.R)(Y))return Uo();const at=(0,oa.AQ)(ae,Ee,ke);return(0,bn.D)(Y.metricFindQuery(ae.query,at)).pipe((0,fn.z)(Et=>{if(!Et||!Et.length)return Uo();const Wt=Et;return(0,it.of)({series:Wt,state:Gs.Gu.Done,timeRange:at.range})}))}}class md{constructor(){this.type=br.j2.Standard}canRun(Y){return(0,bs.Ju)(Y)}getTarget({datasource:Y,variable:ae}){if((0,bs.Ju)(Y))return Y.variables.toDataQuery(ae.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:Y,runRequest:ae},Ee){return(0,bs.Ju)(Y)?Y.variables.query?ae(Y,Ee,Y.variables.query):ae(Y,Ee):Uo()}}class Uu{constructor(){this.type=br.j2.Custom}canRun(Y){return(0,bs.d7)(Y)}getTarget({datasource:Y,variable:ae}){if((0,bs.d7)(Y))return ae.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:Y,runRequest:ae},Ee){return(0,bs.d7)(Y)?ae(Y,Ee,Y.variables.query):Uo()}}const wu="variable-query";class Wu{constructor(){this.type=br.j2.Datasource}canRun(Y){return(0,bs.X7)(Y)}getTarget({datasource:Y,variable:ae}){if((0,bs.X7)(Y))return{...ae.query,refId:ae.query.refId??wu};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:Y,runRequest:ae},Ee){return(0,bs.X7)(Y)?ae(Y,Ee):Uo()}}function Uo(){return(0,it.of)({state:Gs.Gu.Done,series:[],timeRange:(0,Cl.JK)()})}class Or{constructor(Y={dispatch:is.WI,getState:is.y0,getVariable:ss.E0,getTemplatedRegex:oa.gR,getTimeSrv:Hr.$t,queryRunners:new Nu,runRequest:gl.v7}){this.dependencies=Y,this.updateOptionsRequests=new Pl.x,this.updateOptionsResults=new Pl.x,this.cancelRequests=new Pl.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(Y){this.updateOptionsRequests.next(Y)}getResponse(Y){return this.updateOptionsResults.asObservable().pipe((0,ni.h)(ae=>ae.identifier===Y))}cancelRequest(Y){this.cancelRequests.next({identifier:Y})}destroy(){this.subscription.unsubscribe()}onNewRequest(Y){const{datasource:ae,identifier:Ee,searchFilter:ke}=Y;try{const{dispatch:et,runRequest:at,getTemplatedRegex:Et,getVariable:Wt,queryRunners:Ft,getTimeSrv:qt,getState:dn}=this.dependencies,Rn=(0,ss.S_)(dn());this.updateOptionsResults.next({identifier:Ee,state:Gs.Gu.Loading});const zn=Wt(Ee,dn());if(zn.type!=="query")return;const sa=qt(),xa={variable:zn,datasource:ae,searchFilter:ke,timeSrv:sa,runRequest:at},Qa=Ft.getRunnerForDatasource(ae),Zs=Qa.getTarget({datasource:ae,variable:zn}),Ss=this.getRequest(zn,Y,Zs);Qa.runRequest(xa,Ss).pipe((0,ni.h)(()=>{const gs=(0,ss.S_)(dn());return Rn===gs}),(0,ni.h)(gs=>gs.state===Gs.Gu.Done||gs.state===Gs.Gu.Error),(0,rd.q)(1),(0,fn.z)(gs=>gs.state===Gs.Gu.Error?(0,sd._)(()=>gs.error):(0,it.of)(gs)),dd(),Sl({variable:zn,dispatch:et,getTemplatedRegexFunc:Et}),ud({variable:zn,dispatch:et,searchFilter:ke}),(0,od.R)((0,lr.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,ni.h)(gs=>{let Rr=!1;return gs.identifier.id===Ee.id&&(Rr=!0,this.updateOptionsResults.next({identifier:Ee,state:Gs.Gu.Loading,cancelled:Rr})),Rr}))),(0,id.K)(gs=>gs.cancelled?(0,it.of)({}):(this.updateOptionsResults.next({identifier:Ee,state:Gs.Gu.Error,error:gs}),(0,sd._)(()=>gs))),(0,Ru.x)(()=>{this.updateOptionsResults.next({identifier:Ee,state:Gs.Gu.Done})})).subscribe()}catch(et){this.updateOptionsResults.next({identifier:Ee,state:Gs.Gu.Error,error:et})}}getRequest(Y,ae,Ee){const{searchFilter:ke}=ae,et={variable:{text:Y.current.text,value:Y.current.value}},Wt={...ke?{searchFilter:{text:ke,value:ke}}:{},...et},Ft=Y.refresh===Ds.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,Cl.JK)();return{app:fl.zj.Dashboard,requestId:(0,ld.Z)(),timezone:"",range:Ft,interval:"",intervalMs:0,targets:[Ee],scopedVars:Wt,startTime:Date.now()}}}let Tl;function wo(ee){Tl=ee}function oo(){return Tl}const Zr=ee=>{if(!Ol(ee))return ee.name;const{current:Y}=ee;return Array.isArray(Y.text)?Y.text.join(" + "):Y.text},Ol=ee=>Array.isArray(ee?.options)||typeof ee?.current=="object";var io=(ee=>(ee[ee.moveUp=38]="moveUp",ee[ee.moveDown=40]="moveDown",ee[ee.select=32]="select",ee[ee.cancel=27]="cancel",ee[ee.selectAndClose=13]="selectAndClose",ee))(io||{});class fd extends u.PureComponent{constructor(){super(...arguments),this.onKeyDown=Y=>{if(io[Y.keyCode]&&Y.keyCode!==io.select){const ae=Y.ctrlKey||Y.metaKey||Y.shiftKey;this.props.onNavigate(Y.keyCode,ae),Y.preventDefault()}},this.onChange=Y=>{this.props.onChange(Y.target.value)}}render(){const{value:Y,id:ae,onNavigate:Ee,...ke}=this.props;return u.createElement("input",{...ke,ref:et=>{et&&(et.focus(),et.setAttribute("style",`width:${Math.max(et.width,150)}px`))},type:"text",className:"gf-form-input",value:Y??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Er.t)("variable.dropdown.placeholder","Enter variable value")})}}var Ti=e(80011);const Fu=({loading:ee,disabled:Y,onClick:ae,text:Ee,onCancel:ke,id:et})=>{const at=(0,Ve.wW)(ai),Et=(0,u.useCallback)(Wt=>{Wt.stopPropagation(),Wt.preventDefault(),ae()},[ae]);return ee?u.createElement("div",{className:at.container,"data-testid":ps.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${Ee}`),title:Ee,id:et},u.createElement(gd,{text:Ee}),u.createElement(Ku,{onCancel:ke})):u.createElement("button",{onClick:Et,className:at.container,"data-testid":ps.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${Ee}`),"aria-expanded":!1,"aria-controls":`options-${et}`,id:et,title:Ee,disabled:Y},u.createElement(gd,{text:Ee}),u.createElement(os.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},gd=({text:ee})=>{const Y=(0,Ve.wW)(ai);return u.createElement("span",{className:Y.textAndTags},ee===Ys.xk?(0,Er.t)("variable.picker.link-all","All"):ee)},Ku=({onCancel:ee})=>{const Y=(0,u.useCallback)(ae=>{ae.preventDefault(),ee()},[ee]);return u.createElement(Ti.u,{content:"Cancel query"},u.createElement(os.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:Y,"aria-label":ps.wl.components.LoadingIndicator.icon}))},ai=ee=>({container:(0,te.css)`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${ee.spacing(1)};
    background-color: ${ee.components.input.background};
    border: 1px solid ${ee.components.input.borderColor};
    border-radius: ${ee.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${ee.colors.text};
    height: ${ee.spacing(ee.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${ee.colors.action.disabledBackground};
      color: ${ee.colors.action.disabledText};
      border: 1px solid ${ee.colors.action.disabledBackground};
    }
  `,textAndTags:(0,te.css)`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${ee.spacing(.25)};
    user-select: none;
  `});class pd extends u.PureComponent{constructor(){super(...arguments),this.onToggle=Y=>ae=>{const Ee=ae.shiftKey||ae.ctrlKey||ae.metaKey;this.handleEvent(ae),this.props.onToggle(Y,Ee)},this.onToggleAll=Y=>{this.handleEvent(Y),this.props.onToggleAll()}}handleEvent(Y){Y.preventDefault(),Y.stopPropagation()}render(){const{multi:Y,values:ae,highlightIndex:Ee,selectedValues:ke,onToggle:et,onToggleAll:at,theme:Et,...Wt}=this.props,Ft=Oi(Et);return u.createElement("div",{className:Ft.variableValueDropdown},u.createElement("div",{className:Ft.variableOptionsWrapper},u.createElement("ul",{className:Ft.variableOptionsColumn,"aria-label":ps.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...Wt},this.renderMultiToggle(),ae.map((qt,dn)=>this.renderOption(qt,dn)))))}renderOption(Y,ae){const{highlightIndex:Ee,multi:ke,theme:et}=this.props,at=Oi(et),Et=Y.value===Ys.r2;return u.createElement("li",{key:`${Y.value}`},u.createElement("button",{"data-testid":ps.wl.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":Y.selected,className:(0,te.cx)((0,ie.gN)(et),at.variableOption,{[at.highlighted]:ae===Ee},at.noStyledButton),onClick:this.onToggle(Y)},u.createElement("span",{className:(0,te.cx)(at.variableOptionIcon,{[at.variableOptionIconSelected]:Y.selected,[at.hideVariableOptionIcon]:!ke})}),u.createElement("span",{"data-testid":ps.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${Y.text}`)},Et?(0,Er.t)("variable.picker.option-all","All"):Y.text)))}renderMultiToggle(){const{multi:Y,selectedValues:ae,theme:Ee}=this.props,ke=Oi(Ee);if(!Y)return null;const et=()=>u.createElement(Er.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return u.createElement(Ti.u,{content:et,placement:"top"},u.createElement("button",{className:(0,te.cx)((0,ie.gN)(Ee),ke.variableOption,ke.variableOptionColumnHeader,ke.noStyledButton),role:"checkbox","aria-checked":ae.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},u.createElement("span",{className:(0,te.cx)(ke.variableOptionIcon,{[ke.variableOptionIconManySelected]:ae.length>1})}),u.createElement(Er.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",ae.length,")"))}}const Oi=(0,Se.B)(ee=>{const Y=ee.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,te.css)({display:"none"}),highlighted:(0,te.css)({backgroundColor:ee.colors.action.hover}),noStyledButton:(0,te.css)({width:"100%",textAlign:"left"}),variableOption:(0,te.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px",["&:hover"]:{backgroundColor:ee.colors.action.hover}}),variableOptionColumnHeader:(0,te.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,te.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${Y}) left top no-repeat`}),variableOptionIconManySelected:(0,te.css)({background:`url(${Y}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,te.css)({background:`url(${Y}) 0px -18px no-repeat`}),variableValueDropdown:(0,te.css)({backgroundColor:ee.colors.background.primary,border:`1px solid ${ee.colors.border.weak}`,borderRadius:ee.shape.borderRadius(2),boxShadow:ee.shadows.z2,position:"absolute",top:ee.spacing(ee.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:ee.zIndex.typeahead}),variableOptionsColumn:(0,te.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,te.css)({display:"table",width:"100%"})}}),$u=(0,Ve.HE)(pd);var Ii=e(83505),Il=e(59421),Jr=e(60344),Ir=e(44042);const Vu=(ee,Y,ae)=>async(Ee,ke)=>{if(Y===io.cancel)return await Ee(Ri(ee));if(Y===io.select)return Ee(hd(ee,ae));if(Y===io.selectAndClose)return(0,ss.AE)(ee,ke()).optionsPicker.multi?Ee(hd(ee,ae)):(Ee(hd(ee,ae,!0)),Ee(Ri(ee)));if(Y===io.moveDown)return Ee((0,cs.mb)(ee,(0,Ir.Ew)(1)));if(Y===io.moveUp)return Ee((0,cs.mb)(ee,(0,Ir.Ew)(-1)))},zu=(ee,Y="")=>async(ae,Ee)=>{const{rootStateKey:ke}=ee,{id:et,queryValue:at}=(0,ss.AE)(ke,Ee()).optionsPicker,Et={id:et,rootStateKey:ke,type:"query"},Wt=(0,ss.E0)(Et,Ee());if(!("options"in Wt)||(ae((0,cs.mb)(ke,(0,Ir.Ug)(Y))),(0,E.trim)(at)===(0,E.trim)(Y)))return;const{query:Ft,options:qt}=Wt,dn=typeof Ft=="string"?Ft:Ft.target;return(0,Ii.b)(dn)?So(ae,Ee,Y,ke):ae((0,cs.mb)(ke,(0,Ir.ss)(qt)))},_u=async ee=>{if((0,Il.Q)(ee.current))return;await qo.z.get(ee.type).setValue(ee,ee.current,!0)},Ri=(ee,Y)=>async(ae,Ee)=>{const ke=(0,ss.AE)(ee,Ee()).optionsPicker,et={id:ke.id,rootStateKey:ee,type:"query"},at=(0,ss.E0)(et,Ee());if(!(0,bs.eL)(at))return;const Et={option:vd(ke)},Wt={propName:"queryValue",propValue:ke.queryValue};ae((0,cs.mb)(ee,(0,Jr.Q8)((0,oa.Y6)(at,Et)))),ae((0,cs.mb)(ee,(0,Jr.Pl)((0,oa.Y6)(at,Wt))));const Ft=(0,ss.E0)(et,Ee());if((0,bs.eL)(Ft)&&(ae((0,cs.mb)(ee,(0,Ir.nn)())),(0,oa.N9)(at)!==(0,oa.N9)(Ft)))return Y?Y(Ft):await _u(Ft)},Rl=(ee,Y)=>async(ae,Ee)=>{const{id:ke,rootStateKey:et}=ee,at=(0,ss.AE)(et,Ee()).optionsPicker;at.id&&at.id!==ke&&await ae(Ri(et,Y));const Et=(0,ss.E0)(ee,Ee());(0,bs.eL)(Et)&&ae((0,cs.mb)(et,(0,Ir.aN)(Et)))},hd=(ee,Y,ae=!1)=>(Ee,ke)=>{const{highlightIndex:et,options:at}=(0,ss.AE)(ee,ke()).optionsPicker,Et=at[et];Ee((0,cs.mb)(ee,(0,Ir._M)({option:Et,forceSelect:ae,clearOthers:Y})))},ku=async(ee,Y,ae,Ee)=>{try{const{id:ke}=(0,ss.AE)(Ee,Y()).optionsPicker,et={id:ke,rootStateKey:Ee,type:"query"},at=(0,ss.E0)(et,Y());if(!(0,bs.eL)(at))return;await qo.z.get(at.type).updateOptions(at,ae);const Wt=(0,ss.E0)(et,Y());if(!(0,bs.eL)(Wt))return;ee((0,cs.mb)(Ee,(0,Ir.wF)(Wt.options)))}catch(ke){console.error(ke)}},So=(0,E.debounce)(ku,500);function vd(ee){const{options:Y,selectedValues:ae,queryValue:Ee,multi:ke}=ee;if(Y.length===0&&Ee&&Ee.length>0)return{text:Ee,value:Ee,selected:!1};if(!ke)return ae.find(Et=>Et.selected);const et=[],at=[];for(const Et of ae)Et.selected&&(et.push(Et.text.toString()),at.push(Et.value.toString()));return{value:at,text:et,selected:!0}}const si=()=>{const ee=et=>({...(0,nd.bindActionCreators)({openOptions:Rl,commitChangesToVariable:Ri,navigateOptions:Vu},et),filterOrSearchOptions:(at,Et="")=>{et(zu(at,Et))},toggleAllOptions:at=>et((0,cs.mb)(at.rootStateKey,(0,Ir.iQ)())),toggleOption:(at,Et,Wt,Ft)=>et((0,cs.mb)(at.rootStateKey,(0,Ir._M)({option:Et,clearOthers:Wt,forceSelect:Ft})))}),Y=(et,at)=>{const{rootStateKey:Et}=at.variable;return Et?{picker:(0,ss.AE)(Et,et).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Ir.yy})},ae=(0,no.connect)(Y,ee);class Ee extends u.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,oa.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(at,Et)=>{((0,bs.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(at,Et)},this.onToggleSingleValueVariable=(at,Et)=>{this.props.toggleOption((0,oa.yQ)(this.props.variable),at,Et,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(at,Et)=>{this.props.toggleOption((0,oa.yQ)(this.props.variable),at,Et,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,oa.yQ)(this.props.variable))},this.onFilterOrSearchOptions=at=>{this.props.filterOrSearchOptions((0,oa.yQ)(this.props.variable),at)},this.onNavigate=(at,Et)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,at,Et)},this.onCancel=()=>{oo().cancelRequest((0,oa.yQ)(this.props.variable))}}render(){const{variable:at,picker:Et}=this.props,Wt=Et.id===at.id;return u.createElement("div",{className:"variable-link-wrapper"},Wt?this.renderOptions(Et):this.renderLink(at))}renderLink(at){const Et=Zr(at),Wt=at.state===Gs.Gu.Loading;return u.createElement(Fu,{id:Ys.IG+at.id,text:Et,onClick:this.onShowOptions,loading:Wt,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(at){const{id:Et}=this.props.variable;return u.createElement(ad.L,{onClick:this.onHideOptions},u.createElement(fd,{id:Ys.IG+Et,value:at.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Et}`}),u.createElement($u,{values:at.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:at.highlightIndex,multi:at.multi,selectedValues:at.selectedValues,id:`options-${Et}`}))}}const ke=ae(Ee);return ke.displayName="OptionsPicker",ke};var Wo=e(24446);class Hu extends u.PureComponent{constructor(){super(...arguments),this.onChange=Y=>{this.props.onPropChange({propName:"query",propValue:Y.currentTarget.value})},this.onBlur=Y=>{this.props.onPropChange({propName:"query",propValue:Y.currentTarget.value,updateOptions:!0})}}render(){return u.createElement(u.Fragment,null,u.createElement(pr.e,null,"Constant options"),u.createElement(Wo.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:ps.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const Gu={...Ds.Eg,type:"constant",hide:Ds.bU.hideVariable,query:"",current:{},options:[]},Al=(0,Yr.oM)({name:"templating/constant",initialState:ro.s,reducers:{createConstantOptionsFromQuery:(ee,Y)=>{const ae=(0,ss.ir)(ee,Y.payload.id);ae.type==="constant"&&(ae.options=[{text:ae.query.trim(),value:ae.query.trim(),selected:!1}])}}}),ju=Al.reducer,{createConstantOptionsFromQuery:Ed}=Al.actions,Ll=ee=>async Y=>{const{rootStateKey:ae}=ee;await Y((0,cs.mb)(ae,Ed((0,oa.Y6)(ee)))),await Y((0,Ms.xQ)(ee))},Qu=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:Gu,reducer:ju,picker:si(),editor:Hu,dependsOn:()=>!1,setValue:async(ee,Y,ae=!1)=>{await(0,is.WI)((0,Ms.Fz)((0,oa.yQ)(ee),Y,ae))},setValueFromUrl:async(ee,Y)=>{await(0,is.WI)((0,Ms.Ci)((0,oa.yQ)(ee),Y))},updateOptions:async ee=>{await(0,is.WI)(Ll((0,oa.yQ)(ee)))},getSaveModel:ee=>{const{index:Y,id:ae,state:Ee,global:ke,current:et,options:at,rootStateKey:Et,...Wt}=(0,E.cloneDeep)(ee);return Wt},getValueForUrl:ee=>ee.current.value,beforeAdding:ee=>{const{current:Y,options:ae,query:Ee,...ke}=(0,E.cloneDeep)(ee),et={selected:!0,text:Ee,value:Ee};return{...ke,current:et,options:[et],query:Ee}}});var Bl=e(87911),Yu=e(83967);function Nl({value:ee,name:Y,description:ae,onChange:Ee,ariaLabel:ke}){const et=(0,Bl.Me)();return u.createElement(Yu.X,{id:et,label:Y,description:ae,value:ee,onChange:Ee,"aria-label":ke})}const Ai=({onMultiChanged:ee,onPropChange:Y,variable:ae})=>{const Ee=(0,u.useCallback)(at=>{ee((0,oa.yQ)(ae),at.target.checked)},[ee,ae]),ke=(0,u.useCallback)(at=>{Y({propName:"includeAll",propValue:at.target.checked})},[Y]),et=(0,u.useCallback)(at=>{Y({propName:"allValue",propValue:at.currentTarget.value})},[Y]);return u.createElement(Qt.wc,{spacing:"md",height:"inherit"},u.createElement(Nl,{value:ae.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:Ee}),u.createElement(Nl,{value:ae.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:ke}),ae.includeAll&&u.createElement(Wo.V,{value:ae.allValue??"",onChange:et,name:"Custom all value",placeholder:"blank = auto",testId:ps.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};Ai.displayName="SelectionOptionsEditor";var Nr=e(62981);class Pr extends u.PureComponent{constructor(){super(...arguments),this.onChange=Y=>{this.props.onPropChange({propName:"query",propValue:Y.currentTarget.value})},this.onSelectionOptionsChange=async({propName:Y,propValue:ae})=>{this.props.onPropChange({propName:Y,propValue:ae,updateOptions:!0})},this.onBlur=Y=>{this.props.onPropChange({propName:"query",propValue:Y.currentTarget.value,updateOptions:!0})}}render(){return u.createElement(u.Fragment,null,u.createElement(pr.e,null,"Custom options"),u.createElement(Nr.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:ps.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),u.createElement(pr.e,null,"Selection options"),u.createElement(Ai,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const lo=(ee,Y)=>({}),Km={changeVariableMultiValue:Ms.Z7},$m=pc(Pr,lo,Km),Ul={...Ds.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},wl=(0,Yr.oM)({name:"templating/custom",initialState:ro.s,reducers:{createCustomOptionsFromQuery:(ee,Y)=>{const ae=(0,ss.ir)(ee,Y.payload.id);if(ae.type!=="custom")return;const{includeAll:Ee,query:ke}=ae,at=(ke.match(/(?:\\,|[^,])+/g)??[]).map(Et=>{Et=Et.replace(/\\,/g,",");const Wt=/^(.+)\s:\s(.+)$/g.exec(Et)??[];if(Wt.length===3){const[,Ft,qt]=Wt;return{text:Ft.trim(),value:qt.trim(),selected:!1}}else return{text:Et.trim(),value:Et.trim(),selected:!1}});Ee&&at.unshift({text:Ys.xk,value:Ys.r2,selected:!1}),ae.options=at}}}),Zu=wl.reducer,{createCustomOptionsFromQuery:yd}=wl.actions,Wl=ee=>async Y=>{const{rootStateKey:ae}=ee;await Y((0,cs.mb)(ae,yd((0,oa.Y6)(ee)))),await Y((0,Ms.xQ)(ee))},Li=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:Ul,reducer:Zu,picker:si(),editor:$m,dependsOn:()=>!1,setValue:async(ee,Y,ae=!1)=>{await(0,is.WI)((0,Ms.Fz)((0,oa.yQ)(ee),Y,ae))},setValueFromUrl:async(ee,Y)=>{await(0,is.WI)((0,Ms.Ci)((0,oa.yQ)(ee),Y))},updateOptions:async ee=>{await(0,is.WI)(Wl((0,oa.yQ)(ee)))},getSaveModel:ee=>{const{index:Y,id:ae,state:Ee,global:ke,rootStateKey:et,...at}=(0,E.cloneDeep)(ee);return at},getValueForUrl:ee=>(0,oa.HY)(ee)?Ys.xk:ee.current.value});var Fo=e(1781);const Bi={...Ds.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:Ds.Bd.onDashboardLoad},Fl=(0,Yr.oM)({name:"templating/datasource",initialState:ro.s,reducers:{createDataSourceOptions:(ee,Y)=>{const{sources:ae,regex:Ee}=Y.payload.data,ke=[],et=(0,ss.ir)(ee,Y.payload.id);if(et.type==="datasource"){for(let at=0;at<ae.length;at++){const Et=ae[at];Et.meta.id===et.query&&(Ju(Et,Ee)&&ke.push({text:Et.name,value:Et.uid,selected:!1}),Xu(Et,Ee)&&ke.push({text:"default",value:"default",selected:!1}))}ke.length===0&&ke.push({text:"No data sources found",value:"",selected:!1}),et.includeAll&&ke.unshift({text:Ys.xk,value:Ys.r2,selected:!1}),et.options=ke}}}});function Ju(ee,Y){return Y?Y.exec(ee.name):!0}function Xu(ee,Y){return ee.isDefault?Y?Y.exec("default"):!0:!1}const bd=Fl.reducer,{createDataSourceOptions:Ni}=Fl.actions,Kl=(ee,Y={getDatasourceSrv:g.ak})=>async(ae,Ee)=>{const{rootStateKey:ke}=ee,et=Y.getDatasourceSrv().getList({metrics:!0,variables:!1}),at=(0,ss.E0)(ee,Ee());if(at.type!=="datasource")return;let Et;at.regex&&(Et=(0,Mi.J)().replace(at.regex,void 0,"regex"),Et=(0,Mt.jO)(Et)),ae((0,cs.mb)(ke,Ni((0,oa.Y6)(ee,{sources:et,regex:Et})))),await ae((0,Ms.xQ)(ee))},qu=(ee,Y={getDatasourceSrv:g.ak})=>ae=>{const Ee=Y.getDatasourceSrv().getList({metrics:!0,variables:!0}),ke=(0,E.chain)(Ee).uniqBy("meta.id").map(et=>({text:et.meta.name,value:et.meta.id})).value();ke.unshift({text:"",value:""}),ae((0,cs.mb)(ee,(0,Qr.z7)({dataSourceTypes:ke})))},Pd=(ee,Y)=>{const{variable:{rootStateKey:ae}}=Y;if(!ae)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:jc(Qr.PF)};const{editor:Ee}=(0,ss.AE)(ae,ee);return{extended:jc(Ee)}},em={initDataSourceVariableEditor:qu,changeVariableMultiValue:Ms.Z7},Cd=(0,no.connect)(Pd,em);class tm extends u.PureComponent{constructor(){super(...arguments),this.onRegExChange=Y=>{this.props.onPropChange({propName:"regex",propValue:Y.currentTarget.value})},this.onRegExBlur=Y=>{this.props.onPropChange({propName:"regex",propValue:Y.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:Y,propName:ae})=>{this.props.onPropChange({propName:ae,propValue:Y,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:Y}=this.props;if(!Y?.dataSourceTypes.length)return"";const ae=Y.dataSourceTypes.find(ke=>ke.value===this.props.variable.query);return(ae?ae.value:Y.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=Y=>{this.props.onPropChange({propName:"query",propValue:Y.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:Y}=this.props.variable;if(!Y){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(Y)}render(){const{variable:Y,extended:ae,changeVariableMultiValue:Ee}=this.props,ke=ae?.dataSourceTypes?.length?ae.dataSourceTypes?.map(at=>({value:at.value??"",label:at.text})):[],et=ke.find(at=>at.value===Y.query)??ke[0];return u.createElement(u.Fragment,null,u.createElement(pr.e,null,"Data source options"),u.createElement(Fo.u,{name:"Type",value:et,options:ke,onChange:this.onDataSourceTypeChanged,testId:ps.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),u.createElement(Wo.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:u.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",u.createElement("br",null),u.createElement("br",null),"Example: ",u.createElement("code",null,"/^prod/"))}),u.createElement(pr.e,null,"Selection options"),u.createElement(Ai,{variable:Y,onPropChange:this.onSelectionOptionsChange,onMultiChanged:Ee}))}}const Dd=Cd(tm),nm=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:Bi,reducer:bd,picker:si(),editor:Dd,dependsOn:(ee,Y)=>ee.regex?(0,oa.QI)(ee.regex,Y.name):!1,setValue:async(ee,Y,ae=!1)=>{await(0,is.WI)((0,Ms.Fz)((0,oa.yQ)(ee),Y,ae))},setValueFromUrl:async(ee,Y)=>{await(0,is.WI)((0,Ms.Ci)((0,oa.yQ)(ee),Y))},updateOptions:async ee=>{await(0,is.WI)(Kl((0,oa.yQ)(ee)))},getSaveModel:ee=>{const{index:Y,id:ae,state:Ee,global:ke,rootStateKey:et,...at}=(0,E.cloneDeep)(ee);return{...at,options:[]}},getValueForUrl:ee=>(0,oa.HY)(ee)?Ys.xk:ee.current.value});var am=e(75627);const $l=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(ee=>({label:`${ee}`,value:ee})),Vl=u.memo(({onPropChange:ee,variable:Y})=>{const ae=Ft=>{ee({propName:"auto",propValue:Ft.target.checked,updateOptions:!0})},Ee=Ft=>{ee({propName:"query",propValue:Ft.currentTarget.value})},ke=Ft=>{ee({propName:"query",propValue:Ft.currentTarget.value,updateOptions:!0})},et=Ft=>{ee({propName:"auto_count",propValue:Ft.value,updateOptions:!0})},at=Ft=>{ee({propName:"auto_min",propValue:Ft.currentTarget.value,updateOptions:!0})},Et=$l.find(Ft=>Ft.value===Y.auto_count)??$l[0],Wt=(0,Ve.wW)(Sd);return u.createElement(u.Fragment,null,u.createElement(pr.e,null,"Interval options"),u.createElement(Wo.V,{value:Y.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:Ee,onBlur:ke,testId:ps.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),u.createElement(Nl,{value:Y.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:ae}),Y.auto&&u.createElement("div",{className:Wt.autoFields},u.createElement(Fo.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:Et,options:$l,onChange:et,width:9}),u.createElement(Wo.V,{value:Y.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:at,width:11})))});Vl.displayName="IntervalVariableEditor";function Sd(ee){return{autoFields:(0,te.css)({marginTop:ee.spacing(2),display:"flex",flexDirection:"column"})}}var xd=e(99386);const Md={...Ds.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:Ds.Bd.onTimeRangeChanged,current:{}},ri=(0,Yr.oM)({name:"templating/interval",initialState:ro.s,reducers:{createIntervalOptions:(ee,Y)=>{const ae=(0,ss.ir)(ee,Y.payload.id);if(ae.type!=="interval")return;const Ee=(0,E.map)(ae.query.match(/(["'])(.*?)\1|\w+/g),ke=>(ke=ke.replace(/["']+/g,""),{text:ke.trim(),value:ke.trim(),selected:!1}));ae.auto&&Ee.length&&Ee[0].text!=="auto"&&Ee.unshift({text:"auto",value:"$__auto_interval_"+ae.name,selected:!1}),ae.options=Ee}}}),sm=ri.reducer,{createIntervalOptions:Td}=ri.actions,rm=ee=>async Y=>{const{rootStateKey:ae}=ee;await Y((0,cs.mb)(ae,Td((0,oa.Y6)(ee)))),await Y(Ko(ee)),await Y((0,Ms.xQ)(ee))},Ko=(ee,Y={calculateInterval:Eu.calculateInterval,getTimeSrv:Hr.$t,templateSrv:(0,xd.J)()})=>(ae,Ee)=>{const ke=(0,ss.E0)(ee,Ee());if(ke.type==="interval"&&ke.auto){const et=Y.calculateInterval(Y.getTimeSrv().timeRange(),ke.auto_count,ke.auto_min);Y.templateSrv.setGrafanaVariable("$__auto_interval_"+ke.name,et.interval),Y.templateSrv.setGrafanaVariable("$__auto_interval",et.interval)}},Od=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:Md,reducer:sm,picker:si(),editor:Vl,dependsOn:()=>!1,setValue:async(ee,Y,ae=!1)=>{await(0,is.WI)(Ko((0,oa.yQ)(ee))),await(0,is.WI)((0,Ms.Fz)((0,oa.yQ)(ee),Y,ae))},setValueFromUrl:async(ee,Y)=>{await(0,is.WI)(Ko((0,oa.yQ)(ee))),await(0,is.WI)((0,Ms.Ci)((0,oa.yQ)(ee),Y))},updateOptions:async ee=>{await(0,is.WI)(rm((0,oa.yQ)(ee)))},getSaveModel:ee=>{const{index:Y,id:ae,state:Ee,global:ke,rootStateKey:et,...at}=(0,E.cloneDeep)(ee);return at},getValueForUrl:ee=>ee.current.value});var Id=e(82986);const zl=[{label:"On dashboard load",value:Id.Bd.onDashboardLoad},{label:"On time range change",value:Id.Bd.onTimeRangeChanged}];function Rd({onChange:ee,refresh:Y}){const ae=(0,u.useMemo)(()=>zl.find(Ee=>Ee.value===Y)?.value??zl[0].value,[Y]);return u.createElement($t.g,{label:"Refresh",description:"When to update the values of this variable"},u.createElement(re.S,{options:zl,onChange:ee,value:ae}))}const Ui=[{label:"Disabled",value:Ds.$U.disabled},{label:"Alphabetical (asc)",value:Ds.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:Ds.$U.alphabeticalDesc},{label:"Numerical (asc)",value:Ds.$U.numericalAsc},{label:"Numerical (desc)",value:Ds.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:Ds.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:Ds.$U.alphabeticalCaseInsensitiveDesc}];function _l({onChange:ee,sort:Y}){const ae=(0,u.useMemo)(()=>Ui.find(Ee=>Ee.value===Y)??Ui[0],[Y]);return u.createElement(Fo.u,{name:"Sort",description:"How to sort the values of this variable",value:ae,options:Ui,onChange:ee,testId:ps.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var oi=e(19973),kl=e(40545),Ad=e(46241);async function om(ee,Y=No.nL){if((0,bs.d7)(ee))return ee.variables.editor;if((0,bs.X7)(ee)){const ae=await Y(ee.meta);if(!ae.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return ae.components.QueryEditor??null}return(0,bs.Ju)(ee)?im:(0,bs.R)(ee)?(await Y(ee.meta)).components.VariableQueryEditor??Ad.R:null}function im({datasource:ee,query:Y,onChange:ae}){const Ee=(0,u.useCallback)(ke=>{ae({refId:"StandardVariableQuery",query:ke})},[ae]);return u.createElement(Ad.R,{query:Y.query,onChange:Ee,datasource:ee,templateSrv:(0,Mi.J)()})}function $o(ee,Y,ae){return{next:ke=>{if(ke.state===Gs.Gu.Error){ae.unsubscribe(),Y(ke.error);return}if(ke.state===Gs.Gu.Done){ae.unsubscribe(),ee();return}},error:ke=>{ae.unsubscribe(),Y(ke)},complete:()=>{ae.unsubscribe(),ee()}}}const Hl=(ee,Y)=>async(ae,Ee)=>{try{const{rootStateKey:ke}=ee;if(!(0,oa.A3)(ke,Ee()))return;const et=(0,ss.E0)(ee,Ee());if(et.type!=="query")return;(0,ss.AE)(ke,Ee()).editor.id===et.id&&ae((0,cs.mb)(ke,(0,Qr.PV)({errorProp:"update"})));const at=await(0,B.F)().get(et.datasource??"");await new Promise((Et,Wt)=>{const Ft=new oi.w0,qt=$o(Et,Wt,Ft),dn=oo().getResponse(ee).subscribe(qt);Ft.add(dn),oo().queueRequest({identifier:ee,datasource:at,searchFilter:Y})})}catch(ke){if(ke instanceof Error){const et=(0,kl.P)(ke),{rootStateKey:at}=ee;throw(0,ss.AE)(at,Ee()).editor.id===ee.id&&ae((0,cs.mb)(at,(0,Qr.Sg)({errorProp:"update",errorText:et.message}))),et}}},Gl=ee=>async(Y,ae)=>{const Ee=(0,ss.E0)(ee,ae());Ee.type==="query"&&await Y(Cr((0,oa.yQ)(Ee),Ee.datasource))},Cr=(ee,Y)=>async(ae,Ee)=>{try{const{rootStateKey:ke}=ee,{editor:et}=(0,ss.AE)(ke,Ee()),Et=El(et)?.dataSource,Wt=await(0,B.F)().get(Y??"");Et&&Et.type!==Wt?.type&&ae((0,cs.mb)(ke,(0,Jr.Pl)((0,oa.Y6)(ee,{propName:"query",propValue:""}))));const Ft=await om(Wt);ae((0,cs.mb)(ke,(0,Qr.z7)({dataSource:Wt,VariableQueryEditor:Ft})))}catch(ke){console.error(ke)}},lm=(ee,Y,ae)=>async(Ee,ke)=>{const{rootStateKey:et}=ee,at=(0,ss.E0)(ee,ke());if(at.type==="query"){if(wi(at.name,Y)){const Et="Query cannot contain a reference to itself. Variable: $"+at.name;Ee((0,cs.mb)(et,(0,Qr.Sg)({errorProp:"query",errorText:Et})));return}Ee((0,cs.mb)(et,(0,Qr.PV)({errorProp:"query"}))),Ee((0,cs.mb)(et,(0,Jr.Pl)((0,oa.Y6)(ee,{propName:"query",propValue:Y})))),ae!==void 0?Ee((0,cs.mb)(et,(0,Jr.Pl)((0,oa.Y6)(ee,{propName:"definition",propValue:ae})))):typeof Y=="string"&&Ee((0,cs.mb)(et,(0,Jr.Pl)((0,oa.Y6)(ee,{propName:"definition",propValue:Y})))),await Ee((0,Ms.Rk)(ee))}};function wi(ee,Y){if(typeof Y=="string"&&Y.match(new RegExp("\\$"+ee+"(/| |$)")))return!0;const ae=Wi(Y);for(let Ee in ae)if(ae.hasOwnProperty(Ee)){const ke=ae[Ee];if(typeof ke=="string"&&ke.match(new RegExp("\\$"+ee+"(/| |$)")))return!0}return!1}function Wi(ee){return typeof ee!="object"||ee===null?{query:ee}:Object.keys(ee).reduce((Ee,ke)=>{const et=ee[ke];if(typeof et!="object"||et===null)return Ee[ke]=et,Ee;const at=Wi(et);for(let Et in at)at.hasOwnProperty(Et)&&(Ee[`${ke}_${Et}`]=at[Et]);return Ee},{})}const cm=(ee,Y)=>{const{rootStateKey:ae}=Y.variable;if(!ae)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:El(Qr.PF)};const{editor:Ee}=(0,ss.AE)(ae,ee);return{extended:El(Ee)}},Ld={initQueryVariableEditor:Gl,changeQueryVariableDataSource:Cr,changeQueryVariableQuery:lm,changeVariableMultiValue:Ms.Z7},jl=(0,no.connect)(cm,Ld);class dm extends u.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=Y=>{this.props.onPropChange({propName:"datasource",propValue:Y.isDefault?null:(0,Gc.iU)(Y)})},this.onLegacyQueryChange=async(Y,ae)=>{this.props.variable.query!==Y&&this.props.changeQueryVariableQuery((0,oa.yQ)(this.props.variable),Y,ae)},this.onQueryChange=async Y=>{if(this.props.variable.query!==Y){let ae="";Y&&Y.hasOwnProperty("query")&&typeof Y.query=="string"&&(ae=Y.query),this.props.changeQueryVariableQuery((0,oa.yQ)(this.props.variable),Y,ae)}},this.onRegExChange=Y=>{this.setState({regex:Y.currentTarget.value})},this.onRegExBlur=async Y=>{const ae=Y.currentTarget.value;this.props.variable.regex!==ae&&this.props.onPropChange({propName:"regex",propValue:ae,updateOptions:!0})},this.onRefreshChange=Y=>{this.props.onPropChange({propName:"refresh",propValue:Y})},this.onSortChange=async Y=>{this.props.onPropChange({propName:"sort",propValue:Y.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:Y,propName:ae})=>{this.props.onPropChange({propName:ae,propValue:Y,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:Y,variable:ae}=this.props;if(!Y||!Y.dataSource||!Y.VariableQueryEditor)return null;const Ee=Y.dataSource,ke=Y.VariableQueryEditor;let et=ae.query;if(typeof et=="string"?et=et||(Ee.variables?.getDefaultQuery?.()??""):et={...Ee.variables?.getDefaultQuery?.(),...ae.query},(0,bs.NX)(ke,Ee))return u.createElement($t.g,{label:"Query"},u.createElement(ke,{key:Ee.uid,datasource:Ee,query:et,templateSrv:(0,Mi.J)(),onChange:this.onLegacyQueryChange}));const at=(0,Hr.$t)().timeRange();return(0,bs.$7)(ke,Ee)?u.createElement($t.g,{label:"Query"},u.createElement(ke,{key:Ee.uid,datasource:Ee,query:et,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:Gs.Gu.Done,timeRange:at},range:at,onBlur:()=>{},history:[]})):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,oa.yQ)(this.props.variable))}componentDidUpdate(Y){Y.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,oa.yQ)(this.props.variable),this.props.variable.datasource)}render(){return u.createElement(u.Fragment,null,u.createElement(pr.e,null,"Query options"),u.createElement($t.g,{label:"Data source",htmlFor:"data-source-picker"},u.createElement(vl.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),u.createElement(Nr.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:u.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",u.createElement("br",null),"Named capture groups can be used to separate the display text and value (",u.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:ps.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),u.createElement(_l,{onChange:this.onSortChange,sort:this.props.variable.sort}),u.createElement(Rd,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),u.createElement(pr.e,null,"Selection options"),u.createElement(Ai,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const Xr=jl(dm),Fi=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:or,reducer:Fm,picker:si(),editor:Xr,dependsOn:(ee,Y)=>(0,oa.QI)(ee.query,ee.datasource?.uid,ee.regex,Y.name),setValue:async(ee,Y,ae=!1)=>{await(0,is.WI)((0,Ms.Fz)((0,oa.yQ)(ee),Y,ae))},setValueFromUrl:async(ee,Y)=>{await(0,is.WI)((0,Ms.Ci)((0,oa.yQ)(ee),Y))},updateOptions:async(ee,Y)=>{await(0,is.WI)(Hl((0,oa.yQ)(ee),Y))},getSaveModel:ee=>{const{index:Y,id:ae,state:Ee,global:ke,queryValue:et,rootStateKey:at,...Et}=(0,E.cloneDeep)(ee);return ee.refresh!==Ds.Bd.never?{...Et,options:[]}:Et},getValueForUrl:ee=>(0,oa.HY)(ee)?Ys.xk:ee.current.value}),ii=()=>({id:"system",description:"",name:"system",initialState:{...Ds.Eg,type:"system",hide:Ds.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Gs.Gu.Done},reducer:(ee,Y)=>ee,picker:null,editor:null,dependsOn:()=>!1,setValue:async(ee,Y,ae=!1)=>{},setValueFromUrl:async(ee,Y)=>{},updateOptions:async ee=>{},getSaveModel:ee=>({}),getValueForUrl:ee=>""});function um({onPropChange:ee,variable:{query:Y}}){const ae=(0,u.useCallback)((et,at)=>{et.preventDefault(),ee({propName:"originalQuery",propValue:et.currentTarget.value,updateOptions:!1}),ee({propName:"query",propValue:et.currentTarget.value,updateOptions:at})},[ee]),Ee=(0,u.useCallback)(et=>ae(et,!1),[ae]),ke=(0,u.useCallback)(et=>ae(et,!0),[ae]);return u.createElement(u.Fragment,null,u.createElement(pr.e,null,"Text options"),u.createElement(Wo.V,{value:Y,name:"Default value",placeholder:"default value, if any",onChange:Ee,onBlur:ke,width:30,testId:ps.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function Bd({variable:ee,onVariableChange:Y,readOnly:ae}){const Ee=(0,mr.useDispatch)(),[ke,et]=(0,u.useState)(ee.current.value);(0,u.useEffect)(()=>{et(ee.current.value)},[ee]);const at=(0,u.useCallback)(()=>{if(!ee.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(ee.current.value!==ke){if(Ee((0,cs.mb)(ee.rootStateKey,(0,Jr.Pl)((0,oa.Y6)({id:ee.id,type:ee.type},{propName:"query",propValue:ke})))),Y){Y({...ee,current:(0,Il.Q)(ee.current)?{}:{...ee.current,value:ke}});return}qo.z.get(ee.type).updateOptions(ee)}},[ee,ke,Ee,Y]),Et=(0,u.useCallback)(qt=>et(qt.target.value),[et]),Wt=qt=>at(),Ft=qt=>{qt.keyCode===13&&(qt.preventDefault(),at())};return u.createElement(de.I,{type:"text",value:ke,onChange:Et,onBlur:Wt,disabled:ae,onKeyDown:Ft,placeholder:(0,Er.t)("variable.textbox.placeholder","Enter variable value"),id:Ys.IG+ee.id})}const Nd={...Ds.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},Ud=(0,Yr.oM)({name:"templating/textbox",initialState:ro.s,reducers:{createTextBoxOptions:(ee,Y)=>{const ae=(0,ss.ir)(ee,Y.payload.id);if(ae.type!=="textbox")return;const Ee={text:ae.query.trim(),value:ae.query.trim(),selected:!1};ae.options=[Ee],ae.current=Ee}}}),li=Ud.reducer,{createTextBoxOptions:mm}=Ud.actions,wd=ee=>async(Y,ae)=>{const{rootStateKey:Ee,type:ke}=ee;Y((0,cs.mb)(Ee,mm((0,oa.Y6)(ee))));const et=(0,ss.E0)(ee,ae());et.type==="textbox"&&await qo.z.get(ke).setValue(et,et.options[0],!0)},Wd=(ee,Y)=>async(ae,Ee)=>{const{rootStateKey:ke}=ee,et=(0,ss.E0)(ee,Ee());if(et.type!=="textbox")return;const at=(0,oa.Hi)(Y);ae((0,cs.mb)(ke,(0,Jr.Pl)((0,oa.Y6)(et,{propName:"query",propValue:at})))),await ae((0,Ms.Ci)((0,oa.yQ)(et),at))},Fd=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Nd,reducer:li,picker:Bd,editor:um,dependsOn:(ee,Y)=>!1,setValue:async(ee,Y,ae=!1)=>{await(0,is.WI)((0,Ms.Fz)((0,oa.yQ)(ee),Y,ae))},setValueFromUrl:async(ee,Y)=>{await(0,is.WI)(Wd((0,oa.yQ)(ee),Y))},updateOptions:async ee=>{await(0,is.WI)(wd((0,oa.yQ)(ee)))},getSaveModel:(ee,Y)=>{const{index:ae,id:Ee,state:ke,global:et,originalQuery:at,rootStateKey:Et,...Wt}=(0,E.cloneDeep)(ee);if(ee.query!==at&&!Y){const Ft=at??"",qt={selected:!1,text:Ft,value:Ft};return{...Wt,query:Ft,current:qt,options:[qt]}}return Wt},getValueForUrl:ee=>ee.current.value,beforeAdding:ee=>({...(0,E.cloneDeep)(ee),originalQuery:ee.query})});var Ql=e(3008);C().move=X.R;const Ki=e(72866),ci=Ki.keys().map(ee=>Ki(ee));class $i{async init(){try{parent.postMessage("GrafanaAppInit","*");const Y=(0,Er.uC)(Q.default.bootData.user.language);(0,T.jW)(bi.ae),fm(),ol("frontend_app_init"),Vi(),(0,P.i_)(Q.default.bootData.user.locale),(0,P.Ls)(Q.default.bootData.user.weekStart),(0,A.L)(dl.$),(0,z.t)(Xi),(0,k.$)(fu.Z),(0,U.x)(L.E1),(0,S.K)(()=>Q.default.bootData.user.timezone),Os(),(0,V.Xw)(fs.Z),await Y,Kd(),(0,Ql.x)(),di(),x.S.setInit(Qo.u),x.N.setInit(Qo.l),M.Z.setInit(jo),qo.z.setInit(()=>[Fi(),Li(),Fd(),Qu(),nm(),Od(),td(),ii()]),R.F.setInit(Zd),(0,w.pD)(()=>new pl),wo(new Or),(0,w.Iw)(gl.v7),(0,K.Qf)({importPanelPlugin:Si.Ub,getPanelPluginFromCache:Si.q1}),O.u.initialize({config:Q.default,getTimeRangeForUrl:(0,Hr.$t)().timeRangeForUrl,getVariablesUrlParams:am.c}),document.addEventListener("click",qi);const ae=new g.ND;ae.init(Q.default.datasources,Q.default.defaultDatasource),(0,B.w)(ae),hl(),new rr().init();const ke=await xi(Q.default.apps),et=$c([{pluginId:"grafana",extensionConfigs:zc()},...ke]),at=dn=>Br({...dn,registry:et});(0,W.oI)(at);const Et=L.E1.getSearchObject(),Wt=new Ji,Ft=new so(L.E1,Wt);Wt.setKioskModeFromUrl(Et.kiosk),this.context={backend:bi.ae,location:L.E1,chrome:Wt,keybindings:Ft,config:Q.default},(0,D.s)(document.getElementById("reactRoot")).render(u.createElement(Jd.Or,{app:this}))}catch(Y){console.error("Failed to start Grafana",Y),window.__grafana_load_failed()}finally{Yo("frontend_app_init")}}}function Kd(){ci.length>0&&ci[0].addExtensionReducers()}function di(){ci.length>0&&ci[0].init()}function fm(){(0,_.tz)(new bc({debug:!1})),window.addEventListener("load",ee=>{const Y="frontend_boot_load_time_seconds",ae="frontend_boot_js_done_time_seconds",Ee="frontend_boot_css_time_seconds";performance&&(performance.mark(Y),qr("first-paint","frontend_boot_","_time_seconds"),qr("first-contentful-paint","frontend_boot_","_time_seconds"),qr(Y),qr(ae),qr(Ee))}),Lr.contextSrv.user.orgRole!==""&&(0,_.e6)(new Pc({})),Q.default.grafanaJavascriptAgent.enabled&&(0,_.e6)(new Tc({...Q.default.grafanaJavascriptAgent,app:{version:Q.default.buildInfo.version,environment:Q.default.buildInfo.env},buildInfo:Q.default.buildInfo,user:{id:String(Q.default.bootData.user?.id),email:Q.default.bootData.user?.email}})),Q.default.googleAnalyticsId&&(0,_.e6)(new Cc({googleAnalyticsId:Q.default.googleAnalyticsId})),Q.default.googleAnalytics4Id&&(0,_.e6)(new Hs({googleAnalyticsId:Q.default.googleAnalytics4Id,googleAnalytics4SendManualPageViews:Q.default.googleAnalytics4SendManualPageViews})),Q.default.rudderstackWriteKey&&Q.default.rudderstackDataPlaneUrl&&(0,_.e6)(new Lo({writeKey:Q.default.rudderstackWriteKey,dataPlaneUrl:Q.default.rudderstackDataPlaneUrl,user:Q.default.bootData.user,sdkUrl:Q.default.rudderstackSdkUrl,configUrl:Q.default.rudderstackConfigUrl,buildInfo:Q.default.buildInfo})),Q.default.applicationInsightsConnectionString&&(0,_.e6)(new nl({connectionString:Q.default.applicationInsightsConnectionString,endpointUrl:Q.default.applicationInsightsEndpointUrl}))}function Vi(){(0,H.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function qr(ee,Y="",ae=""){const Ee=C().first(performance.getEntriesByName(ee));if(Ee){const ke=Ee.name.replace(/-/g,"_");au(`${Y}${ke}${ae}`,Math.round(Ee.startTime)/1e3)}}const gm=new $i;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,gm.init()},62862:(j,I,e)=>{"use strict";e.d(I,{As:()=>t,TE:()=>s,Z9:()=>n,_M:()=>i,sK:()=>r});var t=(m=>(m.Active="active",m.Expired="expired",m.Pending="pending",m))(t||{}),n=(m=>(m.Unprocessed="unprocessed",m.Active="active",m.Suppressed="suppressed",m))(n||{}),i=(m=>(m.equal="=",m.notEqual="!=",m.regex="=~",m.notRegex="!~",m))(i||{}),s=(m=>(m.Internal="internal",m.External="external",m.All="all",m))(s||{}),r=(m=>(m.cortex="cortex",m.mimir="mimir",m.prometheus="prometheus",m))(r||{})},89967:(j,I,e)=>{"use strict";e.d(I,{$5:()=>n,MQ:()=>i,Rv:()=>m,az:()=>r});const t={statistics:[]};var n=(o=>(o[o.Query=1]="Query",o[o.Search=0]="Search",o))(n||{}),i=(o=>(o[o.Builder=0]="Builder",o[o.Code=1]="Code",o))(i||{});const s={parameters:[]};var r=(o=>(o.And="and",o.Function="function",o.FunctionParameter="functionParameter",o.GroupBy="groupBy",o.Operator="operator",o.Or="or",o.Property="property",o))(r||{}),m=(o=>(o.String="string",o))(m||{});const d={logGroupNames:[],logGroups:[],statsGroups:[]}},14180:(j,I,e)=>{"use strict";e.d(I,{$5:()=>t.$5,KB:()=>n,MQ:()=>t.MQ,wf:()=>i});var t=e(89967),n=(s=>(s.Scheduled="Scheduled",s.Running="Running",s.Complete="Complete",s.Failed="Failed",s.Cancelled="Cancelled",s.Timeout="Timeout",s))(n||{}),i=(s=>(s.Regions="regions",s.Namespaces="namespaces",s.Metrics="metrics",s.DimensionKeys="dimensionKeys",s.DimensionValues="dimensionValues",s.EBSVolumeIDs="ebsVolumeIDs",s.EC2InstanceAttributes="ec2InstanceAttributes",s.ResourceArns="resourceARNs",s.Statistics="statistics",s.LogGroups="logGroups",s.Accounts="accounts",s))(i||{})},36617:(j,I,e)=>{"use strict";e.d(I,{hD:()=>L,oe:()=>m.o,yl:()=>d,AK:()=>o});var t=e(48592),n=e(69376),i=e(53933),s=e(8508),r=e(75261),m=e(5264);function d(w){return w?typeof w=="string"?w===m.o:"meta"in w&&w.meta.name===m.o||w.uid===m.o:!1}function o(w,K){return new t.y(B=>{const W=(0,r.h4)().getCurrent(),_=l(w.queries);if(!_){B.next(a("Missing panel reference ID"));return}const k=W?.getPanelById(_);if(!k){B.next(a("Unknown Panel: "+_));return}const A=k.getQueryRunner(),z=A.getData({withTransforms:!!K?.withTransforms,withFieldConfig:!1}).subscribe({next:H=>{K?.topic===n.w5.Annotations&&(H={...H,series:H.annotations??[],annotations:void 0}),B.next(H)}});if(!k.isInView){const{datasource:H,targets:Q}=k,X={...w,datasource:H,panelId:_,queries:Q};A.run(X)}return()=>{z.unsubscribe()}})}function l(w){if(!(!w||!w.length))return w[0].panelId}function a(w){return{state:i.Gu.Error,series:[],request:{},error:{message:w},timeRange:(0,s.JK)()}}var g=e(42844),c=e(87911),h=e(6772),f=e.n(h),b=e(27702),v=e(25111),y=e(66310),E=e(22209),C=e(28580),u=e(64022),D=e(40705),P=e(42074),S=e(62108),x=e(50230),M=e(12308),R=e(5926),O=e(47802);function T(w){return JSON.stringify(w)}const U=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function L({panelData:w,queries:K,onChange:B,onRunQueries:W}){const{value:_}=(0,v.Z)(()=>(0,R.ak)().get()),k=K[0],A=(0,b.useMemo)(()=>(0,r.h4)().getCurrent()?.getPanelById(k.panelId??-124134),[k.panelId]),{value:z,loading:H}=(0,v.Z)(async()=>{if(!A)return[];const ie=await(0,R.ak)().get(A.datasource);return Promise.all(A.targets.map(async Se=>{const ye=Se.datasource?await(0,R.ak)().get(Se.datasource):ie,Ce=ye.getQueryDisplayText||T,de=(0,O.t)(w,Se.refId)??w;return{refId:Se.refId,query:Ce(Se),name:ye.name,img:ye.meta.info.logos.small,data:de.series,error:de.error}}))},[w,A]),Q=(0,b.useCallback)(ie=>{B([ie]),W()},[B,W]),X=(0,b.useCallback)(ie=>{Q({...k,panelId:ie})},[k,Q]),te=(0,b.useCallback)(()=>{Q({...k,withTransforms:!k.withTransforms})},[k,Q]),oe=(0,b.useCallback)(ie=>{Q({...k,topic:ie?n.w5.Annotations:void 0})},[k,Q]),Z=(0,b.useCallback)(ie=>{const Se=ie.datasource??_,ye=(0,R.ak)().getInstanceSettings(Se)?.name,Ce=ie.targets.length;return`${Ce} ${f()("query",Ce)} to ${ye}`},[_]),le=(0,r.h4)().getCurrent(),ce=!!(k.withTransforms||A?.transformations?.length),q=(0,b.useMemo)(()=>le?.panels.filter(ie=>M.default.panels[ie.type]&&ie.targets&&ie.id!==le.panelInEdit?.id&&ie.datasource?.uid!==m.o).map(ie=>({value:ie.id,label:ie.title??"Panel "+ie.id,description:Z(ie),imgUrl:M.default.panels[ie.type].info.logos.small}))??[],[le,Z]),ne=(0,y.wW)(V),pe=(0,c.Me)();if(!le)return null;if(q.length<1)return b.createElement("p",{className:ne.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const re=q.find(ie=>ie.value===k.panelId);return b.createElement(b.Fragment,null,b.createElement(E.g,{label:"Source",description:"Use the same results as panel"},b.createElement(C.Ph,{inputId:pe,placeholder:"Choose panel",isSearchable:!0,options:q,value:re,onChange:ie=>X(ie.value)})),b.createElement(u.Lh,{height:"auto",wrap:!0,align:"flex-start"},b.createElement(E.g,{label:"Data Source",description:"Use data or annotations from the panel",className:ne.horizontalField},b.createElement(D.S,{options:U,value:k.topic===n.w5.Annotations,onChange:oe})),ce&&b.createElement(E.g,{label:"Transform",description:"Apply panel transformations from the source panel"},b.createElement(P.r,{value:!!k.withTransforms,onChange:te}))),H?b.createElement(S.$,null):b.createElement(b.Fragment,null,z&&!!z.length&&b.createElement(E.g,{label:"Queries from panel"},b.createElement(u.wc,{spacing:"sm"},z.map((ie,Se)=>b.createElement(x.Z,{key:`DashboardQueryRow-${Se}`},b.createElement(x.Z.Heading,null,ie.refId),b.createElement(x.Z.Figure,null,b.createElement("img",{src:ie.img,alt:ie.name,title:ie.name,width:40})),b.createElement(x.Z.Meta,null,ie.query)))))))}function V(w){return{horizontalField:(0,g.css)({marginRight:w.spacing(2)}),noQueriesText:(0,g.css)({padding:w.spacing(1.25)})}}},5264:(j,I,e)=>{"use strict";e.d(I,{o:()=>t});const t="-- Dashboard --",n="dashboard"},28062:(j,I,e)=>{"use strict";e.d(I,{k:()=>Je,e:()=>Ue});var t=e(89949),n=e(91053),i=e(45383),s=e(6857),r=e(39343),m=e(66784),d=e(53933),o=e(81087),l=e(72164),a=e(27938),g=e(32053),c=e(42751),h=e(39317),f=e(43685),b=e(73289),v=e(10864),y=e(85180),E=e(75261),C=e(42844),u=e(27702),D=e(66310),P=e(5229),S=e(22209),x=e(28580),M=e(42074),R=e(1041),O=e(11285),T=e(89050),U=e(79913),L=e.n(U),V=e(80369),w=e(15672),K=e(66670),B=e(64022),W=e(28981),_=e(45701),k=e(76133),A=e(73453),z=e(26468),H=e(97289);const Q="time-of-day-picker-panel",X=({minuteStep:$e=1,showHour:Qe=!0,showSeconds:tt=!1,onChange:lt,value:Me,size:De="auto",disabled:We,disabledHours:qe,disabledMinutes:st,disabledSeconds:dt,placeholder:Tt,format:Nt="HH:mm",defaultValue:Bt=void 0,allowEmpty:yt=!1,width:ft})=>{const ct=(0,D.wW)(oe),ge=()=>ft?(0,C.css)`
        width: ${ft}px;
      `:(0,z.ht)()[De];return u.createElement(k.Z,{value:Me,defaultValue:Bt,onChange:Be=>lt(Be),showHour:Qe,showSecond:tt,format:Nt,allowEmpty:yt,className:(0,C.cx)(ge(),ct.input),popupClassName:(0,C.cx)(ct.picker,Q),minuteStep:$e,inputIcon:u.createElement(te,{wrapperStyle:ct.caretWrapper}),disabled:We,disabledHours:qe,disabledMinutes:st,disabledSeconds:dt,placeholder:Tt})},te=({wrapperStyle:$e=""})=>u.createElement("div",{className:$e},u.createElement(A.J,{name:"angle-down"})),oe=$e=>{const Qe=$e.components.input.background,tt=$e.v1.palette.black,lt=$e.colors.background.secondary,Me=$e.shape.borderRadius(1),De=$e.components.input.borderColor;return{caretWrapper:(0,C.css)`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${$e.colors.text.secondary};
    `,picker:(0,C.css)`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${Qe};
        border-color: ${De};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${$e.v1.palette.orange};
            border-radius: ${Me};
          }

          &:hover {
            background: ${lt};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${$e.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${tt};
        background-color: ${Qe};
        border-color: ${De};
        border-radius: ${Me};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${Qe};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:(0,C.css)`
      .rc-time-picker-input {
        background-color: ${Qe};
        border-radius: ${Me};
        border-color: ${De};
        height: ${$e.spacing(4)};

        &:focus {
          ${(0,H.focusCss)($e)}
        }

        &:disabled {
          background-color: ${$e.colors.action.disabledBackground};
          color: ${$e.colors.action.disabledText};
          border: 1px solid ${$e.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }

      .rc-time-picker-clear {
        position: absolute;
        right: 20px;
        top: 50%;
        cursor: pointer;
        overflow: hidden;
        transform: translateY(-50%);
        color: ${$e.colors.text.secondary};
      }
    `}},Z=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(($e,Qe)=>({label:$e,value:Qe+1})),le=({value:$e,onChange:Qe})=>{const tt=(0,D.wW)(ce),lt=Date.now(),Me=(0,V.Pr)($e.timezone??"utc",lt),De=(0,E.h4)().getCurrent()?.getTimezone()===$e.timezone,[We,qe]=(0,u.useState)(!1),st=()=>{qe(!We)},dt=Be=>{if(!Be)return;const Le=L()();if(Be){const he=Be.split(":");Le.set("hour",parseInt(he[0],10)),Le.set("minute",parseInt(he[1],10))}return Le},Tt=()=>{let Be="Everyday";return $e.fromDayOfWeek&&!$e.toDayOfWeek&&(Be=Z[$e.fromDayOfWeek-1].label),Be},Nt=()=>{const Be=u.createElement(u.Fragment,null,u.createElement(_.d,{title:Me?.name}),u.createElement(W.v,{timeZone:$e.timezone,timestamp:lt}));return De?u.createElement(u.Fragment,null,"Dashboard timezone (",Be,")"):Be},Bt=(Be,Le)=>{const he=Be?Be.format("HH:mm"):void 0;Qe(Le==="from"?{...$e,from:he}:{...$e,to:he})},yt=Be=>{Qe({...$e,timezone:Be})},ft=Be=>{const Le=Be?Be.value:void 0,he=Be?$e.toDayOfWeek:void 0;Qe({...$e,fromDayOfWeek:Le,toDayOfWeek:he})},ct=Be=>{Qe({...$e,toDayOfWeek:Be?Be.value:void 0})},ge=()=>We?u.createElement(w.O,{value:$e.timezone,includeInternal:!0,onChange:Be=>yt(Be),onBlur:()=>qe(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):u.createElement("div",{className:tt.timezoneContainer},u.createElement("div",{className:tt.timezone},Nt()),u.createElement(K.zx,{variant:"secondary",onClick:st,size:"sm"},"Change timezone"));return u.createElement(P.C,{className:tt.wrapper},u.createElement(S.g,{label:"From"},u.createElement(B.Lh,{spacing:"xs"},u.createElement(x.Ph,{options:Z,isClearable:!0,placeholder:"Everyday",value:$e.fromDayOfWeek??null,onChange:Be=>ft(Be),width:20}),u.createElement(X,{value:dt($e.from),onChange:Be=>Bt(Be,"from"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),u.createElement(S.g,{label:"To"},u.createElement(B.Lh,{spacing:"xs"},($e.fromDayOfWeek||$e.toDayOfWeek)&&u.createElement(x.Ph,{options:Z,isClearable:!0,placeholder:Tt(),value:$e.toDayOfWeek??null,onChange:Be=>ct(Be),width:20}),u.createElement(X,{value:dt($e.to),onChange:Be=>Bt(Be,"to"),allowEmpty:!0,placeholder:"HH:mm",width:100}))),u.createElement(S.g,{label:"Timezone"},ge()))},ce=$e=>({wrapper:(0,C.css)({maxWidth:$e.spacing(60),marginBottom:$e.spacing(2)}),timezoneContainer:(0,C.css)`
      padding: 5px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
    `,timezone:(0,C.css)`
      margin-right: 5px;
    `}),q="Enabling this returns annotations that match any of the tags specified below",ne=u.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),pe=[{label:"Dashboard",value:T._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:T._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],re=[{label:"Annotations & Alerts",value:T.hR.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:T.hR.TimeRegions,description:"Configure a repeating time region"}],ie=[10,50,100,200,300,500,1e3,2e3].map($e=>({label:String($e),value:$e}));function Se({query:$e,onChange:Qe}){const tt=$e,{limit:lt,matchAny:Me,tags:De,type:We,queryType:qe}=tt;let st=qe??T.hR.Annotations;const dt=(0,u.useMemo)(()=>(0,E.h4)().dashboard?.getTimezone(),[]),Tt=(0,D.wW)(ye),Nt=Be=>Qe({...tt,type:Be.value}),Bt=Be=>Qe({...tt,limit:Be.value}),yt=Be=>Qe({...tt,matchAny:Be.target.checked}),ft=Be=>Qe({...tt,tags:Be}),ct=Be=>{const Le={...tt,queryType:Be.value};Le.queryType===T.hR.TimeRegions?Le.timeRegion||(Le.timeRegion={timezone:dt}):delete Le.timeRegion,Qe(Le)},ge=Be=>{Qe({...tt,timeRegion:Be})};return u.createElement(P.C,{className:Tt.container},u.createElement(S.g,{label:"Query type"},u.createElement(x.Ph,{inputId:"grafana-annotations__query-type",options:re,value:st,onChange:ct})),st===T.hR.Annotations&&u.createElement(u.Fragment,null,u.createElement(S.g,{label:"Filter by"},u.createElement(x.Ph,{inputId:"grafana-annotations__filter-by",options:pe,value:We,onChange:Nt})),u.createElement(S.g,{label:"Max limit"},u.createElement(x.Ph,{inputId:"grafana-annotations__limit",width:16,options:ie,value:lt,onChange:Bt})),We===T._$.Tags&&u.createElement(u.Fragment,null,u.createElement(S.g,{label:"Match any",description:q},u.createElement(M.r,{id:"grafana-annotations__match-any",value:Me,onChange:yt})),u.createElement(S.g,{label:"Tags",description:ne},u.createElement(R.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:ft,tagOptions:O.lK,tags:De??[]})))),st===T.hR.TimeRegions&&tt.timeRegion&&u.createElement(le,{value:tt.timeRegion,onChange:ge}))}const ye=$e=>({container:(0,C.css)({maxWidth:$e.spacing(60),marginBottom:$e.spacing(2)})});var Ce=e(29241),de=e(78526);function we($e,Qe,tt,lt){if(!Qe)return;const Me=(0,de.q7)(Qe,tt);if(!Me.length)return;const De=[],We=[],qe=[],st=Qe.timezone??lt;for(const dt of Me){let Tt=dt.from,Nt=dt.to;const Bt=(0,V.Pr)(st,Tt);if(Bt){const yt=Bt.offsetInMins*60*1e3;Tt+=yt,Nt+=yt}De.push(Tt),We.push(Nt),qe.push($e)}return{fields:[{name:"time",type:Ce.fS.time,values:De,config:{}},{name:"timeEnd",type:Ce.fS.time,values:We,config:{}},{name:"text",type:Ce.fS.string,values:qe,config:{}}],length:De.length}}let _e=100;class Je extends c.CK{constructor(Qe){super(Qe),this.annotations={QueryEditor:Se,prepareAnnotation(tt){return tt.target=tt.target??{type:tt.type??T._$.Dashboard,limit:tt.limit??100,tags:tt.tags??[],matchAny:tt.matchAny??!1},tt},prepareQuery(tt){let lt;if((0,t.isString)(tt.datasource)){const We=(0,y.p)(tt.datasource,{returnDefaultAsNull:!1});We&&(lt=We)}else lt=tt.datasource;const{filter:Me,...De}=tt;return{...De,refId:tt.name,queryType:T.hR.Annotations,datasource:lt}}}}getDefaultQuery(){return{queryType:T.hR.RandomWalk}}query(Qe){const tt=[],lt=[],Me=(0,h.J)();for(const De of Qe.targets){if(De.queryType===T.hR.Annotations)return(0,n.D)(this.getAnnotations({range:Qe.range,rangeRaw:Qe.range.raw,annotation:De,dashboard:(0,E.h4)().getCurrent()}));if(!De.hide){if(De.queryType===T.hR.Snapshot){tt.push((0,i.of)({data:(De.snapshot??[]).map(We=>(0,m.vP)(We)),state:d.Gu.Done}));continue}if(De.queryType===T.hR.TimeRegions){const We=we("",De.timeRegion,Qe.range,Qe.timezone);tt.push((0,i.of)({data:We?[We]:[],state:d.Gu.Done}));continue}if(De.queryType===T.hR.LiveMeasurements){let We=Me.replace(De.channel,Qe.scopedVars);const{filter:qe}=De,st=(0,o.H7)(We);if(!(0,o.nU)(st))continue;const dt={maxLength:Qe.maxDataPoints??500};De.buffer?(dt.maxDelta=De.buffer,dt.maxLength=dt.maxLength*2):Qe.rangeRaw?.to==="now"&&(dt.maxDelta=Qe.range.to.valueOf()-Qe.range.from.valueOf()),tt.push((0,f.gj)().getDataStream({key:`${Qe.requestId}.${_e++}`,addr:st,filter:qe,buffer:dt}))}else De.queryType||(De.queryType=T.hR.RandomWalk),lt.push(De)}}return lt.length&&tt.push(super.query({...Qe,targets:lt})),tt.length?tt.length===1?tt[0]:(0,s.T)(...tt):(0,i.of)()}listFiles(Qe){return this.query({targets:[{refId:"A",queryType:T.hR.List,path:Qe}]}).pipe((0,r.U)(tt=>{const lt=tt.data[0]??new l.v;return new a.U(lt)}))}metricFindQuery(Qe){return Promise.resolve([])}async getAnnotations(Qe){const tt=Qe.annotation.target;if(tt?.queryType===T.hR.TimeRegions){const qe=we(Qe.annotation.name,tt.timeRegion,Qe.range,(0,E.h4)().getCurrent()?.timezone);return Promise.resolve({data:qe?[qe]:[]})}const lt=Qe.annotation,Me=lt.target,De={from:Qe.range.from.valueOf(),to:Qe.range.to.valueOf(),limit:Me.limit,tags:Me.tags,matchAny:Me.matchAny};if(Me.type===T._$.Dashboard){if(!Qe.dashboard.uid)return Promise.resolve({data:[]});De.dashboardUID=Qe.dashboard.uid,delete De.tags}else{if(!Array.isArray(Me.tags)||Me.tags.length===0)return Promise.resolve({data:[]});const qe=(0,h.J)(),st="__delimiter__",dt=[];for(const Tt of De.tags){const Nt=qe.replace(Tt,{},Bt=>typeof Bt=="string"?Bt:Bt.join(st));for(const Bt of Nt.split(st))dt.push(Bt)}De.tags=dt}const We=await(0,b.i)().get("/api/annotations",De,`grafana-data-source-annotations-${lt.name}-${Qe.dashboard?.uid}`);return{data:[(0,g.g0)(We)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Ue(){return await(0,v.F)().get("-- Grafana --")}},89050:(j,I,e)=>{"use strict";e.d(I,{_$:()=>s,hR:()=>t,ip:()=>i,wi:()=>n});var t=(r=>(r.LiveMeasurements="measurements",r.Annotations="annotations",r.Snapshot="snapshot",r.TimeRegions="timeRegions",r.RandomWalk="randomWalk",r.List="list",r.Read="read",r.Search="search",r))(t||{});const n={refId:"A",queryType:"randomWalk"},i={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var s=(r=>(r.Dashboard="dashboard",r.Tags="tags",r))(s||{})},75506:(j,I,e)=>{"use strict";e.d(I,{F:()=>d,k:()=>l});var t=e(66784),n=e(5933),i=e(22513),s=e(40397),r=e(43620),m=e(89050);function d(a,g){return new Promise(c=>{if(a.datasource?.uid===i.JY){o(g,a),c(!0);return}n.Z.publish(new r.VJ({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{o(g,a),c(!0)},onDismiss:()=>{c(!1)}}))})}function o(a,g){const c=a.map(f=>(0,t.Y)(f)),h={refId:"A",queryType:m.hR.Snapshot,snapshot:c,datasource:{uid:i.JY}};g.updateQueries({dataSource:{uid:i.JY},queries:[h]}),g.refresh()}function l(a){return(g,c,h)=>{s.eM(g).subscribe(async f=>{const b=[];f.dataFrames.forEach(v=>{const y=(0,t.Y)(v);b.push(y)}),a({...m.ip,snapshot:b,file:f.file},c)})}}},10315:(j,I,e)=>{"use strict";e.d(I,{Wp:()=>m,c6:()=>o,xM:()=>s});var t=e(72164),n=e(29241),i=e(28382);function s(l){const a=l.spans.map(c=>r(c,l.processes)),g=new t.v({fields:[{name:"traceID",type:n.fS.string},{name:"spanID",type:n.fS.string},{name:"parentSpanID",type:n.fS.string},{name:"operationName",type:n.fS.string},{name:"serviceName",type:n.fS.string},{name:"serviceTags",type:n.fS.other},{name:"startTime",type:n.fS.number},{name:"duration",type:n.fS.number},{name:"logs",type:n.fS.other},{name:"tags",type:n.fS.other},{name:"warnings",type:n.fS.other},{name:"stackTraces",type:n.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const c of a)g.add(c);return g}function r(l,a){return{spanID:l.spanID,traceID:l.traceID,parentSpanID:l.references?.find(g=>g.refType==="CHILD_OF")?.spanID,operationName:l.operationName,startTime:l.startTime/1e3,duration:l.duration/1e3,logs:l.logs.map(g=>({...g,timestamp:g.timestamp/1e3})),tags:l.tags,warnings:l.warnings??void 0,stackTraces:l.stackTraces,serviceName:a[l.processID].serviceName,serviceTags:a[l.processID].tags}}function m(l,a){const g=new t.v({fields:[{name:"traceID",type:n.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:a.uid,datasourceName:a.name,query:{query:"${__value.raw}"}}}]}},{name:"traceName",type:n.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:n.fS.time,config:{displayNameFromDS:"Start time"}},{name:"duration",type:n.fS.number,config:{displayNameFromDS:"Duration",unit:"\xB5s"}}],meta:{preferredVisualisationType:"table"}}),c=l.map(d).sort((h,f)=>f?.startTime-h?.startTime);for(const h of c)g.add(h);return g}function d(l){const a=(0,i.transformTraceData)(l);if(a)return{traceID:a.traceID,startTime:a.startTime/1e3,duration:a.duration,traceName:a.traceName}}function o(l){let a={traceID:"",spans:[],processes:{},warnings:null},g=[];for(let c=0;c<l.length;c++){const h=l.get(c);a.traceID||(a.traceID=h.traceID),g.find(f=>f===h.serviceName)||(g.push(h.serviceName),a.processes[`p${g.length}`]={serviceName:h.serviceName,tags:h.serviceTags}),a.spans.push({traceID:h.traceID,spanID:h.spanID,duration:h.duration*1e3,references:h.parentSpanID?[{refType:"CHILD_OF",spanID:h.parentSpanID,traceID:h.traceID}]:[],flags:0,logs:h.logs.map(f=>({...f,timestamp:f.timestamp*1e3})),operationName:h.operationName,processID:Object.keys(a.processes).find(f=>a.processes[f].serviceName===h.serviceName)||"",startTime:h.startTime*1e3,tags:h.tags,warnings:h.warnings?h.warnings:null})}return{data:[a],total:0,limit:0,offset:0,errors:null}}},62434:(j,I,e)=>{"use strict";e.d(I,{$5:()=>t,EH:()=>s,Rd:()=>i,ZP:()=>l,md:()=>r,r8:()=>m,uR:()=>n,xY:()=>o});const t=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],n=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],i=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],s=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],r=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],m=[...t,...s,...r],d=[...m,...i,...n].map(a=>a.label),o={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...n,...i].map(a=>a.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${m.map(a=>a.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},l=o},32159:(j,I,e)=>{"use strict";e.d(I,{D:()=>v,w:()=>y});var t=e(89949),n=e.n(t),i=e(45383),s=e(91053),r=e(89707),m=e(22479),d=e(39343),o=e(28037),l=e(56469),a=e(29655),g=e(60115),c=e(68246),h=e(53933),f=e(10864),b=e(40545);const v="-- Mixed --";class y extends c.MF{constructor(u){super(u)}query(u){const D=u.targets.filter(x=>x.datasource?.uid!==v);if(!D.length)return(0,i.of)({data:[]});const P=(0,t.groupBy)(D,"datasource.uid"),S=[];for(const x in P){const M=P[x];S.push({datasource:(0,f.F)().get(M[0].datasource,u.scopedVars),targets:M})}return S.length?this.batchQueries(S,u):(0,i.of)({data:[]})}batchQueries(u,D){const P=u.filter(this.isQueryable).map((S,x)=>(0,s.D)(S.datasource).pipe((0,m.z)(M=>{const R=(0,t.cloneDeep)(D);return R.requestId=`mixed-${x}-${R.requestId||""}`,R.targets=S.targets,(0,s.D)(M.query(R)).pipe((0,d.U)(O=>({...O,data:O.data||[],state:h.Gu.Loading,key:`mixed-${x}-${O.key||""}`})),(0,o.q)(),(0,l.K)(O=>(O=(0,b.P)(O),O.message=`${M.name}: ${O.message}`,(0,i.of)([{data:[],state:h.Gu.Error,error:O,key:`mixed-${x}-${R.requestId||""}`}]))))})));return(0,r.D)(P).pipe(E(),(0,d.U)(this.finalizeResponses),(0,a.J)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(u){return u&&Array.isArray(u.targets)&&u.targets.length>0}finalizeResponses(u){const{length:D}=u;if(D===0)return u;const P=u.find(S=>S.state===h.Gu.Error);return P?u.push(P):u[D-1].state=h.Gu.Done,u}}function E(){return(0,g.u)((C,u)=>u.reduce((D,P)=>(D.push.apply(D,P),D),C),[])}},85085:(j,I,e)=>{"use strict";e.d(I,{F:()=>s});var t=e(23419),n=e(85400),i=e(84848);function s(l,a,g,c="="){if(!a||!g)throw new Error("Need label to add to query.");const h=r(l);if(!h.length)return l;const f=m(a,g,c);return d(l,h,f)}function r(l){const a=t.E2.parse(l),g=[];return a.iterate({enter:({to:c,from:h,type:f})=>{if(f.id===t.m6){const b=(0,i._)(l.substring(h,c));return g.push({query:b.query,from:h,to:c}),!1}}}),g}function m(l,a,g){const c=a===1/0?"+Inf":a.toString();return{label:l,op:g,value:c}}function d(l,a,g){const c=new n.K;let h="",f=0;for(let b=0;b<a.length;b++){const v=a[b],y=b===a.length-1,E=l.substring(f,v.from),C=y?l.substring(v.to):"";o(v.query.labels,g)||v.query.labels.push(g);const u=c.renderQuery(v.query);h+=E+u+C,f=v.to}return h}function o(l,a){return l.find(g=>g.label===a.label&&g.value===a.value)}},95054:(j,I,e)=>{"use strict";e.d(I,{ZP:()=>A});var t=e(42844),n=e(6570),i=e(27702),s=e(32053),r=e(86312),m=e(45485),d=e(54916),o=e(73453),l=e(66670),a=e(66310),g=e(74273);function c(z){return typeof z=="object"&&z!==null&&"isCanceled"in z}const h=z=>{let H=!1;return{promise:new Promise((X,te)=>{const oe={isCanceled:!0};z.then(Z=>H?te(oe):X(Z)),z.catch(Z=>te(H?oe:Z))}),cancel(){H=!0}}};var f=e(73308),b=e(25472),v=e(80402),y=e(52419),E=e(64022),C=e(79978),u=e(1128),D=e(36162);const P="{}",S="__name__",x=25;function M(z){let H="";const Q=[];for(const X of z)if((X.name===S||X.selected)&&X.values&&X.values.length>0){const te=X.values.filter(oe=>oe.selected).map(oe=>oe.name);te.length>1?Q.push(`${X.name}=~"${te.map(f.tU).join("|")}"`):te.length===1&&(X.name===S?H=te[0]:Q.push(`${X.name}="${(0,f.U9)(te[0])}"`))}return[H,"{",Q.join(","),"}"].join("")}function R(z,H,Q){return z.map(X=>{const te=H[X.name];if(te){let oe;if(X.name===Q&&X.values)oe=X.values;else{const Z=new Set(X.values?.filter(le=>le.selected).map(le=>le.name)||[]);oe=te.map(le=>({name:le,selected:Z.has(le)}))}return{...X,loading:!1,values:oe,hidden:!te,facets:oe.length}}return{...X,loading:!1,hidden:!te,values:void 0,facets:0}})}const O=(0,v.B)(z=>({wrapper:(0,t.css)`
    background-color: ${z.colors.background.secondary};
    padding: ${z.spacing(1)};
    width: 100%;
  `,list:(0,t.css)`
    margin-top: ${z.spacing(1)};
    display: flex;
    flex-wrap: wrap;
    max-height: 200px;
    overflow: auto;
    align-content: flex-start;
  `,section:(0,t.css)`
    & + & {
      margin: ${z.spacing(2)} 0;
    }
    position: relative;
  `,selector:(0,t.css)`
    font-family: ${z.typography.fontFamilyMonospace};
    margin-bottom: ${z.spacing(1)};
  `,status:(0,t.css)`
    padding: ${z.spacing(.5)};
    color: ${z.colors.text.secondary};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* using absolute positioning because flex interferes with ellipsis */
    position: absolute;
    width: 50%;
    right: 0;
    text-align: right;
    transition: opacity 100ms linear;
    opacity: 0;
  `,statusShowing:(0,t.css)`
    opacity: 1;
  `,error:(0,t.css)`
    color: ${z.colors.error.main};
  `,valueList:(0,t.css)`
    margin-right: ${z.spacing(1)};
    resize: horizontal;
  `,valueListWrapper:(0,t.css)`
    border-left: 1px solid ${z.colors.border.medium};
    margin: ${z.spacing(1)} 0;
    padding: ${z.spacing(1)} 0 ${z.spacing(1)} ${z.spacing(1)};
  `,valueListArea:(0,t.css)`
    display: flex;
    flex-wrap: wrap;
    margin-top: ${z.spacing(1)};
  `,valueTitle:(0,t.css)`
    margin-left: -${z.spacing(.5)};
    margin-bottom: ${z.spacing(1)};
  `,validationStatus:(0,t.css)`
    padding: ${z.spacing(.5)};
    margin-bottom: ${z.spacing(1)};
    color: ${z.colors.text.maxContrast};
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `}));class T extends i.Component{constructor(){super(...arguments),this.valueListsRef=i.createRef(),this.state={labels:[],labelSearchTerm:"",metricSearchTerm:"",status:"Ready",error:"",validationStatus:"",valueSearchTerm:""},this.onChangeLabelSearch=H=>{this.setState({labelSearchTerm:H.target.value})},this.onChangeMetricSearch=H=>{this.setState({metricSearchTerm:H.target.value})},this.onChangeValueSearch=H=>{this.setState({valueSearchTerm:H.target.value})},this.onClickRunQuery=()=>{const H=M(this.state.labels);this.props.onChange(H)},this.onClickRunRateQuery=()=>{const Q=`rate(${M(this.state.labels)}[$__rate_interval])`;this.props.onChange(Q)},this.onClickClear=()=>{this.setState(H=>({labels:H.labels.map(X=>({...X,values:void 0,selected:!1,loading:!1,hidden:!1,facets:void 0})),labelSearchTerm:"",metricSearchTerm:"",status:"",error:"",validationStatus:"",valueSearchTerm:""})),this.props.deleteLastUsedLabels(),this.fetchValues(S,P)},this.onClickLabel=(H,Q,X)=>{const te=this.state.labels.find(le=>le.name===H);if(!te)return;const oe=!te.selected;let Z={selected:oe};if(te.values&&!oe){const le=te.values.map(ce=>({...ce,selected:!1}));Z={...Z,facets:0,values:le}}this.setState({labelSearchTerm:""}),this.updateLabelState(H,Z,"",()=>this.doFacettingForLabel(H))},this.onClickValue=(H,Q,X)=>{const te=this.state.labels.find(Z=>Z.name===H);if(!te||!te.values)return;this.setState({labelSearchTerm:""});const oe=te.values.map(Z=>({...Z,selected:Z.name===Q?!Z.selected:Z.selected}));this.updateLabelState(H,{values:oe},"",()=>this.doFacetting(H))},this.onClickMetric=(H,Q,X)=>{const te=this.state.labels.find(le=>le.name===H);if(!te||!te.values)return;this.setState({metricSearchTerm:""});const oe=te.values.map(le=>({...le,selected:le.name===Q||le.selected?!le.selected:le.selected})),Z=oe.some(le=>le.selected);this.updateLabelState(H,{selected:Z,values:oe},"",()=>this.doFacetting(H))},this.onClickValidate=()=>{const H=M(this.state.labels);this.validateSelector(H)},this.doFacetting=H=>{const Q=M(this.state.labels);if(Q===P){const X=this.state.labels.map(te=>({...te,facets:0,values:void 0,hidden:!1}));this.setState({labels:X},()=>{this.state.labels.forEach(te=>(te.selected||te.name===S)&&this.fetchValues(te.name,Q))})}else this.fetchSeries(Q,H)}}updateLabelState(H,Q,X="",te){this.setState(oe=>{const Z=oe.labels.map(ce=>ce.name===H?{...ce,...Q}:ce),le=X?"":oe.error;return{labels:Z,status:X,error:le,validationStatus:""}},te)}componentDidMount(){const{languageProvider:H,lastUsedLabels:Q}=this.props;if(H){const X=Q;H.start().then(()=>{let te=H.getLabelKeys();this.fetchValues(S,P);const oe=te.map((Z,le,ce)=>({name:Z,selected:X.includes(Z),loading:!1}));this.setState({labels:oe},()=>{this.state.labels.forEach(Z=>{Z.selected&&this.fetchValues(Z.name,P)})})})}}doFacettingForLabel(H){const Q=this.state.labels.find(te=>te.name===H);if(!Q)return;const X=this.state.labels.filter(te=>te.selected).map(te=>te.name);this.props.storeLastUsedLabels(X),Q.selected?Q.values||this.fetchValues(H,M(this.state.labels)):this.doFacetting()}async fetchValues(H,Q){const{languageProvider:X}=this.props;this.updateLabelState(H,{loading:!0},`Fetching values for ${H}`);try{let te=await X.getLabelValues(H);if(Q!==M(this.state.labels)){this.updateLabelState(H,{loading:!1});return}const oe=[],{metricsMetadata:Z}=X;for(const le of te){const ce={name:le};if(H===S&&Z){const q=Z[le];q&&(ce.details=`(${q.type}) ${q.help}`)}oe.push(ce)}this.updateLabelState(H,{values:oe,loading:!1})}catch(te){console.error(te)}}async fetchSeries(H,Q){const{languageProvider:X}=this.props;Q&&this.updateLabelState(Q,{loading:!0},`Facetting labels for ${H}`);try{const te=await X.fetchSeriesLabels(H,!0);if(H!==M(this.state.labels)){Q&&this.updateLabelState(Q,{loading:!1});return}if(Object.keys(te).length===0){this.setState({error:`Empty results, no matching label for ${H}`});return}const oe=R(this.state.labels,te,Q);this.setState({labels:oe,error:""}),Q&&this.updateLabelState(Q,{loading:!1})}catch(te){console.error(te)}}async validateSelector(H){const{languageProvider:Q}=this.props;this.setState({validationStatus:`Validating selector ${H}`,error:""});const X=await Q.fetchSeries(H);this.setState({validationStatus:`Selector is valid (${X.length} series found)`})}render(){const{theme:H}=this.props,{labels:Q,labelSearchTerm:X,metricSearchTerm:te,status:oe,error:Z,validationStatus:le,valueSearchTerm:ce}=this.state,q=O(H);if(Q.length===0)return i.createElement("div",{className:q.wrapper},i.createElement(y.u,{text:"Loading labels..."}));let ne=Q.find(Ce=>Ce.name===S);ne&&te&&(ne={...ne,values:ne.values?.filter(Ce=>Ce.selected||Ce.name.includes(te))});let pe=Q.filter(Ce=>!Ce.hidden&&Ce.name!==S);X&&(pe=pe.filter(Ce=>Ce.selected||Ce.name.includes(X)));let re=pe.filter(Ce=>Ce.selected&&Ce.values);ce&&(re=re.map(Ce=>({...Ce,values:Ce.values?.filter(de=>de.selected||de.name.includes(ce))})));const ie=M(this.state.labels),Se=ie===P,ye=ne?.values?.length||0;return i.createElement("div",{className:q.wrapper},i.createElement(E.Lh,{align:"flex-start",spacing:"lg"},i.createElement("div",null,i.createElement("div",{className:q.section},i.createElement(C._,{description:"Once a metric is selected only possible labels are shown."},"1. Select a metric"),i.createElement("div",null,i.createElement(u.I,{onChange:this.onChangeMetricSearch,"aria-label":"Filter expression for metric",value:te})),i.createElement("div",{role:"list",className:q.valueListWrapper},i.createElement(b.t7,{height:Math.min(450,ye*x),itemCount:ye,itemSize:x,itemKey:Ce=>ne.values[Ce].name,width:300,className:q.valueList},({index:Ce,style:de})=>{const we=ne?.values?.[Ce];return we?i.createElement("div",{style:de},i.createElement(D._,{name:ne.name,value:we?.name,title:we.details,active:we?.selected,onClick:this.onClickMetric,searchTerm:te})):null})))),i.createElement("div",null,i.createElement("div",{className:q.section},i.createElement(C._,{description:"Once label values are selected, only possible label combinations are shown."},"2. Select labels to search in"),i.createElement("div",null,i.createElement(u.I,{onChange:this.onChangeLabelSearch,"aria-label":"Filter expression for label",value:X})),i.createElement("div",{className:q.list,style:{height:120}},pe.map(Ce=>i.createElement(D._,{key:Ce.name,name:Ce.name,loading:Ce.loading,active:Ce.selected,hidden:Ce.hidden,facets:Ce.facets,onClick:this.onClickLabel,searchTerm:X})))),i.createElement("div",{className:q.section},i.createElement(C._,{description:"Use the search field to find values across selected labels."},"3. Select (multiple) values for your labels"),i.createElement("div",null,i.createElement(u.I,{onChange:this.onChangeValueSearch,"aria-label":"Filter expression for label values",value:ce})),i.createElement("div",{className:q.valueListArea,ref:this.valueListsRef},re.map(Ce=>i.createElement("div",{role:"list",key:Ce.name,"aria-label":`Values for ${Ce.name}`,className:q.valueListWrapper},i.createElement("div",{className:q.valueTitle},i.createElement(D._,{name:Ce.name,loading:Ce.loading,active:Ce.selected,hidden:Ce.hidden,facets:Ce.facets||Ce.values?.length,onClick:this.onClickLabel})),i.createElement(b.t7,{height:Math.min(200,x*(Ce.values?.length||0)),itemCount:Ce.values?.length||0,itemSize:28,itemKey:de=>Ce.values[de].name,width:200,className:q.valueList},({index:de,style:we})=>{const _e=Ce.values?.[de];return _e?i.createElement("div",{style:we},i.createElement(D._,{name:Ce.name,value:_e?.name,active:_e?.selected,onClick:this.onClickValue,searchTerm:ce})):null}))))))),i.createElement("div",{className:q.section},i.createElement(C._,null,"4. Resulting selector"),i.createElement("div",{"aria-label":"selector",className:q.selector},ie),le&&i.createElement("div",{className:q.validationStatus},le),i.createElement(E.Lh,null,i.createElement(l.zx,{"aria-label":"Use selector for query button",disabled:Se,onClick:this.onClickRunQuery},"Use query"),i.createElement(l.zx,{"aria-label":"Use selector as metrics button",variant:"secondary",disabled:Se,onClick:this.onClickRunRateQuery},"Use as rate query"),i.createElement(l.zx,{"aria-label":"Validate submit button",variant:"secondary",disabled:Se,onClick:this.onClickValidate},"Validate selector"),i.createElement(l.zx,{"aria-label":"Selector clear button",variant:"secondary",onClick:this.onClickClear},"Clear"),i.createElement("div",{className:(0,t.cx)(q.status,(oe||Z)&&q.statusShowing)},i.createElement("span",{className:Z?q.error:""},Z||oe)))))}}const U=(0,a.HE)(T),L=i.lazy(()=>e.e(6031).then(e.bind(e,6911))),V=z=>i.createElement(i.Suspense,{fallback:null},i.createElement(L,{...z})),w=z=>{const H=(0,i.useRef)(null),{onRunQuery:Q,onChange:X,...te}=z,oe=ce=>{H.current=ce,X(ce),Q()},Z=ce=>{X(ce)},le=ce=>{X(ce)};return i.createElement(V,{onChange:le,onRunQuery:oe,onBlur:Z,...te})},K="__recording_rules__",B="grafana.datasources.prometheus.browser.labels";function W(z,H,Q){return z?"(Disabled)":H?Q?"Metrics browser":"(No metrics found)":"Loading metrics..."}function _(z,{typeaheadContext:H,typeaheadText:Q}){switch(H){case"context-labels":{const X=DOMUtil.getNextCharacter();(!X||X==="}"||X===",")&&(z+="=");break}case"context-label-values":{Q.match(/^(!?=~?"|")/)||(z=`"${z}`),DOMUtil.getNextCharacter()!=='"'&&(z=`${z}"`);break}default:}return z}class k extends i.PureComponent{constructor(H,Q){super(H,Q),this.refreshHint=()=>{const{datasource:X,query:te,data:oe}=this.props,Z=X.getInitHints(),le=Z.length>0?Z[0]:null;if(!oe||oe.series.length===0){this.setState({hint:le});return}const ce=(0,s.aY)(oe.series[0])?oe.series.map(s.Zr):oe.series,q=X.getQueryHints(te,ce);let ne=q.length>0?q[0]:null;this.setState({hint:ne??le})},this.refreshMetrics=async()=>{const{datasource:{languageProvider:X}}=this.props;this.languageProviderInitializationPromise=h(X.start());try{const te=await this.languageProviderInitializationPromise.promise;await Promise.all(te),this.onUpdateLanguage()}catch(te){if(!(c(te)&&te.isCanceled))throw te}},this.onChangeLabelBrowser=X=>{this.onChangeQuery(X,!0),this.setState({labelBrowserVisible:!1})},this.onChangeQuery=(X,te)=>{const{query:oe,onChange:Z,onRunQuery:le}=this.props;if(Z){const ce={...oe,expr:X};Z(ce),te&&le&&le()}},this.onClickChooserButton=()=>{this.setState(X=>({labelBrowserVisible:!X.labelBrowserVisible})),(0,r.ff)("user_grafana_prometheus_metrics_browser_clicked",{editorMode:this.state.labelBrowserVisible?"metricViewClosed":"metricViewOpen",app:this.props?.app??""})},this.onClickHintFix=()=>{const{datasource:X,query:te,onChange:oe,onRunQuery:Z}=this.props,{hint:le}=this.state;le?.fix?.action&&oe(X.modifyQuery(te,le.fix.action)),Z()},this.onUpdateLanguage=()=>{const{datasource:{languageProvider:X}}=this.props,{metrics:te}=X;te&&this.setState({syntaxLoaded:!0})},this.onTypeahead=async X=>{const{datasource:{languageProvider:te}}=this.props;if(!te)return{suggestions:[]};const{history:oe}=this.props,{prefix:Z,text:le,value:ce,wrapperClasses:q,labelKey:ne}=X;return await te.provideCompletionItems({text:le,value:ce,prefix:Z,wrapperClasses:q,labelKey:ne},{history:oe})},this.plugins=[(0,m.h)(),(0,d.Z)({onlyIn:X=>X.type==="code_block",getSyntax:X=>"promql"},{...n.languages,promql:this.props.datasource.languageProvider.syntax})],this.state={labelBrowserVisible:!1,syntaxLoaded:!1,hint:null}}componentDidMount(){this.props.datasource.languageProvider&&this.refreshMetrics(),this.refreshHint()}componentWillUnmount(){this.languageProviderInitializationPromise&&this.languageProviderInitializationPromise.cancel()}componentDidUpdate(H){const{data:Q,datasource:{languageProvider:X},range:te}=this.props;X!==H.datasource.languageProvider&&this.setState({syntaxLoaded:!1});const oe=this.rangeChangedToRefresh(te,H.range);(X!==H.datasource.languageProvider||oe)&&this.refreshMetrics(),Q&&H.data&&H.data.series!==Q.series&&this.refreshHint()}rangeChangedToRefresh(H,Q){if(H&&Q){const X=(0,f.o8)(H.from.valueOf())===(0,f.o8)(Q.from.valueOf()),te=(0,f.o8)(H.to.valueOf())===(0,f.o8)(Q.to.valueOf());return!(X&&te)}return!1}render(){const{datasource:H,datasource:{languageProvider:Q},query:X,ExtraFieldElement:te,history:oe=[],theme:Z}=this.props,{labelBrowserVisible:le,syntaxLoaded:ce,hint:q}=this.state,ne=Q.metrics.length>0,pe=W(H.lookupsDisabled,ce,ne),re=!(ce&&ne);return i.createElement(g.G,{storageKey:B,defaultValue:[]},(ie,Se,ye)=>i.createElement(i.Fragment,null,i.createElement("div",{className:"gf-form-inline gf-form-inline--xs-view-flex-column flex-grow-1","data-testid":this.props["data-testid"]},i.createElement("button",{className:"gf-form-label query-keyword pointer",onClick:this.onClickChooserButton,disabled:re,type:"button"},pe,i.createElement(o.J,{name:le?"angle-down":"angle-right"})),i.createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},i.createElement(w,{languageProvider:Q,history:oe,onChange:this.onChangeQuery,onRunQuery:this.props.onRunQuery,initialValue:X.expr??"",placeholder:"Enter a PromQL query\u2026"}))),le&&i.createElement("div",{className:"gf-form"},i.createElement(U,{languageProvider:Q,onChange:this.onChangeLabelBrowser,lastUsedLabels:ie||[],storeLastUsedLabels:Se,deleteLastUsedLabels:ye})),te,q?i.createElement("div",{className:"query-row-break"},i.createElement("div",{className:"prom-query-field-info text-warning"},q.label," ",q.fix?i.createElement("button",{type:"button",className:(0,t.cx)((0,l.gN)(Z),"text-link","muted"),onClick:this.onClickHintFix},q.fix.label):null)):null))}}const A=(0,a.HE)(k)},83923:(j,I,e)=>{"use strict";e.d(I,{Z5:()=>ft,Fu:()=>yt,Zg:()=>ct,lj:()=>Be,b0:()=>ge});var t=e(42844),n=e(27702),i=e(84923),s=e(77195),r=e(19010),m=e(66310),d=e(63439),o=e(49257),l=e(59904),a=e(12308),g=e(78102),c=e(34667),h=e(48024),f=e(42074);function b({options:Le,onOptionsChange:he}){const He=(0,m.l4)(),Pe=Be(He),Ie=c.config.featureToggles.prometheusConfigOverhaulAuth;return n.createElement(g._,{title:"Alerting",className:(0,t.cx)(Pe.container,{[Pe.alertingTop]:Ie})},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{labelWidth:30,label:"Manage alerts via Alerting UI",disabled:Le.readOnly,tooltip:n.createElement(n.Fragment,null,"Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source. ",ct()),interactive:!0,className:Pe.switchField},n.createElement(f.r,{value:Le.jsonData.manageAlerts!==!1,onChange:Te=>he({...Le,jsonData:{...Le.jsonData,manageAlerts:Te.currentTarget.checked}})}))))))}var v=e(71107),y=e(1128),E=(Le=>(Le.Public="AzureCloud",Le.China="AzureChinaCloud",Le.USGovernment="AzureUSGovernment",Le.None="",Le))(E||{});const C=[{value:"AzureCloud",label:"Azure"},{value:"AzureChinaCloud",label:"Azure China"},{value:"AzureUSGovernment",label:"Azure US Government"}];function u(Le){switch(Le.authType){case"msi":return!0;case"clientsecret":return!!(Le.azureCloud&&Le.tenantId&&Le.clientId&&Le.clientSecret)}}const D=Symbol("Concealed client secret");function P(){return c.config.azure.cloud||E.Public}function S(Le){if(Le.secureJsonFields.azureClientSecret)return D;{const he=Le.secureJsonData?.azureClientSecret;return typeof he=="string"&&he.length>0?he:void 0}}function x(Le){return!!Le.jsonData.azureCredentials}function M(){return c.config.azure.managedIdentityEnabled?{authType:"msi"}:{authType:"clientsecret",azureCloud:P()}}function R(Le){const he=Le.jsonData.azureCredentials;if(!he)return M();switch(he.authType){case"msi":return c.config.azure.managedIdentityEnabled?{authType:"msi"}:{authType:"clientsecret",azureCloud:P()};case"clientsecret":return{authType:"clientsecret",azureCloud:he.azureCloud||P(),tenantId:he.tenantId,clientId:he.clientId,clientSecret:S(Le)}}}function O(Le,he){switch(he.authType){case"msi":if(!c.config.azure.managedIdentityEnabled)throw new Error("Managed Identity authentication is not enabled in Grafana config.");return Le={...Le,jsonData:{...Le.jsonData,azureCredentials:{authType:"msi"}}},Le;case"clientsecret":return Le={...Le,jsonData:{...Le.jsonData,azureCredentials:{authType:"clientsecret",azureCloud:he.azureCloud||P(),tenantId:he.tenantId,clientId:he.clientId}},secureJsonData:{...Le.secureJsonData,azureClientSecret:typeof he.clientSecret=="string"&&he.clientSecret.length>0?he.clientSecret:void 0},secureJsonFields:{...Le.secureJsonFields,azureClientSecret:typeof he.clientSecret=="symbol"}},Le}}function T(Le){return{jsonData:{...Le.jsonData,azureCredentials:M()}}}function U(Le){return{jsonData:{...Le.jsonData,azureAuth:void 0,azureCredentials:void 0,azureEndpointResourceId:void 0}}}var L=e(60644),V=e(66670),w=e(83670),K=e(49918);const B=[{value:"msi",label:"Managed Identity"},{value:"clientsecret",label:"App Registration"}],W=Le=>{const{credentials:he,azureCloudOptions:He,onCredentialsChange:Pe,getSubscriptions:Ie,disabled:Te}=Le,Re=u(he),[ue,xe]=(0,n.useState)([]),[Ve,Ne]=(0,n.useReducer)(ht=>ht+1,0);(0,n.useEffect)(()=>{if(!Ie||!Re){fe([]);return}let ht=!1;return Ie().then(wt=>{ht||fe(wt,Ve)}),()=>{ht=!0}},[Ve]);const fe=(ht,wt=!1)=>{xe(ht),Ie&&(wt&&!he.defaultSubscriptionId&&ht.length>0?Xe(ht[0]):he.defaultSubscriptionId&&(ht.find(vn=>vn.value===he.defaultSubscriptionId)||Xe(void 0)))},ve=ht=>{if(Pe){xe([]);const wt={...he,authType:ht.value||"msi",defaultSubscriptionId:void 0};Pe(wt)}},ze=ht=>{if(Pe&&he.authType==="clientsecret"){xe([]);const wt={...he,azureCloud:ht.value,defaultSubscriptionId:void 0};Pe(wt)}},Oe=ht=>{if(Pe&&he.authType==="clientsecret"){xe([]);const wt={...he,tenantId:ht.target.value,defaultSubscriptionId:void 0};Pe(wt)}},Fe=ht=>{if(Pe&&he.authType==="clientsecret"){xe([]);const wt={...he,clientId:ht.target.value,defaultSubscriptionId:void 0};Pe(wt)}},Ge=ht=>{if(Pe&&he.authType==="clientsecret"){xe([]);const wt={...he,clientSecret:ht.target.value,defaultSubscriptionId:void 0};Pe(wt)}},nt=()=>{if(Pe&&he.authType==="clientsecret"){xe([]);const ht={...he,clientSecret:"",defaultSubscriptionId:void 0};Pe(ht)}},Xe=ht=>{if(Pe){const wt={...he,defaultSubscriptionId:ht?.value};Pe(wt)}},ut=c.config.featureToggles.prometheusConfigOverhaulAuth;return n.createElement("div",{className:"gf-form-group"},Le.managedIdentityEnabled&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(L.c,{className:"width-12",tooltip:"Choose the type of authentication to Azure services"},"Authentication"),n.createElement(K.Ph,{className:"width-15",value:B.find(ht=>ht.value===he.authType),options:B,onChange:ve,isDisabled:Te}))),he.authType==="clientsecret"&&n.createElement(n.Fragment,null,He&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(L.c,{className:"width-12",tooltip:"Choose an Azure Cloud"},"Azure Cloud"),n.createElement(K.Ph,{className:"width-15",value:He.find(ht=>ht.value===he.azureCloud),options:He,onChange:ze,isDisabled:Te}))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(L.c,{className:"width-12"},"Directory (tenant) ID"),n.createElement("div",{className:"width-15"},n.createElement(w.I,{className:(0,t.cx)(ut?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:he.tenantId||"",onChange:Oe,disabled:Te})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(L.c,{className:"width-12"},"Application (client) ID"),n.createElement("div",{className:"width-15"},n.createElement(w.I,{className:(0,t.cx)(ut?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:he.clientId||"",onChange:Fe,disabled:Te})))),typeof he.clientSecret=="symbol"?n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(L.c,{htmlFor:"azure-client-secret",className:"width-12"},"Client Secret"),n.createElement(w.I,{id:"azure-client-secret",className:(0,t.cx)(ut?"width-20":"width-25"),placeholder:"configured",disabled:!0})),!Te&&n.createElement("div",{className:"gf-form"},n.createElement("div",{className:(0,t.cx)(ut?"max-width-20 gf-form-inline":"max-width-30 gf-form-inline")},n.createElement(V.zx,{variant:"secondary",type:"button",onClick:nt},"reset")))):n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(L.c,{className:"width-12"},"Client Secret"),n.createElement("div",{className:"width-15"},n.createElement(w.I,{className:(0,t.cx)(ut?"width-20":"width-30"),placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",value:he.clientSecret||"",onChange:Ge,disabled:Te}))))),Ie&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(L.c,{className:"width-12"},"Default Subscription"),n.createElement("div",{className:(0,t.cx)(ut?"width-20":"width-25")},n.createElement(K.Ph,{value:he.defaultSubscriptionId?ue.find(ht=>ht.value===he.defaultSubscriptionId):void 0,options:ue,onChange:Xe,isDisabled:Te})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement("div",{className:"max-width-30 gf-form-inline"},n.createElement(V.zx,{variant:"secondary",size:"sm",type:"button",onClick:Ne,disabled:!Re},"Load Subscriptions"))))))},_=null,k=Le=>{const{dataSourceConfig:he,onChange:He}=Le,[Pe,Ie]=(0,n.useState)(!!he.jsonData.azureEndpointResourceId),Te=(0,n.useMemo)(()=>R(he),[he]),Re=fe=>{He(O(he,fe))},ue=fe=>{Ie(fe.currentTarget.checked),fe.currentTarget.checked||He({...he,jsonData:{...he.jsonData,azureEndpointResourceId:void 0}})},xe=fe=>{Pe&&He({...he,jsonData:{...he.jsonData,azureEndpointResourceId:fe.currentTarget.value}})},Ve=c.config.featureToggles.prometheusConfigOverhaulAuth,Ne=Ve?24:26;return n.createElement(n.Fragment,null,n.createElement("h6",null,"Azure authentication"),n.createElement(W,{managedIdentityEnabled:c.config.azure.managedIdentityEnabled,credentials:Te,azureCloudOptions:C,onCredentialsChange:Re,disabled:he.readOnly}),n.createElement("h6",null,"Azure configuration"),n.createElement("div",{className:"gf-form-group"},n.createElement(v.Z,null,n.createElement(h._,{labelWidth:Ne,label:"Override AAD audience",disabled:he.readOnly},n.createElement(f.x,{value:Pe,onChange:ue}))),Pe&&n.createElement(v.Z,null,n.createElement(h._,{labelWidth:Ne,label:"Resource ID",disabled:he.readOnly},n.createElement(y.I,{className:(0,t.cx)(Ve?"width-20":"width-30"),value:he.jsonData.azureEndpointResourceId||"",onChange:xe})))))},A=null;var z=e(83320),H=e(9058),Q=e(36859),X=e(79510);const te=Le=>{const{options:he,onOptionsChange:He,azureAuthSettings:Pe,sigV4AuthToggleEnabled:Ie,renderSigV4Editor:Te,secureSocksDSProxyEnabled:Re}=Le,ue=(0,z.T2)({config:he,onChange:He}),xe=(0,m.l4)(),Ve=Be(xe);let Ne=[];const[fe,ve]=(0,n.useState)(he.jsonData.sigV4Auth||!1),ze="custom-sigV4Id",Oe={id:ze,label:"SigV4 auth",description:"This is SigV4 auth description",component:n.createElement(n.Fragment,null,Te)};Ie&&Ne.push(Oe);const Fe=(0,n.useCallback)(vn=>{He({...he,...vn})},[he,He]),Ge=Pe?.azureAuthSupported&&Pe.getAzureAuthEnabled(he)||!1,[nt,Xe]=(0,n.useState)(Ge),ut="custom-azureAuthId",ht={id:ut,label:"Azure auth",description:"This is Azure auth description",component:n.createElement(n.Fragment,null,Pe.azureSettingsUI&&n.createElement(Pe.azureSettingsUI,{dataSourceConfig:he,onChange:He}))};Pe?.azureAuthSupported&&Ne.push(ht);function wt(){return fe?ze:nt?ut:ue.selectedMethod}let mn;switch(he.access){case"direct":mn=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.",ct());break;case"proxy":mn=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.",ct());break;default:mn=n.createElement(n.Fragment,null,"Specify a complete HTTP URL (for example http://your_server:8080) ",ct())}return n.createElement(n.Fragment,null,n.createElement(H.f,{urlPlaceholder:"http://localhost:9090",config:he,onChange:He,urlLabel:"Prometheus server URL",urlTooltip:mn}),n.createElement("hr",{className:`${Ve.hrTopSpace} ${Ve.hrBottomSpace}`}),n.createElement(Q.g,{...ue,customMethods:Ne,onAuthMethodSelect:vn=>{Ie&&(ve(vn===ze),Fe({jsonData:{...he.jsonData,sigV4Auth:vn===ze}})),Pe?.azureAuthSupported&&(Xe(vn===ut),Pe.setAzureAuthEnabled(he,vn===ut)),ue.onAuthMethodSelect(vn)},selectedMethod:wt()}),n.createElement("div",{className:Ve.sectionBottomPadding}),Re&&n.createElement(n.Fragment,null,n.createElement(X.i,{options:he,onOptionsChange:He}),n.createElement("div",{className:Ve.sectionBottomPadding})))};var oe=e(37865),Z=e.n(oe),le=e(17312),ce=e(73289),q=e(28580),ne=e(9906),pe=e(18447),re=e(39568),ie=e(94962),Se=e(72054),ye=e(74639),Ce=e(53229);function de({value:Le,onChange:he,onDelete:He,disabled:Pe}){const[Ie,Te]=(0,n.useState)(!!Le.datasourceUid),Re=(0,m.l4)(),ue=Be(Re);return n.createElement("div",{className:"gf-form-group"},n.createElement(h._,{label:"Internal link",labelWidth:yt,disabled:Pe,tooltip:n.createElement(n.Fragment,null,"Enable this option if you have an internal link. When enabled, this reveals the data source selector. Select the backend tracing data store for your exemplar data. ",ct()),interactive:!0,className:ue.switchField},n.createElement(n.Fragment,null,n.createElement(f.r,{value:Ie,"aria-label":ye.wl.components.DataSource.Prometheus.configPage.internalLinkSwitch,onChange:xe=>Te(xe.currentTarget.checked)}))),Ie?n.createElement(h._,{label:"Data source",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"The data source the exemplar is going to navigate to. ",ct()),disabled:Pe,interactive:!0},n.createElement(Ce.q,{tracing:!0,current:Le.datasourceUid,noDefault:!0,width:40,onChange:xe=>he({...Le,datasourceUid:xe.uid,url:void 0})})):n.createElement(h._,{label:"URL",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"The URL of the trace backend the user would go to see its trace. ",ct()),disabled:Pe,interactive:!0},n.createElement(y.I,{placeholder:"https://example.com/${__value.raw}",spellCheck:!1,width:40,value:Le.url,onChange:xe=>he({...Le,datasourceUid:void 0,url:xe.currentTarget.value})})),n.createElement(h._,{label:"URL Label",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"Use to override the button label on the exemplar traceID field. ",ct()),disabled:Pe,interactive:!0},n.createElement(y.I,{placeholder:"Go to example.com",spellCheck:!1,width:40,value:Le.urlDisplayLabel,onChange:xe=>he({...Le,urlDisplayLabel:xe.currentTarget.value})})),n.createElement(h._,{label:"Label name",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"The name of the field in the labels object that should be used to get the traceID. ",ct()),disabled:Pe,interactive:!0},n.createElement(y.I,{placeholder:"traceID",spellCheck:!1,width:40,value:Le.name,onChange:xe=>he({...Le,name:xe.currentTarget.value})})),!Pe&&n.createElement(h._,{label:"Remove exemplar link",labelWidth:yt,disabled:Pe},n.createElement(V.zx,{variant:"destructive",title:"Remove exemplar link",icon:"times",onClick:xe=>{xe.preventDefault(),He()}})))}function we({options:Le,onChange:he,disabled:He}){const Pe=(0,m.l4)(),Ie=Be(Pe);return n.createElement("div",{className:Ie.sectionBottomPadding},n.createElement(g._,{title:"Exemplars",className:Ie.container},Le&&Le.map((Te,Re)=>n.createElement(de,{key:Re,value:Te,onChange:ue=>{const xe=[...Le];xe.splice(Re,1,ue),he(xe)},onDelete:()=>{const ue=[...Le];ue.splice(Re,1),he(ue)},disabled:He})),!He&&n.createElement(V.zx,{variant:"secondary","aria-label":ye.wl.components.DataSource.Prometheus.configPage.exemplarsAddButton,className:(0,t.css)`
              margin-bottom: 10px;
            `,icon:"plus",onClick:Te=>{Te.preventDefault();const Re=[...Le||[],{name:"traceID"}];he(Re)}},"Add"),He&&!Le&&n.createElement("i",null,"No exemplars configurations")))}const _e={Prometheus:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"< 2.14.x"},{value:"2.14.0",label:"2.14.x"},{value:"2.15.0",label:"2.15.x"},{value:"2.16.0",label:"2.16.x"},{value:"2.17.0",label:"2.17.x"},{value:"2.18.0",label:"2.18.x"},{value:"2.19.0",label:"2.19.x"},{value:"2.20.0",label:"2.20.x"},{value:"2.21.0",label:"2.21.x"},{value:"2.22.0",label:"2.22.x"},{value:"2.23.0",label:"2.23.x"},{value:"2.24.0",label:"2.24.x"},{value:"2.25.0",label:"2.25.x"},{value:"2.26.0",label:"2.26.x"},{value:"2.27.0",label:"2.27.x"},{value:"2.28.0",label:"2.28.x"},{value:"2.29.0",label:"2.29.x"},{value:"2.30.0",label:"2.30.x"},{value:"2.31.0",label:"2.31.x"},{value:"2.32.0",label:"2.32.x"},{value:"2.33.0",label:"2.33.x"},{value:"2.34.0",label:"2.34.x"},{value:"2.35.0",label:"2.35.x"},{value:"2.36.0",label:"2.36.x"},{value:"2.37.0",label:"2.37.x"},{value:"2.38.0",label:"2.38.x"},{value:"2.39.0",label:"2.39.x"},{value:"2.40.0",label:"2.40.x"},{value:"2.41.0",label:"2.41.x"},{value:"2.42.0",label:"2.42.x"},{value:"2.43.0",label:"2.43.x"},{value:"2.44.0",label:"2.44.x"},{value:"2.45.0",label:"2.45.x"},{value:"2.46.0",label:"2.46.x"},{value:"2.47.0",label:"2.47.x"},{value:"2.48.0",label:"2.48.x"},{value:"2.49.0",label:"2.49.x"},{value:"2.50.0",label:"2.50.x"},{value:"2.50.1",label:"> 2.50.x"}],Mimir:[{value:void 0,label:"Please select"},{value:"2.0.0",label:"2.0.x"},{value:"2.1.0",label:"2.1.x"},{value:"2.2.0",label:"2.2.x"},{value:"2.3.0",label:"2.3.x"},{value:"2.4.0",label:"2.4.x"},{value:"2.5.0",label:"2.5.x"},{value:"2.6.0",label:"2.6.x"},{value:"2.7.0",label:"2.7.x"},{value:"2.8.0",label:"2.8.x"},{value:"2.9.0",label:"2.9.x"},{value:"2.9.1",label:"> 2.9.x"}],Thanos:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 0.16.x"},{value:"0.16.0",label:"0.16.x"},{value:"0.17.0",label:"0.17.x"},{value:"0.18.0",label:"0.18.x"},{value:"0.19.0",label:"0.19.x"},{value:"0.20.0",label:"0.20.x"},{value:"0.21.0",label:"0.21.x"},{value:"0.22.0",label:"0.22.x"},{value:"0.23.0",label:"0.23.x"},{value:"0.24.0",label:"0.24.x"},{value:"0.25.0",label:"0.25.x"},{value:"0.26.0",label:"0.26.x"},{value:"0.27.0",label:"0.27.x"},{value:"0.28.0",label:"0.28.x"},{value:"0.29.0",label:"0.29.x"},{value:"0.30.0",label:"0.30.x"},{value:"0.31.0",label:"0.31.x"},{value:"0.31.1",label:"> 0.31.x"}],Cortex:[{value:void 0,label:"Please select"},{value:"0.0.0",label:"< 1.0.0"},{value:"1.0.0",label:"1.0.0"},{value:"1.1.0",label:"1.1.x"},{value:"1.2.0",label:"1.2.x"},{value:"1.3.0",label:"1.3.x"},{value:"1.4.0",label:"1.4.x"},{value:"1.5.0",label:"1.5.x"},{value:"1.6.0",label:"1.6.x"},{value:"1.7.0",label:"1.7.x"},{value:"1.8.0",label:"1.8.x"},{value:"1.9.0",label:"1.9.x"},{value:"1.10.0",label:"1.10.x"},{value:"1.11.0",label:"1.11.x"},{value:"1.13.0",label:"1.13.x"},{value:"1.14.0",label:"> 1.13.x"}]},Je=[{value:"POST",label:"POST"},{value:"GET",label:"GET"}],Ue=[{value:re.c.Builder,label:"Builder"},{value:re.c.Code,label:"Code"}],$e=[{value:Se.x3.Low,label:"Low"},{value:Se.x3.Medium,label:"Medium"},{value:Se.x3.High,label:"High"},{value:Se.x3.None,label:"None"}],Qe=[{value:pe.T8.Prometheus,label:pe.T8.Prometheus},{value:pe.T8.Cortex,label:pe.T8.Cortex},{value:pe.T8.Mimir,label:pe.T8.Mimir},{value:pe.T8.Thanos,label:pe.T8.Thanos}],tt=/^$|^\d+(ms|[Mwdhmsy])$/,lt=/(\d+)(.+)/,Me="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",De=(Le,he)=>{if(!he||!_e[he])return;const Pe=_e[he]?.filter(Te=>!!Te.value&&Z().lte(Te.value,Le)).map(Te=>Te.value),Ie=Pe[Pe.length-1];if(Ie){const Te=Z().diff(Ie,Le);if(["patch","prepatch","prerelease",null].includes(Te))return Ie}},We=Le=>{console.warn("Error fetching version from buildinfo API, must manually select version!",Le)},qe=(Le,he,He)=>{He(Le).then(Pe=>{(0,ce.i)().get(`/api/datasources/uid/${Pe.uid}/resources/version-detect`).then(Ie=>{const Te=Ie.data?.version??"";if(Te&&Z().valid(Te)){const Re=De(Te,Pe.jsonData.prometheusType);Re&&He({...Pe,jsonData:{...Pe.jsonData,prometheusVersion:Re}}).then(ue=>{he(ue)})}else We()})}).catch(Pe=>{We(Pe)})},st=Le=>{const{options:he,onOptionsChange:He}=Le,Pe=(0,ne.qj)();he.jsonData.httpMethod||(he.jsonData.httpMethod="POST");const Ie=(0,m.l4)(),Te=Be(Ie),[Re,ue]=(0,n.useState)({timeInterval:"",queryTimeout:"",incrementalQueryOverlapWindow:""});return n.createElement(n.Fragment,null,n.createElement(g._,{title:"Interval behaviour",className:Te.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:"Scrape interval",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"This interval is how frequently Prometheus scrapes targets. Set this to the typical scrape and evaluation interval configured in your Prometheus config file. If you set this to a greater value than your Prometheus config file interval, Grafana will evaluate the data according to this interval and you will see less data points. Defaults to 15s. ",ct()),interactive:!0,disabled:he.readOnly},n.createElement(n.Fragment,null,n.createElement(y.I,{className:"width-20",value:he.jsonData.timeInterval,spellCheck:!1,placeholder:"15s",onChange:Tt("timeInterval",he,He),onBlur:xe=>ue({...Re,timeInterval:xe.currentTarget.value})}),ge(Re.timeInterval,tt,Me))))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:"Query timeout",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"Set the Prometheus query timeout. ",ct()),interactive:!0,disabled:he.readOnly},n.createElement(n.Fragment,null,n.createElement(y.I,{className:"width-20",value:he.jsonData.queryTimeout,onChange:Tt("queryTimeout",he,He),spellCheck:!1,placeholder:"60s",onBlur:xe=>ue({...Re,queryTimeout:xe.currentTarget.value})}),ge(Re.queryTimeout,tt,Me))))))),n.createElement(g._,{title:"Query editor",className:Te.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:"Default editor",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"Set default editor option for all users of this data source. ",ct()),interactive:!0,disabled:he.readOnly},n.createElement(q.Ph,{"aria-label":"Default Editor (Code or Builder)",options:Ue,value:Ue.find(xe=>xe.value===he.jsonData.defaultEditor)??Ue.find(xe=>xe.value===re.c.Builder),onChange:Tt("defaultEditor",he,He),width:40}))),n.createElement("div",{className:"gf-form"},n.createElement(h._,{labelWidth:yt,label:"Disable metrics lookup",tooltip:n.createElement(n.Fragment,null,"Checking this option will disable the metrics chooser and metric/label support in the query field's autocomplete. This helps if you have performance issues with bigger Prometheus instances."," ",ct()),interactive:!0,disabled:he.readOnly,className:Te.switchField},n.createElement(f.r,{value:he.jsonData.disableMetricsLookup??!1,onChange:(0,le.hz)(Le,"disableMetricsLookup")}))))),n.createElement(g._,{title:"Performance",className:Te.container},!he.jsonData.prometheusType&&!he.jsonData.prometheusVersion&&he.readOnly&&n.createElement("div",{className:Te.versionMargin},"For more information on configuring prometheus type and version in data sources, see the"," ",n.createElement("a",{className:Te.textUnderline,href:"https://grafana.com/docs/grafana/latest/administration/provisioning/"},"provisioning documentation"),"."),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:"Prometheus type",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"Set this to the type of your prometheus database, e.g. Prometheus, Cortex, Mimir or Thanos. Changing this field will save your current settings, and attempt to detect the version. Certain types of Prometheus support or do not support various APIs. For example, some types support regex matching for label queries to improve performance. Some types have an API for metadata. If you set this incorrectly you may experience odd behavior when querying metrics and labels. Please check your Prometheus documentation to ensure you enter the correct type. ",ct()),interactive:!0,disabled:he.readOnly},n.createElement(q.Ph,{"aria-label":"Prometheus type",options:Qe,value:Qe.find(xe=>xe.value===he.jsonData.prometheusType),onChange:Tt("prometheusType",{...he,jsonData:{...he.jsonData,prometheusVersion:void 0}},xe=>(qe(xe,He,Pe),He({...xe,jsonData:{...xe.jsonData,prometheusVersion:void 0}}))),width:40})))),n.createElement("div",{className:"gf-form-inline"},he.jsonData.prometheusType&&n.createElement("div",{className:"gf-form"},n.createElement(h._,{label:`${he.jsonData.prometheusType} version`,labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"Use this to set the version of your ",he.jsonData.prometheusType," instance if it is not automatically configured. ",ct()),interactive:!0,disabled:he.readOnly},n.createElement(q.Ph,{"aria-label":`${he.jsonData.prometheusType} type`,options:_e[he.jsonData.prometheusType],value:_e[he.jsonData.prometheusType]?.find(xe=>xe.value===he.jsonData.prometheusVersion),onChange:Tt("prometheusVersion",he,He),width:40})))),a.default.featureToggles.prometheusResourceBrowserCache&&n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h._,{label:"Cache level",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"Sets the browser caching level for editor queries. Higher cache settings are recommended for high cardinality data sources."),interactive:!0,disabled:he.readOnly},n.createElement(q.Ph,{width:40,onChange:Tt("cacheLevel",he,He),options:$e,value:$e.find(xe=>xe.value===he.jsonData.cacheLevel)??Se.x3.Low})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h._,{label:"Incremental querying (beta)",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"This feature will change the default behavior of relative queries to always request fresh data from the prometheus instance, instead query results will be cached, and only new records are requested. Turn this on to decrease database and network load."),interactive:!0,className:Te.switchField,disabled:he.readOnly},n.createElement(f.r,{value:he.jsonData.incrementalQuerying??!1,onChange:(0,le.hz)(Le,"incrementalQuerying")})))),n.createElement("div",{className:"gf-form-inline"},he.jsonData.incrementalQuerying&&n.createElement(h._,{label:"Query overlap window",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"Set a duration like 10m or 120s or 0s. Default of 10 minutes. This duration will be added to the duration of each incremental request."),interactive:!0,disabled:he.readOnly},n.createElement(n.Fragment,null,n.createElement(y.I,{onBlur:xe=>ue({...Re,incrementalQueryOverlapWindow:xe.currentTarget.value}),className:"width-20",value:he.jsonData.incrementalQueryOverlapWindow??ie.Ji,onChange:Tt("incrementalQueryOverlapWindow",he,He),spellCheck:!1}),ge(Re.incrementalQueryOverlapWindow,lt,Me)))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h._,{label:"Disable recording rules (beta)",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"This feature will disable recording rules Turn this on to improve dashboard performance"),interactive:!0,className:Te.switchField,disabled:he.readOnly},n.createElement(f.r,{value:he.jsonData.disableRecordingRules??!1,onChange:(0,le.hz)(Le,"disableRecordingRules")})))))),n.createElement(g._,{title:"Other",className:Te.container},n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form max-width-30"},n.createElement(h._,{label:"Custom query parameters",labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"Add custom parameters to the Prometheus query URL. For example timeout, partial_response, dedup, or max_source_resolution. Multiple parameters should be concatenated together with an \u2018&\u2019. ",ct()),interactive:!0,disabled:he.readOnly},n.createElement(y.I,{className:"width-20",value:he.jsonData.customQueryParameters,onChange:Tt("customQueryParameters",he,He),spellCheck:!1,placeholder:"Example: max_source_resolution=5m&timeout=10"})))),n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(h._,{labelWidth:yt,tooltip:n.createElement(n.Fragment,null,"You can use either POST or GET HTTP method to query your Prometheus data source. POST is the recommended method as it allows bigger queries. Change this to GET if you have a Prometheus version older than 2.1 or if POST requests are restricted in your network. ",ct()),interactive:!0,label:"HTTP method",disabled:he.readOnly},n.createElement(q.Ph,{width:40,"aria-label":"Select HTTP method",options:Je,value:Je.find(xe=>xe.value===he.jsonData.httpMethod),onChange:Tt("httpMethod",he,He)})))))),n.createElement(we,{options:he.jsonData.exemplarTraceIdDestinations,onChange:xe=>(0,le.tp)({onOptionsChange:He,options:he},"exemplarTraceIdDestinations",xe),disabled:he.readOnly}))},dt=Le=>Le?Le.hasOwnProperty("currentTarget")?Le.currentTarget.value:Le.value:"",Tt=(Le,he,He)=>Pe=>{He({...he,jsonData:{...he.jsonData,[Le]:dt(Pe)}})};var Nt=e(72699);const Bt=({config:Le,onChange:he,className:He})=>{const Pe=Re=>{he({...Le,jsonData:{...Le.jsonData,keepCookies:Re}})},Ie=Re=>{he({...Le,jsonData:{...Le.jsonData,timeout:parseInt(Re.currentTarget.value,10)}})},Te={container:(0,t.css)({maxWidth:578})};return n.createElement(n.Fragment,null,n.createElement(g._,{title:"Advanced HTTP settings",className:(0,t.cx)(Te.container,He)},n.createElement(h._,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:yt,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:Le.readOnly,grow:!0},n.createElement(Nt.B,{className:"width-20",id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:Le.jsonData.keepCookies,onChange:Pe})),n.createElement(h._,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:yt,tooltip:"HTTP request timeout in seconds",disabled:Le.readOnly,grow:!0},n.createElement(y.I,{className:"width-20",id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:Le.jsonData.timeout,onChange:Ie}))))},yt=30,ft=Le=>{const{options:he,onOptionsChange:He}=Le,Pe=a.config.featureToggles.prometheusConfigOverhaulAuth,Ie=(0,n.useRef)(Le.options.access==="direct"),Te={azureAuthSupported:a.config.azureAuthEnabled,getAzureAuthEnabled:xe=>x(xe),setAzureAuthEnabled:(xe,Ve)=>Ve?T(xe):U(xe),azureSettingsUI:k},Re=(0,m.l4)(),ue=Be(Re);return n.createElement(n.Fragment,null,he.access==="direct"&&n.createElement(d.b,{title:"Error",severity:"error"},"Browser access mode in the Prometheus data source is no longer available. Switch to server access mode."),Pe?n.createElement(n.Fragment,null,n.createElement(s.j,{dataSourceName:"Prometheus",docsLink:"https://grafana.com/docs/grafana/latest/datasources/prometheus/configure-prometheus-data-source/"}),n.createElement("hr",{className:`${ue.hrTopSpace} ${ue.hrBottomSpace}`}),n.createElement(te,{options:he,onOptionsChange:He,azureAuthSettings:Te,sigV4AuthToggleEnabled:a.config.sigV4AuthEnabled,renderSigV4Editor:n.createElement(i.IW,{...Le}),secureSocksDSProxyEnabled:a.config.secureSocksDSProxyEnabled})):n.createElement(o.E,{defaultUrl:"http://localhost:9090",dataSourceConfig:he,showAccessOptions:Ie.current,onChange:He,sigV4AuthToggleEnabled:a.config.sigV4AuthEnabled,azureAuthSettings:Te,renderSigV4Editor:n.createElement(i.IW,{...Le}),secureSocksDSProxyEnabled:a.config.secureSocksDSProxyEnabled,urlLabel:"Prometheus server URL",urlDocs:ct()}),Pe?n.createElement(n.Fragment,null,n.createElement("hr",null),n.createElement(r.K,{className:ue.advancedSettings,title:"Advanced settings",description:"Additional settings are optional settings that can be configured for more control over your data source."},n.createElement(Bt,{className:ue.advancedHTTPSettingsMargin,config:he,onChange:He}),n.createElement(b,{options:he,onOptionsChange:He}),n.createElement(st,{options:he,onOptionsChange:He}))):n.createElement(n.Fragment,null,n.createElement("hr",{className:ue.hrTopSpace}),n.createElement("h3",{className:ue.sectionHeaderPadding},"Additional settings"),n.createElement("p",{className:`${ue.secondaryGrey} ${ue.subsectionText}`},"Additional settings are optional settings that can be configured for more control over your data source."),n.createElement(b,{options:he,onOptionsChange:He}),n.createElement(st,{options:he,onOptionsChange:He})))};function ct(Le){const he="https://grafana.com/docs/grafana/latest/datasources/prometheus/#configure-the-data-source";return n.createElement("a",{href:Le||he,target:"_blank",rel:"noopener noreferrer"},"Visit docs for more details here.")}const ge=(Le,he,He)=>{const Pe="Value is not valid";return Le&&!Le.match(he)?n.createElement(l.S,null,He||Pe):!0};function Be(Le){return{additionalSettings:(0,t.css)`
      margin-bottom: 25px;
    `,secondaryGrey:(0,t.css)`
      color: ${Le.colors.secondary.text};
      opacity: 65%;
    `,inlineError:(0,t.css)`
      margin: 0px 0px 4px 245px;
    `,switchField:(0,t.css)`
      align-items: center;
    `,sectionHeaderPadding:(0,t.css)`
      padding-top: 32px;
    `,sectionBottomPadding:(0,t.css)`
      padding-bottom: 28px;
    `,subsectionText:(0,t.css)`
      font-size: 12px;
    `,hrBottomSpace:(0,t.css)`
      margin-bottom: 56px;
    `,hrTopSpace:(0,t.css)`
      margin-top: 50px;
    `,textUnderline:(0,t.css)`
      text-decoration: underline;
    `,versionMargin:(0,t.css)`
      margin-bottom: 12px;
    `,advancedHTTPSettingsMargin:(0,t.css)`
      margin: 24px 0 8px 0;
    `,advancedSettings:(0,t.css)`
      padding-top: 32px;
    `,alertingTop:(0,t.css)`
      margin-top: 40px !important;
    `,overhaulPageHeading:(0,t.css)`
      font-weight: 400;
    `,container:(0,t.css)`
      maxwidth: 578;
    `}}},26807:(j,I,e)=>{"use strict";e.d(I,{QG:()=>Le,vQ:()=>he});var t=e(89949),n=e(84084),i=e(27702),s=e(91826),r=e(78209),m=e(45383),d=e(15084),o=e(6857),l=e(89707),a=e(39343),g=e(76970),c=e(56361),h=e(56469),f=e(37865),b=e.n(f),v=e(62247),y=e(76305),E=e(76772),C=e(53933),u=e(99633),D=e(42751),P=e(35306),S=e(73289),x=e(25357),M=e(80011),R=e(89024),O=e(55394),T=e(26858),U=e(99386),L=e(18447),V=e(12308),w=e(85085),K=e(83788),B=e(57942),W=e(81924),_=e(60426),k=e(63201),A=e(31465),z=e(1128),H=e(86096);function Q(Re){const ue=Re.annotation,xe=Re.onAnnotationChange,Ve={expr:ue.expr,refId:ue.name,interval:ue.step};return i.createElement(i.Fragment,null,i.createElement(K._,null,i.createElement(H.j,{...Re,query:Ve,showExplain:!1,onChange:Ne=>{xe({...ue,expr:Ne.expr})}}),i.createElement(B.p,null,i.createElement(W.S,{label:"Min step",tooltip:i.createElement(i.Fragment,null,"An additional lower limit for the step parameter of the Prometheus query and for the"," ",i.createElement("code",null,"$__interval")," and ",i.createElement("code",null,"$__rate_interval")," variables.")},i.createElement(A.H,{type:"text","aria-label":"Set lower limit for the step parameter",placeholder:"auto",minWidth:10,onCommitChange:Ne=>{xe({...ue,step:Ne.currentTarget.value})},defaultValue:Ve.interval})))),i.createElement(_.T,{v:.5}),i.createElement(B.p,null,i.createElement(W.S,{label:"Title",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},i.createElement(z.I,{type:"text",placeholder:"{{alertname}}",value:ue.titleFormat,onChange:Ne=>{xe({...ue,titleFormat:Ne.currentTarget.value})}})),i.createElement(W.S,{label:"Tags"},i.createElement(z.I,{type:"text",placeholder:"label1,label2",value:ue.tagKeys,onChange:Ne=>{xe({...ue,tagKeys:Ne.currentTarget.value})}})),i.createElement(W.S,{label:"Text",tooltip:"Use either the name or a pattern. For example, {{instance}} is replaced with label value for the label instance."},i.createElement(z.I,{type:"text",placeholder:"{{instance}}",value:ue.textFormat,onChange:Ne=>{xe({...ue,textFormat:Ne.currentTarget.value})}})),i.createElement(W.S,{label:"Series value as timestamp",tooltip:"The unit of timestamp is milliseconds. If the unit of the series value is seconds, multiply its range vector by 1000."},i.createElement(k.r,{value:ue.useValueForTime,onChange:Ne=>{xe({...ue,useValueForTime:Ne.currentTarget.value})}}))))}var X=e(41587),te=e(73308),oe=e(85400),Z=e(84848),le=e(72054);const ce=/^label_names\(\)\s*$/,q=/^label_values\((?:(.+),\s*)?([a-zA-Z_$][a-zA-Z0-9_]*)\)\s*$/,ne=/^metrics\((.+)\)\s*$/,pe=/^query_result\((.+)\)\s*$/,re=/^label_names\((.+)\)\s*$/;function ie(Re){if(typeof Re!="string")return Re;const ue={refId:"PrometheusDatasource-VariableQuery",qryType:le.jo.LabelNames},xe=Re.match(re);if(xe)return{...ue,qryType:le.jo.LabelNames,match:xe[1]};const Ve=Re.match(ce);if(Ve)return{...ue,qryType:le.jo.LabelNames};const Ne=Re.match(q);if(Ne){const ze=Ne[2],Oe=Ne[1];if(Oe){const Fe=(0,Z._)(Oe);return{...ue,qryType:le.jo.LabelValues,label:ze,metric:Fe.query.metric,labelFilters:Fe.query.labels}}else return{...ue,qryType:le.jo.LabelValues,label:ze}}const fe=Re.match(ne);if(fe)return{...ue,qryType:le.jo.MetricNames,metric:fe[1]};const ve=Re.match(pe);return ve?{...ue,qryType:le.jo.VarQueryResult,varQuery:ve[1]}:!Ve&&!Ne&&!fe&&!ve?{...ue,qryType:le.jo.SeriesQuery,seriesQuery:Re}:ue}function Se(Re){switch(Re.qryType){case le.jo.LabelNames:return Re.match?`label_names(${Re.match})`:"label_names()";case le.jo.LabelValues:if(Re.metric){const xe={metric:Re.metric,labels:Re.labelFilters??[],operations:[]};return`label_values(${oe.Z.renderQuery(xe)},${Re.label})`}else return`label_values(${Re.label})`;case le.jo.MetricNames:return`metrics(${Re.metric})`;case le.jo.VarQueryResult:return`query_result(${ye(Re.varQuery)})`;case le.jo.SeriesQuery:return""+Re.seriesQuery}return""}function ye(Re){return Re?Re.replace(/[\r\n]+/gm,""):""}class Ce{constructor(ue,xe){this.datasource=ue,this.query=xe,this.datasource=ue,this.query=xe,this.range=(0,T.$t)().timeRange()}process(){const ue=ce,xe=re,Ve=/^label_values\((?:(.+),\s*)?([a-zA-Z_][a-zA-Z0-9_]*)\)\s*$/,Ne=ne,fe=pe,ve=this.query.match(ue),ze=this.query.match(xe);if(ze){const Xe=`{__name__=~".*${ze[1]}.*"}`;return this.datasource.languageProvider.getSeriesLabels(Xe,[]).then(ut=>ut.map(ht=>({text:ht})))}if(ve)return this.datasource.getTagKeys();const Oe=this.query.match(Ve);if(Oe)return Oe[1]?this.labelValuesQuery(Oe[2],Oe[1]):this.labelValuesQuery(Oe[2]);const Fe=this.query.match(Ne);if(Fe)return this.metricNameQuery(Fe[1]);const Ge=this.query.match(fe);return Ge?(0,r.n)(this.queryResultQuery(Ge[1])):["label_values()","metrics()","query_result()"].includes(this.query)?Promise.resolve([]):this.metricNameAndLabelsQuery(this.query)}labelValuesQuery(ue,xe){const Ve=(0,te.jj)(this.range.from,!1),Ne=(0,te.jj)(this.range.to,!0),fe={...xe&&{"match[]":xe},start:Ve.toString(),end:Ne.toString()};if(!xe||this.datasource.hasLabelsMatchAPISupport()){const ve=`/api/v1/label/${ue}/values`;return this.datasource.metadataRequest(ve,fe).then(ze=>(0,t.map)(ze.data.data,Oe=>({text:Oe})))}else{const ve="/api/v1/series";return this.datasource.metadataRequest(ve,fe).then(ze=>{const Oe=(0,t.map)(ze.data.data,Fe=>Fe[ue]||"").filter(Fe=>Fe!=="");return(0,t.uniq)(Oe).map(Fe=>({text:Fe,expandable:!0}))})}}metricNameQuery(ue){const xe=(0,te.jj)(this.range.from,!1),Ve=(0,te.jj)(this.range.to,!0),Ne={start:xe.toString(),end:Ve.toString()},fe="/api/v1/label/__name__/values";return this.datasource.metadataRequest(fe,Ne).then(ve=>(0,t.chain)(ve.data.data).filter(ze=>new RegExp(ue).test(ze)).map(ze=>({text:ze,expandable:!0})).value())}queryResultQuery(ue){const xe=(0,te.jj)(this.range.to,!0),Ve={expr:ue};return this.datasource.performInstantQuery(Ve,xe).pipe((0,a.U)(Ne=>{switch(Ne.data.data.resultType){case"scalar":case"string":return[{text:Ne.data.data.result[1]||"",expandable:!1}];case"vector":return(0,t.map)(Ne.data.data.result,fe=>{let ve=fe.metric.__name__||"";return delete fe.metric.__name__,ve+="{"+(0,t.map)(fe.metric,(ze,Oe)=>Oe+'="'+ze+'"').join(",")+"}",ve+=" "+fe.value[1]+" "+fe.value[0]*1e3,{text:ve,expandable:!0}});default:throw Error(`Unknown/Unhandled result type: [${Ne.data.data.resultType}]`)}}))}metricNameAndLabelsQuery(ue){const xe=(0,te.jj)(this.range.from,!1),Ve=(0,te.jj)(this.range.to,!0),Ne={"match[]":ue,start:xe.toString(),end:Ve.toString()},fe="/api/v1/series",ve=this;return this.datasource.metadataRequest(fe,Ne).then(ze=>(0,t.map)(ze.data.data,Oe=>({text:ve.datasource.getOriginalMetricName(Oe),expandable:!0})))}}const de=20;function we(Re,ue,xe){const Ve=[];if(Re.trim().match(/^\w+_bucket$|^\w+_bucket{.*}$/)){const fe="Selected metric has buckets.";Ve.push({type:"HISTOGRAM_QUANTILE",label:fe,fix:{label:"Consider calculating aggregated quantile by adding histogram_quantile().",action:{type:"ADD_HISTOGRAM_QUANTILE",query:Re}}})}if(Re.indexOf("rate(")===-1&&Re.indexOf("increase(")===-1){const fe=Re.match(/\b(\w+_(total|sum|count))\b/);let ve=fe?fe[1]:"";const ze=xe?.languageProvider?.metricsMetadata;let Oe=!1;if(ze&&(ve=Array.from(Re.matchAll(/\$?[a-zA-Z_:][a-zA-Z0-9_:]*/g)).map(([Ge])=>Ge).filter(Ge=>!Ge.startsWith("$")).flatMap(Ge=>Ge.split(":")).find(Ge=>{const nt=ze[Ge];return nt&&nt.type.toLowerCase()==="counter"?(Oe=!0,!0):!1})??""),ve){const Fe=Re.trim().match(/^\w+$|^\w+{.*}$/);let nt=`Selected metric ${Oe?"is":"looks like"} a counter.`,Xe;Fe?Xe={label:"Consider calculating rate of counter by adding rate().",action:{type:"ADD_RATE",query:Re}}:nt=`${nt} Consider calculating rate of counter by adding rate().`,Ve.push({type:"APPLY_RATE",label:nt,fix:Xe})}}if(xe&&xe.ruleMappings){const fe=xe.ruleMappings,ve=Object.keys(fe).reduce((ze,Oe)=>Re.search(Oe)>-1?{...ze,[Oe]:fe[Oe]}:ze,{});if((0,t.size)(ve)>0){const ze="Query contains recording rules.";Ve.push({type:"EXPAND_RULES",label:ze,fix:{label:"Expand rules",action:{type:"EXPAND_RULES",query:Re,options:ve}}})}}return ue&&ue.length>=de&&Re.trim().match(/^\w+$/)&&Ve.push({type:"ADD_SUM",label:"Many time series results returned.",fix:{label:"Consider aggregating with sum().",action:{type:"ADD_SUM",query:Re,preventSubmit:!0}}}),Ve}function _e(Re){const ue=[];return Re.directUrl.includes("/loki")&&!Re.languageProvider.metrics.length&&ue.push({label:"Using Loki as a Prometheus data source is no longer supported. You must use the Loki data source for your Loki instance.",type:"INFO"}),Re.lookupsDisabled&&ue.push({label:"Labels and metrics lookup was disabled in data source settings.",type:"INFO"}),ue}var Je=e(94962),Ue=e(48789),$e=e(86312),Qe=e(34667);function tt(Re,ue,xe){const{app:Ve,targets:Ne}=ue;if(!(Ve===v.zj.Dashboard||Ve===v.zj.PanelViewer))for(const fe of Ne)(0,$e.ff)("grafana_prometheus_query_executed",{app:Ve,grafana_version:Qe.config.buildInfo.version,has_data:Re.data.some(ve=>ve.length>0),has_error:Re.error!==void 0,expr:fe.expr,format:fe.format,instant:fe.instant,range:fe.range,exemplar:fe.exemplar,hinting:fe.hinting,interval:fe.interval,intervalFactor:fe.intervalFactor,utcOffsetSec:fe.utcOffsetSec,legend:fe.legendFormat,valueWithRefId:fe.valueWithRefId,requestId:ue.requestId,showingGraph:fe.showingGraph,showingTable:fe.showingTable,editor_mode:fe.editorMode,simultaneously_sent_query_count:Ne.length,time_range_from:ue?.range?.from?.toISOString(),time_range_to:ue?.range?.to?.toISOString(),time_taken:Date.now()-xe.getTime()})}var lt=e(91053),Me=e(79726),De=e(39317),We=e(71107),qe=e(48024),st=e(28580),dt=e(60105),Tt=e(52390);const Nt=[{label:"Label names",value:le.jo.LabelNames},{label:"Label values",value:le.jo.LabelValues},{label:"Metrics",value:le.jo.MetricNames},{label:"Query result",value:le.jo.VarQueryResult},{label:"Series query",value:le.jo.SeriesQuery}],Bt="PrometheusVariableQueryEditor-VariableQuery",yt=({onChange:Re,query:ue,datasource:xe})=>{const[Ve,Ne]=(0,i.useState)(void 0),[fe,ve]=(0,i.useState)(""),[ze,Oe]=(0,i.useState)(""),[Fe,Ge]=(0,i.useState)(""),[nt,Xe]=(0,i.useState)(""),[ut,ht]=(0,i.useState)(""),[wt,mn]=(0,i.useState)([]),[vn,gn]=(0,i.useState)([]);(0,i.useEffect)(()=>{if(!ue)return;const jt=ft(ue);Oe(jt.match??""),Ne(jt.qryType),ve(jt.label??""),Ge(jt.metric??""),gn(jt.labelFilters??[]),Xe(jt.varQuery??""),ht(jt.seriesQuery??"")},[ue]),(0,i.useEffect)(()=>{if(Ve!==le.jo.LabelValues)return;const jt=xe.getVariables().map(sn=>({label:sn,value:sn}));if(!Fe)xe.getTagKeys().then(sn=>{const St=sn.map(({text:mt})=>({label:mt,value:mt}));mn([...jt,...St])});else{const sn=[{label:"__name__",op:"=",value:Fe}],St=oe.Z.renderLabels(sn);xe.hasLabelsMatchAPISupport()?xe.languageProvider.fetchSeriesLabelsMatch(St).then(mt=>{const it=Object.keys(mt).map(pt=>({label:pt,value:pt}));mn([...jt,...it])}):xe.languageProvider.fetchSeriesLabels(St).then(mt=>{const it=Object.keys(mt).map(pt=>({label:pt,value:pt}));mn([...jt,...it])})}},[xe,Ve,Fe]);const Sn=(jt,sn)=>{const kt={...{qryType:Ve,label:fe,metric:Fe,match:ze,varQuery:nt,seriesQuery:ut,refId:"PrometheusVariableQueryEditor-VariableQuery"},...jt,...sn?{labelFilters:sn}:{labelFilters:vn}},it=Se(kt);Re({query:it,refId:Bt})},Cn=jt=>{Ne(jt.value),jt.value===le.jo.LabelNames&&Sn({qryType:jt.value})},pn=jt=>{const sn=jt&&jt.value?jt.value:"";ve(sn),Ve===le.jo.LabelValues&&sn&&Sn({label:sn})},nn=jt=>{Ge(jt.metric),gn(jt.labels);const sn=jt.metric,St=jt.labels??[];Ve===le.jo.LabelValues&&fe&&(sn||St)&&Sn({qryType:Ve,metric:sn},St)},Ct=jt=>{Ve===le.jo.LabelNames&&Sn({qryType:Ve,match:jt})},bt=jt=>{Ve===le.jo.MetricNames&&jt&&Sn({metric:jt})},Ut=jt=>{Xe(jt.currentTarget.value)},_t=jt=>{ht(jt.currentTarget.value)},Gt=(0,i.useCallback)(()=>({metric:Fe,labels:vn,operations:[]}),[Fe,vn]);return i.createElement(i.Fragment,null,i.createElement(We.Z,null,i.createElement(qe._,{label:"Query type",labelWidth:20,tooltip:i.createElement("div",null,"The Prometheus data source plugin provides the following query types for template variables.")},i.createElement(st.Ph,{placeholder:"Select query type","aria-label":"Query type",onChange:Cn,value:Ve,options:Nt,width:25}))),Ve===le.jo.LabelValues&&i.createElement(i.Fragment,null,i.createElement(We.Z,null,i.createElement(qe._,{label:"Label",labelWidth:20,required:!0,"aria-labelledby":"label-select",tooltip:i.createElement("div",null,"Returns a list of label values for the label name in all metrics unless the metric is specified.")},i.createElement(st.Ph,{"aria-label":"label-select",onChange:pn,value:fe,options:wt,width:25,allowCustomValue:!0,isClearable:!0}))),i.createElement(Tt.U,{query:Gt(),datasource:xe,onChange:nn,variableEditor:!0})),Ve===le.jo.LabelNames&&i.createElement(We.Z,null,i.createElement(qe._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric regex",tooltip:i.createElement("div",null,"Returns a list of label names, optionally filtering by specified metric regex.")},i.createElement(z.I,{type:"text","aria-label":"Metric regex",placeholder:"Metric regex",value:ze,onBlur:jt=>{Oe(jt.currentTarget.value),Ct(jt.currentTarget.value)},onChange:jt=>{Oe(jt.currentTarget.value)},width:25}))),Ve===le.jo.MetricNames&&i.createElement(We.Z,null,i.createElement(qe._,{label:"Metric regex",labelWidth:20,"aria-labelledby":"Metric selector",tooltip:i.createElement("div",null,"Returns a list of metrics matching the specified metric regex.")},i.createElement(z.I,{type:"text","aria-label":"Metric selector",placeholder:"Metric regex",value:Fe,onChange:jt=>{Ge(jt.currentTarget.value)},onBlur:jt=>{Ge(jt.currentTarget.value),bt(jt.currentTarget.value)},width:25}))),Ve===le.jo.VarQueryResult&&i.createElement(We.Z,null,i.createElement(qe._,{label:"Query",labelWidth:20,tooltip:i.createElement("div",null,"Returns a list of Prometheus query results for the query. This can include Prometheus functions, i.e. sum(go_goroutines).")},i.createElement(dt.K,{type:"text","aria-label":"Prometheus Query",placeholder:"Prometheus Query",value:nt,onChange:Ut,onBlur:()=>{Ve===le.jo.VarQueryResult&&nt&&Sn({qryType:Ve})},cols:100}))),Ve===le.jo.SeriesQuery&&i.createElement(We.Z,null,i.createElement(qe._,{label:"Series Query",labelWidth:20,tooltip:i.createElement("div",null,'Enter enter a metric with labels, only a metric or only labels, i.e. go_goroutines{instance="localhost:9090"}, go_goroutines, or {instance="localhost:9090"}. Returns a list of time series associated with the entered data.')},i.createElement(z.I,{type:"text","aria-label":"Series Query",placeholder:"Series Query",value:ut,onChange:_t,onBlur:()=>{Ve===le.jo.SeriesQuery&&ut&&Sn({qryType:Ve})},width:100}))))};function ft(Re){return typeof Re=="string"?ie(Re):Re.query?ie(Re.query):Re}class ct extends Me.Mg{constructor(ue,xe=(0,De.J)(),Ve=(0,T.$t)()){super(),this.datasource=ue,this.templateSrv=xe,this.timeSrv=Ve,this.editor=yt,this.query=this.query.bind(this)}query(ue){let xe;if(typeof ue.targets[0]=="string"?xe=ue.targets[0]:xe=ue.targets[0].query,!xe)return(0,m.of)({data:[]});const Ve={...ue.scopedVars,__interval:{text:this.datasource.interval,value:this.datasource.interval},__interval_ms:{text:y.intervalToMs(this.datasource.interval),value:y.intervalToMs(this.datasource.interval)},...this.datasource.getRangeScopedVars(this.timeSrv.timeRange())},Ne=this.templateSrv.replace(xe,Ve,this.datasource.interpolateQueryExpr),fe=new Ce(this.datasource,Ne);return(0,lt.D)(fe.process()).pipe((0,a.U)(ze=>({data:ze})))}}const ge="60s",Be=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels"],Le="-Instant";class he extends D.CK{constructor(ue,xe=(0,U.J)(),Ve=(0,T.$t)(),Ne){super(ue),this.templateSrv=xe,this.timeSrv=Ve,this.metricsNameCache=new n.z({max:10}),this.init=async()=>{this.disableRecordingRules||this.loadRules(),this.exemplarsAvailable=await this.areExemplarsAvailable()},this.prepareTargets=(fe,ve,ze)=>{const Oe=[],Fe=[],Ge=(0,t.cloneDeep)(fe.targets);for(const nt of Ge){if(!nt.expr||nt.hide)continue;const Xe=this.languageProvider.histogramMetrics.find(ut=>nt.expr.includes(ut));if(fe.app===v.zj.Explore&&nt.range===nt.instant){const ut=(0,t.cloneDeep)(nt);ut.format="table",ut.instant=!0,ut.range=!1,ut.valueWithRefId=!0,delete ut.maxDataPoints;const ht=(0,t.cloneDeep)(nt);if(ht.format="time_series",ht.instant=!1,ut.range=!0,nt.exemplar){if(!Xe||Xe&&!Fe.some(wt=>wt.expr.includes(Xe))){const wt=(0,t.cloneDeep)(nt);wt.instant=!1,Oe.push(this.createQuery(wt,fe,ve,ze)),Fe.push(wt)}ut.exemplar=!1,ht.exemplar=!1}Fe.push(ut,ht),Oe.push(this.createQuery(ut,fe,ve,ze),this.createQuery(ht,fe,ve,ze))}else if(nt.instant&&fe.app===v.zj.Explore){const ut=(0,t.cloneDeep)(nt);ut.format="table",Oe.push(this.createQuery(ut,fe,ve,ze)),Fe.push(ut)}else{if(nt.exemplar&&!nt.instant){if(!Xe||Xe&&!Fe.some(ut=>ut.expr.includes(Xe))){const ut=(0,t.cloneDeep)(nt);Oe.push(this.createQuery(ut,fe,ve,ze)),Fe.push(ut)}nt.exemplar=!1}Oe.push(this.createQuery(nt,fe,ve,ze)),Fe.push(nt)}}return{queries:Oe,activeTargets:Fe}},this.intepolateStringHelper=fe=>this.interpolateString(fe.expr),this.handleErrors=(fe,ve)=>{const ze={message:fe&&fe.statusText||"Unknown error during query transaction. Please check JS console logs.",refId:ve.refId};return fe.data?typeof fe.data=="string"?ze.message=fe.data:fe.data.error&&(ze.message=(0,R.Xh)(fe.data.error)):fe.message?ze.message=fe.message:typeof fe=="string"&&(ze.message=fe),ze.status=fe.status,ze.statusText=fe.statusText,ze},this.processAnnotationResponse=(fe,ve)=>{const ze=(0,P.z1)({data:ve}).data;if(!ze||!ze.length)return[];const Oe=fe.annotation,{tagKeys:Fe="",titleFormat:Ge="",textFormat:nt=""}=Oe,Xe=y.intervalToSeconds(Oe.step||ge)*1e3,ut=Fe.split(","),ht=[];for(const wt of ze){if(wt.fields.length===0)continue;const mn=wt.fields[0],vn=wt.fields[1],gn=vn?.labels||{},Sn=Object.keys(gn).filter(Ut=>ut.includes(Ut)).map(Ut=>gn[Ut]),Cn=[];let pn=0;vn.values.forEach(Ut=>{let _t,Gt;const jt=mn.values[pn];fe.annotation.useValueForTime?(_t=Math.floor(parseFloat(Ut)),Gt=1):(_t=Math.floor(parseFloat(jt)),Gt=parseFloat(Ut)),pn++,Cn.push([_t,Gt])});const Ct=Cn.filter(Ut=>Ut[1]>0).map(Ut=>Ut[0]);let bt=null;for(const Ut of Ct){if(bt&&(bt.timeEnd??0)+Xe>=Ut){bt.timeEnd=Ut;continue}bt&&ht.push(bt),bt={time:Ut,timeEnd:Ut,annotation:Oe,title:(0,E.W)(Ge,gn),tags:Sn,text:(0,E.W)(nt,gn)}}bt&&(bt.timeEnd=Ct[Ct.length-1],ht.push(bt))}return ht},this.type="prometheus",this.subType=L.T8.Prometheus,this.rulerEnabled=!1,this.id=ue.id,this.url=ue.url,this.access=ue.access,this.basicAuth=ue.basicAuth,this.withCredentials=ue.withCredentials,this.interval=ue.jsonData.timeInterval||"15s",this.queryTimeout=ue.jsonData.queryTimeout,this.httpMethod=ue.jsonData.httpMethod||"GET",this.directUrl=ue.jsonData.directUrl??this.url,this.exemplarTraceIdDestinations=ue.jsonData.exemplarTraceIdDestinations,this.hasIncrementalQuery=ue.jsonData.incrementalQuerying??!1,this.ruleMappings={},this.languageProvider=Ne??new X.ZP(this),this.lookupsDisabled=ue.jsonData.disableMetricsLookup??!1,this.customQueryParameters=new URLSearchParams(ue.jsonData.customQueryParameters),this.datasourceConfigurationPrometheusFlavor=ue.jsonData.prometheusType,this.datasourceConfigurationPrometheusVersion=ue.jsonData.prometheusVersion,this.defaultEditor=ue.jsonData.defaultEditor,this.disableRecordingRules=ue.jsonData.disableRecordingRules??!1,this.variables=new ct(this,this.templateSrv,this.timeSrv),this.exemplarsAvailable=!0,this.cacheLevel=ue.jsonData.cacheLevel??le.x3.Low,this.cache=new Je.tQ({getTargetSignature:this.getPrometheusTargetSignature.bind(this),overlapString:ue.jsonData.incrementalQueryOverlapWindow??Je.Ji,profileFunction:this.getPrometheusProfileData.bind(this)}),this.annotations={QueryEditor:Q}}getQueryDisplayText(ue){return ue.expr}getPrometheusProfileData(ue,xe){return{interval:xe.interval??ue.interval,expr:this.interpolateString(xe.expr),datasource:"Prometheus"}}getPrometheusTargetSignature(ue,xe){return`${this.interpolateString(xe.expr)}|${xe.interval??ue.interval}|${JSON.stringify(ue.rangeRaw??"")}|${xe.exemplar}`}hasLabelsMatchAPISupport(){return this._isDatasourceVersionGreaterOrEqualTo("2.24.0",L.T8.Prometheus)||this._isDatasourceVersionGreaterOrEqualTo("2.0.0",L.T8.Mimir)||this._isDatasourceVersionGreaterOrEqualTo("1.11.0",L.T8.Cortex)||this._isDatasourceVersionGreaterOrEqualTo("0.18.0",L.T8.Thanos)}_isDatasourceVersionGreaterOrEqualTo(ue,xe){return!this.datasourceConfigurationPrometheusVersion||!this.datasourceConfigurationPrometheusFlavor||xe!==this.datasourceConfigurationPrometheusFlavor?!1:b().gte(this.datasourceConfigurationPrometheusVersion,ue)}_addTracingHeaders(ue,xe){ue.headers={},this.access==="proxy"&&(ue.headers["X-Dashboard-UID"]=xe.dashboardUID,ue.headers["X-Panel-Id"]=xe.panelId)}_request(ue,xe,Ve={}){if(this.access==="direct"){const ve=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return(0,s._)(()=>ve)}xe=xe||{};for(const[ve,ze]of this.customQueryParameters)xe[ve]==null&&(xe[ve]=ze);let Ne=this.url+ue;ue.startsWith(`/api/datasources/uid/${this.uid}`)&&(Ne=ue);const fe=(0,t.defaults)(Ve,{url:Ne,method:this.httpMethod,headers:{}});return fe.method==="GET"?xe&&Object.keys(xe).length&&(fe.url=fe.url+(fe.url.search(/\?/)>=0?"&":"?")+Object.entries(xe).map(([ve,ze])=>`${encodeURIComponent(ve)}=${encodeURIComponent(ze)}`).join("&")):(fe.headers["Content-Type"]="application/x-www-form-urlencoded",fe.data=xe),(this.basicAuth||this.withCredentials)&&(fe.withCredentials=!0),this.basicAuth&&(fe.headers.Authorization=this.basicAuth),(0,S.i)().fetch(fe)}async importFromAbstractQueries(ue){return ue.map(xe=>this.languageProvider.importFromAbstractQuery(xe))}async exportToAbstractQueries(ue){return ue.map(xe=>this.languageProvider.exportToAbstractQuery(xe))}async metadataRequest(ue,xe={},Ve){if(Be.some(Ne=>ue.includes(Ne)))try{return await(0,r.n)(this._request(`/api/datasources/uid/${this.uid}/resources${ue}`,xe,{method:this.httpMethod,hideFromInspector:!0,showErrorAlert:!1,...Ve}))}catch(Ne){if(this.httpMethod==="POST"&&(0,S.kW)(Ne)&&(Ne.status===405||Ne.status===400))console.warn("Couldn't use configured POST HTTP method for this request. Trying to use GET method instead.");else throw Ne}return await(0,r.n)(this._request(`/api/datasources/uid/${this.uid}/resources${ue}`,xe,{method:"GET",hideFromInspector:!0,...Ve}))}interpolateQueryExpr(ue=[],xe){if(!xe.multi&&!xe.includeAll)return Ie(ue);if(typeof ue=="string")return Te(ue);const Ve=ue.map(Ne=>Te(Ne));return Ve.length===1?Ve[0]:"("+Ve.join("|")+")"}targetContainsTemplate(ue){return this.templateSrv.containsTemplate(ue.expr)}shouldRunExemplarQuery(ue,xe){if(ue.exemplar){const Ve=this.languageProvider.histogramMetrics.find(ve=>ue.expr.includes(ve)),Ne=xe.targets.findIndex(ve=>ve.refId===ue.refId),fe=xe.targets.slice(0,Ne).filter(ve=>!ve.hide);return!!(!Ve||Ve&&!fe.some(ve=>ve.expr.includes(Ve)))}return!1}processTargetV2(ue,xe){const Ve=[],Ne={...ue,exemplar:this.shouldRunExemplarQuery(ue,xe),requestId:xe.panelId+ue.refId,utcOffsetSec:this.timeSrv.timeRange().to.utcOffset()*60};return ue.instant&&ue.range?Ve.push({...Ne,refId:Ne.refId,instant:!1},{...Ne,refId:Ne.refId+Le,range:!1}):Ve.push(Ne),Ve}query(ue){if(this.access==="proxy"){let xe,Ve;const Ne=ue.targets.some(ze=>ze.instant);this.hasIncrementalQuery&&!Ne?(Ve=this.cache.requestInfo(ue),xe=Ve.requests[0]):xe=ue;const fe=xe.targets.map(ze=>this.processTargetV2(ze,xe)),ve=new Date;return super.query({...xe,targets:fe.flat()}).pipe((0,a.U)(ze=>{const Oe={...ze,data:this.cache.procFrames(ue,Ve,ze.data)};return(0,Ue.n)(Oe,ue,{exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})}),(0,g.b)(ze=>{tt(ze,ue,ve)}))}else{const xe=(0,te.jj)(ue.range.from,!1),Ve=(0,te.jj)(ue.range.to,!0),{queries:Ne,activeTargets:fe}=this.prepareTargets(ue,xe,Ve);return!Ne||!Ne.length?(0,m.of)({data:[],state:C.Gu.Done}):ue.app===v.zj.Explore?this.exploreQuery(Ne,fe,Ve):this.panelsQuery(Ne,fe,Ve,ue.requestId,ue.scopedVars)}}exploreQuery(ue,xe,Ve){let Ne=ue.length;const fe=ue.map((ve,ze)=>{const Oe=xe[ze],Fe=(0,d.z)((0,g.b)(()=>Ne--),(0,c.h)(Ge=>!Ge.cancelled),(0,a.U)(Ge=>({data:(0,Ue.vs)(Ge,{query:ve,target:Oe,responseListLength:ue.length,exemplarTraceIdDestinations:this.exemplarTraceIdDestinations}),key:ve.requestId,state:Ne===0?C.Gu.Done:C.Gu.Loading})));return this.runQuery(ve,Ve,Fe)});return(0,o.T)(...fe)}panelsQuery(ue,xe,Ve,Ne,fe){const ve=ue.map((ze,Oe)=>{const Fe=xe[Oe],Ge=(0,d.z)((0,c.h)(nt=>!nt.cancelled),(0,a.U)(nt=>(0,Ue.vs)(nt,{query:ze,target:Fe,responseListLength:ue.length,scopedVars:fe,exemplarTraceIdDestinations:this.exemplarTraceIdDestinations})));return this.runQuery(ze,Ve,Ge)});return(0,l.D)(ve).pipe((0,a.U)(ze=>({data:ze.reduce((Fe,Ge)=>[...Fe,...Ge],[]),key:Ne,state:C.Gu.Done})))}runQuery(ue,xe,Ve){return ue.instant?this.performInstantQuery(ue,xe).pipe(Ve):ue.exemplar?this.getExemplars(ue).pipe((0,h.K)(()=>(0,m.of)({data:[],state:C.Gu.Done})),Ve):this.performTimeSeriesQuery(ue,ue.start,ue.end).pipe(Ve)}createQuery(ue,xe,Ve,Ne){const fe={hinting:ue.hinting,instant:ue.instant,exemplar:ue.exemplar,step:0,expr:"",refId:ue.refId,start:0,end:0},ve=Math.ceil(Ne-Ve);let ze=y.intervalToSeconds(xe.interval);const Oe=y.intervalToSeconds(this.templateSrv.replace(ue.interval||xe.interval,xe.scopedVars)),Fe=ue.interval?y.intervalToSeconds(this.templateSrv.replace(ue.interval,xe.scopedVars)):y.intervalToSeconds(this.interval),Ge=ue.intervalFactor||1,nt=this.adjustInterval(ze,Oe,ve,Ge);let Xe={...xe.scopedVars,...this.getRangeScopedVars(xe.range),...this.getRateIntervalScopedVariable(nt,Fe)};ze!==nt&&(ze=nt,Xe=Object.assign({},xe.scopedVars,{__interval:{text:ze+"s",value:ze+"s"},__interval_ms:{text:ze*1e3,value:ze*1e3},...this.getRateIntervalScopedVariable(ze,Fe),...this.getRangeScopedVars(xe.range)})),fe.step=ze;let ut=ue.expr;ut=this.enhanceExprWithAdHocFilters(ut),fe.expr=this.templateSrv.replace(ut,Xe,this.interpolateQueryExpr);const ht=He(Ve,Ne,fe.step,this.timeSrv.timeRange().to.utcOffset()*60);return fe.start=ht.start,fe.end=ht.end,this._addTracingHeaders(fe,xe),fe}getRateIntervalScopedVariable(ue,xe){xe===0&&(xe=15);const Ve=Math.max(ue+xe,4*xe);return{__rate_interval:{text:Ve+"s",value:Ve+"s"}}}adjustInterval(ue,xe,Ve,Ne){let fe=Ve/11e3;return fe>1&&(fe=Math.ceil(fe)),Math.max(ue*Ne,xe,fe)}performTimeSeriesQuery(ue,xe,Ve){if(xe>Ve)throw{message:"Invalid time range"};const Ne="/api/v1/query_range",fe={query:ue.expr,start:xe,end:Ve,step:ue.step};return this.queryTimeout&&(fe.timeout=this.queryTimeout),this._request(Ne,fe,{requestId:ue.requestId,headers:ue.headers}).pipe((0,h.K)(ve=>ve.cancelled?(0,m.of)(ve):(0,s._)(this.handleErrors(ve,ue))))}performInstantQuery(ue,xe){const Ve="/api/v1/query",Ne={query:ue.expr,time:xe};return this.queryTimeout&&(Ne.timeout=this.queryTimeout),this._request(`/api/datasources/uid/${this.uid}/resources${Ve}`,Ne,{requestId:ue.requestId,headers:ue.headers}).pipe((0,h.K)(fe=>fe.cancelled?(0,m.of)(fe):(0,s._)(this.handleErrors(fe,ue))))}metricFindQuery(ue){if(!ue)return Promise.resolve([]);const xe={__interval:{text:this.interval,value:this.interval},__interval_ms:{text:y.intervalToMs(this.interval),value:y.intervalToMs(this.interval)},...this.getRangeScopedVars(this.timeSrv.timeRange())},Ve=this.templateSrv.replace(ue,xe,this.interpolateQueryExpr);return new Ce(this,Ve).process()}getRangeScopedVars(ue=this.timeSrv.timeRange()){const xe=ue.to.diff(ue.from),Ve=Math.round(xe/1e3);return{__range_ms:{text:xe,value:xe},__range_s:{text:Ve,value:Ve},__range:{text:Ve+"s",value:Ve+"s"}}}async annotationQuery(ue){if(this.access==="direct"){const ve=new Error("Browser access mode in the Prometheus datasource is no longer available. Switch to server access mode.");return Promise.reject(ve)}const xe=ue.annotation,{expr:Ve=""}=xe;if(!Ve)return Promise.resolve([]);const Ne=ue.annotation.step||ge,fe={expr:Ve,range:!0,instant:!1,exemplar:!1,interval:Ne,refId:"X",datasource:this.getRef()};return await(0,r.n)((0,S.i)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:((0,te.jj)(ue.range.from,!1)*1e3).toString(),to:((0,te.jj)(ue.range.to,!0)*1e3).toString(),queries:[this.applyTemplateVariables(fe,{})]},requestId:`prom-query-${xe.name}`}).pipe((0,a.U)(ve=>this.processAnnotationResponse(ue,ve.data))))}getExemplars(ue){const xe="/api/v1/query_exemplars";return this._request(xe,{query:ue.expr,start:ue.start.toString(),end:ue.end.toString()},{requestId:ue.requestId,headers:ue.headers})}async getTagKeys(ue){if(ue?.series){const xe=await Promise.all(ue.series.map(fe=>this.languageProvider.fetchSeriesLabels(fe)));let Ve=[];return xe.map(fe=>Ve=Ve.concat(Object.keys(fe))),[...new Set(Ve)].map(fe=>({text:fe}))}else{const xe=this.getTimeRangeParams();return(await this.metadataRequest("/api/v1/labels",xe))?.data?.data?.map(Ne=>({text:Ne}))??[]}}async getTagValues(ue={}){const xe=this.getTimeRangeParams();return(await this.metadataRequest(`/api/v1/label/${ue.key}/values`,xe))?.data?.data?.map(Ne=>({text:Ne}))??[]}async getBuildInfo(){try{return await(0,O.WG)({url:this.url,name:this.name,type:"prometheus"})}catch{return}}getBuildInfoMessage(ue){const xe=i.createElement(x.C,{color:"green",icon:"check",text:"Ruler API enabled"}),Ve=i.createElement(x.C,{color:"orange",icon:"exclamation-triangle",text:"Ruler API not enabled"}),Ne=i.createElement(M.u,{placement:"top",content:"Prometheus does not allow editing rules, connect to either a Mimir or Cortex datasource to manage alerts via Grafana."},i.createElement("div",null,i.createElement(x.C,{color:"red",icon:"exclamation-triangle",text:"Ruler API not supported"}))),fe={[L.T8.Cortex]:"/public/app/plugins/datasource/prometheus/img/cortex_logo.svg",[L.T8.Mimir]:"/public/app/plugins/datasource/prometheus/img/mimir_logo.svg",[L.T8.Prometheus]:"/public/app/plugins/datasource/prometheus/img/prometheus_logo.svg",[L.T8.Thanos]:"/public/app/plugins/datasource/prometheus/img/thanos_logo.svg"},ve={[L.T8.Cortex]:"blue",[L.T8.Mimir]:"orange",[L.T8.Prometheus]:"red",[L.T8.Thanos]:"purple"},ze={[L.T8.Cortex]:"Cortex",[L.T8.Mimir]:"Mimir",[L.T8.Prometheus]:"Prometheus",[L.T8.Thanos]:"Thanos"},Oe=this.datasourceConfigurationPrometheusFlavor??ue.application,Fe=i.createElement(x.C,{text:i.createElement("span",null,i.createElement("img",{style:{width:14,height:14,verticalAlign:"text-bottom"},src:fe[Oe??L.T8.Prometheus],alt:""})," ",Oe?ze[Oe]:"Unknown"),color:ve[Oe??L.T8.Prometheus]});return i.createElement("div",{style:{display:"grid",gridTemplateColumns:"max-content max-content",rowGap:"0.5rem",columnGap:"2rem",marginTop:"1rem"}},i.createElement("div",null,"Type"),i.createElement("div",null,Fe),i.createElement(i.Fragment,null,i.createElement("div",null,"Ruler API"),ue.application===L.T8.Prometheus&&i.createElement("div",null,Ne),ue.application!==L.T8.Prometheus&&i.createElement("div",null,ue.features.rulerApiEnabled?xe:Ve)))}interpolateVariablesInQueries(ue,xe){let Ve=ue;return ue&&ue.length&&(Ve=ue.map(Ne=>({...Ne,datasource:this.getRef(),expr:this.enhanceExprWithAdHocFilters(this.templateSrv.replace(Ne.expr,xe,this.interpolateQueryExpr)),interval:this.templateSrv.replace(Ne.interval,xe)}))),Ve}getQueryHints(ue,xe){return we(ue.expr??"",xe,this)}getInitHints(){return _e(this)}async loadRules(){try{const xe=(await this.metadataRequest("/api/v1/rules",{},{showErrorAlert:!1})).data?.data?.groups;xe&&(this.ruleMappings=Pe(xe))}catch(ue){console.log("Rules API is experimental. Ignore next error."),console.error(ue)}}async areExemplarsAvailable(){try{return(await this.metadataRequest("/api/v1/query_exemplars",{query:"test",start:(0,u.CQ)().subtract(30,"minutes").valueOf().toString(),end:(0,u.CQ)().valueOf().toString()},{showErrorAlert:!1})).data.status==="success"}catch{return!1}}modifyQuery(ue,xe){let Ve=ue.expr??"";switch(xe.type){case"ADD_FILTER":{const{key:Ne,value:fe}=xe.options??{};Ne&&fe&&(Ve=(0,w.F)(Ve,Ne,fe));break}case"ADD_FILTER_OUT":{const{key:Ne,value:fe}=xe.options??{};Ne&&fe&&(Ve=(0,w.F)(Ve,Ne,fe,"!="));break}case"ADD_HISTOGRAM_QUANTILE":{Ve=`histogram_quantile(0.95, sum(rate(${Ve}[$__rate_interval])) by (le))`;break}case"ADD_RATE":{Ve=`rate(${Ve}[$__rate_interval])`;break}case"ADD_SUM":{Ve=`sum(${Ve.trim()}) by ($1)`;break}case"EXPAND_RULES":{xe.options&&(Ve=(0,te.ll)(Ve,xe.options));break}default:break}return{...ue,expr:Ve}}getAdjustedInterval(){if(!V.default.featureToggles.prometheusResourceBrowserCache)return this.getTimeRangeParams();const ue=this.timeSrv.timeRange();return(0,te.wY)(this.cacheLevel,ue)}getTimeRangeParams(){const ue=this.timeSrv.timeRange();return{start:(0,te.jj)(ue.from,!1).toString(),end:(0,te.jj)(ue.to,!0).toString()}}getOriginalMetricName(ue){return(0,Ue.nM)(ue)}enhanceExprWithAdHocFilters(ue){return this.templateSrv.getAdhocFilters(this.name).reduce((Ne,fe)=>{const{key:ve,operator:ze}=fe;let{value:Oe}=fe;return(ze==="=~"||ze==="!~")&&(Oe=Ie(Oe)),(0,w.F)(Ne,ve,Oe,ze)},ue)}filterQuery(ue){return!(ue.hide||!ue.expr)}applyTemplateVariables(ue,xe){const Ve=(0,t.cloneDeep)(xe);delete Ve.__interval,delete Ve.__interval_ms;const Ne=this.enhanceExprWithAdHocFilters(ue.expr);return{...ue,legendFormat:this.templateSrv.replace(ue.legendFormat,Ve),expr:this.templateSrv.replace(Ne,Ve,this.interpolateQueryExpr),interval:this.templateSrv.replace(ue.interval,Ve)}}getVariables(){return this.templateSrv.getVariables().map(ue=>`$${ue.name}`)}interpolateString(ue){return this.templateSrv.replace(ue,void 0,this.interpolateQueryExpr)}getDebounceTimeInMilliseconds(){switch(this.cacheLevel){case le.x3.Medium:return 600;case le.x3.High:return 1200;default:return 350}}getDaysToCacheMetadata(){switch(this.cacheLevel){case le.x3.Medium:return 7;case le.x3.High:return 30;default:return 1}}getCacheDurationInMinutes(){return(0,te.l3)(this.cacheLevel)}getDefaultQuery(ue){const xe={refId:"A",expr:"",range:!0,instant:!1};return ue===v.zj.UnifiedAlerting?{...xe,instant:!0,range:!1}:ue===v.zj.Explore?{...xe,instant:!0,range:!0}:xe}}function He(Re,ue,xe,Ve){const Ne=Math.floor((ue+Ve)/xe)*xe-Ve,fe=Math.floor((Re+Ve)/xe)*xe-Ve;return{end:Ne,start:fe}}function Pe(Re){return Re.reduce((ue,xe)=>xe.rules.filter(Ve=>Ve.type==="recording").reduce((Ve,Ne)=>({...Ve,[Ne.name]:Ne.query}),ue),{})}function Ie(Re){return typeof Re=="string"?Re.replace(/\\/g,"\\\\").replace(/'/g,"\\\\'"):Re}function Te(Re){return typeof Re=="string"?Re.replace(/\\/g,"\\\\\\\\").replace(/[$^*{}\[\]\'+?.()|]/g,"\\\\$&"):Re}},41587:(j,I,e)=>{"use strict";e.d(I,{UQ:()=>x,ZK:()=>E,ZP:()=>U,nW:()=>R,ws:()=>M});var t=e(89949),n=e.n(t),i=e(84084),s=e(6570),r=e.n(s),m=e(99633),d=e(68246),o=e(69376),l=e(34667),a=e(95704),g=e(73308),c=e(60692),h=e(72054);const f=["job","instance"],b="{}",v=5,y=1e3*60*60*24,E=1e4,C=V=>({label:V}),u=V=>(V.kind="function",V),D=V=>({headers:{"X-Grafana-Cache":`private, max-age=${V}`}});function P(V,w){const K=Date.now()-y,B=w.filter(A=>A.ts>K&&A.query===V.label),W=B.length,_=B[0];let k=`Queried ${W} times in the last 24h.`;if(_){const A=(0,m.CQ)(_.ts).fromNow();k=`${k} Last queried ${A}.`}return{...V,documentation:k}}function S(V,w){const K={label:V};return w&&w[V]&&(K.documentation=x(V,w)),K}function x(V,w){if(!w[V])return;const{type:K,help:B}=w[V];return`${K.toUpperCase()}: ${B}`}function M(V,w){if(w[V])return w[V].help}function R(V,w){if(w[V])return w[V].type}const O=/(="|!="|=~"|!~"|\{|\[|\(|\+|-|\/|\*|%|\^|\band\b|\bor\b|\bunless\b|==|>=|!=|<=|>|<|=|~|,)/,T=86400;class U extends d.iL{constructor(w,K){super(),this.labelKeys=[],this.labelsCache=new i.z({max:10}),this.labelValuesCache=new i.z({max:10}),this.request=async(B,W,_={},k)=>{try{return(await this.datasource.metadataRequest(B,_,k)).data.data}catch(A){console.error(A)}return W},this.start=async()=>this.datasource.lookupsDisabled?[]:(this.metrics=await this.fetchLabelValues("__name__")||[],this.histogramMetrics=(0,g.NO)(this.metrics).sort(),Promise.all([this.loadMetricsMetadata(),this.fetchLabels()])),this.provideCompletionItems=async({prefix:B,text:W,value:_,labelKey:k,wrapperClasses:A},z={})=>{const H={suggestions:[]};if(!_)return H;const Q=_.document.text.length===0,X=_.document.getTextsAtRange(_.selection),te=X.size===1?X.first().getText():null,oe=te?te[_.selection.anchor.offset]:null,Z=A.length>3,le=B&&!Z,ce=!oe||oe===")",q=B&&!W.match(/^[\]})\s]+$/)&&ce,ne=/[+\-*/^%]/,pe=W.match(ne);return A.includes("context-range")?this.getRangeCompletionItems():A.includes("context-labels")?this.getLabelCompletionItems({prefix:B,text:W,value:_,labelKey:k,wrapperClasses:A}):A.includes("context-aggregation")?this.getAggregationCompletionItems(_):Q?this.getEmptyCompletionItems(z):le&&ce&&!pe?this.getBeginningCompletionItems(z):le&&q?this.getTermCompletionItems():H},this.getBeginningCompletionItems=B=>({suggestions:[...this.getEmptyCompletionItems(B).suggestions,...this.getTermCompletionItems().suggestions]}),this.getEmptyCompletionItems=B=>{const{history:W}=B,_=[];if(W&&W.length){const k=(0,t.chain)(W).map(A=>A.query.expr).filter().uniq().take(v).map(C).map(A=>P(A,W)).value();_.push({searchFunctionType:a.Z.Prefix,skipSort:!0,label:"History",items:k})}return{suggestions:_}},this.getTermCompletionItems=()=>{const{metrics:B,metricsMetadata:W}=this,_=[];return _.push({searchFunctionType:a.Z.Prefix,label:"Functions",items:c.r8.map(u)}),B&&B.length&&_.push({label:"Metrics",items:B.map(k=>S(k,W)),searchFunctionType:a.Z.Fuzzy}),{suggestions:_}},this.getAggregationCompletionItems=async B=>{const W=[];let _;const k=B.document.getBlocks().reduce((le,ce)=>{if(le===void 0)return"";if(!ce)return le;const q=ce?.getText();return B.anchorBlock.key===ce.key&&(_=B.selection.anchor.offset+le.length),le+q},""),A=k.lastIndexOf("(",_);let z=k.lastIndexOf("(",A-1),H=k.indexOf(")",z);if(z===-1){const le=k.indexOf(")",_);H=k.indexOf(")",le+1),z=k.lastIndexOf("(",H)}const Q={suggestions:W,context:"context-aggregation"};if(z===-1)return Q;const X=k.slice(z+1,H).replace(/\[[^\]]+\]$/,""),te=(0,g.rV)(X,X.length-2).selector,oe=await this.getSeries(te),Z=Object.keys(oe);if(Z.length>0){const le=(0,g.ZO)(Z);W.push({label:`Labels${le}`,items:Z.map(C),searchFunctionType:a.Z.Fuzzy})}return Q},this.getLabelCompletionItems=async({text:B,wrapperClasses:W,labelKey:_,value:k})=>{if(!k)return{suggestions:[]};const A=[],z=k.anchorBlock.getText(),H=k.selection.anchor.offset,Q=z.substr(H),X=z.substr(0,H),te=B.match(/^(=|=~|!=|!~)/),oe=Q.match(/^"?[,}]|$/),Z=X.match(/(=|=~|!=|!~)$/)&&Q.match(/^"/);if(!(te&&oe)&&!(oe&&!te)||Z)return{suggestions:A};let q,ne;try{ne=(0,g.rV)(z,H),q=ne.selector}catch{q=b}const pe=q.includes("__name__="),re=ne?ne.labelKeys:[];let ie={};if(q&&(ie=await this.getSeries(q,!pe)),Object.keys(ie).length===0)return console.warn(`Server did not return any values for selector = ${q}`),{suggestions:A};let Se;if(B&&te||W.includes("attr-value")){if(_&&ie[_]){Se="context-label-values";const ye=(0,g.ZO)(ie[_]);A.push({label:`Label values for "${_}"${ye}`,items:ie[_].map(C),searchFunctionType:a.Z.Fuzzy})}}else{const ye=ie?Object.keys(ie):pe?null:f;if(ye){const Ce=(0,t.difference)(ye,re);if(Ce.length){Se="context-labels";const de=Ce.map(Je=>({label:Je})),_e={label:`Labels${(0,g.ZO)(de)}`,items:de,searchFunctionType:a.Z.Fuzzy};A.push(_e)}}}return{context:Se,suggestions:A}},this.fetchLabelValues=async B=>{const W=this.datasource.getAdjustedInterval(),k=`/api/v1/label/${this.datasource.interpolateString(B)}/values`;return await this.request(k,[],W,this.getDefaultCacheHeaders())??[]},this.getSeriesValues=async(B,W)=>this.datasource.hasLabelsMatchAPISupport()?await this.fetchSeriesValuesWithMatch(B,W):(await this.getSeries(W))[B]??[],this.fetchSeriesValuesWithMatch=async(B,W)=>{const _=B?this.datasource.interpolateString(B):null,k=W?this.datasource.interpolateString(W):null,A=this.datasource.getAdjustedInterval(),z={...A,...k&&{"match[]":k}};return l.config.featureToggles.prometheusResourceBrowserCache?await this.request(`/api/v1/label/${_}/values`,[],z,this.getDefaultCacheHeaders())??[]:await this.fetchSeriesValuesLRUCache(_,A,B,z)},this.getSeriesLabels=async(B,W)=>{let _,k;this.datasource.hasLabelsMatchAPISupport()?(W.push({name:"__name__",value:"",op:"!="}),k=await this.fetchSeriesLabelsMatch(B),_=Object.keys(k)):(k=await this.getSeries(B),_=Object.keys(k));const A=new Set(W.map(z=>z.name));return _.filter(z=>!A.has(z))},this.fetchSeriesLabels=async(B,W)=>{const _=this.datasource.interpolateString(B),k=this.datasource.getAdjustedInterval(),A={...k,"match[]":_},z="/api/v1/series";if(!l.config.featureToggles.prometheusResourceBrowserCache)return await this.fetchSeriesLabelsLRUCache(_,k,W,z,A);const H=await this.request(z,[],A,this.getDefaultCacheHeaders()),{values:Q}=(0,g.DY)(H,W);return Q},this.fetchSeriesLabelsMatch=async(B,W)=>{const _=this.datasource.interpolateString(B),k=this.datasource.getAdjustedInterval(),A={...k,"match[]":_},z="/api/v1/labels";return l.config.featureToggles.prometheusResourceBrowserCache?(await this.request(z,[],A,this.getDefaultCacheHeaders())).reduce((Q,X)=>({...Q,[X]:""}),{}):await this.fetchSeriesLabelMatchLRUCache(_,k,W,z,A)},this.fetchSeries=async B=>{const W="/api/v1/series",k={...this.datasource.getTimeRangeParams(),"match[]":B};return await this.request(W,{},k,this.getDefaultCacheHeaders())},this.fetchDefaultSeries=(0,t.once)(async()=>{const B=await Promise.all(f.map(W=>this.fetchLabelValues(W)));return f.reduce((W,_,k)=>({...W,[_]:B[k]}),{})}),this.datasource=w,this.histogramMetrics=[],this.timeRange={start:0,end:0},this.metrics=[],Object.assign(this,K)}getDefaultCacheHeaders(){if(l.config.featureToggles.prometheusResourceBrowserCache&&this.datasource.cacheLevel!==h.x3.None)return D(this.datasource.getCacheDurationInMinutes()*60)}cleanText(w){return w.split(O).pop().trimLeft().replace(/"$/,"").replace(/^"/,"")}get syntax(){return c.ZP}async loadMetricsMetadata(){const w=l.config.featureToggles.prometheusResourceBrowserCache?D(this.datasource.getDaysToCacheMetadata()*T):{};this.metricsMetadata=(0,g.I4)(await this.request("/api/v1/metadata",{},{},{showErrorAlert:!1,...w}))}getLabelKeys(){return this.labelKeys}getRangeCompletionItems(){return{context:"context-range",suggestions:[{label:"Range vector",items:[...c.Ty]}]}}importFromAbstractQuery(w){return(0,g.e5)(w)}exportToAbstractQuery(w){const K=w.expr;if(!K||K.length===0)return{refId:w.refId,labelMatchers:[]};const B=r().tokenize(K,c.ZP),W=(0,g.UO)(B),_=L(K,B);return _&&_.length>0&&W.push({name:"__name__",operator:o.K2.Equal,value:_}),{refId:w.refId,labelMatchers:W}}async getSeries(w,K){if(this.datasource.lookupsDisabled)return{};try{return w===b?await this.fetchDefaultSeries():await this.fetchSeriesLabels(w,K)}catch(B){return console.error(B),{}}}async getLabelValues(w){return await this.fetchLabelValues(w)}async fetchLabels(){const w="/api/v1/labels",K=this.datasource.getAdjustedInterval();this.labelFetchTs=Date.now().valueOf();const B=await this.request(w,[],K,this.getDefaultCacheHeaders());return Array.isArray(B)&&(this.labelKeys=B.slice().sort()),[]}async fetchSeriesValuesLRUCache(w,K,B,W){const k=`/api/v1/label/?${new URLSearchParams({"match[]":w??"",start:(0,g.s4)(parseInt(K.start,10)).toString(),end:(0,g.s4)(parseInt(K.end,10)).toString(),name:B}).toString()}/values`;let A=this.labelValuesCache.get(k);return A||(A=await this.request(`/api/v1/label/${w}/values`,[],W),A&&this.labelValuesCache.set(k,A)),A??[]}async fetchSeriesLabelsLRUCache(w,K,B,W,_){const A=`/api/v1/series?${new URLSearchParams({"match[]":w,start:(0,g.s4)(parseInt(K.start,10)).toString(),end:(0,g.s4)(parseInt(K.end,10)).toString(),withName:B?"true":"false"}).toString()}`;let z=this.labelsCache.get(A);if(!z){const H=await this.request(W,[],_),{values:Q}=(0,g.DY)(H,B);z=Q,this.labelsCache.set(A,z)}return z}async fetchSeriesLabelMatchLRUCache(w,K,B,W,_){const k=new URLSearchParams({"match[]":w,start:(0,g.s4)(parseInt(K.start,10)).toString(),end:(0,g.s4)(parseInt(K.end,10)).toString(),withName:B?"true":"false"}),A=`${W}?${k.toString()}`;let z=this.labelsCache.get(A);return z||(z=(await this.request(W,[],_)).reduce((Q,X)=>({...Q,[X]:""}),{}),this.labelsCache.set(A,z)),z}}function L(V,w){let K="";for(let B in w)if(typeof w[B]=="string"){K=w[B];break}return K}},73308:(j,I,e)=>{"use strict";e.d(I,{DY:()=>c,I4:()=>E,NO:()=>g,PL:()=>L,U9:()=>R,UO:()=>w,ZO:()=>S,e5:()=>V,jj:()=>W,l3:()=>B,ll:()=>v,o8:()=>C,rV:()=>b,s4:()=>u,tU:()=>O,wY:()=>K});var t=e(89949),n=e.n(t),i=e(6570),s=e.n(i),r=e(69376),m=e(35596),d=e(1726),o=e(85085),l=e(41587),a=e(72054);const g=_=>{const k=new Set,A=new RegExp("_bucket($|:)");for(let z=0;z<_.length;z++){const H=_[z];A.test(H)&&k.add(H)}return[...k]};function c(_,k=!1){const A={};_.forEach(H=>{const{__name__:Q,...X}=H;k&&(A.__name__=A.__name__||new Set,A.__name__.has(Q)||A.__name__.add(Q)),Object.keys(X).forEach(te=>{A[te]||(A[te]=new Set),A[te].has(X[te])||A[te].add(X[te])})});const z={};return P(Object.keys(A)).forEach(H=>{z[H]=P(Array.from(A[H]))}),{values:z,keys:Object.keys(z)}}const h=/\{[^}]*?(\}|$)/,f=/\b(\w+)(!?=~?)("[^"\n]*?")/g;function b(_,k=1){if(!_.match(h)){if(_.match(/^[A-Za-z:][\w:]*$/))return{selector:`{__name__="${_}"}`,labelKeys:["__name__"]};throw new Error("Query must contain a selector: "+_)}const A=_.slice(0,k),z=A.lastIndexOf("{"),H=A.lastIndexOf("}");if(z===-1)throw new Error("Not inside selector, missing open brace: "+A);if(H>-1&&H>z)throw new Error("Not inside selector, previous selector already closed: "+A);const Q=_.slice(k),te=Q.indexOf("}")+k,oe=Q.indexOf("{"),Z=oe+k;if(te===-1)throw new Error("Not inside selector, missing closing brace in suffix: "+Q);if(oe>-1&&Z<te)throw new Error("Not inside selector, next selector opens before this one closed: "+Q);const le=_.slice(z,te),ce={};le.replace(f,(Se,ye,Ce,de)=>{const we=_.indexOf(Se),_e=we+ye.length+Ce.length+1,Je=we+ye.length+Ce.length+de.length-1;return(k<_e||k>Je)&&(ce[ye]={value:de,operator:Ce}),""});const ne=_.slice(0,z).match(/[A-Za-z:][\w:]*$/);ne&&(ce.__name__={value:`"${ne[0]}"`,operator:"="});const pe=Object.keys(ce).sort(),ie=["{",pe.map(Se=>`${Se}${ce[Se].operator}${ce[Se].value}`).join(","),"}"].join("");return{labelKeys:pe,selector:ie}}function v(_,k){const A=Object.keys(k),z=new RegExp(`(\\s|^)(${A.join("|")})(\\s|$|\\(|\\[|\\{)`,"ig"),Q=_.replace(z,(oe,Z,le,ce)=>`${Z}${k[le]}${ce}`).split(/(\+|\-|\*|\/|\%|\^)/),X=/(\)\{|\}\{|\]\{)/;return Q.map(oe=>y(oe,X)).join("")}function y(_,k){const A=_.match(k);if(!A)return _;const z=A.index??0,H=_.slice(0,z+1),Q=_.slice(z+1),X=[];Q.replace(f,(oe,Z,le,ce)=>(X.push({key:Z,operator:le,value:ce}),""));let te=H;return X.filter(Boolean).forEach(oe=>{const Z=oe.value.slice(1,-1);te=(0,o.F)(te,oe.key,Z,oe.operator)}),te}function E(_){if(!_)return _;const k={},A={};for(const H in _){const Q=_[H][0];k[H]=Q,Q.type==="histogram"&&(A[`${H}_bucket`]={type:"counter",help:`Cumulative counters for the observation buckets (${Q.help})`},A[`${H}_count`]={type:"counter",help:`Count of events that have been observed for the histogram metric (${Q.help})`},A[`${H}_sum`]={type:"counter",help:`Total sum of all observed values for the histogram metric (${Q.help})`}),Q.type==="summary"&&(A[`${H}_count`]={type:"counter",help:`Count of events that have been observed for the base metric (${Q.help})`},A[`${H}_sum`]={type:"counter",help:`Total sum of all observed values for the base metric (${Q.help})`})}const z={};return z.ALERTS={type:"counter",help:"Time series showing pending and firing alerts. The sample value is set to 1 as long as the alert is in the indicated active (pending or firing) state."},{...k,...A,...z}}function C(_){return u(_/1e3)}function u(_){return Math.floor(_/60)}function D(_,k=1){return Math.ceil(_/60)-Math.ceil(_/60)%k}function P(_){return _.slice(0,l.ZK)}function S(_){return _&&_.length>=l.ZK?`, limited to the first ${l.ZK} received items`:""}const x=/[*+?()|\\.\[\]{}^$]/g;function M(_){return _.replace(x,"\\$&")}function R(_){return _.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/"/g,'\\"')}function O(_){return R(M(_))}const T={"=":r.K2.Equal,"!=":r.K2.NotEqual,"=~":r.K2.EqualRegEx,"!~":r.K2.NotEqualRegEx},U=(0,t.invert)(T);function L(_){const k=_.labelMatchers.map(A=>{const z=U[A.operator];return z?`${A.name}${z}"${A.value}"`:""}).filter(A=>A!=="").join(", ");return k?`{${k}}`:""}function V(_){return{refId:_.refId,expr:L(_),range:!0}}function w(_){const k=[];for(let A in _)if(_[A]instanceof i.Token){let z=_[A];if(z.type==="context-labels"){let H="",Q="",X="",te=z.content;for(let oe in te)if(typeof te[oe]=="string"){let Z;Z=te[oe],(Z==="="||Z==="!="||Z==="=~"||Z==="!~")&&(X=Z)}else if(te[oe]instanceof i.Token)switch(te[oe].type){case"label-key":H=te[oe].content;break;case"label-value":Q=te[oe].content,Q=Q.substring(1,Q.length-1);const Z=T[X];Z&&k.push({name:H,operator:Z,value:Q});break}}}return k}function K(_,k){if(_===a.x3.None)return{start:W(k.from,!1).toString(),end:W(k.to,!0).toString()};const A=W(k.from,!1),z=(0,m.mB)(A,B(_)*60),H=W(k.to,!0),Q=D(H,B(_))*60;if(z===Q){const oe=Q+B(_)*60;return{start:z.toString(),end:oe.toString()}}const X=z.toString(),te=Q.toString();return{start:X,end:te}}function B(_){switch(_){case a.x3.Medium:return 10;case a.x3.High:return 60;default:return 1}}function W(_,k){return typeof _=="string"&&(_=d.parse(_,k)),Math.ceil(_.valueOf()/1e3)}},60692:(j,I,e)=>{"use strict";e.d(I,{Ty:()=>t,ZP:()=>l,r8:()=>m});const t=[{label:"$__interval",sortValue:"$__interval"},{label:"$__rate_interval",sortValue:"$__rate_interval"},{label:"$__range",sortValue:"$__range"},{label:"1m",sortValue:"00:01:00"},{label:"5m",sortValue:"00:05:00"},{label:"10m",sortValue:"00:10:00"},{label:"30m",sortValue:"00:30:00"},{label:"1h",sortValue:"01:00:00"},{label:"1d",sortValue:"24:00:00"}],n=["by","group_left","group_right","ignoring","on","offset","without"],i=null,s=[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:"calculates the arccosine of all elements in v"},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:"calculates the inverse hyperbolic cosine of all elements in v"},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:"calculates the arcsine of all elements in v"},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:"calculates the inverse hyperbolic sine of all elements in v"},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:"calculates the arctangent of all elements in v"},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:"calculates the inverse hyperbolic tangent of all elements in v"},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:"calculates the cosine of all elements in v"},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:"calculates the hyperbolic cosine of all elements in v"},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:"calculates the sine of all elements in v"},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:"calculates the hyperbolic sine of all elements in v"},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:"calculates the tangent of all elements in v"},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:"calculates the hyperbolic tangent of all elements in v"}],m=[...[{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"group",insertText:"group",documentation:"All values in the resulting vector are 1"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"count_values",insertText:"count_values",documentation:"Count number of elements with the same value"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"},{label:"quantile",insertText:"quantile",documentation:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions"}],...s,{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:"Returns the input vector with all sample values converted to their absolute value."},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:"Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination."},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:"Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements."},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` up to the nearest integer."},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:"For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector."},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`."},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:"Clamps the sample values of all elements in `v` to have an upper limit of `max`."},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:"Clamps the sample values of all elements in `v` to have a lower limit of `min`."},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:"Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause."},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:"Converts radians to degrees for all elements in v"},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:"Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31."},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:"Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc."},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:"Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years."},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:"Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31."},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:"Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers."},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:"Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression."},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:"Drops all labels that have the same name and value across all series in the input vector."},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:"Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`"},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:"Rounds the sample values of all elements in `v` down to the nearest integer."},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:"Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels."},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:"Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1."},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:"Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23."},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:"Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels."},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:"Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments."},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:"Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for."},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:"For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function."},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:"For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged."},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:"Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`"},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:"Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:"Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`."},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:"Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59."},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:"Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc."},{insertText:"pi",label:"pi",detail:"pi()",documentation:"Returns pi"},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:"Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression."},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:"Converts degrees to radians for all elements in v"},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period."},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:"For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset."},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:"Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction."},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:"Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`."},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:"Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero."},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in ascending order."},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:"Returns vector elements sorted by their sample values, in descending order."},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:"Calculates the square root of all elements in `v`."},{insertText:"time",label:"time",detail:"time()",documentation:"Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated."},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:"Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC."},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:"Returns the scalar `s` as a vector with no labels."},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:"Returns the year for each of the given times in UTC."},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average value of all points in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum value of all points in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum value of all points in the specified interval."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The most recent point value in specified interval."},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:"The value 1 for any series in the specified interval."}],d=m.map(a=>a.label),l={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${m.map(a=>a.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${n.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},85400:(j,I,e)=>{"use strict";e.d(I,{K:()=>C,Z:()=>u});var t=e(60692),n=e(86146),i=e(4002),s=e(42994),r=e(29326);function m(){return[{id:r.G3.HistogramQuantile,name:"Histogram quantile",params:[{name:"Quantile",type:"number",options:[.99,.95,.9,.75,.5,.25]}],defaultParams:[.9],category:r.CM.Functions,renderer:s.pS,addOperationHandler:s.PP},{id:r.G3.LabelReplace,name:"Label replace",params:[{name:"Destination label",type:"string"},{name:"Replacement",type:"string"},{name:"Source label",type:"string"},{name:"Regex",type:"string"}],category:r.CM.Functions,defaultParams:["","$1","","(.*)"],renderer:s.zJ,addOperationHandler:s.PP},{id:r.G3.Ln,name:"Ln",params:[],defaultParams:[],category:r.CM.Functions,renderer:s.pS,addOperationHandler:s.PP},o(r.G3.Changes),o(r.G3.Rate,!0),o(r.G3.Irate),o(r.G3.Increase,!0),o(r.G3.Idelta),o(r.G3.Delta),d({id:r.G3.HoltWinters,params:[(0,s.kq)(),{name:"Smoothing Factor",type:"number"},{name:"Trend Factor",type:"number"}],defaultParams:["$__interval",.5,.5],alternativesKey:"range function",category:r.CM.RangeFunctions,renderer:s.e8,addOperationHandler:g,changeTypeHandler:l}),d({id:r.G3.PredictLinear,params:[(0,s.kq)(),{name:"Seconds from now",type:"number"}],defaultParams:["$__interval",60],alternativesKey:"range function",category:r.CM.RangeFunctions,renderer:s.e8,addOperationHandler:g,changeTypeHandler:l}),d({id:r.G3.QuantileOverTime,params:[(0,s.kq)(),{name:"Quantile",type:"number"}],defaultParams:["$__interval",.5],alternativesKey:"overtime function",category:r.CM.RangeFunctions,renderer:s.NZ,addOperationHandler:g,changeTypeHandler:l}),...n.EX,{id:r.G3.NestedQuery,name:"Binary operation with query",params:[],defaultParams:[],category:r.CM.BinaryOps,renderer:(P,S,x)=>x,addOperationHandler:c},d({id:r.G3.Abs}),d({id:r.G3.Absent}),d({id:r.G3.Acos,category:r.CM.Trigonometric}),d({id:r.G3.Acosh,category:r.CM.Trigonometric}),d({id:r.G3.Asin,category:r.CM.Trigonometric}),d({id:r.G3.Asinh,category:r.CM.Trigonometric}),d({id:r.G3.Atan,category:r.CM.Trigonometric}),d({id:r.G3.Atanh,category:r.CM.Trigonometric}),d({id:r.G3.Ceil}),d({id:r.G3.Clamp,name:"Clamp",params:[{name:"Minimum Scalar",type:"number"},{name:"Maximum Scalar",type:"number"}],defaultParams:[1,1]}),d({id:r.G3.ClampMax,params:[{name:"Maximum Scalar",type:"number"}],defaultParams:[1]}),d({id:r.G3.ClampMin,params:[{name:"Minimum Scalar",type:"number"}],defaultParams:[1]}),d({id:r.G3.Cos,category:r.CM.Trigonometric}),d({id:r.G3.Cosh,category:r.CM.Trigonometric}),d({id:r.G3.DayOfMonth,category:r.CM.Time}),d({id:r.G3.DayOfWeek,category:r.CM.Time}),d({id:r.G3.DayOfYear,category:r.CM.Time}),d({id:r.G3.DaysInMonth,category:r.CM.Time}),d({id:r.G3.Deg}),o(r.G3.Deriv),d({id:r.G3.Exp}),d({id:r.G3.Floor}),d({id:r.G3.Group}),d({id:r.G3.Hour}),d({id:r.G3.LabelJoin,params:[{name:"Destination Label",type:"string",editor:i.g},{name:"Separator",type:"string"},{name:"Source Label",type:"string",restParam:!0,optional:!0,editor:i.g}],defaultParams:["",",",""],renderer:h,addOperationHandler:f}),d({id:r.G3.Log10}),d({id:r.G3.Log2}),d({id:r.G3.Minute}),d({id:r.G3.Month}),d({id:r.G3.Pi,renderer:P=>`${P.id}()`}),d({id:r.G3.Quantile,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:s.pS}),d({id:r.G3.Rad}),o(r.G3.Resets),d({id:r.G3.Round,category:r.CM.Functions,params:[{name:"To Nearest",type:"number"}],defaultParams:[1]}),d({id:r.G3.Scalar}),d({id:r.G3.Sgn}),d({id:r.G3.Sin,category:r.CM.Trigonometric}),d({id:r.G3.Sinh,category:r.CM.Trigonometric}),d({id:r.G3.Sort}),d({id:r.G3.SortDesc}),d({id:r.G3.Sqrt}),d({id:r.G3.Stddev}),d({id:r.G3.Tan,category:r.CM.Trigonometric}),d({id:r.G3.Tanh,category:r.CM.Trigonometric}),d({id:r.G3.Time,renderer:P=>`${P.id}()`}),d({id:r.G3.Timestamp}),d({id:r.G3.Vector,params:[{name:"Value",type:"number"}],defaultParams:[1],renderer:P=>`${P.id}(${P.params[0]})`}),d({id:r.G3.Year})]}function d(D){return{...D,id:D.id,name:D.name??(0,s.t7)(D.id),params:D.params??[],defaultParams:D.defaultParams??[],category:D.category??r.CM.Functions,renderer:D.renderer??(D.params?s.zJ:s.pS),addOperationHandler:D.addOperationHandler??s.PP}}function o(D,P=!1){return{id:D,name:(0,s.t7)(D),params:[(0,s.kq)(P)],defaultParams:[P?"$__rate_interval":"$__interval"],alternativesKey:"range function",category:r.CM.RangeFunctions,renderer:a,addOperationHandler:g,changeTypeHandler:l}}function l(D,P){return(D.params[0]==="$__rate_interval"&&P.defaultParams[0]!=="$__rate_interval"||D.params[0]==="$__interval"&&P.defaultParams[0]!=="$__interval")&&(D.params=P.defaultParams),D}function a(D,P,S){let x=(D.params??[])[0]??"5m";return`${P.id}(${S}[${x}])`}function g(D,P,S){const x={id:D.id,params:D.defaultParams};return P.operations.length>0&&S.getOperationDef(P.operations[0].id).addOperationHandler===g?{...P,operations:[x,...P.operations.slice(1)]}:{...P,operations:[x,...P.operations]}}function c(D,P){return{...P,binaryQueries:[...P.binaryQueries??[],{operator:"/",query:P}]}}function h(D,P,S){if(typeof D.params[1]!="string")throw"The separator must be a string";const x=`"${D.params[1]}"`;return`${D.id}(${S}, "${D.params[0]}", ${x}, "${D.params.slice(2).join(x)}")`}function f(D,P){const S={id:D.id,params:D.defaultParams};return{...P,operations:[...P.operations,S]}}function b(){return[...(0,s.IT)(r.G3.Sum),...(0,s.IT)(r.G3.Avg),...(0,s.IT)(r.G3.Min),...(0,s.IT)(r.G3.Max),...(0,s.IT)(r.G3.Count),...(0,s.Z3)(r.G3.TopK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,s.Z3)(r.G3.BottomK,{params:[{name:"K-value",type:"number"}],defaultParams:[5]}),...(0,s.Z3)(r.G3.CountValues,{params:[{name:"Identifier",type:"string"}],defaultParams:["count"]}),v(r.G3.SumOverTime),v(r.G3.AvgOverTime),v(r.G3.MinOverTime),v(r.G3.MaxOverTime),v(r.G3.CountOverTime),v(r.G3.LastOverTime),v(r.G3.PresentOverTime),v(r.G3.AbsentOverTime),v(r.G3.StddevOverTime)]}function v(D){return{id:D,name:(0,s.t7)(D),params:[(0,s.kq)()],defaultParams:["$__interval"],alternativesKey:"overtime function",category:r.CM.RangeFunctions,renderer:y,addOperationHandler:g}}function y(D,P,S){let x=(D.params??[])[0]??"$__interval";return`${P.id}(${S}[${x}])`}var E=e(54433);class C extends E.x{constructor(){super(()=>{const P=[...m(),...b()];for(const S of P){const x=t.r8.find(M=>M.insertText===S.id);x&&(S.documentation=x.documentation)}return P}),this.setOperationCategories([r.CM.Aggregations,r.CM.RangeFunctions,r.CM.Functions,r.CM.BinaryOps,r.CM.Trigonometric,r.CM.Time])}getQueryPatterns(){return[{name:"Rate then sum",type:r.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]},{name:"Rate then sum by(label) then avg",type:r.Fz.Rate,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:[""]},{id:"avg",params:[]}]},{name:"Histogram quantile on rate",type:r.Fz.Histogram,operations:[{id:"rate",params:["$__rate_interval"]},{id:"__sum_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Histogram quantile on increase",type:r.Fz.Histogram,operations:[{id:"increase",params:["$__rate_interval"]},{id:"__max_by",params:["le"]},{id:"histogram_quantile",params:[.95]}]},{name:"Binary Query",type:r.Fz.Binary,operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}],binaryQueries:[{operator:"/",query:{metric:"",labels:[],operations:[{id:"rate",params:["$__rate_interval"]},{id:"sum",params:[]}]}}]}]}}const u=new C},86146:(j,I,e)=>{"use strict";e.d(I,{EX:()=>r,PX:()=>s,iQ:()=>i});var t=e(42994),n=e(29326);const i=[{id:n.G3.Addition,name:"Add scalar",sign:"+"},{id:n.G3.Subtraction,name:"Subtract scalar",sign:"-"},{id:n.G3.MultiplyBy,name:"Multiply by scalar",sign:"*"},{id:n.G3.DivideBy,name:"Divide by scalar",sign:"/"},{id:n.G3.Modulo,name:"Modulo by scalar",sign:"%"},{id:n.G3.Exponent,name:"Exponent",sign:"^"},{id:n.G3.EqualTo,name:"Equal to",sign:"==",comparison:!0},{id:n.G3.NotEqualTo,name:"Not equal to",sign:"!=",comparison:!0},{id:n.G3.GreaterThan,name:"Greater than",sign:">",comparison:!0},{id:n.G3.LessThan,name:"Less than",sign:"<",comparison:!0},{id:n.G3.GreaterOrEqual,name:"Greater or equal to",sign:">=",comparison:!0},{id:n.G3.LessOrEqual,name:"Less or equal to",sign:"<=",comparison:!0}],s=i.reduce((d,o)=>(d[o.sign]={id:o.id,comparison:o.comparison},d),{}),r=i.map(d=>{const o=[{name:"Value",type:"number"}],l=[2];return d.comparison&&(o.push({name:"Bool",type:"boolean",description:"If checked comparison will return 0 or 1 for the value rather than filtering."}),l.push(!1)),{id:d.id,name:d.name,params:o,defaultParams:l,alternativesKey:"binary scalar operations",category:n.CM.BinaryOps,renderer:m(d.sign),addOperationHandler:t.PP}});function m(d){return function(l,a,g){let c=l.params[0],h="";return l.params.length===2&&(h=l.params[1]?" bool":""),`${g} ${d}${h} ${c}`}}},4002:(j,I,e)=>{"use strict";e.d(I,{g:()=>m});var t=e(27702),n=e(81078),i=e(28580),s=e(85400),r=e(42994);function m({onChange:o,index:l,operationIndex:a,value:g,query:c,datasource:h}){const[f,b]=(0,t.useState)({});return t.createElement(i.Ph,{inputId:(0,r.i1)(a,l),autoFocus:g===""?!0:void 0,openMenuOnFocus:!0,onOpenMenu:async()=>{b({isLoading:!0});const v=await d(c,h);b({options:v,isLoading:void 0})},isLoading:f.isLoading,allowCustomValue:!0,noOptionsMessage:"No labels found",loadingMessage:"Loading labels",options:f.options,value:(0,n.E)(g),onChange:v=>o(l,v.value)})}async function d(o,l){let a=o.labels;l.type==="prometheus"&&(a=[{label:"__name__",op:"=",value:o.metric},...o.labels]);const g=s.Z.renderLabels(a),c=await l.languageProvider.fetchSeriesLabels(g);return Object.keys(c).map(h=>({label:h,value:h}))}},52390:(j,I,e)=>{"use strict";e.d(I,{U:()=>Ve});var t=e(27702),n=e(41587),i=e(85400),s=e(55889),r=e(42844),m=e(89949),d=e(38162),o=e(2906),l=e(81924),a=e(71107),g=e(53901),c=e(56027),h=e.n(c),f=e(81078),b=e(74639),v=e(70774),y=e(76715),E=e(28580),C=e(3819),u=e.n(C),D=e(34667),P=e(66310),S=e(66670),x=e(73453),M=e(48024),R=e(22655),O=e(13741),T=e(1128),U=e(62108),L=e(16532),V=e(77720),w=e(50852),K=e(42074),B=e(80011),W=e(86312),_=e(63824);const{setFilteredMetricCount:k}=_.stateSlice.actions;async function A(fe,ve,ze){let Oe=!0;const Fe=fe.languageProvider.metricsMetadata;Fe&&Object.keys(Fe).length===0&&(Oe=!1);let Ge={},nt={},Xe;return Xe=ze?.map(ut=>{const ht=z(ut,fe),wt=`${ut}\xA6${ht.description}`;return Ge[ut]=ht,nt[wt]=ht,ht}),{isLoading:!1,hasMetadata:Oe,metrics:Xe??[],metaHaystackDictionary:nt,nameHaystackDictionary:Ge,totalMetricCount:Xe?.length??0,filteredMetricCount:Xe?.length??0}}function z(fe,ve){let ze=(0,n.nW)(fe,ve.languageProvider.metricsMetadata);const Oe=(0,n.ws)(fe,ve.languageProvider.metricsMetadata);return["histogram","summary"].forEach(Ge=>{Oe?.toLowerCase().includes(Ge)&&ze!==Ge&&(ze+=` (${Ge})`)}),{value:fe,type:ze,description:Oe}}function H(fe,ve){const ze=Q(fe);return!fe.isLoading&&fe.filteredMetricCount!==ze.length&&ve(k(ze.length)),te(ze,fe.pageNum,fe.resultsPerPage)}function Q(fe){let ve=fe.metrics;return fe.fuzzySearchQuery&&!fe.useBackend&&(fe.fullMetaSearch?ve=fe.metaHaystackOrder.map(ze=>fe.metaHaystackDictionary[ze]):ve=fe.nameHaystackOrder.map(ze=>fe.nameHaystackDictionary[ze])),fe.selectedTypes.length>0&&(ve=ve.filter((ze,Oe)=>fe.selectedTypes.some(Ge=>ze.type&&Ge.value?ze.type.includes(Ge.value):!ze.type&&Ge.value==="no type"))),fe.includeNullMetadata||(ve=ve.filter(ze=>ze.type!==void 0&&ze.description!==void 0)),ve}function X(fe){if(!fe.metrics.length)return[];const ve=fe.resultsPerPage===0?1:fe.resultsPerPage,ze=Math.floor(Q(fe).length/ve)+1;return[...Array(ze).keys()].map(Oe=>Oe+1)}function te(fe,ve,ze){const Oe=ze===0?1:ze,Fe=ve===1?0:(ve-1)*Oe,Ge=Fe+Oe;return fe.slice(Fe,Ge)}const oe=(fe,ve,ze)=>fe<1?1:fe>ze?ze:fe??ve;async function Z(fe,ve,ze){const Oe=(0,s.Vl)(fe),Fe=ve.map(Xe=>`,${Xe.label}="${Xe.value}"`),Ge=`label_values({__name__=~".*${Oe}"${ve?Fe.join():""}},__name__)`;return await ze.metricFindQuery(Ge).then(Xe=>Xe.map(ut=>z(ut.text,ze)))}function le(fe,ve,ze,Oe){switch(fe){case"grafana_prom_metric_encycopedia_tracking":(0,W.ff)(fe,{metric:ze,hasMetadata:ve?.hasMetadata,totalMetricCount:ve?.totalMetricCount,fuzzySearchQuery:ve?.fuzzySearchQuery,fullMetaSearch:ve?.fullMetaSearch,selectedTypes:ve?.selectedTypes});case"grafana_prom_metric_encycopedia_disable_text_wrap_interaction":(0,W.ff)(fe,{disableTextWrap:ve?.disableTextWrap});case"grafana_prometheus_metric_encyclopedia_open":(0,W.ff)(fe,{query:Oe})}}const ce=[{value:"counter",description:"A cumulative metric that represents a single monotonically increasing counter whose value can only increase or be reset to zero on restart."},{value:"gauge",description:"A metric that represents a single numerical value that can arbitrarily go up and down."},{value:"histogram",description:"A histogram samples observations (usually things like request durations or response sizes) and counts them in configurable buckets."},{value:"summary",description:"A summary samples observations (usually things like request durations and response sizes) and can calculate configurable quantiles over a sliding time window."},{value:"unknown",description:"These metrics have been given the type unknown in the metadata."},{value:"no type",description:"These metrics have no defined type in the metadata."}],q={browse:"Search metrics by name",metadataSearchSwitch:"Include description in search",type:"Filter by type",includeNullMetadata:"Include results with no metadata",setUseBackend:"Enable regex search"};function ne(fe){const{state:ve,onChangeFullMetaSearch:ze,onChangeIncludeNullMetadata:Oe,onChangeDisableTextWrap:Fe,onChangeUseBackend:Ge}=fe,nt=(0,P.l4)(),Xe=pe(nt);return t.createElement(t.Fragment,null,t.createElement("div",{className:Xe.selectItem},t.createElement(K.r,{"data-testid":ge.searchWithMetadata,value:ve.fullMetaSearch,disabled:ve.useBackend||!ve.hasMetadata,onChange:()=>ze()}),t.createElement("div",{className:Xe.selectItemLabel},q.metadataSearchSwitch)),t.createElement("div",{className:Xe.selectItem},t.createElement(K.r,{value:ve.includeNullMetadata,disabled:!ve.hasMetadata,onChange:()=>Oe()}),t.createElement("div",{className:Xe.selectItemLabel},q.includeNullMetadata)),t.createElement("div",{className:Xe.selectItem},t.createElement(K.r,{value:ve.disableTextWrap,onChange:()=>Fe()}),t.createElement("div",{className:Xe.selectItemLabel},"Disable text wrap")),t.createElement("div",{className:Xe.selectItem},t.createElement(K.r,{"data-testid":ge.setUseBackend,value:ve.useBackend,onChange:()=>Ge()}),t.createElement("div",{className:Xe.selectItemLabel},q.setUseBackend,"\xA0"),t.createElement(B.u,{content:"Filter metric names by regex search, using an additional call on the Prometheus API.",placement:"bottom-end"},t.createElement(x.J,{name:"info-circle",size:"xs",className:Xe.settingsIcon}))))}function pe(fe){return{settingsIcon:(0,r.css)`
      color: ${fe.colors.text.secondary};
    `,selectItem:(0,r.css)`
      display: flex;
      flex-direction: row;
      align-items: center;
      padding: 4px 0;
    `,selectItemLabel:(0,r.css)`
      margin: 0 0 0 ${fe.spacing(1)};
      align-self: center;
      color: ${fe.colors.text.secondary};
      font-size: 12px;
    `}}var re=e(23852);function ie({feedbackUrl:fe}){const ve=(0,P.wW)(Se);return t.createElement(re.K,null,t.createElement("a",{href:fe,className:ve.link,title:"The metrics explorer is new, please let us know how we can improve it",target:"_blank",rel:"noreferrer noopener"},t.createElement(x.J,{name:"comment-alt-message"})," Give feedback"))}function Se(fe){return{link:(0,r.css)({color:fe.colors.text.secondary,fontSize:fe.typography.bodySmall.fontSize,":hover":{color:fe.colors.text.link},margin:"-25px 0 30px 0"})}}var ye=e(83923);function Ce(fe){const{metrics:ve,onChange:ze,onClose:Oe,query:Fe,state:Ge,disableTextWrap:nt}=fe,Xe=(0,P.l4)(),ut=de(Xe,nt);function ht(Cn){Cn.value&&(ze({...Fe,metric:Cn.value}),le("grafana_prom_metric_encycopedia_tracking",Ge,Cn.value),Oe())}function wt(Cn){return Ge.fullMetaSearch&&Cn?t.createElement(t.Fragment,null,t.createElement("td",null,vn(Cn.type??"")),t.createElement("td",null,t.createElement(u(),{textToHighlight:Cn.description??"",searchWords:Ge.metaHaystackMatches,autoEscape:!0,highlightClassName:ut.matchHighLight}))):t.createElement(t.Fragment,null,t.createElement("td",null,vn(Cn.type??"")),t.createElement("td",null,Cn.description??""))}function mn(Cn,pn,nn){return t.createElement(t.Fragment,null,Cn,t.createElement("span",{className:ut.tooltipSpace},t.createElement(B.u,{content:t.createElement(t.Fragment,null,"When creating a ",pn,", Prometheus exposes multiple series with the type counter."," ",(0,ye.Zg)(nn)),placement:"bottom-start",interactive:!0},t.createElement(x.J,{name:"info-circle",size:"xs"}))))}function vn(Cn){return Cn?Cn.includes("(summary)")?mn(Cn,"summary","https://prometheus.io/docs/concepts/metric_types/#summary"):Cn.includes("(histogram)")?mn(Cn,"histogram","https://prometheus.io/docs/concepts/metric_types/#histogram"):Cn:""}function gn(){let Cn;return Ge.fuzzySearchQuery||(Cn="There are no metrics found in the data source."),Fe.labels.length>0&&(Cn="There are no metrics found. Try to expand your label filters."),(Ge.fuzzySearchQuery||Ge.selectedTypes.length>0)&&(Cn="There are no metrics found. Try to expand your search and filters."),t.createElement("tr",{className:ut.noResults},t.createElement("td",{colSpan:3},Cn))}function Sn(Cn){return Cn.useBackend?[Cn.fuzzySearchQuery]:Cn.fullMetaSearch?Cn.metaHaystackMatches:Cn.nameHaystackMatches}return t.createElement("table",{className:ut.table},t.createElement("thead",{className:ut.stickyHeader},t.createElement("tr",null,t.createElement("th",{className:`${ut.nameWidth} ${ut.tableHeaderPadding}`},"Name"),Ge.hasMetadata&&t.createElement(t.Fragment,null,t.createElement("th",{className:`${ut.typeWidth} ${ut.tableHeaderPadding}`},"Type"),t.createElement("th",{className:`${ut.descriptionWidth} ${ut.tableHeaderPadding}`},"Description")),t.createElement("th",{className:ut.selectButtonWidth}," "))),t.createElement("tbody",null,t.createElement(t.Fragment,null,ve.length>0&&ve.map((Cn,pn)=>t.createElement("tr",{key:Cn?.value??pn,className:ut.row},t.createElement("td",{className:ut.nameOverflow},t.createElement(u(),{textToHighlight:Cn?.value??"",searchWords:Sn(Ge),autoEscape:!0,highlightClassName:ut.matchHighLight})),Ge.hasMetadata&&wt(Cn),t.createElement("td",null,t.createElement(S.zx,{size:"md",variant:"secondary",onClick:()=>ht(Cn),className:ut.centerButton},"Select")))),ve.length===0&&!Ge.isLoading&&gn())))}const de=(fe,ve)=>({table:(0,r.css)`
      ${ve?"":"table-layout: fixed;"}
      border-radius: ${fe.shape.borderRadius()};
      width: 100%;
      white-space: ${ve?"nowrap":"normal"};
      td {
        padding: ${fe.spacing(1)};
      }

      td,
      th {
        min-width: ${fe.spacing(3)};
        border-bottom: 1px solid ${fe.colors.border.weak};
      }
    `,row:(0,r.css)`
      label: row;
      border-bottom: 1px solid ${fe.colors.border.weak}
      &:last-child {
        border-bottom: 0;
      }
    `,tableHeaderPadding:(0,r.css)`
      padding: 8px;
    `,matchHighLight:(0,r.css)`
      background: inherit;
      color: ${fe.components.textHighlight.text};
      background-color: ${fe.components.textHighlight.background};
    `,nameWidth:(0,r.css)`
      ${ve?"":"width: 37.5%;"}
    `,nameOverflow:(0,r.css)`
      ${ve?"":"overflow-wrap: anywhere;"}
    `,typeWidth:(0,r.css)`
      ${ve?"":"width: 15%;"}
    `,descriptionWidth:(0,r.css)`
      ${ve?"":"width: 35%;"}
    `,selectButtonWidth:(0,r.css)`
      ${ve?"":"width: 12.5%;"}
    `,stickyHeader:(0,r.css)`
      position: sticky;
      top: 0;
      background-color: ${fe.colors.background.primary};
    `,noResults:(0,r.css)`
      text-align: center;
      color: ${fe.colors.text.secondary};
    `,tooltipSpace:(0,r.css)`
      margin-left: 4px;
    `,centerButton:(0,r.css)`
      display: block;
      margin: auto;
      border: none;
    `}),we=(fe,ve)=>({modal:(0,r.css)`
      width: 85vw;
      ${fe.breakpoints.down("md")} {
        width: 100%;
      }
      ${fe.breakpoints.up("xl")} {
        width: 60%;
      }
    `,inputWrapper:(0,r.css)`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    `,inputItemFirst:(0,r.css)`
      flex-basis: 40%;
      padding-right: 16px;
      ${fe.breakpoints.down("md")} {
        padding-right: 0px;
        padding-bottom: 16px;
      }
    `,inputItem:(0,r.css)`
      flex-grow: 1;
      flex-basis: 20%;
      ${fe.breakpoints.down("md")} {
        min-width: 100%;
      }
    `,selectWrapper:(0,r.css)`
      margin-bottom: ${fe.spacing(1)};
    `,resultsAmount:(0,r.css)`
      color: ${fe.colors.text.secondary};
      font-size: 0.85rem;
      padding: 0 0 4px 0;
    `,resultsData:(0,r.css)`
      margin: 4px 0 ${fe.spacing(2)} 0;
    `,resultsDataCount:(0,r.css)`
      margin: 0;
    `,resultsDataFiltered:(0,r.css)`
      color: ${fe.colors.text.secondary};
      text-align: center;
      border: solid 1px rgba(204, 204, 220, 0.25);
      padding: 7px;
    `,resultsDataFilteredText:(0,r.css)`
      display: inline;
      vertical-align: text-top;
    `,results:(0,r.css)`
      height: calc(80vh - 310px);
      overflow-y: scroll;
    `,resultsFooter:(0,r.css)`
      margin-top: 24px;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      position: sticky;
    `,currentlySelected:(0,r.css)`
      color: grey;
      opacity: 75%;
      font-size: 0.75rem;
    `,loadingSpinner:(0,r.css)`
      visibility: hidden;
    `,visible:(0,r.css)`
      visibility: visible;
    `,settingsBtn:(0,r.css)`
      float: right;
    `,noBorder:(0,r.css)`
      border: none;
    `,resultsPerPageLabel:(0,r.css)`
      color: ${fe.colors.text.secondary};
      opacity: 75%;
      padding-top: 5px;
      font-size: 0.85rem;
      margin-right: 8px;
    `,resultsPerPageWrapper:(0,r.css)`
      display: flex;
    `});var _e=e(12354);const Je=new _e.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1});function Ue(fe,ve,ze){const[Oe,Fe,Ge]=Je.search(fe,ve,!1,1e5);let nt=[],Xe=new Set;if(Oe&&Ge){const ut=(ht,wt)=>{wt&&Xe.add(ht)};for(let ht=0;ht<Ge.length;ht++){let wt=Ge[ht];_e.Z.highlight(fe[Fe.idx[wt]],Fe.ranges[wt],ut),nt.push(fe[Fe.idx[wt]])}ze([nt,[...Xe]])}else ve||ze([[],[]])}const $e=(0,m.debounce)(Ue,300),{setIsLoading:Qe,buildMetrics:tt,filterMetricsBackend:lt,setResultsPerPage:Me,setPageNum:De,setFuzzySearchQuery:We,setNameHaystack:qe,setMetaHaystack:st,setFullMetaSearch:dt,setIncludeNullMetadata:Tt,setSelectedTypes:Nt,setUseBackend:Bt,setDisableTextWrap:yt,showAdditionalSettings:ft}=_.stateSlice.actions,ct=fe=>{const{datasource:ve,isOpen:ze,onClose:Oe,onChange:Fe,query:Ge,initialMetrics:nt}=fe,[Xe,ut]=(0,t.useReducer)(_.stateSlice.reducer,(0,_.E3)(Ge)),ht=(0,P.l4)(),wt=we(ht,Xe.disableTextWrap),mn=(0,t.useCallback)(async()=>{ut(Qe(!0));const Ct=await A(ve,Ge,nt);ut(tt({isLoading:!1,hasMetadata:Ct.hasMetadata,metrics:Ct.metrics,metaHaystackDictionary:Ct.metaHaystackDictionary,nameHaystackDictionary:Ct.nameHaystackDictionary,totalMetricCount:Ct.metrics.length,filteredMetricCount:Ct.metrics.length}))},[Ge,ve,nt]);(0,t.useEffect)(()=>{mn()},[mn]);const vn=ce.map(Ct=>({value:Ct.value,label:Ct.value,description:Ct.description})),gn=(0,t.useMemo)(()=>h()(async Ct=>{ut(Qe(!0));const bt=await Z(Ct,Ge.labels,ve);ut(lt({metrics:bt,filteredMetricCount:bt.length,isLoading:!1}))},ve.getDebounceTimeInMilliseconds()),[ve,Ge]);function Sn(Ct){ut(qe(Ct))}function Cn(Ct){ut(st(Ct))}function pn(Ct,bt){Xe.useBackend&&Ct===""?mn():Xe.useBackend?gn(Ct):bt?$e(Object.keys(Xe.metaHaystackDictionary),Ct,Cn):$e(Object.keys(Xe.nameHaystackDictionary),Ct,Sn)}const nn=t.createElement(ne,{state:Xe,onChangeFullMetaSearch:()=>{const Ct=!Xe.fullMetaSearch;ut(dt(Ct)),Fe({...Ge,fullMetaSearch:Ct}),pn(Xe.fuzzySearchQuery,Ct)},onChangeIncludeNullMetadata:()=>{ut(Tt(!Xe.includeNullMetadata)),Fe({...Ge,includeNullMetadata:!Xe.includeNullMetadata})},onChangeDisableTextWrap:()=>{ut(yt()),Fe({...Ge,disableTextWrap:!Xe.disableTextWrap}),le("grafana_prom_metric_encycopedia_disable_text_wrap_interaction",Xe,"")},onChangeUseBackend:()=>{const Ct=!Xe.useBackend;ut(Bt(Ct)),Fe({...Ge,useBackend:Ct}),Ct===!1?mn():Xe.fuzzySearchQuery!==""&&gn(Xe.fuzzySearchQuery)}});return t.createElement(O.u,{"data-testid":ge.metricModal,isOpen:ze,title:"Metrics explorer",onDismiss:Oe,"aria-label":"Browse metrics",className:wt.modal},t.createElement(ie,{feedbackUrl:"https://forms.gle/DEMAJHoAMpe3e54CA"}),t.createElement("div",{className:wt.inputWrapper},t.createElement("div",{className:(0,r.cx)(wt.inputItem,wt.inputItemFirst)},t.createElement(T.I,{autoFocus:!0,"data-testid":ge.searchMetric,placeholder:q.browse,value:Xe.fuzzySearchQuery,onInput:Ct=>{const bt=Ct.currentTarget.value??"";ut(We(bt)),pn(bt,Xe.fullMetaSearch)}})),Xe.hasMetadata&&t.createElement("div",{className:wt.inputItem},t.createElement(E.NU,{"data-testid":ge.selectType,inputId:"my-select",options:vn,value:Xe.selectedTypes,placeholder:q.type,onChange:Ct=>ut(Nt(Ct))})),t.createElement("div",null,t.createElement(U.$,{className:`${wt.loadingSpinner} ${Xe.isLoading?wt.visible:""}`})),t.createElement("div",{className:wt.inputItem},t.createElement(L.P,{"aria-label":"Additional settings",content:nn,placement:"bottom-end",closeButton:!1},t.createElement(V.h,{className:wt.settingsBtn},t.createElement(S.zx,{variant:"secondary",size:"md",onClick:()=>ut(ft()),"data-testid":ge.showAdditionalSettings,className:wt.noBorder},"Additional Settings"),t.createElement(S.zx,{className:wt.noBorder,variant:"secondary",icon:Xe.showAdditionalSettings?"angle-up":"angle-down"}))))),t.createElement("div",{className:wt.resultsData},Ge.metric&&t.createElement("i",{className:wt.currentlySelected},"Currently selected: ",Ge.metric),Ge.labels.length>0&&t.createElement("div",{className:wt.resultsDataFiltered},t.createElement(x.J,{name:"info-circle",size:"sm"}),t.createElement("div",{className:wt.resultsDataFilteredText},"\xA0These metrics have been pre-filtered by labels chosen in the label filters."))),t.createElement("div",{className:wt.results},Xe.metrics&&t.createElement(Ce,{metrics:H(Xe,ut),onChange:Fe,onClose:Oe,query:Ge,state:Xe,disableTextWrap:Xe.disableTextWrap})),t.createElement("div",{className:wt.resultsFooter},t.createElement("div",{className:wt.resultsAmount},"Showing ",Xe.filteredMetricCount," of ",Xe.totalMetricCount," results"),t.createElement(w.t,{currentPage:Xe.pageNum??1,numberOfPages:X(Xe).length,onNavigate:Ct=>{ut(De(Ct??1))}}),t.createElement("div",{className:wt.resultsPerPageWrapper},t.createElement("p",{className:wt.resultsPerPageLabel},"# Results per page\xA0"),t.createElement(T.I,{"data-testid":ge.resultsPerPage,value:oe(Xe.resultsPerPage,_.Xc,_.s6),placeholder:"results per page",width:10,title:"The maximum results per page is "+_.s6,type:"number",onInput:Ct=>{const bt=+Ct.currentTarget.value;isNaN(bt)||bt>=_.s6||ut(Me(bt))}}))))},ge={metricModal:"metric-modal",searchMetric:"search-metric",searchWithMetadata:"search-with-metadata",selectType:"select-type",metricCard:"metric-card",useMetric:"use-metric",searchPage:"search-page",resultsPerPage:"results-per-page",setUseBackend:"set-use-backend",showAdditionalSettings:"show-additional-settings"},Be=" ",Le=1e3;function he({datasource:fe,query:ve,onChange:ze,onGetMetrics:Oe,labelsFilters:Fe,metricLookupDisabled:Ge,onBlur:nt,variableEditor:Xe}){const ut=(0,P.wW)(He),[ht,wt]=(0,t.useState)({}),mn=D.config.featureToggles.prometheusMetricEncyclopedia,vn=[{value:"BrowseMetrics",label:"Metrics explorer",description:"Browse and filter metrics and metadata with a fuzzy search"}],gn=(0,t.useCallback)((_t,Gt)=>{const jt=_t.label??_t.value;return jt?jt.toLowerCase?Gt.split(Be).reduce((St,mt)=>{const kt=jt.toLowerCase().includes(mt.toLowerCase());let it=!1;return mn&&(it=jt==="Metrics explorer"),St&&(kt||it)},!0):!0:!1},[mn]),Sn=(0,t.useCallback)((_t,Gt)=>_t.__isNew__?_t.label:t.createElement(u(),{searchWords:Gt.inputValue.split(Be),textToHighlight:_t.label??"",highlightClassName:ut.highlight}),[ut.highlight]),Cn=(_t,Gt)=>{const jt=(0,s.Vl)(_t);return Pe(jt,Gt)},pn=_t=>fe.metricFindQuery(Cn(_t,Fe)).then(jt=>{jt.length>Le&&jt.splice(0,jt.length-Le);const sn=jt.map(St=>({label:St.text,value:St.text}));return mn?[...vn,...sn]:sn}),nn=()=>Promise.resolve([]),Ct=h()(_t=>pn(_t),fe.getDebounceTimeInMilliseconds()),bt=_t=>{const Gt=_t.data;if(Gt.value==="BrowseMetrics"){const jt=_t.isFocused?ut.focus:"";return t.createElement("div",{..._t.innerProps,ref:_t.innerRef,className:`${ut.customOptionWidth} metric-encyclopedia-open`,onKeyDown:sn=>{sn.code==="Enter"&&wt({...ht,metricsModalOpen:!0})}},t.createElement("div",{className:`${ut.customOption} ${jt} metric-encyclopedia-open`},t.createElement("div",null,t.createElement("div",{className:"metric-encyclopedia-open"},Gt.label),t.createElement("div",{className:`${ut.customOptionDesc} metric-encyclopedia-open`},Gt.description)),t.createElement(S.zx,{fill:"text",size:"sm",variant:"secondary",onClick:()=>wt({...ht,metricsModalOpen:!0}),className:"metric-encyclopedia-open"},"Open",t.createElement(x.J,{name:"arrow-right"}))))}return(0,R.Qn)(_t)},Ut=()=>t.createElement(E.qb,{isClearable:!!Xe,inputId:"prometheus-metric-select",className:ut.select,value:ve.metric?(0,f.E)(ve.metric):void 0,placeholder:"Select metric",allowCustomValue:!0,formatOptionLabel:Sn,filterOption:gn,onOpenMenu:async()=>{if(Ge)return;wt({isLoading:!0});const _t=await Oe(),Gt=_t.map(jt=>jt.value);_t.length>Le&&_t.splice(0,_t.length-Le),wt(mn?{metrics:[...vn,..._t],isLoading:void 0,initialMetrics:Gt}:{metrics:_t,isLoading:void 0})},loadOptions:Ge?nn:Ct,isLoading:ht.isLoading,defaultOptions:ht.metrics,onChange:_t=>{const Gt=_t?.value;Gt?mn&&Gt==="BrowseMetrics"?(le("grafana_prometheus_metric_encyclopedia_open",null,"",ve),wt({...ht,metricsModalOpen:!0})):ze({...ve,metric:Gt}):ze({...ve,metric:""})},components:mn?{Option:bt}:{},onBlur:nt||(()=>{})});return t.createElement(t.Fragment,null,mn&&!fe.lookupsDisabled&&ht.metricsModalOpen&&t.createElement(ct,{datasource:fe,isOpen:ht.metricsModalOpen,onClose:()=>wt({...ht,metricsModalOpen:!1}),query:ve,onChange:ze,initialMetrics:ht.initialMetrics??[]}),Xe?t.createElement(a.Z,null,t.createElement(M._,{label:"Metric",labelWidth:20,tooltip:t.createElement("div",null,"Optional: returns a list of label values for the label name in the specified metric.")},Ut())):t.createElement(o.s,null,t.createElement(l.S,{label:"Metric"},Ut())))}const He=fe=>({select:(0,r.css)`
    min-width: 125px;
  `,highlight:(0,r.css)`
    label: select__match-highlight;
    background: inherit;
    padding: inherit;
    color: ${fe.colors.warning.contrastText};
    background-color: ${fe.colors.warning.main};
  `,customOption:(0,r.css)`
    padding: 8px;
    display: flex;
    justify-content: space-between;
    cursor: pointer;
    :hover {
      background-color: ${fe.colors.emphasize(fe.colors.background.primary,.1)};
    }
  `,customOptionlabel:(0,r.css)`
    color: ${fe.colors.text.primary};
  `,customOptionDesc:(0,r.css)`
    color: ${fe.colors.text.secondary};
    font-size: ${fe.typography.size.xs};
    opacity: 50%;
  `,focus:(0,r.css)`
    background-color: ${fe.colors.emphasize(fe.colors.background.primary,.1)};
  `,customOptionWidth:(0,r.css)`
    min-width: 400px;
  `}),Pe=(fe,ve)=>{const ze=ve?Ie(ve):[];return`label_values({__name__=~".*${fe}"${ze?ze.join(""):""}},__name__)`},Ie=fe=>fe.map(ve=>`,${ve.label}="${ve.value}"`);function Te({item:fe,defaultOp:ve,onChange:ze,onDelete:Oe,onGetLabelNames:Fe,onGetLabelValues:Ge,invalidLabel:nt,invalidValue:Xe,getLabelValuesAutofillSuggestions:ut,debounceDuration:ht}){const[wt,mn]=(0,t.useState)({}),[vn,gn]=(0,t.useState)(!1),[Sn,Cn]=(0,t.useState)(!1),pn=(bt=fe.op)=>Re.find(Ut=>Ut.label===bt)?.isMultiValue,nn=bt=>bt?bt.indexOf("|")>0?bt.split("|"):[bt]:[],Ct=h()(bt=>ut(bt,fe.label),ht);return t.createElement("div",{"data-testid":"prometheus-dimensions-filter-item"},t.createElement(v.B,null,t.createElement(E.Ph,{placeholder:"Select label","aria-label":b.wl.components.QueryBuilder.labelSelect,inputId:"prometheus-dimensions-filter-item-key",width:"auto",value:fe.label?(0,f.E)(fe.label):null,allowCustomValue:!0,onOpenMenu:async()=>{mn({isLoadingLabelNames:!0});const bt=await Fe(fe);gn(!0),mn({labelNames:bt,isLoadingLabelNames:void 0})},onCloseMenu:()=>{gn(!1)},isOpen:vn,isLoading:wt.isLoadingLabelNames??!1,options:wt.labelNames,onChange:bt=>{bt.label&&ze({...fe,op:fe.op??ve,label:bt.label})},invalid:nt}),t.createElement(E.Ph,{"aria-label":b.wl.components.QueryBuilder.matchOperatorSelect,className:"query-segment-operator",value:(0,f.E)(fe.op??ve),options:Re,width:"auto",onChange:bt=>{bt.value!=null&&ze({...fe,op:bt.value,value:pn(bt.value)?fe.value:nn(fe?.value)[0]})}}),t.createElement(E.qb,{placeholder:"Select value","aria-label":b.wl.components.QueryBuilder.valueSelect,inputId:"prometheus-dimensions-filter-item-value",width:"auto",value:pn()?nn(fe?.value).map(f.E):nn(fe?.value).map(f.E)[0],allowCustomValue:!0,onOpenMenu:async()=>{mn({isLoadingLabelValues:!0});const bt=await Ge(fe);bt.length>Le&&bt.splice(0,bt.length-Le),Cn(!0),mn({...wt,labelValues:bt,isLoadingLabelValues:void 0})},onCloseMenu:()=>{Cn(!1)},isOpen:Sn,defaultOptions:wt.labelValues,isMulti:pn(),isLoading:wt.isLoadingLabelValues,loadOptions:Ct,onChange:bt=>{if(bt.value)ze({...fe,value:bt.value,op:fe.op??ve});else{const Ut=bt.map(_t=>_t.label).join("|");ze({...fe,value:Ut,op:fe.op??ve})}},invalid:Xe}),t.createElement(y._,{"aria-label":"remove",icon:"times",variant:"secondary",onClick:Oe})))}const Re=[{label:"=",value:"=",isMultiValue:!1},{label:"!=",value:"!=",isMultiValue:!1},{label:"<",value:"<",isMultiValue:!1},{label:">",value:">",isMultiValue:!1},{label:"=~",value:"=~",isMultiValue:!0},{label:"!~",value:"!~",isMultiValue:!0}],ue="Select at least 1 label filter (label and value)";function xe({labelsFilters:fe,onChange:ve,onGetLabelNames:ze,onGetLabelValues:Oe,labelFilterRequired:Fe,getLabelValuesAutofillSuggestions:Ge,debounceDuration:nt,variableEditor:Xe}){const ut="=",[ht,wt]=(0,t.useState)([{op:ut}]);(0,t.useEffect)(()=>{fe.length>0?wt(fe):wt([{op:ut}])},[fe]);const mn=Sn=>{wt(Sn);const Cn=Sn.filter(pn=>pn.label!=null&&pn.value!=null);(0,m.isEqual)(Cn,fe)||ve(Cn)},vn=ht.some(Sn=>Sn.label&&Sn.value),gn=()=>t.createElement(d.k,{items:ht,onChange:mn,renderItem:(Sn,Cn,pn)=>t.createElement(Te,{debounceDuration:nt,item:Sn,defaultOp:ut,onChange:Cn,onDelete:pn,onGetLabelNames:ze,onGetLabelValues:Oe,invalidLabel:Fe&&!Sn.label,invalidValue:Fe&&!Sn.value,getLabelValuesAutofillSuggestions:Ge})});return t.createElement(t.Fragment,null,Xe?t.createElement(a.Z,null,t.createElement("div",{className:(0,r.cx)((0,r.css)`
              display: flex;
            `)},t.createElement(g.W,{width:20,tooltip:t.createElement("div",null,"Optional: used to filter the metric select for this query type.")},"Label filters"),gn())):t.createElement(o.s,null,t.createElement(l.S,{label:"Label filters",error:ue,invalid:Fe&&!vn},gn())))}function Ve({datasource:fe,query:ve,onChange:ze,onBlur:Oe,variableEditor:Fe}){const Ge=gn=>{ze({...ve,labels:gn})},nt=(0,t.useCallback)(async gn=>{const Sn=fe.getVariables(),Cn=await gn;return[...Sn.map(pn=>({label:pn,value:pn})),...Cn.map(pn=>({label:pn.value,value:pn.value,title:pn.description}))]},[fe]),Xe=async gn=>{if(!ve.metric)return await fe.languageProvider.fetchLabels(),fe.languageProvider.getLabelKeys().map(nn=>({value:nn}));const Sn=ve.labels.filter(nn=>nn!==gn);Sn.push({label:"__name__",op:"=",value:ve.metric});const Cn=i.Z.renderLabels(Sn);let pn;return fe.hasLabelsMatchAPISupport()?pn=await fe.languageProvider.fetchSeriesLabelsMatch(Cn):pn=await fe.languageProvider.fetchSeriesLabels(Cn),Object.keys(pn).filter(nn=>!Sn.find(Ct=>Ct.label===nn)).map(nn=>({value:nn}))},ut=(gn,Sn)=>{const Cn={label:Sn??"__name__",op:"=~",value:(0,s.Vl)(`.*${gn}`)},pn=ve.labels.filter(Ut=>Ut.label!==Cn.label);pn.push(Cn),ve.metric&&pn.push({label:"__name__",op:"=",value:ve.metric});const nn=pn.map(Ut=>({...Ut,label:fe.interpolateString(Ut.label),value:fe.interpolateString(Ut.value)})),Ct=i.Z.renderLabels(nn);let bt;return fe.hasLabelsMatchAPISupport()?bt=wt(Cn,Ct):bt=ht(Cn,Ct),bt.then(Ut=>(Ut.length>Le&&Ut.splice(0,Ut.length-Le),Ut))},ht=(gn,Sn)=>{if(!gn.label)return Promise.resolve([]);const Cn=fe.languageProvider.fetchSeries(Sn),pn=fe.interpolateString(gn.label);return Cn.then(nn=>{const Ct=new Set;return nn.forEach(bt=>{const Ut=bt[pn];Ct.add(Ut)}),Array.from(Ct).map(bt=>({label:bt,value:bt}))})},wt=(gn,Sn)=>gn.label?fe.languageProvider.fetchSeriesValuesWithMatch(gn.label,Sn).then(Cn=>Cn.map(pn=>({value:pn,label:pn}))):Promise.resolve([]),mn=async gn=>{if(!gn.label)return[];if(!ve.metric)return(await fe.languageProvider.getLabelValues(gn.label)).map(nn=>({value:nn}));const Sn=ve.labels.filter(nn=>nn!==gn);Sn.push({label:"__name__",op:"=",value:ve.metric});const Cn=Sn.map(nn=>({...nn,label:fe.interpolateString(nn.label),value:fe.interpolateString(nn.value)})),pn=i.Z.renderLabels(Cn);return fe.hasLabelsMatchAPISupport()?wt(gn,pn):ht(gn,pn)},vn=(0,t.useCallback)(()=>nt(Ne(fe,ve)),[fe,ve,nt]);return t.createElement(t.Fragment,null,t.createElement(he,{query:ve,onChange:ze,onGetMetrics:vn,datasource:fe,labelsFilters:ve.labels,metricLookupDisabled:fe.lookupsDisabled,onBlur:Oe||(()=>{}),variableEditor:Fe}),t.createElement(xe,{debounceDuration:fe.getDebounceTimeInMilliseconds(),getLabelValuesAutofillSuggestions:ut,labelsFilters:ve.labels,onChange:Ge,onGetLabelNames:gn=>nt(Xe(gn)),onGetLabelValues:gn=>nt(mn(gn)),variableEditor:Fe}))}async function Ne(fe,ve){fe.languageProvider.metricsMetadata||await fe.languageProvider.loadMetricsMetadata(),fe.languageProvider.metricsMetadata||(fe.languageProvider.metricsMetadata={});let ze;if(ve.labels.length>0){const Oe=i.Z.renderLabels(ve.labels);ze=(await fe.languageProvider.getSeries(Oe,!0)).__name__??[]}else ze=await fe.languageProvider.getLabelValues("__name__")??[];return ze.map(Oe=>({value:Oe,description:(0,n.UQ)(Oe,fe.languageProvider.metricsMetadata)}))}},56746:(j,I,e)=>{"use strict";e.d(I,{A:()=>l,n:()=>a});var t=e(27702),n=e(23852),i=e(60692),s=e(85400),r=e(84848),m=e(1234),d=e(61589),o=e(86383);const l="Fetch all series matching metric name and label filters.",a=t.memo(({query:g})=>{const c=(0,r._)(g||"").query,h={grammar:i.ZP,name:"promql"};return t.createElement(n.K,{gap:.5,direction:"column"},t.createElement(m.B,{stepNumber:1,title:t.createElement(o.U,{query:`${c.metric} ${s.Z.renderLabels(c.labels)}`,lang:h})},l),t.createElement(d.V,{stepNumber:2,queryModeller:s.Z,query:c,lang:h}))});a.displayName="PromQueryBuilderExplained"},86096:(j,I,e)=>{"use strict";e.d(I,{j:()=>m});var t=e(42844),n=e(27702),i=e(66310),s=e(95054),r=e(56746);function m(o){const{query:l,datasource:a,range:g,onRunQuery:c,onChange:h,data:f,app:b,showExplain:v}=o,y=(0,i.wW)(d);return n.createElement("div",{className:y.wrapper},n.createElement(s.ZP,{datasource:a,query:l,range:g,onRunQuery:c,onChange:h,history:[],data:f,app:b}),v&&n.createElement(r.n,{query:l.expr}))}const d=o=>({wrapper:(0,t.css)`
      .gf-form {
        margin-bottom: 0;
      }
    `})},63824:(j,I,e)=>{"use strict";e.d(I,{E3:()=>r,Gw:()=>m,Xc:()=>n,s6:()=>i,stateSlice:()=>s});var t=e(34099);const n=100,i=1e3,s=(0,t.oM)({name:"metrics-modal-state",initialState:r(),reducers:{filterMetricsBackend:(d,o)=>{d.metrics=o.payload.metrics,d.filteredMetricCount=o.payload.filteredMetricCount,d.isLoading=o.payload.isLoading},buildMetrics:(d,o)=>{d.isLoading=o.payload.isLoading,d.metrics=o.payload.metrics,d.hasMetadata=o.payload.hasMetadata,d.metaHaystackDictionary=o.payload.metaHaystackDictionary,d.nameHaystackDictionary=o.payload.nameHaystackDictionary,d.totalMetricCount=o.payload.totalMetricCount,d.filteredMetricCount=o.payload.filteredMetricCount},setIsLoading:(d,o)=>{d.isLoading=o.payload},setFilteredMetricCount:(d,o)=>{d.filteredMetricCount=o.payload},setResultsPerPage:(d,o)=>{d.resultsPerPage=o.payload},setPageNum:(d,o)=>{d.pageNum=o.payload},setFuzzySearchQuery:(d,o)=>{d.fuzzySearchQuery=o.payload,d.pageNum=1},setNameHaystack:(d,o)=>{d.nameHaystackOrder=o.payload[0],d.nameHaystackMatches=o.payload[1]},setMetaHaystack:(d,o)=>{d.metaHaystackOrder=o.payload[0],d.metaHaystackMatches=o.payload[1]},setFullMetaSearch:(d,o)=>{d.fullMetaSearch=o.payload,d.pageNum=1},setIncludeNullMetadata:(d,o)=>{d.includeNullMetadata=o.payload,d.pageNum=1},setSelectedTypes:(d,o)=>{d.selectedTypes=o.payload,d.pageNum=1},setUseBackend:(d,o)=>{d.useBackend=o.payload,d.fullMetaSearch=!1,d.pageNum=1},setDisableTextWrap:d=>{d.disableTextWrap=!d.disableTextWrap},showAdditionalSettings:d=>{d.showAdditionalSettings=!d.showAdditionalSettings}}});function r(d){return{isLoading:!0,metrics:[],hasMetadata:!0,metaHaystackDictionary:{},metaHaystackMatches:[],metaHaystackOrder:[],nameHaystackDictionary:{},nameHaystackOrder:[],nameHaystackMatches:[],totalMetricCount:0,filteredMetricCount:null,resultsPerPage:n,pageNum:1,fuzzySearchQuery:"",fullMetaSearch:d?.fullMetaSearch??!1,includeNullMetadata:d?.includeNullMetadata??!0,selectedTypes:[],useBackend:d?.useBackend??!1,disableTextWrap:d?.disableTextWrap??!1,showAdditionalSettings:!1}}function m(d){return{useBackend:d?.useBackend??!1,disableTextWrap:d?.disableTextWrap??!1,fullMetaSearch:d?.fullMetaSearch??!1,includeNullMetadata:d.includeNullMetadata??!1}}},84848:(j,I,e)=>{"use strict";e.d(I,{_:()=>s});var t=e(23419),n=e(86146),i=e(55889);function s(v){const y=(0,i.bU)(v),C=t.E2.parse(y).topNode,D={query:{metric:"",labels:[],operations:[]},errors:[]};try{m(y,C,D)}catch(P){console.error(P),P instanceof Error&&D.errors.push({text:P.message})}return b(D.query)&&(D.errors=[]),r(v)&&(D.errors=[]),D}function r(v){const y={query:{metric:"",labels:[],operations:[]},errors:[]};v=v.replace(/\$__interval/g,"1s"),v=v.replace(/\$__interval_ms/g,"1000"),v=v.replace(/\$__rate_interval/g,"1s"),v=v.replace(/\$__range_ms/g,"1000"),v=v.replace(/\$__range_s/g,"1"),v=v.replace(/\$__range/g,"1s");const C=t.E2.parse(v).topNode;try{m(v,C,y)}catch{return!1}return y.errors.length===0}function m(v,y,E){const C=E.query;switch(y.type.id){case t.tz:{C.metric=(0,i.KF)(v,y);break}case t.Zm:{C.labels.push(o(v,y));const u=y.getChild(i._A);u&&E.errors.push((0,i.wf)(v,u));break}case t.lX:{a(v,y,E);break}case t.aZ:{g(v,y,E);break}case t.vU:{h(v,y,E);break}case i._A:{if(d(y))break;E.errors.push((0,i.wf)(v,y));break}default:{y.type.id===t.Om&&E.errors.push((0,i.wf)(v,y));let u=y.firstChild;for(;u;)m(v,u,E),u=u.nextSibling}}}function d(v){return v.prevSibling?.type.id===t.wi&&v.prevSibling?.firstChild?.type.id===t.m6}function o(v,y){const E=(0,i.KF)(v,y.getChild(t.m0)),C=(0,i.KF)(v,y.getChild(t.e8)),u=(0,i.KF)(v,y.getChild(t.nv)).replace(/"/g,"");return{label:E,op:C,value:u}}const l=["changes","rate","irate","increase","delta"];function a(v,y,E){const C=E.query,u=y.getChild(t.hT),D=(0,i.KF)(v,u),S=y.getChild(t.yY).getChild(t.mW),x=[];let M="";if(l.includes(D)||D.endsWith("_over_time")){let O=(0,i.KF)(v,y).match(/\[(.+)\]/);O?.[1]&&(M=O[1],x.push(O[1]))}const R={id:D,params:x};if(C.operations.unshift(R),S){if((0,i.KF)(v,S)===M+"]")return;c(v,S,E,R)}}function g(v,y,E){const C=E.query,u=y.getChild(t.Ki);let D=(0,i.KF)(v,u);const P=y.getChild(t.Ip),S=[];P&&(P.getChild("By")&&D&&(D=`__${D}_by`),P.getChild(t.yN)&&(D=`__${D}_without`),S.push(...(0,i.ff)(v,P,t.Tm)));const M=y.getChild(t.yY).getChild(t.mW),R={id:D,params:[]};C.operations.unshift(R),c(v,M,E,R),R.params.push(...S)}function c(v,y,E,C){if(y)switch(y.type.id){case t.wi:case t.mW:{let u=y.firstChild;for(;u;)c(v,u,E,C),u=u.nextSibling;break}case t.iy:{C.params.push(parseFloat((0,i.KF)(v,y)));break}case t.nv:{C.params.push((0,i.KF)(v,y).replace(/"/g,""));break}default:m(v,y,E)}}function h(v,y,E){const C=E.query,u=y.firstChild,D=(0,i.KF)(v,u.nextSibling),P=f(v,y.getChild(t.v3)),S=y.lastChild,x=n.PX[D],M=u.getChild(t.iy),R=S.getChild(t.iy),O=S.getChild(t.vU);if(M||m(v,u,E),R)C.operations.push((0,i.Es)(x,v,S,!!P?.isBool));else if(O){const T=(0,i.ge)(S);T?.type.id===t.iy&&C.operations.push((0,i.Es)(x,v,T,!!P?.isBool)),m(v,S,E)}else{C.binaryQueries=C.binaryQueries||[];const T={operator:D,query:{metric:"",labels:[],operations:[]}};P?.isMatcher&&(T.vectorMatchesType=P.matchType,T.vectorMatches=P.matches),C.binaryQueries.push(T),m(v,S,{query:T.query,errors:E.errors})}}function f(v,y){if(y){if(y.getChild("Bool"))return{isBool:!0,isMatcher:!1};{const E=y.getChild(t.Wc);return E?{isMatcher:!0,isBool:!1,matches:(0,i.KF)(v,E.getChild(t.XT)?.getChild(t.pQ)),matchType:E.getChild(t.On)?"on":"ignoring"}:void 0}}}function b(v){return v.labels.length===0&&v.operations.length===0&&!v.metric}},54433:(j,I,e)=>{"use strict";e.d(I,{x:()=>i});var t=e(25359),n=e(29326);class i{constructor(r){this.categories=[],this.operationsRegistry=new t.B(r)}setOperationCategories(r){this.categories=r}getOperationsForCategory(r){return this.operationsRegistry.list().filter(m=>m.category===r&&!m.hideFromList)}getAlternativeOperations(r){return this.operationsRegistry.list().filter(m=>m.alternativesKey&&m.alternativesKey===r)}getCategories(){return this.categories}getOperationDef(r){return this.operationsRegistry.getIfExists(r)}renderOperations(r,m){for(const d of m){const o=this.operationsRegistry.getIfExists(d.id);if(!o)throw new Error(`Could not find operation ${d.id} in the registry`);r=o.renderer(d,o,r)}return r}renderBinaryQueries(r,m){if(m)for(const d of m)r=`${this.renderBinaryQuery(r,d)}`;return r}renderBinaryQuery(r,m){let d=r+` ${m.operator} `;return m.vectorMatches&&(d+=`${m.vectorMatchesType}(${m.vectorMatches}) `),d+this.renderQuery(m.query,!0)}renderLabels(r){if(r.length===0)return"";let m="{";for(const d of r)m!=="{"&&(m+=", "),m+=`${d.label}${d.op}"${d.value}"`;return m+"}"}renderQuery(r,m){let d=`${r.metric??""}${this.renderLabels(r.labels)}`;return d=this.renderOperations(d,r.operations),!m&&this.hasBinaryOp(r)&&r.binaryQueries?.length&&(d=`(${d})`),d=this.renderBinaryQueries(d,r.binaryQueries),m&&(this.hasBinaryOp(r)||r.binaryQueries?.length)&&(d=`(${d})`),d}hasBinaryOp(r){return r.operations.find(m=>this.getOperationDef(m.id)?.category===n.CM.BinaryOps)!==void 0}}},1234:(j,I,e)=>{"use strict";e.d(I,{B:()=>r});var t=e(42844),n=e(27702),i=e(18112),s=e(66310);function r({title:d,stepNumber:o,markdown:l,children:a}){const g=(0,s.wW)(m);return n.createElement("div",{className:g.box},o!==void 0&&n.createElement("div",{className:g.stepNumber},o),n.createElement("div",{className:g.boxInner},d&&n.createElement("div",{className:g.header},n.createElement("span",null,d)),n.createElement("div",{className:g.body},l&&n.createElement("div",{dangerouslySetInnerHTML:{__html:(0,i.a)(l)}}),a)))}const m=d=>({box:(0,t.css)({background:d.colors.background.secondary,padding:d.spacing(1),borderRadius:d.shape.borderRadius(),position:"relative"}),boxInner:(0,t.css)({marginLeft:d.spacing(4)}),stepNumber:(0,t.css)({fontWeight:d.typography.fontWeightMedium,background:d.colors.secondary.main,width:"20px",height:"20px",borderRadius:d.shape.radius.circle,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"10px",left:"11px",fontSize:d.typography.bodySmall.fontSize}),header:(0,t.css)({paddingBottom:d.spacing(.5),display:"flex",alignItems:"center",fontFamily:d.typography.fontFamilyMonospace}),body:(0,t.css)({color:d.colors.text.secondary,"p:last-child":{margin:0},a:{color:d.colors.text.link,textDecoration:"underline"}})})},61589:(j,I,e)=>{"use strict";e.d(I,{V:()=>s});var t=e(27702),n=e(1234),i=e(86383);function s({query:r,queryModeller:m,stepNumber:d,lang:o,onMouseEnter:l,onMouseLeave:a}){return t.createElement(t.Fragment,null,r.operations.map((g,c)=>{const h=m.getOperationDef(g.id);if(!h)return`Operation ${g.id} not found`;const f=h.renderer(g,h,"<expr>"),b=h.explainHandler?h.explainHandler(g,h):h.documentation??"no docs";return t.createElement("div",{key:c,onMouseEnter:()=>l?.(g,c),onMouseLeave:()=>a?.(g,c)},t.createElement(n.B,{stepNumber:c+d,title:t.createElement(i.U,{query:f,lang:o}),markdown:b}))}))}},86383:(j,I,e)=>{"use strict";e.d(I,{U:()=>m});var t=e(42844),n=e(6570),i=e.n(n),s=e(27702),r=e(66310);function m({query:o,lang:l,className:a}){const g=(0,r.l4)(),c=d(g),h=i().highlight(o,l.grammar,l.name);return s.createElement("div",{className:(0,t.cx)(c.editorField,"prism-syntax-highlight",a),"aria-label":"selector",dangerouslySetInnerHTML:{__html:h}})}const d=o=>({editorField:(0,t.css)({fontFamily:o.typography.fontFamilyMonospace,fontSize:o.typography.bodySmall.fontSize})})},42994:(j,I,e)=>{"use strict";e.d(I,{IT:()=>y,NZ:()=>g,PP:()=>h,Sp:()=>D,Z3:()=>E,ZI:()=>x,Zc:()=>M,e8:()=>a,i1:()=>b,j8:()=>S,kq:()=>v,pS:()=>d,t7:()=>f,zJ:()=>o});var t=e(89949),n=e.n(t),i=e(6772),s=e.n(i),r=e(4002),m=e(29326);function d(R,O,T){const U=c(R,O,T),L=R.id+"(";return T&&U.push(T),L+U.join(", ")+")"}function o(R,O,T){const U=c(R,O,T),L=R.id+"(";return T&&U.unshift(T),L+U.join(", ")+")"}function l(R,O,T,U){if(O.params.length<2)throw`Cannot render a function with params of length [${O.params.length}]`;let L=(R.params??[])[0]??"5m";const V=c({...R,params:R.params.slice(1)},{...O,params:O.params.slice(1),defaultParams:O.defaultParams.slice(1)},T),w=R.id+"(";return T&&(U?V.push(`${T}[${L}]`):V.unshift(`${T}[${L}]`)),w+V.join(", ")+")"}function a(R,O,T){return l(R,O,T,!1)}function g(R,O,T){return l(R,O,T,!0)}function c(R,O,T){return(R.params??[]).map((U,L)=>O.params[L].type==="string"?'"'+U+'"':U)}function h(R,O){const T={id:R.id,params:R.defaultParams};return{...O,operations:[...O.operations,T]}}function f(R){return(0,t.capitalize)(R.replace(/_/g," "))}function b(R,O){return`operations.${R}.param.${O}`}function v(R=!1){const O={name:"Range",type:"string",options:[{label:"$__interval",value:"$__interval"},{label:"1m",value:"1m"},{label:"5m",value:"5m"},{label:"10m",value:"10m"},{label:"1h",value:"1h"},{label:"24h",value:"24h"}]};return R&&O.options.unshift({label:"$__rate_interval",value:"$__rate_interval"}),O}function y(R,O={}){return[{id:R,name:f(R),params:[{name:"By label",type:"string",restParam:!0,optional:!0}],defaultParams:[],alternativesKey:"plain aggregations",category:m.CM.Aggregations,renderer:d,paramChangedHandler:x(`__${R}_by`),explainHandler:D(R,""),addOperationHandler:h,...O},{id:`__${R}_by`,name:`${f(R)} by`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:r.g}],defaultParams:[""],alternativesKey:"aggregations by",category:m.CM.Aggregations,renderer:C(R),paramChangedHandler:S(R),explainHandler:D(R,"by"),addOperationHandler:h,hideFromList:!0,...O},{id:`__${R}_without`,name:`${f(R)} without`,params:[{name:"Label",type:"string",restParam:!0,optional:!0,editor:r.g}],defaultParams:[""],alternativesKey:"aggregations by",category:m.CM.Aggregations,renderer:u(R),paramChangedHandler:S(R),explainHandler:D(R,"without"),addOperationHandler:h,hideFromList:!0,...O}]}function E(R,O,T={}){const U=y(R,T);return U[0].params.unshift(...O.params),U[1].params.unshift(...O.params),U[2].params.unshift(...O.params),U[0].defaultParams=O.defaultParams,U[1].defaultParams=[...O.defaultParams,""],U[2].defaultParams=[...O.defaultParams,""],U[1].renderer=P(R),U[2].renderer=P(R),U}function C(R){return function(T,U,L){return`${R} by(${T.params.join(", ")}) (${L})`}}function u(R){return function(T,U,L){return`${R} without(${T.params.join(", ")}) (${L})`}}function D(R,O){return function(U){const L=U.params.map(w=>`\`${w}\``).join(" and "),V=s()("label",U.params.length);switch(O){case"by":return`Calculates ${R} over dimensions while preserving ${V} ${L}.`;case"without":return`Calculates ${R} over the dimensions ${L}. All other labels are preserved.`;default:return`Calculates ${R} over the dimensions.`}}}function P(R){return function(T,U,L){const V=U.params.findIndex(B=>B.restParam),w=T.params.slice(0,V),K=T.params.slice(V);return`${R} by(${K.join(", ")}) (${w.map((B,W)=>U.params[W].type==="string"?`"${B}"`:B).join(", ")}, ${L})`}}function S(R){return function(T,U,L){return U.params.length<L.params.length?{...U,id:R}:U}}function x(R){return function(T,U,L){return U.params.length===L.params.length?{...U,id:R}:U}}function M(R,O){if(!R.label||!R.op||!R.value||O.length<2)return!1;const T=R.op.toString().startsWith("!");return O.filter(V=>V.label===R.label&&V.value===R.value&&V.op!==R.op).some(V=>!!(T&&V?.op?.toString().startsWith("!")===!1||T===!1&&V?.op?.toString().startsWith("!")))}},55889:(j,I,e)=>{"use strict";e.d(I,{Es:()=>l,KF:()=>o,Tt:()=>d,Vl:()=>b,_A:()=>t,bU:()=>r,ff:()=>a,ge:()=>n,wf:()=>i});const t=0;function n(v){return v.firstChild?n(v.firstChild):v}function i(v,y){return{text:o(v,y),from:y.from,to:y.to,parentType:y.parent?.name}}const s=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function r(v){return v.replace(s,(y,E,C,u,D,P,S)=>{const x=u||S;let M=E,R="0";return C&&(M=C,R="1"),D&&(M=D,R="2"),`__V_${R}__`+M+"__V__"+(x?"__F__"+x+"__F__":"")})}const m=[(v,y)=>`$${v}`,(v,y)=>`[[${v}${y?`:${y}`:""}]]`,(v,y)=>`\${${v}${y?`:${y}`:""}}`];function d(v){return v.replace(/__V_(\d)__(.+?)__V__(?:__F__(\w+)__F__)?/g,(y,E,C,u)=>m[parseInt(E,10)](C,u))}function o(v,y){return y?d(v.substring(y.from,y.to)):""}function l(v,y,E,C){const u=[parseFloat(o(y,E))];return v.comparison&&u.push(C),{id:v.id,params:u}}function a(v,y,E){if(y.type.id===E||y.name===E)return[o(v,y)];const C=[];let u=0,D=y.childAfter(u);for(;D;)C.push(...a(v,D,E)),u=D.to,D=y.childAfter(u);return C}function g(v,y){if(!y){console.log("<empty>");return}const E=c(v,y),C=h(E);if(!C){console.log("<empty>");return}console.log(C)}function c(v,y){const E={},C=f(v,y),u=[];let D=0,P=y.childAfter(D);for(;P;)u.push(c(v,P)),D=P.to,P=y.childAfter(D);return E.name=C,E.children=u,E}function h(v,y={lastChild:!0,indent:""}){const E=v.name,{lastChild:C,indent:u}=y;let P=(u!==""?u+(C?"\u2514\u2500":"\u251C\u2500"):"")+E;const S=v.children;return S.forEach((x,M)=>{const R=M===S.length-1;P+=`
`+h(x,{lastChild:R,indent:u+(C?"  ":"\u2502 ")})}),P}function f(v,y){return y.name+": "+o(v,y)}const b=v=>v.split(" ").map(E=>`${E}.*`).join("")},39568:(j,I,e)=>{"use strict";e.d(I,{c:()=>t});var t=(n=>(n.Code="code",n.Builder="builder",n))(t||{})},29326:(j,I,e)=>{"use strict";e.d(I,{CM:()=>t,Fz:()=>i,G3:()=>n});var t=(s=>(s.Aggregations="Aggregations",s.RangeFunctions="Range functions",s.Functions="Functions",s.BinaryOps="Binary operations",s.Trigonometric="Trigonometric",s.Time="Time Functions",s))(t||{}),n=(s=>(s.Abs="abs",s.Absent="absent",s.AbsentOverTime="absent_over_time",s.Acos="acos",s.Acosh="acosh",s.Asin="asin",s.Asinh="asinh",s.Atan="atan",s.Atanh="atanh",s.Avg="avg",s.AvgOverTime="avg_over_time",s.BottomK="bottomk",s.Ceil="ceil",s.Changes="changes",s.Clamp="clamp",s.ClampMax="clamp_max",s.ClampMin="clamp_min",s.Cos="cos",s.Cosh="cosh",s.Count="count",s.CountOverTime="count_over_time",s.CountScalar="count_scalar",s.CountValues="count_values",s.DayOfMonth="day_of_month",s.DayOfWeek="day_of_week",s.DayOfYear="day_of_year",s.DaysInMonth="days_in_month",s.Deg="deg",s.Delta="delta",s.Deriv="deriv",s.DropCommonLabels="drop_common_labels",s.Exp="exp",s.Floor="floor",s.Group="group",s.HistogramQuantile="histogram_quantile",s.HoltWinters="holt_winters",s.Hour="hour",s.Idelta="idelta",s.Increase="increase",s.Irate="irate",s.LabelJoin="label_join",s.LabelReplace="label_replace",s.Last="last",s.LastOverTime="last_over_time",s.Ln="ln",s.Log10="log10",s.Log2="log2",s.Max="max",s.MaxOverTime="max_over_time",s.Min="min",s.MinOverTime="min_over_time",s.Minute="minute",s.Month="month",s.Pi="pi",s.PredictLinear="predict_linear",s.Present="present",s.PresentOverTime="present_over_time",s.Quantile="quantile",s.QuantileOverTime="quantile_over_time",s.Rad="rad",s.Rate="rate",s.Resets="resets",s.Round="round",s.Scalar="scalar",s.Sgn="sgn",s.Sin="sin",s.Sinh="sinh",s.Sort="sort",s.SortDesc="sort_desc",s.Sqrt="sqrt",s.Stddev="stddev",s.StddevOverTime="stddev_over_time",s.Sum="sum",s.SumOverTime="sum_over_time",s.Tan="tan",s.Tanh="tanh",s.Time="time",s.Timestamp="timestamp",s.TopK="topk",s.Vector="vector",s.Year="year",s.Addition="__addition",s.Subtraction="__subtraction",s.MultiplyBy="__multiply_by",s.DivideBy="__divide_by",s.Modulo="__modulo",s.Exponent="__exponent",s.NestedQuery="__nested_query",s.EqualTo="__equal_to",s.NotEqualTo="__not_equal_to",s.GreaterThan="__greater_than",s.LessThan="__less_than",s.GreaterOrEqual="__greater_or_equal",s.LessOrEqual="__less_or_equal",s))(n||{}),i=(s=>(s.Rate="rate",s.Histogram="histogram",s.Binary="binary",s))(i||{})},94962:(j,I,e)=>{"use strict";e.d(I,{tQ:()=>h,Ji:()=>g});var t=e(32082),n=e(99633),i=e(35596),s=e(75308),r=e(34667),m=e(86312),d=e(47838);function o(f,b){let[v]=f,[y]=b,E=v.length,C=v[0],u=v[E-1],D=y.length,P=y[0],S=y[D-1],x;if(E)if(D){if(P>u)x=f.map((M,R)=>f[R].concat(b[R]));else if(S<C)x=b.map((M,R)=>b[R].concat(f[R]));else if(P<=C&&S>=u)x=b;else if(!(P>C&&S<u)){if(P>=C){let M=(0,d.Ko)(P,v);M=v[M]<P?M-1:M,x=f.map((R,O)=>f[O].slice(0,M).concat(b[O]))}else if(S>=C){let M=(0,d.Ko)(S,v);M=v[M]<S?M:M+1,x=b.map((R,O)=>b[O].concat(f[O].slice(M)))}}}else x=f;else D?x=b:x=[[]];return x}function l(f,b,v){let[y,...E]=f,C,u;return y[0]<b&&(C=(0,d.Ko)(b,y),y[C]<b&&C++),y[y.length-1]>v&&(u=(0,d.Ko)(v,y),y[u]>v&&u--),(C!=null||u!=null)&&(y=y.slice(C??0,u),E=E.map(D=>D.slice(C??0,u))),[y,...E]}var a=e(26858);const g="10m",c=f=>`${f.type}|${f.name}|${JSON.stringify(f.labels??"")}`;class h{constructor(b){this.sendEventsInterval=6e4*10,this.pendingRequestIdsToTargSigs=new Map,this.pendingAccumulatedEvents=new Map,this.cache=new Map,this.sendPendingTrackingEvents=()=>{const y=this.pendingAccumulatedEvents.entries();for(let[E,C]of y)if(!C.sent){const u={datasource:C.datasource.toString(),requestCount:C.requestCount.toString(),savedBytesTotal:C.savedBytesTotal.toString(),initialRequestSize:C.initialRequestSize.toString(),lastRequestSize:C.lastRequestSize.toString(),panelId:C.panelId.toString(),dashId:C.dashId.toString(),expr:C.expr.toString(),refreshIntervalMs:C.refreshIntervalMs.toString(),from:C.from.toString(),queryRangeSeconds:C.queryRangeSeconds.toString()};r.config.featureToggles.prometheusIncrementalQueryInstrumentation?(0,m.ff)("grafana_incremental_queries_profile",u):s.s.api.pushEvent&&s.s.api.pushEvent("incremental query response size",u,"no-interaction",{skipDedupe:!0}),this.pendingAccumulatedEvents.set(E,{...C,sent:!0,requestCount:0,savedBytesTotal:0,initialRequestSize:0,lastRequestSize:0})}};const v=b.overlapString;if((0,t.jO)(v)){const y=(0,t.RA)(v);this.overlapWindowMs=(0,t.iX)(y)}else{const y=(0,t.RA)(g);this.overlapWindowMs=(0,t.iX)(y)}(r.config.grafanaJavascriptAgent.enabled||r.config.featureToggles?.prometheusIncrementalQueryInstrumentation)&&b.profileFunction!==void 0?(this.profile(),this.shouldProfile=!0):this.shouldProfile=!1,this.getProfileData=b.profileFunction,this.getTargetSignature=b.getTargetSignature}profile(){typeof PerformanceObserver=="function"&&(this.perfObeserver=new PerformanceObserver(b=>{b.getEntries().forEach(v=>{const y=v,E=typeof y?.transferSize=="number";if(y?.initiatorType==="fetch"&&E){let C=y.name;if(C.includes("/api/ds/query")){let u=C.match(/requestId=([a-z\d]+)/i);if(u){let D=u[1];const P=Math.round(y.transferSize),S=this.pendingRequestIdsToTargSigs.get(D);if(S){const x=this.pendingRequestIdsToTargSigs.entries();for(let[,M]of x)if(M.identity===S.identity&&M.bytes!==null){const R=this.pendingAccumulatedEvents.get(M.identity),O=M.bytes-P;this.pendingAccumulatedEvents.set(M.identity,{datasource:M.datasource??"N/A",requestCount:(R?.requestCount??0)+1,savedBytesTotal:(R?.savedBytesTotal??0)+O,initialRequestSize:M.bytes,lastRequestSize:P,panelId:S.panelId?.toString()??"",dashId:S.dashboardUID??"",expr:S.expr??"",refreshIntervalMs:S.refreshIntervalMs??0,sent:!1,from:S.from??"",queryRangeSeconds:S.queryRangeSeconds??0}),this.pendingRequestIdsToTargSigs.delete(D);return}this.pendingRequestIdsToTargSigs.set(D,{...S,bytes:P})}}}}})}),this.perfObeserver.observe({type:"resource",buffered:!1}),setInterval(this.sendPendingTrackingEvents,this.sendEventsInterval),window.addEventListener("beforeunload",this.sendPendingTrackingEvents))}requestInfo(b){const v=b.range.from.valueOf(),y=b.range.to.valueOf(),E=b.rangeRaw?.to?.toString()==="now";let C=E,u;const D=(0,a.$t)().refreshMS,P=new Map;b.targets.forEach(S=>{let x=`${b.dashboardUID}|${b.panelId}|${S.refId}`,M=this.getTargetSignature(b,S);this.shouldProfile&&this.getProfileData&&this.pendingRequestIdsToTargSigs.set(b.requestId,{...this.getProfileData(b,S),identity:x+"|"+M,bytes:null,panelId:b.panelId,dashboardUID:b.dashboardUID??"",from:b.rangeRaw?.from.toString()??"",queryRangeSeconds:b.range.to.diff(b.range.from,"seconds")??"",refreshIntervalMs:D??0}),P.set(x,M)});for(const[S,x]of P){let M=this.cache.get(S);if(M?.sig!==x?C=!1:(u=M?.prevTo??1/0,C=y>u&&v<=u),!C)break}if(C&&u){let S=Math.max(u-this.overlapWindowMs,v);const x=(0,n.CQ)(y),M=(0,n.CQ)((0,i.mB)(S,b.intervalMs));b={...b,range:{...b.range,from:M,to:x}}}else P.forEach((S,x)=>{this.cache.delete(x)});return{requests:[b],targSigs:P,shouldCache:E}}procFrames(b,v,y){if(v?.shouldCache){const E=b.range.from.valueOf(),C=b.range.to.valueOf(),u=new Map;y.forEach(P=>{let S=`${b.dashboardUID}|${b.panelId}|${P.refId}`,x=u.get(S);x||(x=[],u.set(S,x)),x.push(P)});let D=[];u.forEach((P,S)=>{let x=(S?this.cache.get(S)?.frames:null)??[];P.forEach(R=>{if(R.length===0||R.fields.length===0)return;let O=c(R.fields[1]),T=x.find(U=>c(U.fields[1])===O);if(!T)x.push(R);else{let U=T.fields.map(w=>w.values),L=R.fields.map(w=>w.values),V=o(U,L);if(V){for(let w=0;w<V.length;w++)T.fields[w].values=V[w];T.length=T.fields[0].values.length}}});let M=[];x.forEach(R=>{let O=R.fields.map(U=>U.values),T=l(O,E,C);if(T[0].length>0){for(let U=0;U<T.length;U++)R.fields[U].values=T[U];M.push(R)}}),this.cache.set(S,{sig:v.targSigs.get(S),frames:M,prevTo:C}),D.push(...M)}),y=D.map(P=>({...P,fields:P.fields.map(S=>({...S,config:{...S.config},values:S.values.slice()}))}))}return y}}},48789:(j,I,e)=>{"use strict";e.d(I,{Ky:()=>k,n:()=>u,nM:()=>K,nf:()=>_,vs:()=>x});var t=e(45306),n=e(89949),i=e.n(n),s=e(62247),r=e(29241),m=e(69376),d=e(46580),o=e(61965),l=e(76772),a=e(14951),g=e(43987),c=e(75578),h=e(34667),f=e(10864),b=e(39317),v=e(72054);const y=/^[+-]?inf(?:inity)?$/i,E=(A,z)=>z.app===s.zj.Explore&&(A.meta?.custom?.resultType==="vector"||A.meta?.custom?.resultType==="scalar")?!0:z.targets.find(Q=>Q.refId===A.refId)?.format==="table",C=(A,z)=>z.targets.find(Q=>Q.refId===A.refId)?.format==="heatmap";function u(A,z,H){h.config.featureToggles.prometheusDataplane&&A.data.forEach(ye=>{const Ce=z.targets.find(de=>de.refId===ye.refId);Ce&&Ce.legendFormat==="__auto"&&ye.fields.forEach(de=>{if(de.labels?.__name__&&de.labels?.__name__===de.name){const we={...de,name:r.M5};de.config.displayNameFromDS=(0,c.$w)(we,ye,A.data)}})});const[Q,X]=(0,n.partition)(A.data,ye=>E(ye,z)),te=P(Q),[oe,Z]=(0,n.partition)(X,ye=>ye.meta?.custom?.resultType==="exemplar"),{exemplarTraceIdDestinations:le}=H,ce=oe.map(ye=>{if(le?.length)for(const Ce of le){const de=ye.fields.find(we=>we.name===Ce.name);if(de){const we=M(Ce);de.config.links=de.config.links?.length?[...de.config.links,...we]:we}}return{...ye,meta:{...ye.meta,dataTopic:m.w5.Annotations}}}),[q,ne]=(0,n.partition)(Z,ye=>C(ye,z));q.forEach(ye=>{if(ye.name==null){let Ce=ye.fields.find(de=>de.type===r.fS.number);if(Ce){let de=Ce.labels?.le;de&&(ye.name=de,Ce.config.displayNameFromDS=de)}}});const pe=(0,n.groupBy)(q,ye=>ye.refId);let re=[];for(const ye in pe){const Ce=pe[ye],de=(0,n.groupBy)(Ce,we=>{const _e=we.fields.find(Je=>Je.type===r.fS.number);if(_e?.labels&&D in _e.labels){const{le:Je,...Ue}=_e?.labels;return Object.values(Ue).join()}return Object.values(_e?.labels??[]).join()});(0,n.forOwn)(de,(we,_e)=>{const Je=we.sort(_);re.push(B(W(Je)))})}const ie=ne.map(ye=>({...ye,meta:{...ye.meta,preferredVisualisationType:"graph"}})),Se=(0,n.flatten)(re);return{...A,data:[...ie,...te,...Se,...ce]}}const D="le";function P(A){if(A.length===0||A.length===1&&A[0].length===0)return A;const z=(0,n.groupBy)(A,"refId"),H=Object.keys(z);return H.map(X=>{const te=S(H.length,X),oe=V({data:[],valueName:te}),Z=L([]),le=[];z[X].forEach(q=>{const pe=q.fields[1]?.labels??{};Object.keys(pe).sort().forEach(re=>{if(!le.some(ie=>ie.name===re)){const ie=re===D;le.push({name:re,config:{filterable:!0},type:ie?r.fS.number:r.fS.string,values:[]})}})}),z[X].forEach(q=>{const ne=q.fields[0]?.values??[],pe=q.fields[1]?.values??[];ne.forEach(re=>Z.values.push(re)),pe.forEach(re=>{oe.values.push(k(re));const ie=q.fields[1].labels??{};le.forEach(Se=>Se.values.push(U(ie,Se.name)))})});const ce=[Z,...le,oe];return{refId:X,fields:ce,meta:{...z[X][0].meta,preferredVisualisationType:"rawPrometheus"},length:Z.values.length}})}function S(A,z=""){return A>1?`Value #${z}`:"Value"}function x(A,z){const H={format:z.target.format,step:z.query.step,legendFormat:z.target.legendFormat,start:z.query.start,end:z.query.end,query:z.query.expr,responseListLength:z.responseListLength,scopedVars:z.scopedVars,refId:z.target.refId,valueWithRefId:z.target.valueWithRefId,meta:{preferredVisualisationType:z.query.instant?"rawPrometheus":"graph"}},Q=A.data.data;if((0,v.WS)(Q)){const te=[];Q.forEach(le=>{const ce=le.exemplars.map(q=>({[r.Ls]:q.timestamp*1e3,[r.M5]:q.value,...q.labels,...le.seriesLabels}));te.push(...ce)});const oe=R(te,H),Z=new d.i(oe);if(Z.meta={dataTopic:m.w5.Annotations},z.exemplarTraceIdDestinations?.length)for(const le of z.exemplarTraceIdDestinations){const ce=Z.fields.find(q=>q.name===le.name);if(ce){const q=M(le);ce.config.links=ce.config.links?.length?[...ce.config.links,...q]:q}}return[Z]}if(!Q?.result)return[];if(Q.resultType==="scalar")return[{meta:H.meta,refId:H.refId,length:1,fields:[L([Q.result]),V({data:[Q.result]})]}];if(H.format==="table")return[T(Q.result,H)];const X=[];return Q.result.forEach(te=>X.push(O(te,H))),H.format==="heatmap"?B(W(X.sort(_))):X}function M(A){const z=[];if(A.datasourceUid){const Q=(0,f.F)().getInstanceSettings(A.datasourceUid);Q&&z.push({title:A.urlDisplayLabel||`Query with ${Q?.name}`,url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:A.datasourceUid,datasourceName:Q?.name??"Data source not found"}})}return A.url&&z.push({title:A.urlDisplayLabel||`Go to ${A.url}`,url:A.url,targetBlank:!0}),z}function R(A,z){const H=z.step||15,Q={},X=[];for(const le of A){const ce=String(Math.floor(le[r.Ls]/1e3/H)*H*1e3);Q[ce]||(Q[ce]=[]),Q[ce].push(le),X.push(le[r.M5])}const te=(0,t.deviation)(X),oe=Object.keys(Q).sort(),Z=[];for(const le of oe){const ce=Q[le];if(ce.length===1)Z.push(ce[0]);else{const ne=ce.map(pe=>pe[r.M5]).sort(t.descending).reduce((pe,re)=>{if(pe.length===0)pe.push(re);else{const ie=pe[pe.length-1];te&&ie-re>=2*te&&pe.push(re)}return pe},[]);Z.push(...ne.map(pe=>ce.find(re=>re[r.M5]===pe)))}}return Z}function O(A,z){const{name:H,labels:Q}=w(A.metric,z),X=[];if((0,v.el)(A)){const te=z.step?z.step*1e3:NaN;let oe=z.start*1e3;const Z=[];for(const ce of A.values){let q=k(ce[1]);isNaN(q)&&(q=null);const ne=ce[0]*1e3;for(let pe=oe;pe<ne;pe+=te)Z.push([pe,null]);oe=ne+te,Z.push([ne,q])}const le=z.end*1e3;for(let ce=oe;ce<=le;ce+=te)Z.push([ce,null]);X.push(L(Z,!0)),X.push(V({data:Z,parseValue:!1,labels:Q,displayNameFromDS:H}))}else X.push(L([A.value])),X.push(V({data:[A.value],labels:Q,displayNameFromDS:H}));return{meta:z.meta,refId:z.refId,length:X[0].values.length,fields:X,name:H}}function T(A,z){if(!A||A.length===0)return{meta:z.meta,refId:z.refId,length:0,fields:[]};const H=z.responseListLength>1||z.valueWithRefId?`Value #${z.refId}`:"Value",Q=L([]),X=Object.keys(A.reduce((oe,Z)=>({...oe,...Z.metric}),{})).sort().map(oe=>({name:oe,config:{filterable:!0},type:oe===D?r.fS.number:r.fS.string,values:[]})),te=V({data:[],valueName:H});return A.forEach(oe=>{(0,v.el)(oe)?oe.values.forEach(Z=>{Q.values.push(Z[0]*1e3),X.forEach(le=>le.values.push(U(oe.metric,le.name))),te.values.push(k(Z[1]))}):(Q.values.push(oe.value[0]*1e3),X.forEach(Z=>Z.values.push(U(oe.metric,Z.name))),te.values.push(k(oe.value[1])))}),{meta:z.meta,refId:z.refId,length:Q.values.length,fields:[Q,...X,te]}}function U(A,z){return A.hasOwnProperty(z)?z===D?k(A[z]):A[z]:""}function L(A,z=!1){return{name:r.Ls,type:r.fS.time,config:{},values:A.map(H=>z?H[0]:H[0]*1e3)}}function V({data:A,valueName:z=r.M5,parseValue:H=!0,labels:Q,displayNameFromDS:X}){return{name:z,type:r.fS.number,display:(0,o.U)(),config:{displayNameFromDS:X},labels:Q,values:A.map(te=>H?k(te[1]):te[1])}}function w(A,z){if(z?.legendFormat)return{name:(0,l.W)((0,b.J)().replace(z.legendFormat,z?.scopedVars),A),labels:A};const{__name__:H,...Q}=A,X=(0,a.aA)(Q);let te=`${H??""}${X}`;return te||(te=z.query),{name:te,labels:Q}}function K(A){const z=A.__name__||"";delete A.__name__;const H=Object.entries(A).map(Q=>`${Q[0]}="${Q[1]}"`).join(",");return`${z}{${H}}`}function B(A){if(A.length===0||A.length===1&&A[0].length===0)return[];const z=A[0].fields.find(Q=>Q.type===r.fS.time),H=A.map(Q=>{let X=Q.fields.find(te=>te.type===r.fS.number);return{...X,name:X.config.displayNameFromDS}});return[{...A[0],meta:{...A[0].meta,type:g.P.HeatmapRows},fields:[z,...H]}]}function W(A){for(let z=A.length-1;z>0;z--){const H=A[z].fields.find(X=>X.type===r.fS.number),Q=A[z-1].fields.find(X=>X.type===r.fS.number);if(!H||!Q)throw new Error("Prometheus heatmap transform error: data should be a time series");for(let X=0;X<H.values.length;X++){const te=Q.values[X]||[0];H.values[X]-=te}}return A}function _(A,z){let H,Q;try{H=k(A.fields[1].state?.displayName??A.name??A.fields[1].name),Q=k(z.fields[1].state?.displayName??z.name??z.fields[1].name)}catch(X){return console.error(X),0}return H>Q?1:H<Q?-1:0}function k(A){return y.test(A)?A[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:parseFloat(A)}},72054:(j,I,e)=>{"use strict";e.d(I,{WS:()=>i,el:()=>n,jo:()=>r,pD:()=>s,x3:()=>t});var t=(m=>(m.Low="Low",m.Medium="Medium",m.High="High",m.None="None",m))(t||{});function n(m){return"values"in m}function i(m){return m==null||!Array.isArray(m)?!1:m.length?"exemplars"in m[0]:!1}var s=(m=>(m.Auto="__auto",m.Verbose="__verbose",m.Custom="__custom",m))(s||{}),r=(m=>(m[m.LabelNames=0]="LabelNames",m[m.LabelValues=1]="LabelValues",m[m.MetricNames=2]="MetricNames",m[m.VarQueryResult=3]="VarQueryResult",m[m.SeriesQuery=4]="SeriesQuery",m))(r||{})},84160:(j,I,e)=>{"use strict";e.d(I,{$C:()=>b,BC:()=>C,M7:()=>d,NZ:()=>h,T1:()=>y,Yt:()=>g,rB:()=>f,t3:()=>E,vO:()=>v,yf:()=>c});var t=e(27938),n=e(12503),i=e(72164),s=e(29241),r=e(93666),m=e(43500);function d(x){const{nodes:M,edges:R}=o(x),[O,T]=(0,m.np)();for(const U of M)O.add(U);for(const U of R)T.add(U);return[O,T]}function o(x){const M=[],R=[],O=new t.U(x),T=l(O),U=(0,m.nO)(L=>{if(L>=x.length)return;const V=O.get(L);return{span:{...V},id:V.spanID,parentIds:V.parentSpanID?[V.parentSpanID]:[]}});for(let L=0;L<O.length;L++){const V=O.get(L),w=U[V.spanID].children.map(_=>{const k=U[_].span;return[k.startTime,k.startTime+k.duration]}),K=(0,m.et)(w),B=V.duration-K,W=(0,m.fy)(V.duration,T,B);M.push({[n.z.id]:V.spanID,[n.z.title]:V.serviceName??"",[n.z.subTitle]:V.operationName,[n.z.mainStat]:W.main,[n.z.secondaryStat]:W.secondary,[n.z.color]:B/T}),V.parentSpanID&&U[V.parentSpanID].span&&R.push({[n.z.id]:V.parentSpanID+"--"+V.spanID,[n.z.target]:V.spanID,[n.z.source]:V.parentSpanID})}return{nodes:M,edges:R}}function l(x){let M=0,R=1/0;for(let O=0;O<x.length;O++){const T=x.get(O);T.startTime<R&&(R=T.startTime),T.startTime+T.duration>M&&(M=T.startTime+T.duration)}return M-R}const a="traces_service_graph_request_server_seconds_sum",g="traces_service_graph_request_total",c="traces_service_graph_request_failed_total",h="traces_service_graph_request_server_seconds_bucket",f={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:[]},b={expr:"topk(5, sum(rate(traces_spanmetrics_calls_total{}[$__range])) by (span_name))",params:['status_code="STATUS_CODE_ERROR"']},v={expr:"histogram_quantile(.9, sum(rate(traces_spanmetrics_latency_bucket{}[$__range])) by (le))",params:[]},y='span_kind="SPAN_KIND_SERVER"',E=[a,g,c,h];function C(x,M){const R=D(x),O={},T={};return P(R[g],"total",g,O,T),P(R[a],"seconds",a,O,T),P(R[c],"failed",c,O,T),S(O,T,M)}function u(){function x(O,T){return new i.v({name:O,fields:T,meta:{preferredVisualisationType:"nodeGraph"}})}const M=x("Nodes",[{name:n.z.id,type:s.fS.string},{name:n.z.title,type:s.fS.string,config:{displayName:"Service name"}},{name:n.z.subTitle,type:s.fS.string,config:{displayName:"Service namespace"}},{name:n.z.mainStat,type:s.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:s.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}},{name:n.z.arc+"success",type:s.fS.number,config:{displayName:"Success",color:{fixedColor:"green",mode:r.S.Fixed}}},{name:n.z.arc+"failed",type:s.fS.number,config:{displayName:"Failed",color:{fixedColor:"red",mode:r.S.Fixed}}}]),R=x("Edges",[{name:n.z.id,type:s.fS.string},{name:n.z.source,type:s.fS.string},{name:n.z.target,type:s.fS.string},{name:n.z.mainStat,type:s.fS.number,config:{unit:"ms/r",displayName:"Average response time"}},{name:n.z.secondaryStat,type:s.fS.number,config:{unit:"r/sec",displayName:"Requests per second"}}]);return[M,R]}function D(x){return x[0].data.reduce((M,R)=>(M[R.refId]=new t.U(R),M),{})}function P(x,M,R,O,T){if(!x)return;const U=`Value #${R}`;for(let L=0;L<x.length;L++){const V=x.get(L),w=V.server_service_namespace?`${V.server_service_namespace}/${V.server}`:V.server,K=V.client_service_namespace?`${V.client_service_namespace}/${V.client}`:V.client,B=`${K}_${w}`;T[B]?T[B][M]=(T[B][M]||0)+V[U]:T[B]={target:w,source:K,[M]:V[U]},O[w]?O[w][M]=(O[w][M]||0)+V[U]:O[w]={name:V.server,namespace:V.server_service_namespace,[M]:V[U]},O[K]||(O[K]={name:V.client,namespace:V.client_service_namespace,[M]:0})}}function S(x,M,R){const[O,T]=u();for(const U of Object.keys(x)){const L=x[U];O.add({[n.z.id]:U,[n.z.title]:L.name,[n.z.subTitle]:L.namespace,[n.z.mainStat]:L.total?L.seconds/L.total*1e3:Number.NaN,[n.z.secondaryStat]:L.total?Math.round(L.total*100)/100:Number.NaN,[n.z.arc+"success"]:L.total?(L.total-Math.min(L.failed||0,L.total))/L.total:1,[n.z.arc+"failed"]:L.total?Math.min(L.failed||0,L.total)/L.total:0})}for(const U of Object.keys(M)){const L=M[U];T.add({[n.z.id]:U,[n.z.source]:L.source,[n.z.target]:L.target,[n.z.mainStat]:L.total?L.seconds/L.total*1e3:Number.NaN,[n.z.secondaryStat]:L.total?Math.round(L.total*100)/100:Number.NaN})}return{nodes:O,edges:T}}},71523:(j,I,e)=>{"use strict";e.d(I,{IM:()=>f,Jk:()=>P,RY:()=>d,g9:()=>b,n4:()=>S,xA:()=>M});var t=e(65518),n=e(72164),i=e(29241),s=e(60956),r=e(84160);function m(U,L,V,w){const K=new n.v({fields:[{name:"Time",type:i.fS.time,config:{custom:{width:200}}},{name:"traceID",type:i.fS.string,config:{displayNameFromDS:"Trace ID",custom:{width:180},links:[{title:"Click to open trace ${__value.raw}",url:"",internal:{datasourceUid:L,datasourceName:V,query:{query:"${__value.raw}"}}}]}},{name:"Message",type:i.fS.string}],meta:{preferredVisualisationType:"table"}});if(!U||w.length===0)return K;const B=U.fields.find(W=>W.type===i.fS.time);for(let W of U.fields){let _=!1;if(W.type===i.fS.string){const k=W.values;for(let A=0;A<k.length;A++){const z=k[A];if(z)for(let H of w){const Q=z.match(H);if(Q){const X=Q[1],te=B?B.values[A]:null;K.fields[0].values.push(te),K.fields[1].values.push(X),K.fields[2].values.push(z),_=!0}}}}if(_)break}return K}function d(U,L,V,w){return U.data.forEach((K,B)=>{const W=m(K,L,V,w);U.data[B]=W}),U}function o(U){if(U.stringValue)return U.stringValue;if(U.boolValue!==void 0)return!!U.boolValue;if(U.intValue!==void 0)return Number.parseInt(U.intValue,10);if(U.doubleValue)return Number.parseFloat(U.doubleValue);if(U.arrayValue){const L=[];for(const V of U.arrayValue.values)L.push(o(V));return L}return""}function l(U){const L=[];let V="OTLPResourceNoServiceName";if(!U)return{serviceName:V,serviceTags:L};for(const w of U.attributes)w.key===t.R9.SERVICE_NAME&&(V=w.value.stringValue||V),L.push({key:w.key,value:o(w.value)});return{serviceName:V,serviceTags:L}}function a(U){const L=[];if(U.attributes)for(const V of U.attributes)L.push({key:V.key,value:o(V.value)});return L}function g(U){let L;if(U.kind){const V=U.kind.toString().toLowerCase().split("_");L=V.length?V[V.length-1]:U.kind.toString()}return L}function c(U){const L=[];if(U.links)for(const V of U.links){const{traceId:w,spanId:K}=V,B=[];if(V.attributes)for(const W of V.attributes)B.push({key:W.key,value:o(W.value)});L.push({traceID:w,spanID:K,tags:B})}return L}function h(U){const L=[];if(U.events)for(const V of U.events){const w=[];if(V.attributes)for(const K of V.attributes)w.push({key:K.key,value:o(K.value)});L.push({fields:w,timestamp:V.timeUnixNano/1e6})}return L}function f(U,L=!1){const V=new n.v({fields:[{name:"traceID",type:i.fS.string},{name:"spanID",type:i.fS.string},{name:"parentSpanID",type:i.fS.string},{name:"operationName",type:i.fS.string},{name:"serviceName",type:i.fS.string},{name:"kind",type:i.fS.string},{name:"statusCode",type:i.fS.number},{name:"statusMessage",type:i.fS.string},{name:"instrumentationLibraryName",type:i.fS.string},{name:"instrumentationLibraryVersion",type:i.fS.string},{name:"traceState",type:i.fS.string},{name:"serviceTags",type:i.fS.other},{name:"startTime",type:i.fS.number},{name:"duration",type:i.fS.number},{name:"logs",type:i.fS.other},{name:"references",type:i.fS.other},{name:"tags",type:i.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const K of U){const{serviceName:B,serviceTags:W}=l(K.resource);for(const _ of K.instrumentationLibrarySpans)for(const k of _.spans)V.add({traceID:k.traceId.length>16?k.traceId.slice(16):k.traceId,spanID:k.spanId,parentSpanID:k.parentSpanId||"",operationName:k.name||"",serviceName:B,kind:g(k),statusCode:k.status?.code,statusMessage:k.status?.message,instrumentationLibraryName:_.instrumentationLibrary?.name,instrumentationLibraryVersion:_.instrumentationLibrary?.version,traceState:k.traceState,serviceTags:W,startTime:k.startTimeUnixNano/1e6,duration:(k.endTimeUnixNano-k.startTimeUnixNano)/1e6,tags:a(k),logs:h(k),references:c(k)})}}catch(K){return console.error(K),{error:{message:"JSON is not valid OpenTelemetry format: "+K},data:[]}}let w=[V];return L&&w.push(...(0,r.M7)(V)),{data:w}}function b(U){let L={batches:[]},V={};for(let w=0;w<U.length;w++){const K=U.get(w);V[K.serviceName]||(V[K.serviceName]=L.batches.length,L.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let B=V[K.serviceName];L.batches[B].resource.attributes.length===0&&(L.batches[B].resource.attributes=y(K.serviceTags)),L.batches[B].instrumentationLibrarySpans[0].instrumentationLibrary||K.instrumentationLibraryName&&(L.batches[B].instrumentationLibrarySpans[0].instrumentationLibrary={name:K.instrumentationLibraryName,version:K.instrumentationLibraryVersion?K.instrumentationLibraryVersion:""}),L.batches[B].instrumentationLibrarySpans[0].spans.push({traceId:K.traceID.padStart(32,"0"),spanId:K.spanID,parentSpanId:K.parentSpanID||"",traceState:K.traceState||"",name:K.operationName,kind:v(K.kind),startTimeUnixNano:K.startTime*1e6,endTimeUnixNano:(K.startTime+K.duration)*1e6,attributes:K.tags?y(K.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:C(K),events:u(K.logs),links:D(K.references)})}return L}function v(U){let L;if(U)switch(U){case"server":L="SPAN_KIND_SERVER";break;case"client":L="SPAN_KIND_CLIENT";break;case"producer":L="SPAN_KIND_PRODUCER";break;case"consumer":L="SPAN_KIND_CONSUMER";break;case"internal":L="SPAN_KIND_INTERNAL";break}return L}function y(U){return U.reduce((L,V)=>[...L,{key:V.key,value:E(V)}],[])}function E(U){if(typeof U.value=="string")return{stringValue:U.value};if(typeof U.value=="boolean")return{boolValue:U.value};if(typeof U.value=="number")return U.value%1===0?{intValue:U.value}:{doubleValue:U.value};if(typeof U.value=="object"&&Array.isArray(U.value)){const L=[];for(const V of U.value)L.push(E(V));return{arrayValue:{values:L}}}return{stringValue:U.value}}function C(U){let L;return U.statusCode!==void 0&&(L={code:U.statusCode,message:U.statusMessage?U.statusMessage:""}),L}function u(U){if(!U||!U.length)return;let L=[];for(const V of U){let w={timeUnixNano:V.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:""};for(const K of V.fields)w.attributes.push({key:K.key,value:E(K)});L.push(w)}return L}function D(U){if(!U||!U.length)return;let L=[];for(const V of U){let w={traceId:V.traceID,spanId:V.spanID,attributes:[],droppedAttributesCount:0};if(V.tags?.length)for(const K of V.tags)w.attributes?.push({key:K.key,value:E(K)});L.push(w)}return L}function P(U,L=!1){const V=U.data[0];if(!V)return T;let w=[...U.data];return L&&w.push(...(0,r.M7)(V)),{...U,data:w}}function S(U,L){const V=new n.v({fields:[{name:"traceID",type:i.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:L.uid,datasourceName:L.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"traceName",type:i.fS.string,config:{displayNameFromDS:"Trace name"}},{name:"startTime",type:i.fS.string,config:{displayNameFromDS:"Start time"}},{name:"traceDuration",type:i.fS.number,config:{displayNameFromDS:"Duration",unit:"ms"}}],meta:{preferredVisualisationType:"table"}});if(!U?.length)return V;const w=U.sort((K,B)=>parseInt(B?.startTimeUnixNano,10)/1e6-parseInt(K?.startTimeUnixNano,10)/1e6).map(x);for(const K of w)V.add(K);return V}function x(U){let L="";U.rootServiceName&&(L+=U.rootServiceName+" "),U.rootTraceName&&(L+=U.rootTraceName);const V=parseInt(U.startTimeUnixNano,10)/1e6;let w=isNaN(V)?"":(0,s.dq)(V);return{traceID:U.traceID,startTime:w,traceDuration:U.durationMs?.toString(),traceName:L}}function M(U,L){const V=new n.v({name:"Traces",fields:[{name:"traceID",type:i.fS.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:L.uid,datasourceName:L.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:i.fS.string,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceName",type:i.fS.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:i.fS.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});if(!U?.length)return[V];const w=[],K=U.sort((B,W)=>parseInt(W?.startTimeUnixNano,10)/1e6-parseInt(B?.startTimeUnixNano,10)/1e6).reduce((B,W,_)=>{const k=x(W);return B.push(k),w.push(R(W,L,_)),B},[]);for(const B of K)V.add(B);return[V,...w]}const R=(U,L,V)=>{const w={};let K=!1;U.spanSet?.spans.forEach(W=>{W.name&&(K=!0),W.attributes?.forEach(_=>{w[_.key]={name:_.key,type:i.fS.string,config:{displayNameFromDS:_.key}}})});const B=new n.v({fields:[{name:"traceIdHidden",config:{custom:{hidden:!0}}},{name:"spanID",type:i.fS.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:L.uid,datasourceName:L.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"spanStartTime",type:i.fS.string,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:i.fS.string,config:{displayNameFromDS:"Name",custom:{hidden:!K}}},...Object.values(w),{name:"duration",type:i.fS.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table",custom:{parentRowIndex:V}}});return U.spanSet?.spans.forEach(W=>{B.add(O(W,U.traceID))}),B};function O(U,L){const V=parseInt(U.startTimeUnixNano,10)/1e6;let w=(0,s.dq)(V);const K={traceIdHidden:L,spanID:U.spanID,spanStartTime:w,duration:parseInt(U.durationNanos,10),name:U.name};return U.attributes?.forEach(B=>{(B.value.boolValue||B.value.Value?.bool_value)&&(K[B.key]=B.value.boolValue||B.value.Value?.bool_value),(B.value.doubleValue||B.value.Value?.double_value)&&(K[B.key]=B.value.doubleValue||B.value.Value?.double_value),(B.value.intValue||B.value.Value?.int_value)&&(K[B.key]=B.value.intValue||B.value.Value?.int_value),(B.value.stringValue||B.value.Value?.string_value)&&(K[B.key]=B.value.stringValue||B.value.Value?.string_value)}),K}const T={data:[new n.v({fields:[{name:"trace",type:i.fS.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},66288:(j,I,e)=>{"use strict";e.d(I,{H:()=>a,m:()=>r});var t=e(89949),n=e.n(t),i=e(72164),s=e(29241);function r(c){const h=c.map(m),f=new i.v({fields:[{name:"traceID",type:s.fS.string},{name:"spanID",type:s.fS.string},{name:"parentSpanID",type:s.fS.string},{name:"operationName",type:s.fS.string},{name:"serviceName",type:s.fS.string},{name:"serviceTags",type:s.fS.other},{name:"startTime",type:s.fS.number},{name:"duration",type:s.fS.number},{name:"logs",type:s.fS.other},{name:"tags",type:s.fS.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const b of h)f.add(b);return f}function m(c){const h={traceID:c.traceId,spanID:c.id,parentSpanID:c.parentId,operationName:c.name,serviceName:c.localEndpoint?.serviceName||c.remoteEndpoint?.serviceName||"unknown",serviceTags:o(c),startTime:c.timestamp/1e3,duration:c.duration/1e3,logs:c.annotations?.map(d)??[],tags:Object.keys(c.tags||{}).reduce((f,b)=>b==="error"?(f.push({key:"error",value:!0}),f.push({key:"errorValue",value:c.tags.error}),f):(f.push({key:b,value:c.tags[b]}),f),[])};return c.kind&&(h.tags=[{key:"kind",value:c.kind},...h.tags??[]]),c.shared&&(h.tags=[{key:"shared",value:c.shared},...h.tags??[]]),h}function d(c){return{timestamp:c.timestamp,fields:[{key:"annotation",value:c.value}]}}function o(c){const h=c.localEndpoint||c.remoteEndpoint;return h?[l("ipv4",h.ipv4),l("ipv6",h.ipv6),l("port",h.port),l("endpointType",c.localEndpoint?"local":"remote")].filter(t.identity):[]}function l(c,h){if(h)return{key:c,value:h}}const a=c=>{let h=[];for(let f=0;f<c.length;f++){const b=c.get(f);h.push({traceId:b.traceID,parentId:b.parentSpanID,name:b.operationName,id:b.spanID,timestamp:b.startTime*1e3,duration:b.duration*1e3,...g(b),annotations:b.logs.length?b.logs.map(v=>({timestamp:v.timestamp,value:v.fields[0].value})):void 0,tags:b.tags.length?b.tags.filter(v=>v.key!=="kind"&&v.key!=="endpointType"&&v.key!=="shared").reduce((v,y)=>y.key==="error"?{...v,[y.key]:b.tags.find(E=>E.key==="errorValue").value||""}:{...v,[y.key]:y.value},{}):void 0,kind:b.tags.find(v=>v.key==="kind")?.value,shared:b.tags.find(v=>v.key==="shared")?.value})}return h},g=c=>{const h=c.serviceTags.find(f=>f.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return c.serviceName!=="unknown"?{[h]:{serviceName:c.serviceName,ipv4:c.serviceTags.find(f=>f.key==="ipv4")?.value,ipv6:c.serviceTags.find(f=>f.key==="ipv6")?.value,port:c.serviceTags.find(f=>f.key==="port")?.value}}:void 0}},57183:(j,I,e)=>{"use strict";e.d(I,{As:()=>t,LM:()=>i,kx:()=>n,wO:()=>s});var t=(r=>(r[r.AlphaAsc=1]="AlphaAsc",r[r.AlphaDesc=2]="AlphaDesc",r[r.Importance=3]="Importance",r[r.TimeAsc=4]="TimeAsc",r[r.TimeDesc=5]="TimeDesc",r))(t||{}),n=(r=>(r.Current="current",r.RecentChanges="changes",r))(n||{}),i=(r=>(r.Default="default",r.Custom="custom",r))(i||{}),s=(r=>(r.List="list",r.Stat="stat",r))(s||{})},59479:(j,I,e)=>{"use strict";e.d(I,{Gj:()=>n,Qm:()=>m});var t=e(27107);const n=1,i=2,s=3,r=(d,o,l,a)=>(0,t.O)(o+d*(l+a),6);function m(d,o,l,a,g){let c=1-o,h=l===n?c/(d-1):l===i?c/d:l===s?c/(d+1):0;(isNaN(h)||h===1/0)&&(h=0);let f=l===n?0:l===i?h/2:l===s?h:0,b=o/d,v=(0,t.O)(b,6);if(a==null)for(let y=0;y<d;y++)g(y,r(y,f,b,h),v);else g(a,r(a,f,b,h),v)}},94876:(j,I,e)=>{"use strict";e.d(I,{Pn:()=>i,kK:()=>r,lW:()=>m,zZ:()=>s});const t=10,n=4;function i(d,o,l,a,g,c){return d>=l&&d<=g&&o>=a&&o<=c}function s(d,o,l){let a;if(d.o.length&&(a=d.o.find(g=>g.sidx===o&&g.didx===l)),a==null&&d.q)for(let g=0;g<d.q.length&&(a=s(d.q[g],o,l),!a);g++);return a}function r(d,o){return d.x<=o.x+o.w&&d.x+d.w>=o.x&&d.y+d.h>=o.y&&d.y<=o.y+o.h}class m{constructor(o,l,a,g,c=0){this.x=o,this.y=l,this.w=a,this.h=g,this.l=c,this.o=[],this.q=null}split(){let o=this,l=o.x,a=o.y,g=o.w/2,c=o.h/2,h=o.l+1;o.q=[new m(l+g,a,g,c,h),new m(l,a,g,c,h),new m(l,a+c,g,c,h),new m(l+g,a+c,g,c,h)]}quads(o,l,a,g,c){let h=this,f=h.q,b=h.x+h.w/2,v=h.y+h.h/2,y=l<v,E=o<b,C=o+a>b,u=l+g>v;y&&C&&c(f[0]),E&&y&&c(f[1]),E&&u&&c(f[2]),C&&u&&c(f[3])}add(o){let l=this;if(l.q!=null)l.quads(o.x,o.y,o.w,o.h,a=>{a.add(o)});else{let a=l.o;if(a.push(o),a.length>t&&l.l<n){l.split();for(let g=0;g<a.length;g++){let c=a[g];l.quads(c.x,c.y,c.w,c.h,h=>{h.add(c)})}l.o.length=0}}}get(o,l,a,g,c){let h=this,f=h.o;for(let b=0;b<f.length;b++)c(f[b]);h.q!=null&&h.quads(o,l,a,g,b=>{b.get(o,l,a,g,c)})}clear(){this.o.length=0,this.q=null}}},72082:(j,I,e)=>{"use strict";e.d(I,{M:()=>a,l:()=>g});var t=e(89949),n=e.n(t),i=e(27702),s=e(90482),r=e(91466),m=e(24919),d=e(50741),o=e(44201),l=e(12308);class a extends i.PureComponent{constructor(){super(...arguments),this.renderComponent=(h,f)=>{const{options:b,fieldConfig:v}=this.props,{value:y,alignmentFactors:E,orientation:C,width:u,height:D,count:P}=h,{field:S,display:x,view:M,colIndex:R}=y,{openMenu:O,targetClassName:T}=f;let U;return M&&(0,t.isNumber)(R)&&(U=M.getFieldDisplayProcessor(R)),i.createElement(m.xf,{value:g(P,v.defaults,x),width:u,height:D,orientation:C,field:S,text:b.text,display:U,theme:l.config.theme2,itemSpacing:this.getItemSpacing(),displayMode:b.displayMode,onClick:O,className:T,alignmentFactors:P>1?E:void 0,showUnfilled:b.showUnfilled,valueDisplayMode:b.valueMode})},this.renderValue=h=>{const{value:f,orientation:b}=h,{hasLinks:v,getLinks:y}=f;return v&&y?i.createElement("div",{style:{width:"100%",display:b===s.wm.Vertical?"flex":"initial"}},i.createElement(d.V,{style:{height:"100%"},links:y},E=>this.renderComponent(h,E))):this.renderComponent(h,{})},this.getValues=()=>{const{data:h,options:f,replaceVariables:b,fieldConfig:v,timeZone:y}=this.props;return(0,r.nG)({fieldConfig:v,reduceOptions:f.reduceOptions,replaceVariables:b,theme:l.config.theme2,data:h.series,timeZone:y})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:h,width:f,options:b,data:v,renderCounter:y}=this.props;return i.createElement(o.Q,{source:v,getAlignmentFactors:r.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:y,width:f,height:h,minVizWidth:b.minVizWidth,minVizHeight:b.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:b.orientation})}}function g(c,h,f){return c===1&&!h.displayName?{...f,title:void 0}:f}},15301:(j,I,e)=>{"use strict";e.d(I,{S:()=>l});var t=e(45540),n=e(61965),i=e(16998),s=e(89949);function r(a,g){const c=m(a);return d(c,g,"parents")}function m(a){return a.map(g=>{if(!g.parents?.length)return g;const c={...g,children:[]},h=[{child:c,parent:g.parents[0]}];for(;h.length;){const f=h.shift(),b={...f.parent,children:f.child?[f.child]:[],parents:[]};f.child&&(b.value=f.child.value,f.child.parents=[b]),f.parent.parents?.length&&h.push({child:b,parent:f.parent.parents[0]})}return c})}function d(a,g,c="children"){const h=c==="parents"?"children":"parents",f=[],b=[{previous:void 0,items:a,level:0}];for(;b.length;){const v=b.shift(),y=v.items.flatMap(D=>D.itemIndexes),E={value:v.items.reduce((D,P)=>D+P.value,0),itemIndexes:y,children:[],parents:[],start:0};if(f[v.level]=f[v.level]||[],f[v.level].push(E),v.previous){E[h]=[v.previous];const D=v.previous[c]?.reduce((P,S)=>P+S.value,0)||0;E.start=v.previous.start+D,v.previous[c].push(E)}const C=v.items.flatMap(D=>D[c]||[]),u=(0,s.groupBy)(C,D=>g.getLabel(D.itemIndexes[0]));for(const D of Object.values(u))b.push({previous:E,items:D,level:v.level+1})}return c==="parents"&&f.reverse(),f}function o(a){const g=[];let c=0,h;const f={};for(let b=0;b<a.data.length;b++){const v=a.getLevel(b),y=b>0?a.getLevel(b-1):void 0;if(g[v]=g[v]||[],y&&y>=v){const C=g[v][g[v].length-1];c=C.start+a.getValue(C.itemIndexes[0]),h=C.parents[0]}const E={itemIndexes:[b],value:a.getValue(b),start:c,parents:h&&[h],children:[]};f[a.getLabel(b)]?f[a.getLabel(b)].push(E):f[a.getLabel(b)]=[E],h&&h.children.push(E),h=E,g[v].push(E)}return[g,f]}class l{constructor(g,c=(0,t.j)()){if(this.data=g,this.labelField=g.fields.find(f=>f.name==="label"),this.levelField=g.fields.find(f=>f.name==="level"),this.valueField=g.fields.find(f=>f.name==="value"),this.selfField=g.fields.find(f=>f.name==="self"),!(this.labelField&&this.levelField&&this.valueField&&this.selfField))throw new Error("Malformed dataFrame: value, level and label and self fields are required.");const h=this.labelField?.config?.type?.enum;h?(this.labelDisplayProcessor=(0,n.U)({field:this.labelField,theme:c}),this.uniqueLabels=h.text||[]):(this.labelDisplayProcessor=f=>({text:f+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values)]),this.valueDisplayProcessor=(0,n.U)({field:this.valueField,theme:c})}getLabel(g){return this.labelDisplayProcessor(this.labelField.values[g]).text}getLevel(g){return this.levelField.values[g]}getValue(g){return(typeof g=="number"?[g]:g).reduce((h,f)=>h+this.valueField.values[f],0)}getValueDisplay(g){return this.valueDisplayProcessor(this.getValue(g))}getSelf(g){return(typeof g=="number"?[g]:g).reduce((h,f)=>h+this.selfField.values[f],0)}getSelfDisplay(g){return this.valueDisplayProcessor(this.getSelf(g))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case i._r.Bytes:return"RAM";case i._r.Nanoseconds:return"Time"}return"Count"}getLevels(){return this.initLevels(),this.levels}getSandwichLevels(g){const c=this.getNodesWithLabel(g);if(!c?.length)return[];const h=r(c,this),f=d(c,this);return[h,f]}getNodesWithLabel(g){return this.initLevels(),this.uniqueLabelsMap[g]}initLevels(){if(!this.levels){const[g,c]=o(this);this.levels=g,this.uniqueLabelsMap=c}}}},78088:(j,I,e)=>{"use strict";e.d(I,{Z:()=>Ve});var t=e(42844),n=e(27702),i=e(96284),s=e(86312),r=e(34667),m=e(66310);const d=22*window.devicePixelRatio,o=10*window.devicePixelRatio,l=.5*window.devicePixelRatio,a=20*window.devicePixelRatio,g=.5*window.devicePixelRatio,c=4*window.devicePixelRatio,h=800,f=120;var b=e(73453),v=e(79655),y=e(14986);const C=({itemData:Ne,onMenuItemClick:fe,onItemFocus:ve,onSandwich:ze})=>{function Oe(){return n.createElement(n.Fragment,null,n.createElement(v.s,{label:"Focus block",icon:"eye",onClick:()=>{ve(),fe()}}),n.createElement(v.s,{label:"Copy function name",icon:"copy",onClick:()=>{navigator.clipboard.writeText(Ne.label).then(()=>{fe()})}}),n.createElement(v.s,{label:"Sandwich view",icon:"gf-show-context",onClick:()=>{ze(),fe()}}))}return n.createElement("div",{"data-testid":"contextMenu"},n.createElement(y.x,{renderMenuItems:Oe,x:Ne.posX+10,y:Ne.posY,focusOnOpen:!1}))};var u=e(21609),D=e(67437);const P=n.memo(({data:Ne,focusedItem:fe,totalTicks:ve,sandwichedLabel:ze,onFocusPillClick:Oe,onSandwichPillClick:Fe})=>{const Ge=(0,m.wW)(S),nt=[],Xe=(0,u.Cf)("short")(ve),ut=Ne.valueDisplayProcessor(ve);let ht=ut.text+ut.suffix;const wt=Ne.getUnitTitle();if(wt==="Count"&&(ut.suffix||(ht=ut.text)),nt.push(n.createElement("div",{className:Ge.metadataPill,key:"default"},ht," | ",Xe.text,Xe.suffix," samples (",wt,")")),ze&&nt.push(n.createElement("span",{key:"sandwich"},n.createElement(b.J,{size:"sm",name:"angle-right"}),n.createElement("div",{className:Ge.metadataPill},n.createElement(b.J,{size:"sm",name:"gf-show-context"})," ",ze.substring(ze.lastIndexOf("/")+1),n.createElement(D.h,{className:Ge.pillCloseButton,name:"times",size:"sm",onClick:Fe,tooltip:"Remove sandwich view","aria-label":"Remove sandwich view"})))),fe){const mn=Math.round(1e4*(fe.item.value/ve))/100;nt.push(n.createElement("span",{key:"focus"},n.createElement(b.J,{size:"sm",name:"angle-right"}),n.createElement("div",{className:Ge.metadataPill},n.createElement(b.J,{size:"sm",name:"eye"})," ",mn,"% of total",n.createElement(D.h,{className:Ge.pillCloseButton,name:"times",size:"sm",onClick:Oe,tooltip:"Remove focus","aria-label":"Remove focus"}))))}return n.createElement(n.Fragment,null,n.createElement("div",{className:Ge.metadata},nt))});P.displayName="FlameGraphMetadata";const S=Ne=>({metadataPill:(0,t.css)`
    label: metadataPill;
    display: inline-block;
    background: ${Ne.colors.background.secondary};
    border-radius: ${Ne.shape.borderRadius(8)};
    padding: ${Ne.spacing(.5,1)};
    font-size: ${Ne.typography.bodySmall.fontSize};
    font-weight: ${Ne.typography.fontWeightMedium};
    line-height: ${Ne.typography.bodySmall.lineHeight};
    color: ${Ne.colors.text.secondary};
  `,pillCloseButton:(0,t.css)`
    label: pillCloseButton;
    vertical-align: text-bottom;
    margin: ${Ne.spacing(0,.5)};
  `,metadata:(0,t.css)`
    margin: 8px 0;
    text-align: center;
  `}),x=P;var M=e(52995),R=e(97695);const O=({data:Ne,item:fe,totalTicks:ve,position:ze})=>{const Oe=(0,m.wW)(U);if(!(fe&&ze))return null;const Fe=T(Ne,fe,ve),Ge=n.createElement("div",{className:Oe.tooltipContent},n.createElement("p",null,Ne.getLabel(fe.itemIndexes[0])),n.createElement("p",{className:Oe.lastParagraph},Fe.unitTitle,n.createElement("br",null),"Total: ",n.createElement("b",null,Fe.unitValue)," (",Fe.percentValue,"%)",n.createElement("br",null),"Self: ",n.createElement("b",null,Fe.unitSelf)," (",Fe.percentSelf,"%)",n.createElement("br",null),"Samples: ",n.createElement("b",null,Fe.samples)));return n.createElement(M.h_,null,n.createElement(R.S,{position:ze,offset:{x:15,y:0}},Ge))},T=(Ne,fe,ve)=>{const ze=Ne.valueDisplayProcessor(fe.value),Oe=Ne.getSelfDisplay(fe.itemIndexes),Fe=Math.round(1e4*(ze.numeric/ve))/100,Ge=Math.round(1e4*(Oe.numeric/ve))/100;let nt=ze.text+ze.suffix,Xe=Oe.text+Oe.suffix;const ut=Ne.getUnitTitle();return ut==="Count"&&(ze.suffix||(nt=ze.text),Oe.suffix||(Xe=Oe.text)),{name:Ne.getLabel(fe.itemIndexes[0]),percentValue:Fe,percentSelf:Ge,unitTitle:ut,unitValue:nt,unitSelf:Xe,samples:ze.numeric.toLocaleString()}},U=Ne=>({tooltipContent:(0,t.css)`
    title: tooltipContent;
    font-size: ${Ne.typography.bodySmall.fontSize};
  `,lastParagraph:(0,t.css)`
    title: lastParagraph;
    margin-bottom: 0;
  `,name:(0,t.css)`
    title: name;
    margin-bottom: 10px;
  `}),L=O;var V=e(12354),w=e(5354),K=e(16998),B=e(71685);function W(Ne,fe=0){let ve,ze,Oe,Fe,Ge,nt,Xe,ut;for(ve=Ne.length&3,ze=Ne.length-ve,Oe=fe,Ge=3432918353,nt=461845907,ut=0;ut<ze;)Xe=Ne.charCodeAt(ut)&255|(Ne.charCodeAt(++ut)&255)<<8|(Ne.charCodeAt(++ut)&255)<<16|(Ne.charCodeAt(++ut)&255)<<24,++ut,Xe=(Xe&65535)*Ge+(((Xe>>>16)*Ge&65535)<<16)&4294967295,Xe=Xe<<15|Xe>>>17,Xe=(Xe&65535)*nt+(((Xe>>>16)*nt&65535)<<16)&4294967295,Oe^=Xe,Oe=Oe<<13|Oe>>>19,Fe=(Oe&65535)*5+(((Oe>>>16)*5&65535)<<16)&4294967295,Oe=(Fe&65535)+27492+(((Fe>>>16)+58964&65535)<<16);switch(Xe=0,ve){case 3:Xe^=(Ne.charCodeAt(ut+2)&255)<<16;case 2:Xe^=(Ne.charCodeAt(ut+1)&255)<<8;case 1:Xe^=Ne.charCodeAt(ut)&255;default:Xe=(Xe&65535)*Ge+(((Xe>>>16)*Ge&65535)<<16)&4294967295,Xe=Xe<<15|Xe>>>17,Xe=(Xe&65535)*nt+(((Xe>>>16)*nt&65535)<<16)&4294967295,Oe^=Xe}return Oe^=Ne.length,Oe^=Oe>>>16,Oe=(Oe&65535)*2246822507+(((Oe>>>16)*2246822507&65535)<<16)&4294967295,Oe^=Oe>>>13,Oe=(Oe&65535)*3266489909+(((Oe>>>16)*3266489909&65535)<<16)&4294967295,Oe^=Oe>>>16,Oe>>>0}const _=[(0,B.Z)({h:24,s:69,l:60}),(0,B.Z)({h:34,s:65,l:65}),(0,B.Z)({h:194,s:52,l:61}),(0,B.Z)({h:163,s:45,l:55}),(0,B.Z)({h:211,s:48,l:60}),(0,B.Z)({h:246,s:40,l:65}),(0,B.Z)({h:305,s:63,l:79}),(0,B.Z)({h:47,s:100,l:73}),(0,B.Z)({r:183,g:219,b:171}),(0,B.Z)({r:244,g:213,b:152}),(0,B.Z)({r:78,g:146,b:249}),(0,B.Z)({r:249,g:186,b:143}),(0,B.Z)({r:242,g:145,b:145}),(0,B.Z)({r:130,g:181,b:216}),(0,B.Z)({r:229,g:168,b:226}),(0,B.Z)({r:174,g:162,b:224}),(0,B.Z)({r:154,g:196,b:138}),(0,B.Z)({r:242,g:201,b:109}),(0,B.Z)({r:101,g:197,b:219}),(0,B.Z)({r:249,g:147,b:78}),(0,B.Z)({r:234,g:100,b:96}),(0,B.Z)({r:81,g:149,b:206}),(0,B.Z)({r:214,g:131,b:206}),(0,B.Z)({r:128,g:110,b:183})],k=Q(1,100,0,1),A=Q(100,100,0,1),z=`linear-gradient(90deg, ${k} 0%, ${A} 100%)`,H=`linear-gradient(90deg, ${_[0]} 0%, ${_[2]} 30%, ${_[6]} 50%, ${_[7]} 70%, ${_[8]} 100%)`;function Q(Ne,fe,ve,ze){const Oe=Math.min(1,Ne/fe/(ze-ve)),Fe=50-50*Oe,Ge=65+7*Oe;return(0,B.Z)({h:Fe,s:100,l:Ge})}function X(Ne,fe){const ve=oe(Ne),Oe=W(ve||"",0)%_.length;let Fe=_[Oe];return fe.isLight&&(Fe=Fe.clone().brighten(15)),Fe}const te=[["phpspy",/^(?<packageName>(.*\/)*)(?<filename>.*\.php+)(?<line_info>.*)$/],["pyspy",/^(?<packageName>(.*\/)*)(?<filename>.*\.py+)(?<line_info>.*)$/],["rbspy",/^(?<packageName>(.*\/)*)(?<filename>.*\.rb+)(?<line_info>.*)$/],["nodespy",/^(\.\/node_modules\/)?(?<packageName>[^/]*)(?<filename>.*\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$/],["gospy",/^(?<packageName>.*?\/.*?\.|.*?\.|.+)(?<functionName>.*)$/],["javaspy",/^(?<packageName>.+\/)(?<filename>.+\.)(?<functionName>.+)$/],["dotnetspy",/^(?<packageName>.+)\.(.+)\.(.+)\(.*\)$/],["tracing",/^(?<packageName>.+?):.*$/],["pyroscope-rs",/^(?<packageName>[^::]+)/],["ebpfspy",/^(?<packageName>.+)$/],["unknown",/^(?<packageName>.+)$/]];function oe(Ne){for(const[fe,ve]of te){const ze=Ne.match(ve);if(ze)return ze.groups?.packageName||""}}const Z=new V.Z;function le(Ne,fe,ve,ze,Oe,Fe,Ge,nt,Xe,ut,ht){const wt=(0,n.useMemo)(()=>{if(Ge){const gn=new Set;let Sn=Z.filter(fe.getUniqueLabels(),Ge);if(Sn)for(let Cn of Sn)gn.add(fe.getUniqueLabels()[Cn]);return gn}},[Ge,fe]),mn=ce(Ne,ze,ve.length),vn=(0,m.l4)();(0,n.useEffect)(()=>{if(!mn)return;mn.clearRect(0,0,mn.canvas.width,mn.canvas.height);const gn=ze*window.devicePixelRatio/Xe/(Fe-Oe);for(let Sn=0;Sn<ve.length;Sn++){const Cn=ve[Sn],pn=q(fe,Cn,Sn,Xe,Oe,gn);for(const nn of pn){const Ct=ht?ht.level:0;ne(mn,nn,Xe,Oe,Fe,Sn,Ct,wt,nt,ut,vn)}}},[mn,fe,ve,ze,Oe,Fe,Ge,ht,wt,nt,Xe,ut,vn])}function ce(Ne,fe,ve){const[ze,Oe]=(0,n.useState)();return(0,n.useEffect)(()=>{if(!(ve&&Ne.current))return;const Fe=Ne.current.getContext("2d"),Ge=d*ve;Ne.current.width=Math.round(fe*window.devicePixelRatio),Ne.current.height=Math.round(Ge),Ne.current.style.width=`${fe}px`,Ne.current.style.height=`${Ge/window.devicePixelRatio}px`,Fe.textBaseline="middle",Fe.font=12*window.devicePixelRatio+"px monospace",Fe.strokeStyle="white",Oe(Fe)},[Ne,Oe,fe,ve]),ze}function q(Ne,fe,ve,ze,Oe,Fe){const Ge=[];for(let nt=0;nt<fe.length;nt+=1){const Xe=fe[nt],ut=re(Xe.start,ze,Oe,Fe);let ht=Xe.value;const wt=ht*Fe<=o;if(wt)for(;nt<fe.length-1&&Xe.start+ht===fe[nt+1].start&&fe[nt+1].value*Fe<=o;)nt+=1,ht+=fe[nt].value;const mn=Ne.valueDisplayProcessor(Xe.value);let vn=mn.suffix?mn.text+mn.suffix:mn.text;const gn=ht*Fe-(wt?0:g*2);Ge.push({width:gn,height:d,x:ut,y:ve*d,collapsed:wt,ticks:ht,label:Ne.getLabel(Xe.itemIndexes[0]),unitLabel:vn,itemIndex:Xe.itemIndexes[0]})}return Ge}function ne(Ne,fe,ve,ze,Oe,Fe,Ge,nt,Xe,ut,ht){if(fe.width<l)return;Ne.beginPath(),Ne.rect(fe.x+(fe.collapsed?0:g),fe.y,fe.width,fe.height);const wt=ut===K.eL.ValueBased?Q(fe.ticks,ve,ze,Oe):X(fe.label,ht);if(nt?Ne.fillStyle=nt.has(fe.label)?wt.toHslString():w.O9[55]:fe.collapsed?Ne.fillStyle=w.O9[55]:Ne.fillStyle=Fe>Ge-1?wt.toHslString():wt.lighten(15).toHslString(),fe.collapsed){Ne.fill();return}Ne.stroke(),Ne.fill(),fe.width>=a&&pe(Ne,fe.label,fe,Xe)}function pe(Ne,fe,ve,ze){Ne.save(),Ne.clip(),Ne.fillStyle="#222";const Oe=Ne.measureText(fe),Fe=ve.width-c;let Ge=`${fe} (${ve.unitLabel})`,nt=Math.max(ve.x,0)+c;Oe.width>Fe&&(Ne.textAlign=ze,ze==="right"&&(Ge=fe,nt=ve.x+ve.width-c)),Ne.fillText(Ge,nt,ve.y+d/2),Ne.restore()}function re(Ne,fe,ve,ze){return(Ne-fe*ve)*ze}const ie=({data:Ne,rangeMin:fe,rangeMax:ve,search:ze,setRangeMin:Oe,setRangeMax:Fe,onItemFocused:Ge,focusedItemData:nt,textAlign:Xe,onSandwich:ut,sandwichItem:ht,onFocusPillClick:wt,onSandwichPillClick:mn,colorScheme:vn})=>{const gn=(0,m.wW)(Se),[Sn,Cn,pn]=(0,n.useMemo)(()=>{let pt=Ne.getLevels(),It=pt.length?pt[0][0].value:0,Qt=0;if(ht){const[rn,un]=Ne.getSandwichLevels(ht);pt=[...rn,[],...un],It=un.length?un[0][0].value:0,Qt=rn.length}return[pt,It,Qt]},[Ne,ht]),[nn,{width:Ct}]=(0,i.Z)(),bt=(0,n.useRef)(null),[Ut,_t]=(0,n.useState)(),[Gt,jt]=(0,n.useState)();le(bt,Ne,Sn,Ct,fe,ve,ze,Xe,Cn,vn,nt);const sn=(0,n.useCallback)(pt=>{_t(void 0);const It=bt.current.clientWidth/Cn/(ve-fe),{levelIndex:Qt,barIndex:rn}=ye({x:pt.nativeEvent.offsetX,y:pt.nativeEvent.offsetY},Sn,It,Cn,fe);if(rn!==-1&&!isNaN(Qt)&&!isNaN(rn)){const un=Sn[Qt][rn];jt({posY:pt.clientY,posX:pt.clientX,item:un,level:Qt,label:Ne.getLabel(un.itemIndexes[0])})}else jt(void 0)},[Ne,fe,ve,Cn,Sn]),[St,mt]=(0,n.useState)(),kt=(0,n.useCallback)(pt=>{if(Gt===void 0){_t(void 0),mt(void 0);const It=bt.current.clientWidth/Cn/(ve-fe),{levelIndex:Qt,barIndex:rn}=ye({x:pt.nativeEvent.offsetX,y:pt.nativeEvent.offsetY},Sn,It,Cn,fe);rn!==-1&&!isNaN(Qt)&&!isNaN(rn)&&(mt({x:pt.clientX,y:pt.clientY}),_t(Sn[Qt][rn]))}},[fe,ve,Cn,Gt,Sn,mt]),it=(0,n.useCallback)(()=>{_t(void 0)},[]);return(0,n.useEffect)(()=>{const pt=It=>{It.target.parentElement?.id!=="flameGraphCanvasContainer_clickOutsideCheck"&&jt(void 0)};return window.addEventListener("click",pt),()=>window.removeEventListener("click",pt)},[jt]),n.createElement("div",{className:gn.graph},n.createElement(x,{data:Ne,focusedItem:nt,sandwichedLabel:ht,totalTicks:Cn,onFocusPillClick:wt,onSandwichPillClick:mn}),n.createElement("div",{className:gn.canvasContainer},ht&&n.createElement("div",null,n.createElement("div",{className:gn.sandwichMarker,style:{height:pn*d/window.devicePixelRatio}},"Callers",n.createElement(b.J,{className:gn.sandwichMarkerIcon,name:"arrow-down"})),n.createElement("div",{className:gn.sandwichMarker,style:{marginTop:d/window.devicePixelRatio}},n.createElement(b.J,{className:gn.sandwichMarkerIcon,name:"arrow-up"}),"Callees")),n.createElement("div",{className:gn.canvasWrapper,id:"flameGraphCanvasContainer_clickOutsideCheck",ref:nn},n.createElement("canvas",{ref:bt,"data-testid":"flameGraph",onClick:sn,onMouseMove:kt,onMouseLeave:it}))),n.createElement(L,{position:St,item:Ut,data:Ne,totalTicks:Cn}),Gt&&n.createElement(C,{itemData:Gt,onMenuItemClick:()=>{jt(void 0)},onItemFocus:()=>{Oe(Gt.item.start/Cn),Fe((Gt.item.start+Gt.item.value)/Cn),Ge(Gt)},onSandwich:()=>{ut(Ne.getLabel(Gt.item.itemIndexes[0]))}}))},Se=()=>({graph:(0,t.css)`
    overflow: scroll;
    height: 100%;
    flex-grow: 1;
    flex-basis: 50%;
  `,canvasContainer:(0,t.css)`
    label: canvasContainer;
    display: flex;
  `,canvasWrapper:(0,t.css)`
    label: canvasWrapper;
    cursor: pointer;
    flex: 1;
    overflow: hidden;
  `,sandwichMarker:(0,t.css)`
    writing-mode: vertical-lr;
    transform: rotate(180deg);
    overflow: hidden;
    white-space: nowrap;
  `,sandwichMarkerIcon:(0,t.css)`
    vertical-align: baseline;
  `}),ye=(Ne,fe,ve,ze,Oe)=>{const Fe=Math.floor(Ne.y/(d/window.devicePixelRatio)),Ge=Ce(Ne.x,fe[Fe],ve,ze,Oe);return{levelIndex:Fe,barIndex:Ge}},Ce=(Ne,fe,ve,ze,Oe)=>{if(fe){let Fe=0,Ge=fe.length-1;for(;Fe<=Ge;){const nt=Fe+Ge>>1,Xe=re(fe[nt].start,ze,Oe,ve),ut=re(fe[nt].start+fe[nt].value,ze,Oe,ve);if(Xe<=Ne&&ut>=Ne)return nt;Xe>Ne?Ge=nt-1:Fe=nt+1}}return-1},de=ie;var we=e(15301),_e=e(46961),Je=e(35719),Ue=e(62247),$e=e(66670),Qe=e(1128),tt=e(40705),lt=e(89746),Me=e(80434);const De=({app:Ne,search:fe,setSearch:ve,selectedView:ze,setSelectedView:Oe,containerWidth:Fe,onReset:Ge,textAlign:nt,onTextAlignChange:Xe,showResetButton:ut,colorScheme:ht,onColorSchemeChange:wt})=>{const mn=(0,m.wW)(pn=>Tt(pn,Ne));function vn(pn,nn){(0,s.ff)(`grafana_flamegraph_${pn}`,{app:Ne,grafana_version:r.config.buildInfo.version,...nn})}const[gn,Sn]=dt(fe,ve),Cn=gn!==""?n.createElement($e.zx,{icon:"times",fill:"text",size:"sm",onClick:()=>{ve(""),Sn("")}},"Clear"):null;return n.createElement("div",{className:mn.header},n.createElement("div",{className:mn.inputContainer},n.createElement(Qe.I,{value:gn||"",onChange:pn=>{Sn(pn.currentTarget.value)},placeholder:"Search..",width:44,suffix:Cn})),n.createElement("div",{className:mn.rightContainer},ut&&n.createElement($e.zx,{variant:"secondary",fill:"outline",size:"sm",icon:"history-alt",tooltip:"Reset focus and sandwich state",onClick:()=>{Ge()},className:mn.buttonSpacing,"aria-label":"Reset focus and sandwich state"}),n.createElement(We,{app:Ne,value:ht,onChange:wt}),n.createElement(tt.S,{size:"sm",disabled:ze===K.So.TopTable,options:qe,value:nt,onChange:pn=>{vn("text_align_selected",{align:pn}),Xe(pn)},className:mn.buttonSpacing}),n.createElement(tt.S,{size:"sm",options:st(Fe),value:ze,onChange:pn=>{vn("view_selected",{view:pn}),Oe(pn)}})))};function We(Ne){const fe=(0,m.wW)(ze=>Tt(ze,Ne.app)),ve=n.createElement(lt.v,null,n.createElement(lt.v.Item,{label:"By value",onClick:()=>Ne.onChange(K.eL.ValueBased)}),n.createElement(lt.v.Item,{label:"By package name",onClick:()=>Ne.onChange(K.eL.PackageBased)}));return n.createElement(Me.L,{overlay:ve},n.createElement($e.zx,{variant:"secondary",fill:"outline",size:"sm",tooltip:"Change color scheme",onClick:()=>{},className:fe.buttonSpacing,"aria-label":"Change color scheme"},n.createElement("span",{className:(0,t.cx)(fe.colorDot,Ne.value===K.eL.ValueBased?fe.colorDotByValue:fe.colorDotByPackage)})))}const qe=[{value:"left",description:"Align text left",icon:"align-left"},{value:"right",description:"Align text right",icon:"align-right"}];function st(Ne){let fe=[{value:K.So.TopTable,label:"Top Table",description:"Only show top table"},{value:K.So.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return Ne>=h&&fe.push({value:K.So.Both,label:"Both",description:"Show both the top table and flame graph"}),fe}function dt(Ne,fe){const[ve,ze]=(0,n.useState)(Ne),Oe=(0,Je.Z)(Ne);return(0,_e.Z)(()=>{fe(ve)},250,[ve]),(0,n.useEffect)(()=>{Oe!==Ne&&Ne!==ve&&ze(Ne)},[Ne,Oe,ve]),[ve,ze]}const Tt=(Ne,fe)=>({header:(0,t.css)`
    label: header;
    display: flex;
    justify-content: space-between;
    width: 100%;
    background: ${Ne.colors.background.primary};
    top: 0;
    z-index: ${Ne.zIndex.navbarFixed};
    ${fe===Ue.zj.Explore?(0,t.css)`
          position: sticky;
          padding-bottom: ${Ne.spacing(1)};
          padding-top: ${Ne.spacing(1)};
        `:""};
  `,inputContainer:(0,t.css)`
    label: inputContainer;
    margin-right: 20px;
  `,rightContainer:(0,t.css)`
    label: rightContainer;
    display: flex;
    align-items: flex-start;
  `,buttonSpacing:(0,t.css)`
    label: buttonSpacing;
    margin-right: ${Ne.spacing(1)};
  `,resetButton:(0,t.css)`
    label: resetButton;
    display: flex;
    margin-right: ${Ne.spacing(2)};
  `,resetButtonIconWrapper:(0,t.css)`
    label: resetButtonIcon;
    padding: 0 5px;
    color: ${Ne.colors.text.disabled};
  `,colorDot:(0,t.css)`
    label: colorDot;
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
  `,colorDotByValue:(0,t.css)`
    label: colorDotByValue;
    background: ${z};
  `,colorDotByPackage:(0,t.css)`
    label: colorDotByPackage;
    background: ${H};
  `}),Nt=De;var Bt=e(55925),yt=e(29241),ft=e(21708),ct=e(95066),ge=e(64167);const Be=n.memo(({data:Ne,app:fe,onSymbolClick:ve,height:ze,search:Oe,onSearch:Fe,sandwichItem:Ge,onSandwich:nt})=>{const Xe=(0,m.wW)(Te),[ut,ht]=(0,n.useState)([{displayName:"Self",desc:!0}]);return n.createElement("div",{className:Xe.topTableContainer,"data-testid":"topTable"},n.createElement(Bt.Z,{style:{width:"100%",height:ze}},({width:wt,height:mn})=>{if(wt<3||mn<3)return null;const vn=Le(Ne,wt,ve,Fe,nt,Oe,Ge);return n.createElement(ct.i,{initialSortBy:ut,onSortByChange:gn=>{gn&&gn.length&&(0,s.ff)("grafana_flamegraph_table_sort_selected",{app:fe,grafana_version:r.config.buildInfo.version,sort:gn[0].displayName+"_"+(gn[0].desc?"desc":"asc")}),ht(gn)},data:vn,width:wt,height:mn})}))});Be.displayName="FlameGraphTopTableContainer";function Le(Ne,fe,ve,ze,Oe,Fe,Ge){let nt={};for(let gn=0;gn<Ne.data.length;gn++){const Sn=Ne.getValue(gn),Cn=Ne.getSelf(gn),pn=Ne.getLabel(gn);nt[pn]=nt[pn]||{},nt[pn].self=nt[pn].self?nt[pn].self+Cn:Cn,nt[pn].total=nt[pn].total?nt[pn].total+Sn:Sn}const Xe=Pe(Oe,ze,Fe,Ge),ut={type:yt.fS.string,name:"Symbol",values:[],config:{custom:{width:fe-He-f*2},links:[{title:"Highlight symbol",url:"",onClick:gn=>{const Cn=gn.origin.field.values[gn.origin.rowIndex];ve(Cn)}}]}},ht=he("Self",Ne.selfField.config.unit),wt=he("Total",Ne.valueField.config.unit);for(let gn in nt)Xe.values.push(null),ut.values.push(gn),ht.values.push(nt[gn].self),wt.values.push(nt[gn].total);const mn={fields:[Xe,ut,ht,wt],length:ut.values.length};return(0,ft.SM)({data:[mn],fieldConfig:{defaults:{},overrides:[]},replaceVariables:gn=>gn,theme:r.config.theme2})[0]}function he(Ne,fe){return{type:yt.fS.number,name:Ne,values:[],config:{unit:fe,custom:{width:f}}}}const He=61;function Pe(Ne,fe,ve,ze){const Oe={type:ge.h2.Custom,cellComponent:Ge=>n.createElement(Ie,{frame:Ge.frame,onSandwich:Ne,onSearch:fe,search:ve,sandwichItem:ze,rowIndex:Ge.rowIndex})},Fe={filterable:!1,width:He,hideHeader:!0,inspect:!1,align:"auto",cellOptions:Oe};return{type:yt.fS.number,name:"actions",values:[],config:{custom:Fe}}}function Ie(Ne){const fe=(0,m.wW)(Te),ve=Ne.frame.fields.find(Fe=>Fe.name==="Symbol")?.values.get(Ne.rowIndex),ze=Ne.search===ve,Oe=Ne.sandwichItem===ve;return n.createElement("div",{className:fe.actionCellWrapper},n.createElement(D.h,{className:fe.actionCellButton,name:"search",variant:ze?"primary":"secondary",tooltip:ze?"Clear from search":"Search for symbol","aria-label":ze?"Clear from search":"Search for symbol",onClick:()=>{Ne.onSearch(ze?"":ve)}}),n.createElement(D.h,{className:fe.actionCellButton,name:"gf-show-context",tooltip:Oe?"Remove from sandwich view":"Show in sandwich view",variant:Oe?"primary":"secondary","aria-label":Oe?"Remove from sandwich view":"Show in sandwich view",onClick:()=>{Ne.onSandwich(Oe?void 0:ve)}}))}const Te=()=>({topTableContainer:(0,t.css)`
      label: topTableContainer;
      flex-grow: 1;
      flex-basis: 50%;
      overflow: hidden;
    `,actionCellWrapper:(0,t.css)`
      label: actionCellWrapper;
      display: flex;
      height: 24px;
    `,actionCellButton:(0,t.css)`
      label: actionCellButton;
      margin-right: 0;
      width: 24px;
    `}),Re=Be,ue=Ne=>{const[fe,ve]=(0,n.useState)(),[ze,Oe]=(0,n.useState)(0),[Fe,Ge]=(0,n.useState)(1),[nt,Xe]=(0,n.useState)(""),[ut,ht]=(0,n.useState)(K.So.Both),[wt,{width:mn}]=(0,i.Z)(),[vn,gn]=(0,n.useState)("left"),[Sn,Cn]=(0,n.useState)(),[pn,nn]=(0,n.useState)(K.eL.ValueBased),Ct=(0,m.l4)(),bt=(0,n.useMemo)(()=>{if(Ne.data)return new we.S(Ne.data,Ct)},[Ne.data,Ct]),Ut=(0,m.wW)(xe);(0,n.useEffect)(()=>{mn>0&&mn<h&&ut===K.So.Both&&ht(K.So.FlameGraph)},[ut,ht,mn]);const _t=(0,n.useCallback)(()=>{ve(void 0),Oe(0),Ge(1)},[ve,Ge,Oe]);function Gt(){Cn(void 0)}(0,n.useEffect)(()=>{_t(),Gt()},[Ne.data,_t]);const jt=(0,n.useCallback)(sn=>{nt===sn?Xe(""):((0,s.ff)("grafana_flamegraph_table_item_selected",{app:Ne.app,grafana_version:r.config.buildInfo.version}),Xe(sn),_t())},[Xe,_t,Ne.app,nt]);return n.createElement(n.Fragment,null,bt&&n.createElement("div",{ref:wt,className:Ut.container},n.createElement(Nt,{app:Ne.app,search:nt,setSearch:Xe,selectedView:ut,setSelectedView:ht,containerWidth:mn,onReset:()=>{_t(),Gt()},textAlign:vn,onTextAlignChange:gn,showResetButton:!!(fe||Sn),colorScheme:pn,onColorSchemeChange:nn}),n.createElement("div",{className:Ut.body},ut!==K.So.FlameGraph&&n.createElement(Re,{data:bt,app:Ne.app,onSymbolClick:jt,height:ut===K.So.TopTable?600:void 0,search:nt,sandwichItem:Sn,onSandwich:Cn,onSearch:Xe}),ut!==K.So.TopTable&&n.createElement(de,{data:bt,rangeMin:ze,rangeMax:Fe,search:nt,setRangeMin:Oe,setRangeMax:Ge,onItemFocused:sn=>ve(sn),focusedItemData:fe,textAlign:vn,sandwichItem:Sn,onSandwich:sn=>{_t(),Cn(sn)},onFocusPillClick:_t,onSandwichPillClick:Gt,colorScheme:pn}))))};function xe(Ne){return{container:(0,t.css)({height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0,gap:Ne.spacing(1)}),body:(0,t.css)({display:"flex",flexGrow:1,minHeight:0})}}const Ve=ue},16998:(j,I,e)=>{"use strict";e.d(I,{So:()=>i,_r:()=>t,eL:()=>s});var t=(r=>(r.Bytes="bytes",r.Short="short",r.Nanoseconds="ns",r))(t||{}),n=(r=>(r.Symbol="Symbol",r.Self="Self",r.Total="Total",r))(n||{}),i=(r=>(r.TopTable="topTable",r.FlameGraph="flameGraph",r.Both="both",r))(i||{}),s=(r=>(r.ValueBased="valueBased",r.PackageBased="packageBased",r))(s||{})},3133:(j,I,e)=>{"use strict";e.r(I),e.d(I,{plugin:()=>u});var t=e(97585),n=e(77148),i=e(14035),s=e(50250);const r=D=>(0,s.rD)(D),m=(D,P,S)=>{const x=(0,s.ZH)(D,P,S);if(P==="singlestat"&&S.angular){const M=S.angular.gauge;M&&(x.showThresholdMarkers=M.thresholdMarkers,x.showThresholdLabels=M.thresholdLabels)}return x};var d=e(27702),o=e(61965),l=e(91466),a=e(59870),g=e(50741),c=e(44201),h=e(12308),f=e(72082);class b extends d.PureComponent{constructor(){super(...arguments),this.renderComponent=(P,S)=>{const{options:x,fieldConfig:M}=this.props,{width:R,height:O,count:T,value:U}=P,{field:L,display:V}=U,{openMenu:w,targetClassName:K}=S;return d.createElement(a.a,{value:(0,f.l)(T,M.defaults,V),width:R,height:O,field:L,text:x.text,showThresholdLabels:x.showThresholdLabels,showThresholdMarkers:x.showThresholdMarkers,theme:h.config.theme2,onClick:w,className:K})},this.renderValue=P=>{const{value:S}=P,{getLinks:x,hasLinks:M}=S;return M&&x?d.createElement(g.V,{links:x,style:{flexGrow:1}},R=>this.renderComponent(P,R)):this.renderComponent(P,{})},this.getValues=()=>{const{data:P,options:S,replaceVariables:x,fieldConfig:M,timeZone:R}=this.props;for(let O of P.series)for(let T of O.fields)if(T.config.unit==="percent"||T.config.unit==="percentunit"){const U=T.config.min??0,L=T.config.max??(T.config.unit==="percent"?100:1);T.state=T.state??{},T.state.range={min:U,max:L,delta:L-U},T.display=(0,o.U)({field:T,theme:h.config.theme2})}return(0,l.nG)({fieldConfig:M,reduceOptions:S.reduceOptions,replaceVariables:x,theme:h.config.theme2,data:P.series,timeZone:R})}}render(){const{height:P,width:S,data:x,renderCounter:M,options:R}=this.props;return d.createElement(c.Q,{getValues:this.getValues,renderValue:this.renderValue,width:S,height:P,source:x,autoGrid:!0,renderCounter:M,orientation:R.orientation})}}const v={showThresholdLabels:!1,showThresholdMarkers:!0};var y=e(5168),E=e(7641);class C{getSuggestionsForData(P){const{dataSummary:S}=P;if(!S.hasData||!S.hasNumberField||S.numberFieldCount>=50)return;const x=P.getListAppender({name:E.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:y.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:M=>{M.options.reduceOptions.values&&(M.options.reduceOptions.limit=2)}}});S.hasStringField&&S.frameCount===1&&S.rowCountTotal<10?(x.append({name:E.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),x.append({name:E.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(x.append({name:E.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),x.append({name:E.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const u=new t.c(b).useFieldConfig({useCustomConfig:D=>{D.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(D=>{(0,i.j)(D),(0,i.h)(D),D.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:v.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:v.showThresholdMarkers}),n.Z(D)}).setPanelChangeHandler(m).setSuggestionsSupplier(new C).setMigrationHandler(r)},11378:(j,I,e)=>{"use strict";e.d(I,{Cg:()=>i,EQ:()=>r,Er:()=>m,H:()=>s,bD:()=>n});var t=e(64167),n=(d=>(d.Point="point",d.Line="line",d.Polygon="polygon",d.Any="*any*",d))(n||{});const i=5;var s=(d=>(d.Left="left",d.Center="center",d.Right="right",d))(s||{}),r=(d=>(d.Top="top",d.Middle="middle",d.Bottom="bottom",d))(r||{});const m=Object.freeze({size:{fixed:i,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:t.Q8.Fixed,fixed:"img/icons/marker/circle.svg"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:t.eK.Mod,min:-360,max:360}})},89628:(j,I,e)=>{"use strict";e.d(I,{Q:()=>s});var t=e(42844),n=e(27702),i=e(42223);const s=r=>(0,i.CB)(r)?n.createElement("a",{href:r,target:"_blank",className:(0,t.cx)("external-link"),rel:"noreferrer"},r):r},42223:(j,I,e)=>{"use strict";e.d(I,{B1:()=>o,CB:()=>b,FB:()=>h,gE:()=>c,n_:()=>a,sA:()=>g,uH:()=>f,vV:()=>m});var t=e(587),n=e(33810),i=e(82382),s=e(28062),r=e(11378);function m(v,y,E,C){const u={};return C&&Object.keys(C).length?(u.color=(0,i.getColorDimension)(v,C.color??r.Er.color,E),u.size=(0,i.getScaledDimension)(v,C.size??r.Er.size),u.rotation=(0,i.getScalarDimension)(v,C.rotation??r.Er.rotation),C.text&&(C.text.field||C.text.fixed)&&(u.text=(0,i.getTextDimension)(v,C.text))):y.fields&&(y.fields.color&&(u.color=(0,i.getColorDimension)(v,y.config.color??r.Er.color,E)),y.fields.size&&(u.size=(0,i.getScaledDimension)(v,y.config.size??r.Er.size)),y.fields.text&&(u.text=(0,i.getTextDimension)(v,y.config.text)),y.fields.rotation&&(u.rotation=(0,i.getScalarDimension)(v,y.config.rotation??r.Er.rotation))),u}let d;function o(){return d||(d=[],l()),d}async function l(){const v=await(0,s.e)();for(let y of["maps","gazetteer"])v.listFiles(y).subscribe({next:E=>{E.forEach(C=>{if(C.name.endsWith(".geojson")){const u=`public/${y}/${C.name}`;d.push({value:u,label:u})}})}})}const a=(v,y,E)=>{const[C]=v.initMapView(y.view,void 0);return v.map=new t.Z({view:C,pixelRatio:1,layers:[],controls:[],target:E,interactions:(0,n.c)({mouseWheelZoom:!1})})},g=(v,y)=>{v.initControls(y.controls),v.forceUpdate()},c=(v,y,E)=>{v.panelContext&&v.panelContext.onInstanceStateChange&&v.panelContext.onInstanceStateChange({map:v.map,layers:y,selected:E,actions:v.actions})},h=v=>{let y=v.layers.length;for(;y<100;){const E=`Layer ${y++}`;if(!v.byName.has(E))return E}return`Layer ${Date.now()}`};function f(v,y,E,C){const u=v.getPixelFromCoordinate(E),D=v.getPixelFromCoordinate(C),P=Math.abs(u[0]-D[0]),S=Math.abs(u[1]-D[1]);return P>y||S>y}const b=v=>{try{return new URL(v).protocol.includes("http")}catch{return!1}}},8379:(j,I,e)=>{"use strict";e.d(I,{o:()=>i});var t=e(27702),n=e(35952);function i(s){return t.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",paddingBottom:"6px"}},t.createElement(n.P,{onClick:s.onClick,style:{position:"relative",top:"auto",right:"auto",marginRight:0}}))}},54945:(j,I,e)=>{"use strict";e.d(I,{S:()=>m});var t=e(42844),n=e(27702),i=e(48154),s=e(60956),r=e(66310);function m({width:o,showImage:l,data:a,index:g}){const c=(0,r.wW)(d),h=o>600,f=a.get(g);return n.createElement("article",{className:(0,t.cx)(c.item,h&&c.itemWide)},l&&f.ogImage&&n.createElement("a",{tabIndex:-1,href:i.QX.sanitizeUrl(f.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(c.socialImage,h&&c.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:f.ogImage,alt:f.title})),n.createElement("div",{className:c.body},n.createElement("time",{className:c.date,dateTime:(0,s.dq)(f.date,{format:"MMM DD"})},(0,s.dq)(f.date,{format:"MMM DD"})," "),n.createElement("a",{className:c.link,href:i.QX.sanitizeUrl(f.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:c.title},f.title)),n.createElement("div",{className:c.content,dangerouslySetInnerHTML:{__html:i.QX.sanitize(f.content)}})))}const d=o=>({container:(0,t.css)`
    height: 100%;
  `,item:(0,t.css)`
    display: flex;
    padding: ${o.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${o.spacing(1)};
    border-bottom: 2px solid ${o.colors.border.weak};
    background: ${o.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:(0,t.css)`
    flex-direction: row;
  `,body:(0,t.css)`
    display: flex;
    flex-direction: column;
  `,socialImage:(0,t.css)`
    display: flex;
    align-items: center;
    margin-bottom: ${o.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${o.shape.radius.default} ${o.shape.radius.default} 0 0;
    }
  `,socialImageWide:(0,t.css)`
    margin-right: ${o.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${o.shape.radius.default};
    }
  `,link:(0,t.css)`
    color: ${o.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${o.colors.text.link};
      text-decoration: underline;
    }
  `,title:(0,t.css)`
    font-size: 16px;
    margin-bottom: ${o.spacing(.5)};
  `,content:(0,t.css)`
    p {
      margin-bottom: 4px;
      color: ${o.colors.text};
    }
  `,date:(0,t.css)`
    margin-bottom: ${o.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 ${o.shape.radius.default};
    color: ${o.colors.text.secondary};
  `})},42349:(j,I,e)=>{"use strict";e.d(I,{k:()=>t});const t="https://grafana.com/blog/news.xml"},5008:(j,I,e)=>{"use strict";e.d(I,{j:()=>c});var t=e(26811),n=e(27938);function i(h){const b=new DOMParser().parseFromString(h,"text/xml");return{items:Array.from(b.querySelectorAll("entry")).map(y=>({title:d(y,"title"),link:y.querySelector("link")?.getAttribute("href")??"",content:d(y,"content"),pubDate:d(y,"published"),ogImage:y.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(h){const b=new DOMParser().parseFromString(h,"text/xml");return{items:Array.from(b.querySelectorAll("item")).map(y=>({title:d(y,"title"),link:d(y,"link"),content:d(y,"description"),pubDate:d(y,"pubDate"),ogImage:y.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function r(h){return await(await fetch(h)).text()}function m(h){return new DOMParser().parseFromString(h,"text/xml").querySelector("feed")!==null}function d(h,f){return h.querySelector(f)?.textContent??""}async function o(h){const f=await r(h);return m(f)?i(f):s(f)}var l=e(99633),a=e(29241);function g(h){const f=[],b=[],v=[],y=[],E=[];for(const C of h.items){const u=(0,l.CQ)(C.pubDate);try{if(f.push(u.valueOf()),b.push(C.title),v.push(C.link),E.push(C.ogImage),C.content){const D=C.content.replace(/<\/?[^>]+(>|$)/g,"");y.push(D)}}catch(D){console.warn("Error reading news item:",D,C)}}return{fields:[{name:"date",type:a.fS.time,config:{displayName:"Date"},values:f},{name:"title",type:a.fS.string,config:{},values:b},{name:"link",type:a.fS.string,config:{},values:v},{name:"content",type:a.fS.string,config:{},values:y},{name:"ogImage",type:a.fS.string,config:{},values:E}],length:f.length}}function c(h){const[f,b]=(0,t.Z)(async()=>{const v=await o(h),y=g(v);return new n.U(y)},[h],{loading:!0});return{state:f,getNews:b}}},47760:(j,I,e)=>{"use strict";e.d(I,{E:()=>ft});var t=e(42844),n=e(89898),i=e.n(n),s=e(27702),r=e(17236),m=e(66310),d=e(62108),o=e(73453),l=e(11995);const a=(0,s.memo)(function(Ie){const{edge:Te,onClick:Re,onMouseEnter:ue,onMouseLeave:xe,hovering:Ve}=Ie,{source:Ne,target:fe}=Te,ve=(0,l.dM)({x1:Ne.x,y1:Ne.y,x2:fe.x,y2:fe.y},90);return s.createElement("g",{onClick:ze=>Re(ze,Te),style:{cursor:"pointer"},"aria-label":`Edge from: ${Ne.id} to: ${fe.id}`},s.createElement("line",{strokeWidth:Ve?2:1,stroke:"#999",x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,markerEnd:"url(#triangle)"}),s.createElement("line",{stroke:"transparent",x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,strokeWidth:20,onMouseEnter:()=>{ue(Te.id)},onMouseLeave:()=>{xe(Te.id)}}))});function g(){return s.createElement("defs",null,s.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},s.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const c=Pe=>({mainGroup:(0,t.css)`
      pointer-events: none;
      font-size: 8px;
    `,background:(0,t.css)`
      fill: ${Pe.components.tooltip.background};
    `,text:(0,t.css)`
      fill: ${Pe.components.tooltip.text};
    `}),h=(0,s.memo)(function(Ie){const{edge:Te}=Ie,{source:Re,target:ue}=Te,xe=(0,l.dM)({x1:Re.x,y1:Re.y,x2:ue.x,y2:ue.y},90),Ve={x:xe.x1+(xe.x2-xe.x1)/2,y:xe.y1+(xe.y2-xe.y1)/2},Ne=(0,m.wW)(c),fe=[Te.mainStat,Te.secondaryStat].filter(Ge=>Ge),ve=fe.length>1?"30":"15",ze=fe.length>1?15:7.5;let Oe=fe.length>1?-5:2.5;const Fe=[];return fe.forEach((Ge,nt)=>{Fe.push(s.createElement("text",{key:nt,className:Ne.text,x:Ve.x,y:Ve.y+Oe,textAnchor:"middle"},Ge)),Oe+=15}),s.createElement("g",{className:Ne.mainGroup},s.createElement("rect",{className:Ne.background,x:Ve.x-40,y:Ve.y-ze,width:"80",height:ve,rx:"5"}),Fe)});var f=e(89949),b=e(93666),v=e(64167),y=e(71982),E=e(11141);function C(){return{item:(0,t.css)`
      label: LegendItem;
      flex-grow: 0;
    `,legend:(0,t.css)`
      label: Legend;
      pointer-events: all;
    `}}const u=function(Ie){const{nodes:Te,onSort:Re,sort:ue,sortable:xe}=Ie,Ve=(0,m.l4)(),Ne=(0,m.wW)(C),fe=D(Te,Ve),ve=(0,s.useCallback)(ze=>{Re({field:ze.data.field,ascending:ze.data.field===ue?.field?!ue?.ascending:!1})},[ue,Re]);return s.createElement(y.l,{className:Ne.legend,displayMode:v.jK.List,placement:"bottom",items:fe,itemRenderer:ze=>s.createElement(s.Fragment,null,s.createElement(E.e,{item:ze,className:Ne.item,onLabelClick:xe?ve:void 0}),xe&&(ue?.field===ze.data.field?s.createElement(o.J,{name:ue.ascending?"arrow-up":"arrow-down"}):""))})};function D(Pe,Ie){if(!Pe.length)return[];const Te=[Pe[0].mainStat,Pe[0].secondaryStat].filter(f.identity),Re=Pe.find(ue=>ue.arcSections.length>0);return Re&&Re.arcSections[0].config?.color?.mode===b.S.Fixed&&Te.push(...new Set(Pe.map(ue=>ue.arcSections).flat())),Pe[0].color&&Te.push(Pe[0].color),Te.map(ue=>{const xe={label:ue.config.displayName||ue.name,yAxis:0,data:{field:ue}};return ue.config.color?.mode===b.S.Fixed&&ue.config.color?.fixedColor?xe.color=Ie.visualization.getColorByName(ue.config.color?.fixedColor||""):ue.config.color?.mode&&(xe.gradient=ue.config.color?.mode),xe.color||xe.gradient||(xe.color=Ie.visualization.getColorByName("")),xe})}const P=40,S=Pe=>({mainGroup:(0,t.css)`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:(0,t.css)`
    fill: ${Pe.components.panel.background};
    stroke: ${Pe.colors.border.strong};
  `,text:(0,t.css)`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),x=(0,s.memo)(function(Ie){const{marker:Te,onClick:Re}=Ie,{node:ue}=Te,xe=(0,m.wW)(S);return ue.x!==void 0&&ue.y!==void 0?s.createElement("g",{"data-node-id":ue.id,className:xe.mainGroup,onClick:Ve=>{Re?.(Ve,Te)},"aria-label":`Hidden nodes marker: ${ue.id}`},s.createElement("circle",{className:xe.mainCircle,r:P,cx:ue.x,cy:ue.y}),s.createElement("g",null,s.createElement("foreignObject",{x:ue.x-25,y:ue.y-25,width:"50",height:"50"},s.createElement("div",{className:xe.text},s.createElement("span",null,Te.count>100?">100":Te.count," nodes"))))):null});var M=e(71685),R=e(58192);const O=40,T=(Pe,Ie)=>({mainGroup:(0,t.css)`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${Ie==="inactive"?.5:1};
  `,mainCircle:(0,t.css)`
    fill: ${Pe.components.panel.background};
  `,hoverCircle:(0,t.css)`
    opacity: 0.5;
    fill: transparent;
    stroke: ${Pe.colors.primary.text};
  `,text:(0,t.css)`
    fill: ${Pe.colors.text.primary};
    pointer-events: none;
  `,titleText:(0,t.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${(0,M.Z)(Pe.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 140px;
  `,statsText:(0,t.css)`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:(0,t.css)`
    width: 200px;
    & span {
      background-color: ${(0,M.Z)(Pe.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `,clickTarget:(0,t.css)`
    fill: none;
    stroke: none;
    pointer-events: fill;
  `}),U=(0,s.memo)(function(Ie){const{node:Te,onMouseEnter:Re,onMouseLeave:ue,onClick:xe,hovering:Ve}=Ie,Ne=(0,m.l4)(),fe=T(Ne,Ve),ve=Ve==="active";return Te.x!==void 0&&Te.y!==void 0?s.createElement("g",{"data-node-id":Te.id,className:fe.mainGroup,"aria-label":`Node: ${Te.title}`},s.createElement("circle",{className:fe.mainCircle,r:O,cx:Te.x,cy:Te.y}),ve&&s.createElement("circle",{className:fe.hoverCircle,r:O-3,cx:Te.x,cy:Te.y,strokeWidth:2}),s.createElement(V,{node:Te}),s.createElement("g",{className:fe.text,style:{pointerEvents:"none"}},s.createElement(L,{node:Te,hovering:Ve}),s.createElement("foreignObject",{x:Te.x-(ve?100:70),y:Te.y+O+5,width:ve?"200":"140",height:"40"},s.createElement("div",{className:i()(fe.titleText,ve&&fe.textHovering)},s.createElement("span",null,Te.title),s.createElement("br",null),s.createElement("span",null,Te.subTitle)))),s.createElement("rect",{"data-testid":`node-click-rect-${Te.id}`,onMouseEnter:()=>{Re(Te.id)},onMouseLeave:()=>{ue(Te.id)},onClick:ze=>{xe(ze,Te)},className:fe.clickTarget,x:Te.x-O-5,y:Te.y-O-5,width:O*2+10,height:O*2+50})):null});function L({node:Pe,hovering:Ie}){const Te=(0,m.l4)(),Re=T(Te,Ie),ue=Ie==="active";return Pe.x!==void 0&&Pe.y!==void 0?Pe.icon?s.createElement("foreignObject",{x:Pe.x-35,y:Pe.y-20,width:"70",height:"40"},s.createElement("div",{style:{width:70,overflow:"hidden",display:"flex",justifyContent:"center",marginTop:-4}},s.createElement(o.J,{"data-testid":`node-icon-${Pe.icon}`,name:Pe.icon,size:"xxxl"}))):s.createElement("foreignObject",{x:Pe.x-(ue?100:35),y:Pe.y-15,width:ue?"200":"70",height:"40"},s.createElement("div",{className:i()(Re.statsText,ue&&Re.textHovering)},s.createElement("span",null,Pe.mainStat&&(0,l.Ew)(Pe.mainStat.config,Pe.mainStat.values[Pe.dataFrameRowIndex])),s.createElement("br",null),s.createElement("span",null,Pe.secondaryStat&&(0,l.Ew)(Pe.secondaryStat.config,Pe.secondaryStat.values[Pe.dataFrameRowIndex])))):null}function V(Pe){const{node:Ie}=Pe,Te=Ie.arcSections.find(Ve=>Ve.values[Ie.dataFrameRowIndex]>=1),Re=(0,m.l4)();if(Te)return s.createElement("circle",{fill:"none",stroke:Re.visualization.getColorByName(Te.config.color?.fixedColor||""),strokeWidth:2,r:O,cx:Ie.x,cy:Ie.y});const ue=Ie.arcSections.filter(Ve=>Ve.values[Ie.dataFrameRowIndex]!==0);if(ue.length===0)return s.createElement("circle",{fill:"none",stroke:Ie.color?K(Ie.color,Ie.dataFrameRowIndex,Re):"gray",strokeWidth:2,r:O,cx:Ie.x,cy:Ie.y});const{elements:xe}=ue.reduce((Ve,Ne,fe)=>{const ve=Ne.config.color?.fixedColor||"",ze=Ne.values[Ie.dataFrameRowIndex],Oe=s.createElement(w,{key:fe,r:O,x:Ie.x,y:Ie.y,startPercent:Ve.percent,percent:ze+Ve.percent>1?1-Ve.percent:ze,color:Re.visualization.getColorByName(ve),strokeWidth:2});return Ve.elements.push(Oe),Ve.percent=Ve.percent+ze,Ve},{elements:[],percent:0});return s.createElement(s.Fragment,null,xe)}function w({r:Pe,x:Ie,y:Te,startPercent:Re,percent:ue,color:xe,strokeWidth:Ve=2}){const Ne=Re+ue,fe=Ie+Math.sin(2*Math.PI*Re)*Pe,ve=Te-Math.cos(2*Math.PI*Re)*Pe,ze=Ie+Math.sin(2*Math.PI*Ne)*Pe,Oe=Te-Math.cos(2*Math.PI*Ne)*Pe,Fe=ue>.5?"1":"0";return s.createElement("path",{fill:"none",d:`M ${fe} ${ve} A ${Pe} ${Pe} 0 ${Fe} 1 ${ze} ${Oe}`,stroke:xe,strokeWidth:Ve})}function K(Pe,Ie,Te){return Pe.config.color?(0,R.fD)(Pe).getCalculator(Pe,Te)(0,Pe.values[Ie]):Pe.values[Ie]}var B=e(64022),W=e(66670);function _(){return{wrapper:(0,t.css)`
      label: wrapper;
      pointer-events: all;
    `}}function k(Pe){const{config:Ie,onConfigChange:Te,onPlus:Re,onMinus:ue,disableZoomOut:xe,disableZoomIn:Ve}=Pe,[Ne,fe]=(0,s.useState)(!1),ve=!1,ze=(0,m.wW)(_);return s.createElement("div",{className:ze.wrapper},s.createElement(B.wc,{spacing:"sm"},s.createElement(B.Lh,{spacing:"xs"},s.createElement(W.zx,{icon:"plus-circle",onClick:Re,size:"md",title:"Zoom in",variant:"secondary",disabled:Ve}),s.createElement(W.zx,{icon:"minus-circle",onClick:ue,size:"md",title:"Zoom out",variant:"secondary",disabled:xe})),s.createElement(B.Lh,{spacing:"xs"},s.createElement(W.zx,{icon:"code-branch",onClick:()=>Te({...Ie,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Ie.gridLayout}),s.createElement(W.zx,{icon:"apps",onClick:()=>Te({...Ie,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Ie.gridLayout}))),ve&&s.createElement(W.zx,{size:"xs",fill:"text",onClick:()=>fe(Oe=>!Oe)},Ne?"Hide config":"Show config"),ve&&Ne&&Object.keys(Ie).filter(Oe=>Oe!=="show").map(Oe=>s.createElement("div",{key:Oe},Oe,s.createElement("input",{style:{width:50},type:"number",value:Ie[Oe],onChange:Fe=>{Te({...Ie,[Oe]:parseFloat(Fe.target.value)})}}))))}var A=e(97780),z=e(8227),H=e(42575);const Q=()=>new H.q(new URL(e.p+e.u(7032),e.b));function X(Pe,Ie,Te,Re,ue){const[xe,Ve]=(0,s.useMemo)(()=>{if(!(Pe.length&&Ie.length))return[{},{}];const Ne=Ie.reduce((ve,ze)=>(ve[ze.source.id]=[...ve[ze.source.id]??[],ze],ve[ze.target.id]=[...ve[ze.target.id]??[],ze],ve),{}),fe=Pe.reduce((ve,ze)=>(ve[ze.id]=ze,ve),{});return[Ne,fe]},[Ie,Pe]);return(0,s.useMemo)(()=>Pe.length<=Te?{nodes:Pe,edges:Ie}:Re.gridLayout?oe(Pe,Te,ue):te(Pe,Ie,Ve,xe,Te,ue),[Ie,xe,Te,Pe,Ve,ue,Re.gridLayout])}function te(Pe,Ie,Te,Re,ue,xe){let Ve;xe?Ve=[Te[xe]]:(Ve=Pe.filter(Fe=>Fe.incoming===0),Ve.length||(Ve=[Pe[0]]));const{visibleNodes:Ne,markers:fe}=Z(ue,Ve,Te,Re),ve=le(fe,Ne,Te,Re),ze=(0,f.fromPairs)(ve.map(Fe=>[Fe.node.id,Fe]));for(const Fe of ve)Fe.count===1&&(delete ze[Fe.node.id],Ne[Fe.node.id]=Fe.node);const Oe=Ie.filter(Fe=>(Ne[Fe.source.id]||ze[Fe.source.id])&&(Ne[Fe.target.id]||ze[Fe.target.id]));return{nodes:Object.values(Ne),edges:Oe,markers:Object.values(ze)}}function oe(Pe,Ie,Te){let Re=0,ue=Ie,xe=[];if(Te){const Ve=Pe.findIndex(ve=>ve.id===Te),Ne=Math.floor(Ie/2);let fe=Ne;Re=Ve-Ne,Re<0&&(fe+=Math.abs(Re),Re=0),ue=Ve+fe+1,ue>Pe.length&&(Re>0&&(Re=Math.max(0,Re-(ue-Pe.length))),ue=Pe.length),Re>1&&xe.push({node:Pe[Re-1],count:Re}),Pe.length-ue>1&&xe.push({node:Pe[ue],count:Pe.length-ue})}else Pe.length-Ie>1&&(xe=[{node:Pe[Ie],count:Pe.length-Ie}]);return{nodes:Pe.slice(Re,ue),edges:[],markers:xe}}function Z(Pe,Ie,Te,Re){const ue={};let xe=[...Ie];for(;Object.keys(ue).length<Pe&&xe.length>0;){let Ne=xe.shift();if(ue[Ne.id])continue;ue[Ne.id]=Ne;const ve=(Re[Ne.id]||[]).map(ze=>{const Oe=ze.source.id===Ne.id?ze.target.id:ze.source.id;return Te[Oe]});xe=xe.concat(ve)}const Ve=(0,f.uniq)(xe.filter(Ne=>!ue[Ne.id]));return{visibleNodes:ue,markers:Ve}}function le(Pe,Ie,Te,Re){return Pe.map(ue=>{const xe={};let Ve=0,Ne=[ue];for(;Ne.length>0&&Ve<=101;){let fe=Ne.shift();if(Ie[fe.id]||xe[fe.id])continue;xe[fe.id]||Ve++,xe[fe.id]=fe;const ze=(Re[fe.id]||[]).map(Oe=>{const Fe=Oe.source.id===fe.id?Oe.target.id:Oe.source.id;return Te[Fe]});Ne=Ne.concat(ze)}return{node:ue,count:Ve}})}const ce={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function q(Pe,Ie,Te=ce,Re,ue,xe){const[Ve,Ne]=(0,s.useState)([]),[fe,ve]=(0,s.useState)([]),[ze,Oe]=(0,s.useState)(!1),Fe=(0,z.default)(),Ge=(0,s.useRef)();(0,A.Z)(()=>{Ge.current&&Ge.current()}),(0,s.useEffect)(()=>{if(Pe.length===0){Ne([]),ve([]),Oe(!1);return}Oe(!0);const vn=ne(Pe,Ie,({nodes:gn,edges:Sn})=>{Fe()&&(Ne(gn),ve(Sn),Oe(!1))});return Ge.current=vn,vn},[Pe,Ie,Fe]);const[nt,Xe]=(0,s.useMemo)(()=>{if(Pe.length===0)return[[],[]];const vn=Pe.map(Sn=>({...Sn})),gn=Ie.map(Sn=>({...Sn}));return pe(vn,ue,Te.sort),[vn,gn]},[Te.sort,Pe,Ie,ue]),{nodes:ut,edges:ht,markers:wt}=X(Te.gridLayout?nt:Ve,Te.gridLayout?Xe:fe,Re,Te,xe),mn=(0,s.useMemo)(()=>(0,l.Tz)([...ut,...(wt||[]).map(vn=>vn.node)]),[ut,wt]);return{nodes:ut,edges:ht,markers:wt,bounds:mn,hiddenNodesCount:Pe.length-ut.length,loading:ze}}function ne(Pe,Ie,Te){const Re=Q();return Re.onmessage=ue=>{for(let xe=0;xe<Pe.length;xe++)ue.data.nodes[xe]={...Pe[xe],...ue.data.nodes[xe]};Te(ue.data)},Re.postMessage({nodes:Pe.map(ue=>({id:ue.id,incoming:ue.incoming})),edges:Ie,config:ce}),()=>{Re.terminate()}}function pe(Pe,Ie,Te){const Ve=Math.min(Math.floor((Ie-120)/140),Pe.length),Ne=Math.floor((Ve-1)*120/2);Te&&Pe.sort((fe,ve)=>{const ze=Te.field.values[fe.dataFrameRowIndex],Oe=Te.field.values[ve.dataFrameRowIndex];return Te.ascending?ze-Oe:Oe-ze});for(const[fe,ve]of Pe.entries()){const ze=Math.floor(fe/Ve),Oe=fe%Ve;ve.x=Oe*120-Ne,ve.y=-60+ze*140}}var re=e(30097),ie=e(14986),Se=e(66711),ye=e(79655);function Ce(Pe,Ie,Te,Re,ue,xe){const[Ve,Ne]=(0,s.useState)(void 0),fe=(0,s.useCallback)((ze,Oe)=>{const[Fe,Ge]=Re.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],nt=[{label:Fe,onClick:ht=>{xe(ht.id),ue({...Re,gridLayout:Ge}),Ne(void 0)}}],Xe=Ie?Pe(Ie,Oe.dataFrameRowIndex):[],ut=we(Xe,Oe,nt);Ne(de(s.createElement(Qe,{node:Oe,nodes:Ie}),ze,Ne,ut))},[Re,Ie,Pe,Ne,ue,xe]);return{onEdgeOpen:(0,s.useCallback)((ze,Oe)=>{if(!Te)return;const Fe=Pe(Te,Oe.dataFrameRowIndex),Ge=we(Fe,Oe);Ne(de(s.createElement(tt,{edge:Oe,edges:Te}),ze,Ne,Ge))},[Te,Pe,Ne]),onNodeOpen:fe,MenuComponent:Ve}}function de(Pe,Ie,Te,Re){return s.createElement(ie.x,{renderHeader:()=>Pe,renderMenuItems:Re,onClose:()=>Te(void 0),x:Ie.pageX,y:Ie.pageY})}function we(Pe,Ie,Te){if(!(Pe.length||Te?.length))return;const Re=Je(Pe);return()=>{let ue=Re?.map((xe,Ve)=>s.createElement(Se.k,{key:`${xe.label}${Ve}`,label:xe.label},(xe.items||[]).map(_e(Ie))));return Te&&(ue=[...Te.map(_e(Ie)),...ue]),ue}}function _e(Pe){return function(Te){return s.createElement(ye.s,{key:Te.label,url:Te.url,label:Te.label,ariaLabel:Te.ariaLabel,onClick:Te.onClick?Re=>{Re?.ctrlKey||Re?.metaKey||Re?.shiftKey||(Re?.preventDefault(),Re?.stopPropagation(),Te.onClick?.(Pe))}:void 0,target:"_self"})}}function Je(Pe){const Ie="Open in Explore",Te=Pe.reduce((Re,ue)=>{let xe,Ve;return ue.title.indexOf("/")!==-1?(xe=ue.title.split("/")[0],Ve=ue.title.split("/")[1],Re[xe]=Re[xe]||[],Re[xe].push({l:ue,newTitle:Ve})):(Re[Ie]=Re[Ie]||[],Re[Ie].push({l:ue})),Re},{});return Object.keys(Te).map(Re=>({label:Re,ariaLabel:Re,items:Te[Re].map(ue=>({label:ue.newTitle||ue.l.title,ariaLabel:ue.newTitle||ue.l.title,url:ue.l.href,onClick:ue.l.onClick}))}))}function Ue({field:Pe,index:Ie}){return s.createElement($e,{label:Pe.config?.displayName||Pe.name,value:(0,l.Ew)(Pe.config,Pe.values[Ie]||"")})}function $e({label:Pe,value:Ie}){const Te=(0,m.wW)(lt);return s.createElement("tr",null,s.createElement("td",{className:Te.label},Pe,": "),s.createElement("td",{className:Te.value},Ie))}function Qe({node:Pe,nodes:Ie}){const Te=[];if(Ie){const Re=(0,l.F)(Ie);for(const ue of[Re.title,Re.subTitle,Re.mainStat,Re.secondaryStat,...Re.details])ue&&ue.values[Pe.dataFrameRowIndex]&&Te.push(s.createElement(Ue,{key:ue.name,field:ue,index:Pe.dataFrameRowIndex}))}else Pe.title&&Te.push(s.createElement($e,{key:"title",label:"Title",value:Pe.title})),Pe.subTitle&&Te.push(s.createElement($e,{key:"subtitle",label:"Subtitle",value:Pe.subTitle}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,Te))}function tt(Pe){const Ie=Pe.edge.dataFrameRowIndex,Te=(0,l.lr)(Pe.edges),Re=Te.source?.values[Ie]||"",ue=Te.target?.values[Ie]||"",xe=[];Re&&ue&&xe.push(s.createElement($e,{key:"header-row",label:"Source \u2192 Target",value:`${Re} \u2192 ${ue}`}));for(const Ve of[Te.mainStat,Te.secondaryStat,...Te.details])Ve&&Ve.values[Ie]&&xe.push(s.createElement(Ue,{key:`field-row-${Ie}`,field:Ve,index:Ie}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,xe))}const lt=Pe=>({label:(0,t.css)`
      label: Label;
      line-height: 1.25;
      color: ${Pe.colors.text.disabled};
      font-size: ${Pe.typography.size.sm};
      font-weight: ${Pe.typography.fontWeightMedium};
      padding-right: ${Pe.spacing(1)};
    `,value:(0,t.css)`
      label: Value;
      font-size: ${Pe.typography.size.sm};
      font-weight: ${Pe.typography.fontWeightMedium};
      color: ${Pe.colors.text.primary};
    `});var Me=e(35719);function De(Pe,Ie,Te){const Re=(0,Me.Z)(Pe.gridLayout);let ue;if(Re===!0&&!Pe.gridLayout&&Te){const xe=Ie.find(Ve=>Ve.id===Te);xe&&(ue={x:-xe.x,y:-xe.y})}return ue}function We(Pe){const[Ie,Te]=(0,s.useState)(),Re=(0,z.default)();return(0,s.useEffect)(()=>{Pe&&(Te(Pe),setTimeout(()=>{Re()&&Te(void 0)},500))},[Pe,Re]),Ie}function qe({scale:Pe=1,bounds:Ie,focus:Te}={}){const Re=(0,z.default)(),ue=(0,s.useRef)(!1),xe=(0,s.useRef)(0),Ve=(0,s.useRef)(null),Ne={x:0,y:0},fe=(0,s.useMemo)(()=>({right:Ie?-Ie.left:1/0,left:Ie?-Ie.right:-1/0,bottom:Ie?-Ie.top:-1/0,top:Ie?-Ie.bottom:1/0}),[Ie]),ve=(0,s.useRef)(Ne),ze=(0,s.useRef)(Ne),Oe=(0,s.useRef)(Ne),[Fe,Ge]=(0,s.useState)({isPanning:!1,position:Ne});(0,s.useEffect)(()=>{const ut=Cn=>{!ue.current&&Re()&&(ue.current=!0,ve.current=dt(Cn),ze.current={...Oe.current},Ge(pn=>({...pn,isPanning:!0})),mn())},ht=()=>{ue.current&&Re()&&(ue.current=!1,Ge(Cn=>({...Cn,isPanning:!1})),vn())},wt=Cn=>{ut(Cn),gn(Cn)},mn=()=>{document.addEventListener("mousemove",gn),document.addEventListener("mouseup",ht),document.addEventListener("touchmove",gn),document.addEventListener("touchend",ht)},vn=()=>{document.removeEventListener("mousemove",gn),document.removeEventListener("mouseup",ht),document.removeEventListener("touchmove",gn),document.removeEventListener("touchend",ht)},gn=Cn=>{cancelAnimationFrame(xe.current);const pn=dt(Cn);xe.current=requestAnimationFrame(()=>{if(Re()&&Ve.current){let nn=pn.x-ve.current.x,Ct=pn.y-ve.current.y;Oe.current={x:st(ze.current.x+nn/Pe,fe.left,fe.right),y:st(ze.current.y+Ct/Pe,fe.top,fe.bottom)},Ge(bt=>({...bt,position:{...Oe.current}}))}})},Sn=Ve.current;return Sn&&(Sn.addEventListener("mousedown",wt),Sn.addEventListener("touchstart",wt)),()=>{Sn&&(Sn.removeEventListener("mousedown",wt),Sn.removeEventListener("touchstart",wt))}},[Pe,fe,Re]);const nt=(0,Me.Z)(Te);(0,s.useEffect)(()=>{if(Te&&nt?.x!==Te.x&&nt?.y!==Te.y){const ut={x:st(Te.x,fe.left,fe.right),y:st(Te.y,fe.top,fe.bottom)};Ge({position:ut,isPanning:!1}),Oe.current=ut,ze.current=ut}},[Te,nt,fe,Oe,ze]);let Xe=Fe.position;return Te&&nt?.x!==Te.x&&nt?.y!==Te.y&&(Xe=Te),{state:{...Fe,position:{x:st(Xe.x,fe.left,fe.right),y:st(Xe.y,fe.top,fe.bottom)}},ref:Ve}}function st(Pe,Ie,Te){return Math.min(Math.max(Pe,Ie??-1/0),Te??1/0)}function dt(Pe){return Pe instanceof TouchEvent?{x:Pe.changedTouches[0].clientX,y:Pe.changedTouches[0].clientY}:Pe instanceof MouseEvent?{x:Pe.clientX,y:Pe.clientY}:{x:0,y:0}}const Tt={stepDown:Pe=>Pe/1.5,stepUp:Pe=>Pe*1.5,min:.13,max:2.25};function Nt({stepUp:Pe,stepDown:Ie,min:Te,max:Re}=Tt){const ue=(0,s.useRef)(null),[xe,Ve]=(0,s.useState)(1),Ne=(0,s.useCallback)(()=>{xe<(Re??1/0)&&Ve(Pe(xe))},[xe,Pe,Re]),fe=(0,s.useCallback)(()=>{xe>(Te??-1/0)&&Ve(Ie(xe))},[xe,Ie,Te]),ve=(0,s.useCallback)(function(ze){if(ze.ctrlKey||ze.metaKey){if(ze.preventDefault(),Ve(Math.min(Math.max(Te??-1/0,xe+Math.min(ze.deltaY,2)*-.01),Re??1/0)),ze.deltaY<0){const Oe=xe+Math.max(ze.deltaY,-4)*-.015;Ve(Math.max(Te??-1/0,Oe))}else if(ze.deltaY>0){const Oe=xe+Math.min(ze.deltaY,4)*-.015;Ve(Math.min(Re??1/0,Oe))}}},[Te,Re,xe]);return(0,s.useEffect)(()=>{if(!ue.current)return;const ze=ue.current;return ze.addEventListener("wheel",ve,{passive:!1}),()=>{ze&&ze.removeEventListener("wheel",ve)}},[ve]),{onStepUp:Ne,onStepDown:fe,scale:Math.max(Math.min(xe,Re??1/0),Te??-1/0),isMax:xe>=(Re??1/0),isMin:xe<=(Te??-1/0),ref:ue}}const Bt=Pe=>({wrapper:(0,t.css)`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:(0,t.css)`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:(0,t.css)`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:(0,t.css)`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${Pe.typography.h4.fontSize};
    color: ${Pe.colors.text.secondary};
  `,mainGroup:(0,t.css)`
    label: mainGroup;
    will-change: transform;
  `,viewControls:(0,t.css)`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:(0,t.css)`
    label: legend;
    background: ${Pe.colors.background.secondary};
    box-shadow: ${Pe.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:(0,t.css)`
    margin-left: auto;
  `,alert:(0,t.css)`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${Pe.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${Pe.colors.warning.main};
    color: ${Pe.colors.warning.contrastText};
  `,loadingWrapper:(0,t.css)`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),yt=200;function ft({getLinks:Pe,dataFrames:Ie,nodeLimit:Te}){const Re=Te||yt,{edges:ue,nodes:xe}=(0,re.Y)(Ie),[Ve,{width:Ne,height:fe}]=(0,r.Z)(),[ve,ze]=(0,s.useState)(ce),Oe=xe[0],Fe=ue[0],Ge=(0,s.useMemo)(()=>(0,l.HB)(Oe,Fe),[Fe,Oe]),{nodeHover:nt,setNodeHover:Xe,clearNodeHover:ut,edgeHover:ht,setEdgeHover:wt,clearEdgeHover:mn}=He(),[vn,gn]=(0,s.useState)([]);(0,s.useEffect)(()=>{let aa=[];nt?aa=(0,l.uX)(Ge.nodes,Ge.edges,nt):ht&&(aa=(0,l.MP)(Ge.nodes,Ge.edges,ht)),gn(aa)},[nt,ht,Ge]);const[Sn,Cn]=(0,s.useState)(),pn=(0,s.useCallback)((aa,ba)=>Cn(ba.node.id),[Cn]),{nodes:nn,edges:Ct,markers:bt,bounds:Ut,hiddenNodesCount:_t,loading:Gt}=q(Ge.nodes,Ge.edges,ve,Re,Ne,Sn),jt=De(ve,nn,Sn),{panRef:sn,zoomRef:St,onStepUp:mt,onStepDown:kt,isPanning:it,position:pt,scale:It,isMaxZoom:Qt,isMinZoom:rn}=he(Ut,jt),{onEdgeOpen:un,onNodeOpen:xn,MenuComponent:Kn}=Ce(Pe,Oe,Fe,ve,ze,Cn),_n=(0,m.wW)(Bt),Ma=(0,s.useCallback)(aa=>{Ve(aa),St.current=aa},[Ve,St]),la=We(Sn);return s.createElement("div",{ref:Ma,className:_n.wrapper},Gt?s.createElement("div",{className:_n.loadingWrapper},"Computing layout\xA0",s.createElement(d.$,null)):null,Ie.length&&Ge.nodes.length?s.createElement("svg",{ref:sn,viewBox:`${-(Ne/2)} ${-(fe/2)} ${Ne} ${fe}`,className:i()(_n.svg,it&&_n.svgPanning)},s.createElement("g",{className:_n.mainGroup,style:{transform:`scale(${It}) translate(${Math.floor(pt.x)}px, ${Math.floor(pt.y)}px)`}},s.createElement(g,null),!ve.gridLayout&&s.createElement(Be,{edges:Ct,nodeHoveringId:nt,edgeHoveringId:ht,onClick:un,onMouseEnter:wt,onMouseLeave:mn}),s.createElement(ct,{nodes:nn,onMouseEnter:Xe,onMouseLeave:ut,onClick:xn,hoveringIds:vn||[la]}),s.createElement(ge,{markers:bt||[],onClick:pn}),!ve.gridLayout&&s.createElement(Le,{edges:Ct,nodeHoveringId:nt,edgeHoveringId:ht}))):s.createElement("div",{className:_n.noDataMsg},"No data"),s.createElement("div",{className:_n.viewControls},nn.length?s.createElement("div",{className:_n.legend},s.createElement(u,{sortable:ve.gridLayout,nodes:nn,sort:ve.sort,onSort:aa=>{ze({...ve,sort:aa})}})):null,s.createElement("div",{className:_n.viewControlsWrapper},s.createElement(k,{config:ve,onConfigChange:aa=>{aa.gridLayout!==ve.gridLayout&&Cn(void 0),ze(aa)},onMinus:kt,onPlus:mt,scale:It,disableZoomIn:Qt,disableZoomOut:rn}))),_t>0&&s.createElement("div",{className:_n.alert,"aria-label":"Nodes hidden warning"},s.createElement(o.J,{size:"sm",name:"info-circle"})," ",_t," nodes are hidden for performance reasons."),Kn)}const ct=(0,s.memo)(function(Ie){return s.createElement(s.Fragment,null,Ie.nodes.map(Te=>s.createElement(U,{key:Te.id,node:Te,onMouseEnter:Ie.onMouseEnter,onMouseLeave:Ie.onMouseLeave,onClick:Ie.onClick,hovering:!Ie.hoveringIds||Ie.hoveringIds.length===0?"default":Ie.hoveringIds?.includes(Te.id)?"active":"inactive"})))}),ge=(0,s.memo)(function(Ie){return s.createElement(s.Fragment,null,Ie.markers.map(Te=>s.createElement(x,{key:"marker-"+Te.node.id,marker:Te,onClick:Ie.onClick})))}),Be=(0,s.memo)(function(Ie){return s.createElement(s.Fragment,null,Ie.edges.map(Te=>s.createElement(a,{key:Te.id,edge:Te,hovering:Te.source.id===Ie.nodeHoveringId||Te.target.id===Ie.nodeHoveringId||Ie.edgeHoveringId===Te.id,onClick:Ie.onClick,onMouseEnter:Ie.onMouseEnter,onMouseLeave:Ie.onMouseLeave})))}),Le=(0,s.memo)(function(Ie){return s.createElement(s.Fragment,null,Ie.edges.map((Te,Re)=>{const ue=Te.source.id===Ie.nodeHoveringId||Te.target.id===Ie.nodeHoveringId||Ie.edgeHoveringId===Te.id,xe=Te.mainStat||Te.secondaryStat;return ue&&xe&&s.createElement(h,{key:Te.id,edge:Te})}))});function he(Pe,Ie){const{scale:Te,onStepDown:Re,onStepUp:ue,ref:xe,isMax:Ve,isMin:Ne}=Nt(),{state:fe,ref:ve}=qe({scale:Te,bounds:Pe,focus:Ie}),{position:ze,isPanning:Oe}=fe;return{zoomRef:xe,panRef:ve,position:ze,isPanning:Oe,scale:Te,onStepDown:Re,onStepUp:ue,isMaxZoom:Ve,isMinZoom:Ne}}function He(){const[Pe,Ie]=(0,s.useState)(void 0),Te=(0,s.useCallback)(()=>Ie(void 0),[Ie]),[Re,ue]=(0,s.useState)(void 0),xe=(0,s.useCallback)(()=>ue(void 0),[ue]);return{nodeHover:Pe,setNodeHover:Ie,clearNodeHover:Te,edgeHover:Re,setEdgeHover:ue,clearEdgeHover:xe}}},30097:(j,I,e)=>{"use strict";e.d(I,{Y:()=>i});var t=e(27702),n=e(11995);function i(s){return(0,t.useMemo)(()=>(0,n.E_)(s),[s])}},11995:(j,I,e)=>{"use strict";e.d(I,{E_:()=>O,Ee:()=>S,Ew:()=>v,F:()=>m,HB:()=>l,MP:()=>M,Tz:()=>P,dM:()=>r,lr:()=>d,uX:()=>R});var t=e(31832),n=e(12503),i=e(29241),s=e(93666);function r(T,U){const L=T.x2-T.x1,V=T.y2-T.y1,w=Math.sqrt(L*L+V*V),K=Math.max((w-U)/w,0),B=L*K,W=V*K,_=L-B,k=V-W,A=T.x1+_/2,z=T.y1+k/2;return{x1:A,y1:z,x2:A+B,y2:z+W}}function m(T){const U={...T,fields:T.fields.map(V=>({...V,name:V.name.toLowerCase()}))},L=new t.N(U);return{id:L.getFieldByName(n.z.id.toLowerCase()),title:L.getFieldByName(n.z.title.toLowerCase()),subTitle:L.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:L.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:L.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:o(T,n.z.arc),details:o(T,n.z.detail),color:L.getFieldByName(n.z.color),icon:L.getFieldByName(n.z.icon)}}function d(T){const U={...T,fields:T.fields.map(V=>({...V,name:V.name.toLowerCase()}))},L=new t.N(U);return{id:L.getFieldByName(n.z.id.toLowerCase()),source:L.getFieldByName(n.z.source.toLowerCase()),target:L.getFieldByName(n.z.target.toLowerCase()),mainStat:L.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:L.getFieldByName(n.z.secondaryStat.toLowerCase()),details:o(T,n.z.detail.toLowerCase())}}function o(T,U){return T.fields.filter(L=>L.name.match(new RegExp("^"+U)))}function l(T,U){if(!(U||T))return{nodes:[],edges:[]};if(T){const L=m(T);if(!L.id)throw new Error("id field is required for nodes data frame.");const V={};for(let K=0;K<L.id.values.length;K++){const B=L.id.values[K];V[B]=b(B,L,K)}let w=U?a(U,d(U)):[];for(const K of w)V[K.target].incoming++;return{nodes:Object.values(V),edges:w,legend:L.arc.map(K=>({color:K.config.color?.fixedColor??"",name:K.config.displayName||K.name}))}}else{U=U;const L={},V=d(U);let w=a(U,V);for(let B=0;B<w.length;B++){const W=w[B],{source:_,target:k}=h(V,B);L[k.id]=L[k.id]||k,L[_.id]=L[_.id]||_,g(V.mainStat)&&(L[k.id].mainStatNumeric=(L[k.id].mainStatNumeric??0)+V.mainStat.values[B]),g(V.secondaryStat)&&(L[k.id].secondaryStatNumeric=(L[k.id].secondaryStatNumeric??0)+V.secondaryStat.values[B]),L[W.target].incoming++}return{nodes:c(L,V),edges:w}}}function a(T,U){if(!U.id)throw new Error("id field is required for edges data frame.");return U.id.values.map((L,V)=>{const w=U.target?.values[V],K=U.source?.values[V];return{id:L,dataFrameRowIndex:V,source:K,target:w,mainStat:U.mainStat?v(U.mainStat.config,U.mainStat.values[V]):"",secondaryStat:U.secondaryStat?v(U.secondaryStat.config,U.secondaryStat.values[V]):""}})}function g(T){return T&&T.type===i.fS.number}function c(T,U){const L=[],V=[],w=g(U.secondaryStat)?{...U.secondaryStat,values:L}:void 0,K=g(U.mainStat)?{...U.mainStat,values:V}:void 0;return Object.values(T).map((B,W)=>{if(K||w){const _={...B};return K&&(_.mainStat=K,V.push(B.mainStatNumeric),_.dataFrameRowIndex=W),w&&(_.secondaryStat=w,L.push(B.secondaryStatNumeric),_.dataFrameRowIndex=W),_}return B})}function h(T,U){const L=T.target?.values[U],V=T.source?.values[U];return{target:f(L,U),source:f(V,U)}}function f(T,U){return{id:T,title:T,subTitle:"",dataFrameRowIndex:U,incoming:0,arcSections:[]}}function b(T,U,L){return{id:T,title:U.title?.values[L]||"",subTitle:U.subTitle?.values[L]||"",dataFrameRowIndex:L,incoming:0,mainStat:U.mainStat,secondaryStat:U.secondaryStat,arcSections:U.arc,color:U.color,icon:U.icon?.values[L]||""}}function v(T,U){if(typeof U=="string")return U;{const L=T.decimals||2;return Number.isFinite(U)?U.toFixed(L)+(T.unit?" "+T.unit:""):""}}function y(T){const U=C();for(let L=0;L<T;L++)U.add(E(L));return U}function E(T){return{id:T.toString(),title:`service:${T}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5,icon:"database"}}function C(){const T={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:[],type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:[],type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}},[NodeGraphDataFrameFieldNames.icon]:{values:[],type:FieldType.string}};return new MutableDataFrame({name:"nodes",fields:Object.keys(T).map(U=>({...T[U],name:U}))})}function u(T){const U=D();for(const L of T)U.add({id:L.source+"--"+L.target,...L});return U}function D(){const T={[NodeGraphDataFrameFieldNames.id]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:[],type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:[],type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:[],type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(T).map(U=>({...T[U],name:U}))})}function P(T){if(T.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const U=T.reduce((w,K)=>(K.x>w.right&&(w.right=K.x),K.x<w.left&&(w.left=K.x),K.y>w.bottom&&(w.bottom=K.y),K.y<w.top&&(w.top=K.y),w),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),L=U.top+(U.bottom-U.top)/2,V=U.left+(U.right-U.left)/2;return{...U,center:{x:V,y:L}}}function S(T,U){let L=T.filter(V=>!!(V.meta?.preferredVisualisationType==="nodeGraph"||V.name==="nodes"||V.name==="edges"||V.refId==="nodes"||V.refId==="edges"||new t.N(V).getFieldByName(n.z.id)));return U&&(L=x(L,U)),L}const x=(T,U)=>T.map(L=>{if(new t.N(L).getFieldByName(n.z.source.toLowerCase())){if(U?.edges?.mainStatUnit){const w=L.fields.find(K=>K.name.toLowerCase()===n.z.mainStat);w&&(w.config={...w.config,unit:U.edges.mainStatUnit})}if(U?.edges?.secondaryStatUnit){const w=L.fields.find(K=>K.name.toLowerCase()===n.z.secondaryStat);w&&(w.config={...w.config,unit:U.edges.secondaryStatUnit})}}else{if(U?.nodes?.mainStatUnit){const w=L.fields.find(K=>K.name.toLowerCase()===n.z.mainStat);w&&(w.config={...w.config,unit:U.nodes.mainStatUnit})}if(U?.nodes?.secondaryStatUnit){const w=L.fields.find(K=>K.name.toLowerCase()===n.z.secondaryStat);w&&(w.config={...w.config,unit:U.nodes.secondaryStatUnit})}if(U?.nodes?.arcs?.length)for(const w of U.nodes.arcs){const K=L.fields.find(B=>B.name.toLowerCase()===w.field);K&&w.color&&(K.config={...K.config,color:{fixedColor:w.color,mode:s.S.Fixed}})}}return L}),M=(T,U,L)=>{const V=U.find(w=>w.id===L);return V?[...new Set(T.filter(w=>V.source===w.id||V.target===w.id).map(w=>w.id))]:[]},R=(T,U,L)=>{const V=T.find(w=>w.id===L);if(V){const w=U.filter(K=>K.source===V.id||K.target===V.id);return[...new Set(w.flatMap(K=>T.filter(B=>K.source===B.id||K.target===B.id).map(B=>B.id)))]}return[]},O=T=>T.reduce((U,L)=>(L.fields.filter(w=>w.name==="source").length?U.edges.push(L):U.nodes.push(L),U),{edges:[],nodes:[]})},14035:(j,I,e)=>{"use strict";e.d(I,{h:()=>d,j:()=>m});var t=e(41199),n=e(66656),i=e(75578),s=e(95676),r=e(64167);function m(o,l=!0){const a=["Value options"];o.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:a,defaultValue:!1}),o.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:a,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:g=>g.reduceOptions.values===!0}),o.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:a,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:g=>g.reduceOptions.values===!1}),l&&o.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:a,settings:{allowCustomValue:!0,options:[],getOptions:async g=>{const c=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(g&&g.data)for(const h of g.data)for(const f of h.fields){const b=(0,i.CZ)(f,h,g.data),v=`/^${(0,s.GE)(b)}$/`;c.push({value:v,label:b})}return Promise.resolve(c)}},defaultValue:""})}function d(o,l){o.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:l,settings:{options:[{value:r.wm.Auto,label:"Auto"},{value:r.wm.Horizontal,label:"Horizontal"},{value:r.wm.Vertical,label:"Vertical"}]},defaultValue:r.wm.Auto})}},24830:(j,I,e)=>{"use strict";e.r(I),e.d(I,{plugin:()=>D});var t=e(97585),n=e(64167),i=e(77148),s=e(50250),r=e(93666);const m=(P,S,x)=>{const M=(0,s.ZH)(P,S,x);if(x.angular&&(S==="singlestat"||S==="grafana-singlestat-panel")){const R=x.angular;if(M.graphMode=n.IG.None,R.sparkline&&R.sparkline.show&&(M.graphMode=n.IG.Area),R.colorBackground)M.colorMode=n.pc.Background;else if(R.colorValue)M.colorMode=n.pc.Value;else if(M.colorMode=n.pc.None,R.sparkline?.lineColor&&M.graphMode===n.IG.Area){const O=P.fieldConfig??{};O.defaults.color={mode:r.S.Fixed,fixedColor:R.sparkline.lineColor},P.fieldConfig=O}R.valueName==="name"&&(M.textMode=n.jG.Name)}return M};var d=e(89949),o=e(27702),l=e(29241),a=e(91466),g=e(21708),c=e(50323),h=e(50741),f=e(44201),b=e(12308);class v extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(S,x)=>{const{timeRange:M,options:R}=this.props,{value:O,alignmentFactors:T,width:U,height:L,count:V,orientation:w}=S,{openMenu:K,targetClassName:B}=x;let W=O.sparkline;return W&&(W.timeRange=M),o.createElement(c.w6,{value:O.display,count:V,sparkline:W,colorMode:R.colorMode,graphMode:R.graphMode,justifyMode:R.justifyMode,textMode:this.getTextMode(),alignmentFactors:T,parentOrientation:w,text:R.text,width:U,height:L,theme:b.config.theme2,onClick:K,className:B})},this.renderValue=S=>{const{value:x}=S,{getLinks:M,hasLinks:R}=x;return R&&M?o.createElement(h.V,{links:M},O=>this.renderComponent(S,O)):this.renderComponent(S,{})},this.getValues=()=>{const{data:S,options:x,replaceVariables:M,fieldConfig:R,timeZone:O}=this.props;let T;for(let U of S.series)for(let L of U.fields){let{config:V}=L;if(L.type===l.fS.number){if(L.state?.range)continue;!T&&(!(0,d.isNumber)(V.min)||!(0,d.isNumber)(V.max))&&(T=(0,g.Xu)(S.series));const w=V.min??T.min,K=V.max??T.max;L.state=L.state??{},L.state.range={min:w,max:K,delta:K-w}}}return(0,a.nG)({fieldConfig:R,reduceOptions:x.reduceOptions,replaceVariables:M,theme:b.config.theme2,data:S.series,sparkline:x.graphMode!==n.IG.None,timeZone:O})}}getTextMode(){const{options:S,fieldConfig:x,title:M}=this.props;return S.textMode===n.jG.Auto&&(x.defaults.displayName||!M)?n.jG.ValueAndName:S.textMode}render(){const{height:S,options:x,width:M,data:R,renderCounter:O}=this.props;return o.createElement(f.Q,{getValues:this.getValues,getAlignmentFactors:a.sg,renderValue:this.renderValue,width:M,height:S,source:R,itemSpacing:3,renderCounter:O,autoGrid:!0,orientation:x.orientation})}}var y=e(14035);const E={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var C=e(7641);class u{getSuggestionsForData(S){const{dataSummary:x}=S;if(!x.hasData)return;const M=S.getListAppender({name:C.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:R=>{R.options.reduceOptions.values&&(R.options.reduceOptions.limit=1)}}});x.hasStringField&&x.hasNumberField&&x.frameCount===1&&x.rowCountTotal<10&&(M.append({name:C.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),M.append({name:C.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),x.stringFieldCount===1&&x.frameCount===1&&x.rowCountTotal<10&&x.fieldCount===1&&M.append({name:C.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),x.hasNumberField&&x.hasTimeField&&(M.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),M.append({name:C.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const D=new t.c(v).useFieldConfig().setPanelOptions(P=>{const S=["Stat styles"];(0,y.j)(P),(0,y.h)(P,S),i.Z(P),P.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:S,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:E.textMode}),P.addSelect({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:S,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background Gradient"},{value:n.pc.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:S,defaultValue:E.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:E.justifyMode,category:S,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(m).setSuggestionsSupplier(new u).setMigrationHandler(s.rD)},49183:(j,I,e)=>{"use strict";e.d(I,{M:()=>m});var t=e(27702),n=e(64022),i=e(40705),s=e(7632);const r=[{label:"Never",value:!1},{label:"Threshold",value:36e5}],m=({value:d,onChange:o,item:l})=>{const a=typeof d=="number";return r[1].value=a?d:36e5,t.createElement(n.Lh,null,t.createElement(i.S,{value:d,options:r,onChange:o}),a&&t.createElement(s.C,{value:d,onChange:o,inputPrefix:s.Z.GreaterThan,isTime:l.settings.isTime}))}},25236:(j,I,e)=>{"use strict";e.d(I,{j:()=>l});var t=e(27702),n=e(64022),i=e(40705),s=e(28580),r=e(67437);const m=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],d=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(g=>({label:g,value:g})),o=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(g=>({label:g,value:g})),l=({value:g,onChange:c})=>{const h=(0,t.useMemo)(()=>g?.fill==="dash"?d:o,[g]),f=(0,t.useMemo)(()=>{if(!g?.dash?.length)return h[0];const b=g.dash?.join(", "),v=h.find(y=>y.value===b);return v||{label:b,value:b}},[g,h]);return t.createElement(n.Lh,null,t.createElement(i.S,{value:g?.fill||"solid",options:m,onChange:b=>{let v;b==="dot"?v=a(o[0].value):b==="dash"&&(v=a(d[0].value)),c({...g,fill:b,dash:v})}}),g?.fill&&g?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.Ph,{allowCustomValue:!0,options:h,value:f,width:20,onChange:b=>{c({...g,dash:a(b.value??"")})},formatCreateLabel:b=>`Segments: ${a(b).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(r.h,{name:"question-circle",tooltip:"Help"})))))};function a(g){const c=[];for(const h of g.split(/(?:,| )+/)){const f=Number.parseInt(h,10);isNaN(f)||c.push(f)}return c}},7632:(j,I,e)=>{"use strict";e.d(I,{C:()=>r,Z:()=>s});var t=e(27702),n=e(76305),i=e(1128),s=(m=>(m.LessThan="lessthan",m.GreaterThan="greaterthan",m))(s||{});const r=({value:m,onChange:d,inputPrefix:o,isTime:l})=>{let a=n.secondsToHms(m/1e3);l||(a="10");const g=b=>{let v=!1;if(b)try{l&&n.isValidTimeSpan(b)?v=n.intervalToMs(b):v=Number(b)}catch(y){console.warn("ERROR",y)}d(v)},c=b=>{b.key==="Enter"&&g(b.currentTarget.value)},h=b=>{g(b.currentTarget.value)},f=o==="greaterthan"?t.createElement("div",null,">"):o==="lessthan"?t.createElement("div",null,"<"):null;return t.createElement(i.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:a,onKeyDown:c,onBlur:h,prefix:f,spellCheck:!1})}},95668:(j,I,e)=>{"use strict";e.d(I,{c:()=>m});var t=e(27702),n=e(64022),i=e(40705),s=e(7632);const r=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],m=({value:d,onChange:o,item:l})=>{const a=typeof d=="number";return r[2].value=a?d:36e5,t.createElement(n.Lh,null,t.createElement(i.S,{value:d,options:r,onChange:o}),a&&t.createElement(s.C,{value:d,onChange:o,inputPrefix:s.Z.LessThan,isTime:l.settings.isTime}))}},62575:(j,I,e)=>{"use strict";e.d(I,{F:()=>i});var t=e(27702),n=e(28580);const i=({item:s,value:r,onChange:m,id:d})=>{const o=(0,t.useCallback)(l=>{m({mode:l.value})},[m]);return t.createElement(n.Ph,{inputId:d,value:r.mode,options:s.settings.options,onChange:o})}},2643:(j,I,e)=>{"use strict";e.d(I,{F:()=>v,r:()=>f});var t=e(25587),n=e(93666),i=e(29241),s=e(27001),r=e(64167),m=e(55219),d=e(8658),o=e(53387),l=e(56617),a=e(49183),g=e(25236),c=e(95668),h=e(62575);const f={drawStyle:r.l8.Line,lineInterpolation:r.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:r.FI.None,barAlignment:r.pu.Center,stacking:{mode:r.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},b=["Graph styles"];function v(y,E=!0){return{standardOptions:{[t.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.S.PaletteClassic}}},useCustomConfig:C=>{C.addRadio({path:"drawStyle",name:"Style",category:b,defaultValue:y.drawStyle,settings:{options:m.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:b,defaultValue:y.lineInterpolation,settings:{options:m.q.lineInterpolation},showIf:u=>u.drawStyle===r.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:b,defaultValue:y.barAlignment,settings:{options:m.q.barAlignment},showIf:u=>u.drawStyle===r.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:b,defaultValue:y.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:u=>u.drawStyle!==r.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:b,defaultValue:y.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:u=>u.drawStyle!==r.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:b,defaultValue:m.q.fillGradient[0].value,settings:{options:m.q.fillGradient},showIf:u=>u.drawStyle!==r.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:b,hideFromDefaults:!0,settings:{filter:u=>u.type===i.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:b,showIf:u=>u.drawStyle===r.l8.Line,editor:g.j,override:g.j,process:s.kG,shouldApply:u=>u.type===i.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:b,defaultValue:!1,editor:c.c,override:c.c,showIf:u=>u.drawStyle===r.l8.Line,shouldApply:u=>u.type!==i.fS.time,process:s.kG,settings:{isTime:E}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:"Disconnect values",category:b,defaultValue:!1,editor:a.M,override:a.M,showIf:u=>u.drawStyle===r.l8.Line,shouldApply:u=>u.type!==i.fS.time,process:s.kG,settings:{isTime:E}}).addRadio({path:"showPoints",name:"Show points",category:b,defaultValue:m.q.showPoints[0].value,settings:{options:m.q.showPoints},showIf:u=>u.drawStyle!==r.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:b,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:u=>u.showPoints!==r.Jp.Never||u.drawStyle===r.l8.Points}),d.V(C,y.stacking,b),C.addSelect({category:b,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:r.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:r.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),o.r(C,y),l.B(C),C.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:r.i3.Off},settings:{options:m.q.thresholdsDisplayModes},editor:h.F,override:h.F,process:s.kG,shouldApply:()=>!0})}}}},44548:()=>{"use strict";let j=window.matchMedia;window.matchMedia=I=>{let e=j(I);return e.addEventListener||(e.addEventListener=(t,n)=>{e.addListener(n)},e.removeEventListener=(t,n)=>{e.removeListener(n)}),e}},11504:(j,I,e)=>{"use strict";e.d(I,{gV:()=>Da,eU:()=>Ta});var t=e(27702),n=e(7662),i=e(53933),s=e(42844),r=e(63439),m=e(64022),d=e(66670),o=e(76404),l=e(12308),a=e(65322),g=e(2578),c=e(97706),h=e(79562),f=e(8874),b=e(89949),v=e(34239),y=e(66310),E=e(73453);const C=()=>{const Yt=!!l.default.oauth;return{saml:{bgColor:"#464646",enabled:l.default.samlEnabled,name:l.default.samlName||v.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:Yt&&!!l.default.oauth.google,name:l.default.oauth?.google?.name||"Google",icon:l.default.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:Yt&&!!l.default.oauth.azuread,name:l.default.oauth?.azuread?.name||"Microsoft",icon:l.default.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:Yt&&!!l.default.oauth.github,name:l.default.oauth?.github?.name||"GitHub",icon:l.default.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:Yt&&!!l.default.oauth.gitlab,name:l.default.oauth?.gitlab?.name||"GitLab",icon:l.default.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:Yt&&!!l.default.oauth.grafana_com,name:l.default.oauth?.grafana_com?.name||"Grafana.com",icon:l.default.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:Yt&&!!l.default.oauth.okta,name:l.default.oauth?.okta?.name||"Okta",icon:l.default.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:Yt&&!!l.default.oauth.generic_oauth,name:l.default.oauth?.generic_oauth?.name||"OAuth",icon:l.default.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},u=Yt=>({button:(0,s.css)`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:(0,s.css)`
      position: absolute;
      left: ${Yt.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:(0,s.css)`
        color: ${Yt.colors.text};
        display: flex;
        margin-bottom: ${Yt.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:(0,s.css)`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${Yt.colors.text};
      `}}),D=()=>{const Yt=(0,y.wW)(u);return t.createElement(t.Fragment,null,t.createElement("div",{className:Yt.divider.base},t.createElement("div",null,t.createElement("div",{className:Yt.divider.line})),t.createElement("div",null,t.createElement("span",null,!l.default.disableLoginForm&&t.createElement("span",null,"or"))),t.createElement("div",null,t.createElement("div",{className:Yt.divider.line}))),t.createElement("div",{className:"clearfix"}))};function P(Yt,Kt,hn){return(0,s.cx)(Kt.button,(0,s.css)`
      background-color: ${Yt.bgColor};
      color: ${hn.colors.getContrastText(Yt.bgColor)};

      &:hover {
        background-color: ${hn.colors.emphasize(Yt.bgColor,.15)};
        box-shadow: ${hn.shadows.z1};
      }
    `)}const S=()=>{const Yt=(0,b.pickBy)(C(),Hn=>Hn.enabled),Kt=Object.keys(Yt).length>0,hn=(0,y.l4)(),Mn=(0,y.wW)(u);return Kt?t.createElement(m.wc,null,t.createElement(D,null),Object.entries(Yt).map(([Hn,Jn])=>t.createElement(d.Qj,{key:Hn,className:P(Jn,Mn,hn),href:`login/${Jn.hrefName?Jn.hrefName:Hn}`,target:"_self",fullWidth:!0},t.createElement(E.J,{className:Mn.buttonIcon,name:Jn.icon}),"Sign in with ",Jn.name))):null},x=()=>{const Yt=(0,l.iE)().verifyEmailEnabled?`${(0,l.iE)().appSubUrl}/verify`:`${(0,l.iE)().appSubUrl}/signup`,Kt=(0,s.css)({paddingTop:"16px"});return t.createElement(m.wc,null,t.createElement("div",{className:Kt},"New to Grafana?"),t.createElement(d.Qj,{className:(0,s.css)`
          width: 100%;
          justify-content: center;
        `,href:Yt,variant:"secondary",fill:"outline"},"Sign up"))},M=(0,s.css)`
  padding: 0;
  margin-top: 4px;
`,R=(0,s.css)({width:"100%"}),O=()=>(document.title=o.c.AppTitle,t.createElement(c.Z,null,({loginHint:Yt,passwordHint:Kt,disableLoginForm:hn,disableUserSignUp:Mn,login:Hn,isLoggingIn:Jn,changePassword:Qn,skipPasswordChange:va,isChangingPassword:Ga,showDefaultPasswordWarning:La,loginErrorMessage:Ia})=>t.createElement(f.dd,{isChangingPassword:Ga},!Ga&&t.createElement(f.$s,null,Ia&&t.createElement(r.b,{className:R,severity:"error",title:(0,a.t)("login.error.title","Login failed")},Ia),!hn&&t.createElement(h.U,{onSubmit:Hn,loginHint:Yt,passwordHint:Kt,isLoggingIn:Jn},t.createElement(m.Lh,{justify:"flex-end"},t.createElement(d.Qj,{className:M,fill:"text",href:`${l.default.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),t.createElement(S,null),!Mn&&t.createElement(x,null)),Ga&&t.createElement(f.$s,null,t.createElement(g.G,{showDefaultPasswordWarning:La,onSubmit:Qn,onSkip:()=>va()})))));var T=e(44644),U=e(48105),L=e(50230);function V({description:Yt,text:Kt,url:hn}){const Mn=(0,y.wW)(w);return t.createElement(L.Z,{className:Mn.card,href:hn},t.createElement(L.Z.Heading,null,Kt),t.createElement(L.Z.Description,{className:Mn.description},Yt))}const w=Yt=>({card:(0,s.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,s.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function K({navId:Yt}){const{node:Kt}=(0,U.q)(Yt),hn=(0,y.wW)(B),Mn=Kt.children?.filter(Hn=>!Hn.hideFromTabs);return t.createElement(T.T,{navId:Kt.id},t.createElement(T.T.Contents,null,t.createElement("div",{className:hn.content},Mn&&Mn.length>0&&t.createElement("section",{className:hn.grid},Mn?.map(Hn=>t.createElement(V,{key:Hn.id,description:Hn.subTitle,text:Hn.text,url:Hn.url??""}))))))}const B=Yt=>({content:(0,s.css)({display:"flex",flexDirection:"column",gap:Yt.spacing(2)}),grid:(0,s.css)({display:"grid",gap:Yt.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:Yt.spacing(2,0)})});var W=e(38192),_=e(73149);function k(){return t.createElement(T.T,{navId:"home",layout:W.Q.Canvas,pageNav:{text:"Page not found"}},t.createElement(_.j,{entity:"Page"}))}var A=e(91368),z=e(27173),H=e(80978),Q=e(66574),X=e(18771),te=e(60956);const oe="dddd YYYY-MM-DD HH:mm zz",Z="/admin/authentication/ldap";class le extends t.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:Kt,user:hn}=this.props,Hn=Kt&&Kt.nextSync?(0,te.dq)(Kt.nextSync,{format:oe}):"",Jn=`${Z}?user=${hn&&hn.login}`,Qn=Q.contextSrv.hasPermission(X.AccessControlAction.LDAPUsersRead),va=Q.contextSrv.hasPermission(X.AccessControlAction.LDAPUsersSync);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"External sync"),t.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),t.createElement("td",null,t.createElement("span",{className:"label label-tag"},"LDAP"))),t.createElement("tr",null,Kt.enabled?t.createElement(t.Fragment,null,t.createElement("td",null,"Next scheduled synchronization"),t.createElement("td",{colSpan:2},Hn)):t.createElement(t.Fragment,null,t.createElement("td",null,"Next scheduled synchronization"),t.createElement("td",{colSpan:2},"Not enabled")))))),t.createElement("div",{className:"gf-form-button-row"},va&&t.createElement(d.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Qn&&t.createElement(d.Qj,{variant:"secondary",href:Jn},"Debug LDAP Mapping"))))}}var ce=e(80402),q=e(55205),ne=e(13741),pe=e(22209),re=e(80011),ie=e(75574),Se=e(11349),ye=e(26811),Ce=e(73289),de=e(28580);function we({onSelected:Yt,className:Kt,inputId:hn,autoFocus:Mn,excludeOrgs:Hn}){(0,t.useEffect)(()=>{Mn&&hn&&document.getElementById(hn)?.focus()},[Mn,hn]);const[Jn,Qn]=(0,ye.Z)(async()=>{const Ga=(await(0,Ce.i)().get("/api/orgs")).map(La=>({value:{id:La.id,name:La.name},label:La.name}));if(Hn){let La=Hn.map(Ka=>Ka.orgId);return Ga.filter(Ka=>!La.includes(Ka.value.id))}else return Ga});return t.createElement(de.qb,{inputId:hn,className:Kt,isLoading:Jn.loading,defaultOptions:!0,isSearchable:!1,loadOptions:Qn,onChange:Yt,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var _e=e(8237);class Je extends t.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=t.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:Kt,orgs:hn,isExternalUser:Mn,onOrgRoleChange:Hn,onOrgRemove:Jn,onOrgAdd:Qn}=this.props,{showAddOrgModal:va}=this.state,Ga=(0,s.css)`
      margin-top: 0.8rem;
    `,La=Q.contextSrv.hasPermission(X.AccessControlAction.OrgUsersAdd)&&!Mn;return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Organizations"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,hn.map((Ia,Ka)=>t.createElement(Qe,{key:`${Ia.orgId}-${Ka}`,isExternalUser:Mn,user:Kt,org:Ia,onOrgRoleChange:Hn,onOrgRemove:Jn}))))),t.createElement("div",{className:Ga},La&&t.createElement(d.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),t.createElement(lt,{user:Kt,userOrgs:hn,isOpen:va,onOrgAdd:Qn,onDismiss:this.dismissOrgAddModal})))}}const Ue=(0,ce.B)(Yt=>({removeButton:(0,s.css)`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${Yt.v1.palette.blue95};
    `,label:(0,s.css)`
      font-weight: 500;
    `,disabledTooltip:(0,s.css)`
      display: flex;
    `,tooltipItem:(0,s.css)`
      margin-left: 5px;
    `,tooltipItemLink:(0,s.css)`
      color: ${Yt.v1.palette.blue95};
    `,rolePickerWrapper:(0,s.css)`
      display: flex;
    `,rolePicker:(0,s.css)`
      flex: auto;
      margin-right: ${Yt.spacing(1)};
    `}));class $e extends t.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:Kt}=this.props;this.props.onOrgRemove(Kt.orgId)},this.onChangeRoleClick=()=>{const{org:Kt}=this.props;this.setState({isChangingRole:!0,currentRole:Kt.role})},this.onOrgRoleChange=Kt=>{this.setState({currentRole:Kt})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=Kt=>{this.props.onOrgRoleChange(this.props.org.orgId,Kt)}}componentDidMount(){Q.contextSrv.licensedAccessControlEnabled()&&Q.contextSrv.hasPermission(X.AccessControlAction.ActionRolesList)&&(0,Se.ul)(this.props.org.orgId).then(Kt=>this.setState({roleOptions:Kt})).catch(Kt=>console.error(Kt))}render(){const{user:Kt,org:hn,isExternalUser:Mn,theme:Hn}=this.props,Jn=Kt?.authLabels?.length&&Kt?.authLabels[0],Qn=Jn?`Synced via ${Jn}`:"",{currentRole:va,isChangingRole:Ga}=this.state,La=Ue(Hn),Ia=(0,s.cx)("width-16",La.label),Ka=Q.contextSrv.hasPermission(X.AccessControlAction.OrgUsersWrite),qa=Q.contextSrv.hasPermission(X.AccessControlAction.OrgUsersRemove)&&!Mn,hs=Mn||!Ka,$s=`${hn.name}-input`;return t.createElement("tr",null,t.createElement("td",{className:Ia},t.createElement("label",{htmlFor:$s},hn.name)),Q.contextSrv.licensedAccessControlEnabled()?t.createElement("td",null,t.createElement("div",{className:La.rolePickerWrapper},t.createElement("div",{className:La.rolePicker},t.createElement(ie.R,{userId:Kt?.id||0,orgId:hn.orgId,basicRole:hn.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:hs,basicRoleDisabledMessage:`This user's role is not editable because it is synchronized from your auth provider.
                    Refer to the Grafana authentication docs for details.`})),Mn&&t.createElement(We,{lockMessage:Qn}))):t.createElement(t.Fragment,null,Ga?t.createElement("td",null,t.createElement(_e.A,{inputId:$s,value:va,onChange:this.onOrgRoleChange,autoFocus:!0})):t.createElement("td",{className:"width-25"},hn.role),t.createElement("td",{colSpan:1},t.createElement("div",{className:"pull-right"},Ka&&t.createElement(De,{lockMessage:Qn,isExternalUser:Mn,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),t.createElement("td",{colSpan:1},t.createElement("div",{className:"pull-right"},qa&&t.createElement(q.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const Qe=(0,y.HE)($e),tt=(0,ce.B)(()=>({modal:(0,s.css)`
    width: 500px;
  `,buttonRow:(0,s.css)`
    text-align: center;
  `,modalContent:(0,s.css)`
    overflow: visible;
  `}));class lt extends t.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:X.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=Kt=>{const hn=this.props.userOrgs.find(Mn=>Mn.orgId===Kt.value?.id);this.setState({selectedOrg:Kt.value,role:hn?.role||X.OrgRole.Viewer}),Q.contextSrv.licensedAccessControlEnabled()&&Q.contextSrv.hasPermission(X.AccessControlAction.ActionRolesList)&&(0,Se.ul)(Kt.value?.id).then(Mn=>this.setState({roleOptions:Mn})).catch(Mn=>console.error(Mn))},this.onOrgRoleChange=Kt=>{this.setState({role:Kt})},this.onAddUserToOrg=async()=>{const{selectedOrg:Kt,role:hn}=this.state;this.props.onOrgAdd(Kt.id,hn),Q.contextSrv.licensedAccessControlEnabled()&&Q.contextSrv.hasPermission(X.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,Se.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(Kt,hn,Mn)=>{this.setState({pendingRoles:Kt,pendingOrgId:Mn,pendingUserId:hn})}}render(){const{isOpen:Kt,user:hn,userOrgs:Mn}=this.props,{role:Hn,roleOptions:Jn,selectedOrg:Qn}=this.state,va=tt();return t.createElement(ne.u,{className:va.modal,contentClassName:va.modalContent,title:"Add to an organization",isOpen:Kt,onDismiss:this.onCancel},t.createElement(pe.g,{label:"Organization"},t.createElement(we,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:Mn,autoFocus:!0})),t.createElement(pe.g,{label:"Role",disabled:Qn===null},Q.contextSrv.accessControlEnabled()?t.createElement(ie.R,{userId:hn?.id||0,orgId:Qn?.id,basicRole:Hn,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:Jn,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):t.createElement(_e.A,{inputId:"new-org-role-input",value:Hn,onChange:this.onOrgRoleChange})),t.createElement(ne.u.ButtonRow,null,t.createElement(m.Lh,{spacing:"md",justify:"center"},t.createElement(d.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),t.createElement(d.zx,{variant:"primary",disabled:Qn===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const Me=Yt=>({disabledTooltip:(0,s.css)`
    display: flex;
  `,tooltipItemLink:(0,s.css)`
    color: ${Yt.v1.palette.blue95};
  `,lockMessageClass:(0,s.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:(0,s.css)`
    line-height: 2;
  `});function De({lockMessage:Yt,onChangeRoleClick:Kt,isExternalUser:hn,onOrgRoleSave:Mn,onCancelClick:Hn}){const Jn=(0,y.wW)(Me);return t.createElement("div",{className:Jn.disabledTooltip},hn?t.createElement(t.Fragment,null,t.createElement("span",{className:Jn.lockMessageClass},Yt),t.createElement(re.u,{placement:"right-end",interactive:!0,content:t.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",t.createElement("a",{className:Jn.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},t.createElement("div",{className:Jn.icon},t.createElement(E.J,{name:"question-circle"})))):t.createElement(q.p,{confirmText:"Save",onClick:Kt,onCancel:Hn,onConfirm:Mn,disabled:hn},"Change role"))}const We=({lockMessage:Yt})=>{const Kt=(0,y.wW)(qe);return t.createElement("div",{className:Kt.disabledTooltip},t.createElement("span",{className:Kt.lockMessageClass},Yt),t.createElement(re.u,{placement:"right-end",interactive:!0,content:t.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",t.createElement("a",{className:Kt.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},t.createElement(E.J,{name:"question-circle"})))},qe=Yt=>({disabledTooltip:(0,s.css)`
    display: flex;
  `,tooltipItemLink:(0,s.css)`
    color: ${Yt.v1.palette.blue95};
  `,lockMessageClass:(0,s.css)`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `});var st=e(40705);const dt=[{label:"Yes",value:!0},{label:"No",value:!1}];function Tt({isGrafanaAdmin:Yt,isExternalUser:Kt,lockMessage:hn,onGrafanaAdminChange:Mn}){const[Hn,Jn]=(0,t.useState)(!1),[Qn,va]=(0,t.useState)(Yt),Ga=()=>Jn(!0),La=()=>{Jn(!1),va(Yt)},Ia=()=>Mn(Qn),Ka=Q.contextSrv.hasPermission(X.AccessControlAction.UsersPermissionsUpdate)&&!Kt,qa=(0,y.wW)(Nt);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Permissions"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Grafana Admin"),Hn?t.createElement("td",{colSpan:2},t.createElement(st.S,{options:dt,value:Qn,onChange:va,autoFocus:!0})):t.createElement("td",{colSpan:2},Yt?t.createElement(t.Fragment,null,t.createElement(E.J,{name:"shield"})," Yes"):t.createElement(t.Fragment,null,"No")),t.createElement("td",null,Ka&&t.createElement(q.p,{onClick:Ga,onConfirm:Ia,onCancel:La,confirmText:"Change"},"Change"),Kt&&t.createElement("div",{className:qa.lockMessageClass},t.createElement(We,{lockMessage:hn})))))))))}const Nt=Yt=>({lockMessageClass:(0,s.css)`
    display: flex;
    justify-content: flex-end;
    font-style: italic;
    margin-right: ${Yt.spacing(.6)};
  `});var Bt=e(3613),yt=e(83670),ft=e(1128);function ct({user:Yt,onUserUpdate:Kt,onUserDelete:hn,onUserDisable:Mn,onUserEnable:Hn,onPasswordChange:Jn}){const[Qn,va]=(0,t.useState)(!1),[Ga,La]=(0,t.useState)(!1),Ia=(0,t.useRef)(null),Ka=os=>()=>{va(os),!os&&Ia.current&&Ia.current.focus()},qa=(0,t.useRef)(null),hs=os=>()=>{La(os),!os&&qa.current&&qa.current.focus()},$s=()=>hn(Yt.id),zs=()=>Mn(Yt.id),Ns=()=>Hn(Yt.id),Xs=os=>{Kt({...Yt,name:os})},ys=os=>{Kt({...Yt,email:os})},ua=os=>{Kt({...Yt,login:os})},ja=Yt.authLabels?.length&&Yt.authLabels[0],Pa=ja?`Synced via ${ja}`:"",Ya=Yt.isExternal||!Q.contextSrv.hasPermissionInMetadata(X.AccessControlAction.UsersWrite,Yt),_s=Yt.isExternal||!Q.contextSrv.hasPermissionInMetadata(X.AccessControlAction.UsersPasswordUpdate,Yt),Us=Q.contextSrv.hasPermissionInMetadata(X.AccessControlAction.UsersDelete,Yt),ds=Q.contextSrv.hasPermissionInMetadata(X.AccessControlAction.UsersDisable,Yt),cn=Q.contextSrv.hasPermissionInMetadata(X.AccessControlAction.UsersEnable,Yt);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"User information"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement(Be,{label:"Name",value:Yt.name,locked:Ya,lockMessage:Pa,onChange:Xs}),t.createElement(Be,{label:"Email",value:Yt.email,locked:Ya,lockMessage:Pa,onChange:ys}),t.createElement(Be,{label:"Username",value:Yt.login,locked:Ya,lockMessage:Pa,onChange:ua}),t.createElement(Be,{label:"Password",value:"********",inputType:"password",locked:_s,lockMessage:Pa,onChange:Jn})))),t.createElement("div",{className:ge.buttonRow},Us&&t.createElement(t.Fragment,null,t.createElement(d.zx,{variant:"destructive",onClick:Ka(!0),ref:Ia},"Delete user"),t.createElement(Bt.s,{isOpen:Qn,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:$s,onDismiss:Ka(!1)})),Yt.isDisabled&&cn&&t.createElement(d.zx,{variant:"secondary",onClick:Ns},"Enable user"),!Yt.isDisabled&&ds&&t.createElement(t.Fragment,null,t.createElement(d.zx,{variant:"secondary",onClick:hs(!0),ref:qa},"Disable user"),t.createElement(Bt.s,{isOpen:Ga,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:zs,onDismiss:hs(!1)})))))}const ge={buttonRow:(0,s.css)`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class Be extends t.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=Kt=>{this.inputElem=Kt},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(Kt,hn)=>{hn!==yt.G.Invalid&&this.setState({value:Kt.target.value})},this.onInputBlur=(Kt,hn)=>{hn!==yt.G.Invalid&&this.setState({value:Kt.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:Kt,locked:hn,lockMessage:Mn,inputType:Hn}=this.props,{value:Jn}=this.state,Qn=(0,s.cx)("width-16",(0,s.css)`
        font-weight: 500;
      `);if(hn)return t.createElement(Le,{label:Kt,value:Jn,lockMessage:Mn});const va=`${Kt}-input`;return t.createElement("tr",null,t.createElement("td",{className:Qn},t.createElement("label",{htmlFor:va},Kt)),t.createElement("td",{className:"width-25",colSpan:2},this.state.editing?t.createElement(ft.I,{id:va,type:Hn,defaultValue:Jn,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):t.createElement("span",null,this.props.value)),t.createElement("td",null,t.createElement(q.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}Be.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const Le=({label:Yt,value:Kt,lockMessage:hn})=>{const Mn=(0,s.css)`
    font-style: italic;
    margin-right: 0.6rem;
  `,Hn=(0,s.cx)("width-16",(0,s.css)`
      font-weight: 500;
    `);return t.createElement("tr",null,t.createElement("td",{className:Hn},Yt),t.createElement("td",{className:"width-25",colSpan:2},Kt),t.createElement("td",null,t.createElement("span",{className:Mn},hn)))};class he extends t.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=t.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=Kt=>()=>{this.props.onSessionRevoke(Kt)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:Kt}=this.props,{showLogoutModal:hn}=this.state,Mn=(0,s.css)`
      margin-top: 0.8rem;
    `,Hn=Q.contextSrv.hasPermission(X.AccessControlAction.UsersLogout);return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Sessions"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Last seen"),t.createElement("th",null,"Logged on"),t.createElement("th",null,"IP address"),t.createElement("th",{colSpan:2},"Browser and OS"))),t.createElement("tbody",null,Kt&&Kt.map((Jn,Qn)=>t.createElement("tr",{key:`${Jn.id}-${Qn}`},t.createElement("td",null,Jn.isActive?"Now":Jn.seenAt),t.createElement("td",null,(0,a.$q)(Jn.createdAt,{dateStyle:"long"})),t.createElement("td",null,Jn.clientIp),t.createElement("td",null,`${Jn.browser} on ${Jn.os} ${Jn.osVersion}`),t.createElement("td",null,t.createElement("div",{className:"pull-right"},Hn&&t.createElement(q.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(Jn.id),autoFocus:!0},"Force logout")))))))),t.createElement("div",{className:Mn},Hn&&Kt.length>0&&t.createElement(d.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),t.createElement(Bt.s,{isOpen:hn,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const He=he;var Pe=e(64544);class Ie extends t.PureComponent{constructor(){super(...arguments),this.onUserUpdate=Kt=>{this.props.updateUser(Kt)},this.onPasswordChange=Kt=>{const{user:hn,setUserPassword:Mn}=this.props;hn&&Mn(hn.id,Kt)},this.onUserDelete=Kt=>{this.props.deleteUser(Kt)},this.onUserDisable=Kt=>{this.props.disableUser(Kt)},this.onUserEnable=Kt=>{this.props.enableUser(Kt)},this.onGrafanaAdminChange=Kt=>{const{user:hn,updateUserPermissions:Mn}=this.props;hn&&Mn(hn.id,Kt)},this.onOrgRemove=Kt=>{const{user:hn,deleteOrgUser:Mn}=this.props;hn&&Mn(hn.id,Kt)},this.onOrgRoleChange=(Kt,hn)=>{const{user:Mn,updateOrgUserRole:Hn}=this.props;Mn&&Hn(Mn.id,Kt,hn)},this.onOrgAdd=(Kt,hn)=>{const{user:Mn,addOrgUser:Hn}=this.props;Mn&&Hn(Mn,Kt,hn)},this.onSessionRevoke=Kt=>{const{user:hn,revokeSession:Mn}=this.props;hn&&Mn(Kt,hn.id)},this.onAllSessionsRevoke=()=>{const{user:Kt,revokeAllSessions:hn}=this.props;Kt&&hn(Kt.id)},this.onUserSync=()=>{const{user:Kt,syncLdapUser:hn}=this.props;Kt&&hn(Kt.id)}}async componentDidMount(){const{match:Kt,loadAdminUserPage:hn}=this.props;hn(parseInt(Kt.params.id,10))}render(){const{user:Kt,orgs:hn,sessions:Mn,ldapSyncInfo:Hn,isLoading:Jn}=this.props,Qn=Kt?.isExternal&&Kt?.authLabels?.includes("LDAP"),va=Q.contextSrv.hasPermission(X.AccessControlAction.UsersAuthTokenList),Ga=Q.contextSrv.hasPermission(X.AccessControlAction.LDAPStatusRead),La=!l.default.auth.DisableSyncLock&&Kt?.isExternallySynced,Ia=Kt?.authLabels?.[0],Ka=Ia?`Synced via ${Ia}`:"",qa={text:Kt?.login??"",icon:"shield",subTitle:"Manage settings for an individual user."};return t.createElement(T.T,{navId:"global-users",pageNav:qa},t.createElement(T.T.Contents,{isLoading:Jn},Kt&&t.createElement(t.Fragment,null,t.createElement(ct,{user:Kt,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),Qn&&La&&(0,H.v)("ldapsync")&&Hn&&Ga&&t.createElement(le,{ldapSyncInfo:Hn,user:Kt,onUserSync:this.onUserSync}),t.createElement(Tt,{isGrafanaAdmin:Kt.isGrafanaAdmin,isExternalUser:Kt?.isGrafanaAdminExternallySynced,lockMessage:Ka,onGrafanaAdminChange:this.onGrafanaAdminChange})),hn&&t.createElement(Je,{user:Kt,orgs:hn,isExternalUser:La,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),Mn&&va&&t.createElement(He,{sessions:Mn,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const Te=Yt=>({user:Yt.userAdmin.user,sessions:Yt.userAdmin.sessions,orgs:Yt.userAdmin.orgs,ldapSyncInfo:Yt.ldap.syncInfo,isLoading:Yt.userAdmin.isLoading,error:Yt.userAdmin.error}),Re={loadAdminUserPage:Pe.PK,updateUser:Pe.Nq,setUserPassword:Pe.tQ,disableUser:Pe.B9,enableUser:Pe.Dx,deleteUser:Pe.h8,updateUserPermissions:Pe.Xx,addOrgUser:Pe.bN,updateOrgUserRole:Pe.Jk,deleteOrgUser:Pe.uV,revokeSession:Pe._1,revokeAllSessions:Pe.Fm,syncLdapUser:Pe.CP},xe=(0,z.connect)(Te,Re)(Ie);var Ve=e(82367);const Ne=({ldapConnectionInfo:Yt})=>t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Connection"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Host"),t.createElement("th",{colSpan:2},"Port"))),t.createElement("tbody",null,Yt&&Yt.map((Kt,hn)=>t.createElement("tr",{key:hn},t.createElement("td",null,Kt.host),t.createElement("td",null,Kt.port),t.createElement("td",null,Kt.available?t.createElement(E.J,{name:"check",className:"pull-right"}):t.createElement(E.J,{name:"exclamation-triangle",className:"pull-right"}))))))),t.createElement("div",{className:"gf-form-group"},t.createElement(fe,{ldapConnectionInfo:Yt})))),fe=({ldapConnectionInfo:Yt})=>{if(!Yt.some(Hn=>Hn.error))return null;const hn=[];Yt.forEach(Hn=>{Hn.error&&hn.push(Hn)});const Mn=hn.map((Hn,Jn)=>t.createElement("div",{key:Jn},t.createElement("span",{style:{fontWeight:500}},Hn.host,":",Hn.port,t.createElement("br",null)),t.createElement("span",null,Hn.error),Jn!==hn.length-1&&t.createElement(t.Fragment,null,t.createElement("br",null),t.createElement("br",null))));return t.createElement(r.b,{title:"Connection error",severity:X.AppNotificationSeverity.Error},Mn)};var ve=e(62108);const ze="dddd YYYY-MM-DD HH:mm zz";class Oe extends t.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:Kt}=this.props,{isSyncing:hn}=this.state,Mn=(0,te.dq)(Kt.nextSync,{format:ze});return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",t.createElement(d.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},t.createElement("span",{className:"btn-title"},"Bulk-sync now"),hn&&t.createElement(ve.$,{inline:!0}))),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"Active synchronisation"),t.createElement("td",{colSpan:2},Kt.enabled?"Enabled":"Disabled")),t.createElement("tr",null,t.createElement("td",null,"Scheduled"),t.createElement("td",null,Kt.schedule)),t.createElement("tr",null,t.createElement("td",null,"Next scheduled synchronisation"),t.createElement("td",null,Mn)))))))}}const Fe=({groups:Yt,showAttributeMapping:Kt})=>{const hn=Kt?Yt:Yt.filter(Mn=>Mn.orgRole);return t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,Kt&&t.createElement("th",null,"LDAP Group"),t.createElement("th",null,"Organization",t.createElement(re.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},t.createElement(E.J,{name:"info-circle"}))),t.createElement("th",null,"Role"))),t.createElement("tbody",null,hn.map((Mn,Hn)=>t.createElement("tr",{key:`${Mn.orgId}-${Hn}`},Kt&&t.createElement("td",null,Mn.groupDN),Mn.orgName&&Mn.orgRole?t.createElement("td",null,Mn.orgName):t.createElement("td",null),Mn.orgRole?t.createElement("td",null,Mn.orgRole):t.createElement("td",null,t.createElement("span",{className:"text-warning"},"No match"),t.createElement(re.u,{placement:"top",content:"No matching groups found",theme:"info"},t.createElement(E.J,{name:"info-circle"})))))))))},Ge=({info:Yt,showAttributeMapping:Kt})=>t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{colSpan:2},"User information"),Kt&&t.createElement("th",null,"LDAP attribute"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"},"First name"),t.createElement("td",null,Yt.name.ldapValue),Kt&&t.createElement("td",null,Yt.name.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Surname"),t.createElement("td",null,Yt.surname.ldapValue),Kt&&t.createElement("td",null,Yt.surname.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Username"),t.createElement("td",null,Yt.login.ldapValue),Kt&&t.createElement("td",null,Yt.login.cfgAttrValue)),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Email"),t.createElement("td",null,Yt.email.ldapValue),Kt&&t.createElement("td",null,Yt.email.cfgAttrValue)))))),nt=({permissions:Yt})=>t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{colSpan:1},"Permissions"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{className:"width-16"}," Grafana admin"),t.createElement("td",null,Yt.isGrafanaAdmin?t.createElement(t.Fragment,null,t.createElement(E.J,{name:"shield"})," Yes"):"No")),t.createElement("tr",null,t.createElement("td",{className:"width-16"},"Status"),t.createElement("td",null,Yt.isDisabled?t.createElement(t.Fragment,null,t.createElement(E.J,{name:"times"})," Inactive"):t.createElement(t.Fragment,null,t.createElement(E.J,{name:"check"})," Active"))))))),Xe=({teams:Yt,showAttributeMapping:Kt})=>{const hn=Kt?Yt:Yt.filter(Mn=>Mn.teamName);return t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("thead",null,t.createElement("tr",null,Kt&&t.createElement("th",null,"LDAP Group"),t.createElement("th",null,"Organisation"),t.createElement("th",null,"Team"))),t.createElement("tbody",null,hn.map((Mn,Hn)=>t.createElement("tr",{key:`${Mn.teamName}-${Hn}`},Kt&&t.createElement(t.Fragment,null,t.createElement("td",null,Mn.groupDN),!Mn.orgName&&t.createElement(t.Fragment,null,t.createElement("td",null),t.createElement("td",null,t.createElement("span",{className:"text-warning"},"No match"),t.createElement(re.u,{placement:"top",content:"No matching teams found",theme:"info"},t.createElement(E.J,{name:"info-circle"}))))),Mn.orgName&&t.createElement(t.Fragment,null,t.createElement("td",null,Mn.orgName),t.createElement("td",null,Mn.teamName))))))))},ut=({ldapUser:Yt,showAttributeMapping:Kt})=>t.createElement(t.Fragment,null,t.createElement(Ge,{info:Yt.info,showAttributeMapping:Kt}),t.createElement(nt,{permissions:Yt.permissions}),Yt.roles&&Yt.roles.length>0&&t.createElement(Fe,{groups:Yt.roles,showAttributeMapping:Kt}),Yt.teams&&Yt.teams.length>0?t.createElement(Xe,{teams:Yt.teams,showAttributeMapping:Kt}):t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form"},t.createElement("table",{className:"filter-table form-inline"},t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,"No teams found via LDAP"))))))),{FormField:ht}=Ve.LegacyForms,wt={text:"LDAP",subTitle:"Verify your LDAP and user mapping configuration.",icon:"book",id:"LDAP"};class mn extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=Kt=>{Kt.preventDefault();const hn=Kt.target.elements.username.value;hn&&this.fetchUserMapping(hn)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:Kt,queryParams:hn}=this.props;await Kt(),await this.fetchLDAPStatus(),hn.username&&await this.fetchUserMapping(hn.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:Kt,loadLdapSyncStatus:hn}=this.props;return Promise.all([Kt(),hn()])}async fetchUserMapping(Kt){const{loadUserMapping:hn}=this.props;return await hn(Kt)}render(){const{ldapUser:Kt,userError:hn,ldapError:Mn,ldapSyncInfo:Hn,ldapConnectionInfo:Jn,queryParams:Qn}=this.props,{isLoading:va}=this.state,Ga=Q.contextSrv.hasPermission(X.AccessControlAction.LDAPUsersRead);return t.createElement(T.T,{navId:"authentication",pageNav:wt},t.createElement(T.T.Contents,{isLoading:va},t.createElement(t.Fragment,null,Mn&&Mn.title&&t.createElement("div",{className:"gf-form-group"},t.createElement(r.b,{title:Mn.title,severity:X.AppNotificationSeverity.Error},Mn.body)),t.createElement(Ne,{ldapConnectionInfo:Jn}),(0,H.v)("ldapsync")&&Hn&&t.createElement(Oe,{ldapSyncInfo:Hn}),Ga&&t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Test user mapping"),t.createElement("div",{className:"gf-form-group"},t.createElement("form",{onSubmit:this.search,className:"gf-form-inline"},t.createElement(ht,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:Qn.username}),t.createElement(d.zx,{type:"submit"},"Run"))),hn&&hn.title&&t.createElement("div",{className:"gf-form-group"},t.createElement(r.b,{title:hn.title,severity:X.AppNotificationSeverity.Error,onRemove:this.onClearUserError},hn.body)),Kt&&t.createElement(ut,{ldapUser:Kt,showAttributeMapping:!0})))))}}const vn=Yt=>({ldapConnectionInfo:Yt.ldap.connectionInfo,ldapUser:Yt.ldap.user,ldapSyncInfo:Yt.ldap.syncInfo,userError:Yt.ldap.userError,ldapError:Yt.ldap.ldapError}),gn={loadLdapState:Pe.Y3,loadLdapSyncStatus:Pe.j4,loadUserMapping:Pe.b_,clearUserError:Pe.V0,clearUserMappingInfo:Pe.IS},Cn=(0,z.connect)(vn,gn)(mn);var pn=e(50686),nn=e(9031),Ct=e(2082);const bt=[],Ut=[...bt,{path:"/alerting",component:()=>t.createElement(K,{navId:"alerting-legacy"})},{path:"/alerting/list",component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(1109),e.e(1608),e.e(3312),e.e(2461)]).then(e.bind(e,75330)))},{path:"/alerting/ng/list",component:(0,nn.Q)(()=>e.e(4286).then(e.bind(e,75330)))},{path:"/alerting/notifications",roles:l.config.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,25270)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,25270)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,25270)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,25270)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,25270)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,25270)))},{path:"/alerting/notification/new",component:(0,nn.Q)(()=>e.e(476).then(e.bind(e,29478)))},{path:"/alerting/notification/:id/edit",component:(0,nn.Q)(()=>e.e(7384).then(e.bind(e,25668)))}],_t=[...bt,{path:"/alerting",component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6034)]).then(e.bind(e,9075)))},{path:"/alerting/list",roles:(0,Ct.ql)([X.AccessControlAction.AlertingRuleRead,X.AccessControlAction.AlertingRuleExternalRead],[pn.B.Viewer,pn.B.Editor,pn.B.Admin]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(1109),e.e(1608),e.e(3312),e.e(2461)]).then(e.bind(e,11555)))},{path:"/alerting/routes",roles:(0,Ct.ql)([X.AccessControlAction.AlertingNotificationsRead,X.AccessControlAction.AlertingNotificationsExternalRead],[pn.B.Editor,pn.B.Admin]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(642),e.e(8648)]).then(e.bind(e,69798)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Ct.ql)([X.AccessControlAction.AlertingNotificationsWrite,X.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(9355)]).then(e.bind(e,27011)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Ct.ql)([X.AccessControlAction.AlertingNotificationsWrite,X.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(9355)]).then(e.bind(e,27011)))},{path:"/alerting/silences",roles:(0,Ct.ql)([X.AccessControlAction.AlertingInstanceRead,X.AccessControlAction.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(1783)]).then(e.bind(e,68836)))},{path:"/alerting/silence/new",roles:(0,Ct.ql)([X.AccessControlAction.AlertingInstanceCreate,X.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(1783)]).then(e.bind(e,68836)))},{path:"/alerting/silence/:id/edit",roles:(0,Ct.ql)([X.AccessControlAction.AlertingInstanceUpdate,X.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(1783)]).then(e.bind(e,68836)))},{path:"/alerting/notifications",roles:(0,Ct.ql)([X.AccessControlAction.AlertingNotificationsRead,X.AccessControlAction.AlertingNotificationsExternalRead],["Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,34913)))},{path:"/alerting/notifications/:type/new",roles:(0,Ct.ql)([X.AccessControlAction.AlertingNotificationsWrite,X.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,34913)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Ct.ql)([X.AccessControlAction.AlertingNotificationsWrite,X.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,34913)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Ct.ql)([X.AccessControlAction.AlertingNotificationsWrite,X.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,34913)))},{path:"/alerting/notifications/:type",roles:(0,Ct.ql)([X.AccessControlAction.AlertingNotificationsWrite,X.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(6618)]).then(e.bind(e,34913)))},{path:"/alerting/groups/",roles:(0,Ct.ql)([X.AccessControlAction.AlertingInstanceRead,X.AccessControlAction.AlertingInstancesExternalRead],[pn.B.Viewer,pn.B.Editor,pn.B.Admin]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(2415)]).then(e.bind(e,97138)))},{path:"/alerting/new/:type?",pageClass:"page-alerting",roles:(0,Ct.ql)([X.AccessControlAction.AlertingRuleCreate,X.AccessControlAction.AlertingRuleExternalWrite],[pn.B.Viewer,pn.B.Editor,pn.B.Admin]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(1109),e.e(4393),e.e(1608),e.e(8198),e.e(562),e.e(5372)]).then(e.bind(e,99632)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Ct.ql)([X.AccessControlAction.AlertingRuleUpdate,X.AccessControlAction.AlertingRuleExternalWrite],[pn.B.Viewer,pn.B.Editor,pn.B.Admin]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(1109),e.e(4393),e.e(1608),e.e(8198),e.e(562),e.e(5372)]).then(e.bind(e,99632)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Ct.ql)([X.AccessControlAction.AlertingRuleRead,X.AccessControlAction.AlertingRuleExternalRead],[pn.B.Viewer,pn.B.Editor,pn.B.Admin]),component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(4393),e.e(4679)]).then(e.bind(e,41570)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Ct.ql)([X.AccessControlAction.AlertingRuleRead,X.AccessControlAction.AlertingRuleExternalRead],[pn.B.Viewer,pn.B.Editor,pn.B.Admin]),component:(0,nn.Q)(()=>e.e(7918).then(e.bind(e,39513)))},{path:"/alerting/admin",roles:()=>["Admin"],component:(0,nn.Q)(()=>Promise.all([e.e(1406),e.e(7680)]).then(e.bind(e,39137)))}];function Gt(Yt=l.config){return Yt.unifiedAlertingEnabled?_t:Yt.alertingEnabled?Ut:(0,b.uniq)([...Ut,..._t].map(hn=>hn.path)).map(hn=>({path:hn,component:(0,nn.Q)(()=>e.e(1333).then(e.bind(e,33157)))}))}var jt=e(90131);function sn(){return[{path:`/${jt.D}`,exact:!1,component:(0,nn.Q)(()=>Promise.all([e.e(3153),e.e(7795),e.e(5981)]).then(e.bind(e,61078)))}]}var St=e(39410),mt=e(95948);const kt=[{path:"/plugins",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:mt.cd.Home,component:(0,nn.Q)(()=>e.e(94).then(e.bind(e,48179)))},{path:"/plugins/browse",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:mt.cd.Browse,component:(0,nn.Q)(()=>e.e(94).then(e.bind(e,48179)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:mt.cd.Details,component:(0,nn.Q)(()=>Promise.all([e.e(3153),e.e(7795),e.e(2417)]).then(e.bind(e,14692)))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>t.createElement(n.l_,{to:"/plugins"})}];function it(){return kt}var pt=e(86809),It=e(34099),Qt=e(3935),rn=e(9232),un=e(34667),xn=e(26129),Kn=e(95685),_n=e(26473);function Ma(Yt){return console.error(Yt),aa("Exception thrown","See console for details")}function la(){return aa("Page not found","404 Error")}function aa(Yt,Kt){const hn={text:Yt,subTitle:Kt,icon:"exclamation-triangle"};return{node:hn,main:hn}}var ba=e(67821),ga=e(8929),Ca=e(37843),Ha=e(74161);const ka={loading:!0,pluginNav:null,plugin:null};function ma({pluginId:Yt,pluginNavSection:Kt}){const hn=(0,n.$B)(),Mn=(0,n.TH)(),[Hn,Jn]=(0,t.useReducer)(At.reducer,ka),Qn=un.config.appSubUrl+Mn.pathname+Mn.search,{plugin:va,loading:Ga,pluginNav:La}=Hn,Ia=(0,Ca.d)(Kt,La,Qn),Ka=(0,t.useMemo)(()=>(0,xn.Ox)(Mn.search),[Mn.search]),qa=(0,t.useMemo)(()=>(0,Ha.a)(Ia),[Ia]),hs=(0,_n.p)();(0,t.useEffect)(()=>{Rt(Yt,Jn)},[Yt]);const $s=(0,t.useCallback)(Ns=>Jn(At.actions.changeNav(Ns)),[]);if(!va||Yt!==va.meta.id){const Ns=hs.chrome.state.getValue().layout;return t.createElement(T.T,{navModel:Ia,pageNav:{text:""},layout:Ns},Ga&&t.createElement(Kn.Z,null))}if(!va.root)return t.createElement(T.T,{navModel:Ia??aa("Plugin load error")},t.createElement("div",null,"No root app page component found"));const zs=va.root&&t.createElement(va.root,{meta:va.meta,basename:hn.url,onNavChanged:$s,query:Ka,path:Mn.pathname});return La?t.createElement(t.Fragment,null,Ia?t.createElement(T.T,{navModel:Ia,pageNav:La?.node},t.createElement(T.T.Contents,{isLoading:Ga},zs)):t.createElement(T.T,null,zs)):t.createElement(Ha.v.Provider,{value:qa},zs)}const At=(0,It.oM)({name:"prom-builder-container",initialState:ka,reducers:{setState:(Yt,Kt)=>{Object.assign(Yt,Kt.payload)},changeNav:(Yt,Kt)=>{let hn=Kt.payload;hn&&hn.node.children&&(hn={...hn,node:{...hn.main,hideFromBreadcrumbs:!0}}),Yt.pluginNav=hn}}});async function Rt(Yt,Kt){try{const hn=await(0,ba.a)(Yt).then(Mn=>{const Hn=Mt(Mn);return Hn?(Q.h$.emit(Qt.SI.alertError,[Hn]),Kt(At.actions.setState({pluginNav:aa(Hn)})),null):(0,ga.Av)(Mn)});Kt(At.actions.setState({plugin:hn,loading:!1,pluginNav:null}))}catch{Kt(At.actions.setState({plugin:null,loading:!1,pluginNav:la()}))}}function Mt(Yt){return Yt?Yt.type!==rn.zV.app?"Plugin must be an app":Yt.enabled?null:"Application Not Enabled":"Unknown Plugin"}const $t=ma;var Pn=e(84749);function tn(){const Yt=(0,Pn.y0)(),{navIndex:Kt}=Yt,hn=Jn=>Jn.startsWith("standalone-plugin-page-/"),Mn=Jn=>"pluginId"in Jn&&"id"in Jn;return[...Object.values(Kt).filter(Mn).map(Jn=>{const Qn=(0,pt.vw)(Jn),va=`/a/${Jn.pluginId}`,Ga=hn(Jn.id)&&Jn.url||va,La=hn(Jn.id)&&!Jn.url?.startsWith("/a/");return{path:Ga,exact:!1,sensitive:La,component:()=>t.createElement($t,{pluginId:Jn.pluginId,pluginNavSection:Qn})}}),{path:"/a/:pluginId",exact:!1,component:({match:Jn})=>t.createElement($t,{pluginId:Jn.params.pluginId,pluginNavSection:Kt.home})}]}const Un=[{path:"/profile",component:(0,nn.Q)(()=>e.e(7323).then(e.bind(e,28001)))},{path:"/profile/password",component:(0,nn.Q)(()=>e.e(465).then(e.bind(e,465)))},{path:"/profile/select-org",component:(0,nn.Q)(()=>e.e(1456).then(e.bind(e,87918)))},{path:"/profile/notifications",component:(0,nn.Q)(()=>e.e(743).then(e.bind(e,64270)))}];function $n(Yt=l.config){return Yt.profileEnabled?Un:(0,b.uniq)(Un.map(hn=>hn.path)).map(hn=>({path:hn,component:(0,nn.Q)(()=>e.e(3395).then(e.bind(e,79527)))}))}const kn=()=>l.config.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:X.DashboardRoutes.Public,component:(0,nn.Q)(()=>e.e(1344).then(e.bind(e,84185)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:X.DashboardRoutes.Public,chromeless:!0,component:(0,nn.Q)(()=>Promise.all([e.e(9427),e.e(7307),e.e(3258),e.e(2613)]).then(e.bind(e,16089)))}]:[],Fn=()=>l.config.featureToggles.dashboardEmbed?[{path:"/d-embed",pageClass:"dashboard-embed",routeName:X.DashboardRoutes.Embedded,component:(0,nn.Q)(()=>Promise.all([e.e(9427),e.e(7307),e.e(3258),e.e(7454)]).then(e.bind(e,5460)))}]:[],Da=[];function Ta(){return[...tn(),{path:"/",pageClass:"page-dashboard",routeName:X.DashboardRoutes.Home,component:(0,nn.Q)(()=>Promise.all([e.e(9427),e.e(7307),e.e(3258),e.e(9734),e.e(1863),e.e(3312),e.e(3069),e.e(5296)]).then(e.bind(e,12743)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:X.DashboardRoutes.Normal,component:(0,nn.Q)(()=>Promise.all([e.e(9427),e.e(7307),e.e(3258),e.e(9734),e.e(1863),e.e(3312),e.e(3069),e.e(5296)]).then(e.bind(e,12743)))},{path:"/dashboard/new",roles:()=>A.contextSrv.evaluatePermission(()=>[],[X.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:X.DashboardRoutes.New,component:(0,nn.Q)(()=>Promise.all([e.e(9427),e.e(7307),e.e(3258),e.e(9734),e.e(1863),e.e(3312),e.e(3069),e.e(5296)]).then(e.bind(e,12743)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>A.contextSrv.evaluatePermission(()=>["Editor","Admin"],[X.AccessControlAction.DashboardsCreate]),component:(0,nn.Q)(()=>Promise.all([e.e(9427),e.e(7307),e.e(3258),e.e(9734),e.e(1863),e.e(3312),e.e(3069),e.e(5296)]).then(e.bind(e,57461)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:X.DashboardRoutes.Normal,component:(0,nn.Q)(()=>Promise.all([e.e(9427),e.e(7307),e.e(3258),e.e(9734),e.e(1863),e.e(3312),e.e(3069),e.e(5296)]).then(e.bind(e,12743)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:X.DashboardRoutes.Normal,chromeless:!0,component:(0,nn.Q)(()=>Promise.resolve().then(e.bind(e,30084)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:X.DashboardRoutes.Normal,chromeless:!0,component:(0,nn.Q)(()=>Promise.resolve().then(e.bind(e,30084)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:X.DashboardRoutes.Normal,chromeless:!0,component:(0,nn.Q)(()=>Promise.resolve().then(e.bind(e,30084)))},{path:"/dashboard/import",roles:()=>A.contextSrv.evaluatePermission(()=>["Editor","Admin"],[X.AccessControlAction.DashboardsCreate]),component:(0,nn.Q)(()=>e.e(8808).then(e.bind(e,40599)))},{path:St.n.List,component:()=>t.createElement(n.l_,{to:jt.Z.DataSources})},{path:St.n.Edit,component:Yt=>t.createElement(n.l_,{to:jt.Z.DataSourcesEdit.replace(":uid",Yt.match.params.uid)})},{path:St.n.Dashboards,component:Yt=>t.createElement(n.l_,{to:jt.Z.DataSourcesDashboards.replace(":uid",Yt.match.params.uid)})},{path:St.n.New,component:()=>t.createElement(n.l_,{to:jt.Z.DataSourcesNew})},{path:"/datasources/correlations",component:(0,nn.Q)(()=>l.default.featureToggles.correlations?e.e(413).then(e.bind(e,74110)):e.e(2093).then(e.bind(e,92703)))},{path:"/dashboards",component:(0,nn.Q)(()=>Promise.all([e.e(3153),e.e(4074)]).then(e.bind(e,18201)))},{path:"/dashboards/folder/new",roles:()=>A.contextSrv.evaluatePermission(()=>["Editor","Admin"],[X.AccessControlAction.FoldersCreate]),component:(0,nn.Q)(()=>e.e(8932).then(e.bind(e,65955)))},!l.default.featureToggles.nestedFolders&&{path:"/dashboards/f/:uid/:slug/permissions",component:l.default.rbacEnabled?(0,nn.Q)(()=>e.e(8431).then(e.bind(e,47895))):(0,nn.Q)(()=>e.e(8431).then(e.bind(e,30902)))},{path:"/dashboards/f/:uid/:slug/settings",component:(0,nn.Q)(()=>e.e(4827).then(e.bind(e,78106)))},{path:"/dashboards/f/:uid/:slug",component:(0,nn.Q)(()=>Promise.all([e.e(3153),e.e(4074)]).then(e.bind(e,18201)))},{path:"/dashboards/f/:uid",component:(0,nn.Q)(()=>Promise.all([e.e(3153),e.e(4074)]).then(e.bind(e,18201)))},{path:"/explore",pageClass:"page-explore",roles:()=>A.contextSrv.evaluatePermission(()=>l.default.viewersCanEdit?[]:["Editor","Admin"],[X.AccessControlAction.DataSourcesExplore]),component:(0,nn.Q)(()=>l.default.exploreEnabled?Promise.all([e.e(1109),e.e(9734),e.e(2455),e.e(9782)]).then(e.bind(e,66119)):e.e(172).then(e.bind(e,65700)))},{path:"/apps",component:()=>t.createElement(K,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>t.createElement(K,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>t.createElement(K,{navId:"monitoring"})},{path:"/admin/general",component:()=>t.createElement(K,{navId:"admin/general"})},{path:"/admin/plugins",component:()=>t.createElement(K,{navId:"admin/plugins"})},{path:"/admin/access",component:()=>t.createElement(K,{navId:"admin/access"})},{path:"/org",component:(0,nn.Q)(()=>e.e(529).then(e.bind(e,832)))},{path:"/org/new",component:(0,nn.Q)(()=>e.e(950).then(e.bind(e,93246)))},{path:"/org/users",component:(0,nn.Q)(()=>e.e(8039).then(e.bind(e,27932)))},{path:"/org/users/invite",component:(0,nn.Q)(()=>e.e(7707).then(e.bind(e,87436)))},{path:"/org/apikeys",roles:()=>A.contextSrv.evaluatePermission(()=>["Admin"],[X.AccessControlAction.ActionAPIKeysRead]),component:(0,nn.Q)(()=>e.e(3082).then(e.bind(e,13464)))},{path:"/org/serviceaccounts",roles:()=>A.contextSrv.evaluatePermission(()=>["Admin"],[X.AccessControlAction.ServiceAccountsRead,X.AccessControlAction.ServiceAccountsCreate]),component:(0,nn.Q)(()=>e.e(1337).then(e.bind(e,71911)))},{path:"/org/serviceaccounts/create",component:(0,nn.Q)(()=>e.e(9738).then(e.bind(e,43456)))},{path:"/org/serviceaccounts/:id",component:(0,nn.Q)(()=>e.e(687).then(e.bind(e,2552)))},{path:"/org/teams",roles:()=>A.contextSrv.evaluatePermission(()=>l.default.editorsCanAdmin?["Editor","Admin"]:["Admin"],[X.AccessControlAction.ActionTeamsRead,X.AccessControlAction.ActionTeamsCreate]),component:(0,nn.Q)(()=>e.e(9671).then(e.bind(e,42063)))},{path:"/org/teams/new",roles:()=>A.contextSrv.evaluatePermission(()=>l.default.editorsCanAdmin?["Editor","Admin"]:["Admin"],[X.AccessControlAction.ActionTeamsCreate]),component:(0,nn.Q)(()=>e.e(8715).then(e.bind(e,35451)))},{path:"/org/teams/edit/:id/:page?",roles:()=>A.contextSrv.evaluatePermission(()=>l.default.editorsCanAdmin?["Editor","Admin"]:["Admin"],[X.AccessControlAction.ActionTeamsRead,X.AccessControlAction.ActionTeamsCreate]),component:(0,nn.Q)(()=>e.e(8612).then(e.bind(e,99085)))},{path:"/admin/authentication",roles:()=>A.contextSrv.evaluatePermission(()=>["Admin","ServerAdmin"],[X.AccessControlAction.SettingsWrite]),component:l.default.licenseInfo.enabledFeatures?.saml?(0,nn.Q)(()=>e.e(8741).then(e.bind(e,22281))):()=>t.createElement(n.l_,{to:"/admin"})},{path:"/admin",component:()=>t.createElement(K,{navId:"cfg"})},{path:"/admin/access",component:()=>t.createElement(K,{navId:"admin/access"})},{path:"/admin/config",component:()=>t.createElement(K,{navId:"admin/config"})},{path:"/admin/settings",component:(0,nn.Q)(()=>e.e(9603).then(e.bind(e,903)))},{path:"/admin/upgrading",component:(0,nn.Q)(()=>Promise.resolve().then(e.bind(e,27951)))},{path:"/admin/users",component:(0,nn.Q)(()=>e.e(7497).then(e.bind(e,2025)))},{path:"/admin/users/create",component:(0,nn.Q)(()=>e.e(2508).then(e.bind(e,13658)))},{path:"/admin/users/edit/:id",component:xe},{path:"/admin/orgs",component:(0,nn.Q)(()=>e.e(3798).then(e.bind(e,40174)))},{path:"/admin/orgs/edit/:id",component:(0,nn.Q)(()=>e.e(2721).then(e.bind(e,28911)))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:(0,nn.Q)(()=>e.e(7675).then(e.bind(e,60754)))},{path:"/admin/stats",component:(0,nn.Q)(()=>Promise.resolve().then(e.bind(e,68555)))},{path:"/admin/authentication/ldap",component:Cn},{path:"/login",component:O,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:(0,nn.Q)(()=>e.e(7429).then(e.bind(e,47637))),chromeless:!0},{path:"/verify",component:l.default.verifyEmailEnabled?(0,nn.Q)(()=>e.e(6875).then(e.bind(e,16875))):()=>t.createElement(n.l_,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:l.default.disableUserSignUp?()=>t.createElement(n.l_,{to:"/login"}):(0,nn.Q)(()=>e.e(7909).then(e.bind(e,97909))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:(0,nn.Q)(()=>e.e(133).then(e.bind(e,66837)))},{path:"/user/password/reset",component:(0,nn.Q)(()=>e.e(6848).then(e.bind(e,94407))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:(0,nn.Q)(()=>e.e(5295).then(e.bind(e,55177)))},{path:"/playlists",component:(0,nn.Q)(()=>e.e(9218).then(e.bind(e,34032)))},{path:"/playlists/play/:uid",component:(0,nn.Q)(()=>e.e(3090).then(e.bind(e,13117)))},{path:"/playlists/new",component:(0,nn.Q)(()=>e.e(9975).then(e.bind(e,23126)))},{path:"/playlists/edit/:uid",component:(0,nn.Q)(()=>e.e(2341).then(e.bind(e,79485)))},{path:"/sandbox/benchmarks",component:(0,nn.Q)(()=>e.e(4908).then(e.bind(e,6625)))},{path:"/sandbox/test",component:(0,nn.Q)(()=>Promise.all([e.e(1863),e.e(8595)]).then(e.bind(e,66617)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:(0,nn.Q)(l.default.featureToggles.nestedFolders?()=>Promise.all([e.e(9427),e.e(3778)]).then(e.bind(e,36780)):()=>Promise.all([e.e(9427),e.e(3778)]).then(e.bind(e,28450)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>A.contextSrv.evaluatePermission(()=>["Viewer","Editor","Admin"],[X.AccessControlAction.AlertingRuleRead]),component:(0,nn.Q)(l.default.featureToggles.nestedFolders?()=>e.e(1324).then(e.bind(e,48493)):()=>e.e(1324).then(e.bind(e,81124)))},{path:"/library-panels",component:(0,nn.Q)(()=>Promise.all([e.e(9427),e.e(7878)]).then(e.bind(e,97589)))},{path:"/notifications",component:(0,nn.Q)(()=>e.e(743).then(e.bind(e,64270)))},...Sa(),...it(),...ca(),...Gt(),...$n(),...Da,...kn(),...sn(),...Fn(),{path:"/*",component:k}].filter(i.fQ)}function ca(Yt=l.default){return Yt.supportBundlesEnabled?[{path:"/support-bundles",component:(0,nn.Q)(()=>e.e(9939).then(e.bind(e,76202)))},{path:"/support-bundles/create",component:(0,nn.Q)(()=>e.e(539).then(e.bind(e,98824)))}]:[]}function Sa(Yt=l.default){return Yt.featureToggles.scenes?[{path:"/scenes",component:(0,nn.Q)(()=>Promise.all([e.e(3069),e.e(207)]).then(e.bind(e,41287)))},{path:"/scenes/dashboard/:uid",component:(0,nn.Q)(()=>Promise.all([e.e(3069),e.e(207)]).then(e.bind(e,89813)))},{path:"/scenes/grafana-monitoring",exact:!1,component:(0,nn.Q)(()=>Promise.all([e.e(3069),e.e(207)]).then(e.bind(e,12808)))},{path:"/scenes/:name",component:(0,nn.Q)(()=>Promise.all([e.e(3069),e.e(207)]).then(e.bind(e,55509)))}]:[]}},3008:(j,I,e)=>{"use strict";e.d(I,{U:()=>A,x:()=>H});var t=e(34099),n=e(41938),i=e(67572),s=e(39705),r=e(34139),m=e(33199),d=e(4021),o=e(78467);const l={navBarTree:o.V4,navIndex:r.G4,appNotifications:d.VW};var a=e(90805),g=e(64216),c=e(59273),h=e(4242),f=e(82880),b=e(45743),v=e(10974),y=e(11676),E=e(29739),C=e(62225),u=e(67198),D=e(91399),P=e(73796),S=e(47875),x=e(6752),M=e(83341),R=e(21502),O=e(26271),T=e(96444),U=e(17632),L=e(1941),V=e(16881),w=e(92071);const K={...l,...g.ZP,...T.ZP,...c.ZP,...C.ZP,...v.ZP,...E.ZP,...y.ZP,...U.ZP,...R.ZP,...M.ZP,...u.ZP,...P.ZP,...f.ZP,...a.ZP,...D.ZP,...b.ZP,...S.ZP,...L.ZP,...O.ZP,...h.ZP,plugins:x.I6,[V.C.reducerPath]:V.C.reducer,[s.Rh.reducerPath]:s.Rh.reducer,[i.Zi.reducerPath]:i.Zi.reducer},B={},W=Q=>{Object.assign(B,Q)},_=()=>{const Q=(0,m.combineReducers)({...K,...B});return(X,te)=>{if(te.type!==w.e.type)return Q(X,te);const{cleanupAction:oe}=te.payload;return oe(X),Q(X,te)}};var k=e(84749);function A(Q){W(Q)}const z=(0,t.e)();function H(Q){const X=(0,t.xC)({reducer:_(),middleware:te=>te({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(z.middleware,V.C.middleware,s.Rh.middleware,i.Zi.middleware),devTools:!1,preloadedState:{navIndex:(0,r.Cu)(),...Q}});return(0,n.sj)(X.dispatch),(0,k.PQ)(X),X}},84749:(j,I,e)=>{"use strict";e.d(I,{PQ:()=>i,WI:()=>r,h:()=>n,y0:()=>s});var t=e(1941);let n;function i(m){n=m}function s(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function r(m){if(!(!n||!n.getState))return n.dispatch(m)}},43533:(j,I,e)=>{"use strict";e.d(I,{B5:()=>t.B,BL:()=>l,V5:()=>i,bf:()=>s,eL:()=>g,hw:()=>n,n8:()=>r,nl:()=>o,pC:()=>d,vT:()=>a,zV:()=>m});var t=e(50686),n=(c=>(c[c.Admin=4]="Admin",c[c.Editor=2]="Editor",c[c.Member=0]="Member",c[c.Viewer=1]="Viewer",c))(n||{}),i=(c=>(c[c.View=1]="View",c[c.Edit=2]="Edit",c[c.Admin=4]="Admin",c))(i||{}),s=(c=>(c.View="View",c.Edit="Edit",c.Admin="Admin",c))(s||{}),r=(c=>(c.Folder="dash-folder",c.Dashboard="dash-db",c.AlertFolder="dash-folder-alerting",c))(r||{}),m=(c=>(c[c.Query=1]="Query",c[c.Admin=2]="Admin",c))(m||{}),d=(c=>(c.Team="Team",c.User="User",c.Viewer="Viewer",c.Editor="Editor",c))(d||{});const o=[{value:1,label:"Query",description:"Can query data source."}],l=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],a=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],g=[{value:0,label:"Member",description:"Is team member"},{value:4,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},26938:()=>{"use strict"},72495:()=>{"use strict"},23006:()=>{"use strict"},84396:()=>{"use strict"},43620:(j,I,e)=>{"use strict";e.d(I,{Dn:()=>P,Eb:()=>C,GL:()=>d,GT:()=>h,Im:()=>v,Jd:()=>x,OW:()=>S,QI:()=>E,Qt:()=>y,RB:()=>R,VJ:()=>D,Wj:()=>a,Xw:()=>l,Yr:()=>T,_B:()=>g,_z:()=>f,hS:()=>c,le:()=>u,nq:()=>r,p8:()=>b,pO:()=>o,xF:()=>O,xt:()=>m,z:()=>M});var t=e(74817),n=e(96509);const i=(0,t.X)("ds-request-response"),s=(0,t.X)("ds-request-error"),r=(0,t.X)("template-variable-value-updated"),m=(0,t.X)("graph-click"),d=(0,t.X)("threshold-changed");class o extends n.m{}o.type="panel-queries-changed";class l extends n.m{}l.type="panel-transformations-changed";class a extends n.m{}a.type="panels-options-changed";class g extends n.m{}g.type="dashboard-panels-changed";class c extends n.m{}c.type="dashboard-meta-changed";class h extends n.m{}h.type="panel-directive-ready";class f extends n.m{}f.type="render";class b extends n.R{}b.type="zoom-out";var v=(U=>(U[U.Left=-1]="Left",U[U.Right=1]="Right",U))(v||{});class y extends n.R{}y.type="shift-time";class E extends n.R{}E.type="absolute-time";class C extends n.R{}C.type="remove-panel";class u extends n.R{}u.type="show-modal";class D extends n.R{}D.type="show-confirm-modal";class P extends n.R{}P.type="show-react-modal";class S extends n.m{}S.type="hide-modal";class x extends n.m{}x.type="dashboard-saved";class M extends n.R{}M.type="annotation-query-started";class R extends n.R{}R.type="annotation-query-finished";class O extends n.R{}O.type="panel-edit-started";class T extends n.R{}T.type="panel-edit-finished"},21784:(j,I,e)=>{"use strict";e.d(I,{f0:()=>t,zN:()=>i,zQ:()=>n});const t=["lines","bars","points","stacked_lines","stacked_bars"];var n=(s=>(s.table="table",s.raw="raw",s))(n||{});const i=["table","raw"]},45151:()=>{"use strict"},18771:(j,I,e)=>{"use strict";e.d(I,{AccessControlAction:()=>P,AclTarget:()=>d.pC,AppNotificationSeverity:()=>f,AppNotificationTimeout:()=>b,CoreEvents:()=>S,DashboardInitPhase:()=>r,DashboardRoutes:()=>s,DataSourcePermissionLevel:()=>d.zV,EXPLORE_GRAPH_STYLES:()=>y.f0,KioskMode:()=>m,OrgRole:()=>d.B5,PermissionLevelString:()=>d.bf,SearchQueryType:()=>d.n8,ServiceAccountStateFilter:()=>a,TABLE_RESULTS_STYLE:()=>y.zQ,TeamPermissionLevel:()=>d.hw,addListener:()=>E.NH,createAsyncThunk:()=>E.hg,dataSourceAclLevels:()=>d.nl,teamsPermissionLevels:()=>d.eL,timeoutMap:()=>v,useDispatch:()=>E.I0,useSelector:()=>E.v9});var t=e(26938),n=e(73371),i=e(45151),s=(x=>(x.Home="home-dashboard",x.New="new-dashboard",x.Normal="normal-dashboard",x.Path="path-dashboard",x.Scripted="scripted-dashboard",x.Public="public-dashboard",x.Embedded="embedded-dashboard",x))(s||{}),r=(x=>(x.NotStarted="Not started",x.Fetching="Fetching",x.Services="Services",x.Failed="Failed",x.Completed="Completed",x))(r||{}),m=(x=>(x.TV="tv",x.Full="full",x))(m||{}),d=e(43533),o=e(72495),l=e(40133),a=(x=>(x.All="All",x.WithExpiredTokens="WithExpiredTokens",x.Disabled="Disabled",x))(a||{}),g=e(84396),c=e(57597),h=e(73738),f=(x=>(x.Success="success",x.Warning="warning",x.Error="error",x.Info="info",x))(f||{}),b=(x=>(x[x.Success=3e3]="Success",x[x.Warning=5e3]="Warning",x[x.Error=7e3]="Error",x))(b||{});const v={success:3e3,warning:5e3,error:7e3,info:3e3};var y=e(21784),E=e(29891),C=e(76622),u=e(23006),D=e(73866),P=(x=>(x.UsersRead="users:read",x.UsersWrite="users:write",x.UsersAuthTokenList="users.authtoken:read",x.UsersAuthTokenUpdate="users.authtoken:write",x.UsersPasswordUpdate="users.password:write",x.UsersDelete="users:delete",x.UsersCreate="users:create",x.UsersEnable="users:enable",x.UsersDisable="users:disable",x.UsersPermissionsUpdate="users.permissions:write",x.UsersLogout="users:logout",x.UsersQuotasList="users.quotas:read",x.UsersQuotasUpdate="users.quotas:write",x.ServiceAccountsRead="serviceaccounts:read",x.ServiceAccountsCreate="serviceaccounts:create",x.ServiceAccountsWrite="serviceaccounts:write",x.ServiceAccountsDelete="serviceaccounts:delete",x.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",x.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",x.OrgsRead="orgs:read",x.OrgsPreferencesRead="orgs.preferences:read",x.OrgsWrite="orgs:write",x.OrgsPreferencesWrite="orgs.preferences:write",x.OrgsCreate="orgs:create",x.OrgsDelete="orgs:delete",x.OrgUsersRead="org.users:read",x.OrgUsersAdd="org.users:add",x.OrgUsersRemove="org.users:remove",x.OrgUsersWrite="org.users:write",x.LDAPUsersRead="ldap.user:read",x.LDAPUsersSync="ldap.user:sync",x.LDAPStatusRead="ldap.status:read",x.DataSourcesExplore="datasources:explore",x.DataSourcesRead="datasources:read",x.DataSourcesCreate="datasources:create",x.DataSourcesWrite="datasources:write",x.DataSourcesDelete="datasources:delete",x.DataSourcesPermissionsRead="datasources.permissions:read",x.DataSourcesCachingRead="datasources.caching:read",x.DataSourcesInsightsRead="datasources.insights:read",x.ActionServerStatsRead="server.stats:read",x.ActionTeamsCreate="teams:create",x.ActionTeamsDelete="teams:delete",x.ActionTeamsRead="teams:read",x.ActionTeamsWrite="teams:write",x.ActionTeamsPermissionsRead="teams.permissions:read",x.ActionTeamsPermissionsWrite="teams.permissions:write",x.ActionRolesList="roles:read",x.ActionTeamsRolesList="teams.roles:read",x.ActionTeamsRolesAdd="teams.roles:add",x.ActionTeamsRolesRemove="teams.roles:remove",x.ActionUserRolesList="users.roles:read",x.ActionUserRolesAdd="users.roles:add",x.ActionUserRolesRemove="users.roles:remove",x.DashboardsRead="dashboards:read",x.DashboardsWrite="dashboards:write",x.DashboardsDelete="dashboards:delete",x.DashboardsCreate="dashboards:create",x.DashboardsPermissionsRead="dashboards.permissions:read",x.DashboardsPermissionsWrite="dashboards.permissions:write",x.DashboardsPublicWrite="dashboards.public:write",x.FoldersRead="folders:read",x.FoldersWrite="folders:write",x.FoldersDelete="folders:delete",x.FoldersCreate="folders:create",x.FoldersPermissionsRead="folders.permissions:read",x.FoldersPermissionsWrite="folders.permissions:write",x.ActionSupportBundlesCreate="support.bundles:create",x.ActionSupportBundlesRead="support.bundles:read",x.ActionSupportBundlesDelete="support.bundles:delete",x.AlertingRuleCreate="alert.rules:create",x.AlertingRuleRead="alert.rules:read",x.AlertingRuleUpdate="alert.rules:write",x.AlertingRuleDelete="alert.rules:delete",x.AlertingInstanceCreate="alert.instances:create",x.AlertingInstanceUpdate="alert.instances:write",x.AlertingInstanceRead="alert.instances:read",x.AlertingNotificationsRead="alert.notifications:read",x.AlertingNotificationsWrite="alert.notifications:write",x.AlertingRuleExternalWrite="alert.rules.external:write",x.AlertingRuleExternalRead="alert.rules.external:read",x.AlertingInstancesExternalWrite="alert.instances.external:write",x.AlertingInstancesExternalRead="alert.instances.external:read",x.AlertingNotificationsExternalWrite="alert.notifications.external:write",x.AlertingNotificationsExternalRead="alert.notifications.external:read",x.AlertingProvisioningRead="alert.provisioning:read",x.AlertingProvisioningWrite="alert.provisioning:write",x.ActionAPIKeysRead="apikeys:read",x.ActionAPIKeysCreate="apikeys:create",x.ActionAPIKeysDelete="apikeys:delete",x.PluginsInstall="plugins:install",x.PluginsWrite="plugins:write",x.SettingsRead="settings:read",x.SettingsWrite="settings:write",x))(P||{}),S=e(43620)},76622:()=>{"use strict"},73371:()=>{"use strict"},73738:()=>{"use strict"},57597:()=>{"use strict"},73866:()=>{"use strict"},29891:(j,I,e)=>{"use strict";e.d(I,{I0:()=>i,NH:()=>m,hg:()=>r,v9:()=>s});var t=e(34099),n=e(27173);const i=n.useDispatch,s=n.useSelector,r=(d,o,l)=>(0,t.hg)(d,o,l),m=t.NH},7641:(j,I,e)=>{"use strict";e.d(I,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n.FlameGraph="Flame graph",n))(t||{})},18447:(j,I,e)=>{"use strict";e.d(I,{ED:()=>m,I9:()=>i,T8:()=>o,Yb:()=>s,bj:()=>n,g0:()=>l,pz:()=>d,x_:()=>t});var t=(a=>(a.Firing="firing",a.Inactive="inactive",a.Pending="pending",a))(t||{}),n=(a=>(a.Normal="Normal",a.Alerting="Alerting",a.Pending="Pending",a.NoData="NoData",a.Error="Error",a))(n||{});function i(a){return Object.values(t).includes(a)}function s(a){return Object.values(n).some(g=>g===a)}function r(a){return a!==null&&typeof a<"u"&&!Object.values(t).includes(a)}function m(a){return r(a)?a.split(" ")[0]:a}var d=(a=>(a.Alerting="alerting",a.Recording="recording",a))(d||{}),o=(a=>(a.Cortex="Cortex",a.Mimir="Mimir",a.Prometheus="Prometheus",a.Thanos="Thanos",a))(o||{}),l=(a=>(a.Alerting="Alerting",a.NoData="NoData",a.KeepLastState="KeepLastState",a.OK="OK",a.Error="Error",a))(l||{})},68093:(j,I,e)=>{"use strict";e.d(I,{P:()=>s,j:()=>n});var t=e(18447);function n(r,m){return(0,t.ED)(r.state)===m}var i=(r=>(r.Firing="firing",r))(i||{}),s=(r=>(r.Alerting="alerting",r.Pending="pending",r.Normal="inactive",r.NoData="nodata",r.Error="error",r))(s||{})},40133:()=>{"use strict"},23932:j=>{const I="    ";function e(s){let r="";return s&&Object.keys(s).forEach(function(m){r+=m+":"+s[m]+";"}),r}function t(s){function r(d){return'class="'+d+'"'}function m(d){return'style="'+e(s["."+d])+'"'}return s?m:r}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function i(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}j.exports=function(s,r){let m="";const d=t(r);let o=function(a,g,c,h){if(!a.length)return g+" "+c;let f=g+`
`;return m+=I,a.forEach(function(b,v){f+=m+h(b)+(v<a.length-1?",":"")+`
`}),m=m.slice(0,-I.length),f+m+c};function l(a){if(a===void 0)return"";switch(n(a)){case"boolean":return"<span "+d("json-markup-bool")+">"+a+"</span>";case"number":return"<span "+d("json-markup-number")+">"+a+"</span>";case"date":return'<span class="json-markup-string">"'+i(a.toISOString())+'"</span>';case"null":return"<span "+d("json-markup-null")+">null</span>";case"string":return"<span "+d("json-markup-string")+'>"'+i(a.replace(/\n/g,`
`+m))+'"</span>';case"link":return"<span "+d("json-markup-string")+'>"<a href="'+encodeURI(a)+'">'+i(a)+'</a>"</span>';case"array":return o(a,"[","]",l);case"object":const g=Object.keys(a).filter(function(c){return a[c]!==void 0});return o(g,"{","}",function(c){return"<span "+d("json-markup-key")+'>"'+i(c)+'":</span> '+l(a[c])})}return""}return"<div "+d("json-markup")+">"+l(s)+"</div>"}},26189:()=>{(function(j){var I={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(m){if(!m)n.x=-1;else{var d=t.p2c(m);n.x=Math.max(0,Math.min(d.left,t.width())),n.y=Math.max(0,Math.min(d.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(m){m&&t.setCrosshair(m),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function i(r){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(r){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var m=t.offset();n.x=Math.max(0,Math.min(r.pageX-m.left,t.width())),n.y=Math.max(0,Math.min(r.pageY-m.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(r,m){r.getOptions().crosshair.mode&&(m.mouseout(i),m.mousemove(s))}),t.hooks.drawOverlay.push(function(r,m){var d=r.getOptions().crosshair;if(d.mode){var o=r.getPlotOffset();if(m.save(),m.translate(o.left,o.top),n.x!=-1){var l=r.getOptions().crosshair.lineWidth%2?.5:0;if(m.strokeStyle=d.color,m.lineWidth=d.lineWidth,m.lineJoin="round",m.beginPath(),d.mode.indexOf("x")!=-1){var a=Math.floor(n.x)+l;m.moveTo(a,0),m.lineTo(a,r.height())}if(d.mode.indexOf("y")!=-1){var g=Math.floor(n.y)+l;m.moveTo(0,g),m.lineTo(r.width(),g)}m.stroke()}m.restore()}}),t.hooks.shutdown.push(function(r,m){m.unbind("mouseout",i),m.unbind("mousemove",s)})}j.plot.plugins.push({init:e,options:I,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(j){function I(e){e.hooks.processDatapoints.push(function(t,n,i){n.dashes.show&&t.hooks.draw.push(function(s,r){var m=s.getPlotOffset(),d=n.xaxis,o=n.yaxis;function l(h,f){var b=i.points,v=i.pointsize,y=null,E=null,C=0,u=!0,D,P;n.dashes.dashLength[0]?(D=n.dashes.dashLength[0],n.dashes.dashLength[1]?P=n.dashes.dashLength[1]:P=D):P=D=n.dashes.dashLength,r.beginPath();for(var S=v;S<b.length;S+=v){let B=function(W){var _=Math.sqrt(Math.pow(L-T,2)+Math.pow(V-U,2));if(_<=W)return{deltaX:L-T,deltaY:V-U,distance:_,remainder:W-_};var k=L>T?1:-1,A=V>U?1:-1;return{deltaX:k*Math.sqrt(Math.pow(W,2)/(1+Math.pow((V-U)/(L-T),2))),deltaY:A*Math.sqrt(Math.pow(W,2)-Math.pow(W,2)/(1+Math.pow((V-U)/(L-T),2))),distance:W,remainder:0}};var K=B,x=b[S-v],M=b[S-v+1],R=b[S],O=b[S+1];if(!(x==null||R==null)){if(M<=O&&M<o.min){if(O<o.min)continue;x=(o.min-M)/(O-M)*(R-x)+x,M=o.min}else if(O<=M&&O<o.min){if(M<o.min)continue;R=(o.min-M)/(O-M)*(R-x)+x,O=o.min}if(M>=O&&M>o.max){if(O>o.max)continue;x=(o.max-M)/(O-M)*(R-x)+x,M=o.max}else if(O>=M&&O>o.max){if(M>o.max)continue;R=(o.max-M)/(O-M)*(R-x)+x,O=o.max}if(x<=R&&x<d.min){if(R<d.min)continue;M=(d.min-x)/(R-x)*(O-M)+M,x=d.min}else if(R<=x&&R<d.min){if(x<d.min)continue;O=(d.min-x)/(R-x)*(O-M)+M,R=d.min}if(x>=R&&x>d.max){if(R>d.max)continue;M=(d.max-x)/(R-x)*(O-M)+M,x=d.max}else if(R>=x&&R>d.max){if(x>d.max)continue;O=(d.max-x)/(R-x)*(O-M)+M,R=d.max}(x!=y||M!=E)&&r.moveTo(d.p2c(x)+h,o.p2c(M)+f);var T=d.p2c(x)+h,U=o.p2c(M)+f,L=d.p2c(R)+h,V=o.p2c(O)+f,w;do w=B(C>0?C:u?D:P),(w.deltaX!=0||w.deltaY!=0)&&(u?r.lineTo(T+w.deltaX,U+w.deltaY):r.moveTo(T+w.deltaX,U+w.deltaY)),u=!u,C=w.remainder,T+=w.deltaX,U+=w.deltaY;while(w.distance>0);y=R,E=O}}r.stroke()}r.save(),r.translate(m.left,m.top),r.lineJoin="round";var a=n.dashes.lineWidth,g=n.shadowSize;if(a>0&&g>0){r.lineWidth=g,r.strokeStyle="rgba(0,0,0,0.1)";var c=Math.PI/18;l(Math.sin(c)*(a/2+g/2),Math.cos(c)*(a/2+g/2)),r.lineWidth=g/2,l(Math.sin(c)*(a/2+g/4),Math.cos(c)*(a/2+g/4))}r.lineWidth=a,r.strokeStyle=n.color,a>0&&l(0,0),r.restore()})})}j.plot.plugins.push({init:I,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(j){"use strict";var I={series:{fillBelowTo:null}};function e(t){function n(r,m){var d;for(d=0;d<m.length;++d)if(m[d].id===r.fillBelowTo)return m[d];return null}function i(r,m,d,o,l,a,g,c){var h,f,b,v,y,E;return h=d-r,f=o-m,b=g-l,v=c-a,y=(-f*(r-l)+h*(m-a))/(-b*f+h*v),E=(b*(m-a)-v*(r-l))/(-b*f+h*v),y>=0&&y<=1&&E>=0&&E<=1?[r+E*h,m+E*f]:null}function s(r,m,d){if(d.fillBelowTo===null)return;var o,l,a,g,c,h,f;function b(P,S){m.beginPath(),m.moveTo(d.xaxis.p2c(P)+h.left,d.yaxis.p2c(S)+h.top)}function v(){m.closePath(),m.fill()}function y(){if(a.length/l!==c.length/g)return console.error("Refusing to graph inconsistent number of points"),!1;var P;for(P=0;P<a.length/l;P++)if(a[P*l]!==null&&c[P*g]!==null&&a[P*l]!==c[P*g])return console.error("Refusing to graph points without matching value"),!1;return!0}function E(P,S){console.assert(S>P,"expects the end index to be greater than the start index");var x=P===0||a[P-1]===null||c[P-1]===null,M=!1,R,O;for(R=P;R<S;R++)if(a[R*l+1]===null||c[R*l+1]===null)M=!1,x=!0;else if(a[R*l+1]===c[R*g+1])M=!0,x=!1;else if(a[R*l+1]>c[R*g+1]){x?b(a[R*l],a[R*l+1]):M?b(a[(R-1)*l],a[(R-1)*l+1]):(O=C(R),b(O[0],O[1])),D(R,S);return}else x=!1,M=!1}function C(P){console.assert(P>0,"expects the second point in the series line segment");var S,x;for(S=1;S<c.length/g;S++)if(x=i(a[(P-1)*l],a[(P-1)*l+1],a[P*l],a[P*l+1],c[(S-1)*g],c[(S-1)*g+1],c[S*g],c[S*g+1]),x!==null)return x;console.error("intersectionPoint() should only be called when an intersection happens")}function u(P,S){console.assert(P>=S,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var x;for(x=P;x>=S;x--)m.lineTo(o.xaxis.p2c(c[x*g])+h.left,o.yaxis.p2c(c[x*g+1])+h.top);v()}function D(P,S){console.assert(P<=S,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var x,M;for(x=P;x<S;x++)if(a[x*l+1]===null&&x>P){u(x-1,P),E(x,S);return}else if(a[x*l+1]===c[x*g+1]){u(x,P),E(x,S);return}else if(a[x*l+1]<c[x*g+1]){M=C(x),m.lineTo(d.xaxis.p2c(M[0])+h.left,d.yaxis.p2c(M[1])+h.top),u(x,P),E(x,S);return}else m.lineTo(d.xaxis.p2c(a[x*l])+h.left,d.yaxis.p2c(a[x*l+1])+h.top);u(S,P)}o=n(d,r.getData()),o&&(l=d.datapoints.pointsize,a=d.datapoints.points,g=o.datapoints.pointsize,c=o.datapoints.points,h=r.getPlotOffset(),y()&&(f=j.color.parse(d.color),f.a=.4,f.normalize(),m.fillStyle=f.toString(),E(0,a.length/l)))}t.hooks.drawSeries.push(s)}j.plot.plugins.push({init:e,options:I,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(j){var I=function(){var d,o,l,a,g,c,h=function(P,S){d=S,o=P.getPlaceholder(),l=P.getOptions(),a=l.series.gauges,g=P.getData(),c=e(a.debug)};h.prototype.calculateLayout=function(){var P=o.width(),S=o.height(),x=Math.min(g.length,a.layout.columns),M=Math.ceil(g.length/x),R=a.layout.margin,O=a.layout.hMargin,T=a.layout.vMargin,U=(P-R*2-O*(x-1))/x,L=(S-R*2-T*(M-1))/M;if(a.layout.square){var V=Math.min(U,L);U=V,L=V}f(a,U);var w=a.cell.margin,K=0,B=0;a.label.show&&(K=a.label.margin,B=a.label.font.size);var W=0,_=0;a.value.show&&(W=a.value.margin,_=a.value.font.size);var k=0;a.threshold.show&&(k=a.threshold.width);var A=0,z=0;a.threshold.label.show&&(A=a.threshold.label.margin,z=a.threshold.label.font.size);for(var H=U/2-w-k-A*2-z,Q=a.gauge.startAngle,X=a.gauge.endAngle,te=(X-Q)/100,oe=-1,Z=Q;Z<X;Z+=te)oe=Math.max(oe,Math.sin(i(Z)));oe=Math.max(oe,Math.sin(i(X)));var le=(L-w*2-K*2-B)/(1+oe);le*oe<W+_/2&&(le=L-w*2-K*2-B-W-_/2);var ce=le-A*2-z-k,q=Math.min(H,ce),ne=a.gauge.width;ne>=q&&(ne=Math.max(3,q/3));var pe=A*2+z+k+q,re=Math.max(pe*(1+oe),pe+W+_/2);return{canvasWidth:P,canvasHeight:S,margin:R,hMargin:O,vMargin:T,columns:x,rows:M,cellWidth:U,cellHeight:L,cellMargin:w,labelMargin:K,labelFontSize:B,valueMargin:W,valueFontSize:_,width:ne,radius:q,thresholdWidth:k,thresholdLabelMargin:A,thresholdLabelFontSize:z,gaugeOuterHeight:re}};function f(P,S){P.gauge.width==="auto"&&(P.gauge.width=Math.max(5,S/8)),P.label.margin==="auto"&&(P.label.margin=Math.max(1,S/20)),P.label.font.size==="auto"&&(P.label.font.size=Math.max(5,S/8)),P.value.margin==="auto"&&(P.value.margin=Math.max(1,S/30)),P.value.font.size==="auto"&&(P.value.font.size=Math.max(5,S/9)),P.threshold.width==="auto"&&(P.threshold.width=Math.max(3,S/100)),P.threshold.label.margin==="auto"&&(P.threshold.label.margin=Math.max(3,S/40)),P.threshold.label.font.size==="auto"&&(P.threshold.label.font.size=Math.max(5,S/15))}h.prototype.calculateAutoValues=f,h.prototype.calculateCellLayout=function(P,S,x){var M=t(S.columns,x),R=n(S.columns,x),O=S.margin+(S.cellWidth+S.hMargin)*M,T=S.margin+(S.cellHeight+S.vMargin)*R,U=O+S.cellWidth/2,L=T+S.cellMargin+S.labelMargin*2+S.labelFontSize+S.thresholdWidth+S.thresholdLabelFontSize+S.thresholdLabelMargin*2+S.radius,V=S.cellHeight-S.cellMargin*2-S.labelMargin*2-S.labelFontSize-S.gaugeOuterHeight,w=0;return P.cell.vAlign==="middle"?w=V/2:P.cell.vAlign==="bottom"&&(w=V),L+=w,{col:M,row:R,x:O,y:T,offsetY:w,cellWidth:S.cellWidth,cellHeight:S.cellHeight,cellMargin:S.cellMargin,cx:U,cy:L}},h.prototype.drawBackground=function(P){a.frame.show&&(d.save(),d.strokeStyle=l.grid.borderColor,d.lineWidth=l.grid.borderWidth,d.strokeRect(0,0,P.canvasWidth,P.canvasHeight),l.grid.backgroundColor&&(d.fillStyle=l.grid.backgroundColor,d.fillRect(0,0,P.canvasWidth,P.canvasHeight)),d.restore())},h.prototype.drawCellBackground=function(P,S){d.save(),P.cell.border&&P.cell.border.show&&P.cell.border.color&&P.cell.border.width&&(d.strokeStyle=P.cell.border.color,d.lineWidth=P.cell.border.width,d.strokeRect(S.x,S.y,S.cellWidth,S.cellHeight)),P.cell.background&&P.cell.background.color&&(d.fillStyle=P.cell.background.color,d.fillRect(S.x,S.y,S.cellWidth,S.cellHeight)),d.restore()},h.prototype.drawGauge=function(P,S,x,M,R){var O=P.gauge.shadow.show?P.gauge.shadow.blur:0,T=y(P,R),U=b(P,S,R);C(x.cx,x.cy,S.radius,S.width,i(P.gauge.startAngle),i(P.gauge.endAngle),P.gauge.border.color,P.gauge.border.width,P.gauge.background.color,O),C(x.cx,x.cy,S.radius-1,S.width-2,i(U.a1),i(U.a2),T,1,T,O),P.gauge.neutralValue!=null&&v(P,S,x,T)};function b(P,S,x){let M={};var R=P.gauge.neutralValue;return R!=null?x<R?(M.a1=E(P,S,x),M.a2=E(P,S,R)):(M.a1=E(P,S,R),M.a2=E(P,S,x)):(M.a1=P.gauge.startAngle,M.a2=E(P,S,x)),M}function v(P,S,x,M){var R=(P.gauge.max-P.gauge.min)/600;s(d,x.cx,x.cy,S.radius-2,S.width-4,i(E(P,S,P.gauge.neutralValue-R)),i(E(P,S,P.gauge.neutralValue+R)),M,2,P.gauge.background.color)}function y(P,S){for(var x,M=0;M<P.threshold.values.length;M++){var R=P.threshold.values[M];if(x=R.color,S<R.value)break}return x}function E(P,S,x){var M=P.gauge.startAngle+(P.gauge.endAngle-P.gauge.startAngle)*((x-P.gauge.min)/(P.gauge.max-P.gauge.min));return M<P.gauge.startAngle?M=P.gauge.startAngle:M>P.gauge.endAngle&&(M=P.gauge.endAngle),M}h.prototype.drawThreshold=function(P,S,x){for(var M=P.gauge.startAngle,R=0;R<P.threshold.values.length;R++){var O=P.threshold.values[R];c1=O.color,a2=E(P,S,O.value),s(d,x.cx,x.cy,S.radius+S.thresholdWidth,S.thresholdWidth-2,i(M),i(a2),c1,1,c1),M=a2}};function C(P,S,x,M,R,O,T,U,L,V){R!==O&&(d.save(),s(d,P,S,x,M,R,O,T,U,L),V&&(s(d,P,S,x,M,R,O),d.clip(),d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=10,d.shadowColor="gray",s(d,P,S,x+1,M+2,R,O,T,1)),d.restore())}h.prototype.drawLable=function(P,S,x,M,R){D(x.cx,x.y+x.cellMargin+S.labelMargin+x.offsetY,"flotGaugeLabel"+M,P.label.formatter?P.label.formatter(R.label,R.data[0][1]):text,P.label)},h.prototype.drawValue=function(P,S,x,M,R){D(x.cx,x.cy-P.value.font.size/2,"flotGaugeValue"+M,P.value.formatter?P.value.formatter(R.label,R.data[0][1]):text,P.value)},h.prototype.drawThresholdValues=function(P,S,x,M){u(P,S,x,"Min"+M,P.gauge.min,P.gauge.startAngle),u(P,S,x,"Max"+M,P.gauge.max,P.gauge.endAngle);for(var R=0;R<P.threshold.values.length;R++){var O=P.threshold.values[R];if(O.value>P.gauge.min&&O.value<P.gauge.max){var T=E(P,S,O.value);u(P,S,x,M+"_"+R,O.value,T)}}var U=P.gauge.neutralValue;U!=null&&U>P.gauge.min&&U<P.gauge.max&&u(P,S,x,"Neutral"+M,U,E(P,S,U))};function u(P,S,x,M,R,O){D(x.cx+(S.thresholdLabelMargin+S.thresholdLabelFontSize/2+S.radius)*Math.cos(i(O)),x.cy+(S.thresholdLabelMargin+S.thresholdLabelFontSize/2+S.radius)*Math.sin(i(O)),"flotGaugeThresholdValue"+M,P.threshold.label.formatter?P.threshold.label.formatter(R):R,P.threshold.label,O)}function D(P,S,x,M,R,O){var T=j(o).find("#"+x),U=T.length;U||(T=j("<span></span>"),T.attr("id",x),T.attr("class","flot-temp-elem"),o.append(T)),T.css("position","absolute"),T.css("top",S+"px"),T.css("white-space","nowrap"),R.font.size&&T.css("font-size",R.font.size+"px"),R.font.family&&T.css("font-family",R.font.family),R.color&&T.css("color",R.color),R.background.color&&T.css("background-color",R.background.color),R.background.opacity&&T.css("opacity",R.background.opacity),T.text(M),T.css("left",P+"px"),T.css("left",parseInt(T.css("left"))-T.width()/2+"px"),!U&&O&&(T.css("top",parseInt(T.css("top"))-T.height()/2+"px"),T.css("transform","rotate("+(180*O+90)+"deg)"))}return h}();function e(d){return typeof Logger<"u"?new Logger(d):null}function t(d,o){return o%d}function n(d,o){return Math.floor(o/d)}function i(d){return d*Math.PI}function s(d,o,l,a,g,c,h,f,b,v){if(c!==h){var y=!1;d.save(),d.beginPath(),d.arc(o,l,a,c,h,y),d.lineTo(o+(a-g)*Math.cos(h),l+(a-g)*Math.sin(h)),d.arc(o,l,a-g,h,c,!y),d.closePath(),b&&(d.lineWidth=b),f&&(d.strokeStyle=f,d.stroke()),v&&(d.fillStyle=v,d.fill()),d.restore()}}function r(d){d.hooks.processOptions.push(function(o,l){var a=e(l.series.gauges.debug);l.series.gauges.show&&(l.grid.show=!1,l.legend.show=!1);var g=l.series.gauges.threshold.values;g.sort(function(c,h){return c.value<h.value?-1:c.value>h.value?1:0})}),d.hooks.draw.push(function(o,l){var a=o.getOptions(),g=a.series.gauges,c=e(g.debug);if(g.show){var h=o.getData();if(!(!h||!h.length)){var f=new I(o,l),b=f.calculateLayout();g.debug.layout,f.drawBackground(b);for(var v=0;v<h.length;v++){var y=h[v],E=j.extend({},g,y.gauges);y.gauges&&f.calculateAutoValues(E,b.cellWidth);var C=f.calculateCellLayout(E,b,v);f.drawCellBackground(E,C),E.debug.layout,E.label.show&&f.drawLable(E,b,C,v,y),f.drawGauge(E,b,C,y.label,y.data[0][1]),E.threshold.show&&f.drawThreshold(E,b,C),E.threshold.label.show&&f.drawThresholdValues(E,b,C,v),E.value.show&&f.drawValue(E,b,C,v,y)}}}})}var m={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(d,o){return d}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(d,o){return parseInt(o)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(d){return d}},values:[]}}}};j.plot.plugins.push({init:r,options:m,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(j){j.color={},j.color.make=function(e,t,n,i){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=i??1,s.add=function(r,m){for(var d=0;d<r.length;++d)s[r.charAt(d)]+=m;return s.normalize()},s.scale=function(r,m){for(var d=0;d<r.length;++d)s[r.charAt(d)]*=m;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function r(m,d,o){return d<m?m:d>o?o:d}return s.r=r(0,parseInt(s.r),255),s.g=r(0,parseInt(s.g),255),s.b=r(0,parseInt(s.b),255),s.a=r(0,s.a,1),s},s.clone=function(){return j.color.make(s.r,s.b,s.g,s.a)},s.normalize()},j.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!j.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),j.color.parse(n)},j.color.parse=function(e){var t,n=j.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var i=j.trim(e).toLowerCase();return i=="transparent"?n(255,255,255,0):(t=I[i]||[0,0,0],n(t[0],t[1],t[2]))};var I={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(j){var I=Object.prototype.hasOwnProperty;j.fn.detach||(j.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(i,s){var r=s.children("."+i)[0];if(r==null&&(r=document.createElement("canvas"),r.className=i,j(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var m=this.context=r.getContext("2d"),d=window.devicePixelRatio||1,o=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;this.pixelRatio=d/o,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(i,s){if(i<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+i+", height = "+s);var r=this.element,m=this.context,d=this.pixelRatio;this.width!=i&&(r.width=i*d,r.style.width=i+"px",this.width=i),this.height!=s&&(r.height=s*d,r.style.height=s+"px",this.height=s),m.restore(),m.save(),m.scale(d,d)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var i=this._textCache;for(var s in i)if(I.call(i,s)){var r=this.getTextLayer(s),m=i[s];r.hide();for(var d in m)if(I.call(m,d)){var o=m[d];for(var l in o)if(I.call(o,l)){for(var a=o[l].positions,g=0,c;c=a[g];g++)c.active?c.rendered||(r.append(c.element),c.rendered=!0):(a.splice(g--,1),c.rendered&&c.element.detach());a.length==0&&delete o[l]}}r.show()}},e.prototype.getTextLayer=function(i){var s=this.text[i];return s==null&&(this.textContainer==null&&(this.textContainer=j("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[i]=j("<div></div>").addClass(i).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(i,s,r,m,d){var o,l,a,g;if(s=""+s,typeof r=="object"?o=r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:o=r,l=this._textCache[i],l==null&&(l=this._textCache[i]={}),a=l[o],a==null&&(a=l[o]={}),g=a[s],g==null){var c=j("<div></div>").html(s).css({position:"absolute","max-width":d,top:-9999}).appendTo(this.getTextLayer(i));typeof r=="object"?c.css({font:o,color:r.color}):typeof r=="string"&&c.addClass(r),g=a[s]={element:c,positions:[]};var h=this._textSizeCache[s];h?(g.width=h.width,g.height=h.height):(g.width=c.outerWidth(!0),g.height=c.outerHeight(!0),this._textSizeCache[s]={width:g.width,height:g.height}),c.detach()}return g},e.prototype.addText=function(i,s,r,m,d,o,l,a,g){var c=this.getTextInfo(i,m,d,o,l),h=c.positions;a=="center"?s-=c.width/2:a=="right"&&(s-=c.width),g=="middle"?r-=c.height/2:g=="bottom"&&(r-=c.height);for(var f=0,b;b=h[f];f++)if(b.x==s&&b.y==r){b.active=!0;return}b={active:!0,rendered:!1,element:h.length?c.element.clone():c.element,x:s,y:r},h.push(b),b.element.css({top:Math.round(r),left:Math.round(s),"text-align":a})},e.prototype.removeText=function(i,s,r,m,d,o){if(m==null){var l=this._textCache[i];if(l!=null){for(var a in l)if(I.call(l,a)){var g=l[a];for(var c in g)if(I.call(g,c))for(var h=g[c].positions,f=0,b;b=h[f];f++)b.active=!1}}}else for(var h=this.getTextInfo(i,m,d,o).positions,f=0,b;b=h[f];f++)b.x==s&&b.y==r&&(b.active=!1)};function t(i,s,r,m){var d=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},l=null,a=null,g=null,c=null,h=null,f=[],b=[],v={left:0,right:0,top:0,bottom:0},y=0,E=0,C={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},u=this;u.setData=x,u.setupGrid=Q,u.draw=ce,u.getPlaceholder=function(){return i},u.getCanvas=function(){return l.element},u.getPlotOffset=function(){return v},u.width=function(){return y},u.height=function(){return E},u.offset=function(){var ge=g.offset();return ge.left+=v.left,ge.top+=v.top,ge},u.getData=function(){return d},u.getAxes=function(){var ge={},Be;return j.each(f.concat(b),function(Le,he){he&&(ge[he.direction+(he.n!=1?he.n:"")+"axis"]=he)}),ge},u.getXAxes=function(){return f},u.getYAxes=function(){return b},u.c2p=T,u.p2c=U,u.getOptions=function(){return o},u.highlight=Tt,u.unhighlight=Nt,u.triggerRedrawOverlay=st,u.pointOffset=function(ge){return{left:parseInt(f[R(ge,"x")-1].p2c(+ge.x)+v.left,10),top:parseInt(b[R(ge,"y")-1].p2c(+ge.y)+v.top,10)}},u.shutdown=W,u.destroy=function(){W(),i.removeData("plot").empty(),d=[],o=null,l=null,a=null,g=null,c=null,h=null,f=[],b=[],C=null,Ue=[],u=null},u.resize=function(){var ge=i.width(),Be=i.height();l.resize(ge,Be),a.resize(ge,Be)},u.hooks=C,P(u),S(r),K(),x(s),Q(),ce(),B();function D(ge,Be){Be=[u].concat(Be);for(var Le=0;Le<ge.length;++Le)ge[Le].apply(this,Be)}function P(){for(var ge={Canvas:e},Be=0;Be<m.length;++Be){var Le=m[Be];Le.init(u,ge),Le.options&&j.extend(!0,o,Le.options)}}function S(ge){j.extend(!0,o,ge),ge&&ge.colors&&(o.colors=ge.colors),o.xaxis.color==null&&(o.xaxis.color=j.color.parse(o.grid.color).scale("a",.22).toString()),o.yaxis.color==null&&(o.yaxis.color=j.color.parse(o.grid.color).scale("a",.22).toString()),o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color),o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color),o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=j.color.parse(o.grid.color).scale("a",.22).toString());var Be,Le,he,He=i.css("font-size"),Pe=He?+He.replace("px",""):13,Ie={style:i.css("font-style"),size:Math.round(.8*Pe),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")};for(he=o.xaxes.length||1,Be=0;Be<he;++Be)Le=o.xaxes[Be],Le&&!Le.tickColor&&(Le.tickColor=Le.color),Le=j.extend(!0,{},o.xaxis,Le),o.xaxes[Be]=Le,Le.font&&(Le.font=j.extend({},Ie,Le.font),Le.font.color||(Le.font.color=Le.color),Le.font.lineHeight||(Le.font.lineHeight=Math.round(Le.font.size*1.15)));for(he=o.yaxes.length||1,Be=0;Be<he;++Be)Le=o.yaxes[Be],Le&&!Le.tickColor&&(Le.tickColor=Le.color),Le=j.extend(!0,{},o.yaxis,Le),o.yaxes[Be]=Le,Le.font&&(Le.font=j.extend({},Ie,Le.font),Le.font.color||(Le.font.color=Le.color),Le.font.lineHeight||(Le.font.lineHeight=Math.round(Le.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=j.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=j.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&j.extend(!0,o.series.lines,o.lines),o.points&&j.extend(!0,o.series.points,o.points),o.bars&&j.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),Be=0;Be<o.xaxes.length;++Be)L(f,Be+1).options=o.xaxes[Be];for(Be=0;Be<o.yaxes.length;++Be)L(b,Be+1).options=o.yaxes[Be];for(var Te in C)o.hooks[Te]&&o.hooks[Te].length&&(C[Te]=C[Te].concat(o.hooks[Te]));D(C.processOptions,[o])}function x(ge){d=M(ge),V(),w()}function M(ge){for(var Be=[],Le=0;Le<ge.length;++Le){var he=j.extend(!0,{},o.series);ge[Le].data!=null?(he.data=ge[Le].data,delete ge[Le].data,j.extend(!0,he,ge[Le]),ge[Le].data=he.data):he.data=ge[Le],Be.push(he)}return Be}function R(ge,Be){var Le=ge[Be+"axis"];return typeof Le=="object"&&(Le=Le.n),typeof Le!="number"&&(Le=1),Le}function O(){return j.grep(f.concat(b),function(ge){return ge})}function T(ge){var Be={},Le,he;for(Le=0;Le<f.length;++Le)he=f[Le],he&&(Be["x"+he.n]=he.c2p(ge.left));for(Le=0;Le<b.length;++Le)he=b[Le],he&&(Be["y"+he.n]=he.c2p(ge.top));return Be.x1!==void 0&&(Be.x=Be.x1),Be.y1!==void 0&&(Be.y=Be.y1),Be}function U(ge){var Be={},Le,he,He;for(Le=0;Le<f.length;++Le)if(he=f[Le],he&&he.used&&(He="x"+he.n,ge[He]==null&&he.n==1&&(He="x"),ge[He]!=null)){Be.left=he.p2c(ge[He]);break}for(Le=0;Le<b.length;++Le)if(he=b[Le],he&&he.used&&(He="y"+he.n,ge[He]==null&&he.n==1&&(He="y"),ge[He]!=null)){Be.top=he.p2c(ge[He]);break}return Be}function L(ge,Be){return ge[Be-1]||(ge[Be-1]={n:Be,direction:ge==f?"x":"y",options:j.extend(!0,{},ge==f?o.xaxis:o.yaxis)}),ge[Be-1]}function V(){var ge=d.length,Be=-1,Le;for(Le=0;Le<d.length;++Le){var he=d[Le].color;he!=null&&(ge--,typeof he=="number"&&he>Be&&(Be=he))}ge<=Be&&(ge=Be+1);var He,Pe=[],Ie=o.colors,Te=Ie.length,Re=0;for(Le=0;Le<ge;Le++)He=j.color.parse(Ie[Le%Te]||"#666"),Le%Te==0&&Le&&(Re>=0?Re<.5?Re=-Re-.2:Re=0:Re=-Re),Pe[Le]=He.scale("rgb",1+Re);var ue=0,xe;for(Le=0;Le<d.length;++Le){if(xe=d[Le],xe.color==null?(xe.color=Pe[ue].toString(),++ue):typeof xe.color=="number"&&(xe.color=Pe[xe.color].toString()),xe.lines.show==null){var Ve,Ne=!0;for(Ve in xe)if(xe[Ve]&&xe[Ve].show){Ne=!1;break}Ne&&(xe.lines.show=!0)}xe.lines.zero==null&&(xe.lines.zero=!!xe.lines.fill),xe.xaxis=L(f,R(xe,"x")),xe.yaxis=L(b,R(xe,"y"))}}function w(){var ge=Number.POSITIVE_INFINITY,Be=Number.NEGATIVE_INFINITY,Le=Number.MAX_VALUE,he,He,Pe,Ie,Te,Re,ue,xe,Ve,Ne,fe,ve,ze,Oe,Fe,Ge;function nt(Cn,pn,nn){pn<Cn.datamin&&pn!=-Le&&(Cn.datamin=pn),nn>Cn.datamax&&nn!=Le&&(Cn.datamax=nn)}for(j.each(O(),function(Cn,pn){pn.datamin=ge,pn.datamax=Be,pn.used=!1}),he=0;he<d.length;++he)Re=d[he],Re.datapoints={points:[]},D(C.processRawData,[Re,Re.data,Re.datapoints]);for(he=0;he<d.length;++he){if(Re=d[he],Fe=Re.data,Ge=Re.datapoints.format,!Ge){if(Ge=[],Ge.push({x:!0,number:!0,required:!0}),Ge.push({y:!0,number:!0,required:!0}),Re.stack||Re.bars.show||Re.lines.show&&Re.lines.fill){var Xe=!!(Re.bars.show&&Re.bars.zero||Re.lines.show&&Re.lines.zero);Ge.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:Xe}),Re.bars.horizontal&&(delete Ge[Ge.length-1].y,Ge[Ge.length-1].x=!0)}Re.datapoints.format=Ge}if(Re.datapoints.pointsize==null){Re.datapoints.pointsize=Ge.length,xe=Re.datapoints.pointsize,ue=Re.datapoints.points;var ut=Re.lines.show&&Re.lines.steps;for(Re.xaxis.used=Re.yaxis.used=!0,He=Pe=0;He<Fe.length;++He,Pe+=xe){Oe=Fe[He];var ht=Oe==null;if(!ht)for(Ie=0;Ie<xe;++Ie)ve=Oe[Ie],ze=Ge[Ie],ze&&(ze.number&&ve!=null&&(ve=+ve,isNaN(ve)?ve=null:ve==1/0?ve=Le:ve==-1/0&&(ve=-Le)),ve==null&&(ze.required&&(ht=!0),ze.defaultValue!=null&&(ve=ze.defaultValue))),ue[Pe+Ie]=ve;if(ht)for(Ie=0;Ie<xe;++Ie)ve=ue[Pe+Ie],ve!=null&&(ze=Ge[Ie],ze.autoscale!==!1&&(ze.x&&nt(Re.xaxis,ve,ve),ze.y&&nt(Re.yaxis,ve,ve))),ue[Pe+Ie]=null;if(ut&&Pe>0&&(!ht||ue[Pe-xe]!=null)){for(Ie=0;Ie<xe;++Ie)ue[Pe+xe+Ie]=ue[Pe+Ie];ue[Pe+1]=ue[Pe-xe+1]||0,ht&&(ue[Pe]=Oe[0]),Pe+=xe}}}}for(he=0;he<d.length;++he){if(Re=d[he],ue=Re.datapoints.points,xe=Re.datapoints.pointsize,Re.transform==="negative-Y")for(He=0;He<ue.length;He+=xe)ue[He]!=null&&(ve=ue[He+1],ue[He+1]=-ve);D(C.processDatapoints,[Re,Re.datapoints])}for(he=0;he<d.length;++he){Re=d[he],ue=Re.datapoints.points,xe=Re.datapoints.pointsize,Ge=Re.datapoints.format;var wt=ge,mn=ge,vn=Be,gn=Be;for(He=0;He<ue.length;He+=xe)if(ue[He]!=null)for(Ie=0;Ie<xe;++Ie)ve=ue[He+Ie],ze=Ge[Ie],!(!ze||ze.autoscale===!1||ve==Le||ve==-Le)&&(ze.x&&(ve<wt&&(wt=ve),ve>vn&&(vn=ve)),ze.y&&(ve<mn&&(mn=ve),ve>gn&&(gn=ve)));if(Re.bars.show){var Sn;switch(Re.bars.align){case"left":Sn=0;break;case"right":Sn=-Re.bars.barWidth;break;default:Sn=-Re.bars.barWidth/2}Re.bars.horizontal?(mn+=Sn,gn+=Sn+Re.bars.barWidth):(wt+=Sn,vn+=Sn+Re.bars.barWidth)}nt(Re.xaxis,wt,vn),nt(Re.yaxis,mn,gn)}j.each(O(),function(Cn,pn){pn.datamin==ge&&(pn.datamin=null),pn.datamax==Be&&(pn.datamax=null)})}function K(){i.find(".flot-temp-elem").remove(),i.css("position")=="static"&&i.css("position","relative"),l=new e("flot-base",i),a=new e("flot-overlay",i),c=l.context,h=a.context,g=j(a.element).unbind();var ge=i.data("plot");ge&&(ge.shutdown(),a.clear()),i.data("plot",u)}function B(){o.grid.hoverable&&(g.mousemove(tt),g.bind("mouseleave",lt),j(document).bind("touchend",De)),o.grid.clickable&&g.click(Me),D(C.bindEvents,[g])}function W(){$e&&clearTimeout($e),g.unbind("mousemove",tt),g.unbind("mouseleave",lt),g.unbind("click",Me),j(document).unbind("touchend",De),D(C.shutdown,[g])}function _(ge){function Be(Ie){return Ie}var Le,he,He=ge.options.transform||Be,Pe=ge.options.inverseTransform;ge.direction=="x"?(Le=ge.scale=y/Math.abs(He(ge.max)-He(ge.min)),he=Math.min(He(ge.max),He(ge.min))):(Le=ge.scale=E/Math.abs(He(ge.max)-He(ge.min)),Le=-Le,he=Math.max(He(ge.max),He(ge.min))),He==Be?ge.p2c=function(Ie){return(Ie-he)*Le}:ge.p2c=function(Ie){return(He(Ie)-he)*Le},Pe?ge.c2p=function(Ie){return Pe(he+Ie/Le)}:ge.c2p=function(Ie){return he+Ie/Le}}function k(ge){for(var Be=ge.options,Le=ge.ticks||[],he=Be.labelWidth||0,He=Be.labelHeight||0,Pe=he||(ge.direction=="x"?Math.floor(l.width/(Le.length||1)):null),Ie=ge.direction+"Axis "+ge.direction+ge.n+"Axis",Te="flot-"+ge.direction+"-axis flot-"+ge.direction+ge.n+"-axis "+Ie,Re=Be.font||"flot-tick-label tickLabel",ue=0;ue<Le.length;++ue){var xe=Le[ue];if(xe.label){var Ve=l.getTextInfo(Te,xe.label,Re,null,Pe);he=Math.max(he,Ve.width+1),He=Math.max(He,Ve.height)}}ge.labelWidth=Be.labelWidth||he,ge.labelHeight=Be.labelHeight||He}function A(ge){var Be=ge.labelWidth,Le=ge.labelHeight,he=ge.options.position,He=ge.direction==="x",Pe=ge.options.tickLength,Ie=o.grid.axisMargin,Te=o.grid.labelMargin,Re=o.grid.eventSectionHeight,ue=!0,xe=!0,Ve=!0,Ne=!1;j.each(He?f:b,function(fe,ve){ve&&(ve.show||ve.reserveSpace)&&(ve===ge?Ne=!0:ve.options.position===he&&(Ne?xe=!1:ue=!1),Ne||(Ve=!1))}),xe&&(Ie=0),Pe==null&&(Pe=Ve?"full":5),isNaN(+Pe)||(Te+=+Pe),He?(Le+=Te,Le+=Re,he=="bottom"?(v.bottom+=Le+Ie,ge.box={top:l.height-v.bottom,height:Le}):(ge.box={top:v.top+Ie,height:Le},v.top+=Le+Ie)):(Be+=Te,he=="left"?(ge.box={left:v.left+Ie,width:Be},v.left+=Be+Ie):(v.right+=Be+Ie,ge.box={left:l.width-v.right,width:Be})),ge.position=he,ge.tickLength=Pe,ge.box.padding=Te,ge.box.eventSectionPadding=Re,ge.innermost=ue}function z(ge){ge.direction=="x"?(ge.box.left=v.left-ge.labelWidth/2,ge.box.width=l.width-v.left-v.right+ge.labelWidth):(ge.box.top=v.top-ge.labelHeight/2,ge.box.height=l.height-v.bottom-v.top+ge.labelHeight)}function H(){var ge=o.grid.minBorderMargin,Be,Le;if(ge==null)for(ge=0,Le=0;Le<d.length;++Le)ge=Math.max(ge,2*(d[Le].points.radius+d[Le].points.lineWidth/2));var he={left:ge,right:ge,top:ge,bottom:ge};j.each(O(),function(He,Pe){Pe.reserveSpace&&Pe.ticks&&Pe.ticks.length&&(Pe.direction==="x"?(he.left=Math.max(he.left,Pe.labelWidth/2),he.right=Math.max(he.right,Pe.labelWidth/2)):(he.bottom=Math.max(he.bottom,Pe.labelHeight/2),he.top=Math.max(he.top,Pe.labelHeight/2)))}),v.left=Math.ceil(Math.max(he.left,v.left)),v.right=Math.ceil(Math.max(he.right,v.right)),v.top=Math.ceil(Math.max(he.top,v.top)),v.bottom=Math.ceil(Math.max(he.bottom,v.bottom))}function Q(){var ge,Be=O(),Le=o.grid.show;for(var he in v){var He=o.grid.margin||0;v[he]=typeof He=="number"?He:He[he]||0}D(C.processOffset,[v]);for(var he in v)typeof o.grid.borderWidth=="object"?v[he]+=Le?o.grid.borderWidth[he]:0:v[he]+=Le?o.grid.borderWidth:0;if(j.each(Be,function(Te,Re){var ue=Re.options;Re.show=ue.show==null?Re.used:ue.show,Re.reserveSpace=ue.reserveSpace==null?Re.show:ue.reserveSpace,X(Re)}),D(C.processRange,[]),Le){for(var Pe=j.grep(Be,function(Te){return Te.show||Te.reserveSpace}),Ie=!1,ge=0;ge<2&&(j.each(Pe,function(Re,ue){oe(ue),Z(ue),Ie=le(ue,ue.ticks)||Ie,k(ue)}),Ie&&C.processRange.length>0);ge++)D(C.processRange,[]),Ie=!1;for(ge=Pe.length-1;ge>=0;--ge)A(Pe[ge]);H(),j.each(Pe,function(Te,Re){z(Re)})}y=l.width-v.left-v.right,E=l.height-v.bottom-v.top,j.each(Be,function(Te,Re){_(Re)}),Le&&re(),Je()}function X(ge){var Be=ge.options,Le=+(Be.min!=null?Be.min:ge.datamin),he=+(Be.max!=null?Be.max:ge.datamax),He=he-Le;if(He==0){var Pe=.25,Ie=Math.abs(he==0?1:he*Pe);Be.min==null&&(Le-=Ie),(Be.max==null||Be.min!=null)&&(he+=Ie)}else{var Te=Be.autoscaleMargin;Te!=null&&(Be.min==null&&(Le-=He*Te,Le<0&&ge.datamin!=null&&ge.datamin>=0&&(Le=0)),Be.max==null&&(he+=He*Te,he>0&&ge.datamax!=null&&ge.datamax<=0&&(he=0)))}ge.min=Le,ge.max=he}function te(ge){if(ge=Math.abs(String(ge).replace(".","")),ge==0)return 0;for(;ge!=0&&ge%10==0;)ge/=10;return Math.floor(Math.log(ge)/Math.LN10)+1}function oe(ge){var Be=ge.options,Le;typeof Be.ticks=="number"&&Be.ticks>0?Le=Be.ticks:Le=.3*Math.sqrt(ge.direction=="x"?l.width:l.height);var he=(ge.max-ge.min)/Le,He=-Math.floor(Math.log(he)/Math.LN10),Pe=Be.tickDecimals;Pe!=null&&He>Pe&&(He=Pe);var Ie=Math.pow(10,-He),Te=he/Ie,Re;if(Te<1.5?Re=1:Te<3?(Re=2,Te>2.25&&(Pe==null||He+1<=Pe)&&(Re=2.5,++He)):Te<7.5?Re=5:Re=10,Re*=Ie,Be.minTickSize!=null&&Re<Be.minTickSize&&(Re=Be.minTickSize),ge.delta=he,ge.tickDecimals=Math.max(0,Pe??He),ge.tickSize=Be.tickSize||Re,Be.mode=="time"&&!ge.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(ge.tickGenerator||(ge.tickGenerator=function(fe){var ve=[],ze=n(fe.min,fe.tickSize),Oe=0,Fe=Number.NaN,Ge;do Ge=Fe,Fe=ze+Oe*fe.tickSize,ve.push(Fe),++Oe;while(Fe<fe.max&&Fe!=Ge);return ve},ge.tickFormatter=function(fe,ve){var ze=ve.tickDecimals?Math.pow(10,ve.tickDecimals):1,Oe=""+Math.round(fe*ze)/ze;if(ve.tickDecimals!=null){var Fe=Oe.indexOf("."),Ge=Fe==-1?0:Oe.length-Fe-1;if(Ge<ve.tickDecimals)return(Ge?Oe:Oe+".")+(""+ze).substr(1,ve.tickDecimals-Ge)}return Oe}),j.isFunction(Be.tickFormatter)&&(ge.tickFormatter=function(fe,ve){return""+Be.tickFormatter(fe,ve)}),Be.alignTicksWithAxis!=null){var ue=(ge.direction=="x"?f:b)[Be.alignTicksWithAxis-1];if(ue&&ue.used&&ue!=ge){var xe=ge.tickGenerator(ge);if(xe.length>0&&(Be.min==null&&(ge.min=Math.min(ge.min,xe[0])),Be.max==null&&xe.length>1&&(ge.max=Math.max(ge.max,xe[xe.length-1]))),ge.tickGenerator=function(fe){var ve=[],ze,Oe;for(Oe=0;Oe<ue.ticks.length;++Oe)ze=(ue.ticks[Oe].v-ue.min)/(ue.max-ue.min),ze=fe.min+ze*(fe.max-fe.min),ve.push(ze);return ve},!ge.mode&&Be.tickDecimals==null){var Ve=Math.max(0,-Math.floor(Math.log(ge.delta)/Math.LN10)+1),Ne=ge.tickGenerator(ge);Ne.length>1&&/\..*0$/.test((Ne[1]-Ne[0]).toFixed(Ve))||(ge.tickDecimals=Ve)}}}}function Z(ge){var Be=ge.options.ticks,Le=[];Be==null||typeof Be=="number"&&Be>0?Le=ge.tickGenerator(ge):Be&&(j.isFunction(Be)?Le=Be(ge):Le=Be);var he,He;for(ge.ticks=[],he=0;he<Le.length;++he){var Pe=null,Ie=Le[he];typeof Ie=="object"?(He=+Ie[0],Ie.length>1&&(Pe=Ie[1])):He=+Ie,Pe==null&&(Pe=ge.tickFormatter(He,ge)),isNaN(He)||ge.ticks.push({v:He,label:Pe})}}function le(ge,Be){var Le=!1;return ge.options.autoscaleMargin&&Be.length>0&&(ge.options.min==null&&(ge.min=Math.min(ge.min,Be[0].v),Le=!0),ge.options.max==null&&Be.length>1&&(ge.max=Math.max(ge.max,Be[Be.length-1].v),Le=!0)),Le}function ce(){l.clear(),D(C.drawBackground,[c]);var ge=o.grid;ge.show&&ge.backgroundColor&&ne(),ge.show&&!ge.aboveData&&pe();for(var Be=0;Be<d.length;++Be)D(C.drawSeries,[c,d[Be]]),Se(d[Be]);D(C.draw,[c]),ge.show&&ge.aboveData&&pe(),l.render(),st()}function q(ge,Be){for(var Le,he,He,Pe,Ie=O(),Te=0;Te<Ie.length;++Te)if(Le=Ie[Te],Le.direction==Be&&(Pe=Be+Le.n+"axis",!ge[Pe]&&Le.n==1&&(Pe=Be+"axis"),ge[Pe])){he=ge[Pe].from,He=ge[Pe].to;break}if(ge[Pe]||(Le=Be=="x"?f[0]:b[0],he=ge[Be+"1"],He=ge[Be+"2"]),he!=null&&He!=null&&he>He){var Re=he;he=He,He=Re}return{from:he,to:He,axis:Le}}function ne(){c.save(),c.translate(v.left,v.top),c.fillStyle=ct(o.grid.backgroundColor,E,0,"rgba(255, 255, 255, 0)"),c.fillRect(0,0,y,E),c.restore()}function pe(){var ge,Be,Le,he;c.save(),c.translate(v.left,v.top);var He=o.grid.markings;if(He)for(j.isFunction(He)&&(Be=u.getAxes(),Be.xmin=Be.xaxis.min,Be.xmax=Be.xaxis.max,Be.ymin=Be.yaxis.min,Be.ymax=Be.yaxis.max,He=He(Be)),ge=0;ge<He.length;++ge){var Pe=He[ge],Ie=q(Pe,"x"),Te=q(Pe,"y");if(Ie.from==null&&(Ie.from=Ie.axis.min),Ie.to==null&&(Ie.to=Ie.axis.max),Te.from==null&&(Te.from=Te.axis.min),Te.to==null&&(Te.to=Te.axis.max),!(Ie.to<Ie.axis.min||Ie.from>Ie.axis.max||Te.to<Te.axis.min||Te.from>Te.axis.max)){Ie.from=Math.max(Ie.from,Ie.axis.min),Ie.to=Math.min(Ie.to,Ie.axis.max),Te.from=Math.max(Te.from,Te.axis.min),Te.to=Math.min(Te.to,Te.axis.max);var Re=Ie.from===Ie.to,ue=Te.from===Te.to;if(!(Re&&ue))if(Ie.from=Math.floor(Ie.axis.p2c(Ie.from)),Ie.to=Math.floor(Ie.axis.p2c(Ie.to)),Te.from=Math.floor(Te.axis.p2c(Te.from)),Te.to=Math.floor(Te.axis.p2c(Te.to)),Re||ue){var xe=Pe.lineWidth||o.grid.markingsLineWidth,Ve=xe%2?.5:0;c.beginPath(),c.strokeStyle=Pe.color||o.grid.markingsColor,c.lineWidth=xe,Re?(c.moveTo(Ie.to+Ve,Te.from),c.lineTo(Ie.to+Ve,Te.to)):(c.moveTo(Ie.from,Te.to+Ve),c.lineTo(Ie.to,Te.to+Ve)),c.stroke()}else c.fillStyle=Pe.color||o.grid.markingsColor,c.fillRect(Ie.from,Te.to,Ie.to-Ie.from,Te.from-Te.to)}}Be=O(),Le=o.grid.borderWidth;for(var Ne=0;Ne<Be.length;++Ne){var fe=Be[Ne],ve=fe.box,ze=fe.tickLength,Oe,Fe,Ge,nt;if(!(!fe.show||fe.ticks.length==0)){for(c.lineWidth=1,fe.direction=="x"?(Oe=0,ze=="full"?Fe=fe.position=="top"?0:E:Fe=ve.top-v.top+(fe.position=="top"?ve.height:0)):(Fe=0,ze=="full"?Oe=fe.position=="left"?0:y:Oe=ve.left-v.left+(fe.position=="left"?ve.width:0)),fe.innermost||(c.strokeStyle=fe.options.color,c.beginPath(),Ge=nt=0,fe.direction=="x"?Ge=y+1:nt=E+1,c.lineWidth==1&&(fe.direction=="x"?Fe=Math.floor(Fe)+.5:Oe=Math.floor(Oe)+.5),c.moveTo(Oe,Fe),c.lineTo(Oe+Ge,Fe+nt),c.stroke()),c.strokeStyle=fe.options.tickColor,c.beginPath(),ge=0;ge<fe.ticks.length;++ge){var Xe=fe.ticks[ge].v;Ge=nt=0,!(isNaN(Xe)||Xe<fe.min||Xe>fe.max||ze=="full"&&(typeof Le=="object"&&Le[fe.position]>0||Le>0)&&(Xe==fe.min||Xe==fe.max))&&(fe.direction=="x"?(Oe=fe.p2c(Xe),nt=ze=="full"?-E:ze,fe.position=="top"&&(nt=-nt)):(Fe=fe.p2c(Xe),Ge=ze=="full"?-y:ze,fe.position=="left"&&(Ge=-Ge)),c.lineWidth==1&&(fe.direction=="x"?Oe=Math.floor(Oe)+.5:Fe=Math.floor(Fe)+.5),c.moveTo(Oe,Fe),c.lineTo(Oe+Ge,Fe+nt))}c.stroke()}}Le&&(he=o.grid.borderColor,typeof Le=="object"||typeof he=="object"?(typeof Le!="object"&&(Le={top:Le,right:Le,bottom:Le,left:Le}),typeof he!="object"&&(he={top:he,right:he,bottom:he,left:he}),Le.top>0&&(c.strokeStyle=he.top,c.lineWidth=Le.top,c.beginPath(),c.moveTo(0-Le.left,0-Le.top/2),c.lineTo(y,0-Le.top/2),c.stroke()),Le.right>0&&(c.strokeStyle=he.right,c.lineWidth=Le.right,c.beginPath(),c.moveTo(y+Le.right/2,0-Le.top),c.lineTo(y+Le.right/2,E),c.stroke()),Le.bottom>0&&(c.strokeStyle=he.bottom,c.lineWidth=Le.bottom,c.beginPath(),c.moveTo(y+Le.right,E+Le.bottom/2),c.lineTo(0,E+Le.bottom/2),c.stroke()),Le.left>0&&(c.strokeStyle=he.left,c.lineWidth=Le.left,c.beginPath(),c.moveTo(0-Le.left/2,E+Le.bottom),c.lineTo(0-Le.left/2,0),c.stroke())):(c.lineWidth=Le,c.strokeStyle=o.grid.borderColor,c.strokeRect(-Le/2,-Le/2,y+Le,E+Le))),c.restore()}function re(){j.each(O(),function(ge,Be){var Le=Be.box,he=Be.direction+"Axis "+Be.direction+Be.n+"Axis",He="flot-"+Be.direction+"-axis flot-"+Be.direction+Be.n+"-axis "+he,Pe=Be.options.font||"flot-tick-label tickLabel",Ie,Te,Re,ue,xe;if(l.removeText(He),!(!Be.show||Be.ticks.length==0))for(var Ve=0;Ve<Be.ticks.length;++Ve)Ie=Be.ticks[Ve],!(!Ie.label||Ie.v<Be.min||Ie.v>Be.max)&&(Be.direction=="x"?(ue="center",Te=v.left+Be.p2c(Ie.v),Be.position=="bottom"?Re=Le.top+Le.padding+Le.eventSectionPadding:(Re=Le.top+Le.height-Le.padding,xe="bottom")):(xe="middle",Re=v.top+Be.p2c(Ie.v),Be.position=="left"?(Te=Le.left+Le.width-Le.padding,ue="right"):Te=Le.left+Le.padding),l.addText(He,Te,Re,Ie.label,Pe,null,null,ue,xe))})}function ie(ge){for(var Be=[],Le=null,he=null,He=ge.datapoints,Pe=[],Ie=0;Ie<He.pointsize-2;Ie++)Pe.push(0);for(var Te=0;Te<He.points.length;Te+=He.pointsize){var Re=He.points[Te],ue=He.points[Te+1];Te===He.points.length-He.pointsize?he=null:he=He.points[Te+He.pointsize],Re!==null&&ue!==null&&Le===null&&he===null&&(Be.push(Re),Be.push(ue),Be.push.apply(Be,Pe)),Le=Re}var xe=He.points;He.points=Be,ge.points.radius=ge.lines.lineWidth/2,Ce(ge),He.points=xe}function Se(ge){ge.lines.show&&(ye(ge),!ge.points.show&&!ge.bars.show&&ie(ge)),ge.bars.show&&we(ge),ge.points.show&&Ce(ge)}function ye(ge){function Be(Te,Re,ue,xe,Ve){var Ne=Te.points,fe=Te.pointsize,ve=null,ze=null;c.beginPath();for(var Oe=fe;Oe<Ne.length;Oe+=fe){var Fe=Ne[Oe-fe],Ge=Ne[Oe-fe+1],nt=Ne[Oe],Xe=Ne[Oe+1];if(!(Fe==null||nt==null)){if(Ge<=Xe&&Ge<Ve.min){if(Xe<Ve.min)continue;Fe=(Ve.min-Ge)/(Xe-Ge)*(nt-Fe)+Fe,Ge=Ve.min}else if(Xe<=Ge&&Xe<Ve.min){if(Ge<Ve.min)continue;nt=(Ve.min-Ge)/(Xe-Ge)*(nt-Fe)+Fe,Xe=Ve.min}if(Ge>=Xe&&Ge>Ve.max){if(Xe>Ve.max)continue;Fe=(Ve.max-Ge)/(Xe-Ge)*(nt-Fe)+Fe,Ge=Ve.max}else if(Xe>=Ge&&Xe>Ve.max){if(Ge>Ve.max)continue;nt=(Ve.max-Ge)/(Xe-Ge)*(nt-Fe)+Fe,Xe=Ve.max}if(Fe<=nt&&Fe<xe.min){if(nt<xe.min)continue;Ge=(xe.min-Fe)/(nt-Fe)*(Xe-Ge)+Ge,Fe=xe.min}else if(nt<=Fe&&nt<xe.min){if(Fe<xe.min)continue;Xe=(xe.min-Fe)/(nt-Fe)*(Xe-Ge)+Ge,nt=xe.min}if(Fe>=nt&&Fe>xe.max){if(nt>xe.max)continue;Ge=(xe.max-Fe)/(nt-Fe)*(Xe-Ge)+Ge,Fe=xe.max}else if(nt>=Fe&&nt>xe.max){if(Fe>xe.max)continue;Xe=(xe.max-Fe)/(nt-Fe)*(Xe-Ge)+Ge,nt=xe.max}(Fe!=ve||Ge!=ze)&&c.moveTo(xe.p2c(Fe)+Re,Ve.p2c(Ge)+ue),ve=nt,ze=Xe,c.lineTo(xe.p2c(nt)+Re,Ve.p2c(Xe)+ue)}}c.stroke()}function Le(Te,Re,ue){for(var xe=Te.points,Ve=Te.pointsize,Ne=Math.min(Math.max(0,ue.min),ue.max),fe=0,ve,ze=!1,Oe=1,Fe=0,Ge=0;!(Ve>0&&fe>xe.length+Ve);){fe+=Ve;var nt=xe[fe-Ve],Xe=xe[fe-Ve+Oe],ut=xe[fe],ht=xe[fe+Oe];if(ze){if(Ve>0&&nt!=null&&ut==null){Ge=fe,Ve=-Ve,Oe=2;continue}if(Ve<0&&fe==Fe+Ve){c.fill(),ze=!1,Ve=-Ve,Oe=1,fe=Fe=Ge+Ve;continue}}if(!(nt==null||ut==null)){if(nt<=ut&&nt<Re.min){if(ut<Re.min)continue;Xe=(Re.min-nt)/(ut-nt)*(ht-Xe)+Xe,nt=Re.min}else if(ut<=nt&&ut<Re.min){if(nt<Re.min)continue;ht=(Re.min-nt)/(ut-nt)*(ht-Xe)+Xe,ut=Re.min}if(nt>=ut&&nt>Re.max){if(ut>Re.max)continue;Xe=(Re.max-nt)/(ut-nt)*(ht-Xe)+Xe,nt=Re.max}else if(ut>=nt&&ut>Re.max){if(nt>Re.max)continue;ht=(Re.max-nt)/(ut-nt)*(ht-Xe)+Xe,ut=Re.max}if(ze||(c.beginPath(),c.moveTo(Re.p2c(nt),ue.p2c(Ne)),ze=!0),Xe>=ue.max&&ht>=ue.max){c.lineTo(Re.p2c(nt),ue.p2c(ue.max)),c.lineTo(Re.p2c(ut),ue.p2c(ue.max));continue}else if(Xe<=ue.min&&ht<=ue.min){c.lineTo(Re.p2c(nt),ue.p2c(ue.min)),c.lineTo(Re.p2c(ut),ue.p2c(ue.min));continue}var wt=nt,mn=ut;Xe<=ht&&Xe<ue.min&&ht>=ue.min?(nt=(ue.min-Xe)/(ht-Xe)*(ut-nt)+nt,Xe=ue.min):ht<=Xe&&ht<ue.min&&Xe>=ue.min&&(ut=(ue.min-Xe)/(ht-Xe)*(ut-nt)+nt,ht=ue.min),Xe>=ht&&Xe>ue.max&&ht<=ue.max?(nt=(ue.max-Xe)/(ht-Xe)*(ut-nt)+nt,Xe=ue.max):ht>=Xe&&ht>ue.max&&Xe<=ue.max&&(ut=(ue.max-Xe)/(ht-Xe)*(ut-nt)+nt,ht=ue.max),nt!=wt&&c.lineTo(Re.p2c(wt),ue.p2c(Xe)),c.lineTo(Re.p2c(nt),ue.p2c(Xe)),c.lineTo(Re.p2c(ut),ue.p2c(ht)),ut!=mn&&(c.lineTo(Re.p2c(ut),ue.p2c(ht)),c.lineTo(Re.p2c(mn),ue.p2c(ht)))}}}c.save(),c.translate(v.left,v.top),c.lineJoin="round";var he=ge.lines.lineWidth,He=ge.shadowSize;if(he>0&&He>0){c.lineWidth=He,c.strokeStyle="rgba(0,0,0,0.1)";var Pe=Math.PI/18;Be(ge.datapoints,Math.sin(Pe)*(he/2+He/2),Math.cos(Pe)*(he/2+He/2),ge.xaxis,ge.yaxis),c.lineWidth=He/2,Be(ge.datapoints,Math.sin(Pe)*(he/2+He/4),Math.cos(Pe)*(he/2+He/4),ge.xaxis,ge.yaxis)}c.lineWidth=he,c.strokeStyle=ge.color;var Ie=_e(ge.lines,ge.color,0,E);Ie&&(c.fillStyle=Ie,Le(ge.datapoints,ge.xaxis,ge.yaxis)),he>0&&Be(ge.datapoints,0,0,ge.xaxis,ge.yaxis),c.restore()}function Ce(ge){function Be(Te,Re,ue,xe,Ve,Ne,fe,ve){for(var ze=Te.points,Oe=Te.pointsize,Fe=0;Fe<ze.length;Fe+=Oe){var Ge=ze[Fe],nt=ze[Fe+1];Ge==null||Ge<Ne.min||Ge>Ne.max||nt<fe.min||nt>fe.max||(c.beginPath(),Ge=Ne.p2c(Ge),nt=fe.p2c(nt)+xe,ve=="circle"?c.arc(Ge,nt,Re,0,Ve?Math.PI:Math.PI*2,!1):ve(c,Ge,nt,Re,Ve),c.closePath(),ue&&(c.fillStyle=ue,c.fill()),c.stroke())}}c.save(),c.translate(v.left,v.top);var Le=ge.points.lineWidth,he=ge.shadowSize,He=ge.points.radius,Pe=ge.points.symbol;if(Le==0&&(Le=1e-4),Le>0&&he>0){var Ie=he/2;c.lineWidth=Ie,c.strokeStyle="rgba(0,0,0,0.1)",Be(ge.datapoints,He,null,Ie+Ie/2,!0,ge.xaxis,ge.yaxis,Pe),c.strokeStyle="rgba(0,0,0,0.2)",Be(ge.datapoints,He,null,Ie/2,!0,ge.xaxis,ge.yaxis,Pe)}c.lineWidth=Le,c.strokeStyle=ge.color,Be(ge.datapoints,He,_e(ge.points,ge.color),0,!1,ge.xaxis,ge.yaxis,Pe),c.restore()}function de(ge,Be,Le,he,He,Pe,Ie,Te,Re,ue,xe){var Ve,Ne,fe,ve,ze,Oe,Fe,Ge,nt;ue?(Ge=Oe=Fe=!0,ze=!1,Ve=Le,Ne=ge,ve=Be+he,fe=Be+He,Ne<Ve&&(nt=Ne,Ne=Ve,Ve=nt,ze=!0,Oe=!1)):(ze=Oe=Fe=!0,Ge=!1,Ve=ge+he,Ne=ge+He,fe=Le,ve=Be,ve<fe&&(nt=ve,ve=fe,fe=nt,Ge=!0,Fe=!1)),!(Ne<Ie.min||Ve>Ie.max||ve<Te.min||fe>Te.max)&&(Ve<Ie.min&&(Ve=Ie.min,ze=!1),Ne>Ie.max&&(Ne=Ie.max,Oe=!1),fe<Te.min&&(fe=Te.min,Ge=!1),ve>Te.max&&(ve=Te.max,Fe=!1),Ve=Ie.p2c(Ve),fe=Te.p2c(fe),Ne=Ie.p2c(Ne),ve=Te.p2c(ve),Pe&&(Re.fillStyle=Pe(fe,ve),Re.fillRect(Ve,ve,Ne-Ve,fe-ve)),xe>0&&(ze||Oe||Fe||Ge)&&(Re.beginPath(),Re.moveTo(Ve,fe),ze?Re.lineTo(Ve,ve):Re.moveTo(Ve,ve),Fe?Re.lineTo(Ne,ve):Re.moveTo(Ne,ve),Oe?Re.lineTo(Ne,fe):Re.moveTo(Ne,fe),Ge?Re.lineTo(Ve,fe):Re.moveTo(Ve,fe),Re.stroke()))}function we(ge){function Be(He,Pe,Ie,Te,Re,ue){for(var xe=He.points,Ve=He.pointsize,Ne=0;Ne<xe.length;Ne+=Ve)xe[Ne]!=null&&de(xe[Ne],xe[Ne+1],xe[Ne+2],Pe,Ie,Te,Re,ue,c,ge.bars.horizontal,ge.bars.lineWidth)}c.save(),c.translate(v.left,v.top),c.lineWidth=ge.bars.lineWidth,c.strokeStyle=ge.color;var Le;switch(ge.bars.align){case"left":Le=0;break;case"right":Le=-ge.bars.barWidth;break;default:Le=-ge.bars.barWidth/2}var he=ge.bars.fill?function(He,Pe){return _e(ge.bars,ge.color,He,Pe)}:null;Be(ge.datapoints,Le,Le+ge.bars.barWidth,he,ge.xaxis,ge.yaxis),c.restore()}function _e(ge,Be,Le,he){var He=ge.fill;if(!He)return null;if(ge.fillColor)return ct(ge.fillColor,Le,he,Be);var Pe=j.color.parse(Be);return Pe.a=typeof He=="number"?He:.4,Pe.normalize(),Pe.toString()}function Je(){if(o.legend.container!=null?j.find(o.legend.container).html(""):i.find(".legend").remove(),!!o.legend.show){for(var ge=[],Be=[],Le=!1,he=o.legend.labelFormatter,He,Pe,Ie=0;Ie<d.length;++Ie)He=d[Ie],He.label&&(Pe=he?he(He.label,He):He.label,Pe&&Be.push({label:Pe,color:He.color}));if(o.legend.sorted)if(j.isFunction(o.legend.sorted))Be.sort(o.legend.sorted);else if(o.legend.sorted=="reverse")Be.reverse();else{var Te=o.legend.sorted!="descending";Be.sort(function(Oe,Fe){return Oe.label==Fe.label?0:Oe.label<Fe.label!=Te?1:-1})}for(var Ie=0;Ie<Be.length;++Ie){var Re=Be[Ie];Ie%o.legend.noColumns==0&&(Le&&ge.push("</tr>"),ge.push("<tr>"),Le=!0),ge.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+Re.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+Re.label+"</td>")}if(Le&&ge.push("</tr>"),ge.length!=0){var ue='<table style="font-size:smaller;color:'+o.grid.color+'">'+ge.join("")+"</table>";if(o.legend.container!=null)j(o.legend.container).html(ue);else{var xe="",Ve=o.legend.position,Ne=o.legend.margin;Ne[0]==null&&(Ne=[Ne,Ne]),Ve.charAt(0)=="n"?xe+="top:"+(Ne[1]+v.top)+"px;":Ve.charAt(0)=="s"&&(xe+="bottom:"+(Ne[1]+v.bottom)+"px;"),Ve.charAt(1)=="e"?xe+="right:"+(Ne[0]+v.right)+"px;":Ve.charAt(1)=="w"&&(xe+="left:"+(Ne[0]+v.left)+"px;");var fe=j('<div class="legend">'+ue.replace('style="','style="position:absolute;'+xe+";")+"</div>").appendTo(i);if(o.legend.backgroundOpacity!=0){var ve=o.legend.backgroundColor;ve==null&&(ve=o.grid.backgroundColor,ve&&typeof ve=="string"?ve=j.color.parse(ve):ve=j.color.extract(fe,"background-color"),ve.a=1,ve=ve.toString());var ze=fe.children();j('<div style="position:absolute;width:'+ze.width()+"px;height:"+ze.height()+"px;"+xe+"background-color:"+ve+';"> </div>').prependTo(fe).css("opacity",o.legend.backgroundOpacity)}}}}}var Ue=[],$e=null;function Qe(ge,Be,Le){var he=o.grid.mouseActiveRadius,He=he*he+1,Pe=null,Ie=!1,Te,Re,ue;for(Te=d.length-1;Te>=0;--Te)if(Le(d[Te])){var xe=d[Te],Ve=xe.xaxis,Ne=xe.yaxis,fe=xe.datapoints.points,ve=Ve.c2p(ge),ze=Ne.c2p(Be),Oe=he/Ve.scale,Fe=he/Ne.scale;if(ue=xe.datapoints.pointsize,Ve.options.inverseTransform&&(Oe=Number.MAX_VALUE),Ne.options.inverseTransform&&(Fe=Number.MAX_VALUE),xe.lines.show||xe.points.show)for(Re=0;Re<fe.length;Re+=ue){var Ge=fe[Re],nt=fe[Re+1];if(Ge!=null&&!(Ge-ve>Oe||Ge-ve<-Oe||nt-ze>Fe||nt-ze<-Fe)){var Xe=Math.abs(Ve.p2c(Ge)-ge),ut=Math.abs(Ne.p2c(nt)-Be),ht=Xe*Xe+ut*ut;ht<He&&(He=ht,Pe=[Te,Re/ue])}}if(xe.bars.show&&!Pe){var wt,mn;switch(xe.bars.align){case"left":wt=0;break;case"right":wt=-xe.bars.barWidth;break;default:wt=-xe.bars.barWidth/2}for(mn=wt+xe.bars.barWidth,Re=0;Re<fe.length;Re+=ue){var Ge=fe[Re],nt=fe[Re+1],vn=fe[Re+2];Ge!=null&&(d[Te].bars.horizontal?ve<=Math.max(vn,Ge)&&ve>=Math.min(vn,Ge)&&ze>=nt+wt&&ze<=nt+mn:ve>=Ge+wt&&ve<=Ge+mn&&ze>=Math.min(vn,nt)&&ze<=Math.max(vn,nt))&&(Pe=[Te,Re/ue])}}}return Pe?(Te=Pe[0],Re=Pe[1],ue=d[Te].datapoints.pointsize,{datapoint:d[Te].datapoints.points.slice(Re*ue,(Re+1)*ue),dataIndex:Re,series:d[Te],seriesIndex:Te}):null}function tt(ge){o.grid.hoverable&&qe("plothover",ge,function(Be){return Be.hoverable!=!1})}function lt(ge){o.grid.hoverable&&qe("plothover",ge,function(Be){return!1})}function Me(ge){u.isSelecting||qe("plotclick",ge,function(Be){return Be.clickable!=!1})}function De(ge){if(ge.cancelable){if(!g.is(ge.target)&&g.has(ge.target).length===0){qe("plotleave",ge,function(Be){});return}tt(We(ge)),ge.preventDefault()}}function We(ge){if(!ge||!ge.originalEvent||ge.pageX&&ge.pageY)return ge;var Be=ge.originalEvent;if(Be.changedTouches.length===0)return ge;var Le=Be.changedTouches[0];return ge.pageX=Le.pageX,ge.pageY=Le.pageY,ge}function qe(ge,Be,Le){var he=g.offset(),He=Be.pageX-he.left-v.left,Pe=Be.pageY-he.top-v.top,Ie=T({left:He,top:Pe});Ie.pageX=Be.pageX,Ie.pageY=Be.pageY,Ie.ctrlKey=Be.ctrlKey,Ie.metaKey=Be.metaKey;var Te=Qe(He,Pe,Le);if(Te&&(Te.pageX=parseInt(Te.series.xaxis.p2c(Te.datapoint[0])+he.left+v.left,10),Te.pageY=parseInt(Te.series.yaxis.p2c(Te.datapoint[1])+he.top+v.top,10)),o.grid.autoHighlight){for(var Re=0;Re<Ue.length;++Re){var ue=Ue[Re];ue.auto==ge&&!(Te&&ue.series==Te.series&&ue.point[0]==Te.datapoint[0]&&ue.point[1]==Te.datapoint[1])&&Nt(ue.series,ue.point)}Te&&Tt(Te.series,Te.datapoint,ge)}i.trigger(ge,[Ie,Te])}function st(){var ge=o.interaction.redrawOverlayInterval;if(ge==-1){dt();return}$e||($e=setTimeout(dt,ge))}function dt(){$e=null,h.save(),a.clear(),h.translate(v.left,v.top);var ge,Be;for(ge=0;ge<Ue.length;++ge)Be=Ue[ge],Be.series.bars.show?ft(Be.series,Be.point):yt(Be.series,Be.point);h.restore(),D(C.drawOverlay,[h])}function Tt(ge,Be,Le){if(typeof ge=="number"&&(ge=d[ge]),typeof Be=="number"){var he=ge.datapoints.pointsize;Be=ge.datapoints.points.slice(he*Be,he*(Be+1))}var He=Bt(ge,Be);He==-1?(Ue.push({series:ge,point:Be,auto:Le}),st()):Le||(Ue[He].auto=!1)}function Nt(ge,Be){if(ge==null&&Be==null){Ue=[],st();return}if(typeof ge=="number"&&(ge=d[ge]),typeof Be=="number"){var Le=ge.datapoints.pointsize;Be=ge.datapoints.points.slice(Le*Be,Le*(Be+1))}var he=Bt(ge,Be);he!=-1&&(Ue.splice(he,1),st())}function Bt(ge,Be){for(var Le=0;Le<Ue.length;++Le){var he=Ue[Le];if(he.series==ge&&he.point[0]==Be[0]&&he.point[1]==Be[1])return Le}return-1}function yt(ge,Be){var Le=Be[0],he=Be[1],He=ge.xaxis,Pe=ge.yaxis,Ie=typeof ge.highlightColor=="string"?ge.highlightColor:j.color.parse(ge.color).scale("a",.5).toString();if(!(Le<He.min||Le>He.max||he<Pe.min||he>Pe.max)){var Te=ge.points.radius+ge.points.lineWidth/2;h.lineWidth=Te,h.strokeStyle=Ie;var Re=1.5*Te;Le=He.p2c(Le),he=Pe.p2c(he),h.beginPath(),ge.points.symbol=="circle"?h.arc(Le,he,Re,0,2*Math.PI,!1):ge.points.symbol(h,Le,he,Re,!1),h.closePath(),h.stroke()}}function ft(ge,Be){var Le=typeof ge.highlightColor=="string"?ge.highlightColor:j.color.parse(ge.color).scale("a",.5).toString(),he=Le,He;switch(ge.bars.align){case"left":He=0;break;case"right":He=-ge.bars.barWidth;break;default:He=-ge.bars.barWidth/2}h.lineWidth=ge.bars.lineWidth,h.strokeStyle=Le,de(Be[0],Be[1],Be[2]||0,He,He+ge.bars.barWidth,function(){return he},ge.xaxis,ge.yaxis,h,ge.bars.horizontal,ge.bars.lineWidth)}function ct(ge,Be,Le,he){if(typeof ge=="string")return ge;for(var He=c.createLinearGradient(0,Le,0,Be),Pe=0,Ie=ge.colors.length;Pe<Ie;++Pe){var Te=ge.colors[Pe];if(typeof Te!="string"){var Re=j.color.parse(he);Te.brightness!=null&&(Re=Re.scale("rgb",Te.brightness)),Te.opacity!=null&&(Re.a*=Te.opacity),Te=Re.toString()}He.addColorStop(Pe/(Ie-1),Te)}return He}}j.plot=function(i,s,r){var m=new t(j(i),s,r,j.plot.plugins);return m},j.plot.version="0.8.3",j.plot.plugins=[],j.fn.plot=function(i,s){return this.each(function(){j.plot(this,i,s)})};function n(i,s){return s*Math.floor(i/s)}}(jQuery)},4027:()=>{(function(j){function I(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},i=null;function s(v){t.active&&(g(v),e.getPlaceholder().trigger("plotselecting",[d()]))}function r(v){v.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),a(t.first,v),t.active=!0,i=function(y){m(y)},j(document).one("mouseup",i))}function m(v){return i=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,g(v),b()?o(v):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function d(){if(!b()||!t.show)return null;var v={},y=t.first,E=t.second,C=e.getAxes(),u=!0;return j.each(C,function(D,P){P.used&&(anyUsed=!1)}),j.each(C,function(D,P){if(P.used||u){var S=P.c2p(y[P.direction]),x=P.c2p(E[P.direction]);v[D]={from:Math.min(S,x),to:Math.max(S,x)}}}),v}function o(v){var y=d();y.ctrlKey=v.ctrlKey,y.metaKey=v.metaKey,e.getPlaceholder().trigger("plotselected",[y]),y.xaxis&&y.yaxis&&e.getPlaceholder().trigger("selected",[{x1:y.xaxis.from,y1:y.yaxis.from,x2:y.xaxis.to,y2:y.yaxis.to}])}function l(v,y,E){return y<v?v:y>E?E:y}function a(v,y){var E=e.getOptions(),C=e.getPlaceholder().offset(),u=e.getPlotOffset();v.x=l(0,y.pageX-C.left-u.left,e.width()),v.y=l(0,y.pageY-C.top-u.top,e.height()),E.selection.mode=="y"&&(v.x=v==t.first?0:e.width()),E.selection.mode=="x"&&(v.y=v==t.first?0:e.height())}function g(v){v.pageX!=null&&(a(t.second,v),b()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):c(!0))}function c(v){t.show&&(t.show=!1,e.triggerRedrawOverlay(),v||e.getPlaceholder().trigger("plotunselected",[]))}function h(v,y){var E,C,u,D,P=e.getAxes();for(var S in P)if(E=P[S],E.direction==y&&(D=y+E.n+"axis",!v[D]&&E.n==1&&(D=y+"axis"),v[D])){C=v[D].from,u=v[D].to;break}if(v[D]||(E=y=="x"?e.getXAxes()[0]:e.getYAxes()[0],C=v[y+"1"],u=v[y+"2"]),C!=null&&u!=null&&C>u){var x=C;C=u,u=x}return{from:C,to:u,axis:E}}function f(v,y){var E,C,u=e.getOptions();u.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(C=h(v,"x"),t.first.x=C.axis.p2c(C.from),t.second.x=C.axis.p2c(C.to)),u.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(C=h(v,"y"),t.first.y=C.axis.p2c(C.from),t.second.y=C.axis.p2c(C.to)),t.show=!0,e.triggerRedrawOverlay(),!y&&b()&&o()}function b(){var v=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=v&&Math.abs(t.second.y-t.first.y)>=v}e.clearSelection=c,e.setSelection=f,e.getSelection=d,e.hooks.bindEvents.push(function(v,y){var E=v.getOptions();E.selection.mode!=null&&(y.mousemove(s),y.mousedown(r))}),e.hooks.drawOverlay.push(function(v,y){if(t.show&&b()){var E=v.getPlotOffset(),C=v.getOptions();y.save(),y.translate(E.left,E.top);var u=j.color.parse(C.selection.color);y.strokeStyle=u.scale("a",.8).toString(),y.lineWidth=1,y.lineJoin=C.selection.shape,y.fillStyle=u.scale("a",.4).toString();var D=Math.min(t.first.x,t.second.x)+.5,P=Math.min(t.first.y,t.second.y)+.5,S=Math.abs(t.second.x-t.first.x)-1,x=Math.abs(t.second.y-t.first.y)-1;y.fillRect(D,P,S,x),y.strokeRect(D,P,S,x),y.restore()}}),e.hooks.shutdown.push(function(v,y){y.unbind("mousemove",s),y.unbind("mousedown",r),i&&(j(document).unbind("mouseup",i),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}j.plot.plugins.push({init:I,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(j){var I={series:{stack:null}};function e(t){function n(s,r){for(var m=null,d=0;d<r.length&&s!=r[d];++d)r[d].stack==s.stack&&(m=r[d]);return m}function i(s,r,m){if(!(r.stack==null||r.stack===!1)){var d=n(r,s.getData());if(d){for(var o=m.pointsize,l=m.points,a=d.datapoints.pointsize,g=d.datapoints.points,c=[],h,f,b,v,y,E,C=r.lines.show,u=r.bars.horizontal,D=o>2&&(u?m.format[2].x:m.format[2].y),P=C&&r.lines.steps,S=u?1:0,x=u?0:1,M=0,R=0,O,T;!(M>=l.length&&R>=g.length);){if(O=c.length,M<l.length&&l[M]==null){for(T=0;T<o;++T)c.push(l[M+T]);M+=o}else if(M>=l.length){for(T=0;T<o;++T)c.push(g[R+T]);D&&(c[O+2]=g[R+x]),R+=a}else if(R>=g.length){for(T=0;T<o;++T)c.push(l[M+T]);M+=o}else if(R<g.length&&g[R]==null)R+=a;else{if(h=l[M+S],f=l[M+x],v=g[R+S],y=g[R+x],E=0,h==v){for(T=0;T<o;++T)c.push(l[M+T]);c[O+x]+=y,E=y,M+=o,R+=a}else if(h>v){if(M==0){for(T=0;T<o;++T)c.push(g[R+T]);E=y}if(M>0&&l[M-o]!=null){for(b=0,c.push(v),c.push(b+y),T=2;T<o;++T)c.push(l[M+T]);E=y}R+=a}else{for(T=0;T<o;++T)c.push(l[M+T]);R>0&&g[R-a]!=null&&(E=0),c[O+x]+=E,M+=o}fromgap=!1,O!=c.length&&D&&(c[O+2]=E)}if(P&&O!=c.length&&O>0&&c[O]!=null&&c[O]!=c[O-o]&&c[O+1]!=c[O-o+1]){for(T=0;T<o;++T)c[O+o+T]=c[O+T];c[O+1]=c[O-o+1]}}m.points=c}}}t.hooks.processDatapoints.push(i)}j.plot.plugins.push({init:e,options:I,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(j){var I={series:{stackpercent:null}};function e(t){var n={},i=!1,s={};function r(o,l,a,g){if(i||(i=!0,s=m(o.getData())),l.stackpercent==!0){var c=a.length;l.percents=[];var h=0,f=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(h=1,f=0);for(var b=0;b<c;b++){var v=s[a[b][h]+""];v>0?l.percents.push(a[b][f]*100/v):l.percents.push(0)}}}function m(o){var l=o.length,a={};if(l>0){for(var g=0;g<l;g++)if(o[g].stackpercent){var c=0,h=1;o[g].bars&&o[g].bars.horizontal&&o[g].bars.horizontal===!0&&(c=1,h=0);for(var f=o[g].data.length,b=0;b<f;b++){var v=0;o[g].data[b][1]!=null&&(v=o[g].data[b][h]),a[o[g].data[b][c]+""]?a[o[g].data[b][c]+""]+=v:a[o[g].data[b][c]+""]=v}}}return a}function d(o,l,a){if(l.stackpercent){i||(s=m(o.getData()));var g=[],c=0,h=1;l.bars&&l.bars.horizontal&&l.bars.horizontal===!0&&(c=1,h=0);for(var f=0;f<a.points.length;f+=3)n[a.points[f+c]]||(n[a.points[f+c]]=0),g[f+c]=a.points[f+c],g[f+h]=a.points[f+h]+n[a.points[f+c]],g[f+2]=n[a.points[f+c]],n[a.points[f+c]]+=a.points[f+h],s[g[f+c]+""]>0?(g[f+h]=g[f+h]*100/s[g[f+c]+""],g[f+2]=g[f+2]*100/s[g[f+c]+""]):(g[f+h]=0,g[f+2]=0);a.points=g}}t.hooks.processRawData.push(r),t.hooks.processDatapoints.push(d)}j.plot.plugins.push({init:e,options:I,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(j){var I={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(l,a){return a*Math.floor(l/a)}function t(l,a,g,c){if(typeof l.strftime=="function")return l.strftime(a);var h=function(D,P){return D=""+D,P=""+(P??"0"),D.length==1?P+D:D},f=[],b=!1,v=l.getHours(),y=v<12;g==null&&(g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),c==null&&(c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var E;v>12?E=v-12:v==0?E=12:E=v;for(var C=0;C<a.length;++C){var u=a.charAt(C);if(b){switch(u){case"a":u=""+c[l.getDay()];break;case"b":u=""+g[l.getMonth()];break;case"d":u=h(l.getDate(),"");break;case"e":u=h(l.getDate()," ");break;case"h":case"H":u=h(v);break;case"I":u=h(E);break;case"l":u=h(E," ");break;case"m":u=h(l.getMonth()+1,"");break;case"M":u=h(l.getMinutes());break;case"q":u=""+(Math.floor(l.getMonth()/3)+1);break;case"S":u=h(l.getSeconds());break;case"y":u=h(l.getFullYear()%100);break;case"Y":u=""+l.getFullYear();break;case"p":u=y?"am":"pm";break;case"P":u=y?"AM":"PM";break;case"w":u=""+l.getDay();break}f.push(u),b=!1}else u=="%"?b=!0:f.push(u)}return f.join("")}function n(l){function a(f,b,v,y){f[b]=function(){return v[y].apply(v,arguments)}}var g={date:l};l.strftime!=null&&a(g,"strftime",l,"strftime"),a(g,"getTime",l,"getTime"),a(g,"setTime",l,"setTime");for(var c=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],h=0;h<c.length;h++)a(g,"get"+c[h],l,"getUTC"+c[h]),a(g,"set"+c[h],l,"setUTC"+c[h]);return g}function i(l,a){if(a.timezone=="browser")return new Date(l);if(!a.timezone||a.timezone=="utc")return n(new Date(l));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var g=new timezoneJS.Date;return g.setTimezone(a.timezone),g.setTime(l),g}else return n(new Date(l))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],m=r.concat([[3,"month"],[6,"month"],[1,"year"]]),d=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function o(l){l.hooks.processOptions.push(function(a,g){j.each(a.getAxes(),function(c,h){var f=h.options;f.mode=="time"&&(h.tickGenerator=function(b){var v=[],y=i(b.min,f),E=0,C=f.tickSize&&f.tickSize[1]==="quarter"||f.minTickSize&&f.minTickSize[1]==="quarter"?d:m;f.minTickSize!=null&&(typeof f.tickSize=="number"?E=f.tickSize:E=f.minTickSize[0]*s[f.minTickSize[1]]);for(var u=0;u<C.length-1&&!(b.delta<(C[u][0]*s[C[u][1]]+C[u+1][0]*s[C[u+1][1]])/2&&C[u][0]*s[C[u][1]]>=E);++u);var D=C[u][0],P=C[u][1];if(P=="year"){if(f.minTickSize!=null&&f.minTickSize[1]=="year")D=Math.floor(f.minTickSize[0]);else{var S=Math.pow(10,Math.floor(Math.log(b.delta/s.year)/Math.LN10)),x=b.delta/s.year/S;x<1.5?D=1:x<3?D=2:x<7.5?D=5:D=10,D*=S}D<1&&(D=1)}b.tickSize=f.tickSize||[D,P];var M=b.tickSize[0];P=b.tickSize[1];var R=M*s[P];P=="second"?y.setSeconds(e(y.getSeconds(),M)):P=="minute"?y.setMinutes(e(y.getMinutes(),M)):P=="hour"?y.setHours(e(y.getHours(),M)):P=="month"?y.setMonth(e(y.getMonth(),M)):P=="quarter"?y.setMonth(3*e(y.getMonth()/3,M)):P=="year"&&y.setFullYear(e(y.getFullYear(),M)),y.setMilliseconds(0),R>=s.minute&&y.setSeconds(0),R>=s.hour&&y.setMinutes(0),R>=s.day&&y.setHours(0),R>=s.day*4&&y.setDate(1),R>=s.month*2&&y.setMonth(e(y.getMonth(),3)),R>=s.quarter*2&&y.setMonth(e(y.getMonth(),6)),R>=s.year&&y.setMonth(0);var O=0,T=Number.NaN,U;do if(U=T,T=y.getTime(),v.push(T),P=="month"||P=="quarter")if(M<1){y.setDate(1);var L=y.getTime();y.setMonth(y.getMonth()+(P=="quarter"?3:1));var V=y.getTime();y.setTime(T+O*s.hour+(V-L)*M),O=y.getHours(),y.setHours(0)}else y.setMonth(y.getMonth()+M*(P=="quarter"?3:1));else P=="year"?y.setFullYear(y.getFullYear()+M):y.setTime(T+R);while(T<b.max&&T!=U);return v},h.tickFormatter=function(b,v){var y=i(b,v.options);if(f.timeformat!=null)return t(y,f.timeformat,f.monthNames,f.dayNames);var E=v.options.tickSize&&v.options.tickSize[1]=="quarter"||v.options.minTickSize&&v.options.minTickSize[1]=="quarter",C=v.tickSize[0]*s[v.tickSize[1]],u=v.max-v.min,D=f.twelveHourClock?" %p":"",P=f.twelveHourClock?"%I":"%H",S;C<s.minute?S=P+":%M:%S"+D:C<s.day?u<2*s.day?S=P+":%M"+D:S="%b %d "+P+":%M"+D:C<s.month?S="%b %d":E&&C<s.quarter||!E&&C<s.year?u<s.year?S="%b":S="%b %Y":E&&C<s.year?u<s.year?S="Q%q":S="Q%q %Y":S="%Y";var x=t(y,S,f.monthNames,f.dayNames);return x})})})}j.plot.plugins.push({init:o,options:I,name:"time",version:"1.0"}),j.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=8446.7194bb5be971936915ed.js.map